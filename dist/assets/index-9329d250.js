var tL=Object.defineProperty;var iL=(t,e,i)=>e in t?tL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var rL=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Jc=(t,e,i)=>(iL(t,typeof e!="symbol"?e+"":e,i),i);var xve=rL((De,Le)=>{function sL(t,e){for(var i=0;i<e.length;i++){const r=e[i];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const n=Object.getOwnPropertyDescriptor(r,s);n&&Object.defineProperty(t,s,n.get?n:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();var NE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function SC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var EC={exports:{}},dv={},kC={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gh=Symbol.for("react.element"),nL=Symbol.for("react.portal"),aL=Symbol.for("react.fragment"),oL=Symbol.for("react.strict_mode"),cL=Symbol.for("react.profiler"),dL=Symbol.for("react.provider"),lL=Symbol.for("react.context"),uL=Symbol.for("react.forward_ref"),pL=Symbol.for("react.suspense"),hL=Symbol.for("react.memo"),gL=Symbol.for("react.lazy"),UE=Symbol.iterator;function mL(t){return t===null||typeof t!="object"?null:(t=UE&&t[UE]||t["@@iterator"],typeof t=="function"?t:null)}var TC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xC=Object.assign,PC={};function Dl(t,e,i){this.props=t,this.context=e,this.refs=PC,this.updater=i||TC}Dl.prototype.isReactComponent={};Dl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Dl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function CC(){}CC.prototype=Dl.prototype;function qw(t,e,i){this.props=t,this.context=e,this.refs=PC,this.updater=i||TC}var Jw=qw.prototype=new CC;Jw.constructor=qw;xC(Jw,Dl.prototype);Jw.isPureReactComponent=!0;var jE=Array.isArray,RC=Object.prototype.hasOwnProperty,Kw={current:null},AC={key:!0,ref:!0,__self:!0,__source:!0};function IC(t,e,i){var r,s={},n=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(n=""+e.key),e)RC.call(e,r)&&!AC.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=i;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:gh,type:t,key:n,ref:a,props:s,_owner:Kw.current}}function fL(t,e){return{$$typeof:gh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yw(t){return typeof t=="object"&&t!==null&&t.$$typeof===gh}function vL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return e[i]})}var $E=/\/+/g;function Sy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vL(""+t.key):e.toString(36)}function Fg(t,e,i,r,s){var n=typeof t;(n==="undefined"||n==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(n){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case gh:case nL:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Sy(a,0):r,jE(s)?(i="",t!=null&&(i=t.replace($E,"$&/")+"/"),Fg(s,e,i,"",function(d){return d})):s!=null&&(Yw(s)&&(s=fL(s,i+(!s.key||a&&a.key===s.key?"":(""+s.key).replace($E,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",jE(t))for(var o=0;o<t.length;o++){n=t[o];var c=r+Sy(n,o);a+=Fg(n,e,i,c,s)}else if(c=mL(t),typeof c=="function")for(t=c.call(t),o=0;!(n=t.next()).done;)n=n.value,c=r+Sy(n,o++),a+=Fg(n,e,i,c,s);else if(n==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Bh(t,e,i){if(t==null)return t;var r=[],s=0;return Fg(t,r,"","",function(n){return e.call(i,n,s++)}),r}function yL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rr={current:null},Vg={transition:null},bL={ReactCurrentDispatcher:rr,ReactCurrentBatchConfig:Vg,ReactCurrentOwner:Kw};je.Children={map:Bh,forEach:function(t,e,i){Bh(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return Bh(t,function(){e++}),e},toArray:function(t){return Bh(t,function(e){return e})||[]},only:function(t){if(!Yw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};je.Component=Dl;je.Fragment=aL;je.Profiler=cL;je.PureComponent=qw;je.StrictMode=oL;je.Suspense=pL;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bL;je.cloneElement=function(t,e,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xC({},t.props),s=t.key,n=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(n=e.ref,a=Kw.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)RC.call(e,c)&&!AC.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=i;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:gh,type:t.type,key:s,ref:n,props:r,_owner:a}};je.createContext=function(t){return t={$$typeof:lL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dL,_context:t},t.Consumer=t};je.createElement=IC;je.createFactory=function(t){var e=IC.bind(null,t);return e.type=t,e};je.createRef=function(){return{current:null}};je.forwardRef=function(t){return{$$typeof:uL,render:t}};je.isValidElement=Yw;je.lazy=function(t){return{$$typeof:gL,_payload:{_status:-1,_result:t},_init:yL}};je.memo=function(t,e){return{$$typeof:hL,type:t,compare:e===void 0?null:e}};je.startTransition=function(t){var e=Vg.transition;Vg.transition={};try{t()}finally{Vg.transition=e}};je.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};je.useCallback=function(t,e){return rr.current.useCallback(t,e)};je.useContext=function(t){return rr.current.useContext(t)};je.useDebugValue=function(){};je.useDeferredValue=function(t){return rr.current.useDeferredValue(t)};je.useEffect=function(t,e){return rr.current.useEffect(t,e)};je.useId=function(){return rr.current.useId()};je.useImperativeHandle=function(t,e,i){return rr.current.useImperativeHandle(t,e,i)};je.useInsertionEffect=function(t,e){return rr.current.useInsertionEffect(t,e)};je.useLayoutEffect=function(t,e){return rr.current.useLayoutEffect(t,e)};je.useMemo=function(t,e){return rr.current.useMemo(t,e)};je.useReducer=function(t,e,i){return rr.current.useReducer(t,e,i)};je.useRef=function(t){return rr.current.useRef(t)};je.useState=function(t){return rr.current.useState(t)};je.useSyncExternalStore=function(t,e,i){return rr.current.useSyncExternalStore(t,e,i)};je.useTransition=function(){return rr.current.useTransition()};je.version="18.2.0";kC.exports=je;var Q=kC.exports;const vl=SC(Q),wL=sL({__proto__:null,default:vl},[Q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _L=Q,SL=Symbol.for("react.element"),EL=Symbol.for("react.fragment"),kL=Object.prototype.hasOwnProperty,TL=_L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xL={key:!0,ref:!0,__self:!0,__source:!0};function OC(t,e,i){var r,s={},n=null,a=null;i!==void 0&&(n=""+i),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)kL.call(e,r)&&!xL.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:SL,type:t,key:n,ref:a,props:s,_owner:TL.current}}dv.Fragment=EL;dv.jsx=OC;dv.jsxs=OC;EC.exports=dv;var Y=EC.exports,yb={},MC={exports:{}},Nr={},DC={exports:{}},LC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,H){var Z=F.length;F.push(H);e:for(;0<Z;){var ze=Z-1>>>1,at=F[ze];if(0<s(at,H))F[ze]=H,F[Z]=at,Z=ze;else break e}}function i(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var H=F[0],Z=F.pop();if(Z!==H){F[0]=Z;e:for(var ze=0,at=F.length,kt=at>>>1;ze<kt;){var mi=2*(ze+1)-1,zs=F[mi],Ti=mi+1,_o=F[Ti];if(0>s(zs,Z))Ti<at&&0>s(_o,zs)?(F[ze]=_o,F[Ti]=Z,ze=Ti):(F[ze]=zs,F[mi]=Z,ze=mi);else if(Ti<at&&0>s(_o,Z))F[ze]=_o,F[Ti]=Z,ze=Ti;else break e}}return H}function s(F,H){var Z=F.sortIndex-H.sortIndex;return Z!==0?Z:F.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var n=performance;t.unstable_now=function(){return n.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],d=[],u=1,p=null,g=3,m=!1,f=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(F){for(var H=i(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=F)r(d),H.sortIndex=H.expirationTime,e(c,H);else break;H=i(d)}}function P(F){if(b=!1,k(F),!f)if(i(c)!==null)f=!0,$t(D);else{var H=i(d);H!==null&&os(P,H.startTime-F)}}function D(F,H){f=!1,b&&(b=!1,v(G),G=-1),m=!0;var Z=g;try{for(k(H),p=i(c);p!==null&&(!(p.expirationTime>H)||F&&!oe());){var ze=p.callback;if(typeof ze=="function"){p.callback=null,g=p.priorityLevel;var at=ze(p.expirationTime<=H);H=t.unstable_now(),typeof at=="function"?p.callback=at:p===i(c)&&r(c),k(H)}else r(c);p=i(c)}if(p!==null)var kt=!0;else{var mi=i(d);mi!==null&&os(P,mi.startTime-H),kt=!1}return kt}finally{p=null,g=Z,m=!1}}var M=!1,B=null,G=-1,ne=5,ie=-1;function oe(){return!(t.unstable_now()-ie<ne)}function Re(){if(B!==null){var F=t.unstable_now();ie=F;var H=!0;try{H=B(!0,F)}finally{H?Ke():(M=!1,B=null)}}else M=!1}var Ke;if(typeof _=="function")Ke=function(){_(Re)};else if(typeof MessageChannel<"u"){var lt=new MessageChannel,Jt=lt.port2;lt.port1.onmessage=Re,Ke=function(){Jt.postMessage(null)}}else Ke=function(){w(Re,0)};function $t(F){B=F,M||(M=!0,Ke())}function os(F,H){G=w(function(){F(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,$t(D))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(F){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var Z=g;g=H;try{return F()}finally{g=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,H){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Z=g;g=F;try{return H()}finally{g=Z}},t.unstable_scheduleCallback=function(F,H,Z){var ze=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ze+Z:ze):Z=ze,F){case 1:var at=-1;break;case 2:at=250;break;case 5:at=1073741823;break;case 4:at=1e4;break;default:at=5e3}return at=Z+at,F={id:u++,callback:H,priorityLevel:F,startTime:Z,expirationTime:at,sortIndex:-1},Z>ze?(F.sortIndex=Z,e(d,F),i(c)===null&&F===i(d)&&(b?(v(G),G=-1):b=!0,os(P,Z-ze))):(F.sortIndex=at,e(c,F),f||m||(f=!0,$t(D))),F},t.unstable_shouldYield=oe,t.unstable_wrapCallback=function(F){var H=g;return function(){var Z=g;g=H;try{return F.apply(this,arguments)}finally{g=Z}}}})(LC);DC.exports=LC;var PL=DC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NC=Q,Lr=PL;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UC=new Set,Rp={};function Nc(t,e){yl(t,e),yl(t+"Capture",e)}function yl(t,e){for(Rp[t]=e,t=0;t<e.length;t++)UC.add(e[t])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bb=Object.prototype.hasOwnProperty,CL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zE={},FE={};function RL(t){return bb.call(FE,t)?!0:bb.call(zE,t)?!1:CL.test(t)?FE[t]=!0:(zE[t]=!0,!1)}function AL(t,e,i,r){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function IL(t,e,i,r){if(e===null||typeof e>"u"||AL(t,e,i,r))return!0;if(r)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sr(t,e,i,r,s,n,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=n,this.removeEmptyString=a}var Ui={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ui[t]=new sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ui[e]=new sr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ui[t]=new sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ui[t]=new sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ui[t]=new sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ui[t]=new sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ui[t]=new sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ui[t]=new sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ui[t]=new sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qw=/[\-:]([a-z])/g;function Zw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qw,Zw);Ui[e]=new sr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qw,Zw);Ui[e]=new sr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qw,Zw);Ui[e]=new sr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ui[t]=new sr(t,1,!1,t.toLowerCase(),null,!1,!1)});Ui.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ui[t]=new sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xw(t,e,i,r){var s=Ui.hasOwnProperty(e)?Ui[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(IL(e,i,s,r)&&(i=null),r||s===null?RL(e)&&(i===null?t.removeAttribute(e):t.setAttribute(e,""+i)):s.mustUseProperty?t[s.propertyName]=i===null?s.type===3?!1:"":i:(e=s.attributeName,r=s.attributeNamespace,i===null?t.removeAttribute(e):(s=s.type,i=s===3||s===4&&i===!0?"":""+i,r?t.setAttributeNS(r,e,i):t.setAttribute(e,i))))}var ta=NC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hh=Symbol.for("react.element"),Ud=Symbol.for("react.portal"),jd=Symbol.for("react.fragment"),e_=Symbol.for("react.strict_mode"),wb=Symbol.for("react.profiler"),jC=Symbol.for("react.provider"),$C=Symbol.for("react.context"),t_=Symbol.for("react.forward_ref"),_b=Symbol.for("react.suspense"),Sb=Symbol.for("react.suspense_list"),i_=Symbol.for("react.memo"),Ia=Symbol.for("react.lazy"),zC=Symbol.for("react.offscreen"),VE=Symbol.iterator;function tu(t){return t===null||typeof t!="object"?null:(t=VE&&t[VE]||t["@@iterator"],typeof t=="function"?t:null)}var It=Object.assign,Ey;function $u(t){if(Ey===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);Ey=e&&e[1]||""}return`
`+Ey+t}var ky=!1;function Ty(t,e){if(!t||ky)return"";ky=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),n=r.stack.split(`
`),a=s.length-1,o=n.length-1;1<=a&&0<=o&&s[a]!==n[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==n[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==n[o]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{ky=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?$u(t):""}function OL(t){switch(t.tag){case 5:return $u(t.type);case 16:return $u("Lazy");case 13:return $u("Suspense");case 19:return $u("SuspenseList");case 0:case 2:case 15:return t=Ty(t.type,!1),t;case 11:return t=Ty(t.type.render,!1),t;case 1:return t=Ty(t.type,!0),t;default:return""}}function Eb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jd:return"Fragment";case Ud:return"Portal";case wb:return"Profiler";case e_:return"StrictMode";case _b:return"Suspense";case Sb:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $C:return(t.displayName||"Context")+".Consumer";case jC:return(t._context.displayName||"Context")+".Provider";case t_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case i_:return e=t.displayName||null,e!==null?e:Eb(t.type)||"Memo";case Ia:e=t._payload,t=t._init;try{return Eb(t(e))}catch{}}return null}function ML(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Eb(e);case 8:return e===e_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function so(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function FC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DL(t){var e=FC(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var s=i.get,n=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,n.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gh(t){t._valueTracker||(t._valueTracker=DL(t))}function VC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),r="";return t&&(r=FC(t)?t.checked?"true":"false":t.value),t=r,t!==i?(e.setValue(t),!0):!1}function Fm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kb(t,e){var i=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function BE(t,e){var i=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;i=so(e.value!=null?e.value:i),t._wrapperState={initialChecked:r,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function BC(t,e){e=e.checked,e!=null&&Xw(t,"checked",e,!1)}function Tb(t,e){BC(t,e);var i=so(e.value),r=e.type;if(i!=null)r==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xb(t,e.type,i):e.hasOwnProperty("defaultValue")&&xb(t,e.type,so(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function HE(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function xb(t,e,i){(e!=="number"||Fm(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var zu=Array.isArray;function Zd(t,e,i,r){if(t=t.options,e){e={};for(var s=0;s<i.length;s++)e["$"+i[s]]=!0;for(i=0;i<t.length;i++)s=e.hasOwnProperty("$"+t[i].value),t[i].selected!==s&&(t[i].selected=s),s&&r&&(t[i].defaultSelected=!0)}else{for(i=""+so(i),e=null,s=0;s<t.length;s++){if(t[s].value===i){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Pb(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function GE(t,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(J(92));if(zu(i)){if(1<i.length)throw Error(J(93));i=i[0]}e=i}e==null&&(e=""),i=e}t._wrapperState={initialValue:so(i)}}function HC(t,e){var i=so(e.value),r=so(e.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),e.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),r!=null&&(t.defaultValue=""+r)}function WE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function GC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cb(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?GC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wh,WC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,i,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wh=Wh||document.createElement("div"),Wh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ap(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var np={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LL=["Webkit","ms","Moz","O"];Object.keys(np).forEach(function(t){LL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),np[e]=np[t]})});function qC(t,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||np.hasOwnProperty(t)&&np[t]?(""+e).trim():e+"px"}function JC(t,e){t=t.style;for(var i in e)if(e.hasOwnProperty(i)){var r=i.indexOf("--")===0,s=qC(i,e[i],r);i==="float"&&(i="cssFloat"),r?t.setProperty(i,s):t[i]=s}}var NL=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rb(t,e){if(e){if(NL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Ab(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ib=null;function r_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ob=null,Xd=null,el=null;function qE(t){if(t=vh(t)){if(typeof Ob!="function")throw Error(J(280));var e=t.stateNode;e&&(e=gv(e),Ob(t.stateNode,t.type,e))}}function KC(t){Xd?el?el.push(t):el=[t]:Xd=t}function YC(){if(Xd){var t=Xd,e=el;if(el=Xd=null,qE(t),e)for(t=0;t<e.length;t++)qE(e[t])}}function QC(t,e){return t(e)}function ZC(){}var xy=!1;function XC(t,e,i){if(xy)return t(e,i);xy=!0;try{return QC(t,e,i)}finally{xy=!1,(Xd!==null||el!==null)&&(ZC(),YC())}}function Ip(t,e){var i=t.stateNode;if(i===null)return null;var r=gv(i);if(r===null)return null;i=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(J(231,e,typeof i));return i}var Mb=!1;if(Wn)try{var iu={};Object.defineProperty(iu,"passive",{get:function(){Mb=!0}}),window.addEventListener("test",iu,iu),window.removeEventListener("test",iu,iu)}catch{Mb=!1}function UL(t,e,i,r,s,n,a,o,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(i,d)}catch(u){this.onError(u)}}var ap=!1,Vm=null,Bm=!1,Db=null,jL={onError:function(t){ap=!0,Vm=t}};function $L(t,e,i,r,s,n,a,o,c){ap=!1,Vm=null,UL.apply(jL,arguments)}function zL(t,e,i,r,s,n,a,o,c){if($L.apply(this,arguments),ap){if(ap){var d=Vm;ap=!1,Vm=null}else throw Error(J(198));Bm||(Bm=!0,Db=d)}}function Uc(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function e5(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function JE(t){if(Uc(t)!==t)throw Error(J(188))}function FL(t){var e=t.alternate;if(!e){if(e=Uc(t),e===null)throw Error(J(188));return e!==t?null:t}for(var i=t,r=e;;){var s=i.return;if(s===null)break;var n=s.alternate;if(n===null){if(r=s.return,r!==null){i=r;continue}break}if(s.child===n.child){for(n=s.child;n;){if(n===i)return JE(s),t;if(n===r)return JE(s),e;n=n.sibling}throw Error(J(188))}if(i.return!==r.return)i=s,r=n;else{for(var a=!1,o=s.child;o;){if(o===i){a=!0,i=s,r=n;break}if(o===r){a=!0,r=s,i=n;break}o=o.sibling}if(!a){for(o=n.child;o;){if(o===i){a=!0,i=n,r=s;break}if(o===r){a=!0,r=n,i=s;break}o=o.sibling}if(!a)throw Error(J(189))}}if(i.alternate!==r)throw Error(J(190))}if(i.tag!==3)throw Error(J(188));return i.stateNode.current===i?t:e}function t5(t){return t=FL(t),t!==null?i5(t):null}function i5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=i5(t);if(e!==null)return e;t=t.sibling}return null}var r5=Lr.unstable_scheduleCallback,KE=Lr.unstable_cancelCallback,VL=Lr.unstable_shouldYield,BL=Lr.unstable_requestPaint,Gt=Lr.unstable_now,HL=Lr.unstable_getCurrentPriorityLevel,s_=Lr.unstable_ImmediatePriority,s5=Lr.unstable_UserBlockingPriority,Hm=Lr.unstable_NormalPriority,GL=Lr.unstable_LowPriority,n5=Lr.unstable_IdlePriority,lv=null,nn=null;function WL(t){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(lv,t,void 0,(t.current.flags&128)===128)}catch{}}var As=Math.clz32?Math.clz32:KL,qL=Math.log,JL=Math.LN2;function KL(t){return t>>>=0,t===0?32:31-(qL(t)/JL|0)|0}var qh=64,Jh=4194304;function Fu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gm(t,e){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,n=t.pingedLanes,a=i&268435455;if(a!==0){var o=a&~s;o!==0?r=Fu(o):(n&=a,n!==0&&(r=Fu(n)))}else a=i&~s,a!==0?r=Fu(a):n!==0&&(r=Fu(n));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===16&&(n&4194240)!==0))return e;if(r&4&&(r|=i&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)i=31-As(e),s=1<<i,r|=t[i],e&=~s;return r}function YL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QL(t,e){for(var i=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,n=t.pendingLanes;0<n;){var a=31-As(n),o=1<<a,c=s[a];c===-1?(!(o&i)||o&r)&&(s[a]=YL(o,e)):c<=e&&(t.expiredLanes|=o),n&=~o}}function Lb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function a5(){var t=qh;return qh<<=1,!(qh&4194240)&&(qh=64),t}function Py(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function mh(t,e,i){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-As(e),t[e]=i}function ZL(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<i;){var s=31-As(i),n=1<<s;e[s]=0,r[s]=-1,t[s]=-1,i&=~n}}function n_(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var r=31-As(i),s=1<<r;s&e|t[r]&e&&(t[r]|=e),i&=~s}}var it=0;function o5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var c5,a_,d5,l5,u5,Nb=!1,Kh=[],qa=null,Ja=null,Ka=null,Op=new Map,Mp=new Map,La=[],XL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function YE(t,e){switch(t){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":Op.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mp.delete(e.pointerId)}}function ru(t,e,i,r,s,n){return t===null||t.nativeEvent!==n?(t={blockedOn:e,domEventName:i,eventSystemFlags:r,nativeEvent:n,targetContainers:[s]},e!==null&&(e=vh(e),e!==null&&a_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function eN(t,e,i,r,s){switch(e){case"focusin":return qa=ru(qa,t,e,i,r,s),!0;case"dragenter":return Ja=ru(Ja,t,e,i,r,s),!0;case"mouseover":return Ka=ru(Ka,t,e,i,r,s),!0;case"pointerover":var n=s.pointerId;return Op.set(n,ru(Op.get(n)||null,t,e,i,r,s)),!0;case"gotpointercapture":return n=s.pointerId,Mp.set(n,ru(Mp.get(n)||null,t,e,i,r,s)),!0}return!1}function p5(t){var e=oc(t.target);if(e!==null){var i=Uc(e);if(i!==null){if(e=i.tag,e===13){if(e=e5(i),e!==null){t.blockedOn=e,u5(t.priority,function(){d5(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=Ub(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var r=new i.constructor(i.type,i);Ib=r,i.target.dispatchEvent(r),Ib=null}else return e=vh(i),e!==null&&a_(e),t.blockedOn=i,!1;e.shift()}return!0}function QE(t,e,i){Bg(t)&&i.delete(e)}function tN(){Nb=!1,qa!==null&&Bg(qa)&&(qa=null),Ja!==null&&Bg(Ja)&&(Ja=null),Ka!==null&&Bg(Ka)&&(Ka=null),Op.forEach(QE),Mp.forEach(QE)}function su(t,e){t.blockedOn===e&&(t.blockedOn=null,Nb||(Nb=!0,Lr.unstable_scheduleCallback(Lr.unstable_NormalPriority,tN)))}function Dp(t){function e(s){return su(s,t)}if(0<Kh.length){su(Kh[0],t);for(var i=1;i<Kh.length;i++){var r=Kh[i];r.blockedOn===t&&(r.blockedOn=null)}}for(qa!==null&&su(qa,t),Ja!==null&&su(Ja,t),Ka!==null&&su(Ka,t),Op.forEach(e),Mp.forEach(e),i=0;i<La.length;i++)r=La[i],r.blockedOn===t&&(r.blockedOn=null);for(;0<La.length&&(i=La[0],i.blockedOn===null);)p5(i),i.blockedOn===null&&La.shift()}var tl=ta.ReactCurrentBatchConfig,Wm=!0;function iN(t,e,i,r){var s=it,n=tl.transition;tl.transition=null;try{it=1,o_(t,e,i,r)}finally{it=s,tl.transition=n}}function rN(t,e,i,r){var s=it,n=tl.transition;tl.transition=null;try{it=4,o_(t,e,i,r)}finally{it=s,tl.transition=n}}function o_(t,e,i,r){if(Wm){var s=Ub(t,e,i,r);if(s===null)Uy(t,e,r,qm,i),YE(t,r);else if(eN(s,t,e,i,r))r.stopPropagation();else if(YE(t,r),e&4&&-1<XL.indexOf(t)){for(;s!==null;){var n=vh(s);if(n!==null&&c5(n),n=Ub(t,e,i,r),n===null&&Uy(t,e,r,qm,i),n===s)break;s=n}s!==null&&r.stopPropagation()}else Uy(t,e,r,null,i)}}var qm=null;function Ub(t,e,i,r){if(qm=null,t=r_(r),t=oc(t),t!==null)if(e=Uc(t),e===null)t=null;else if(i=e.tag,i===13){if(t=e5(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qm=t,null}function h5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HL()){case s_:return 1;case s5:return 4;case Hm:case GL:return 16;case n5:return 536870912;default:return 16}default:return 16}}var Va=null,c_=null,Hg=null;function g5(){if(Hg)return Hg;var t,e=c_,i=e.length,r,s="value"in Va?Va.value:Va.textContent,n=s.length;for(t=0;t<i&&e[t]===s[t];t++);var a=i-t;for(r=1;r<=a&&e[i-r]===s[n-r];r++);return Hg=s.slice(t,1<r?1-r:void 0)}function Gg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yh(){return!0}function ZE(){return!1}function Ur(t){function e(i,r,s,n,a){this._reactName=i,this._targetInst=s,this.type=r,this.nativeEvent=n,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(i=t[o],this[o]=i?i(n):n[o]);return this.isDefaultPrevented=(n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1)?Yh:ZE,this.isPropagationStopped=ZE,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Yh)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Yh)},persist:function(){},isPersistent:Yh}),e}var Ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},d_=Ur(Ll),fh=It({},Ll,{view:0,detail:0}),sN=Ur(fh),Cy,Ry,nu,uv=It({},fh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:l_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nu&&(nu&&t.type==="mousemove"?(Cy=t.screenX-nu.screenX,Ry=t.screenY-nu.screenY):Ry=Cy=0,nu=t),Cy)},movementY:function(t){return"movementY"in t?t.movementY:Ry}}),XE=Ur(uv),nN=It({},uv,{dataTransfer:0}),aN=Ur(nN),oN=It({},fh,{relatedTarget:0}),Ay=Ur(oN),cN=It({},Ll,{animationName:0,elapsedTime:0,pseudoElement:0}),dN=Ur(cN),lN=It({},Ll,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uN=Ur(lN),pN=It({},Ll,{data:0}),ek=Ur(pN),hN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mN[t])?!!e[t]:!1}function l_(){return fN}var vN=It({},fh,{key:function(t){if(t.key){var e=hN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:l_,charCode:function(t){return t.type==="keypress"?Gg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yN=Ur(vN),bN=It({},uv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tk=Ur(bN),wN=It({},fh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:l_}),_N=Ur(wN),SN=It({},Ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),EN=Ur(SN),kN=It({},uv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TN=Ur(kN),xN=[9,13,27,32],u_=Wn&&"CompositionEvent"in window,op=null;Wn&&"documentMode"in document&&(op=document.documentMode);var PN=Wn&&"TextEvent"in window&&!op,m5=Wn&&(!u_||op&&8<op&&11>=op),ik=String.fromCharCode(32),rk=!1;function f5(t,e){switch(t){case"keyup":return xN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v5(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $d=!1;function CN(t,e){switch(t){case"compositionend":return v5(e);case"keypress":return e.which!==32?null:(rk=!0,ik);case"textInput":return t=e.data,t===ik&&rk?null:t;default:return null}}function RN(t,e){if($d)return t==="compositionend"||!u_&&f5(t,e)?(t=g5(),Hg=c_=Va=null,$d=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return m5&&e.locale!=="ko"?null:e.data;default:return null}}var AN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AN[t.type]:e==="textarea"}function y5(t,e,i,r){KC(r),e=Jm(e,"onChange"),0<e.length&&(i=new d_("onChange","change",null,i,r),t.push({event:i,listeners:e}))}var cp=null,Lp=null;function IN(t){R5(t,0)}function pv(t){var e=Vd(t);if(VC(e))return t}function ON(t,e){if(t==="change")return e}var b5=!1;if(Wn){var Iy;if(Wn){var Oy="oninput"in document;if(!Oy){var nk=document.createElement("div");nk.setAttribute("oninput","return;"),Oy=typeof nk.oninput=="function"}Iy=Oy}else Iy=!1;b5=Iy&&(!document.documentMode||9<document.documentMode)}function ak(){cp&&(cp.detachEvent("onpropertychange",w5),Lp=cp=null)}function w5(t){if(t.propertyName==="value"&&pv(Lp)){var e=[];y5(e,Lp,t,r_(t)),XC(IN,e)}}function MN(t,e,i){t==="focusin"?(ak(),cp=e,Lp=i,cp.attachEvent("onpropertychange",w5)):t==="focusout"&&ak()}function DN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pv(Lp)}function LN(t,e){if(t==="click")return pv(e)}function NN(t,e){if(t==="input"||t==="change")return pv(e)}function UN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ds=typeof Object.is=="function"?Object.is:UN;function Np(t,e){if(Ds(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var s=i[r];if(!bb.call(e,s)||!Ds(t[s],e[s]))return!1}return!0}function ok(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ck(t,e){var i=ok(t);t=0;for(var r;i;){if(i.nodeType===3){if(r=t+i.textContent.length,t<=e&&r>=e)return{node:i,offset:e-t};t=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ok(i)}}function _5(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_5(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function S5(){for(var t=window,e=Fm();e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=Fm(t.document)}return e}function p_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jN(t){var e=S5(),i=t.focusedElem,r=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&_5(i.ownerDocument.documentElement,i)){if(r!==null&&p_(i)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if(t=(e=i.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=i.textContent.length,n=Math.min(r.start,s);r=r.end===void 0?n:Math.min(r.end,s),!t.extend&&n>r&&(s=r,r=n,n=s),s=ck(i,n);var a=ck(i,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),n>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=i;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)t=e[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $N=Wn&&"documentMode"in document&&11>=document.documentMode,zd=null,jb=null,dp=null,$b=!1;function dk(t,e,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;$b||zd==null||zd!==Fm(r)||(r=zd,"selectionStart"in r&&p_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dp&&Np(dp,r)||(dp=r,r=Jm(jb,"onSelect"),0<r.length&&(e=new d_("onSelect","select",null,e,i),t.push({event:e,listeners:r}),e.target=zd)))}function Qh(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var Fd={animationend:Qh("Animation","AnimationEnd"),animationiteration:Qh("Animation","AnimationIteration"),animationstart:Qh("Animation","AnimationStart"),transitionend:Qh("Transition","TransitionEnd")},My={},E5={};Wn&&(E5=document.createElement("div").style,"AnimationEvent"in window||(delete Fd.animationend.animation,delete Fd.animationiteration.animation,delete Fd.animationstart.animation),"TransitionEvent"in window||delete Fd.transitionend.transition);function hv(t){if(My[t])return My[t];if(!Fd[t])return t;var e=Fd[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in E5)return My[t]=e[i];return t}var k5=hv("animationend"),T5=hv("animationiteration"),x5=hv("animationstart"),P5=hv("transitionend"),C5=new Map,lk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function uo(t,e){C5.set(t,e),Nc(e,[t])}for(var Dy=0;Dy<lk.length;Dy++){var Ly=lk[Dy],zN=Ly.toLowerCase(),FN=Ly[0].toUpperCase()+Ly.slice(1);uo(zN,"on"+FN)}uo(k5,"onAnimationEnd");uo(T5,"onAnimationIteration");uo(x5,"onAnimationStart");uo("dblclick","onDoubleClick");uo("focusin","onFocus");uo("focusout","onBlur");uo(P5,"onTransitionEnd");yl("onMouseEnter",["mouseout","mouseover"]);yl("onMouseLeave",["mouseout","mouseover"]);yl("onPointerEnter",["pointerout","pointerover"]);yl("onPointerLeave",["pointerout","pointerover"]);Nc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vu));function uk(t,e,i){var r=t.type||"unknown-event";t.currentTarget=i,zL(r,e,void 0,t),t.currentTarget=null}function R5(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var r=t[i],s=r.event;r=r.listeners;e:{var n=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==n&&s.isPropagationStopped())break e;uk(s,o,d),n=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,d=o.currentTarget,o=o.listener,c!==n&&s.isPropagationStopped())break e;uk(s,o,d),n=c}}}if(Bm)throw t=Db,Bm=!1,Db=null,t}function ft(t,e){var i=e[Hb];i===void 0&&(i=e[Hb]=new Set);var r=t+"__bubble";i.has(r)||(A5(e,t,2,!1),i.add(r))}function Ny(t,e,i){var r=0;e&&(r|=4),A5(i,t,r,e)}var Zh="_reactListening"+Math.random().toString(36).slice(2);function Up(t){if(!t[Zh]){t[Zh]=!0,UC.forEach(function(i){i!=="selectionchange"&&(VN.has(i)||Ny(i,!1,t),Ny(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zh]||(e[Zh]=!0,Ny("selectionchange",!1,e))}}function A5(t,e,i,r){switch(h5(e)){case 1:var s=iN;break;case 4:s=rN;break;default:s=o_}i=s.bind(null,e,i,t),s=void 0,!Mb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,i,{capture:!0,passive:s}):t.addEventListener(e,i,!0):s!==void 0?t.addEventListener(e,i,{passive:s}):t.addEventListener(e,i,!1)}function Uy(t,e,i,r,s){var n=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;o!==null;){if(a=oc(o),a===null)return;if(c=a.tag,c===5||c===6){r=n=a;continue e}o=o.parentNode}}r=r.return}XC(function(){var d=n,u=r_(i),p=[];e:{var g=C5.get(t);if(g!==void 0){var m=d_,f=t;switch(t){case"keypress":if(Gg(i)===0)break e;case"keydown":case"keyup":m=yN;break;case"focusin":f="focus",m=Ay;break;case"focusout":f="blur",m=Ay;break;case"beforeblur":case"afterblur":m=Ay;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=XE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=aN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=_N;break;case k5:case T5:case x5:m=dN;break;case P5:m=EN;break;case"scroll":m=sN;break;case"wheel":m=TN;break;case"copy":case"cut":case"paste":m=uN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=tk}var b=(e&4)!==0,w=!b&&t==="scroll",v=b?g!==null?g+"Capture":null:g;b=[];for(var _=d,k;_!==null;){k=_;var P=k.stateNode;if(k.tag===5&&P!==null&&(k=P,v!==null&&(P=Ip(_,v),P!=null&&b.push(jp(_,P,k)))),w)break;_=_.return}0<b.length&&(g=new m(g,f,null,i,u),p.push({event:g,listeners:b}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",g&&i!==Ib&&(f=i.relatedTarget||i.fromElement)&&(oc(f)||f[qn]))break e;if((m||g)&&(g=u.window===u?u:(g=u.ownerDocument)?g.defaultView||g.parentWindow:window,m?(f=i.relatedTarget||i.toElement,m=d,f=f?oc(f):null,f!==null&&(w=Uc(f),f!==w||f.tag!==5&&f.tag!==6)&&(f=null)):(m=null,f=d),m!==f)){if(b=XE,P="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(b=tk,P="onPointerLeave",v="onPointerEnter",_="pointer"),w=m==null?g:Vd(m),k=f==null?g:Vd(f),g=new b(P,_+"leave",m,i,u),g.target=w,g.relatedTarget=k,P=null,oc(u)===d&&(b=new b(v,_+"enter",f,i,u),b.target=k,b.relatedTarget=w,P=b),w=P,m&&f)t:{for(b=m,v=f,_=0,k=b;k;k=Kc(k))_++;for(k=0,P=v;P;P=Kc(P))k++;for(;0<_-k;)b=Kc(b),_--;for(;0<k-_;)v=Kc(v),k--;for(;_--;){if(b===v||v!==null&&b===v.alternate)break t;b=Kc(b),v=Kc(v)}b=null}else b=null;m!==null&&pk(p,g,m,b,!1),f!==null&&w!==null&&pk(p,w,f,b,!0)}}e:{if(g=d?Vd(d):window,m=g.nodeName&&g.nodeName.toLowerCase(),m==="select"||m==="input"&&g.type==="file")var D=ON;else if(sk(g))if(b5)D=NN;else{D=DN;var M=MN}else(m=g.nodeName)&&m.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=LN);if(D&&(D=D(t,d))){y5(p,D,i,u);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&xb(g,"number",g.value)}switch(M=d?Vd(d):window,t){case"focusin":(sk(M)||M.contentEditable==="true")&&(zd=M,jb=d,dp=null);break;case"focusout":dp=jb=zd=null;break;case"mousedown":$b=!0;break;case"contextmenu":case"mouseup":case"dragend":$b=!1,dk(p,i,u);break;case"selectionchange":if($N)break;case"keydown":case"keyup":dk(p,i,u)}var B;if(u_)e:{switch(t){case"compositionstart":var G="onCompositionStart";break e;case"compositionend":G="onCompositionEnd";break e;case"compositionupdate":G="onCompositionUpdate";break e}G=void 0}else $d?f5(t,i)&&(G="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(G="onCompositionStart");G&&(m5&&i.locale!=="ko"&&($d||G!=="onCompositionStart"?G==="onCompositionEnd"&&$d&&(B=g5()):(Va=u,c_="value"in Va?Va.value:Va.textContent,$d=!0)),M=Jm(d,G),0<M.length&&(G=new ek(G,t,null,i,u),p.push({event:G,listeners:M}),B?G.data=B:(B=v5(i),B!==null&&(G.data=B)))),(B=PN?CN(t,i):RN(t,i))&&(d=Jm(d,"onBeforeInput"),0<d.length&&(u=new ek("onBeforeInput","beforeinput",null,i,u),p.push({event:u,listeners:d}),u.data=B))}R5(p,e)})}function jp(t,e,i){return{instance:t,listener:e,currentTarget:i}}function Jm(t,e){for(var i=e+"Capture",r=[];t!==null;){var s=t,n=s.stateNode;s.tag===5&&n!==null&&(s=n,n=Ip(t,i),n!=null&&r.unshift(jp(t,n,s)),n=Ip(t,e),n!=null&&r.push(jp(t,n,s))),t=t.return}return r}function Kc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pk(t,e,i,r,s){for(var n=e._reactName,a=[];i!==null&&i!==r;){var o=i,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,s?(c=Ip(i,n),c!=null&&a.unshift(jp(i,c,o))):s||(c=Ip(i,n),c!=null&&a.push(jp(i,c,o)))),i=i.return}a.length!==0&&t.push({event:e,listeners:a})}var BN=/\r\n?/g,HN=/\u0000|\uFFFD/g;function hk(t){return(typeof t=="string"?t:""+t).replace(BN,`
`).replace(HN,"")}function Xh(t,e,i){if(e=hk(e),hk(t)!==e&&i)throw Error(J(425))}function Km(){}var zb=null,Fb=null;function Vb(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bb=typeof setTimeout=="function"?setTimeout:void 0,GN=typeof clearTimeout=="function"?clearTimeout:void 0,gk=typeof Promise=="function"?Promise:void 0,WN=typeof queueMicrotask=="function"?queueMicrotask:typeof gk<"u"?function(t){return gk.resolve(null).then(t).catch(qN)}:Bb;function qN(t){setTimeout(function(){throw t})}function jy(t,e){var i=e,r=0;do{var s=i.nextSibling;if(t.removeChild(i),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(r===0){t.removeChild(s),Dp(e);return}r--}else i!=="$"&&i!=="$?"&&i!=="$!"||r++;i=s}while(i);Dp(e)}function Ya(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return t;e--}else i==="/$"&&e++}t=t.previousSibling}return null}var Nl=Math.random().toString(36).slice(2),tn="__reactFiber$"+Nl,$p="__reactProps$"+Nl,qn="__reactContainer$"+Nl,Hb="__reactEvents$"+Nl,JN="__reactListeners$"+Nl,KN="__reactHandles$"+Nl;function oc(t){var e=t[tn];if(e)return e;for(var i=t.parentNode;i;){if(e=i[qn]||i[tn]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=mk(t);t!==null;){if(i=t[tn])return i;t=mk(t)}return e}t=i,i=t.parentNode}return null}function vh(t){return t=t[tn]||t[qn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function gv(t){return t[$p]||null}var Gb=[],Bd=-1;function po(t){return{current:t}}function _t(t){0>Bd||(t.current=Gb[Bd],Gb[Bd]=null,Bd--)}function ht(t,e){Bd++,Gb[Bd]=t.current,t.current=e}var no={},Wi=po(no),gr=po(!1),Sc=no;function bl(t,e){var i=t.type.contextTypes;if(!i)return no;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},n;for(n in i)s[n]=e[n];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mr(t){return t=t.childContextTypes,t!=null}function Ym(){_t(gr),_t(Wi)}function fk(t,e,i){if(Wi.current!==no)throw Error(J(168));ht(Wi,e),ht(gr,i)}function I5(t,e,i){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return i;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(J(108,ML(t)||"Unknown",s));return It({},i,r)}function Qm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||no,Sc=Wi.current,ht(Wi,t),ht(gr,gr.current),!0}function vk(t,e,i){var r=t.stateNode;if(!r)throw Error(J(169));i?(t=I5(t,e,Sc),r.__reactInternalMemoizedMergedChildContext=t,_t(gr),_t(Wi),ht(Wi,t)):_t(gr),ht(gr,i)}var Rn=null,mv=!1,$y=!1;function O5(t){Rn===null?Rn=[t]:Rn.push(t)}function YN(t){mv=!0,O5(t)}function ho(){if(!$y&&Rn!==null){$y=!0;var t=0,e=it;try{var i=Rn;for(it=1;t<i.length;t++){var r=i[t];do r=r(!0);while(r!==null)}Rn=null,mv=!1}catch(s){throw Rn!==null&&(Rn=Rn.slice(t+1)),r5(s_,ho),s}finally{it=e,$y=!1}}return null}var Hd=[],Gd=0,Zm=null,Xm=0,Br=[],Hr=0,Ec=null,jn=1,$n="";function Mo(t,e){Hd[Gd++]=Xm,Hd[Gd++]=Zm,Zm=t,Xm=e}function M5(t,e,i){Br[Hr++]=jn,Br[Hr++]=$n,Br[Hr++]=Ec,Ec=t;var r=jn;t=$n;var s=32-As(r)-1;r&=~(1<<s),i+=1;var n=32-As(e)+s;if(30<n){var a=s-s%5;n=(r&(1<<a)-1).toString(32),r>>=a,s-=a,jn=1<<32-As(e)+s|i<<s|r,$n=n+t}else jn=1<<n|i<<s|r,$n=t}function h_(t){t.return!==null&&(Mo(t,1),M5(t,1,0))}function g_(t){for(;t===Zm;)Zm=Hd[--Gd],Hd[Gd]=null,Xm=Hd[--Gd],Hd[Gd]=null;for(;t===Ec;)Ec=Br[--Hr],Br[Hr]=null,$n=Br[--Hr],Br[Hr]=null,jn=Br[--Hr],Br[Hr]=null}var Dr=null,Or=null,Et=!1,ws=null;function D5(t,e){var i=Kr(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,e=t.deletions,e===null?(t.deletions=[i],t.flags|=16):e.push(i)}function yk(t,e){switch(t.tag){case 5:var i=t.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dr=t,Or=Ya(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dr=t,Or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(i=Ec!==null?{id:jn,overflow:$n}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},i=Kr(18,null,null,0),i.stateNode=e,i.return=t,t.child=i,Dr=t,Or=null,!0):!1;default:return!1}}function Wb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qb(t){if(Et){var e=Or;if(e){var i=e;if(!yk(t,e)){if(Wb(t))throw Error(J(418));e=Ya(i.nextSibling);var r=Dr;e&&yk(t,e)?D5(r,i):(t.flags=t.flags&-4097|2,Et=!1,Dr=t)}}else{if(Wb(t))throw Error(J(418));t.flags=t.flags&-4097|2,Et=!1,Dr=t}}}function bk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dr=t}function eg(t){if(t!==Dr)return!1;if(!Et)return bk(t),Et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vb(t.type,t.memoizedProps)),e&&(e=Or)){if(Wb(t))throw L5(),Error(J(418));for(;e;)D5(t,e),e=Ya(e.nextSibling)}if(bk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(e===0){Or=Ya(t.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}t=t.nextSibling}Or=null}}else Or=Dr?Ya(t.stateNode.nextSibling):null;return!0}function L5(){for(var t=Or;t;)t=Ya(t.nextSibling)}function wl(){Or=Dr=null,Et=!1}function m_(t){ws===null?ws=[t]:ws.push(t)}var QN=ta.ReactCurrentBatchConfig;function ms(t,e){if(t&&t.defaultProps){e=It({},e),t=t.defaultProps;for(var i in t)e[i]===void 0&&(e[i]=t[i]);return e}return e}var ef=po(null),tf=null,Wd=null,f_=null;function v_(){f_=Wd=tf=null}function y_(t){var e=ef.current;_t(ef),t._currentValue=e}function Jb(t,e,i){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===i)break;t=t.return}}function il(t,e){tf=t,f_=Wd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pr=!0),t.firstContext=null)}function ts(t){var e=t._currentValue;if(f_!==t)if(t={context:t,memoizedValue:e,next:null},Wd===null){if(tf===null)throw Error(J(308));Wd=t,tf.dependencies={lanes:0,firstContext:t}}else Wd=Wd.next=t;return e}var cc=null;function b_(t){cc===null?cc=[t]:cc.push(t)}function N5(t,e,i,r){var s=e.interleaved;return s===null?(i.next=i,b_(e)):(i.next=s.next,s.next=i),e.interleaved=i,Jn(t,r)}function Jn(t,e){t.lanes|=e;var i=t.alternate;for(i!==null&&(i.lanes|=e),i=t,t=t.return;t!==null;)t.childLanes|=e,i=t.alternate,i!==null&&(i.childLanes|=e),i=t,t=t.return;return i.tag===3?i.stateNode:null}var Oa=!1;function w_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function U5(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qa(t,e,i){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,We&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Jn(t,i)}return s=r.interleaved,s===null?(e.next=e,b_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Jn(t,i)}function Wg(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,i|=r,e.lanes=i,n_(t,i)}}function wk(t,e){var i=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var s=null,n=null;if(i=i.firstBaseUpdate,i!==null){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};n===null?s=n=a:n=n.next=a,i=i.next}while(i!==null);n===null?s=n=e:n=n.next=e}else s=n=e;i={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:n,shared:r.shared,effects:r.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function rf(t,e,i,r){var s=t.updateQueue;Oa=!1;var n=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,d=c.next;c.next=null,a===null?n=d:a.next=d,a=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(n!==null){var p=s.baseState;a=0,u=d=c=null,o=n;do{var g=o.lane,m=o.eventTime;if((r&g)===g){u!==null&&(u=u.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=t,b=o;switch(g=e,m=i,b.tag){case 1:if(f=b.payload,typeof f=="function"){p=f.call(m,p,g);break e}p=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=b.payload,g=typeof f=="function"?f.call(m,p,g):f,g==null)break e;p=It({},p,g);break e;case 2:Oa=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[o]:g.push(o))}else m={eventTime:m,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=m,c=p):u=u.next=m,a|=g;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;g=o,o=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(1);if(u===null&&(c=p),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else n===null&&(s.shared.lanes=0);Tc|=a,t.lanes=a,t.memoizedState=p}}function _k(t,e,i){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=i,typeof s!="function")throw Error(J(191,s));s.call(r)}}}var j5=new NC.Component().refs;function Kb(t,e,i,r){e=t.memoizedState,i=i(r,e),i=i==null?e:It({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var fv={isMounted:function(t){return(t=t._reactInternals)?Uc(t)===t:!1},enqueueSetState:function(t,e,i){t=t._reactInternals;var r=tr(),s=Xa(t),n=Hn(r,s);n.payload=e,i!=null&&(n.callback=i),e=Qa(t,n,s),e!==null&&(Is(e,t,s,r),Wg(e,t,s))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var r=tr(),s=Xa(t),n=Hn(r,s);n.tag=1,n.payload=e,i!=null&&(n.callback=i),e=Qa(t,n,s),e!==null&&(Is(e,t,s,r),Wg(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=tr(),r=Xa(t),s=Hn(i,r);s.tag=2,e!=null&&(s.callback=e),e=Qa(t,s,r),e!==null&&(Is(e,t,r,i),Wg(e,t,r))}};function Sk(t,e,i,r,s,n,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,n,a):e.prototype&&e.prototype.isPureReactComponent?!Np(i,r)||!Np(s,n):!0}function $5(t,e,i){var r=!1,s=no,n=e.contextType;return typeof n=="object"&&n!==null?n=ts(n):(s=mr(e)?Sc:Wi.current,r=e.contextTypes,n=(r=r!=null)?bl(t,s):no),e=new e(i,n),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),e}function Ek(t,e,i,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,r),e.state!==t&&fv.enqueueReplaceState(e,e.state,null)}function Yb(t,e,i,r){var s=t.stateNode;s.props=i,s.state=t.memoizedState,s.refs=j5,w_(t);var n=e.contextType;typeof n=="object"&&n!==null?s.context=ts(n):(n=mr(e)?Sc:Wi.current,s.context=bl(t,n)),s.state=t.memoizedState,n=e.getDerivedStateFromProps,typeof n=="function"&&(Kb(t,e,n,i),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&fv.enqueueReplaceState(s,s.state,null),rf(t,i,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function au(t,e,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(J(309));var r=i.stateNode}if(!r)throw Error(J(147,t));var s=r,n=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===n?e.ref:(e=function(a){var o=s.refs;o===j5&&(o=s.refs={}),a===null?delete o[n]:o[n]=a},e._stringRef=n,e)}if(typeof t!="string")throw Error(J(284));if(!i._owner)throw Error(J(290,t))}return t}function tg(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kk(t){var e=t._init;return e(t._payload)}function z5(t){function e(v,_){if(t){var k=v.deletions;k===null?(v.deletions=[_],v.flags|=16):k.push(_)}}function i(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function s(v,_){return v=eo(v,_),v.index=0,v.sibling=null,v}function n(v,_,k){return v.index=k,t?(k=v.alternate,k!==null?(k=k.index,k<_?(v.flags|=2,_):k):(v.flags|=2,_)):(v.flags|=1048576,_)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,_,k,P){return _===null||_.tag!==6?(_=Wy(k,v.mode,P),_.return=v,_):(_=s(_,k),_.return=v,_)}function c(v,_,k,P){var D=k.type;return D===jd?u(v,_,k.props.children,P,k.key):_!==null&&(_.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ia&&kk(D)===_.type)?(P=s(_,k.props),P.ref=au(v,_,k),P.return=v,P):(P=Zg(k.type,k.key,k.props,null,v.mode,P),P.ref=au(v,_,k),P.return=v,P)}function d(v,_,k,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==k.containerInfo||_.stateNode.implementation!==k.implementation?(_=qy(k,v.mode,P),_.return=v,_):(_=s(_,k.children||[]),_.return=v,_)}function u(v,_,k,P,D){return _===null||_.tag!==7?(_=fc(k,v.mode,P,D),_.return=v,_):(_=s(_,k),_.return=v,_)}function p(v,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Wy(""+_,v.mode,k),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Hh:return k=Zg(_.type,_.key,_.props,null,v.mode,k),k.ref=au(v,null,_),k.return=v,k;case Ud:return _=qy(_,v.mode,k),_.return=v,_;case Ia:var P=_._init;return p(v,P(_._payload),k)}if(zu(_)||tu(_))return _=fc(_,v.mode,k,null),_.return=v,_;tg(v,_)}return null}function g(v,_,k,P){var D=_!==null?_.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return D!==null?null:o(v,_,""+k,P);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Hh:return k.key===D?c(v,_,k,P):null;case Ud:return k.key===D?d(v,_,k,P):null;case Ia:return D=k._init,g(v,_,D(k._payload),P)}if(zu(k)||tu(k))return D!==null?null:u(v,_,k,P,null);tg(v,k)}return null}function m(v,_,k,P,D){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(k)||null,o(_,v,""+P,D);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Hh:return v=v.get(P.key===null?k:P.key)||null,c(_,v,P,D);case Ud:return v=v.get(P.key===null?k:P.key)||null,d(_,v,P,D);case Ia:var M=P._init;return m(v,_,k,M(P._payload),D)}if(zu(P)||tu(P))return v=v.get(k)||null,u(_,v,P,D,null);tg(_,P)}return null}function f(v,_,k,P){for(var D=null,M=null,B=_,G=_=0,ne=null;B!==null&&G<k.length;G++){B.index>G?(ne=B,B=null):ne=B.sibling;var ie=g(v,B,k[G],P);if(ie===null){B===null&&(B=ne);break}t&&B&&ie.alternate===null&&e(v,B),_=n(ie,_,G),M===null?D=ie:M.sibling=ie,M=ie,B=ne}if(G===k.length)return i(v,B),Et&&Mo(v,G),D;if(B===null){for(;G<k.length;G++)B=p(v,k[G],P),B!==null&&(_=n(B,_,G),M===null?D=B:M.sibling=B,M=B);return Et&&Mo(v,G),D}for(B=r(v,B);G<k.length;G++)ne=m(B,v,G,k[G],P),ne!==null&&(t&&ne.alternate!==null&&B.delete(ne.key===null?G:ne.key),_=n(ne,_,G),M===null?D=ne:M.sibling=ne,M=ne);return t&&B.forEach(function(oe){return e(v,oe)}),Et&&Mo(v,G),D}function b(v,_,k,P){var D=tu(k);if(typeof D!="function")throw Error(J(150));if(k=D.call(k),k==null)throw Error(J(151));for(var M=D=null,B=_,G=_=0,ne=null,ie=k.next();B!==null&&!ie.done;G++,ie=k.next()){B.index>G?(ne=B,B=null):ne=B.sibling;var oe=g(v,B,ie.value,P);if(oe===null){B===null&&(B=ne);break}t&&B&&oe.alternate===null&&e(v,B),_=n(oe,_,G),M===null?D=oe:M.sibling=oe,M=oe,B=ne}if(ie.done)return i(v,B),Et&&Mo(v,G),D;if(B===null){for(;!ie.done;G++,ie=k.next())ie=p(v,ie.value,P),ie!==null&&(_=n(ie,_,G),M===null?D=ie:M.sibling=ie,M=ie);return Et&&Mo(v,G),D}for(B=r(v,B);!ie.done;G++,ie=k.next())ie=m(B,v,G,ie.value,P),ie!==null&&(t&&ie.alternate!==null&&B.delete(ie.key===null?G:ie.key),_=n(ie,_,G),M===null?D=ie:M.sibling=ie,M=ie);return t&&B.forEach(function(Re){return e(v,Re)}),Et&&Mo(v,G),D}function w(v,_,k,P){if(typeof k=="object"&&k!==null&&k.type===jd&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Hh:e:{for(var D=k.key,M=_;M!==null;){if(M.key===D){if(D=k.type,D===jd){if(M.tag===7){i(v,M.sibling),_=s(M,k.props.children),_.return=v,v=_;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ia&&kk(D)===M.type){i(v,M.sibling),_=s(M,k.props),_.ref=au(v,M,k),_.return=v,v=_;break e}i(v,M);break}else e(v,M);M=M.sibling}k.type===jd?(_=fc(k.props.children,v.mode,P,k.key),_.return=v,v=_):(P=Zg(k.type,k.key,k.props,null,v.mode,P),P.ref=au(v,_,k),P.return=v,v=P)}return a(v);case Ud:e:{for(M=k.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===k.containerInfo&&_.stateNode.implementation===k.implementation){i(v,_.sibling),_=s(_,k.children||[]),_.return=v,v=_;break e}else{i(v,_);break}else e(v,_);_=_.sibling}_=qy(k,v.mode,P),_.return=v,v=_}return a(v);case Ia:return M=k._init,w(v,_,M(k._payload),P)}if(zu(k))return f(v,_,k,P);if(tu(k))return b(v,_,k,P);tg(v,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,_!==null&&_.tag===6?(i(v,_.sibling),_=s(_,k),_.return=v,v=_):(i(v,_),_=Wy(k,v.mode,P),_.return=v,v=_),a(v)):i(v,_)}return w}var _l=z5(!0),F5=z5(!1),yh={},an=po(yh),zp=po(yh),Fp=po(yh);function dc(t){if(t===yh)throw Error(J(174));return t}function __(t,e){switch(ht(Fp,e),ht(zp,t),ht(an,yh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cb(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cb(e,t)}_t(an),ht(an,e)}function Sl(){_t(an),_t(zp),_t(Fp)}function V5(t){dc(Fp.current);var e=dc(an.current),i=Cb(e,t.type);e!==i&&(ht(zp,t),ht(an,i))}function S_(t){zp.current===t&&(_t(an),_t(zp))}var Rt=po(0);function sf(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zy=[];function E_(){for(var t=0;t<zy.length;t++)zy[t]._workInProgressVersionPrimary=null;zy.length=0}var qg=ta.ReactCurrentDispatcher,Fy=ta.ReactCurrentBatchConfig,kc=0,At=null,pi=null,wi=null,nf=!1,lp=!1,Vp=0,ZN=0;function ji(){throw Error(J(321))}function k_(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!Ds(t[i],e[i]))return!1;return!0}function T_(t,e,i,r,s,n){if(kc=n,At=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qg.current=t===null||t.memoizedState===null?i7:r7,t=i(r,s),lp){n=0;do{if(lp=!1,Vp=0,25<=n)throw Error(J(301));n+=1,wi=pi=null,e.updateQueue=null,qg.current=s7,t=i(r,s)}while(lp)}if(qg.current=af,e=pi!==null&&pi.next!==null,kc=0,wi=pi=At=null,nf=!1,e)throw Error(J(300));return t}function x_(){var t=Vp!==0;return Vp=0,t}function Ys(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wi===null?At.memoizedState=wi=t:wi=wi.next=t,wi}function is(){if(pi===null){var t=At.alternate;t=t!==null?t.memoizedState:null}else t=pi.next;var e=wi===null?At.memoizedState:wi.next;if(e!==null)wi=e,pi=t;else{if(t===null)throw Error(J(310));pi=t,t={memoizedState:pi.memoizedState,baseState:pi.baseState,baseQueue:pi.baseQueue,queue:pi.queue,next:null},wi===null?At.memoizedState=wi=t:wi=wi.next=t}return wi}function Bp(t,e){return typeof e=="function"?e(t):e}function Vy(t){var e=is(),i=e.queue;if(i===null)throw Error(J(311));i.lastRenderedReducer=t;var r=pi,s=r.baseQueue,n=i.pending;if(n!==null){if(s!==null){var a=s.next;s.next=n.next,n.next=a}r.baseQueue=s=n,i.pending=null}if(s!==null){n=s.next,r=r.baseState;var o=a=null,c=null,d=n;do{var u=d.lane;if((kc&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=p,a=r):c=c.next=p,At.lanes|=u,Tc|=u}d=d.next}while(d!==null&&d!==n);c===null?a=r:c.next=o,Ds(r,e.memoizedState)||(pr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,i.lastRenderedState=r}if(t=i.interleaved,t!==null){s=t;do n=s.lane,At.lanes|=n,Tc|=n,s=s.next;while(s!==t)}else s===null&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function By(t){var e=is(),i=e.queue;if(i===null)throw Error(J(311));i.lastRenderedReducer=t;var r=i.dispatch,s=i.pending,n=e.memoizedState;if(s!==null){i.pending=null;var a=s=s.next;do n=t(n,a.action),a=a.next;while(a!==s);Ds(n,e.memoizedState)||(pr=!0),e.memoizedState=n,e.baseQueue===null&&(e.baseState=n),i.lastRenderedState=n}return[n,r]}function B5(){}function H5(t,e){var i=At,r=is(),s=e(),n=!Ds(r.memoizedState,s);if(n&&(r.memoizedState=s,pr=!0),r=r.queue,P_(q5.bind(null,i,r,t),[t]),r.getSnapshot!==e||n||wi!==null&&wi.memoizedState.tag&1){if(i.flags|=2048,Hp(9,W5.bind(null,i,r,s,e),void 0,null),Si===null)throw Error(J(349));kc&30||G5(i,e,s)}return s}function G5(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=At.updateQueue,e===null?(e={lastEffect:null,stores:null},At.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function W5(t,e,i,r){e.value=i,e.getSnapshot=r,J5(e)&&K5(t)}function q5(t,e,i){return i(function(){J5(e)&&K5(t)})}function J5(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!Ds(t,i)}catch{return!0}}function K5(t){var e=Jn(t,1);e!==null&&Is(e,t,1,-1)}function Tk(t){var e=Ys();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bp,lastRenderedState:t},e.queue=t,t=t.dispatch=t7.bind(null,At,t),[e.memoizedState,t]}function Hp(t,e,i,r){return t={tag:t,create:e,destroy:i,deps:r,next:null},e=At.updateQueue,e===null?(e={lastEffect:null,stores:null},At.updateQueue=e,e.lastEffect=t.next=t):(i=e.lastEffect,i===null?e.lastEffect=t.next=t:(r=i.next,i.next=t,t.next=r,e.lastEffect=t)),t}function Y5(){return is().memoizedState}function Jg(t,e,i,r){var s=Ys();At.flags|=t,s.memoizedState=Hp(1|e,i,void 0,r===void 0?null:r)}function vv(t,e,i,r){var s=is();r=r===void 0?null:r;var n=void 0;if(pi!==null){var a=pi.memoizedState;if(n=a.destroy,r!==null&&k_(r,a.deps)){s.memoizedState=Hp(e,i,n,r);return}}At.flags|=t,s.memoizedState=Hp(1|e,i,n,r)}function xk(t,e){return Jg(8390656,8,t,e)}function P_(t,e){return vv(2048,8,t,e)}function Q5(t,e){return vv(4,2,t,e)}function Z5(t,e){return vv(4,4,t,e)}function X5(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function eR(t,e,i){return i=i!=null?i.concat([t]):null,vv(4,4,X5.bind(null,e,t),i)}function C_(){}function tR(t,e){var i=is();e=e===void 0?null:e;var r=i.memoizedState;return r!==null&&e!==null&&k_(e,r[1])?r[0]:(i.memoizedState=[t,e],t)}function iR(t,e){var i=is();e=e===void 0?null:e;var r=i.memoizedState;return r!==null&&e!==null&&k_(e,r[1])?r[0]:(t=t(),i.memoizedState=[t,e],t)}function rR(t,e,i){return kc&21?(Ds(i,e)||(i=a5(),At.lanes|=i,Tc|=i,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pr=!0),t.memoizedState=i)}function XN(t,e){var i=it;it=i!==0&&4>i?i:4,t(!0);var r=Fy.transition;Fy.transition={};try{t(!1),e()}finally{it=i,Fy.transition=r}}function sR(){return is().memoizedState}function e7(t,e,i){var r=Xa(t);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},nR(t))aR(e,i);else if(i=N5(t,e,i,r),i!==null){var s=tr();Is(i,t,r,s),oR(i,e,r)}}function t7(t,e,i){var r=Xa(t),s={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(nR(t))aR(e,s);else{var n=t.alternate;if(t.lanes===0&&(n===null||n.lanes===0)&&(n=e.lastRenderedReducer,n!==null))try{var a=e.lastRenderedState,o=n(a,i);if(s.hasEagerState=!0,s.eagerState=o,Ds(o,a)){var c=e.interleaved;c===null?(s.next=s,b_(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}i=N5(t,e,s,r),i!==null&&(s=tr(),Is(i,t,r,s),oR(i,e,r))}}function nR(t){var e=t.alternate;return t===At||e!==null&&e===At}function aR(t,e){lp=nf=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function oR(t,e,i){if(i&4194240){var r=e.lanes;r&=t.pendingLanes,i|=r,e.lanes=i,n_(t,i)}}var af={readContext:ts,useCallback:ji,useContext:ji,useEffect:ji,useImperativeHandle:ji,useInsertionEffect:ji,useLayoutEffect:ji,useMemo:ji,useReducer:ji,useRef:ji,useState:ji,useDebugValue:ji,useDeferredValue:ji,useTransition:ji,useMutableSource:ji,useSyncExternalStore:ji,useId:ji,unstable_isNewReconciler:!1},i7={readContext:ts,useCallback:function(t,e){return Ys().memoizedState=[t,e===void 0?null:e],t},useContext:ts,useEffect:xk,useImperativeHandle:function(t,e,i){return i=i!=null?i.concat([t]):null,Jg(4194308,4,X5.bind(null,e,t),i)},useLayoutEffect:function(t,e){return Jg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jg(4,2,t,e)},useMemo:function(t,e){var i=Ys();return e=e===void 0?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var r=Ys();return e=i!==void 0?i(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=e7.bind(null,At,t),[r.memoizedState,t]},useRef:function(t){var e=Ys();return t={current:t},e.memoizedState=t},useState:Tk,useDebugValue:C_,useDeferredValue:function(t){return Ys().memoizedState=t},useTransition:function(){var t=Tk(!1),e=t[0];return t=XN.bind(null,t[1]),Ys().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var r=At,s=Ys();if(Et){if(i===void 0)throw Error(J(407));i=i()}else{if(i=e(),Si===null)throw Error(J(349));kc&30||G5(r,e,i)}s.memoizedState=i;var n={value:i,getSnapshot:e};return s.queue=n,xk(q5.bind(null,r,n,t),[t]),r.flags|=2048,Hp(9,W5.bind(null,r,n,i,e),void 0,null),i},useId:function(){var t=Ys(),e=Si.identifierPrefix;if(Et){var i=$n,r=jn;i=(r&~(1<<32-As(r)-1)).toString(32)+i,e=":"+e+"R"+i,i=Vp++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=ZN++,e=":"+e+"r"+i.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},r7={readContext:ts,useCallback:tR,useContext:ts,useEffect:P_,useImperativeHandle:eR,useInsertionEffect:Q5,useLayoutEffect:Z5,useMemo:iR,useReducer:Vy,useRef:Y5,useState:function(){return Vy(Bp)},useDebugValue:C_,useDeferredValue:function(t){var e=is();return rR(e,pi.memoizedState,t)},useTransition:function(){var t=Vy(Bp)[0],e=is().memoizedState;return[t,e]},useMutableSource:B5,useSyncExternalStore:H5,useId:sR,unstable_isNewReconciler:!1},s7={readContext:ts,useCallback:tR,useContext:ts,useEffect:P_,useImperativeHandle:eR,useInsertionEffect:Q5,useLayoutEffect:Z5,useMemo:iR,useReducer:By,useRef:Y5,useState:function(){return By(Bp)},useDebugValue:C_,useDeferredValue:function(t){var e=is();return pi===null?e.memoizedState=t:rR(e,pi.memoizedState,t)},useTransition:function(){var t=By(Bp)[0],e=is().memoizedState;return[t,e]},useMutableSource:B5,useSyncExternalStore:H5,useId:sR,unstable_isNewReconciler:!1};function El(t,e){try{var i="",r=e;do i+=OL(r),r=r.return;while(r);var s=i}catch(n){s=`
Error generating stack: `+n.message+`
`+n.stack}return{value:t,source:e,stack:s,digest:null}}function Hy(t,e,i){return{value:t,source:null,stack:i??null,digest:e??null}}function Qb(t,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var n7=typeof WeakMap=="function"?WeakMap:Map;function cR(t,e,i){i=Hn(-1,i),i.tag=3,i.payload={element:null};var r=e.value;return i.callback=function(){cf||(cf=!0,o1=r),Qb(t,e)},i}function dR(t,e,i){i=Hn(-1,i),i.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;i.payload=function(){return r(s)},i.callback=function(){Qb(t,e)}}var n=t.stateNode;return n!==null&&typeof n.componentDidCatch=="function"&&(i.callback=function(){Qb(t,e),typeof r!="function"&&(Za===null?Za=new Set([this]):Za.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),i}function Pk(t,e,i){var r=t.pingCache;if(r===null){r=t.pingCache=new n7;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(i)||(s.add(i),t=b7.bind(null,t,e,i),e.then(t,t))}function Ck(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Rk(t,e,i,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(e=Hn(-1,1),e.tag=2,Qa(i,e,1))),i.lanes|=1),t)}var a7=ta.ReactCurrentOwner,pr=!1;function Xi(t,e,i,r){e.child=t===null?F5(e,null,i,r):_l(e,t.child,i,r)}function Ak(t,e,i,r,s){i=i.render;var n=e.ref;return il(e,s),r=T_(t,e,i,r,n,s),i=x_(),t!==null&&!pr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kn(t,e,s)):(Et&&i&&h_(e),e.flags|=1,Xi(t,e,r,s),e.child)}function Ik(t,e,i,r,s){if(t===null){var n=i.type;return typeof n=="function"&&!N_(n)&&n.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=n,lR(t,e,n,r,s)):(t=Zg(i.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(n=t.child,!(t.lanes&s)){var a=n.memoizedProps;if(i=i.compare,i=i!==null?i:Np,i(a,r)&&t.ref===e.ref)return Kn(t,e,s)}return e.flags|=1,t=eo(n,r),t.ref=e.ref,t.return=e,e.child=t}function lR(t,e,i,r,s){if(t!==null){var n=t.memoizedProps;if(Np(n,r)&&t.ref===e.ref)if(pr=!1,e.pendingProps=r=n,(t.lanes&s)!==0)t.flags&131072&&(pr=!0);else return e.lanes=t.lanes,Kn(t,e,s)}return Zb(t,e,i,r,s)}function uR(t,e,i){var r=e.pendingProps,s=r.children,n=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(Jd,Cr),Cr|=i;else{if(!(i&1073741824))return t=n!==null?n.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ht(Jd,Cr),Cr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=n!==null?n.baseLanes:i,ht(Jd,Cr),Cr|=r}else n!==null?(r=n.baseLanes|i,e.memoizedState=null):r=i,ht(Jd,Cr),Cr|=r;return Xi(t,e,s,i),e.child}function pR(t,e){var i=e.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function Zb(t,e,i,r,s){var n=mr(i)?Sc:Wi.current;return n=bl(e,n),il(e,s),i=T_(t,e,i,r,n,s),r=x_(),t!==null&&!pr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kn(t,e,s)):(Et&&r&&h_(e),e.flags|=1,Xi(t,e,i,s),e.child)}function Ok(t,e,i,r,s){if(mr(i)){var n=!0;Qm(e)}else n=!1;if(il(e,s),e.stateNode===null)Kg(t,e),$5(e,i,r),Yb(e,i,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,d=i.contextType;typeof d=="object"&&d!==null?d=ts(d):(d=mr(i)?Sc:Wi.current,d=bl(e,d));var u=i.getDerivedStateFromProps,p=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==d)&&Ek(e,a,r,d),Oa=!1;var g=e.memoizedState;a.state=g,rf(e,r,a,s),c=e.memoizedState,o!==r||g!==c||gr.current||Oa?(typeof u=="function"&&(Kb(e,i,u,r),c=e.memoizedState),(o=Oa||Sk(e,i,o,r,g,c,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,U5(t,e),o=e.memoizedProps,d=e.type===e.elementType?o:ms(e.type,o),a.props=d,p=e.pendingProps,g=a.context,c=i.contextType,typeof c=="object"&&c!==null?c=ts(c):(c=mr(i)?Sc:Wi.current,c=bl(e,c));var m=i.getDerivedStateFromProps;(u=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||g!==c)&&Ek(e,a,r,c),Oa=!1,g=e.memoizedState,a.state=g,rf(e,r,a,s);var f=e.memoizedState;o!==p||g!==f||gr.current||Oa?(typeof m=="function"&&(Kb(e,i,m,r),f=e.memoizedState),(d=Oa||Sk(e,i,d,r,g,f,c)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,f,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,f,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Xb(t,e,i,r,n,s)}function Xb(t,e,i,r,s,n){pR(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&vk(e,i,!1),Kn(t,e,n);r=e.stateNode,a7.current=e;var o=a&&typeof i.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=_l(e,t.child,null,n),e.child=_l(e,null,o,n)):Xi(t,e,o,n),e.memoizedState=r.state,s&&vk(e,i,!0),e.child}function hR(t){var e=t.stateNode;e.pendingContext?fk(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fk(t,e.context,!1),__(t,e.containerInfo)}function Mk(t,e,i,r,s){return wl(),m_(s),e.flags|=256,Xi(t,e,i,r),e.child}var e1={dehydrated:null,treeContext:null,retryLane:0};function t1(t){return{baseLanes:t,cachePool:null,transitions:null}}function gR(t,e,i){var r=e.pendingProps,s=Rt.current,n=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(n=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ht(Rt,s&1),t===null)return qb(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,n?(r=e.mode,n=e.child,a={mode:"hidden",children:a},!(r&1)&&n!==null?(n.childLanes=0,n.pendingProps=a):n=wv(a,r,0,null),t=fc(t,r,i,null),n.return=e,t.return=e,n.sibling=t,e.child=n,e.child.memoizedState=t1(i),e.memoizedState=e1,t):R_(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return o7(t,e,a,r,o,s,i);if(n){n=r.fallback,a=e.mode,s=t.child,o=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=eo(s,c),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?n=eo(o,n):(n=fc(n,a,i,null),n.flags|=2),n.return=e,r.return=e,r.sibling=n,e.child=r,r=n,n=e.child,a=t.child.memoizedState,a=a===null?t1(i):{baseLanes:a.baseLanes|i,cachePool:null,transitions:a.transitions},n.memoizedState=a,n.childLanes=t.childLanes&~i,e.memoizedState=e1,r}return n=t.child,t=n.sibling,r=eo(n,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=i),r.return=e,r.sibling=null,t!==null&&(i=e.deletions,i===null?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=r,e.memoizedState=null,r}function R_(t,e){return e=wv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ig(t,e,i,r){return r!==null&&m_(r),_l(e,t.child,null,i),t=R_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function o7(t,e,i,r,s,n,a){if(i)return e.flags&256?(e.flags&=-257,r=Hy(Error(J(422))),ig(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(n=r.fallback,s=e.mode,r=wv({mode:"visible",children:r.children},s,0,null),n=fc(n,s,a,null),n.flags|=2,r.return=e,n.return=e,r.sibling=n,e.child=r,e.mode&1&&_l(e,t.child,null,a),e.child.memoizedState=t1(a),e.memoizedState=e1,n);if(!(e.mode&1))return ig(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,n=Error(J(419)),r=Hy(n,r,void 0),ig(t,e,a,r)}if(o=(a&t.childLanes)!==0,pr||o){if(r=Si,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==n.retryLane&&(n.retryLane=s,Jn(t,s),Is(r,t,s,-1))}return L_(),r=Hy(Error(J(421))),ig(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=w7.bind(null,t),s._reactRetry=e,null):(t=n.treeContext,Or=Ya(s.nextSibling),Dr=e,Et=!0,ws=null,t!==null&&(Br[Hr++]=jn,Br[Hr++]=$n,Br[Hr++]=Ec,jn=t.id,$n=t.overflow,Ec=e),e=R_(e,r.children),e.flags|=4096,e)}function Dk(t,e,i){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jb(t.return,e,i)}function Gy(t,e,i,r,s){var n=t.memoizedState;n===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:s}:(n.isBackwards=e,n.rendering=null,n.renderingStartTime=0,n.last=r,n.tail=i,n.tailMode=s)}function mR(t,e,i){var r=e.pendingProps,s=r.revealOrder,n=r.tail;if(Xi(t,e,r.children,i),r=Rt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dk(t,i,e);else if(t.tag===19)Dk(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ht(Rt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(i=e.child,s=null;i!==null;)t=i.alternate,t!==null&&sf(t)===null&&(s=i),i=i.sibling;i=s,i===null?(s=e.child,e.child=null):(s=i.sibling,i.sibling=null),Gy(e,!1,s,i,n);break;case"backwards":for(i=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&sf(t)===null){e.child=s;break}t=s.sibling,s.sibling=i,i=s,s=t}Gy(e,!0,i,null,n);break;case"together":Gy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kn(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),Tc|=e.lanes,!(i&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,i=eo(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=eo(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function c7(t,e,i){switch(e.tag){case 3:hR(e),wl();break;case 5:V5(e);break;case 1:mr(e.type)&&Qm(e);break;case 4:__(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ht(ef,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ht(Rt,Rt.current&1),e.flags|=128,null):i&e.child.childLanes?gR(t,e,i):(ht(Rt,Rt.current&1),t=Kn(t,e,i),t!==null?t.sibling:null);ht(Rt,Rt.current&1);break;case 19:if(r=(i&e.childLanes)!==0,t.flags&128){if(r)return mR(t,e,i);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ht(Rt,Rt.current),r)break;return null;case 22:case 23:return e.lanes=0,uR(t,e,i)}return Kn(t,e,i)}var fR,i1,vR,yR;fR=function(t,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};i1=function(){};vR=function(t,e,i,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,dc(an.current);var n=null;switch(i){case"input":s=kb(t,s),r=kb(t,r),n=[];break;case"select":s=It({},s,{value:void 0}),r=It({},r,{value:void 0}),n=[];break;case"textarea":s=Pb(t,s),r=Pb(t,r),n=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Km)}Rb(i,r);var a;i=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var o=s[d];for(a in o)o.hasOwnProperty(a)&&(i||(i={}),i[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Rp.hasOwnProperty(d)?n||(n=[]):(n=n||[]).push(d,null));for(d in r){var c=r[d];if(o=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(i||(i={}),i[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(i||(i={}),i[a]=c[a])}else i||(n||(n=[]),n.push(d,i)),i=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(n=n||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(n=n||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Rp.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ft("scroll",t),n||o===c||(n=[])):(n=n||[]).push(d,c))}i&&(n=n||[]).push("style",i);var d=n;(e.updateQueue=d)&&(e.flags|=4)}};yR=function(t,e,i,r){i!==r&&(e.flags|=4)};function ou(t,e){if(!Et)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $i(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,r=0;if(e)for(var s=t.child;s!==null;)i|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)i|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=i,e}function d7(t,e,i){var r=e.pendingProps;switch(g_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $i(e),null;case 1:return mr(e.type)&&Ym(),$i(e),null;case 3:return r=e.stateNode,Sl(),_t(gr),_t(Wi),E_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(eg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ws!==null&&(l1(ws),ws=null))),i1(t,e),$i(e),null;case 5:S_(e);var s=dc(Fp.current);if(i=e.type,t!==null&&e.stateNode!=null)vR(t,e,i,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return $i(e),null}if(t=dc(an.current),eg(e)){r=e.stateNode,i=e.type;var n=e.memoizedProps;switch(r[tn]=e,r[$p]=n,t=(e.mode&1)!==0,i){case"dialog":ft("cancel",r),ft("close",r);break;case"iframe":case"object":case"embed":ft("load",r);break;case"video":case"audio":for(s=0;s<Vu.length;s++)ft(Vu[s],r);break;case"source":ft("error",r);break;case"img":case"image":case"link":ft("error",r),ft("load",r);break;case"details":ft("toggle",r);break;case"input":BE(r,n),ft("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!n.multiple},ft("invalid",r);break;case"textarea":GE(r,n),ft("invalid",r)}Rb(i,n),s=null;for(var a in n)if(n.hasOwnProperty(a)){var o=n[a];a==="children"?typeof o=="string"?r.textContent!==o&&(n.suppressHydrationWarning!==!0&&Xh(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(n.suppressHydrationWarning!==!0&&Xh(r.textContent,o,t),s=["children",""+o]):Rp.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ft("scroll",r)}switch(i){case"input":Gh(r),HE(r,n,!0);break;case"textarea":Gh(r),WE(r);break;case"select":case"option":break;default:typeof n.onClick=="function"&&(r.onclick=Km)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=GC(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(i,{is:r.is}):(t=a.createElement(i),i==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,i),t[tn]=e,t[$p]=r,fR(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ab(i,r),i){case"dialog":ft("cancel",t),ft("close",t),s=r;break;case"iframe":case"object":case"embed":ft("load",t),s=r;break;case"video":case"audio":for(s=0;s<Vu.length;s++)ft(Vu[s],t);s=r;break;case"source":ft("error",t),s=r;break;case"img":case"image":case"link":ft("error",t),ft("load",t),s=r;break;case"details":ft("toggle",t),s=r;break;case"input":BE(t,r),s=kb(t,r),ft("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=It({},r,{value:void 0}),ft("invalid",t);break;case"textarea":GE(t,r),s=Pb(t,r),ft("invalid",t);break;default:s=r}Rb(i,s),o=s;for(n in o)if(o.hasOwnProperty(n)){var c=o[n];n==="style"?JC(t,c):n==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&WC(t,c)):n==="children"?typeof c=="string"?(i!=="textarea"||c!=="")&&Ap(t,c):typeof c=="number"&&Ap(t,""+c):n!=="suppressContentEditableWarning"&&n!=="suppressHydrationWarning"&&n!=="autoFocus"&&(Rp.hasOwnProperty(n)?c!=null&&n==="onScroll"&&ft("scroll",t):c!=null&&Xw(t,n,c,a))}switch(i){case"input":Gh(t),HE(t,r,!1);break;case"textarea":Gh(t),WE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+so(r.value));break;case"select":t.multiple=!!r.multiple,n=r.value,n!=null?Zd(t,!!r.multiple,n,!1):r.defaultValue!=null&&Zd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Km)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $i(e),null;case 6:if(t&&e.stateNode!=null)yR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(i=dc(Fp.current),dc(an.current),eg(e)){if(r=e.stateNode,i=e.memoizedProps,r[tn]=e,(n=r.nodeValue!==i)&&(t=Dr,t!==null))switch(t.tag){case 3:Xh(r.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xh(r.nodeValue,i,(t.mode&1)!==0)}n&&(e.flags|=4)}else r=(i.nodeType===9?i:i.ownerDocument).createTextNode(r),r[tn]=e,e.stateNode=r}return $i(e),null;case 13:if(_t(Rt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Et&&Or!==null&&e.mode&1&&!(e.flags&128))L5(),wl(),e.flags|=98560,n=!1;else if(n=eg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!n)throw Error(J(318));if(n=e.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(J(317));n[tn]=e}else wl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$i(e),n=!1}else ws!==null&&(l1(ws),ws=null),n=!0;if(!n)return e.flags&65536?e:null}return e.flags&128?(e.lanes=i,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Rt.current&1?hi===0&&(hi=3):L_())),e.updateQueue!==null&&(e.flags|=4),$i(e),null);case 4:return Sl(),i1(t,e),t===null&&Up(e.stateNode.containerInfo),$i(e),null;case 10:return y_(e.type._context),$i(e),null;case 17:return mr(e.type)&&Ym(),$i(e),null;case 19:if(_t(Rt),n=e.memoizedState,n===null)return $i(e),null;if(r=(e.flags&128)!==0,a=n.rendering,a===null)if(r)ou(n,!1);else{if(hi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=sf(t),a!==null){for(e.flags|=128,ou(n,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=i,i=e.child;i!==null;)n=i,t=r,n.flags&=14680066,a=n.alternate,a===null?(n.childLanes=0,n.lanes=t,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,t=a.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return ht(Rt,Rt.current&1|2),e.child}t=t.sibling}n.tail!==null&&Gt()>kl&&(e.flags|=128,r=!0,ou(n,!1),e.lanes=4194304)}else{if(!r)if(t=sf(a),t!==null){if(e.flags|=128,r=!0,i=t.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),ou(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!Et)return $i(e),null}else 2*Gt()-n.renderingStartTime>kl&&i!==1073741824&&(e.flags|=128,r=!0,ou(n,!1),e.lanes=4194304);n.isBackwards?(a.sibling=e.child,e.child=a):(i=n.last,i!==null?i.sibling=a:e.child=a,n.last=a)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=Gt(),e.sibling=null,i=Rt.current,ht(Rt,r?i&1|2:i&1),e):($i(e),null);case 22:case 23:return D_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Cr&1073741824&&($i(e),e.subtreeFlags&6&&(e.flags|=8192)):$i(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function l7(t,e){switch(g_(e),e.tag){case 1:return mr(e.type)&&Ym(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Sl(),_t(gr),_t(Wi),E_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return S_(e),null;case 13:if(_t(Rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));wl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _t(Rt),null;case 4:return Sl(),null;case 10:return y_(e.type._context),null;case 22:case 23:return D_(),null;case 24:return null;default:return null}}var rg=!1,Hi=!1,u7=typeof WeakSet=="function"?WeakSet:Set,te=null;function qd(t,e){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(r){Ut(t,e,r)}else i.current=null}function r1(t,e,i){try{i()}catch(r){Ut(t,e,r)}}var Lk=!1;function p7(t,e){if(zb=Wm,t=S5(),p_(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var s=r.anchorOffset,n=r.focusNode;r=r.focusOffset;try{i.nodeType,n.nodeType}catch{i=null;break e}var a=0,o=-1,c=-1,d=0,u=0,p=t,g=null;t:for(;;){for(var m;p!==i||s!==0&&p.nodeType!==3||(o=a+s),p!==n||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(m=p.firstChild)!==null;)g=p,p=m;for(;;){if(p===t)break t;if(g===i&&++d===s&&(o=a),g===n&&++u===r&&(c=a),(m=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=m}i=o===-1||c===-1?null:{start:o,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(Fb={focusedElem:t,selectionRange:i},Wm=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var f=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var b=f.memoizedProps,w=f.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?b:ms(e.type,b),w);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(P){Ut(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return f=Lk,Lk=!1,f}function up(t,e,i){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var n=s.destroy;s.destroy=void 0,n!==void 0&&r1(e,i,n)}s=s.next}while(s!==r)}}function yv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var i=e=e.next;do{if((i.tag&t)===t){var r=i.create;i.destroy=r()}i=i.next}while(i!==e)}}function s1(t){var e=t.ref;if(e!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof e=="function"?e(t):e.current=t}}function bR(t){var e=t.alternate;e!==null&&(t.alternate=null,bR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tn],delete e[$p],delete e[Hb],delete e[JN],delete e[KN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wR(t){return t.tag===5||t.tag===3||t.tag===4}function Nk(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function n1(t,e,i){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(t,i)):(e=i,e.appendChild(t)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=Km));else if(r!==4&&(t=t.child,t!==null))for(n1(t,e,i),t=t.sibling;t!==null;)n1(t,e,i),t=t.sibling}function a1(t,e,i){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(a1(t,e,i),t=t.sibling;t!==null;)a1(t,e,i),t=t.sibling}var Oi=null,fs=!1;function ca(t,e,i){for(i=i.child;i!==null;)_R(t,e,i),i=i.sibling}function _R(t,e,i){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(lv,i)}catch{}switch(i.tag){case 5:Hi||qd(i,e);case 6:var r=Oi,s=fs;Oi=null,ca(t,e,i),Oi=r,fs=s,Oi!==null&&(fs?(t=Oi,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):Oi.removeChild(i.stateNode));break;case 18:Oi!==null&&(fs?(t=Oi,i=i.stateNode,t.nodeType===8?jy(t.parentNode,i):t.nodeType===1&&jy(t,i),Dp(t)):jy(Oi,i.stateNode));break;case 4:r=Oi,s=fs,Oi=i.stateNode.containerInfo,fs=!0,ca(t,e,i),Oi=r,fs=s;break;case 0:case 11:case 14:case 15:if(!Hi&&(r=i.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var n=s,a=n.destroy;n=n.tag,a!==void 0&&(n&2||n&4)&&r1(i,e,a),s=s.next}while(s!==r)}ca(t,e,i);break;case 1:if(!Hi&&(qd(i,e),r=i.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(o){Ut(i,e,o)}ca(t,e,i);break;case 21:ca(t,e,i);break;case 22:i.mode&1?(Hi=(r=Hi)||i.memoizedState!==null,ca(t,e,i),Hi=r):ca(t,e,i);break;default:ca(t,e,i)}}function Uk(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new u7),e.forEach(function(r){var s=_7.bind(null,t,r);i.has(r)||(i.add(r),r.then(s,s))})}}function cs(t,e){var i=e.deletions;if(i!==null)for(var r=0;r<i.length;r++){var s=i[r];try{var n=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Oi=o.stateNode,fs=!1;break e;case 3:Oi=o.stateNode.containerInfo,fs=!0;break e;case 4:Oi=o.stateNode.containerInfo,fs=!0;break e}o=o.return}if(Oi===null)throw Error(J(160));_R(n,a,s),Oi=null,fs=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ut(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)SR(e,t),e=e.sibling}function SR(t,e){var i=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cs(e,t),Fs(t),r&4){try{up(3,t,t.return),yv(3,t)}catch(b){Ut(t,t.return,b)}try{up(5,t,t.return)}catch(b){Ut(t,t.return,b)}}break;case 1:cs(e,t),Fs(t),r&512&&i!==null&&qd(i,i.return);break;case 5:if(cs(e,t),Fs(t),r&512&&i!==null&&qd(i,i.return),t.flags&32){var s=t.stateNode;try{Ap(s,"")}catch(b){Ut(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var n=t.memoizedProps,a=i!==null?i.memoizedProps:n,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&n.type==="radio"&&n.name!=null&&BC(s,n),Ab(o,a);var d=Ab(o,n);for(a=0;a<c.length;a+=2){var u=c[a],p=c[a+1];u==="style"?JC(s,p):u==="dangerouslySetInnerHTML"?WC(s,p):u==="children"?Ap(s,p):Xw(s,u,p,d)}switch(o){case"input":Tb(s,n);break;case"textarea":HC(s,n);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!n.multiple;var m=n.value;m!=null?Zd(s,!!n.multiple,m,!1):g!==!!n.multiple&&(n.defaultValue!=null?Zd(s,!!n.multiple,n.defaultValue,!0):Zd(s,!!n.multiple,n.multiple?[]:"",!1))}s[$p]=n}catch(b){Ut(t,t.return,b)}}break;case 6:if(cs(e,t),Fs(t),r&4){if(t.stateNode===null)throw Error(J(162));s=t.stateNode,n=t.memoizedProps;try{s.nodeValue=n}catch(b){Ut(t,t.return,b)}}break;case 3:if(cs(e,t),Fs(t),r&4&&i!==null&&i.memoizedState.isDehydrated)try{Dp(e.containerInfo)}catch(b){Ut(t,t.return,b)}break;case 4:cs(e,t),Fs(t);break;case 13:cs(e,t),Fs(t),s=t.child,s.flags&8192&&(n=s.memoizedState!==null,s.stateNode.isHidden=n,!n||s.alternate!==null&&s.alternate.memoizedState!==null||(O_=Gt())),r&4&&Uk(t);break;case 22:if(u=i!==null&&i.memoizedState!==null,t.mode&1?(Hi=(d=Hi)||u,cs(e,t),Hi=d):cs(e,t),Fs(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(te=t,u=t.child;u!==null;){for(p=te=u;te!==null;){switch(g=te,m=g.child,g.tag){case 0:case 11:case 14:case 15:up(4,g,g.return);break;case 1:qd(g,g.return);var f=g.stateNode;if(typeof f.componentWillUnmount=="function"){r=g,i=g.return;try{e=r,f.props=e.memoizedProps,f.state=e.memoizedState,f.componentWillUnmount()}catch(b){Ut(r,i,b)}}break;case 5:qd(g,g.return);break;case 22:if(g.memoizedState!==null){$k(p);continue}}m!==null?(m.return=g,te=m):$k(p)}u=u.sibling}e:for(u=null,p=t;;){if(p.tag===5){if(u===null){u=p;try{s=p.stateNode,d?(n=s.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none"):(o=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=qC("display",a))}catch(b){Ut(t,t.return,b)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(b){Ut(t,t.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:cs(e,t),Fs(t),r&4&&Uk(t);break;case 21:break;default:cs(e,t),Fs(t)}}function Fs(t){var e=t.flags;if(e&2){try{e:{for(var i=t.return;i!==null;){if(wR(i)){var r=i;break e}i=i.return}throw Error(J(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ap(s,""),r.flags&=-33);var n=Nk(t);a1(t,n,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Nk(t);n1(t,o,a);break;default:throw Error(J(161))}}catch(c){Ut(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function h7(t,e,i){te=t,ER(t)}function ER(t,e,i){for(var r=(t.mode&1)!==0;te!==null;){var s=te,n=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||rg;if(!a){var o=s.alternate,c=o!==null&&o.memoizedState!==null||Hi;o=rg;var d=Hi;if(rg=a,(Hi=c)&&!d)for(te=s;te!==null;)a=te,c=a.child,a.tag===22&&a.memoizedState!==null?zk(s):c!==null?(c.return=a,te=c):zk(s);for(;n!==null;)te=n,ER(n),n=n.sibling;te=s,rg=o,Hi=d}jk(t)}else s.subtreeFlags&8772&&n!==null?(n.return=s,te=n):jk(t)}}function jk(t){for(;te!==null;){var e=te;if(e.flags&8772){var i=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Hi||yv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Hi)if(i===null)r.componentDidMount();else{var s=e.elementType===e.type?i.memoizedProps:ms(e.type,i.memoizedProps);r.componentDidUpdate(s,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var n=e.updateQueue;n!==null&&_k(e,n,r);break;case 3:var a=e.updateQueue;if(a!==null){if(i=null,e.child!==null)switch(e.child.tag){case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}_k(e,a,i)}break;case 5:var o=e.stateNode;if(i===null&&e.flags&4){i=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&Dp(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Hi||e.flags&512&&s1(e)}catch(g){Ut(e,e.return,g)}}if(e===t){te=null;break}if(i=e.sibling,i!==null){i.return=e.return,te=i;break}te=e.return}}function $k(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var i=e.sibling;if(i!==null){i.return=e.return,te=i;break}te=e.return}}function zk(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{yv(4,e)}catch(c){Ut(e,i,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ut(e,s,c)}}var n=e.return;try{s1(e)}catch(c){Ut(e,n,c)}break;case 5:var a=e.return;try{s1(e)}catch(c){Ut(e,a,c)}}}catch(c){Ut(e,e.return,c)}if(e===t){te=null;break}var o=e.sibling;if(o!==null){o.return=e.return,te=o;break}te=e.return}}var g7=Math.ceil,of=ta.ReactCurrentDispatcher,A_=ta.ReactCurrentOwner,Qr=ta.ReactCurrentBatchConfig,We=0,Si=null,ri=null,Ni=0,Cr=0,Jd=po(0),hi=0,Gp=null,Tc=0,bv=0,I_=0,pp=null,lr=null,O_=0,kl=1/0,Cn=null,cf=!1,o1=null,Za=null,sg=!1,Ba=null,df=0,hp=0,c1=null,Yg=-1,Qg=0;function tr(){return We&6?Gt():Yg!==-1?Yg:Yg=Gt()}function Xa(t){return t.mode&1?We&2&&Ni!==0?Ni&-Ni:QN.transition!==null?(Qg===0&&(Qg=a5()),Qg):(t=it,t!==0||(t=window.event,t=t===void 0?16:h5(t.type)),t):1}function Is(t,e,i,r){if(50<hp)throw hp=0,c1=null,Error(J(185));mh(t,i,r),(!(We&2)||t!==Si)&&(t===Si&&(!(We&2)&&(bv|=i),hi===4&&Na(t,Ni)),fr(t,r),i===1&&We===0&&!(e.mode&1)&&(kl=Gt()+500,mv&&ho()))}function fr(t,e){var i=t.callbackNode;QL(t,e);var r=Gm(t,t===Si?Ni:0);if(r===0)i!==null&&KE(i),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(i!=null&&KE(i),e===1)t.tag===0?YN(Fk.bind(null,t)):O5(Fk.bind(null,t)),WN(function(){!(We&6)&&ho()}),i=null;else{switch(o5(r)){case 1:i=s_;break;case 4:i=s5;break;case 16:i=Hm;break;case 536870912:i=n5;break;default:i=Hm}i=IR(i,kR.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function kR(t,e){if(Yg=-1,Qg=0,We&6)throw Error(J(327));var i=t.callbackNode;if(rl()&&t.callbackNode!==i)return null;var r=Gm(t,t===Si?Ni:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=lf(t,r);else{e=r;var s=We;We|=2;var n=xR();(Si!==t||Ni!==e)&&(Cn=null,kl=Gt()+500,mc(t,e));do try{v7();break}catch(o){TR(t,o)}while(1);v_(),of.current=n,We=s,ri!==null?e=0:(Si=null,Ni=0,e=hi)}if(e!==0){if(e===2&&(s=Lb(t),s!==0&&(r=s,e=d1(t,s))),e===1)throw i=Gp,mc(t,0),Na(t,r),fr(t,Gt()),i;if(e===6)Na(t,r);else{if(s=t.current.alternate,!(r&30)&&!m7(s)&&(e=lf(t,r),e===2&&(n=Lb(t),n!==0&&(r=n,e=d1(t,n))),e===1))throw i=Gp,mc(t,0),Na(t,r),fr(t,Gt()),i;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:Do(t,lr,Cn);break;case 3:if(Na(t,r),(r&130023424)===r&&(e=O_+500-Gt(),10<e)){if(Gm(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){tr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Bb(Do.bind(null,t,lr,Cn),e);break}Do(t,lr,Cn);break;case 4:if(Na(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-As(r);n=1<<a,a=e[a],a>s&&(s=a),r&=~n}if(r=s,r=Gt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*g7(r/1960))-r,10<r){t.timeoutHandle=Bb(Do.bind(null,t,lr,Cn),r);break}Do(t,lr,Cn);break;case 5:Do(t,lr,Cn);break;default:throw Error(J(329))}}}return fr(t,Gt()),t.callbackNode===i?kR.bind(null,t):null}function d1(t,e){var i=pp;return t.current.memoizedState.isDehydrated&&(mc(t,e).flags|=256),t=lf(t,e),t!==2&&(e=lr,lr=i,e!==null&&l1(e)),t}function l1(t){lr===null?lr=t:lr.push.apply(lr,t)}function m7(t){for(var e=t;;){if(e.flags&16384){var i=e.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var r=0;r<i.length;r++){var s=i[r],n=s.getSnapshot;s=s.value;try{if(!Ds(n(),s))return!1}catch{return!1}}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Na(t,e){for(e&=~I_,e&=~bv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-As(e),r=1<<i;t[i]=-1,e&=~r}}function Fk(t){if(We&6)throw Error(J(327));rl();var e=Gm(t,0);if(!(e&1))return fr(t,Gt()),null;var i=lf(t,e);if(t.tag!==0&&i===2){var r=Lb(t);r!==0&&(e=r,i=d1(t,r))}if(i===1)throw i=Gp,mc(t,0),Na(t,e),fr(t,Gt()),i;if(i===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Do(t,lr,Cn),fr(t,Gt()),null}function M_(t,e){var i=We;We|=1;try{return t(e)}finally{We=i,We===0&&(kl=Gt()+500,mv&&ho())}}function xc(t){Ba!==null&&Ba.tag===0&&!(We&6)&&rl();var e=We;We|=1;var i=Qr.transition,r=it;try{if(Qr.transition=null,it=1,t)return t()}finally{it=r,Qr.transition=i,We=e,!(We&6)&&ho()}}function D_(){Cr=Jd.current,_t(Jd)}function mc(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,GN(i)),ri!==null)for(i=ri.return;i!==null;){var r=i;switch(g_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ym();break;case 3:Sl(),_t(gr),_t(Wi),E_();break;case 5:S_(r);break;case 4:Sl();break;case 13:_t(Rt);break;case 19:_t(Rt);break;case 10:y_(r.type._context);break;case 22:case 23:D_()}i=i.return}if(Si=t,ri=t=eo(t.current,null),Ni=Cr=e,hi=0,Gp=null,I_=bv=Tc=0,lr=pp=null,cc!==null){for(e=0;e<cc.length;e++)if(i=cc[e],r=i.interleaved,r!==null){i.interleaved=null;var s=r.next,n=i.pending;if(n!==null){var a=n.next;n.next=s,r.next=a}i.pending=r}cc=null}return t}function TR(t,e){do{var i=ri;try{if(v_(),qg.current=af,nf){for(var r=At.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}nf=!1}if(kc=0,wi=pi=At=null,lp=!1,Vp=0,A_.current=null,i===null||i.return===null){hi=1,Gp=e,ri=null;break}e:{var n=t,a=i.return,o=i,c=e;if(e=Ni,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var g=u.alternate;g?(u.updateQueue=g.updateQueue,u.memoizedState=g.memoizedState,u.lanes=g.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Ck(a);if(m!==null){m.flags&=-257,Rk(m,a,o,n,e),m.mode&1&&Pk(n,d,e),e=m,c=d;var f=e.updateQueue;if(f===null){var b=new Set;b.add(c),e.updateQueue=b}else f.add(c);break e}else{if(!(e&1)){Pk(n,d,e),L_();break e}c=Error(J(426))}}else if(Et&&o.mode&1){var w=Ck(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Rk(w,a,o,n,e),m_(El(c,o));break e}}n=c=El(c,o),hi!==4&&(hi=2),pp===null?pp=[n]:pp.push(n),n=a;do{switch(n.tag){case 3:n.flags|=65536,e&=-e,n.lanes|=e;var v=cR(n,c,e);wk(n,v);break e;case 1:o=c;var _=n.type,k=n.stateNode;if(!(n.flags&128)&&(typeof _.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Za===null||!Za.has(k)))){n.flags|=65536,e&=-e,n.lanes|=e;var P=dR(n,o,e);wk(n,P);break e}}n=n.return}while(n!==null)}CR(i)}catch(D){e=D,ri===i&&i!==null&&(ri=i=i.return);continue}break}while(1)}function xR(){var t=of.current;return of.current=af,t===null?af:t}function L_(){(hi===0||hi===3||hi===2)&&(hi=4),Si===null||!(Tc&268435455)&&!(bv&268435455)||Na(Si,Ni)}function lf(t,e){var i=We;We|=2;var r=xR();(Si!==t||Ni!==e)&&(Cn=null,mc(t,e));do try{f7();break}catch(s){TR(t,s)}while(1);if(v_(),We=i,of.current=r,ri!==null)throw Error(J(261));return Si=null,Ni=0,hi}function f7(){for(;ri!==null;)PR(ri)}function v7(){for(;ri!==null&&!VL();)PR(ri)}function PR(t){var e=AR(t.alternate,t,Cr);t.memoizedProps=t.pendingProps,e===null?CR(t):ri=e,A_.current=null}function CR(t){var e=t;do{var i=e.alternate;if(t=e.return,e.flags&32768){if(i=l7(i,e),i!==null){i.flags&=32767,ri=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{hi=6,ri=null;return}}else if(i=d7(i,e,Cr),i!==null){ri=i;return}if(e=e.sibling,e!==null){ri=e;return}ri=e=t}while(e!==null);hi===0&&(hi=5)}function Do(t,e,i){var r=it,s=Qr.transition;try{Qr.transition=null,it=1,y7(t,e,i,r)}finally{Qr.transition=s,it=r}return null}function y7(t,e,i,r){do rl();while(Ba!==null);if(We&6)throw Error(J(327));i=t.finishedWork;var s=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var n=i.lanes|i.childLanes;if(ZL(t,n),t===Si&&(ri=Si=null,Ni=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||sg||(sg=!0,IR(Hm,function(){return rl(),null})),n=(i.flags&15990)!==0,i.subtreeFlags&15990||n){n=Qr.transition,Qr.transition=null;var a=it;it=1;var o=We;We|=4,A_.current=null,p7(t,i),SR(i,t),jN(Fb),Wm=!!zb,Fb=zb=null,t.current=i,h7(i),BL(),We=o,it=a,Qr.transition=n}else t.current=i;if(sg&&(sg=!1,Ba=t,df=s),n=t.pendingLanes,n===0&&(Za=null),WL(i.stateNode),fr(t,Gt()),e!==null)for(r=t.onRecoverableError,i=0;i<e.length;i++)s=e[i],r(s.value,{componentStack:s.stack,digest:s.digest});if(cf)throw cf=!1,t=o1,o1=null,t;return df&1&&t.tag!==0&&rl(),n=t.pendingLanes,n&1?t===c1?hp++:(hp=0,c1=t):hp=0,ho(),null}function rl(){if(Ba!==null){var t=o5(df),e=Qr.transition,i=it;try{if(Qr.transition=null,it=16>t?16:t,Ba===null)var r=!1;else{if(t=Ba,Ba=null,df=0,We&6)throw Error(J(331));var s=We;for(We|=4,te=t.current;te!==null;){var n=te,a=n.child;if(te.flags&16){var o=n.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(te=d;te!==null;){var u=te;switch(u.tag){case 0:case 11:case 15:up(8,u,n)}var p=u.child;if(p!==null)p.return=u,te=p;else for(;te!==null;){u=te;var g=u.sibling,m=u.return;if(bR(u),u===d){te=null;break}if(g!==null){g.return=m,te=g;break}te=m}}}var f=n.alternate;if(f!==null){var b=f.child;if(b!==null){f.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}te=n}}if(n.subtreeFlags&2064&&a!==null)a.return=n,te=a;else e:for(;te!==null;){if(n=te,n.flags&2048)switch(n.tag){case 0:case 11:case 15:up(9,n,n.return)}var v=n.sibling;if(v!==null){v.return=n.return,te=v;break e}te=n.return}}var _=t.current;for(te=_;te!==null;){a=te;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,te=k;else e:for(a=_;te!==null;){if(o=te,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:yv(9,o)}}catch(D){Ut(o,o.return,D)}if(o===a){te=null;break e}var P=o.sibling;if(P!==null){P.return=o.return,te=P;break e}te=o.return}}if(We=s,ho(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(lv,t)}catch{}r=!0}return r}finally{it=i,Qr.transition=e}}return!1}function Vk(t,e,i){e=El(i,e),e=cR(t,e,1),t=Qa(t,e,1),e=tr(),t!==null&&(mh(t,1,e),fr(t,e))}function Ut(t,e,i){if(t.tag===3)Vk(t,t,i);else for(;e!==null;){if(e.tag===3){Vk(e,t,i);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Za===null||!Za.has(r))){t=El(i,t),t=dR(e,t,1),e=Qa(e,t,1),t=tr(),e!==null&&(mh(e,1,t),fr(e,t));break}}e=e.return}}function b7(t,e,i){var r=t.pingCache;r!==null&&r.delete(e),e=tr(),t.pingedLanes|=t.suspendedLanes&i,Si===t&&(Ni&i)===i&&(hi===4||hi===3&&(Ni&130023424)===Ni&&500>Gt()-O_?mc(t,0):I_|=i),fr(t,e)}function RR(t,e){e===0&&(t.mode&1?(e=Jh,Jh<<=1,!(Jh&130023424)&&(Jh=4194304)):e=1);var i=tr();t=Jn(t,e),t!==null&&(mh(t,e,i),fr(t,i))}function w7(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),RR(t,i)}function _7(t,e){var i=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(i=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),RR(t,i)}var AR;AR=function(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps||gr.current)pr=!0;else{if(!(t.lanes&i)&&!(e.flags&128))return pr=!1,c7(t,e,i);pr=!!(t.flags&131072)}else pr=!1,Et&&e.flags&1048576&&M5(e,Xm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Kg(t,e),t=e.pendingProps;var s=bl(e,Wi.current);il(e,i),s=T_(null,e,r,t,s,i);var n=x_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mr(r)?(n=!0,Qm(e)):n=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,w_(e),s.updater=fv,e.stateNode=s,s._reactInternals=e,Yb(e,r,t,i),e=Xb(null,e,r,!0,n,i)):(e.tag=0,Et&&n&&h_(e),Xi(null,e,s,i),e=e.child),e;case 16:r=e.elementType;e:{switch(Kg(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=E7(r),t=ms(r,t),s){case 0:e=Zb(null,e,r,t,i);break e;case 1:e=Ok(null,e,r,t,i);break e;case 11:e=Ak(null,e,r,t,i);break e;case 14:e=Ik(null,e,r,ms(r.type,t),i);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ms(r,s),Zb(t,e,r,s,i);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ms(r,s),Ok(t,e,r,s,i);case 3:e:{if(hR(e),t===null)throw Error(J(387));r=e.pendingProps,n=e.memoizedState,s=n.element,U5(t,e),rf(e,r,null,i);var a=e.memoizedState;if(r=a.element,n.isDehydrated)if(n={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=n,e.memoizedState=n,e.flags&256){s=El(Error(J(423)),e),e=Mk(t,e,r,i,s);break e}else if(r!==s){s=El(Error(J(424)),e),e=Mk(t,e,r,i,s);break e}else for(Or=Ya(e.stateNode.containerInfo.firstChild),Dr=e,Et=!0,ws=null,i=F5(e,null,r,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(wl(),r===s){e=Kn(t,e,i);break e}Xi(t,e,r,i)}e=e.child}return e;case 5:return V5(e),t===null&&qb(e),r=e.type,s=e.pendingProps,n=t!==null?t.memoizedProps:null,a=s.children,Vb(r,s)?a=null:n!==null&&Vb(r,n)&&(e.flags|=32),pR(t,e),Xi(t,e,a,i),e.child;case 6:return t===null&&qb(e),null;case 13:return gR(t,e,i);case 4:return __(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_l(e,null,r,i):Xi(t,e,r,i),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ms(r,s),Ak(t,e,r,s,i);case 7:return Xi(t,e,e.pendingProps,i),e.child;case 8:return Xi(t,e,e.pendingProps.children,i),e.child;case 12:return Xi(t,e,e.pendingProps.children,i),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,n=e.memoizedProps,a=s.value,ht(ef,r._currentValue),r._currentValue=a,n!==null)if(Ds(n.value,a)){if(n.children===s.children&&!gr.current){e=Kn(t,e,i);break e}}else for(n=e.child,n!==null&&(n.return=e);n!==null;){var o=n.dependencies;if(o!==null){a=n.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(n.tag===1){c=Hn(-1,i&-i),c.tag=2;var d=n.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}n.lanes|=i,c=n.alternate,c!==null&&(c.lanes|=i),Jb(n.return,i,e),o.lanes|=i;break}c=c.next}}else if(n.tag===10)a=n.type===e.type?null:n.child;else if(n.tag===18){if(a=n.return,a===null)throw Error(J(341));a.lanes|=i,o=a.alternate,o!==null&&(o.lanes|=i),Jb(a,i,e),a=n.sibling}else a=n.child;if(a!==null)a.return=n;else for(a=n;a!==null;){if(a===e){a=null;break}if(n=a.sibling,n!==null){n.return=a.return,a=n;break}a=a.return}n=a}Xi(t,e,s.children,i),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,il(e,i),s=ts(s),r=r(s),e.flags|=1,Xi(t,e,r,i),e.child;case 14:return r=e.type,s=ms(r,e.pendingProps),s=ms(r.type,s),Ik(t,e,r,s,i);case 15:return lR(t,e,e.type,e.pendingProps,i);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ms(r,s),Kg(t,e),e.tag=1,mr(r)?(t=!0,Qm(e)):t=!1,il(e,i),$5(e,r,s),Yb(e,r,s,i),Xb(null,e,r,!0,t,i);case 19:return mR(t,e,i);case 22:return uR(t,e,i)}throw Error(J(156,e.tag))};function IR(t,e){return r5(t,e)}function S7(t,e,i,r){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(t,e,i,r){return new S7(t,e,i,r)}function N_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function E7(t){if(typeof t=="function")return N_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===t_)return 11;if(t===i_)return 14}return 2}function eo(t,e){var i=t.alternate;return i===null?(i=Kr(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Zg(t,e,i,r,s,n){var a=2;if(r=t,typeof t=="function")N_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case jd:return fc(i.children,s,n,e);case e_:a=8,s|=8;break;case wb:return t=Kr(12,i,e,s|2),t.elementType=wb,t.lanes=n,t;case _b:return t=Kr(13,i,e,s),t.elementType=_b,t.lanes=n,t;case Sb:return t=Kr(19,i,e,s),t.elementType=Sb,t.lanes=n,t;case zC:return wv(i,s,n,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jC:a=10;break e;case $C:a=9;break e;case t_:a=11;break e;case i_:a=14;break e;case Ia:a=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Kr(a,i,e,s),e.elementType=t,e.type=r,e.lanes=n,e}function fc(t,e,i,r){return t=Kr(7,t,r,e),t.lanes=i,t}function wv(t,e,i,r){return t=Kr(22,t,r,e),t.elementType=zC,t.lanes=i,t.stateNode={isHidden:!1},t}function Wy(t,e,i){return t=Kr(6,t,null,e),t.lanes=i,t}function qy(t,e,i){return e=Kr(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function k7(t,e,i,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Py(0),this.expirationTimes=Py(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Py(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function U_(t,e,i,r,s,n,a,o,c){return t=new k7(t,e,i,o,c),e===1?(e=1,n===!0&&(e|=8)):e=0,n=Kr(3,null,null,e),t.current=n,n.stateNode=t,n.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},w_(n),t}function T7(t,e,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ud,key:r==null?null:""+r,children:t,containerInfo:e,implementation:i}}function OR(t){if(!t)return no;t=t._reactInternals;e:{if(Uc(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var i=t.type;if(mr(i))return I5(t,i,e)}return e}function MR(t,e,i,r,s,n,a,o,c){return t=U_(i,r,!0,t,s,n,a,o,c),t.context=OR(null),i=t.current,r=tr(),s=Xa(i),n=Hn(r,s),n.callback=e??null,Qa(i,n,s),t.current.lanes=s,mh(t,s,r),fr(t,r),t}function _v(t,e,i,r){var s=e.current,n=tr(),a=Xa(s);return i=OR(i),e.context===null?e.context=i:e.pendingContext=i,e=Hn(n,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qa(s,e,a),t!==null&&(Is(t,s,a,n),Wg(t,s,a)),a}function uf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bk(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function j_(t,e){Bk(t,e),(t=t.alternate)&&Bk(t,e)}function x7(){return null}var DR=typeof reportError=="function"?reportError:function(t){console.error(t)};function $_(t){this._internalRoot=t}Sv.prototype.render=$_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));_v(t,e,null,null)};Sv.prototype.unmount=$_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xc(function(){_v(null,t,null,null)}),e[qn]=null}};function Sv(t){this._internalRoot=t}Sv.prototype.unstable_scheduleHydration=function(t){if(t){var e=l5();t={blockedOn:null,target:t,priority:e};for(var i=0;i<La.length&&e!==0&&e<La[i].priority;i++);La.splice(i,0,t),i===0&&p5(t)}};function z_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ev(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hk(){}function P7(t,e,i,r,s){if(s){if(typeof r=="function"){var n=r;r=function(){var d=uf(a);n.call(d)}}var a=MR(e,r,t,0,null,!1,!1,"",Hk);return t._reactRootContainer=a,t[qn]=a.current,Up(t.nodeType===8?t.parentNode:t),xc(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var d=uf(c);o.call(d)}}var c=U_(t,0,!1,null,null,!1,!1,"",Hk);return t._reactRootContainer=c,t[qn]=c.current,Up(t.nodeType===8?t.parentNode:t),xc(function(){_v(e,c,i,r)}),c}function kv(t,e,i,r,s){var n=i._reactRootContainer;if(n){var a=n;if(typeof s=="function"){var o=s;s=function(){var c=uf(a);o.call(c)}}_v(e,a,t,s)}else a=P7(i,e,t,s,r);return uf(a)}c5=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=Fu(e.pendingLanes);i!==0&&(n_(e,i|1),fr(e,Gt()),!(We&6)&&(kl=Gt()+500,ho()))}break;case 13:xc(function(){var r=Jn(t,1);if(r!==null){var s=tr();Is(r,t,1,s)}}),j_(t,1)}};a_=function(t){if(t.tag===13){var e=Jn(t,134217728);if(e!==null){var i=tr();Is(e,t,134217728,i)}j_(t,134217728)}};d5=function(t){if(t.tag===13){var e=Xa(t),i=Jn(t,e);if(i!==null){var r=tr();Is(i,t,e,r)}j_(t,e)}};l5=function(){return it};u5=function(t,e){var i=it;try{return it=t,e()}finally{it=i}};Ob=function(t,e,i){switch(e){case"input":if(Tb(t,i),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var r=i[e];if(r!==t&&r.form===t.form){var s=gv(r);if(!s)throw Error(J(90));VC(r),Tb(r,s)}}}break;case"textarea":HC(t,i);break;case"select":e=i.value,e!=null&&Zd(t,!!i.multiple,e,!1)}};QC=M_;ZC=xc;var C7={usingClientEntryPoint:!1,Events:[vh,Vd,gv,KC,YC,M_]},cu={findFiberByHostInstance:oc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},R7={bundleType:cu.bundleType,version:cu.version,rendererPackageName:cu.rendererPackageName,rendererConfig:cu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ta.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=t5(t),t===null?null:t.stateNode},findFiberByHostInstance:cu.findFiberByHostInstance||x7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ng=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ng.isDisabled&&ng.supportsFiber)try{lv=ng.inject(R7),nn=ng}catch{}}Nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C7;Nr.createPortal=function(t,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!z_(e))throw Error(J(200));return T7(t,e,null,i)};Nr.createRoot=function(t,e){if(!z_(t))throw Error(J(299));var i=!1,r="",s=DR;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=U_(t,1,!1,null,null,i,!1,r,s),t[qn]=e.current,Up(t.nodeType===8?t.parentNode:t),new $_(e)};Nr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=t5(e),t=t===null?null:t.stateNode,t};Nr.flushSync=function(t){return xc(t)};Nr.hydrate=function(t,e,i){if(!Ev(e))throw Error(J(200));return kv(null,t,e,!0,i)};Nr.hydrateRoot=function(t,e,i){if(!z_(t))throw Error(J(405));var r=i!=null&&i.hydratedSources||null,s=!1,n="",a=DR;if(i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(n=i.identifierPrefix),i.onRecoverableError!==void 0&&(a=i.onRecoverableError)),e=MR(e,null,t,1,i??null,s,!1,n,a),t[qn]=e.current,Up(t),r)for(t=0;t<r.length;t++)i=r[t],s=i._getVersion,s=s(i._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,s]:e.mutableSourceEagerHydrationData.push(i,s);return new Sv(e)};Nr.render=function(t,e,i){if(!Ev(e))throw Error(J(200));return kv(null,t,e,!1,i)};Nr.unmountComponentAtNode=function(t){if(!Ev(t))throw Error(J(40));return t._reactRootContainer?(xc(function(){kv(null,null,t,!1,function(){t._reactRootContainer=null,t[qn]=null})}),!0):!1};Nr.unstable_batchedUpdates=M_;Nr.unstable_renderSubtreeIntoContainer=function(t,e,i,r){if(!Ev(i))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return kv(t,e,i,!1,r)};Nr.version="18.2.0-next-9e3b772b8-20220608";function LR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LR)}catch(t){console.error(t)}}LR(),MC.exports=Nr;var A7=MC.exports,Gk=A7;yb.createRoot=Gk.createRoot,yb.hydrateRoot=Gk.hydrateRoot;/**
 * @remix-run/router v1.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wp(){return Wp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Wp.apply(this,arguments)}var Ha;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ha||(Ha={}));const Wk="popstate";function I7(t){t===void 0&&(t={});function e(r,s){let{pathname:n,search:a,hash:o}=r.location;return u1("",{pathname:n,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function i(r,s){return typeof s=="string"?s:pf(s)}return M7(e,i,null,t)}function oi(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function F_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function O7(){return Math.random().toString(36).substr(2,8)}function qk(t,e){return{usr:t.state,key:t.key,idx:e}}function u1(t,e,i,r){return i===void 0&&(i=null),Wp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ul(e):e,{state:i,key:e&&e.key||r||O7()})}function pf(t){let{pathname:e="/",search:i="",hash:r=""}=t;return i&&i!=="?"&&(e+=i.charAt(0)==="?"?i:"?"+i),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ul(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substr(i),t=t.substr(0,i));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function M7(t,e,i,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:n=!1}=r,a=s.history,o=Ha.Pop,c=null,d=u();d==null&&(d=0,a.replaceState(Wp({},a.state,{idx:d}),""));function u(){return(a.state||{idx:null}).idx}function p(){o=Ha.Pop;let w=u(),v=w==null?null:w-d;d=w,c&&c({action:o,location:b.location,delta:v})}function g(w,v){o=Ha.Push;let _=u1(b.location,w,v);i&&i(_,w),d=u()+1;let k=qk(_,d),P=b.createHref(_);try{a.pushState(k,"",P)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(P)}n&&c&&c({action:o,location:b.location,delta:1})}function m(w,v){o=Ha.Replace;let _=u1(b.location,w,v);i&&i(_,w),d=u();let k=qk(_,d),P=b.createHref(_);a.replaceState(k,"",P),n&&c&&c({action:o,location:b.location,delta:0})}function f(w){let v=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof w=="string"?w:pf(w);return oi(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let b={get action(){return o},get location(){return t(s,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Wk,p),c=w,()=>{s.removeEventListener(Wk,p),c=null}},createHref(w){return e(s,w)},createURL:f,encodeLocation(w){let v=f(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:g,replace:m,go(w){return a.go(w)}};return b}var Jk;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Jk||(Jk={}));function D7(t,e,i){i===void 0&&(i="/");let r=typeof e=="string"?Ul(e):e,s=V_(r.pathname||"/",i);if(s==null)return null;let n=NR(t);L7(n);let a=null;for(let o=0;a==null&&o<n.length;++o)a=H7(n[o],q7(s));return a}function NR(t,e,i,r){e===void 0&&(e=[]),i===void 0&&(i=[]),r===void 0&&(r="");let s=(n,a,o)=>{let c={relativePath:o===void 0?n.path||"":o,caseSensitive:n.caseSensitive===!0,childrenIndex:a,route:n};c.relativePath.startsWith("/")&&(oi(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=to([r,c.relativePath]),u=i.concat(c);n.children&&n.children.length>0&&(oi(n.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),NR(n.children,e,u,d)),!(n.path==null&&!n.index)&&e.push({path:d,score:V7(d,n.index),routesMeta:u})};return t.forEach((n,a)=>{var o;if(n.path===""||!((o=n.path)!=null&&o.includes("?")))s(n,a);else for(let c of UR(n.path))s(n,a,c)}),e}function UR(t){let e=t.split("/");if(e.length===0)return[];let[i,...r]=e,s=i.endsWith("?"),n=i.replace(/\?$/,"");if(r.length===0)return s?[n,""]:[n];let a=UR(r.join("/")),o=[];return o.push(...a.map(c=>c===""?n:[n,c].join("/"))),s&&o.push(...a),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function L7(t){t.sort((e,i)=>e.score!==i.score?i.score-e.score:B7(e.routesMeta.map(r=>r.childrenIndex),i.routesMeta.map(r=>r.childrenIndex)))}const N7=/^:\w+$/,U7=3,j7=2,$7=1,z7=10,F7=-2,Kk=t=>t==="*";function V7(t,e){let i=t.split("/"),r=i.length;return i.some(Kk)&&(r+=F7),e&&(r+=j7),i.filter(s=>!Kk(s)).reduce((s,n)=>s+(N7.test(n)?U7:n===""?$7:z7),r)}function B7(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function H7(t,e){let{routesMeta:i}=t,r={},s="/",n=[];for(let a=0;a<i.length;++a){let o=i[a],c=a===i.length-1,d=s==="/"?e:e.slice(s.length)||"/",u=G7({path:o.relativePath,caseSensitive:o.caseSensitive,end:c},d);if(!u)return null;Object.assign(r,u.params);let p=o.route;n.push({params:r,pathname:to([s,u.pathname]),pathnameBase:Q7(to([s,u.pathnameBase])),route:p}),u.pathnameBase!=="/"&&(s=to([s,u.pathnameBase]))}return n}function G7(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,r]=W7(t.path,t.caseSensitive,t.end),s=e.match(i);if(!s)return null;let n=s[0],a=n.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((d,u,p)=>{if(u==="*"){let g=o[p]||"";a=n.slice(0,n.length-g.length).replace(/(.)\/+$/,"$1")}return d[u]=J7(o[p]||"",u),d},{}),pathname:n,pathnameBase:a,pattern:t}}function W7(t,e,i){e===void 0&&(e=!1),i===void 0&&(i=!0),F_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,o)=>(r.push(o),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function q7(t){try{return decodeURI(t)}catch(e){return F_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function J7(t,e){try{return decodeURIComponent(t)}catch(i){return F_(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+i+").")),t}}function V_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,r=t.charAt(i);return r&&r!=="/"?null:t.slice(i)||"/"}function K7(t,e){e===void 0&&(e="/");let{pathname:i,search:r="",hash:s=""}=typeof t=="string"?Ul(t):t;return{pathname:i?i.startsWith("/")?i:Y7(i,e):e,search:Z7(r),hash:X7(s)}}function Y7(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?i.length>1&&i.pop():s!=="."&&i.push(s)}),i.length>1?i.join("/"):"/"}function Jy(t,e,i,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jR(t){return t.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function $R(t,e,i,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ul(t):(s=Wp({},t),oi(!s.pathname||!s.pathname.includes("?"),Jy("?","pathname","search",s)),oi(!s.pathname||!s.pathname.includes("#"),Jy("#","pathname","hash",s)),oi(!s.search||!s.search.includes("#"),Jy("#","search","hash",s)));let n=t===""||s.pathname==="",a=n?"/":s.pathname,o;if(r||a==null)o=i;else{let p=e.length-1;if(a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}o=p>=0?e[p]:"/"}let c=K7(s,o),d=a&&a!=="/"&&a.endsWith("/"),u=(n||a===".")&&i.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const to=t=>t.join("/").replace(/\/\/+/g,"/"),Q7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Z7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,X7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function e8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const zR=["post","put","patch","delete"];new Set(zR);const t8=["get",...zR];new Set(t8);/**
 * React Router v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hf(){return hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},hf.apply(this,arguments)}const B_=Q.createContext(null),i8=Q.createContext(null),jl=Q.createContext(null),Tv=Q.createContext(null),go=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),FR=Q.createContext(null);function r8(t,e){let{relative:i}=e===void 0?{}:e;bh()||oi(!1);let{basename:r,navigator:s}=Q.useContext(jl),{hash:n,pathname:a,search:o}=BR(t,{relative:i}),c=a;return r!=="/"&&(c=a==="/"?r:to([r,a])),s.createHref({pathname:c,search:o,hash:n})}function bh(){return Q.useContext(Tv)!=null}function xv(){return bh()||oi(!1),Q.useContext(Tv).location}function VR(t){Q.useContext(jl).static||Q.useLayoutEffect(t)}function s8(){let{isDataRoute:t}=Q.useContext(go);return t?b8():n8()}function n8(){bh()||oi(!1);let t=Q.useContext(B_),{basename:e,navigator:i}=Q.useContext(jl),{matches:r}=Q.useContext(go),{pathname:s}=xv(),n=JSON.stringify(jR(r).map(c=>c.pathnameBase)),a=Q.useRef(!1);return VR(()=>{a.current=!0}),Q.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let u=$R(c,JSON.parse(n),s,d.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:to([e,u.pathname])),(d.replace?i.replace:i.push)(u,d.state,d)},[e,i,n,s,t])}const a8=Q.createContext(null);function o8(t){let e=Q.useContext(go).outlet;return e&&Q.createElement(a8.Provider,{value:t},e)}function BR(t,e){let{relative:i}=e===void 0?{}:e,{matches:r}=Q.useContext(go),{pathname:s}=xv(),n=JSON.stringify(jR(r).map(a=>a.pathnameBase));return Q.useMemo(()=>$R(t,JSON.parse(n),s,i==="path"),[t,n,s,i])}function c8(t,e){return d8(t,e)}function d8(t,e,i){bh()||oi(!1);let{navigator:r}=Q.useContext(jl),{matches:s}=Q.useContext(go),n=s[s.length-1],a=n?n.params:{};n&&n.pathname;let o=n?n.pathnameBase:"/";n&&n.route;let c=xv(),d;if(e){var u;let b=typeof e=="string"?Ul(e):e;o==="/"||(u=b.pathname)!=null&&u.startsWith(o)||oi(!1),d=b}else d=c;let p=d.pathname||"/",g=o==="/"?p:p.slice(o.length)||"/",m=D7(t,{pathname:g}),f=g8(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:to([o,r.encodeLocation?r.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?o:to([o,r.encodeLocation?r.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,i);return e&&f?Q.createElement(Tv.Provider,{value:{location:hf({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ha.Pop}},f):f}function l8(){let t=y8(),e=e8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},n=null;return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),i?Q.createElement("pre",{style:s},i):null,n)}const u8=Q.createElement(l8,null);class p8 extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,i){return i.location!==e.location||i.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||i.error,location:i.location,revalidation:e.revalidation||i.revalidation}}componentDidCatch(e,i){console.error("React Router caught the following error during render",e,i)}render(){return this.state.error?Q.createElement(go.Provider,{value:this.props.routeContext},Q.createElement(FR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function h8(t){let{routeContext:e,match:i,children:r}=t,s=Q.useContext(B_);return s&&s.static&&s.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=i.route.id),Q.createElement(go.Provider,{value:e},r)}function g8(t,e,i){var r;if(e===void 0&&(e=[]),i===void 0&&(i=null),t==null){var s;if((s=i)!=null&&s.errors)t=i.matches;else return null}let n=t,a=(r=i)==null?void 0:r.errors;if(a!=null){let o=n.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id]));o>=0||oi(!1),n=n.slice(0,Math.min(n.length,o+1))}return n.reduceRight((o,c,d)=>{let u=c.route.id?a==null?void 0:a[c.route.id]:null,p=null;i&&(p=c.route.errorElement||u8);let g=e.concat(n.slice(0,d+1)),m=()=>{let f;return u?f=p:c.route.Component?f=Q.createElement(c.route.Component,null):c.route.element?f=c.route.element:f=o,Q.createElement(h8,{match:c,routeContext:{outlet:o,matches:g,isDataRoute:i!=null},children:f})};return i&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?Q.createElement(p8,{location:i.location,revalidation:i.revalidation,component:p,error:u,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var HR=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(HR||{}),gf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gf||{});function m8(t){let e=Q.useContext(B_);return e||oi(!1),e}function f8(t){let e=Q.useContext(i8);return e||oi(!1),e}function v8(t){let e=Q.useContext(go);return e||oi(!1),e}function GR(t){let e=v8(),i=e.matches[e.matches.length-1];return i.route.id||oi(!1),i.route.id}function y8(){var t;let e=Q.useContext(FR),i=f8(gf.UseRouteError),r=GR(gf.UseRouteError);return e||((t=i.errors)==null?void 0:t[r])}function b8(){let{router:t}=m8(HR.UseNavigateStable),e=GR(gf.UseNavigateStable),i=Q.useRef(!1);return VR(()=>{i.current=!0}),Q.useCallback(function(s,n){n===void 0&&(n={}),i.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,hf({fromRouteId:e},n)))},[t,e])}function w8(t){return o8(t.context)}function Bu(t){oi(!1)}function _8(t){let{basename:e="/",children:i=null,location:r,navigationType:s=Ha.Pop,navigator:n,static:a=!1}=t;bh()&&oi(!1);let o=e.replace(/^\/*/,"/"),c=Q.useMemo(()=>({basename:o,navigator:n,static:a}),[o,n,a]);typeof r=="string"&&(r=Ul(r));let{pathname:d="/",search:u="",hash:p="",state:g=null,key:m="default"}=r,f=Q.useMemo(()=>{let b=V_(d,o);return b==null?null:{location:{pathname:b,search:u,hash:p,state:g,key:m},navigationType:s}},[o,d,u,p,g,m,s]);return f==null?null:Q.createElement(jl.Provider,{value:c},Q.createElement(Tv.Provider,{children:i,value:f}))}function S8(t){let{children:e,location:i}=t;return c8(p1(e),i)}new Promise(()=>{});function p1(t,e){e===void 0&&(e=[]);let i=[];return Q.Children.forEach(t,(r,s)=>{if(!Q.isValidElement(r))return;let n=[...e,s];if(r.type===Q.Fragment){i.push.apply(i,p1(r.props.children,n));return}r.type!==Bu&&oi(!1),!r.props.index||!r.props.children||oi(!1);let a={id:r.props.id||n.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=p1(r.props.children,n)),i.push(a)}),i}/**
 * React Router DOM v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function h1(){return h1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},h1.apply(this,arguments)}function E8(t,e){if(t==null)return{};var i={},r=Object.keys(t),s,n;for(n=0;n<r.length;n++)s=r[n],!(e.indexOf(s)>=0)&&(i[s]=t[s]);return i}function k8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function T8(t,e){return t.button===0&&(!e||e==="_self")&&!k8(t)}const x8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],P8="startTransition",Yk=wL[P8];function C8(t){let{basename:e,children:i,future:r,window:s}=t,n=Q.useRef();n.current==null&&(n.current=I7({window:s,v5Compat:!0}));let a=n.current,[o,c]=Q.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},u=Q.useCallback(p=>{d&&Yk?Yk(()=>c(p)):c(p)},[c,d]);return Q.useLayoutEffect(()=>a.listen(u),[a,u]),Q.createElement(_8,{basename:e,children:i,location:o.location,navigationType:o.action,navigator:a})}const R8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",A8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qk=Q.forwardRef(function(e,i){let{onClick:r,relative:s,reloadDocument:n,replace:a,state:o,target:c,to:d,preventScrollReset:u}=e,p=E8(e,x8),{basename:g}=Q.useContext(jl),m,f=!1;if(typeof d=="string"&&A8.test(d)&&(m=d,R8))try{let _=new URL(window.location.href),k=d.startsWith("//")?new URL(_.protocol+d):new URL(d),P=V_(k.pathname,g);k.origin===_.origin&&P!=null?d=P+k.search+k.hash:f=!0}catch{}let b=r8(d,{relative:s}),w=I8(d,{replace:a,state:o,target:c,preventScrollReset:u,relative:s});function v(_){r&&r(_),_.defaultPrevented||w(_)}return Q.createElement("a",h1({},p,{href:m||b,onClick:f||n?r:v,ref:i,target:c}))});var Zk;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(Zk||(Zk={}));var Xk;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Xk||(Xk={}));function I8(t,e){let{target:i,replace:r,state:s,preventScrollReset:n,relative:a}=e===void 0?{}:e,o=s8(),c=xv(),d=BR(t,{relative:a});return Q.useCallback(u=>{if(T8(u,i)){u.preventDefault();let p=r!==void 0?r:pf(c)===pf(d);o(t,{replace:p,state:s,preventScrollReset:n,relative:a})}},[c,o,d,r,s,i,t,n,a])}const O8=()=>Y.jsxs(Y.Fragment,{children:[Y.jsxs("nav",{className:"bg-[#629460] ",children:[Y.jsx("button",{className:"read rounded-2xl p-2 m-2 bg-white bg-opacity-20 backdrop-blur-4xl text-black ",children:Y.jsx(Qk,{to:"/",children:"लेख पढ़ें"})}),Y.jsx("button",{className:"connect rounded-2xl p-2 m-2 bg-white bg-opacity-20 backdrop-blur-4xl text-black ",children:Y.jsx(Qk,{to:"/videochat",children:"विशेषज्ञ के साथ जुड़ें"})})]}),Y.jsx(w8,{})]}),M8="/AgroGyan/assets/front-bfc2c25c.png",D8=()=>Y.jsxs("div",{className:"flex bg-[#09bc8a] justify-center items-center",children:[Y.jsx("img",{src:M8,className:"front flex justify-center items-center w-fit h-[90vh]"}),Y.jsx("div",{className:"absolute translate-y-[-280%] translate-x-[80%] text-2xl p-6 rounded-xl bg-white text-black mix-blend-screen",children:"AGROGYAN"})]}),du=({name:t,articlelink:e,imglink:i,blog:r})=>Y.jsx("div",{className:"flex justify-center items-center w-screen h-screen",children:Y.jsxs("div",{className:"rounded-3xl blog h-[500px] w-[360px] p-5 shadow-2xl bg-white bg-opacity-20 backdrop-blur-4xl",children:[Y.jsx("p",{className:"text-2xl",children:t}),Y.jsx("div",{className:" overflow-y-auto overflow-hidden ",children:Y.jsx("p",{className:"z-[0] h-[500px] w-[300px]",children:r})}),Y.jsx("img",{className:"person z-3 translate-y-[-100%] absolute rounded-3xl z-2 h-[500px] w-[360px]",src:i}),Y.jsx("a",{href:e,className:"text-2xl rounded-md p-1 bg-white text-black mix-blend-screen absolute translate-y-[-320%] translate-x-[-124%]",children:"ज्यादा जानें"}),Y.jsx("div",{className:"text-2xl rounded-md p-1 bg-white text-black mix-blend-screen absolute translate-y-[-180%] translate-x-[10%]",children:"होवर / क्लिक पढ़ने के लिए "})]})}),L8=({name:t,email:e,phoneno:i,submit:r})=>Y.jsx("div",{className:"flex justify-center items-center w-screen h-screen",children:Y.jsxs("div",{className:"grid grid-rows-5 bg-transparent",children:[Y.jsx("div",{onInput:t,className:"m-5",children:Y.jsx("input",{className:"w-[60vw] text-black input outline-none text-xl placeholder-black bg-transparent border-t-2 border-b-2 border-black",placeholder:"पूरा नाम",type:"text"})}),Y.jsx("div",{onInput:e,className:"m-5",children:Y.jsx("input",{className:"w-[60vw] text-black input outline-none text-xl placeholder-black bg-transparent border-t-2 border-b-2 border-black",placeholder:"ईमेल",type:"email"})}),Y.jsx("div",{onInput:i,className:"m-5",children:Y.jsx("input",{className:"w-[60vw] text-black input outline-none text-xl placeholder-black bg-transparent border-t-2 border-b-2 border-black",placeholder:"फ़ोन नंबर",type:"number"})}),Y.jsx("div",{className:"m-5",children:Y.jsx("input",{className:"w-[60vw] text-black input outline-none text-xl placeholder-black bg-transparent border-t-2 border-b-2 border-black",placeholder:"समस्या को स्पष्ट करें",type:"text"})}),Y.jsx("div",{onClick:r,className:"flex justify-center items-center",children:Y.jsx("button",{className:"w-[30vw] h-[8vh] bg-black",children:"जमा करें"})})]})});var Ky=[{id:1,name:"Leanne Graham",email:"Sincere@april.biz",phone:"1-770-736-8031 x56442"},{id:2,name:"Ervin Howell",email:"Shanna@melissa.tv",phone:"010-692-6593 x09125"},{id:3,name:"Clementine Bauch",email:"Nathan@yesenia.net",phone:"1-463-123-4447"},{id:4,name:"Patricia Lebsack",email:"Julianne.OConner@kory.org",phone:"493-170-9623 x156"},{id:5,name:"Chelsey Dietrich",email:"Lucio_Hettinger@annie.ca",phone:"(254)954-1289"},{id:6,name:"Mrs. Dennis Schulist",email:"Karley_Dach@jasper.info",phone:"1-477-935-8478 x6430"},{id:7,name:"Kurtis Weissnat",email:"Telly.Hoeger@billy.biz",phone:"210.067.6132"},{id:8,name:"Nicholas Runolfsdottir V",email:"Sherwood@rosamond.me",phone:"586.493.6943 x140"},{id:9,name:"Glenna Reichert",email:"Chaim_McDermott@dana.io",phone:"(775)976-6794 x41206"},{id:10,name:"Clementina DuBuque",email:"Rey.Padberg@karina.biz",phone:"024-648-3804"}],N8=10,ag="",og="",cg="";class U8 extends Q.Component{constructor(){super();Jc(this,"saveName",i=>{ag=i.target.value});Jc(this,"saveEmail",i=>{og=i.target.value});Jc(this,"savePhoneno",i=>{cg=i.target.value});Jc(this,"submitClick",()=>{console.log(ag),console.log(og),console.log(cg);const i={id:++N8,name:ag,email:og,phone:cg};this.setState({Data:Ky.push(i)}),ag="",og="",cg="",console.log(Ky)});Jc(this,"menuShow",()=>{let i=document.getElementsByClassName("home")[0],r=document.getElementsByClassName("articles")[0],s=document.getElementsByClassName("contacts")[0];i.classList.toggle("show"),r.classList.toggle("show"),s.classList.toggle("show")});this.state={Data:Ky}}render(){return Y.jsxs("div",{className:"main overflow-x-hidden",children:[Y.jsx("style",{children:"@import url('https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Kenia&family=Mooli&family=Orbitron&family=Poppins:wght@300&family=Rubik+Iso&family=Space+Grotesk:wght@300&display=swap');"}),Y.jsxs("section",{className:"grider",children:[Y.jsx("p",{className:'helper help font-["Mooli",sans-serif]  bg-white bg-opacity-20 backdrop-blur-4xl text-black mix-blend-screen col-span-2 flex justify-start',children:"AGROGYAN"}),Y.jsx("a",{className:'helper home font-["Mooli",sans-serif] bg-white bg-opacity-20 backdrop-blur-4xl text-black mix-blend-screen flex justify-center items-center',href:"#first",children:"होम"}),Y.jsx("a",{className:'helper articles font-["Mooli",sans-serif] bg-white bg-opacity-20 backdrop-blur-4xl text-black mix-blend-screen flex justify-center items-center',href:"#slider",children:"लेख"}),Y.jsx("a",{className:'helper contacts font-["Mooli",sans-serif] bg-white bg-opacity-20 backdrop-blur-4xl text-black mix-blend-screen flex justify-center items-center',href:"#contacts",children:"संपर्क"})]}),Y.jsx("img",{onClick:this.menuShow,className:"cursor-pointer menu w-[40px] h-[40px] fixed",src:"https://cdn-icons-png.flaticon.com/128/56/56763.png"}),Y.jsx("div",{id:"first",className:"first w-[99vw] h-screen ",children:Y.jsx("section",{className:"absolute flex justify-center items-center p-16 h-screen",children:Y.jsxs("div",{className:" rounded-3xl ",children:[Y.jsx("div",{className:"flex justify-center items-center",children:Y.jsx("div",{className:"mainfont rounded-3xl w-fit",children:Y.jsx("p",{className:"font1 rounded-3xl bg-white text-black mix-blend-screen",children:"AGROGYAN"})})}),Y.jsx("p",{className:"p-5 text-2xl",children:"भारतीय किसानों को विज्ञान के साथ सशक्त बनाना। हम अकादमिक लेखों का हिंदी में अनुवाद और सरलीकरण करते हैं, जिससे उन्नत तरीके सुलभ हो जाते हैं। खेती की व्यावहारिक जानकारी के लिए हमसे जुड़ें।"})]})})}),Y.jsxs("div",{id:"slider",className:"slider w-screen second bg-[#ff99c8]",children:[Y.jsx("div",{className:"buttons flex z-10 absolute w-screen h-100vh"}),Y.jsx("section",{className:" bg-teal-600",children:Y.jsx(du,{name:"नाम",articlelink:"https://www.scirp.org/journal/paperinformation.aspx?paperid=127671",imglink:"https://th.bing.com/th/id/OIP.JrKXk3hSLV_NJ35YjPzAZwAAAA?pid=ImgDet&rs=1",blog:"इस अध्ययन से पता चलता है कि कवक 'एम एनीसोप्लिया' किसानों के लिए अपने मीठे आलू को कुछ कीड़े से बचाने के लिए एक सहायक उपकरण हो सकता है, लेकिन यह सुनिश्चित करने के लिए अधिक शोध की आवश्यकता है कि क्या यह अन्य बग के लिए भी काम कर सकता है। वैज्ञानिकों को हमारी फसलों को कीटों से सुरक्षित रखने के नए तरीके खोजते हुए देखना रोमांचक है।"})}),Y.jsx("section",{className:"flex justify-center items-center bg-[#c1b699]",children:Y.jsx(du,{name:"नाम",articlelink:"https://www.scirp.org/journal/paperinformation.aspx?paperid=127863",imglink:"https://media.licdn.com/dms/image/D4E03AQGgjszN18VqYA/profile-displayphoto-shrink_800_800/0/1680838833889?e=2147483647&v=beta&t=CCYsU_dTcOBFZx5q-XySer1Z_CwZ09BxUDdzWt6b7H0",blog:"यदि लक्ष्य टमाटर के पौधों के विकास को बढ़ावा देना और सबसे अधिक टमाटर प्राप्त करना है, तो चिकन खाद इन तीन प्रकार की खाद में सबसे अच्छा विकल्प है। ऐसा इसलिए है क्योंकि यह नाइट्रोजन, फास्फोरस और पोटेशियम जैसे महत्वपूर्ण पोषक तत्व प्रदान करता है, जो पौधे के विकास के लिए आवश्यक हैं। ये पोषक तत्व टमाटर के पौधों द्वारा आसानी से अवशोषित हो जाते हैं जब उन्हें मिट्टी में चिकन खाद के साथ मिलाया जाता है।"})}),Y.jsx("section",{className:"flex justify-center items-center bg-slate-600",children:Y.jsx(du,{name:"नाम",articlelink:"https://www.scirp.org/journal/paperinformation.aspx?paperid=127859",imglink:"https://www.cifor-icraf.org/wp-content/uploads/2021/08/Vijay_Kumar-300x300.png",blog:"यह अध्ययन प्रारंभिक सबूत प्रदान करता है कि रासायनिक खेती की तुलना में जलवायु परिवर्तन के नकारात्मक प्रभावों को कम करने में प्राकृतिक खेती अधिक लचीला हो सकती है। हालांकि, यह विभिन्न प्राकृतिक कृषि सिद्धांतों और प्रतिकूल जलवायु परिस्थितियों में उनकी प्रभावशीलता के बीच कारण और प्रभाव संबंधों को पूरी तरह से समझने के लिए आगे दीर्घकालिक प्रयोगों की आवश्यकता को स्वीकार करता है।"})}),Y.jsx("section",{className:"flex justify-center items-center bg-[#1e6091]",children:Y.jsx(du,{name:"नाम",articlelink:"https://www.scirp.org/journal/paperinformation.aspx?paperid=127759",imglink:"https://i1.rgstatic.net/ii/profile.image/11431281103283894-1669643936483_Q512/Kwadwo-Gyasi-Santo.jpg",blog:"यह अध्ययन इस बात पर प्रकाश डालता है कि मक्का और मूंगफली को एक साथ मिलाकर और मूंगफली को जल्दी लगाने से खेती कैसे बेहतर हो सकती है। किसान इन विचारों का उपयोग अधिक फसल उगाने और अपने खेतों को बेहतर बनाने के लिए कर सकते हैं। विभिन्न स्थानों में इसकी खोज करके और विभिन्न व्यवस्थाओं को आजमाकर, हम और भी अधिक किसानों की मदद कर सकते हैं और दुनिया भर में खेती को स्मार्ट बना सकते हैं।"})}),Y.jsx("section",{className:"flex justify-center items-center bg-[#ff9770]",children:Y.jsx(du,{name:"नाम",articlelink:"https://www.scirp.org/journal/paperinformation.aspx?paperid=127520",imglink:"https://i1.rgstatic.net/ii/profile.image/726369508007938-1550191394828_Q128/Ame-Thiombiano.jpg",blog:"यह अध्ययन प्रोटीन के समृद्ध स्रोत के रूप में बम्बरा मूंगफली की क्षमता पर प्रकाश डालता है। विभिन्न भूमि प्रजातियों के बीच प्रोटीन सामग्री में मामूली बदलाव हमें याद दिलाते हैं कि इस अद्भुत फसल के बारे में अभी भी बहुत कुछ खोजना बाकी है। यह शोध न केवल बम्बरा मूंगफली के बारे में हमारे ज्ञान को बढ़ाता है, बल्कि इस अक्सर कम आंकी गई फसल की आगे की खोज की आवश्यकता पर भी जोर देता है। इसमें खाद्य और पोषण चुनौतियों से निपटने में हमारी मदद करने की शक्ति है, खासकर उन क्षेत्रों में जहां वे सबसे कठिन हैं।"})})]}),Y.jsx("div",{id:"contacts",className:"h-screen w-screen third bg-white",children:Y.jsx(L8,{name:this.saveName,email:this.saveEmail,phoneno:this.savePhoneno,submit:this.submitClick})})]})}}var dg,j8=new Uint8Array(16);function $8(){if(!dg&&(dg=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!dg))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dg(j8)}const z8=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function H_(t){return typeof t=="string"&&z8.test(t)}var Ri=[];for(var Yy=0;Yy<256;++Yy)Ri.push((Yy+256).toString(16).substr(1));function F8(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(Ri[t[e+0]]+Ri[t[e+1]]+Ri[t[e+2]]+Ri[t[e+3]]+"-"+Ri[t[e+4]]+Ri[t[e+5]]+"-"+Ri[t[e+6]]+Ri[t[e+7]]+"-"+Ri[t[e+8]]+Ri[t[e+9]]+"-"+Ri[t[e+10]]+Ri[t[e+11]]+Ri[t[e+12]]+Ri[t[e+13]]+Ri[t[e+14]]+Ri[t[e+15]]).toLowerCase();if(!H_(i))throw TypeError("Stringified UUID is invalid");return i}function Pv(t,e,i){t=t||{};var r=t.random||(t.rng||$8)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){i=i||0;for(var s=0;s<16;++s)e[i+s]=r[s];return e}return F8(r)}var G_={exports:{}},WR=function(e,i){return function(){for(var s=new Array(arguments.length),n=0;n<s.length;n++)s[n]=arguments[n];return e.apply(i,s)}},V8=WR,mo=Object.prototype.toString;function W_(t){return Array.isArray(t)}function g1(t){return typeof t>"u"}function B8(t){return t!==null&&!g1(t)&&t.constructor!==null&&!g1(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function qR(t){return mo.call(t)==="[object ArrayBuffer]"}function H8(t){return mo.call(t)==="[object FormData]"}function G8(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&qR(t.buffer),e}function W8(t){return typeof t=="string"}function q8(t){return typeof t=="number"}function JR(t){return t!==null&&typeof t=="object"}function Xg(t){if(mo.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function J8(t){return mo.call(t)==="[object Date]"}function K8(t){return mo.call(t)==="[object File]"}function Y8(t){return mo.call(t)==="[object Blob]"}function KR(t){return mo.call(t)==="[object Function]"}function Q8(t){return JR(t)&&KR(t.pipe)}function Z8(t){return mo.call(t)==="[object URLSearchParams]"}function X8(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function e9(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function q_(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),W_(t))for(var i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(null,t[s],s,t)}function m1(){var t={};function e(s,n){Xg(t[n])&&Xg(s)?t[n]=m1(t[n],s):Xg(s)?t[n]=m1({},s):W_(s)?t[n]=s.slice():t[n]=s}for(var i=0,r=arguments.length;i<r;i++)q_(arguments[i],e);return t}function t9(t,e,i){return q_(e,function(s,n){i&&typeof s=="function"?t[n]=V8(s,i):t[n]=s}),t}function i9(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var yr={isArray:W_,isArrayBuffer:qR,isBuffer:B8,isFormData:H8,isArrayBufferView:G8,isString:W8,isNumber:q8,isObject:JR,isPlainObject:Xg,isUndefined:g1,isDate:J8,isFile:K8,isBlob:Y8,isFunction:KR,isStream:Q8,isURLSearchParams:Z8,isStandardBrowserEnv:e9,forEach:q_,merge:m1,extend:t9,trim:X8,stripBOM:i9},Yc=yr;function eT(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var YR=function(e,i,r){if(!i)return e;var s;if(r)s=r(i);else if(Yc.isURLSearchParams(i))s=i.toString();else{var n=[];Yc.forEach(i,function(c,d){c===null||typeof c>"u"||(Yc.isArray(c)?d=d+"[]":c=[c],Yc.forEach(c,function(p){Yc.isDate(p)?p=p.toISOString():Yc.isObject(p)&&(p=JSON.stringify(p)),n.push(eT(d)+"="+eT(p))}))}),s=n.join("&")}if(s){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e},r9=yr;function Cv(){this.handlers=[]}Cv.prototype.use=function(e,i,r){return this.handlers.push({fulfilled:e,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};Cv.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Cv.prototype.forEach=function(e){r9.forEach(this.handlers,function(r){r!==null&&e(r)})};var s9=Cv,n9=yr,a9=function(e,i){n9.forEach(e,function(s,n){n!==i&&n.toUpperCase()===i.toUpperCase()&&(e[i]=s,delete e[n])})},QR=function(e,i,r,s,n){return e.config=i,r&&(e.code=r),e.request=s,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Qy,tT;function ZR(){if(tT)return Qy;tT=1;var t=QR;return Qy=function(i,r,s,n,a){var o=new Error(i);return t(o,r,s,n,a)},Qy}var Zy,iT;function o9(){if(iT)return Zy;iT=1;var t=ZR();return Zy=function(i,r,s){var n=s.config.validateStatus;!s.status||!n||n(s.status)?i(s):r(t("Request failed with status code "+s.status,s.config,null,s.request,s))},Zy}var Xy,rT;function c9(){if(rT)return Xy;rT=1;var t=yr;return Xy=t.isStandardBrowserEnv()?function(){return{write:function(r,s,n,a,o,c){var d=[];d.push(r+"="+encodeURIComponent(s)),t.isNumber(n)&&d.push("expires="+new Date(n).toGMTString()),t.isString(a)&&d.push("path="+a),t.isString(o)&&d.push("domain="+o),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(r){var s=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Xy}var e0,sT;function d9(){return sT||(sT=1,e0=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),e0}var t0,nT;function l9(){return nT||(nT=1,t0=function(e,i){return i?e.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):e}),t0}var i0,aT;function u9(){if(aT)return i0;aT=1;var t=d9(),e=l9();return i0=function(r,s){return r&&!t(s)?e(r,s):s},i0}var r0,oT;function p9(){if(oT)return r0;oT=1;var t=yr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return r0=function(r){var s={},n,a,o;return r&&t.forEach(r.split(`
`),function(d){if(o=d.indexOf(":"),n=t.trim(d.substr(0,o)).toLowerCase(),a=t.trim(d.substr(o+1)),n){if(s[n]&&e.indexOf(n)>=0)return;n==="set-cookie"?s[n]=(s[n]?s[n]:[]).concat([a]):s[n]=s[n]?s[n]+", "+a:a}}),s},r0}var s0,cT;function h9(){if(cT)return s0;cT=1;var t=yr;return s0=t.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),s;function n(a){var o=a;return i&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=n(window.location.href),function(o){var c=t.isString(o)?n(o):o;return c.protocol===s.protocol&&c.host===s.host}}():function(){return function(){return!0}}(),s0}var n0,dT;function Rv(){if(dT)return n0;dT=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,n0=t,n0}var a0,lT;function uT(){if(lT)return a0;lT=1;var t=yr,e=o9(),i=c9(),r=YR,s=u9(),n=p9(),a=h9(),o=ZR(),c=Av(),d=Rv();return a0=function(p){return new Promise(function(m,f){var b=p.data,w=p.headers,v=p.responseType,_;function k(){p.cancelToken&&p.cancelToken.unsubscribe(_),p.signal&&p.signal.removeEventListener("abort",_)}t.isFormData(b)&&delete w["Content-Type"];var P=new XMLHttpRequest;if(p.auth){var D=p.auth.username||"",M=p.auth.password?unescape(encodeURIComponent(p.auth.password)):"";w.Authorization="Basic "+btoa(D+":"+M)}var B=s(p.baseURL,p.url);P.open(p.method.toUpperCase(),r(B,p.params,p.paramsSerializer),!0),P.timeout=p.timeout;function G(){if(P){var ie="getAllResponseHeaders"in P?n(P.getAllResponseHeaders()):null,oe=!v||v==="text"||v==="json"?P.responseText:P.response,Re={data:oe,status:P.status,statusText:P.statusText,headers:ie,config:p,request:P};e(function(lt){m(lt),k()},function(lt){f(lt),k()},Re),P=null}}if("onloadend"in P?P.onloadend=G:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(G)},P.onabort=function(){P&&(f(o("Request aborted",p,"ECONNABORTED",P)),P=null)},P.onerror=function(){f(o("Network Error",p,null,P)),P=null},P.ontimeout=function(){var oe=p.timeout?"timeout of "+p.timeout+"ms exceeded":"timeout exceeded",Re=p.transitional||c.transitional;p.timeoutErrorMessage&&(oe=p.timeoutErrorMessage),f(o(oe,p,Re.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",P)),P=null},t.isStandardBrowserEnv()){var ne=(p.withCredentials||a(B))&&p.xsrfCookieName?i.read(p.xsrfCookieName):void 0;ne&&(w[p.xsrfHeaderName]=ne)}"setRequestHeader"in P&&t.forEach(w,function(oe,Re){typeof b>"u"&&Re.toLowerCase()==="content-type"?delete w[Re]:P.setRequestHeader(Re,oe)}),t.isUndefined(p.withCredentials)||(P.withCredentials=!!p.withCredentials),v&&v!=="json"&&(P.responseType=p.responseType),typeof p.onDownloadProgress=="function"&&P.addEventListener("progress",p.onDownloadProgress),typeof p.onUploadProgress=="function"&&P.upload&&P.upload.addEventListener("progress",p.onUploadProgress),(p.cancelToken||p.signal)&&(_=function(ie){P&&(f(!ie||ie&&ie.type?new d("canceled"):ie),P.abort(),P=null)},p.cancelToken&&p.cancelToken.subscribe(_),p.signal&&(p.signal.aborted?_():p.signal.addEventListener("abort",_))),b||(b=null),P.send(b)})},a0}var o0,pT;function Av(){if(pT)return o0;pT=1;var t=yr,e=a9,i=QR,r={"Content-Type":"application/x-www-form-urlencoded"};function s(c,d){!t.isUndefined(c)&&t.isUndefined(c["Content-Type"])&&(c["Content-Type"]=d)}function n(){var c;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(c=uT()),c}function a(c,d,u){if(t.isString(c))try{return(d||JSON.parse)(c),t.trim(c)}catch(p){if(p.name!=="SyntaxError")throw p}return(u||JSON.stringify)(c)}var o={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:n(),transformRequest:[function(d,u){return e(u,"Accept"),e(u,"Content-Type"),t.isFormData(d)||t.isArrayBuffer(d)||t.isBuffer(d)||t.isStream(d)||t.isFile(d)||t.isBlob(d)?d:t.isArrayBufferView(d)?d.buffer:t.isURLSearchParams(d)?(s(u,"application/x-www-form-urlencoded;charset=utf-8"),d.toString()):t.isObject(d)||u&&u["Content-Type"]==="application/json"?(s(u,"application/json"),a(d)):d}],transformResponse:[function(d){var u=this.transitional||o.transitional,p=u&&u.silentJSONParsing,g=u&&u.forcedJSONParsing,m=!p&&this.responseType==="json";if(m||g&&t.isString(d)&&d.length)try{return JSON.parse(d)}catch(f){if(m)throw f.name==="SyntaxError"?i(f,this,"E_JSON_PARSE"):f}return d}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(d){return d>=200&&d<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(d){o.headers[d]={}}),t.forEach(["post","put","patch"],function(d){o.headers[d]=t.merge(r)}),o0=o,o0}var g9=yr,m9=Av(),f9=function(e,i,r){var s=this||m9;return g9.forEach(r,function(a){e=a.call(s,e,i)}),e},c0,hT;function XR(){return hT||(hT=1,c0=function(e){return!!(e&&e.__CANCEL__)}),c0}var gT=yr,d0=f9,v9=XR(),y9=Av(),b9=Rv();function l0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new b9("canceled")}var w9=function(e){l0(e),e.headers=e.headers||{},e.data=d0.call(e,e.data,e.headers,e.transformRequest),e.headers=gT.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),gT.forEach(["delete","get","head","post","put","patch","common"],function(s){delete e.headers[s]});var i=e.adapter||y9.adapter;return i(e).then(function(s){return l0(e),s.data=d0.call(e,s.data,s.headers,e.transformResponse),s},function(s){return v9(s)||(l0(e),s&&s.response&&(s.response.data=d0.call(e,s.response.data,s.response.headers,e.transformResponse))),Promise.reject(s)})},Sr=yr,eA=function(e,i){i=i||{};var r={};function s(u,p){return Sr.isPlainObject(u)&&Sr.isPlainObject(p)?Sr.merge(u,p):Sr.isPlainObject(p)?Sr.merge({},p):Sr.isArray(p)?p.slice():p}function n(u){if(Sr.isUndefined(i[u])){if(!Sr.isUndefined(e[u]))return s(void 0,e[u])}else return s(e[u],i[u])}function a(u){if(!Sr.isUndefined(i[u]))return s(void 0,i[u])}function o(u){if(Sr.isUndefined(i[u])){if(!Sr.isUndefined(e[u]))return s(void 0,e[u])}else return s(void 0,i[u])}function c(u){if(u in i)return s(e[u],i[u]);if(u in e)return s(void 0,e[u])}var d={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return Sr.forEach(Object.keys(e).concat(Object.keys(i)),function(p){var g=d[p]||n,m=g(p);Sr.isUndefined(m)&&g!==c||(r[p]=m)}),r},u0,mT;function tA(){return mT||(mT=1,u0={version:"0.25.0"}),u0}var _9=tA().version,J_={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){J_[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});var fT={};J_.transitional=function(e,i,r){function s(n,a){return"[Axios v"+_9+"] Transitional option '"+n+"'"+a+(r?". "+r:"")}return function(n,a,o){if(e===!1)throw new Error(s(a," has been removed"+(i?" in "+i:"")));return i&&!fT[a]&&(fT[a]=!0,console.warn(s(a," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(n,a,o):!0}};function S9(t,e,i){if(typeof t!="object")throw new TypeError("options must be an object");for(var r=Object.keys(t),s=r.length;s-- >0;){var n=r[s],a=e[n];if(a){var o=t[n],c=o===void 0||a(o,n,t);if(c!==!0)throw new TypeError("option "+n+" must be "+c);continue}if(i!==!0)throw Error("Unknown option "+n)}}var E9={assertOptions:S9,validators:J_},iA=yr,k9=YR,vT=s9,yT=w9,Iv=eA,rA=E9,Qc=rA.validators;function wh(t){this.defaults=t,this.interceptors={request:new vT,response:new vT}}wh.prototype.request=function(e,i){if(typeof e=="string"?(i=i||{},i.url=e):i=e||{},!i.url)throw new Error("Provided config url is not valid");i=Iv(this.defaults,i),i.method?i.method=i.method.toLowerCase():this.defaults.method?i.method=this.defaults.method.toLowerCase():i.method="get";var r=i.transitional;r!==void 0&&rA.assertOptions(r,{silentJSONParsing:Qc.transitional(Qc.boolean),forcedJSONParsing:Qc.transitional(Qc.boolean),clarifyTimeoutError:Qc.transitional(Qc.boolean)},!1);var s=[],n=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(i)===!1||(n=n&&m.synchronous,s.unshift(m.fulfilled,m.rejected))});var a=[];this.interceptors.response.forEach(function(m){a.push(m.fulfilled,m.rejected)});var o;if(!n){var c=[yT,void 0];for(Array.prototype.unshift.apply(c,s),c=c.concat(a),o=Promise.resolve(i);c.length;)o=o.then(c.shift(),c.shift());return o}for(var d=i;s.length;){var u=s.shift(),p=s.shift();try{d=u(d)}catch(g){p(g);break}}try{o=yT(d)}catch(g){return Promise.reject(g)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};wh.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=Iv(this.defaults,e),k9(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};iA.forEach(["delete","get","head","options"],function(e){wh.prototype[e]=function(i,r){return this.request(Iv(r||{},{method:e,url:i,data:(r||{}).data}))}});iA.forEach(["post","put","patch"],function(e){wh.prototype[e]=function(i,r,s){return this.request(Iv(s||{},{method:e,url:i,data:r}))}});var T9=wh,p0,bT;function x9(){if(bT)return p0;bT=1;var t=Rv();function e(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(a){r=a});var s=this;this.promise.then(function(n){if(s._listeners){var a,o=s._listeners.length;for(a=0;a<o;a++)s._listeners[a](n);s._listeners=null}}),this.promise.then=function(n){var a,o=new Promise(function(c){s.subscribe(c),a=c}).then(n);return o.cancel=function(){s.unsubscribe(a)},o},i(function(a){s.reason||(s.reason=new t(a),r(s.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},e.prototype.unsubscribe=function(r){if(this._listeners){var s=this._listeners.indexOf(r);s!==-1&&this._listeners.splice(s,1)}},e.source=function(){var r,s=new e(function(a){r=a});return{token:s,cancel:r}},p0=e,p0}var h0,wT;function P9(){return wT||(wT=1,h0=function(e){return function(r){return e.apply(null,r)}}),h0}var g0,_T;function C9(){if(_T)return g0;_T=1;var t=yr;return g0=function(i){return t.isObject(i)&&i.isAxiosError===!0},g0}var ST=yr,R9=WR,em=T9,A9=eA,I9=Av();function sA(t){var e=new em(t),i=R9(em.prototype.request,e);return ST.extend(i,em.prototype,e),ST.extend(i,e),i.create=function(s){return sA(A9(t,s))},i}var mn=sA(I9);mn.Axios=em;mn.Cancel=Rv();mn.CancelToken=x9();mn.isCancel=XR();mn.VERSION=tA().version;mn.all=function(e){return Promise.all(e)};mn.spread=P9();mn.isAxiosError=C9();G_.exports=mn;G_.exports.default=mn;var O9=G_.exports,M9=O9;const mf=SC(M9),D9={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},nA={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},zt={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Qi={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ba={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class V{static getFirstMatch(e,i){const r=i.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,i){const r=i.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,i,r){if(e.test(i))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const i=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(i.push(0),i[0]===10)switch(i[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const i=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(i.push(0),!(i[0]===1&&i[1]<5)){if(i[0]===1&&i[1]<6)return"Cupcake";if(i[0]===1&&i[1]>=6)return"Donut";if(i[0]===2&&i[1]<2)return"Eclair";if(i[0]===2&&i[1]===2)return"Froyo";if(i[0]===2&&i[1]>2)return"Gingerbread";if(i[0]===3)return"Honeycomb";if(i[0]===4&&i[1]<1)return"Ice Cream Sandwich";if(i[0]===4&&i[1]<4)return"Jelly Bean";if(i[0]===4&&i[1]>=4)return"KitKat";if(i[0]===5)return"Lollipop";if(i[0]===6)return"Marshmallow";if(i[0]===7)return"Nougat";if(i[0]===8)return"Oreo";if(i[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,i,r=!1){const s=V.getVersionPrecision(e),n=V.getVersionPrecision(i);let a=Math.max(s,n),o=0;const c=V.map([e,i],d=>{const u=a-V.getVersionPrecision(d),p=d+new Array(u+1).join(".0");return V.map(p.split("."),g=>new Array(20-g.length).join("0")+g).reverse()});for(r&&(o=a-Math.min(s,n)),a-=1;a>=o;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===o)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}}static map(e,i){const r=[];let s;if(Array.prototype.map)return Array.prototype.map.call(e,i);for(s=0;s<e.length;s+=1)r.push(i(e[s]));return r}static find(e,i){let r,s;if(Array.prototype.find)return Array.prototype.find.call(e,i);for(r=0,s=e.length;r<s;r+=1){const n=e[r];if(i(n,r))return n}}static assign(e,...i){const r=e;let s,n;if(Object.assign)return Object.assign(e,...i);for(s=0,n=i.length;s<n;s+=1){const a=i[s];typeof a=="object"&&a!==null&&Object.keys(a).forEach(c=>{r[c]=a[c]})}return e}static getBrowserAlias(e){return D9[e]}static getBrowserTypeByAlias(e){return nA[e]||""}}const ot=/version\/(\d+(\.?_?\d+)+)/i,L9=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},i=V.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||V.getFirstMatch(ot,t);return i&&(e.version=i),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},i=V.getFirstMatch(ot,t)||V.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},i=V.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||V.getFirstMatch(ot,t);return i&&(e.version=i),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},i=V.getFirstMatch(ot,t)||V.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},i=V.getFirstMatch(ot,t)||V.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},i=V.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||V.getFirstMatch(ot,t);return i&&(e.version=i),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},i=V.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||V.getFirstMatch(ot,t);return i&&(e.version=i),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},i=V.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||V.getFirstMatch(ot,t);return i&&(e.version=i),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},i=V.getFirstMatch(ot,t)||V.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},i=V.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||V.getFirstMatch(ot,t);return i&&(e.version=i),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},i=V.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||V.getFirstMatch(ot,t);return i&&(e.version=i),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},i=V.getFirstMatch(ot,t)||V.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},i=V.getFirstMatch(ot,t)||V.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},i=V.getFirstMatch(ot,t)||V.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},i=V.getFirstMatch(ot,t)||V.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},i=V.getFirstMatch(ot,t)||V.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},i=V.getFirstMatch(ot,t)||V.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},i=V.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||V.getFirstMatch(ot,t);return i&&(e.version=i),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},i=V.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||V.getFirstMatch(ot,t);return i&&(e.version=i),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},i=V.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},i=V.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},i=V.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},i=V.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},i=V.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},i=V.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return i&&(e.version=i),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},i=V.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},i=V.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},i=V.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},i=V.getFirstMatch(ot,t)||V.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},i=V.getFirstMatch(ot,t)||V.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},i=V.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},i=V.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||V.getFirstMatch(ot,t);return i&&(e.version=i),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},i=V.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||V.getFirstMatch(ot,t);return i&&(e.version=i),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},i=V.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},i=V.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},i=V.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},i=V.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||V.getFirstMatch(ot,t);return i&&(e.version=i),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},i=V.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},i=V.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){const e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe(t){const e={name:"Android Browser"},i=V.getFirstMatch(ot,t);return i&&(e.version=i),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},i=V.getFirstMatch(ot,t);return i&&(e.version=i),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},i=V.getFirstMatch(ot,t);return i&&(e.version=i),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,i=/^(.*)\/(.*)[ \t]\((.*)/,s=t.search("\\(")!==-1?i:e;return{name:V.getFirstMatch(s,t),version:V.getSecondMatch(s,t)}}}],N9=[{test:[/Roku\/DVP/],describe(t){const e=V.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:Qi.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=V.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:Qi.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=V.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),i=V.getWindowsVersionName(e);return{name:Qi.Windows,version:e,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:Qi.iOS},i=V.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return i&&(e.version=i),e}},{test:[/macintosh/i],describe(t){const e=V.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),i=V.getMacOSVersionName(e),r={name:Qi.MacOS,version:e};return i&&(r.versionName=i),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=V.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:Qi.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe(t){const e=V.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),i=V.getAndroidVersionName(e),r={name:Qi.Android,version:e};return i&&(r.versionName=i),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=V.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),i={name:Qi.WebOS};return e&&e.length&&(i.version=e),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=V.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||V.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||V.getFirstMatch(/\bbb(\d+)/i,t);return{name:Qi.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=V.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:Qi.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=V.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:Qi.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:Qi.Linux}}},{test:[/CrOS/],describe(){return{name:Qi.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=V.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:Qi.PlayStation4,version:e}}}],U9=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=V.getFirstMatch(/(can-l01)/i,t)&&"Nova",i={type:zt.mobile,vendor:"Huawei"};return e&&(i.model=e),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:zt.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:zt.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:zt.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:zt.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:zt.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:zt.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),i=t.test(/like (ipod|iphone)/i);return e&&!i},describe(t){const e=V.getFirstMatch(/(ipod|iphone)/i,t);return{type:zt.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:zt.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:zt.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:zt.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:zt.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:zt.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:zt.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:zt.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:zt.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:zt.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:zt.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:zt.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:zt.tv}}}],j9=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:ba.Blink};const i=V.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:ba.EdgeHTML,version:i}}},{test:[/trident/i],describe(t){const e={name:ba.Trident},i=V.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:ba.Presto},i=V.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){const e=t.test(/gecko/i),i=t.test(/like gecko/i);return e&&!i},describe(t){const e={name:ba.Gecko},i=V.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:ba.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:ba.WebKit},i=V.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}}];class ET{constructor(e,i=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},i!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=V.find(L9,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=V.find(N9,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:i}=this.getOS();return e?String(i).toLowerCase()||"":i||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:i}=this.getPlatform();return e?String(i).toLowerCase()||"":i||""}parsePlatform(){this.parsedResult.platform={};const e=V.find(U9,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=V.find(j9,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return V.assign({},this.parsedResult)}satisfies(e){const i={};let r=0;const s={};let n=0;if(Object.keys(e).forEach(o=>{const c=e[o];typeof c=="string"?(s[o]=c,n+=1):typeof c=="object"&&(i[o]=c,r+=1)}),r>0){const o=Object.keys(i),c=V.find(o,u=>this.isOS(u));if(c){const u=this.satisfies(i[c]);if(u!==void 0)return u}const d=V.find(o,u=>this.isPlatform(u));if(d){const u=this.satisfies(i[d]);if(u!==void 0)return u}}if(n>0){const o=Object.keys(s),c=V.find(o,d=>this.isBrowser(d,!0));if(c!==void 0)return this.compareVersion(s[c])}}isBrowser(e,i=!1){const r=this.getBrowserName().toLowerCase();let s=e.toLowerCase();const n=V.getBrowserTypeByAlias(s);return i&&n&&(s=n.toLowerCase()),s===r}compareVersion(e){let i=[0],r=e,s=!1;const n=this.getBrowserVersion();if(typeof n=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(s=!0,r=e.substr(2)):i=[],e[0]===">"?i.push(1):i.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(s=!0,r=e.substr(1)),i.indexOf(V.compareVersions(n,r,s))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,i=!1){return this.isBrowser(e,i)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(i=>this.is(i))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class K_{static getParser(e,i=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new ET(e,i)}static parse(e){return new ET(e).getResult()}static get BROWSER_MAP(){return nA}static get ENGINE_MAP(){return ba}static get OS_MAP(){return Qi}static get PLATFORMS_MAP(){return zt}}var aA={},oA={exports:{}},kT=oA.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=t.raddr!=null?" raddr %s rport %d":"%v%v",e+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(e+=" generation %d"),e+=t["network-id"]!=null?" network-id %d":"%v",e+=t["network-cost"]!=null?" network-cost %d":"%v",e}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return t.attribute!=null&&(e+=" %s",t.value!=null&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=t.id!=null?"id=%s %s":"%v%s",e+=t.mediaClockValue!=null?"=%s":"",e+=t.rateNumerator!=null?" rate=%s":"",e+=t.rateDenominator!=null?"/%s":"",e}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(kT).forEach(function(t){var e=kT[t];e.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})});var cA=oA.exports;(function(t){var e=function(o){return String(Number(o))===o?Number(o):o},i=function(o,c,d,u){if(u&&!d)c[u]=e(o[1]);else for(var p=0;p<d.length;p+=1)o[p+1]!=null&&(c[d[p]]=e(o[p+1]))},r=function(o,c,d){var u=o.name&&o.names;o.push&&!c[o.push]?c[o.push]=[]:u&&!c[o.name]&&(c[o.name]={});var p=o.push?{}:u?c[o.name]:c;i(d.match(o.reg),p,o.names,o.name),o.push&&c[o.push].push(p)},s=cA,n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(o){var c={},d=[],u=c;return o.split(/(\r\n|\r|\n)/).filter(n).forEach(function(p){var g=p[0],m=p.slice(2);g==="m"&&(d.push({rtp:[],fmtp:[]}),u=d[d.length-1]);for(var f=0;f<(s[g]||[]).length;f+=1){var b=s[g][f];if(b.reg.test(m))return r(b,u,m)}}),c.media=d,c};var a=function(o,c){var d=c.split(/=(.+)/,2);return d.length===2?o[d[0]]=e(d[1]):d.length===1&&c.length>1&&(o[d[0]]=void 0),o};t.parseParams=function(o){return o.split(/;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(o){return o.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(o){for(var c=[],d=o.split(" ").map(e),u=0;u<d.length;u+=3)c.push({component:d[u],ip:d[u+1],port:d[u+2]});return c},t.parseImageAttributes=function(o){return o.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(a,{})})},t.parseSimulcastStreamList=function(o){return o.split(";").map(function(c){return c.split(",").map(function(d){var u,p=!1;return d[0]!=="~"?u=e(d):(u=e(d.substring(1,d.length)),p=!0),{scid:u,paused:p}})})}})(aA);var m0=cA,$9=/%[sdv%]/g,z9=function(t){var e=1,i=arguments,r=i.length;return t.replace($9,function(s){if(e>=r)return s;var n=i[e];switch(e+=1,s){case"%%":return"%";case"%s":return String(n);case"%d":return Number(n);case"%v":return""}})},lu=function(t,e,i){var r=e.format instanceof Function?e.format(e.push?i:i[e.name]):e.format,s=[t+"="+r];if(e.names)for(var n=0;n<e.names.length;n+=1){var a=e.names[n];e.name?s.push(i[e.name][a]):s.push(i[e.names[n]])}else s.push(i[e.name]);return z9.apply(null,s)},F9=["v","o","s","i","u","e","p","c","b","t","r","z","a"],V9=["i","c","b","a"],B9=function(t,e){e=e||{},t.version==null&&(t.version=0),t.name==null&&(t.name=" "),t.media.forEach(function(n){n.payloads==null&&(n.payloads="")});var i=e.outerOrder||F9,r=e.innerOrder||V9,s=[];return i.forEach(function(n){m0[n].forEach(function(a){a.name in t&&t[a.name]!=null?s.push(lu(n,a,t)):a.push in t&&t[a.push]!=null&&t[a.push].forEach(function(o){s.push(lu(n,a,o))})})}),t.media.forEach(function(n){s.push(lu("m",m0.m[0],n)),r.forEach(function(a){m0[a].forEach(function(o){o.name in n&&n[o.name]!=null?s.push(lu(a,o,n)):o.push in n&&n[o.push]!=null&&n[o.push].forEach(function(c){s.push(lu(a,o,c))})})})}),s.join(`\r
`)+`\r
`},jc=aA,H9=B9,Os=H9,xe=jc.parse,dA=jc.parseParams;jc.parseFmtpConfig;jc.parsePayloads;jc.parseRemoteCandidates;jc.parseImageAttributes;var lA=jc.parseSimulcastStreamList,G9=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},lc="1.4.1",TT=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function W9(t){var e=new Set([t]),i=new Set,r=t.match(TT);if(!r)return function(){return!1};var s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(s.prerelease!=null)return function(c){return c===t};function n(o){return i.add(o),!1}function a(o){return e.add(o),!0}return function(c){if(e.has(c))return!0;if(i.has(c))return!1;var d=c.match(TT);if(!d)return n(c);var u={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};return u.prerelease!=null||s.major!==u.major?n(c):s.major===0?s.minor===u.minor&&s.patch<=u.patch?a(c):n(c):s.minor<=u.minor?a(c):n(c)}}var q9=W9(lc),J9=lc.split(".")[0],qp=Symbol.for("opentelemetry.js.api."+J9),Jp=G9;function _h(t,e,i,r){var s;r===void 0&&(r=!1);var n=Jp[qp]=(s=Jp[qp])!==null&&s!==void 0?s:{version:lc};if(!r&&n[t]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return i.error(a.stack||a.message),!1}if(n.version!==lc){var a=new Error("@opentelemetry/api: Registration of version v"+n.version+" for "+t+" does not match previously registered API v"+lc);return i.error(a.stack||a.message),!1}return n[t]=e,i.debug("@opentelemetry/api: Registered a global for "+t+" v"+lc+"."),!0}function Pc(t){var e,i,r=(e=Jp[qp])===null||e===void 0?void 0:e.version;if(!(!r||!q9(r)))return(i=Jp[qp])===null||i===void 0?void 0:i[t]}function Sh(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+lc+".");var i=Jp[qp];i&&delete i[t]}var K9=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n},Y9=globalThis&&globalThis.__spreadArray||function(t,e,i){if(i||arguments.length===2)for(var r=0,s=e.length,n;r<s;r++)(n||!(r in e))&&(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},Q9=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return uu("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return uu("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return uu("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return uu("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return uu("verbose",this._namespace,e)},t}();function uu(t,e,i){var r=Pc("diag");if(r)return i.unshift(e),r[t].apply(r,Y9([],K9(i),!1))}var tt;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(tt||(tt={}));function Z9(t,e){t<tt.NONE?t=tt.NONE:t>tt.ALL&&(t=tt.ALL),e=e||{};function i(r,s){var n=e[r];return typeof n=="function"&&t>=s?n.bind(e):function(){}}return{error:i("error",tt.ERROR),warn:i("warn",tt.WARN),info:i("info",tt.INFO),debug:i("debug",tt.DEBUG),verbose:i("verbose",tt.VERBOSE)}}var X9=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n},eU=globalThis&&globalThis.__spreadArray||function(t,e,i){if(i||arguments.length===2)for(var r=0,s=e.length,n;r<s;r++)(n||!(r in e))&&(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},tU="diag",dn=function(){function t(){function e(s){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var o=Pc("diag");if(o)return o[s].apply(o,eU([],X9(n),!1))}}var i=this,r=function(s,n){var a,o,c;if(n===void 0&&(n={logLevel:tt.INFO}),s===i){var d=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return i.error((a=d.stack)!==null&&a!==void 0?a:d.message),!1}typeof n=="number"&&(n={logLevel:n});var u=Pc("diag"),p=Z9((o=n.logLevel)!==null&&o!==void 0?o:tt.INFO,s);if(u&&!n.suppressOverrideMessage){var g=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+g),p.warn("Current logger will overwrite one already registered from "+g)}return _h("diag",p,i,!0)};i.setLogger=r,i.disable=function(){Sh(tU,i)},i.createComponentLogger=function(s){return new Q9(s)},i.verbose=e("verbose"),i.debug=e("debug"),i.info=e("info"),i.warn=e("warn"),i.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}(),iU=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n},rU=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sU=function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var i=this._entries.get(e);if(i)return Object.assign({},i)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var i=iU(e,2),r=i[0],s=i[1];return[r,s]})},t.prototype.setEntry=function(e,i){var r=new t(this._entries);return r._entries.set(e,i),r},t.prototype.removeEntry=function(e){var i=new t(this._entries);return i._entries.delete(e),i},t.prototype.removeEntries=function(){for(var e,i,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var n=new t(this._entries);try{for(var a=rU(r),o=a.next();!o.done;o=a.next()){var c=o.value;n._entries.delete(c)}}catch(d){e={error:d}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}return n},t.prototype.clear=function(){return new t},t}(),nU=Symbol("BaggageEntryMetadata"),aU=dn.instance();function oU(t){return t===void 0&&(t={}),new sU(new Map(Object.entries(t)))}function uA(t){return typeof t!="string"&&(aU.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:nU,toString:function(){return t}}}function Y_(t){return Symbol.for(t)}var cU=function(){function t(e){var i=this;i._currentContext=e?new Map(e):new Map,i.getValue=function(r){return i._currentContext.get(r)},i.setValue=function(r,s){var n=new t(i._currentContext);return n._currentContext.set(r,s),n},i.deleteValue=function(r){var s=new t(i._currentContext);return s._currentContext.delete(r),s}}return t}(),Wr=new cU,$l=globalThis&&globalThis.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])},t(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(e,i);function r(){this.constructor=e}e.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),dU=function(){function t(){}return t.prototype.createHistogram=function(e,i){return yU},t.prototype.createCounter=function(e,i){return vU},t.prototype.createUpDownCounter=function(e,i){return bU},t.prototype.createObservableGauge=function(e,i){return _U},t.prototype.createObservableCounter=function(e,i){return wU},t.prototype.createObservableUpDownCounter=function(e,i){return SU},t.prototype.addBatchObservableCallback=function(e,i){},t.prototype.removeBatchObservableCallback=function(e){},t}(),Q_=function(){function t(){}return t}(),lU=function(t){$l(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(i,r){},e}(Q_),uU=function(t){$l(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(i,r){},e}(Q_),pU=function(t){$l(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(i,r){},e}(Q_),Z_=function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t}(),hU=function(t){$l(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Z_),gU=function(t){$l(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Z_),mU=function(t){$l(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Z_),fU=new dU,vU=new lU,yU=new pU,bU=new uU,wU=new hU,_U=new gU,SU=new mU,EU={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},kU={set:function(t,e,i){t!=null&&(t[e]=i)}},TU=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n},xU=globalThis&&globalThis.__spreadArray||function(t,e,i){if(i||arguments.length===2)for(var r=0,s=e.length,n;r<s;r++)(n||!(r in e))&&(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},PU=function(){function t(){}return t.prototype.active=function(){return Wr},t.prototype.with=function(e,i,r){for(var s=[],n=3;n<arguments.length;n++)s[n-3]=arguments[n];return i.call.apply(i,xU([r],TU(s),!1))},t.prototype.bind=function(e,i){return i},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),CU=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n},RU=globalThis&&globalThis.__spreadArray||function(t,e,i){if(i||arguments.length===2)for(var r=0,s=e.length,n;r<s;r++)(n||!(r in e))&&(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},f0="context",AU=new PU,Ov=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return _h(f0,e,dn.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,i,r){for(var s,n=[],a=3;a<arguments.length;a++)n[a-3]=arguments[a];return(s=this._getContextManager()).with.apply(s,RU([e,i,r],CU(n),!1))},t.prototype.bind=function(e,i){return this._getContextManager().bind(e,i)},t.prototype._getContextManager=function(){return Pc(f0)||AU},t.prototype.disable=function(){this._getContextManager().disable(),Sh(f0,dn.instance())},t}(),Yn;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(Yn||(Yn={}));var pA="0000000000000000",hA="00000000000000000000000000000000",gA={traceId:hA,spanId:pA,traceFlags:Yn.NONE},gp=function(){function t(e){e===void 0&&(e=gA),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,i){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,i){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,i){},t}(),X_=Y_("OpenTelemetry Context Key SPAN");function eS(t){return t.getValue(X_)||void 0}function IU(){return eS(Ov.getInstance().active())}function tS(t,e){return t.setValue(X_,e)}function OU(t){return t.deleteValue(X_)}function MU(t,e){return tS(t,new gp(e))}function mA(t){var e;return(e=eS(t))===null||e===void 0?void 0:e.spanContext()}var DU=/^([0-9a-f]{32})$/i,LU=/^[0-9a-f]{16}$/i;function fA(t){return DU.test(t)&&t!==hA}function NU(t){return LU.test(t)&&t!==pA}function Mv(t){return fA(t.traceId)&&NU(t.spanId)}function UU(t){return new gp(t)}var v0=Ov.getInstance(),vA=function(){function t(){}return t.prototype.startSpan=function(e,i,r){r===void 0&&(r=v0.active());var s=!!(i!=null&&i.root);if(s)return new gp;var n=r&&mA(r);return jU(n)&&Mv(n)?new gp(n):new gp},t.prototype.startActiveSpan=function(e,i,r,s){var n,a,o;if(!(arguments.length<2)){arguments.length===2?o=i:arguments.length===3?(n=i,o=r):(n=i,a=r,o=s);var c=a??v0.active(),d=this.startSpan(e,n,c),u=tS(c,d);return v0.with(u,o,void 0,d)}},t}();function jU(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var $U=new vA,zU=function(){function t(e,i,r,s){this._provider=e,this.name=i,this.version=r,this.options=s}return t.prototype.startSpan=function(e,i,r){return this._getTracer().startSpan(e,i,r)},t.prototype.startActiveSpan=function(e,i,r,s){var n=this._getTracer();return Reflect.apply(n.startActiveSpan,n,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):$U},t}(),FU=function(){function t(){}return t.prototype.getTracer=function(e,i,r){return new vA},t}(),VU=new FU,xT=function(){function t(){}return t.prototype.getTracer=function(e,i,r){var s;return(s=this.getDelegateTracer(e,i,r))!==null&&s!==void 0?s:new zU(this,e,i,r)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:VU},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,i,r){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(e,i,r)},t}(),ff;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(ff||(ff={}));var f1;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(f1||(f1={}));var v1;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(v1||(v1={}));var vc=Ov.getInstance(),Ie=dn.instance(),BU=function(){function t(){}return t.prototype.getMeter=function(e,i,r){return fU},t}(),HU=new BU,y0="metrics",GU=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return _h(y0,e,dn.instance())},t.prototype.getMeterProvider=function(){return Pc(y0)||HU},t.prototype.getMeter=function(e,i,r){return this.getMeterProvider().getMeter(e,i,r)},t.prototype.disable=function(){Sh(y0,dn.instance())},t}(),WU=GU.getInstance(),qU=function(){function t(){}return t.prototype.inject=function(e,i){},t.prototype.extract=function(e,i){return e},t.prototype.fields=function(){return[]},t}(),iS=Y_("OpenTelemetry Baggage Key");function yA(t){return t.getValue(iS)||void 0}function JU(){return yA(Ov.getInstance().active())}function KU(t,e){return t.setValue(iS,e)}function YU(t){return t.deleteValue(iS)}var b0="propagation",QU=new qU,ZU=function(){function t(){this.createBaggage=oU,this.getBaggage=yA,this.getActiveBaggage=JU,this.setBaggage=KU,this.deleteBaggage=YU}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return _h(b0,e,dn.instance())},t.prototype.inject=function(e,i,r){return r===void 0&&(r=kU),this._getGlobalPropagator().inject(e,i,r)},t.prototype.extract=function(e,i,r){return r===void 0&&(r=EU),this._getGlobalPropagator().extract(e,i,r)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){Sh(b0,dn.instance())},t.prototype._getGlobalPropagator=function(){return Pc(b0)||QU},t}(),sl=ZU.getInstance(),w0="trace",XU=function(){function t(){this._proxyTracerProvider=new xT,this.wrapSpanContext=UU,this.isSpanContextValid=Mv,this.deleteSpan=OU,this.getSpan=eS,this.getActiveSpan=IU,this.getSpanContext=mA,this.setSpan=tS,this.setSpanContext=MU}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var i=_h(w0,this._proxyTracerProvider,dn.instance());return i&&this._proxyTracerProvider.setDelegate(e),i},t.prototype.getTracerProvider=function(){return Pc(w0)||this._proxyTracerProvider},t.prototype.getTracer=function(e,i){return this.getTracerProvider().getTracer(e,i)},t.prototype.disable=function(){Sh(w0,dn.instance()),this._proxyTracerProvider=new xT},t}(),_s=XU.getInstance();const lg={context:vc,diag:Ie,metrics:WU,propagation:sl,trace:_s};var bA=Y_("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function ej(t){return t.setValue(bA,!0)}function rS(t){return t.getValue(bA)===!0}var tj="=",y1=";",b1=",",_0="baggage",ij=180,rj=4096,sj=8192,nj=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n};function aj(t){return t.reduce(function(e,i){var r=""+e+(e!==""?b1:"")+i;return r.length>sj?e:r},"")}function oj(t){return t.getAllEntries().map(function(e){var i=nj(e,2),r=i[0],s=i[1],n=encodeURIComponent(r)+"="+encodeURIComponent(s.value);return s.metadata!==void 0&&(n+=y1+s.metadata.toString()),n})}function cj(t){var e=t.split(y1);if(!(e.length<=0)){var i=e.shift();if(i){var r=i.split(tj);if(r.length===2){var s=decodeURIComponent(r[0].trim()),n=decodeURIComponent(r[1].trim()),a;return e.length>0&&(a=uA(e.join(y1))),{key:s,value:n,metadata:a}}}}}var dj=function(){function t(){}return t.prototype.inject=function(e,i,r){var s=sl.getBaggage(e);if(!(!s||rS(e))){var n=oj(s).filter(function(o){return o.length<=rj}).slice(0,ij),a=aj(n);a.length>0&&r.set(i,_0,a)}},t.prototype.extract=function(e,i,r){var s=r.get(i,_0),n=Array.isArray(s)?s.join(b1):s;if(!n)return e;var a={};if(n.length===0)return e;var o=n.split(b1);return o.forEach(function(c){var d=cj(c);if(d){var u={value:d.value};d.metadata&&(u.metadata=d.metadata),a[d.key]=u}}),Object.entries(a).length===0?e:sl.setBaggage(e,sl.createBaggage(a))},t.prototype.fields=function(){return[_0]},t}(),wA=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lj=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n};function tm(t){var e,i,r={};if(typeof t!="object"||t==null)return r;try{for(var s=wA(Object.entries(t)),n=s.next();!n.done;n=s.next()){var a=lj(n.value,2),o=a[0],c=a[1];if(!uj(o)){Ie.warn("Invalid attribute key: "+o);continue}if(!_A(c)){Ie.warn("Invalid attribute value set for key: "+o);continue}Array.isArray(c)?r[o]=c.slice():r[o]=c}}catch(d){e={error:d}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return r}function uj(t){return typeof t=="string"&&t.length>0}function _A(t){return t==null?!0:Array.isArray(t)?pj(t):SA(t)}function pj(t){var e,i,r;try{for(var s=wA(t),n=s.next();!n.done;n=s.next()){var a=n.value;if(a!=null){if(!r){if(SA(a)){r=typeof a;continue}return!1}if(typeof a!==r)return!1}}}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return!0}function SA(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}function hj(){return function(t){Ie.error(gj(t))}}function gj(t){return typeof t=="string"?t:JSON.stringify(mj(t))}function mj(t){for(var e={},i=t;i!==null;)Object.getOwnPropertyNames(i).forEach(function(r){if(!e[r]){var s=i[r];s&&(e[r]=String(s))}}),i=Object.getPrototypeOf(i);return e}var fj=hj();function vf(t){try{fj(t)}catch{}}var Xs;(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(Xs||(Xs={}));var EA=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},vj=",",yj=["OTEL_SDK_DISABLED"];function bj(t){return yj.indexOf(t)>-1}var wj=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function _j(t){return wj.indexOf(t)>-1}var Sj=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function Ej(t){return Sj.indexOf(t)>-1}var w1=1/0,_1=128,kj=128,Tj=128,kA={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:tt.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:w1,OTEL_ATTRIBUTE_COUNT_LIMIT:_1,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:w1,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:_1,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:kj,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:Tj,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:Xs.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function xj(t,e,i){if(!(typeof i[t]>"u")){var r=String(i[t]);e[t]=r.toLowerCase()==="true"}}function Pj(t,e,i,r,s){if(r===void 0&&(r=-1/0),s===void 0&&(s=1/0),typeof i[t]<"u"){var n=Number(i[t]);isNaN(n)||(n<r?e[t]=r:n>s?e[t]=s:e[t]=n)}}function Cj(t,e,i,r){r===void 0&&(r=vj);var s=i[t];typeof s=="string"&&(e[t]=s.split(r).map(function(n){return n.trim()}))}var Rj={ALL:tt.ALL,VERBOSE:tt.VERBOSE,DEBUG:tt.DEBUG,INFO:tt.INFO,WARN:tt.WARN,ERROR:tt.ERROR,NONE:tt.NONE};function Aj(t,e,i){var r=i[t];if(typeof r=="string"){var s=Rj[r.toUpperCase()];s!=null&&(e[t]=s)}}function S1(t){var e={};for(var i in kA){var r=i;switch(r){case"OTEL_LOG_LEVEL":Aj(r,e,t);break;default:if(bj(r))xj(r,e,t);else if(_j(r))Pj(r,e,t);else if(Ej(r))Cj(r,e,t);else{var s=t[r];typeof s<"u"&&s!==null&&(e[r]=String(s))}}}return e}function Ij(){return typeof process<"u"&&process&&process.env?S1(process.env):S1(EA)}function Rr(){var t=S1(EA);return Object.assign({},kA,t)}var nl=performance,Oj="1.10.0",So={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},vs={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},Mj={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"},Zc,S0=(Zc={},Zc[vs.TELEMETRY_SDK_NAME]="opentelemetry",Zc[vs.PROCESS_RUNTIME_NAME]="browser",Zc[vs.TELEMETRY_SDK_LANGUAGE]=Mj.WEBJS,Zc[vs.TELEMETRY_SDK_VERSION]=Oj,Zc),Dj=9,Lj=6,Nj=Math.pow(10,Lj),E1=Math.pow(10,Dj);function Kd(t){var e=t/1e3,i=Math.trunc(e),r=Math.round(t%1e3*Nj);return[i,r]}function TA(){var t=nl.timeOrigin;if(typeof t!="number"){var e=nl;t=e.timing&&e.timing.fetchStart}return t}function Uj(t){var e=Kd(TA()),i=Kd(typeof t=="number"?t:nl.now());return PA(e,i)}function jj(t,e){var i=e[0]-t[0],r=e[1]-t[1];return r<0&&(i-=1,r+=E1),[i,r]}function xA(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function PT(t){return xA(t)||typeof t=="number"||t instanceof Date}function PA(t,e){var i=[t[0]+e[0],t[1]+e[1]];return i[1]>=E1&&(i[1]-=E1,i[0]+=1),i}var k1;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(k1||(k1={}));var $j=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zj=function(){function t(e){e===void 0&&(e={});var i;this._propagators=(i=e.propagators)!==null&&i!==void 0?i:[],this._fields=Array.from(new Set(this._propagators.map(function(r){return typeof r.fields=="function"?r.fields():[]}).reduce(function(r,s){return r.concat(s)},[])))}return t.prototype.inject=function(e,i,r){var s,n;try{for(var a=$j(this._propagators),o=a.next();!o.done;o=a.next()){var c=o.value;try{c.inject(e,i,r)}catch(d){Ie.warn("Failed to inject with "+c.constructor.name+". Err: "+d.message)}}}catch(d){s={error:d}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(s)throw s.error}}},t.prototype.extract=function(e,i,r){return this._propagators.reduce(function(s,n){try{return n.extract(s,i,r)}catch(a){Ie.warn("Failed to inject with "+n.constructor.name+". Err: "+a.message)}return s},e)},t.prototype.fields=function(){return this._fields.slice()},t}(),T1="[_0-9a-z-*/]",Fj="[a-z]"+T1+"{0,255}",Vj="[a-z0-9]"+T1+"{0,240}@[a-z]"+T1+"{0,13}",Bj=new RegExp("^(?:"+Fj+"|"+Vj+")$"),Hj=/^[ -~]{0,255}[!-~]$/,Gj=/,|=/;function Wj(t){return Bj.test(t)}function qj(t){return Hj.test(t)&&!Gj.test(t)}var CT=32,Jj=512,RT=",",AT="=",Kj=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,i){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,i),r},t.prototype.unset=function(e){var i=this._clone();return i._internalState.delete(e),i},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(i,r){return i.push(r+AT+e.get(r)),i},[]).join(RT)},t.prototype._parse=function(e){e.length>Jj||(this._internalState=e.split(RT).reverse().reduce(function(i,r){var s=r.trim(),n=s.indexOf(AT);if(n!==-1){var a=s.slice(0,n),o=s.slice(n+1,r.length);Wj(a)&&qj(o)&&i.set(a,o)}return i},new Map),this._internalState.size>CT&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,CT))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}(),E0="traceparent",k0="tracestate",Yj="00",Qj="(?!ff)[\\da-f]{2}",Zj="(?![0]{32})[\\da-f]{32}",Xj="(?![0]{16})[\\da-f]{16}",e$="[\\da-f]{2}",t$=new RegExp("^\\s?("+Qj+")-("+Zj+")-("+Xj+")-("+e$+")(-.*)?\\s?$");function i$(t){var e=t$.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var r$=function(){function t(){}return t.prototype.inject=function(e,i,r){var s=_s.getSpanContext(e);if(!(!s||rS(e)||!Mv(s))){var n=Yj+"-"+s.traceId+"-"+s.spanId+"-0"+Number(s.traceFlags||Yn.NONE).toString(16);r.set(i,E0,n),s.traceState&&r.set(i,k0,s.traceState.serialize())}},t.prototype.extract=function(e,i,r){var s=r.get(i,E0);if(!s)return e;var n=Array.isArray(s)?s[0]:s;if(typeof n!="string")return e;var a=i$(n);if(!a)return e;a.isRemote=!0;var o=r.get(i,k0);if(o){var c=Array.isArray(o)?o.join(","):o;a.traceState=new Kj(typeof c=="string"?c:void 0)}return _s.setSpanContext(e,a)},t.prototype.fields=function(){return[E0,k0]},t}(),s$="[object Object]",n$="[object Null]",a$="[object Undefined]",o$=Function.prototype,CA=o$.toString,c$=CA.call(Object),d$=l$(Object.getPrototypeOf,Object),RA=Object.prototype,AA=RA.hasOwnProperty,ec=Symbol?Symbol.toStringTag:void 0,IA=RA.toString;function l$(t,e){return function(i){return t(e(i))}}function IT(t){if(!u$(t)||p$(t)!==s$)return!1;var e=d$(t);if(e===null)return!0;var i=AA.call(e,"constructor")&&e.constructor;return typeof i=="function"&&i instanceof i&&CA.call(i)===c$}function u$(t){return t!=null&&typeof t=="object"}function p$(t){return t==null?t===void 0?a$:n$:ec&&ec in Object(t)?h$(t):g$(t)}function h$(t){var e=AA.call(t,ec),i=t[ec],r=!1;try{t[ec]=void 0,r=!0}catch{}var s=IA.call(t);return r&&(e?t[ec]=i:delete t[ec]),s}function g$(t){return IA.call(t)}var m$=20;function f$(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.shift(),r=new WeakMap;t.length>0;)i=OA(i,t.shift(),0,r);return i}function T0(t){return yf(t)?t.slice():t}function OA(t,e,i,r){i===void 0&&(i=0);var s;if(!(i>m$)){if(i++,im(t)||im(e)||MA(e))s=T0(e);else if(yf(t)){if(s=t.slice(),yf(e))for(var n=0,a=e.length;n<a;n++)s.push(T0(e[n]));else if(pu(e))for(var o=Object.keys(e),n=0,a=o.length;n<a;n++){var c=o[n];s[c]=T0(e[c])}}else if(pu(t))if(pu(e)){if(!v$(t,e))return e;s=Object.assign({},t);for(var o=Object.keys(e),n=0,a=o.length;n<a;n++){var c=o[n],d=e[c];if(im(d))typeof d>"u"?delete s[c]:s[c]=d;else{var u=s[c],p=d;if(OT(t,c,r)||OT(e,c,r))delete s[c];else{if(pu(u)&&pu(p)){var g=r.get(u)||[],m=r.get(p)||[];g.push({obj:t,key:c}),m.push({obj:e,key:c}),r.set(u,g),r.set(p,m)}s[c]=OA(s[c],d,i,r)}}}}else s=e;return s}}function OT(t,e,i){for(var r=i.get(t[e])||[],s=0,n=r.length;s<n;s++){var a=r[s];if(a.key===e&&a.obj===t)return!0}return!1}function yf(t){return Array.isArray(t)}function MA(t){return typeof t=="function"}function pu(t){return!im(t)&&!yf(t)&&!MA(t)&&typeof t=="object"}function im(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function v$(t,e){return!(!IT(t)||!IT(e))}var y$=function(){function t(){var e=this;this._promise=new Promise(function(i,r){e._resolve=i,e._reject=r})}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(e){this._resolve(e)},t.prototype.reject=function(e){this._reject(e)},t}(),b$=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n},w$=globalThis&&globalThis.__spreadArray||function(t,e,i){if(i||arguments.length===2)for(var r=0,s=e.length,n;r<s;r++)(n||!(r in e))&&(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},_$=function(){function t(e,i){this._callback=e,this._that=i,this._isCalled=!1,this._deferred=new y$}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var e,i=this,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,w$([this._that],b$(r),!1))).then(function(n){return i._deferred.resolve(n)},function(n){return i._deferred.reject(n)})}catch(n){this._deferred.reject(n)}}return this._deferred.promise},t}(),S$="exception",E$=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k$=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n},T$=function(){function t(e,i,r,s,n,a,o,c,d){o===void 0&&(o=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:v1.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=r,this._spanContext=s,this.parentSpanId=a,this.kind=n,this.links=o;var u=Date.now();this._performanceStartTime=nl.now(),this._performanceOffset=u-(this._performanceStartTime+TA()),this._startTimeProvided=c!=null,this.startTime=this._getTime(c??u),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,i),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,i){return i==null||this._isSpanEnded()?this:e.length===0?(Ie.warn("Invalid attribute key: "+e),this):_A(i)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(i),this):(Ie.warn("Invalid attribute value set for key: "+e),this)},t.prototype.setAttributes=function(e){var i,r;try{for(var s=E$(Object.entries(e)),n=s.next();!n.done;n=s.next()){var a=k$(n.value,2),o=a[0],c=a[1];this.setAttribute(o,c)}}catch(d){i={error:d}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return this},t.prototype.addEvent=function(e,i,r){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return Ie.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(Ie.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),PT(i)&&(PT(r)||(r=i),i=void 0);var s=tm(i);return this.events.push({name:e,attributes:s,time:this._getTime(r),droppedAttributesCount:0}),this},t.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=e,this)},t.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},t.prototype.end=function(e){if(this._isSpanEnded()){Ie.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=jj(this.startTime,this.endTime),this._duration[0]<0&&(Ie.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},t.prototype._getTime=function(e){if(typeof e=="number"&&e<nl.now())return Uj(e+this._performanceOffset);if(typeof e=="number")return Kd(e);if(e instanceof Date)return Kd(e.getTime());if(xA(e))return e;if(this._startTimeProvided)return Kd(Date.now());var i=nl.now()-this._performanceStartTime;return PA(this.startTime,Kd(i))},t.prototype.isRecording=function(){return this._ended===!1},t.prototype.recordException=function(e,i){var r={};typeof e=="string"?r[So.EXCEPTION_MESSAGE]=e:e&&(e.code?r[So.EXCEPTION_TYPE]=e.code.toString():e.name&&(r[So.EXCEPTION_TYPE]=e.name),e.message&&(r[So.EXCEPTION_MESSAGE]=e.message),e.stack&&(r[So.EXCEPTION_STACKTRACE]=e.stack)),r[So.EXCEPTION_TYPE]||r[So.EXCEPTION_MESSAGE]?this.addEvent(S$,r,i):Ie.warn("Failed to record an exception "+e)},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),t.prototype._isSpanEnded=function(){return this._ended&&Ie.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},t.prototype._truncateToLimitUtil=function(e,i){return e.length<=i?e:e.substr(0,i)},t.prototype._truncateToSize=function(e){var i=this,r=this._attributeValueLengthLimit;return r<=0?(Ie.warn("Attribute value limit must be positive, got "+r),e):typeof e=="string"?this._truncateToLimitUtil(e,r):Array.isArray(e)?e.map(function(s){return typeof s=="string"?i._truncateToLimitUtil(s,r):s}):e},t}(),Tl;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Tl||(Tl={}));var bf=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Tl.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}(),al=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Tl.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}(),x0=function(){function t(e){var i,r,s,n;this._root=e.root,this._root||(vf(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new al),this._remoteParentSampled=(i=e.remoteParentSampled)!==null&&i!==void 0?i:new al,this._remoteParentNotSampled=(r=e.remoteParentNotSampled)!==null&&r!==void 0?r:new bf,this._localParentSampled=(s=e.localParentSampled)!==null&&s!==void 0?s:new al,this._localParentNotSampled=(n=e.localParentNotSampled)!==null&&n!==void 0?n:new bf}return t.prototype.shouldSample=function(e,i,r,s,n,a){var o=_s.getSpanContext(e);return!o||!Mv(o)?this._root.shouldSample(e,i,r,s,n,a):o.isRemote?o.traceFlags&Yn.SAMPLED?this._remoteParentSampled.shouldSample(e,i,r,s,n,a):this._remoteParentNotSampled.shouldSample(e,i,r,s,n,a):o.traceFlags&Yn.SAMPLED?this._localParentSampled.shouldSample(e,i,r,s,n,a):this._localParentNotSampled.shouldSample(e,i,r,s,n,a)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}(),MT=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,i){return{decision:fA(i)&&this._accumulate(i)<this._upperBound?Tl.RECORD_AND_SAMPLED:Tl.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var i=0,r=0;r<e.length/8;r++){var s=r*8,n=parseInt(e.slice(s,s+8),16);i=(i^n)>>>0}return i},t}(),x$=Rr(),P$=Xs.AlwaysOn,Xc=1;function DA(){return{sampler:LA(x$),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:Rr().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:Rr().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:Rr().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:Rr().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:Rr().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:Rr().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:Rr().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:Rr().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function LA(t){switch(t===void 0&&(t=Rr()),t.OTEL_TRACES_SAMPLER){case Xs.AlwaysOn:return new al;case Xs.AlwaysOff:return new bf;case Xs.ParentBasedAlwaysOn:return new x0({root:new al});case Xs.ParentBasedAlwaysOff:return new x0({root:new bf});case Xs.TraceIdRatio:return new MT(DT(t));case Xs.ParentBasedTraceIdRatio:return new x0({root:new MT(DT(t))});default:return Ie.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+P$+'".'),new al}}function DT(t){if(t.OTEL_TRACES_SAMPLER_ARG===void 0||t.OTEL_TRACES_SAMPLER_ARG==="")return Ie.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+Xc+"."),Xc;var e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(Ie.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+Xc+"."),Xc):e<0||e>1?(Ie.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+Xc+"."),Xc):e}function C$(t){var e={sampler:LA()},i=DA(),r=Object.assign({},i,e,t);return r.generalLimits=Object.assign({},i.generalLimits,t.generalLimits||{}),r.spanLimits=Object.assign({},i.spanLimits,t.spanLimits||{}),r}function R$(t){var e,i,r,s,n,a,o,c,d,u,p,g,m=Object.assign({},t.spanLimits),f=Ij();return m.attributeCountLimit=(a=(n=(s=(i=(e=t.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&i!==void 0?i:(r=t.generalLimits)===null||r===void 0?void 0:r.attributeCountLimit)!==null&&s!==void 0?s:f.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&n!==void 0?n:f.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&a!==void 0?a:_1,m.attributeValueLengthLimit=(g=(p=(u=(c=(o=t.spanLimits)===null||o===void 0?void 0:o.attributeValueLengthLimit)!==null&&c!==void 0?c:(d=t.generalLimits)===null||d===void 0?void 0:d.attributeValueLengthLimit)!==null&&u!==void 0?u:f.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&p!==void 0?p:f.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&g!==void 0?g:w1,Object.assign({},t,{spanLimits:m})}var A$=function(){function t(e,i){this._exporter=e,this._finishedSpans=[],this._droppedSpansCount=0;var r=Rr();this._maxExportBatchSize=typeof(i==null?void 0:i.maxExportBatchSize)=="number"?i.maxExportBatchSize:r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(i==null?void 0:i.maxQueueSize)=="number"?i.maxQueueSize:r.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(i==null?void 0:i.scheduledDelayMillis)=="number"?i.scheduledDelayMillis:r.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(i==null?void 0:i.exportTimeoutMillis)=="number"?i.exportTimeoutMillis:r.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new _$(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Ie.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},t.prototype.onStart=function(e,i){},t.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&Yn.SAMPLED&&this._addToBuffer(e)},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},t.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&Ie.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(Ie.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},t.prototype._flushAll=function(){var e=this;return new Promise(function(i,r){for(var s=[],n=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),a=0,o=n;a<o;a++)s.push(e._flushOneBatch());Promise.all(s).then(function(){i()}).catch(r)})},t.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(i,r){var s=setTimeout(function(){r(new Error("Timeout"))},e._exportTimeoutMillis);vc.with(ej(vc.active()),function(){var n=e._finishedSpans.splice(0,e._maxExportBatchSize),a=function(){return e._exporter.export(n,function(c){var d;clearTimeout(s),c.code===k1.SUCCESS?i():r((d=c.error)!==null&&d!==void 0?d:new Error("BatchSpanProcessor: span export failed"))})},o=n.map(function(c){return c.resource}).filter(function(c){return c.asyncAttributesPending});o.length===0?a():Promise.all(o.map(function(c){var d;return(d=c.waitForAsyncAttributes)===null||d===void 0?void 0:d.call(c)})).then(a,function(c){vf(c),r(c)})})})},t.prototype._maybeStartTimer=function(){var e=this;this._timer===void 0&&(this._timer=setTimeout(function(){e._flushOneBatch().then(function(){e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(i){vf(i)})},this._scheduledDelayMillis),this._timer,void 0)},t.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},t}(),I$=globalThis&&globalThis.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])},t(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(e,i);function r(){this.constructor=e}e.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),NA=function(t){I$(e,t);function e(i,r){var s=t.call(this,i,r)||this;return s.onInit(r),s}return e.prototype.onInit=function(i){var r=this;(i==null?void 0:i.disableAutoFlushOnDocumentHide)!==!0&&typeof document<"u"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&r.forceFlush()},this._pageHideListener=function(){r.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},e.prototype.onShutdown=function(){typeof document<"u"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},e}(A$),O$=8,M$=16,D$=function(){function t(){this.generateTraceId=LT(M$),this.generateSpanId=LT(O$)}return t}(),ug=Array(32);function LT(t){return function(){for(var i=0;i<t*2;i++)ug[i]=Math.floor(Math.random()*16)+48,ug[i]>=58&&(ug[i]+=39);return String.fromCharCode.apply(null,ug.slice(0,t*2))}}var L$=function(){function t(e,i,r){this._tracerProvider=r;var s=C$(i);this._sampler=s.sampler,this._generalLimits=s.generalLimits,this._spanLimits=s.spanLimits,this._idGenerator=i.idGenerator||new D$,this.resource=r.resource,this.instrumentationLibrary=e}return t.prototype.startSpan=function(e,i,r){var s,n,a;i===void 0&&(i={}),r===void 0&&(r=vc.active()),i.root&&(r=_s.deleteSpan(r));var o=_s.getSpan(r);if(rS(r)){Ie.debug("Instrumentation suppressed, returning Noop Span");var c=_s.wrapSpanContext(gA);return c}var d=o==null?void 0:o.spanContext(),u=this._idGenerator.generateSpanId(),p,g,m;!d||!_s.isSpanContextValid(d)?p=this._idGenerator.generateTraceId():(p=d.traceId,g=d.traceState,m=d.spanId);var f=(s=i.kind)!==null&&s!==void 0?s:f1.INTERNAL,b=((n=i.links)!==null&&n!==void 0?n:[]).map(function(M){return{context:M.context,attributes:tm(M.attributes)}}),w=tm(i.attributes),v=this._sampler.shouldSample(r,p,e,f,w,b);g=(a=v.traceState)!==null&&a!==void 0?a:g;var _=v.decision===ff.RECORD_AND_SAMPLED?Yn.SAMPLED:Yn.NONE,k={traceId:p,spanId:u,traceFlags:_,traceState:g};if(v.decision===ff.NOT_RECORD){Ie.debug("Recording is off, propagating context in a non-recording span");var c=_s.wrapSpanContext(k);return c}var P=new T$(this,r,e,k,f,m,b,i.startTime),D=tm(Object.assign(w,v.attributes));return P.setAttributes(D),P},t.prototype.startActiveSpan=function(e,i,r,s){var n,a,o;if(!(arguments.length<2)){arguments.length===2?o=i:arguments.length===3?(n=i,o=r):(n=i,a=r,o=s);var c=a??vc.active(),d=this.startSpan(e,n,c),u=_s.setSpan(c,d);return vc.with(u,o,void 0,d)}},t.prototype.getGeneralLimits=function(){return this._generalLimits},t.prototype.getSpanLimits=function(){return this._spanLimits},t.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},t}();function N$(){return"unknown_service"}var Ma=globalThis&&globalThis.__assign||function(){return Ma=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Ma.apply(this,arguments)},U$=globalThis&&globalThis.__awaiter||function(t,e,i,r){function s(n){return n instanceof i?n:new i(function(a){a(n)})}return new(i||(i=Promise))(function(n,a){function o(u){try{d(r.next(u))}catch(p){a(p)}}function c(u){try{d(r.throw(u))}catch(p){a(p)}}function d(u){u.done?n(u.value):s(u.value).then(o,c)}d((r=r.apply(t,e||[])).next())})},j$=globalThis&&globalThis.__generator||function(t,e){var i={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,s,n,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(d){return function(u){return c([d,u])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,s&&(n=d[0]&2?s.return:d[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,d[1])).done)return n;switch(s=0,n&&(d=[d[0]&2,n.value]),d[0]){case 0:case 1:n=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,s=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(n=i.trys,!(n=n.length>0&&n[n.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!n||d[1]>n[0]&&d[1]<n[3])){i.label=d[1];break}if(d[0]===6&&i.label<n[1]){i.label=n[1],n=d;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(d);break}n[2]&&i.ops.pop(),i.trys.pop();continue}d=e.call(t,i)}catch(u){d=[6,u],s=0}finally{r=n=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},$$=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n},NT=function(){function t(e,i){var r=this;this._attributes=e,this.asyncAttributesPending=i!=null,this._syncAttributes=e,this._asyncAttributesPromise=i==null?void 0:i.then(function(s){return r._attributes=Object.assign({},r._attributes,s),r.asyncAttributesPending=!1,s},function(s){return Ie.debug("a resource's async attributes promise rejected: %s",s),r.asyncAttributesPending=!1,{}})}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t((e={},e[vs.SERVICE_NAME]=N$(),e[vs.TELEMETRY_SDK_LANGUAGE]=S0[vs.TELEMETRY_SDK_LANGUAGE],e[vs.TELEMETRY_SDK_NAME]=S0[vs.TELEMETRY_SDK_NAME],e[vs.TELEMETRY_SDK_VERSION]=S0[vs.TELEMETRY_SDK_VERSION],e))},Object.defineProperty(t.prototype,"attributes",{get:function(){return this.asyncAttributesPending&&Ie.error("Accessing resource attributes before async attributes settled"),this._attributes},enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){return U$(this,void 0,void 0,function(){return j$(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.merge=function(e){var i=this,r;if(!e)return this;var s=Ma(Ma({},this._syncAttributes),(r=e._syncAttributes)!==null&&r!==void 0?r:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new t(s);var n=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(a){var o,c=$$(a,2),d=c[0],u=c[1];return Ma(Ma(Ma(Ma({},i._syncAttributes),d),(o=e._syncAttributes)!==null&&o!==void 0?o:e.attributes),u)});return new t(s,n)},t.EMPTY=new t({}),t}(),pg=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z$=function(){function t(e){this._spanProcessors=e}return t.prototype.forceFlush=function(){var e,i,r=[];try{for(var s=pg(this._spanProcessors),n=s.next();!n.done;n=s.next()){var a=n.value;r.push(a.forceFlush())}}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return new Promise(function(o){Promise.all(r).then(function(){o()}).catch(function(c){vf(c||new Error("MultiSpanProcessor: forceFlush failed")),o()})})},t.prototype.onStart=function(e,i){var r,s;try{for(var n=pg(this._spanProcessors),a=n.next();!a.done;a=n.next()){var o=a.value;o.onStart(e,i)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(s=n.return)&&s.call(n)}finally{if(r)throw r.error}}},t.prototype.onEnd=function(e){var i,r;try{for(var s=pg(this._spanProcessors),n=s.next();!n.done;n=s.next()){var a=n.value;a.onEnd(e)}}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}},t.prototype.shutdown=function(){var e,i,r=[];try{for(var s=pg(this._spanProcessors),n=s.next();!n.done;n=s.next()){var a=n.value;r.push(a.shutdown())}}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return new Promise(function(o,c){Promise.all(r).then(function(){o()},c)})},t}(),F$=function(){function t(){}return t.prototype.onStart=function(e,i){},t.prototype.onEnd=function(e){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t}(),tc;(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(tc||(tc={}));var V$=function(){function t(e){e===void 0&&(e={});var i;this._registeredSpanProcessors=[],this._tracers=new Map;var r=f$({},DA(),R$(e));this.resource=(i=r.resource)!==null&&i!==void 0?i:NT.empty(),this.resource=NT.default().merge(this.resource),this._config=Object.assign({},r,{resource:this.resource});var s=this._buildExporterFromEnv();if(s!==void 0){var n=new NA(s);this.activeSpanProcessor=n}else this.activeSpanProcessor=new F$}return t.prototype.getTracer=function(e,i,r){var s=e+"@"+(i||"")+":"+((r==null?void 0:r.schemaUrl)||"");return this._tracers.has(s)||this._tracers.set(s,new L$({name:e,version:i,schemaUrl:r==null?void 0:r.schemaUrl},this._config,this)),this._tracers.get(s)},t.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(i){return Ie.error("Error while trying to shutdown current span processor",i)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new z$(this._registeredSpanProcessors)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(e){e===void 0&&(e={}),_s.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&vc.setGlobalContextManager(e.contextManager),e.propagator&&sl.setGlobalPropagator(e.propagator)},t.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,i=this._registeredSpanProcessors.map(function(r){return new Promise(function(s){var n,a=setTimeout(function(){s(new Error("Span processor did not completed within timeout period of "+e+" ms")),n=tc.timeout},e);r.forceFlush().then(function(){clearTimeout(a),n!==tc.timeout&&(n=tc.resolved,s(n))}).catch(function(o){clearTimeout(a),n=tc.error,s(o)})})});return new Promise(function(r,s){Promise.all(i).then(function(n){var a=n.filter(function(o){return o!==tc.resolved});a.length>0?s(a):r()}).catch(function(n){return s([n])})})},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype._getPropagator=function(e){var i;return(i=this.constructor._registeredPropagators.get(e))===null||i===void 0?void 0:i()},t.prototype._getSpanExporter=function(e){var i;return(i=this.constructor._registeredExporters.get(e))===null||i===void 0?void 0:i()},t.prototype._buildPropagatorFromEnv=function(){var e=this,i=Array.from(new Set(Rr().OTEL_PROPAGATORS)),r=i.map(function(n){var a=e._getPropagator(n);return a||Ie.warn('Propagator "'+n+'" requested through environment variable is unavailable.'),a}),s=r.reduce(function(n,a){return a&&n.push(a),n},[]);if(s.length!==0)return i.length===1?s[0]:new zj({propagators:s})},t.prototype._buildExporterFromEnv=function(){var e=Rr().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var i=this._getSpanExporter(e);return i||Ie.error('Exporter "'+e+'" requested through environment variable is unavailable.'),i}},t._registeredPropagators=new Map([["tracecontext",function(){return new r$}],["baggage",function(){return new dj}]]),t._registeredExporters=new Map,t}(),B$=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n},H$=globalThis&&globalThis.__spreadArray||function(t,e,i){if(i||arguments.length===2)for(var r=0,s=e.length,n;r<s;r++)(n||!(r in e))&&(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},UA=function(){function t(){this._enabled=!1,this._currentContext=Wr}return t.prototype._bindFunction=function(e,i){e===void 0&&(e=Wr);var r=this,s=function(){for(var n=this,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r.with(e,function(){return i.apply(n,a)})};return Object.defineProperty(s,"length",{enumerable:!1,configurable:!0,writable:!1,value:i.length}),s},t.prototype.active=function(){return this._currentContext},t.prototype.bind=function(e,i){return e===void 0&&(e=this.active()),typeof i=="function"?this._bindFunction(e,i):i},t.prototype.disable=function(){return this._currentContext=Wr,this._enabled=!1,this},t.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=Wr,this)},t.prototype.with=function(e,i,r){for(var s=[],n=3;n<arguments.length;n++)s[n-3]=arguments[n];var a=this._currentContext;this._currentContext=e||Wr;try{return i.call.apply(i,H$([r],B$(s),!1))}finally{this._currentContext=a}},t}(),G$=globalThis&&globalThis.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])},t(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(e,i);function r(){this.constructor=e}e.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),W$=function(t){G$(e,t);function e(i){i===void 0&&(i={});var r=t.call(this,i)||this;if(i.contextManager)throw"contextManager should be defined in register method not in constructor";if(i.propagator)throw"propagator should be defined in register method not in constructor";return r}return e.prototype.register=function(i){i===void 0&&(i={}),i.contextManager===void 0&&(i.contextManager=new UA),i.contextManager&&i.contextManager.enable(),t.prototype.register.call(this,i)},e}(V$),q$="=",UT=";",J$=",";globalThis&&globalThis.__read;function K$(t){var e=t.split(UT);if(!(e.length<=0)){var i=e.shift();if(i){var r=i.split(q$);if(r.length===2){var s=decodeURIComponent(r[0].trim()),n=decodeURIComponent(r[1].trim()),a;return e.length>0&&(a=uA(e.join(UT))),{key:s,value:n,metadata:a}}}}}function jA(t){return typeof t!="string"||t.length===0?{}:t.split(J$).map(function(e){return K$(e)}).filter(function(e){return e!==void 0&&e.value.length>0}).reduce(function(e,i){return e[i.key]=i.value,e},{})}var x1;(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(x1||(x1={}));var Y$=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Q$=",",Z$=["OTEL_SDK_DISABLED"];function X$(t){return Z$.indexOf(t)>-1}var ez=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function tz(t){return ez.indexOf(t)>-1}var iz=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function rz(t){return iz.indexOf(t)>-1}var jT=1/0,$T=128,sz=128,nz=128,$A={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:tt.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:jT,OTEL_ATTRIBUTE_COUNT_LIMIT:$T,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:jT,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:$T,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:sz,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:nz,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:x1.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function az(t,e,i){if(!(typeof i[t]>"u")){var r=String(i[t]);e[t]=r.toLowerCase()==="true"}}function oz(t,e,i,r,s){if(r===void 0&&(r=-1/0),s===void 0&&(s=1/0),typeof i[t]<"u"){var n=Number(i[t]);isNaN(n)||(n<r?e[t]=r:n>s?e[t]=s:e[t]=n)}}function cz(t,e,i,r){r===void 0&&(r=Q$);var s=i[t];typeof s=="string"&&(e[t]=s.split(r).map(function(n){return n.trim()}))}var dz={ALL:tt.ALL,VERBOSE:tt.VERBOSE,DEBUG:tt.DEBUG,INFO:tt.INFO,WARN:tt.WARN,ERROR:tt.ERROR,NONE:tt.NONE};function lz(t,e,i){var r=i[t];if(typeof r=="string"){var s=dz[r.toUpperCase()];s!=null&&(e[t]=s)}}function uz(t){var e={};for(var i in $A){var r=i;switch(r){case"OTEL_LOG_LEVEL":lz(r,e,t);break;default:if(X$(r))az(r,e,t);else if(tz(r))oz(r,e,t);else if(rz(r))cz(r,e,t);else{var s=t[r];typeof s<"u"&&s!==null&&(e[r]=String(s))}}}return e}function Ua(){var t=uz(Y$);return Object.assign({},$A,t)}function mp(t){for(var e=t.length,i="",r=0;r<e;r+=2){var s=t.substring(r,r+2),n=parseInt(s,16);i+=String.fromCharCode(n)}return btoa(i)}var pz=9,hz=Math.pow(10,pz);function P1(t){return t[0]*hz+t[1]}var Yd;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(Yd||(Yd={}));var gz=function(){function t(){var e=this;this._promise=new Promise(function(i,r){e._resolve=i,e._reject=r})}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(e){this._resolve(e)},t.prototype.reject=function(e){this._reject(e)},t}(),mz=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n},fz=globalThis&&globalThis.__spreadArray||function(t,e,i){if(i||arguments.length===2)for(var r=0,s=e.length,n;r<s;r++)(n||!(r in e))&&(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},vz=function(){function t(e,i){this._callback=e,this._that=i,this._isCalled=!1,this._deferred=new gz}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var e,i=this,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,fz([this._that],mz(r),!1))).then(function(n){return i._deferred.resolve(n)},function(n){return i._deferred.reject(n)})}catch(n){this._deferred.reject(n)}}return this._deferred.promise},t}(),yz=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n},zA=1e4,bz=5,wz=1e3,_z=5e3,Sz=1.5;function Ez(t){t===void 0&&(t={});var e={};return Object.entries(t).forEach(function(i){var r=yz(i,2),s=r[0],n=r[1];typeof n<"u"?e[s]=String(n):Ie.warn('Header "'+s+'" has wrong value and will be ignored')}),e}function kz(t,e){return t.endsWith("/")||(t=t+"/"),t+e}function Tz(t){try{var e=new URL(t);return e.pathname===""&&(e.pathname=e.pathname+"/"),e.toString()}catch{return Ie.warn("Could not parse export URL: '"+t+"'"),t}}function xz(t){return typeof t=="number"?t<=0?FA(t,zA):t:Pz()}function Pz(){var t,e=Number((t=Ua().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&t!==void 0?t:Ua().OTEL_EXPORTER_OTLP_TIMEOUT);return e<=0?FA(e,zA):e}function FA(t,e){return Ie.warn("Timeout must be greater than 0",t),e}function Cz(t){var e=[429,502,503,504];return e.includes(t)}function Rz(t){if(t==null)return-1;var e=Number.parseInt(t,10);if(Number.isInteger(e))return e>0?e*1e3:-1;var i=new Date(t).getTime()-Date.now();return i>=0?i:0}var Az=function(){function t(e){e===void 0&&(e={}),this._sendingPromises=[],this.url=this.getDefaultUrl(e),typeof e.hostname=="string"&&(this.hostname=e.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new vz(this._shutdown,this),this._concurrencyLimit=typeof e.concurrencyLimit=="number"?e.concurrencyLimit:1/0,this.timeoutMillis=xz(e.timeoutMillis),this.onInit(e)}return t.prototype.export=function(e,i){if(this._shutdownOnce.isCalled){i({code:Yd.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){i({code:Yd.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(e).then(function(){i({code:Yd.SUCCESS})}).catch(function(r){i({code:Yd.FAILED,error:r})})},t.prototype._export=function(e){var i=this;return new Promise(function(r,s){try{Ie.debug("items to be sent",e),i.send(e,r,s)}catch(n){s(n)}})},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){return Ie.debug("shutdown started"),this.onShutdown(),Promise.all(this._sendingPromises).then(function(){})},t}(),Iz=globalThis&&globalThis.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])},t(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(e,i);function r(){this.constructor=e}e.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Hu=function(t){Iz(e,t);function e(i,r,s){var n=t.call(this,i)||this;return n.name="OTLPExporterError",n.data=s,n.code=r,n}return e}(Error),wf=globalThis&&globalThis.__assign||function(){return wf=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},wf.apply(this,arguments)},Oz=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n};function Mz(t,e,i,r,s){if(navigator.sendBeacon(e,new Blob([t],i)))Ie.debug("sendBeacon - can send",t),r();else{var n=new Hu("sendBeacon - cannot send "+t);s(n)}}function Dz(t,e,i,r,s,n){var a,o,c=!1,d=setTimeout(function(){if(clearTimeout(a),c=!0,o.readyState===XMLHttpRequest.DONE){var p=new Hu("Request Timeout");n(p)}else o.abort()},r),u=function(p,g){p===void 0&&(p=bz),g===void 0&&(g=wz),o=new XMLHttpRequest,o.open("POST",e);var m={Accept:"application/json","Content-Type":"application/json"};Object.entries(wf(wf({},m),i)).forEach(function(f){var b=Oz(f,2),w=b[0],v=b[1];o.setRequestHeader(w,v)}),o.send(t),o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE&&c===!1)if(o.status>=200&&o.status<=299)Ie.debug("xhr success",t),s(),clearTimeout(d),clearTimeout(a);else if(o.status&&Cz(o.status)&&p>0){var f=void 0;g=Sz*g,o.getResponseHeader("Retry-After")?f=Rz(o.getResponseHeader("Retry-After")):f=Math.round(Math.random()*(_z-g)+g),a=setTimeout(function(){u(p-1,g)},f)}else{var b=new Hu("Failed to export with XHR (status: "+o.status+")",o.status);n(b),clearTimeout(d),clearTimeout(a)}},o.onabort=function(){if(c){var f=new Hu("Request Timeout");n(f)}clearTimeout(d),clearTimeout(a)},o.onerror=function(){if(c){var f=new Hu("Request Timeout");n(f)}clearTimeout(d),clearTimeout(a)}};u()}var Lz=globalThis&&globalThis.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])},t(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(e,i);function r(){this.constructor=e}e.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Nz=function(t){Lz(e,t);function e(i){i===void 0&&(i={});var r=t.call(this,i)||this;return r._useXHR=!1,r._useXHR=!!i.headers||typeof navigator.sendBeacon!="function",r._useXHR?r._headers=Object.assign({},Ez(i.headers),jA(Ua().OTEL_EXPORTER_OTLP_HEADERS)):r._headers={},r}return e.prototype.onInit=function(){window.addEventListener("unload",this.shutdown)},e.prototype.onShutdown=function(){window.removeEventListener("unload",this.shutdown)},e.prototype.send=function(i,r,s){var n=this;if(this._shutdownOnce.isCalled){Ie.debug("Shutdown already started. Cannot send objects");return}var a=this.convert(i),o=JSON.stringify(a),c=new Promise(function(u,p){n._useXHR?Dz(o,n.url,n._headers,n.timeoutMillis,u,p):Mz(o,n.url,{type:"application/json"},u,p)}).then(r,s);this._sendingPromises.push(c);var d=function(){var u=n._sendingPromises.indexOf(c);n._sendingPromises.splice(u,1)};c.then(d,d)},e}(Az),Uz=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n};function Dv(t){return Object.keys(t).map(function(e){return VA(e,t[e])})}function VA(t,e){return{key:t,value:BA(e)}}function BA(t){var e=typeof t;return e==="string"?{stringValue:t}:e==="number"?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:e==="boolean"?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(BA)}}:e==="object"&&t!=null?{kvlistValue:{values:Object.entries(t).map(function(i){var r=Uz(i,2),s=r[0],n=r[1];return VA(s,n)})}}:{}}function jz(t,e){var i,r=t.spanContext(),s=t.status,n=e?t.parentSpanId:t.parentSpanId!=null?mp(t.parentSpanId):void 0;return{traceId:e?r.traceId:mp(r.traceId),spanId:e?r.spanId:mp(r.spanId),parentSpanId:n,traceState:(i=r.traceState)===null||i===void 0?void 0:i.serialize(),name:t.name,kind:t.kind==null?0:t.kind+1,startTimeUnixNano:P1(t.startTime),endTimeUnixNano:P1(t.endTime),attributes:Dv(t.attributes),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map(zz),droppedEventsCount:t.droppedEventsCount,status:{code:s.code,message:s.message},links:t.links.map(function(a){return $z(a,e)}),droppedLinksCount:t.droppedLinksCount}}function $z(t,e){var i;return{attributes:t.attributes?Dv(t.attributes):[],spanId:e?t.context.spanId:mp(t.context.spanId),traceId:e?t.context.traceId:mp(t.context.traceId),traceState:(i=t.context.traceState)===null||i===void 0?void 0:i.serialize(),droppedAttributesCount:t.droppedAttributesCount||0}}function zz(t){return{attributes:t.attributes?Dv(t.attributes):[],name:t.name,timeUnixNano:P1(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}var Fz=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vz=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n};function Bz(t,e){return{resourceSpans:Gz(t,e)}}function Hz(t){var e,i,r=new Map;try{for(var s=Fz(t),n=s.next();!n.done;n=s.next()){var a=n.value,o=r.get(a.resource);o||(o=new Map,r.set(a.resource,o));var c=a.instrumentationLibrary.name+"@"+(a.instrumentationLibrary.version||"")+":"+(a.instrumentationLibrary.schemaUrl||""),d=o.get(c);d||(d=[],o.set(c,d)),d.push(a)}}catch(u){e={error:u}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return r}function Gz(t,e){for(var i=Hz(t),r=[],s=i.entries(),n=s.next();!n.done;){for(var a=Vz(n.value,2),o=a[0],c=a[1],d=[],u=c.values(),p=u.next();!p.done;){var g=p.value;if(g.length>0){var m=g[0].instrumentationLibrary,f=m.name,b=m.version,w=m.schemaUrl,v=g.map(function(k){return jz(k,e)});d.push({scope:{name:f,version:b},spans:v,schemaUrl:w})}p=u.next()}var _={resource:{attributes:Dv(o.attributes),droppedAttributesCount:0},scopeSpans:d,schemaUrl:void 0};r.push(_),n=s.next()}return r}var Wz=globalThis&&globalThis.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])},t(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(e,i);function r(){this.constructor=e}e.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),HA="v1/traces",qz="http://localhost:4318/"+HA,Jz=function(t){Wz(e,t);function e(i){i===void 0&&(i={});var r=t.call(this,i)||this;return r._headers=Object.assign(r._headers,jA(Ua().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),r}return e.prototype.convert=function(i){return Bz(i,!0)},e.prototype.getDefaultUrl=function(i){return typeof i.url=="string"?i.url:Ua().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?Tz(Ua().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):Ua().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?kz(Ua().OTEL_EXPORTER_OTLP_ENDPOINT,HA):qz},e}(Nz);function Kz(t){return t===void 0&&(t={}),typeof t.addEventListener=="function"&&typeof t.removeEventListener=="function"}var zT="OT_ZONE_CONTEXT",Yz=function(){function t(){this._enabled=!1,this._zoneCounter=0}return t.prototype._activeContextFromZone=function(e){return e&&e.get(zT)||Wr},t.prototype._bindFunction=function(e,i){var r=this,s=function(){for(var n=this,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r.with(e,function(){return i.apply(n,a)})};return Object.defineProperty(s,"length",{enumerable:!1,configurable:!0,writable:!1,value:i.length}),s},t.prototype._bindListener=function(e,i){var r=i;return r.__ot_listeners!==void 0||(r.__ot_listeners={},typeof r.addEventListener=="function"&&(r.addEventListener=this._patchAddEventListener(r,r.addEventListener,e)),typeof r.removeEventListener=="function"&&(r.removeEventListener=this._patchRemoveEventListener(r,r.removeEventListener))),i},t.prototype._createZoneName=function(){this._zoneCounter++;var e=Math.random();return this._zoneCounter+"-"+e},t.prototype._createZone=function(e,i){var r;return Zone.current.fork({name:e,properties:(r={},r[zT]=i,r)})},t.prototype._getActiveZone=function(){return Zone.current},t.prototype._patchAddEventListener=function(e,i,r){var s=this;return function(n,a,o){e.__ot_listeners===void 0&&(e.__ot_listeners={});var c=e.__ot_listeners[n];c===void 0&&(c=new WeakMap,e.__ot_listeners[n]=c);var d=s.bind(r,a);return c.set(a,d),i.call(this,n,d,o)}},t.prototype._patchRemoveEventListener=function(e,i){return function(r,s){if(e.__ot_listeners===void 0||e.__ot_listeners[r]===void 0)return i.call(this,r,s);var n=e.__ot_listeners[r],a=n.get(s);return n.delete(s),i.call(this,r,a||s)}},t.prototype.active=function(){if(!this._enabled)return Wr;var e=this._getActiveZone(),i=this._activeContextFromZone(e);return i||Wr},t.prototype.bind=function(e,i){return e===void 0&&(e=this.active()),typeof i=="function"?this._bindFunction(e,i):(Kz(i)&&this._bindListener(e,i),i)},t.prototype.disable=function(){return this._enabled=!1,this},t.prototype.enable=function(){return this._enabled=!0,this},t.prototype.with=function(e,i,r){for(var s=[],n=3;n<arguments.length;n++)s[n-3]=arguments[n];var a=this._createZoneName(),o=this._createZone(a,e);return o.run(i,r,s)},t}(),ys={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},Qz={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"},Zz="1.17.0",ed,P0=(ed={},ed[ys.TELEMETRY_SDK_NAME]="opentelemetry",ed[ys.PROCESS_RUNTIME_NAME]="browser",ed[ys.TELEMETRY_SDK_LANGUAGE]=Qz.WEBJS,ed[ys.TELEMETRY_SDK_VERSION]=Zz,ed);function Xz(){return"unknown_service"}var Da=globalThis&&globalThis.__assign||function(){return Da=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Da.apply(this,arguments)},eF=globalThis&&globalThis.__awaiter||function(t,e,i,r){function s(n){return n instanceof i?n:new i(function(a){a(n)})}return new(i||(i=Promise))(function(n,a){function o(u){try{d(r.next(u))}catch(p){a(p)}}function c(u){try{d(r.throw(u))}catch(p){a(p)}}function d(u){u.done?n(u.value):s(u.value).then(o,c)}d((r=r.apply(t,e||[])).next())})},tF=globalThis&&globalThis.__generator||function(t,e){var i={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,s,n,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(d){return function(u){return c([d,u])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,s&&(n=d[0]&2?s.return:d[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,d[1])).done)return n;switch(s=0,n&&(d=[d[0]&2,n.value]),d[0]){case 0:case 1:n=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,s=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(n=i.trys,!(n=n.length>0&&n[n.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!n||d[1]>n[0]&&d[1]<n[3])){i.label=d[1];break}if(d[0]===6&&i.label<n[1]){i.label=n[1],n=d;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(d);break}n[2]&&i.ops.pop(),i.trys.pop();continue}d=e.call(t,i)}catch(u){d=[6,u],s=0}finally{r=n=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},iF=globalThis&&globalThis.__read||function(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),s,n=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return n},rF=function(){function t(e,i){var r=this,s;this._attributes=e,this.asyncAttributesPending=i!=null,this._syncAttributes=(s=this._attributes)!==null&&s!==void 0?s:{},this._asyncAttributesPromise=i==null?void 0:i.then(function(n){return r._attributes=Object.assign({},r._attributes,n),r.asyncAttributesPending=!1,n},function(n){return Ie.debug("a resource's async attributes promise rejected: %s",n),r.asyncAttributesPending=!1,{}})}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t((e={},e[ys.SERVICE_NAME]=Xz(),e[ys.TELEMETRY_SDK_LANGUAGE]=P0[ys.TELEMETRY_SDK_LANGUAGE],e[ys.TELEMETRY_SDK_NAME]=P0[ys.TELEMETRY_SDK_NAME],e[ys.TELEMETRY_SDK_VERSION]=P0[ys.TELEMETRY_SDK_VERSION],e))},Object.defineProperty(t.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&Ie.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){return eF(this,void 0,void 0,function(){return tF(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.merge=function(e){var i=this,r;if(!e)return this;var s=Da(Da({},this._syncAttributes),(r=e._syncAttributes)!==null&&r!==void 0?r:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new t(s);var n=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(a){var o,c=iF(a,2),d=c[0],u=c[1];return Da(Da(Da(Da({},i._syncAttributes),d),(o=e._syncAttributes)!==null&&o!==void 0?o:e.attributes),u)});return new t(s,n)},t.EMPTY=new t({}),t}();function sS(t){let e=typeof t;if(e=="object"){if(Array.isArray(t))return"array";if(t===null)return"null"}return e}function sF(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}let Dn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Lv=[];for(let t=0;t<Dn.length;t++)Lv[Dn[t].charCodeAt(0)]=t;Lv["-".charCodeAt(0)]=Dn.indexOf("+");Lv["_".charCodeAt(0)]=Dn.indexOf("/");function nF(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let i=new Uint8Array(e),r=0,s=0,n,a=0;for(let o=0;o<t.length;o++){if(n=Lv[t.charCodeAt(o)],n===void 0)switch(t[o]){case"=":s=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:a=n,s=1;break;case 1:i[r++]=a<<2|(n&48)>>4,a=n,s=2;break;case 2:i[r++]=(a&15)<<4|(n&60)>>2,a=n,s=3;break;case 3:i[r++]=(a&3)<<6|n,s=0;break}}if(s==1)throw Error("invalid base64 string.");return i.subarray(0,r)}function aF(t){let e="",i=0,r,s=0;for(let n=0;n<t.length;n++)switch(r=t[n],i){case 0:e+=Dn[r>>2],s=(r&3)<<4,i=1;break;case 1:e+=Dn[s|r>>4],s=(r&15)<<2,i=2;break;case 2:e+=Dn[s|r>>6],e+=Dn[r&63],i=0;break}return i&&(e+=Dn[s],e+="=",i==1&&(e+="=")),e}var _f;(function(t){t.symbol=Symbol.for("protobuf-ts/unknown"),t.onRead=(i,r,s,n,a)=>{(e(r)?r[t.symbol]:r[t.symbol]=[]).push({no:s,wireType:n,data:a})},t.onWrite=(i,r,s)=>{for(let{no:n,wireType:a,data:o}of t.list(r))s.tag(n,a).raw(o)},t.list=(i,r)=>{if(e(i)){let s=i[t.symbol];return r?s.filter(n=>n.no==r):s}return[]},t.last=(i,r)=>t.list(i,r).slice(-1)[0];const e=i=>i&&Array.isArray(i[t.symbol])})(_f||(_f={}));var Ft;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(Ft||(Ft={}));function oF(){let t=0,e=0;for(let r=0;r<28;r+=7){let s=this.buf[this.pos++];if(t|=(s&127)<<r,!(s&128))return this.assertBounds(),[t,e]}let i=this.buf[this.pos++];if(t|=(i&15)<<28,e=(i&112)>>4,!(i&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let s=this.buf[this.pos++];if(e|=(s&127)<<r,!(s&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function C0(t,e,i){for(let n=0;n<28;n=n+7){const a=t>>>n,o=!(!(a>>>7)&&e==0),c=(o?a|128:a)&255;if(i.push(c),!o)return}const r=t>>>28&15|(e&7)<<4,s=!!(e>>3);if(i.push((s?r|128:r)&255),!!s){for(let n=3;n<31;n=n+7){const a=e>>>n,o=!!(a>>>7),c=(o?a|128:a)&255;if(i.push(c),!o)return}i.push(e>>>31&1)}}const rm=65536*65536;function GA(t){let e=t[0]=="-";e&&(t=t.slice(1));const i=1e6;let r=0,s=0;function n(a,o){const c=Number(t.slice(a,o));s*=i,r=r*i+c,r>=rm&&(s=s+(r/rm|0),r=r%rm)}return n(-24,-18),n(-18,-12),n(-12,-6),n(-6),[e,r,s]}function C1(t,e){if(e>>>0<=2097151)return""+(rm*e+(t>>>0));let i=t&16777215,r=(t>>>24|e<<8)>>>0&16777215,s=e>>16&65535,n=i+r*6777216+s*6710656,a=r+s*8147497,o=s*2,c=1e7;n>=c&&(a+=Math.floor(n/c),n%=c),a>=c&&(o+=Math.floor(a/c),a%=c);function d(u,p){let g=u?String(u):"";return p?"0000000".slice(g.length)+g:g}return d(o,0)+d(a,o)+d(n,1)}function FT(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let i=0;i<9;i++)e.push(t&127|128),t=t>>7;e.push(1)}}function cF(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let i=5;t&128&&i<10;i++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}let ct;function dF(){const t=new DataView(new ArrayBuffer(8));ct=globalThis.BigInt!==void 0&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:t}:void 0}dF();function WA(t){if(!t)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const qA=/^-?[0-9]+$/,Sf=4294967296,hg=2147483648;class JA{constructor(e,i){this.lo=e|0,this.hi=i|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let e=this.hi*Sf+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}class Gi extends JA{static from(e){if(ct)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=ct.C(e);case"number":if(e===0)return this.ZERO;e=ct.C(e);case"bigint":if(!e)return this.ZERO;if(e<ct.UMIN)throw new Error("signed value for ulong");if(e>ct.UMAX)throw new Error("ulong too large");return ct.V.setBigUint64(0,e,!0),new Gi(ct.V.getInt32(0,!0),ct.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!qA.test(e))throw new Error("string is no integer");let[i,r,s]=GA(e);if(i)throw new Error("signed value for ulong");return new Gi(r,s);case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new Gi(e,e/Sf)}throw new Error("unknown value "+typeof e)}toString(){return ct?this.toBigInt().toString():C1(this.lo,this.hi)}toBigInt(){return WA(ct),ct.V.setInt32(0,this.lo,!0),ct.V.setInt32(4,this.hi,!0),ct.V.getBigUint64(0,!0)}}Gi.ZERO=new Gi(0,0);class gt extends JA{static from(e){if(ct)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=ct.C(e);case"number":if(e===0)return this.ZERO;e=ct.C(e);case"bigint":if(!e)return this.ZERO;if(e<ct.MIN)throw new Error("signed long too small");if(e>ct.MAX)throw new Error("signed long too large");return ct.V.setBigInt64(0,e,!0),new gt(ct.V.getInt32(0,!0),ct.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!qA.test(e))throw new Error("string is no integer");let[i,r,s]=GA(e);if(i){if(s>hg||s==hg&&r!=0)throw new Error("signed long too small")}else if(s>=hg)throw new Error("signed long too large");let n=new gt(r,s);return i?n.negate():n;case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new gt(e,e/Sf):new gt(-e,-e/Sf).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return(this.hi&hg)!==0}negate(){let e=~this.hi,i=this.lo;return i?i=~i+1:e+=1,new gt(i,e)}toString(){if(ct)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+C1(e.lo,e.hi)}return C1(this.lo,this.hi)}toBigInt(){return WA(ct),ct.V.setInt32(0,this.lo,!0),ct.V.setInt32(4,this.hi,!0),ct.V.getBigInt64(0,!0)}}gt.ZERO=new gt(0,0);const VT={readUnknownField:!0,readerFactory:t=>new uF(t)};function lF(t){return t?Object.assign(Object.assign({},VT),t):VT}class uF{constructor(e,i){this.varint64=oF,this.uint32=cF,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=i??new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),i=e>>>3,r=e&7;if(i<=0||r<0||r>5)throw new Error("illegal tag: field no "+i+" wire type "+r);return[i,r]}skip(e){let i=this.pos;switch(e){case Ft.Varint:for(;this.buf[this.pos++]&128;);break;case Ft.Bit64:this.pos+=4;case Ft.Bit32:this.pos+=4;break;case Ft.LengthDelimited:let r=this.uint32();this.pos+=r;break;case Ft.StartGroup:let s;for(;(s=this.tag()[1])!==Ft.EndGroup;)this.skip(s);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return new gt(...this.varint64())}uint64(){return new Gi(...this.varint64())}sint64(){let[e,i]=this.varint64(),r=-(e&1);return e=(e>>>1|(i&1)<<31)^r,i=i>>>1^r,new gt(e,i)}bool(){let[e,i]=this.varint64();return e!==0||i!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new Gi(this.sfixed32(),this.sfixed32())}sfixed64(){return new gt(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),i=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(i,i+e)}string(){return this.textDecoder.decode(this.bytes())}}function Ye(t,e){if(!t)throw new Error(e)}const pF=34028234663852886e22,hF=-34028234663852886e22,gF=4294967295,mF=2147483647,fF=-2147483648;function fp(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>mF||t<fF)throw new Error("invalid int 32: "+t)}function Ef(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>gF||t<0)throw new Error("invalid uint 32: "+t)}function nS(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>pF||t<hF))throw new Error("invalid float 32: "+t)}const BT={writeUnknownFields:!0,writerFactory:()=>new yF};function vF(t){return t?Object.assign(Object.assign({},BT),t):BT}class yF{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let s=0;s<this.chunks.length;s++)e+=this.chunks[s].length;let i=new Uint8Array(e),r=0;for(let s=0;s<this.chunks.length;s++)i.set(this.chunks[s],r),r+=this.chunks[s].length;return this.chunks=[],i}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),i=this.stack.pop();if(!i)throw new Error("invalid state, fork stack empty");return this.chunks=i.chunks,this.buf=i.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,i){return this.uint32((e<<3|i)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Ef(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return fp(e),FT(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let i=this.textEncoder.encode(e);return this.uint32(i.byteLength),this.raw(i)}float(e){nS(e);let i=new Uint8Array(4);return new DataView(i.buffer).setFloat32(0,e,!0),this.raw(i)}double(e){let i=new Uint8Array(8);return new DataView(i.buffer).setFloat64(0,e,!0),this.raw(i)}fixed32(e){Ef(e);let i=new Uint8Array(4);return new DataView(i.buffer).setUint32(0,e,!0),this.raw(i)}sfixed32(e){fp(e);let i=new Uint8Array(4);return new DataView(i.buffer).setInt32(0,e,!0),this.raw(i)}sint32(e){return fp(e),e=(e<<1^e>>31)>>>0,FT(e,this.buf),this}sfixed64(e){let i=new Uint8Array(8),r=new DataView(i.buffer),s=gt.from(e);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(i)}fixed64(e){let i=new Uint8Array(8),r=new DataView(i.buffer),s=Gi.from(e);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(i)}int64(e){let i=gt.from(e);return C0(i.lo,i.hi,this.buf),this}sint64(e){let i=gt.from(e),r=i.hi>>31,s=i.lo<<1^r,n=(i.hi<<1|i.lo>>>31)^r;return C0(s,n,this.buf),this}uint64(e){let i=Gi.from(e);return C0(i.lo,i.hi,this.buf),this}}const HT={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},GT={ignoreUnknownFields:!1};function bF(t){return t?Object.assign(Object.assign({},GT),t):GT}function wF(t){return t?Object.assign(Object.assign({},HT),t):HT}const _F=Symbol.for("protobuf-ts/message-type");function WT(t){let e=!1;const i=[];for(let r=0;r<t.length;r++){let s=t.charAt(r);s=="_"?e=!0:/\d/.test(s)?(i.push(s),e=!0):e?(i.push(s.toUpperCase()),e=!1):r==0?i.push(s.toLowerCase()):i.push(s)}return i.join("")}var $;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})($||($={}));var on;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING",t[t.NUMBER=2]="NUMBER"})(on||(on={}));var kf;(function(t){t[t.NO=0]="NO",t[t.PACKED=1]="PACKED",t[t.UNPACKED=2]="UNPACKED"})(kf||(kf={}));function SF(t){var e,i,r,s;return t.localName=(e=t.localName)!==null&&e!==void 0?e:WT(t.name),t.jsonName=(i=t.jsonName)!==null&&i!==void 0?i:WT(t.name),t.repeat=(r=t.repeat)!==null&&r!==void 0?r:kf.NO,t.opt=(s=t.opt)!==null&&s!==void 0?s:t.repeat||t.oneof?!1:t.kind=="message",t}function EF(t){if(typeof t!="object"||t===null||!t.hasOwnProperty("oneofKind"))return!1;switch(typeof t.oneofKind){case"string":return t[t.oneofKind]===void 0?!1:Object.keys(t).length==2;case"undefined":return Object.keys(t).length==1;default:return!1}}class kF{constructor(e){var i;this.fields=(i=e.fields)!==null&&i!==void 0?i:[]}prepare(){if(this.data)return;const e=[],i=[],r=[];for(let s of this.fields)if(s.oneof)r.includes(s.oneof)||(r.push(s.oneof),e.push(s.oneof),i.push(s.oneof));else switch(i.push(s.localName),s.kind){case"scalar":case"enum":(!s.opt||s.repeat)&&e.push(s.localName);break;case"message":s.repeat&&e.push(s.localName);break;case"map":e.push(s.localName);break}this.data={req:e,known:i,oneofs:Object.values(r)}}is(e,i,r=!1){if(i<0)return!0;if(e==null||typeof e!="object")return!1;this.prepare();let s=Object.keys(e),n=this.data;if(s.length<n.req.length||n.req.some(a=>!s.includes(a))||!r&&s.some(a=>!n.known.includes(a)))return!1;if(i<1)return!0;for(const a of n.oneofs){const o=e[a];if(!EF(o))return!1;if(o.oneofKind===void 0)continue;const c=this.fields.find(d=>d.localName===o.oneofKind);if(!c||!this.field(o[o.oneofKind],c,r,i))return!1}for(const a of this.fields)if(a.oneof===void 0&&!this.field(e[a.localName],a,r,i))return!1;return!0}field(e,i,r,s){let n=i.repeat;switch(i.kind){case"scalar":return e===void 0?i.opt:n?this.scalars(e,i.T,s,i.L):this.scalar(e,i.T,i.L);case"enum":return e===void 0?i.opt:n?this.scalars(e,$.INT32,s):this.scalar(e,$.INT32);case"message":return e===void 0?!0:n?this.messages(e,i.T(),r,s):this.message(e,i.T(),r,s);case"map":if(typeof e!="object"||e===null)return!1;if(s<2)return!0;if(!this.mapKeys(e,i.K,s))return!1;switch(i.V.kind){case"scalar":return this.scalars(Object.values(e),i.V.T,s,i.V.L);case"enum":return this.scalars(Object.values(e),$.INT32,s);case"message":return this.messages(Object.values(e),i.V.T(),r,s)}break}return!0}message(e,i,r,s){return r?i.isAssignable(e,s):i.is(e,s)}messages(e,i,r,s){if(!Array.isArray(e))return!1;if(s<2)return!0;if(r){for(let n=0;n<e.length&&n<s;n++)if(!i.isAssignable(e[n],s-1))return!1}else for(let n=0;n<e.length&&n<s;n++)if(!i.is(e[n],s-1))return!1;return!0}scalar(e,i,r){let s=typeof e;switch(i){case $.UINT64:case $.FIXED64:case $.INT64:case $.SFIXED64:case $.SINT64:switch(r){case on.BIGINT:return s=="bigint";case on.NUMBER:return s=="number"&&!isNaN(e);default:return s=="string"}case $.BOOL:return s=="boolean";case $.STRING:return s=="string";case $.BYTES:return e instanceof Uint8Array;case $.DOUBLE:case $.FLOAT:return s=="number"&&!isNaN(e);default:return s=="number"&&Number.isInteger(e)}}scalars(e,i,r,s){if(!Array.isArray(e))return!1;if(r<2)return!0;if(Array.isArray(e)){for(let n=0;n<e.length&&n<r;n++)if(!this.scalar(e[n],i,s))return!1}return!0}mapKeys(e,i,r){let s=Object.keys(e);switch(i){case $.INT32:case $.FIXED32:case $.SFIXED32:case $.SINT32:case $.UINT32:return this.scalars(s.slice(0,r).map(n=>parseInt(n)),i,r);case $.BOOL:return this.scalars(s.slice(0,r).map(n=>n=="true"?!0:n=="false"?!1:n),i,r);default:return this.scalars(s,i,r,on.STRING)}}}function Cs(t,e){switch(e){case on.BIGINT:return t.toBigInt();case on.NUMBER:return t.toNumber();default:return t.toString()}}class TF{constructor(e){this.info=e}prepare(){var e;if(this.fMap===void 0){this.fMap={};const i=(e=this.info.fields)!==null&&e!==void 0?e:[];for(const r of i)this.fMap[r.name]=r,this.fMap[r.jsonName]=r,this.fMap[r.localName]=r}}assert(e,i,r){if(!e){let s=sS(r);throw(s=="number"||s=="boolean")&&(s=r.toString()),new Error(`Cannot parse JSON ${s} for ${this.info.typeName}#${i}`)}}read(e,i,r){this.prepare();const s=[];for(const[n,a]of Object.entries(e)){const o=this.fMap[n];if(!o){if(!r.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${n}`);continue}const c=o.localName;let d;if(o.oneof){if(a===null&&(o.kind!=="enum"||o.T()[0]!=="google.protobuf.NullValue"))continue;if(s.includes(o.oneof))throw new Error(`Multiple members of the oneof group "${o.oneof}" of ${this.info.typeName} are present in JSON.`);s.push(o.oneof),d=i[o.oneof]={oneofKind:c}}else d=i;if(o.kind=="map"){if(a===null)continue;this.assert(sF(a),o.name,a);const u=d[c];for(const[p,g]of Object.entries(a)){this.assert(g!==null,o.name+" map value",null);let m;switch(o.V.kind){case"message":m=o.V.T().internalJsonRead(g,r);break;case"enum":if(m=this.enum(o.V.T(),g,o.name,r.ignoreUnknownFields),m===!1)continue;break;case"scalar":m=this.scalar(g,o.V.T,o.V.L,o.name);break}this.assert(m!==void 0,o.name+" map value",g);let f=p;o.K==$.BOOL&&(f=f=="true"?!0:f=="false"?!1:f),f=this.scalar(f,o.K,on.STRING,o.name).toString(),u[f]=m}}else if(o.repeat){if(a===null)continue;this.assert(Array.isArray(a),o.name,a);const u=d[c];for(const p of a){this.assert(p!==null,o.name,null);let g;switch(o.kind){case"message":g=o.T().internalJsonRead(p,r);break;case"enum":if(g=this.enum(o.T(),p,o.name,r.ignoreUnknownFields),g===!1)continue;break;case"scalar":g=this.scalar(p,o.T,o.L,o.name);break}this.assert(g!==void 0,o.name,a),u.push(g)}}else switch(o.kind){case"message":if(a===null&&o.T().typeName!="google.protobuf.Value"){this.assert(o.oneof===void 0,o.name+" (oneof member)",null);continue}d[c]=o.T().internalJsonRead(a,r,d[c]);break;case"enum":let u=this.enum(o.T(),a,o.name,r.ignoreUnknownFields);if(u===!1)continue;d[c]=u;break;case"scalar":d[c]=this.scalar(a,o.T,o.L,o.name);break}}}enum(e,i,r,s){if(e[0]=="google.protobuf.NullValue"&&Ye(i===null||i==="NULL_VALUE",`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} only accepts null.`),i===null)return 0;switch(typeof i){case"number":return Ye(Number.isInteger(i),`Unable to parse field ${this.info.typeName}#${r}, enum can only be integral number, got ${i}.`),i;case"string":let n=i;e[2]&&i.substring(0,e[2].length)===e[2]&&(n=i.substring(e[2].length));let a=e[1][n];return typeof a>"u"&&s?!1:(Ye(typeof a=="number",`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} has no value for "${i}".`),a)}Ye(!1,`Unable to parse field ${this.info.typeName}#${r}, cannot parse enum value from ${typeof i}".`)}scalar(e,i,r,s){let n;try{switch(i){case $.DOUBLE:case $.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""){n="empty string";break}if(typeof e=="string"&&e.trim().length!==e.length){n="extra whitespace";break}if(typeof e!="string"&&typeof e!="number")break;let a=Number(e);if(Number.isNaN(a)){n="not a number";break}if(!Number.isFinite(a)){n="too large or small";break}return i==$.FLOAT&&nS(a),a;case $.INT32:case $.FIXED32:case $.SFIXED32:case $.SINT32:case $.UINT32:if(e===null)return 0;let o;if(typeof e=="number"?o=e:e===""?n="empty string":typeof e=="string"&&(e.trim().length!==e.length?n="extra whitespace":o=Number(e)),o===void 0)break;return i==$.UINT32?Ef(o):fp(o),o;case $.INT64:case $.SFIXED64:case $.SINT64:if(e===null)return Cs(gt.ZERO,r);if(typeof e!="number"&&typeof e!="string")break;return Cs(gt.from(e),r);case $.FIXED64:case $.UINT64:if(e===null)return Cs(Gi.ZERO,r);if(typeof e!="number"&&typeof e!="string")break;return Cs(Gi.from(e),r);case $.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case $.STRING:if(e===null)return"";if(typeof e!="string"){n="extra whitespace";break}try{encodeURIComponent(e)}catch(c){c="invalid UTF8";break}return e;case $.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return nF(e)}}catch(a){n=a.message}this.assert(!1,s+(n?" - "+n:""),e)}}class xF{constructor(e){var i;this.fields=(i=e.fields)!==null&&i!==void 0?i:[]}write(e,i){const r={},s=e;for(const n of this.fields){if(!n.oneof){let d=this.field(n,s[n.localName],i);d!==void 0&&(r[i.useProtoFieldName?n.name:n.jsonName]=d);continue}const a=s[n.oneof];if(a.oneofKind!==n.localName)continue;const o=n.kind=="scalar"||n.kind=="enum"?Object.assign(Object.assign({},i),{emitDefaultValues:!0}):i;let c=this.field(n,a[n.localName],o);Ye(c!==void 0),r[i.useProtoFieldName?n.name:n.jsonName]=c}return r}field(e,i,r){let s;if(e.kind=="map"){Ye(typeof i=="object"&&i!==null);const n={};switch(e.V.kind){case"scalar":for(const[c,d]of Object.entries(i)){const u=this.scalar(e.V.T,d,e.name,!1,!0);Ye(u!==void 0),n[c.toString()]=u}break;case"message":const a=e.V.T();for(const[c,d]of Object.entries(i)){const u=this.message(a,d,e.name,r);Ye(u!==void 0),n[c.toString()]=u}break;case"enum":const o=e.V.T();for(const[c,d]of Object.entries(i)){Ye(d===void 0||typeof d=="number");const u=this.enum(o,d,e.name,!1,!0,r.enumAsInteger);Ye(u!==void 0),n[c.toString()]=u}break}(r.emitDefaultValues||Object.keys(n).length>0)&&(s=n)}else if(e.repeat){Ye(Array.isArray(i));const n=[];switch(e.kind){case"scalar":for(let c=0;c<i.length;c++){const d=this.scalar(e.T,i[c],e.name,e.opt,!0);Ye(d!==void 0),n.push(d)}break;case"enum":const a=e.T();for(let c=0;c<i.length;c++){Ye(i[c]===void 0||typeof i[c]=="number");const d=this.enum(a,i[c],e.name,e.opt,!0,r.enumAsInteger);Ye(d!==void 0),n.push(d)}break;case"message":const o=e.T();for(let c=0;c<i.length;c++){const d=this.message(o,i[c],e.name,r);Ye(d!==void 0),n.push(d)}break}(r.emitDefaultValues||n.length>0||r.emitDefaultValues)&&(s=n)}else switch(e.kind){case"scalar":s=this.scalar(e.T,i,e.name,e.opt,r.emitDefaultValues);break;case"enum":s=this.enum(e.T(),i,e.name,e.opt,r.emitDefaultValues,r.enumAsInteger);break;case"message":s=this.message(e.T(),i,e.name,r);break}return s}enum(e,i,r,s,n,a){if(e[0]=="google.protobuf.NullValue")return!n&&!s?void 0:null;if(i===void 0){Ye(s);return}if(!(i===0&&!n&&!s))return Ye(typeof i=="number"),Ye(Number.isInteger(i)),a||!e[1].hasOwnProperty(i)?i:e[2]?e[2]+e[1][i]:e[1][i]}message(e,i,r,s){return i===void 0?s.emitDefaultValues?null:void 0:e.internalJsonWrite(i,s)}scalar(e,i,r,s,n){if(i===void 0){Ye(s);return}const a=n||s;switch(e){case $.INT32:case $.SFIXED32:case $.SINT32:return i===0?a?0:void 0:(fp(i),i);case $.FIXED32:case $.UINT32:return i===0?a?0:void 0:(Ef(i),i);case $.FLOAT:nS(i);case $.DOUBLE:return i===0?a?0:void 0:(Ye(typeof i=="number"),Number.isNaN(i)?"NaN":i===Number.POSITIVE_INFINITY?"Infinity":i===Number.NEGATIVE_INFINITY?"-Infinity":i);case $.STRING:return i===""?a?"":void 0:(Ye(typeof i=="string"),i);case $.BOOL:return i===!1?a?!1:void 0:(Ye(typeof i=="boolean"),i);case $.UINT64:case $.FIXED64:Ye(typeof i=="number"||typeof i=="string"||typeof i=="bigint");let o=Gi.from(i);return o.isZero()&&!a?void 0:o.toString();case $.INT64:case $.SFIXED64:case $.SINT64:Ye(typeof i=="number"||typeof i=="string"||typeof i=="bigint");let c=gt.from(i);return c.isZero()&&!a?void 0:c.toString();case $.BYTES:return Ye(i instanceof Uint8Array),i.byteLength?aF(i):a?"":void 0}}}function R1(t,e=on.STRING){switch(t){case $.BOOL:return!1;case $.UINT64:case $.FIXED64:return Cs(Gi.ZERO,e);case $.INT64:case $.SFIXED64:case $.SINT64:return Cs(gt.ZERO,e);case $.DOUBLE:case $.FLOAT:return 0;case $.BYTES:return new Uint8Array(0);case $.STRING:return"";default:return 0}}class PF{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){const i=(e=this.info.fields)!==null&&e!==void 0?e:[];this.fieldNoToField=new Map(i.map(r=>[r.no,r]))}}read(e,i,r,s){this.prepare();const n=s===void 0?e.len:e.pos+s;for(;e.pos<n;){const[a,o]=e.tag(),c=this.fieldNoToField.get(a);if(!c){let g=r.readUnknownField;if(g=="throw")throw new Error(`Unknown field ${a} (wire type ${o}) for ${this.info.typeName}`);let m=e.skip(o);g!==!1&&(g===!0?_f.onRead:g)(this.info.typeName,i,a,o,m);continue}let d=i,u=c.repeat,p=c.localName;switch(c.oneof&&(d=d[c.oneof],d.oneofKind!==p&&(d=i[c.oneof]={oneofKind:p})),c.kind){case"scalar":case"enum":let g=c.kind=="enum"?$.INT32:c.T,m=c.kind=="scalar"?c.L:void 0;if(u){let w=d[p];if(o==Ft.LengthDelimited&&g!=$.STRING&&g!=$.BYTES){let v=e.uint32()+e.pos;for(;e.pos<v;)w.push(this.scalar(e,g,m))}else w.push(this.scalar(e,g,m))}else d[p]=this.scalar(e,g,m);break;case"message":if(u){let w=d[p],v=c.T().internalBinaryRead(e,e.uint32(),r);w.push(v)}else d[p]=c.T().internalBinaryRead(e,e.uint32(),r,d[p]);break;case"map":let[f,b]=this.mapEntry(c,e,r);d[p][f]=b;break}}}mapEntry(e,i,r){let s=i.uint32(),n=i.pos+s,a,o;for(;i.pos<n;){let[c,d]=i.tag();switch(c){case 1:e.K==$.BOOL?a=i.bool().toString():a=this.scalar(i,e.K,on.STRING);break;case 2:switch(e.V.kind){case"scalar":o=this.scalar(i,e.V.T,e.V.L);break;case"enum":o=i.int32();break;case"message":o=e.V.T().internalBinaryRead(i,i.uint32(),r);break}break;default:throw new Error(`Unknown field ${c} (wire type ${d}) in map entry for ${this.info.typeName}#${e.name}`)}}if(a===void 0){let c=R1(e.K);a=e.K==$.BOOL?c.toString():c}if(o===void 0)switch(e.V.kind){case"scalar":o=R1(e.V.T,e.V.L);break;case"enum":o=0;break;case"message":o=e.V.T().create();break}return[a,o]}scalar(e,i,r){switch(i){case $.INT32:return e.int32();case $.STRING:return e.string();case $.BOOL:return e.bool();case $.DOUBLE:return e.double();case $.FLOAT:return e.float();case $.INT64:return Cs(e.int64(),r);case $.UINT64:return Cs(e.uint64(),r);case $.FIXED64:return Cs(e.fixed64(),r);case $.FIXED32:return e.fixed32();case $.BYTES:return e.bytes();case $.UINT32:return e.uint32();case $.SFIXED32:return e.sfixed32();case $.SFIXED64:return Cs(e.sfixed64(),r);case $.SINT32:return e.sint32();case $.SINT64:return Cs(e.sint64(),r)}}}class CF{constructor(e){this.info=e}prepare(){if(!this.fields){const e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort((i,r)=>i.no-r.no)}}write(e,i,r){this.prepare();for(const n of this.fields){let a,o,c=n.repeat,d=n.localName;if(n.oneof){const u=e[n.oneof];if(u.oneofKind!==d)continue;a=u[d],o=!0}else a=e[d],o=!1;switch(n.kind){case"scalar":case"enum":let u=n.kind=="enum"?$.INT32:n.T;if(c)if(Ye(Array.isArray(a)),c==kf.PACKED)this.packed(i,u,n.no,a);else for(const p of a)this.scalar(i,u,n.no,p,!0);else a===void 0?Ye(n.opt):this.scalar(i,u,n.no,a,o||n.opt);break;case"message":if(c){Ye(Array.isArray(a));for(const p of a)this.message(i,r,n.T(),n.no,p)}else this.message(i,r,n.T(),n.no,a);break;case"map":Ye(typeof a=="object"&&a!==null);for(const[p,g]of Object.entries(a))this.mapEntry(i,r,n,p,g);break}}let s=r.writeUnknownFields;s!==!1&&(s===!0?_f.onWrite:s)(this.info.typeName,e,i)}mapEntry(e,i,r,s,n){e.tag(r.no,Ft.LengthDelimited),e.fork();let a=s;switch(r.K){case $.INT32:case $.FIXED32:case $.UINT32:case $.SFIXED32:case $.SINT32:a=Number.parseInt(s);break;case $.BOOL:Ye(s=="true"||s=="false"),a=s=="true";break}switch(this.scalar(e,r.K,1,a,!0),r.V.kind){case"scalar":this.scalar(e,r.V.T,2,n,!0);break;case"enum":this.scalar(e,$.INT32,2,n,!0);break;case"message":this.message(e,i,r.V.T(),2,n);break}e.join()}message(e,i,r,s,n){n!==void 0&&(r.internalBinaryWrite(n,e.tag(s,Ft.LengthDelimited).fork(),i),e.join())}scalar(e,i,r,s,n){let[a,o,c]=this.scalarInfo(i,s);(!c||n)&&(e.tag(r,a),e[o](s))}packed(e,i,r,s){if(!s.length)return;Ye(i!==$.BYTES&&i!==$.STRING),e.tag(r,Ft.LengthDelimited),e.fork();let[,n]=this.scalarInfo(i);for(let a=0;a<s.length;a++)e[n](s[a]);e.join()}scalarInfo(e,i){let r=Ft.Varint,s,n=i===void 0,a=i===0;switch(e){case $.INT32:s="int32";break;case $.STRING:a=n||!i.length,r=Ft.LengthDelimited,s="string";break;case $.BOOL:a=i===!1,s="bool";break;case $.UINT32:s="uint32";break;case $.DOUBLE:r=Ft.Bit64,s="double";break;case $.FLOAT:r=Ft.Bit32,s="float";break;case $.INT64:a=n||gt.from(i).isZero(),s="int64";break;case $.UINT64:a=n||Gi.from(i).isZero(),s="uint64";break;case $.FIXED64:a=n||Gi.from(i).isZero(),r=Ft.Bit64,s="fixed64";break;case $.BYTES:a=n||!i.byteLength,r=Ft.LengthDelimited,s="bytes";break;case $.FIXED32:r=Ft.Bit32,s="fixed32";break;case $.SFIXED32:r=Ft.Bit32,s="sfixed32";break;case $.SFIXED64:a=n||gt.from(i).isZero(),r=Ft.Bit64,s="sfixed64";break;case $.SINT32:s="sint32";break;case $.SINT64:a=n||gt.from(i).isZero(),s="sint64";break}return[r,s,n||a]}}function RF(t){const e={};Object.defineProperty(e,_F,{enumerable:!1,value:t});for(let i of t.fields){let r=i.localName;if(!i.opt)if(i.oneof)e[i.oneof]={oneofKind:void 0};else if(i.repeat)e[r]=[];else switch(i.kind){case"scalar":e[r]=R1(i.T,i.L);break;case"enum":e[r]=0;break;case"map":e[r]={};break}}return e}function R0(t,e,i){let r,s=i,n;for(let a of t.fields){let o=a.localName;if(a.oneof){const c=s[a.oneof];if((c==null?void 0:c.oneofKind)==null)continue;if(r=c[o],n=e[a.oneof],n.oneofKind=c.oneofKind,r==null){delete n[o];continue}}else if(r=s[o],n=e,r==null)continue;switch(a.repeat&&(n[o].length=r.length),a.kind){case"scalar":case"enum":if(a.repeat)for(let d=0;d<r.length;d++)n[o][d]=r[d];else n[o]=r;break;case"message":let c=a.T();if(a.repeat)for(let d=0;d<r.length;d++)n[o][d]=c.create(r[d]);else n[o]===void 0?n[o]=c.create(r):c.mergePartial(n[o],r);break;case"map":switch(a.V.kind){case"scalar":case"enum":Object.assign(n[o],r);break;case"message":let d=a.V.T();for(let u of Object.keys(r))n[o][u]=d.create(r[u]);break}break}}}function AF(t,e,i){if(e===i)return!0;if(!e||!i)return!1;for(let r of t.fields){let s=r.localName,n=r.oneof?e[r.oneof][s]:e[s],a=r.oneof?i[r.oneof][s]:i[s];switch(r.kind){case"enum":case"scalar":let o=r.kind=="enum"?$.INT32:r.T;if(!(r.repeat?qT(o,n,a):KA(o,n,a)))return!1;break;case"map":if(!(r.V.kind=="message"?JT(r.V.T(),gg(n),gg(a)):qT(r.V.kind=="enum"?$.INT32:r.V.T,gg(n),gg(a))))return!1;break;case"message":let c=r.T();if(!(r.repeat?JT(c,n,a):c.equals(n,a)))return!1;break}}return!0}const gg=Object.values;function KA(t,e,i){if(e===i)return!0;if(t!==$.BYTES)return!1;let r=e,s=i;if(r.length!==s.length)return!1;for(let n=0;n<r.length;n++)if(r[n]!=s[n])return!1;return!0}function qT(t,e,i){if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(!KA(t,e[r],i[r]))return!1;return!0}function JT(t,e,i){if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(!t.equals(e[r],i[r]))return!1;return!0}class C{constructor(e,i,r){this.defaultCheckDepth=16,this.typeName=e,this.fields=i.map(SF),this.options=r??{},this.refTypeCheck=new kF(this),this.refJsonReader=new TF(this),this.refJsonWriter=new xF(this),this.refBinReader=new PF(this),this.refBinWriter=new CF(this)}create(e){let i=RF(this);return e!==void 0&&R0(this,i,e),i}clone(e){let i=this.create();return R0(this,i,e),i}equals(e,i){return AF(this,e,i)}is(e,i=this.defaultCheckDepth){return this.refTypeCheck.is(e,i,!1)}isAssignable(e,i=this.defaultCheckDepth){return this.refTypeCheck.is(e,i,!0)}mergePartial(e,i){R0(this,e,i)}fromBinary(e,i){let r=lF(i);return this.internalBinaryRead(r.readerFactory(e),e.byteLength,r)}fromJson(e,i){return this.internalJsonRead(e,bF(i))}fromJsonString(e,i){let r=JSON.parse(e);return this.fromJson(r,i)}toJson(e,i){return this.internalJsonWrite(e,wF(i))}toJsonString(e,i){var r;let s=this.toJson(e,i);return JSON.stringify(s,null,(r=i==null?void 0:i.prettySpaces)!==null&&r!==void 0?r:0)}toBinary(e,i){let r=vF(i);return this.internalBinaryWrite(e,r.writerFactory(),r).finish()}internalJsonRead(e,i,r){if(e!==null&&typeof e=="object"&&!Array.isArray(e)){let s=r??this.create();return this.refJsonReader.read(e,s,i),s}throw new Error(`Unable to parse message ${this.typeName} from JSON ${sS(e)}.`)}internalJsonWrite(e,i){return this.refJsonWriter.write(e,i)}internalBinaryWrite(e,i,r){return this.refBinWriter.write(e,i,r),i}internalBinaryRead(e,i,r,s){let n=s??this.create();return this.refBinReader.read(e,n,r,i),n}}var yc={},Nv={},A1={exports:{}},A0,KT;function IF(){if(KT)return A0;KT=1;var t=1e3,e=t*60,i=e*60,r=i*24,s=r*7,n=r*365.25;A0=function(u,p){p=p||{};var g=typeof u;if(g==="string"&&u.length>0)return a(u);if(g==="number"&&isFinite(u))return p.long?c(u):o(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function a(u){if(u=String(u),!(u.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(p){var g=parseFloat(p[1]),m=(p[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return g*n;case"weeks":case"week":case"w":return g*s;case"days":case"day":case"d":return g*r;case"hours":case"hour":case"hrs":case"hr":case"h":return g*i;case"minutes":case"minute":case"mins":case"min":case"m":return g*e;case"seconds":case"second":case"secs":case"sec":case"s":return g*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function o(u){var p=Math.abs(u);return p>=r?Math.round(u/r)+"d":p>=i?Math.round(u/i)+"h":p>=e?Math.round(u/e)+"m":p>=t?Math.round(u/t)+"s":u+"ms"}function c(u){var p=Math.abs(u);return p>=r?d(u,p,r,"day"):p>=i?d(u,p,i,"hour"):p>=e?d(u,p,e,"minute"):p>=t?d(u,p,t,"second"):u+" ms"}function d(u,p,g,m){var f=p>=g*1.5;return Math.round(u/g)+" "+m+(f?"s":"")}return A0}function OF(t){i.debug=i,i.default=i,i.coerce=c,i.disable=n,i.enable=s,i.enabled=a,i.humanize=IF(),i.destroy=d,Object.keys(t).forEach(u=>{i[u]=t[u]}),i.names=[],i.skips=[],i.formatters={};function e(u){let p=0;for(let g=0;g<u.length;g++)p=(p<<5)-p+u.charCodeAt(g),p|=0;return i.colors[Math.abs(p)%i.colors.length]}i.selectColor=e;function i(u){let p,g=null,m,f;function b(...w){if(!b.enabled)return;const v=b,_=Number(new Date),k=_-(p||_);v.diff=k,v.prev=p,v.curr=_,p=_,w[0]=i.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let P=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(M,B)=>{if(M==="%%")return"%";P++;const G=i.formatters[B];if(typeof G=="function"){const ne=w[P];M=G.call(v,ne),w.splice(P,1),P--}return M}),i.formatArgs.call(v,w),(v.log||i.log).apply(v,w)}return b.namespace=u,b.useColors=i.useColors(),b.color=i.selectColor(u),b.extend=r,b.destroy=i.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(m!==i.namespaces&&(m=i.namespaces,f=i.enabled(u)),f),set:w=>{g=w}}),typeof i.init=="function"&&i.init(b),b}function r(u,p){const g=i(this.namespace+(typeof p>"u"?":":p)+u);return g.log=this.log,g}function s(u){i.save(u),i.namespaces=u,i.names=[],i.skips=[];let p;const g=(typeof u=="string"?u:"").split(/[\s,]+/),m=g.length;for(p=0;p<m;p++)g[p]&&(u=g[p].replace(/\*/g,".*?"),u[0]==="-"?i.skips.push(new RegExp("^"+u.slice(1)+"$")):i.names.push(new RegExp("^"+u+"$")))}function n(){const u=[...i.names.map(o),...i.skips.map(o).map(p=>"-"+p)].join(",");return i.enable(""),u}function a(u){if(u[u.length-1]==="*")return!0;let p,g;for(p=0,g=i.skips.length;p<g;p++)if(i.skips[p].test(u))return!1;for(p=0,g=i.names.length;p<g;p++)if(i.names[p].test(u))return!0;return!1}function o(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var MF=OF;(function(t,e){e.formatArgs=r,e.save=s,e.load=n,e.useColors=i,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;c.splice(1,0,d,"color: inherit");let u=0,p=0;c[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(u++,g==="%c"&&(p=u))}),c.splice(p,0,d)}e.log=console.debug||console.log||(()=>{});function s(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function n(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=MF(e);const{formatters:o}=t.exports;o.j=function(c){try{return JSON.stringify(c)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(A1,A1.exports);var DF=A1.exports,LF=NE&&NE.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nv,"__esModule",{value:!0});Nv.Logger=void 0;const td=LF(DF),id="awaitqueue";class NF{constructor(e){e?(this._debug=(0,td.default)(`${id}:${e}`),this._warn=(0,td.default)(`${id}:WARN:${e}`),this._error=(0,td.default)(`${id}:ERROR:${e}`)):(this._debug=(0,td.default)(id),this._warn=(0,td.default)(`${id}:WARN`),this._error=(0,td.default)(`${id}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}Nv.Logger=NF;Object.defineProperty(yc,"__esModule",{value:!0});var Tf=yc.AwaitQueue=yc.AwaitQueueRemovedTaskError=yc.AwaitQueueStoppedError=void 0;const UF=Nv,da=new UF.Logger;class Uv extends Error{constructor(e){super(e??"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Uv)}}yc.AwaitQueueStoppedError=Uv;class jv extends Error{constructor(e){super(e??"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,jv)}}yc.AwaitQueueRemovedTaskError=jv;class jF{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(e,i){if(i=i??e.name,da.debug(`push() [name:${i}]`),typeof e!="function")throw new TypeError("given task is not a function");if(i)try{Object.defineProperty(e,"name",{value:i})}catch{}return new Promise((r,s)=>{const n={id:this.nextTaskId++,task:e,name:i,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:a=>{if(n.completed)return;n.completed=!0,this.pendingTasks.delete(n.id),da.debug(`resolving task [name:${n.name}]`),r(a);const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)},reject:a=>{if(!n.completed&&(n.completed=!0,this.pendingTasks.delete(n.id),da.debug(`rejecting task [name:${n.name}]: %s`,String(a)),s(a),!this.stopping)){const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)}}};this.pendingTasks.set(n.id,n),this.pendingTasks.size===1&&this.execute(n)})}stop(){da.debug("stop()"),this.stopping=!0;for(const e of this.pendingTasks.values())da.debug(`stop() | stopping task [name:${e.name}]`),e.reject(new Uv);this.stopping=!1}remove(e){da.debug(`remove() [taskIdx:${e}]`);const i=Array.from(this.pendingTasks.values())[e];if(!i){da.debug(`stop() | no task with given idx [taskIdx:${e}]`);return}i.reject(new jv)}dump(){const e=Date.now();let i=0;return Array.from(this.pendingTasks.values()).map(r=>({idx:i++,task:r.task,name:r.name,enqueuedTime:r.executedAt?r.executedAt-r.enqueuedAt:e-r.enqueuedAt,executionTime:r.executedAt?e-r.executedAt:0}))}async execute(e){if(da.debug(`execute() [name:${e.name}]`),e.executedAt)throw new Error("task already being executed");e.executedAt=Date.now();try{const i=await e.task();e.resolve(i)}catch(i){e.reject(i)}}}Tf=yc.AwaitQueue=jF;const ln=Object.create(null);ln.open="0";ln.close="1";ln.ping="2";ln.pong="3";ln.message="4";ln.upgrade="5";ln.noop="6";const sm=Object.create(null);Object.keys(ln).forEach(t=>{sm[ln[t]]=t});const $F={type:"error",data:"parser error"},zF=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",FF=typeof ArrayBuffer=="function",VF=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,YA=({type:t,data:e},i,r)=>zF&&e instanceof Blob?i?r(e):YT(e,r):FF&&(e instanceof ArrayBuffer||VF(e))?i?r(e):YT(new Blob([e]),r):r(ln[t]+(e||"")),YT=(t,e)=>{const i=new FileReader;return i.onload=function(){const r=i.result.split(",")[1];e("b"+(r||""))},i.readAsDataURL(t)},QT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<QT.length;t++)Gu[QT.charCodeAt(t)]=t;const BF=t=>{let e=t.length*.75,i=t.length,r,s=0,n,a,o,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const d=new ArrayBuffer(e),u=new Uint8Array(d);for(r=0;r<i;r+=4)n=Gu[t.charCodeAt(r)],a=Gu[t.charCodeAt(r+1)],o=Gu[t.charCodeAt(r+2)],c=Gu[t.charCodeAt(r+3)],u[s++]=n<<2|a>>4,u[s++]=(a&15)<<4|o>>2,u[s++]=(o&3)<<6|c&63;return d},HF=typeof ArrayBuffer=="function",QA=(t,e)=>{if(typeof t!="string")return{type:"message",data:ZA(t,e)};const i=t.charAt(0);return i==="b"?{type:"message",data:GF(t.substring(1),e)}:sm[i]?t.length>1?{type:sm[i],data:t.substring(1)}:{type:sm[i]}:$F},GF=(t,e)=>{if(HF){const i=BF(t);return ZA(i,e)}else return{base64:!0,data:t}},ZA=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}},XA=String.fromCharCode(30),WF=(t,e)=>{const i=t.length,r=new Array(i);let s=0;t.forEach((n,a)=>{YA(n,!1,o=>{r[a]=o,++s===i&&e(r.join(XA))})})},qF=(t,e)=>{const i=t.split(XA),r=[];for(let s=0;s<i.length;s++){const n=QA(i[s],e);if(r.push(n),n.type==="error")break}return r},eI=4;function ai(t){if(t)return JF(t)}function JF(t){for(var e in ai.prototype)t[e]=ai.prototype[e];return t}ai.prototype.on=ai.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};ai.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this};ai.prototype.off=ai.prototype.removeListener=ai.prototype.removeAllListeners=ai.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+t];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<i.length;s++)if(r=i[s],r===e||r.fn===e){i.splice(s,1);break}return i.length===0&&delete this._callbacks["$"+t],this};ai.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(i){i=i.slice(0);for(var r=0,s=i.length;r<s;++r)i[r].apply(this,e)}return this};ai.prototype.emitReserved=ai.prototype.emit;ai.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ai.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Gr=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function tI(t,...e){return e.reduce((i,r)=>(t.hasOwnProperty(r)&&(i[r]=t[r]),i),{})}const KF=Gr.setTimeout,YF=Gr.clearTimeout;function $v(t,e){e.useNativeTimers?(t.setTimeoutFn=KF.bind(Gr),t.clearTimeoutFn=YF.bind(Gr)):(t.setTimeoutFn=Gr.setTimeout.bind(Gr),t.clearTimeoutFn=Gr.clearTimeout.bind(Gr))}const QF=1.33;function ZF(t){return typeof t=="string"?XF(t):Math.ceil((t.byteLength||t.size)*QF)}function XF(t){let e=0,i=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?i+=1:e<2048?i+=2:e<55296||e>=57344?i+=3:(r++,i+=4);return i}class eV extends Error{constructor(e,i,r){super(e),this.description=i,this.context=r,this.type="TransportError"}}class iI extends ai{constructor(e){super(),this.writable=!1,$v(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,i,r){return super.emitReserved("error",new eV(e,i,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const i=QA(e,this.socket.binaryType);this.onPacket(i)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}const rI="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),I1=64,tV={};let ZT=0,mg=0,XT;function e2(t){let e="";do e=rI[t%I1]+e,t=Math.floor(t/I1);while(t>0);return e}function sI(){const t=e2(+new Date);return t!==XT?(ZT=0,XT=t):t+"."+e2(ZT++)}for(;mg<I1;mg++)tV[rI[mg]]=mg;function nI(t){let e="";for(let i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e}function iV(t){let e={},i=t.split("&");for(let r=0,s=i.length;r<s;r++){let n=i[r].split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return e}let aI=!1;try{aI=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const rV=aI;function oI(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||rV))return new XMLHttpRequest}catch{}if(!e)try{return new Gr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function sV(){}const nV=function(){return new oI({xdomain:!1}).responseType!=null}();class aV extends iI{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port,this.xs=e.secure!==r}const i=e&&e.forceBase64;this.supportsBinary=nV&&!i}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const i=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||i()})),this.writable||(r++,this.once("drain",function(){--r||i()}))}else i()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const i=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};qF(e,this.socket.binaryType).forEach(i),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,WF(e,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const i=this.opts.secure?"https":"http";let r="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=sI()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(i==="https"&&Number(this.opts.port)!==443||i==="http"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port);const s=nI(e),n=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(n?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(s.length?"?"+s:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new cn(this.uri(),e)}doWrite(e,i){const r=this.request({method:"POST",data:e});r.on("success",i),r.on("error",(s,n)=>{this.onError("xhr post error",s,n)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(i,r)=>{this.onError("xhr poll error",i,r)}),this.pollXhr=e}}class cn extends ai{constructor(e,i){super(),$v(this,i),this.opts=i,this.method=i.method||"GET",this.uri=e,this.async=i.async!==!1,this.data=i.data!==void 0?i.data:null,this.create()}create(){const e=tI(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const i=this.xhr=new oI(e);try{i.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=cn.requestsCount++,cn.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=sV,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete cn.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}cn.requestsCount=0;cn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",t2);else if(typeof addEventListener=="function"){const t="onpagehide"in Gr?"pagehide":"unload";addEventListener(t,t2,!1)}}function t2(){for(let t in cn.requests)cn.requests.hasOwnProperty(t)&&cn.requests[t].abort()}const cI=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,i)=>i(e,0))(),fg=Gr.WebSocket||Gr.MozWebSocket,i2=!0,oV="arraybuffer",r2=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";let cV=class extends iI{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),i=this.opts.protocols,r=r2?{}:tI(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=i2&&!r2?i?new fg(e,i):new fg(e):new fg(e,i,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType||oV,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let i=0;i<e.length;i++){const r=e[i],s=i===e.length-1;YA(r,this.supportsBinary,n=>{const a={};try{i2&&this.ws.send(n)}catch{}s&&cI(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const i=this.opts.secure?"wss":"ws";let r="";this.opts.port&&(i==="wss"&&Number(this.opts.port)!==443||i==="ws"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=sI()),this.supportsBinary||(e.b64=1);const s=nI(e),n=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(n?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(s.length?"?"+s:"")}check(){return!!fg}};const dV={websocket:cV,polling:aV},lV=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,uV=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function O1(t){const e=t,i=t.indexOf("["),r=t.indexOf("]");i!=-1&&r!=-1&&(t=t.substring(0,i)+t.substring(i,r).replace(/:/g,";")+t.substring(r,t.length));let s=lV.exec(t||""),n={},a=14;for(;a--;)n[uV[a]]=s[a]||"";return i!=-1&&r!=-1&&(n.source=e,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=pV(n,n.path),n.queryKey=hV(n,n.query),n}function pV(t,e){const i=/\/{2,9}/g,r=e.replace(i,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function hV(t,e){const i={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,n){s&&(i[s]=n)}),i}let dI=class fd extends ai{constructor(e,i={}){super(),this.writeBuffer=[],e&&typeof e=="object"&&(i=e,e=null),e?(e=O1(e),i.hostname=e.host,i.secure=e.protocol==="https"||e.protocol==="wss",i.port=e.port,e.query&&(i.query=e.query)):i.host&&(i.hostname=O1(i.host).host),$v(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=i.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=iV(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const i=Object.assign({},this.opts.query);i.EIO=eI,i.transport=e,this.id&&(i.sid=this.id);const r=Object.assign({},this.opts.transportOptions[e],this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new dV[e](r)}open(){let e;if(this.opts.rememberUpgrade&&fd.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",i=>this.onClose("transport close",i))}probe(e){let i=this.createTransport(e),r=!1;fd.priorWebsocketSuccess=!1;const s=()=>{r||(i.send([{type:"ping",data:"probe"}]),i.once("packet",p=>{if(!r)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;fd.priorWebsocketSuccess=i.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=i.name,this.emitReserved("upgradeError",g)}}))};function n(){r||(r=!0,u(),i.close(),i=null)}const a=p=>{const g=new Error("probe error: "+p);g.transport=i.name,n(),this.emitReserved("upgradeError",g)};function o(){a("transport closed")}function c(){a("socket closed")}function d(p){i&&p.name!==i.name&&n()}const u=()=>{i.removeListener("open",s),i.removeListener("error",a),i.removeListener("close",o),this.off("close",c),this.off("upgrading",d)};i.once("open",s),i.once("error",a),i.once("close",o),this.once("close",c),this.once("upgrading",d),i.open()}onOpen(){if(this.readyState="open",fd.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const i=this.upgrades.length;for(;e<i;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const i=new Error("server error");i.code=e.data,this.onError(i);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(i+=ZF(s)),r>0&&i>this.maxPayload)return this.writeBuffer.slice(0,r);i+=2}return this.writeBuffer}write(e,i,r){return this.sendPacket("message",e,i,r),this}send(e,i,r){return this.sendPacket("message",e,i,r),this}sendPacket(e,i,r,s){if(typeof i=="function"&&(s=i,i=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const n={type:e,data:i,options:r};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),e()},r=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){fd.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,i){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,i),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const i=[];let r=0;const s=e.length;for(;r<s;r++)~this.transports.indexOf(e[r])&&i.push(e[r]);return i}};dI.protocol=eI;function gV(t,e="",i){let r=t;i=i||typeof location<"u"&&location,t==null&&(t=i.protocol+"//"+i.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=i.protocol+t:t=i.host+t),/^(https?|wss?):\/\//.test(t)||(typeof i<"u"?t=i.protocol+"//"+t:t="https://"+t),r=O1(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const n=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+n+":"+r.port+e,r.href=r.protocol+"://"+n+(i&&i.port===r.port?"":":"+r.port),r}const mV=typeof ArrayBuffer=="function",fV=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,lI=Object.prototype.toString,vV=typeof Blob=="function"||typeof Blob<"u"&&lI.call(Blob)==="[object BlobConstructor]",yV=typeof File=="function"||typeof File<"u"&&lI.call(File)==="[object FileConstructor]";function aS(t){return mV&&(t instanceof ArrayBuffer||fV(t))||vV&&t instanceof Blob||yV&&t instanceof File}function nm(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let i=0,r=t.length;i<r;i++)if(nm(t[i]))return!0;return!1}if(aS(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return nm(t.toJSON(),!0);for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&nm(t[i]))return!0;return!1}function bV(t){const e=[],i=t.data,r=t;return r.data=M1(i,e),r.attachments=e.length,{packet:r,buffers:e}}function M1(t,e){if(!t)return t;if(aS(t)){const i={_placeholder:!0,num:e.length};return e.push(t),i}else if(Array.isArray(t)){const i=new Array(t.length);for(let r=0;r<t.length;r++)i[r]=M1(t[r],e);return i}else if(typeof t=="object"&&!(t instanceof Date)){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=M1(t[r],e));return i}return t}function wV(t,e){return t.data=D1(t.data,e),delete t.attachments,t}function D1(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=D1(t[i],e);else if(typeof t=="object")for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=D1(t[i],e));return t}const _V=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],SV=5;var Ve;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ve||(Ve={}));class EV{constructor(e){this.replacer=e}encode(e){return(e.type===Ve.EVENT||e.type===Ve.ACK)&&nm(e)?this.encodeAsBinary({type:e.type===Ve.EVENT?Ve.BINARY_EVENT:Ve.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let i=""+e.type;return(e.type===Ve.BINARY_EVENT||e.type===Ve.BINARY_ACK)&&(i+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(i+=e.nsp+","),e.id!=null&&(i+=e.id),e.data!=null&&(i+=JSON.stringify(e.data,this.replacer)),i}encodeAsBinary(e){const i=bV(e),r=this.encodeAsString(i.packet),s=i.buffers;return s.unshift(r),s}}function s2(t){return Object.prototype.toString.call(t)==="[object Object]"}class oS extends ai{constructor(e){super(),this.reviver=e}add(e){let i;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(e);const r=i.type===Ve.BINARY_EVENT;r||i.type===Ve.BINARY_ACK?(i.type=r?Ve.EVENT:Ve.ACK,this.reconstructor=new kV(i),i.attachments===0&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else if(aS(e)||e.base64)if(this.reconstructor)i=this.reconstructor.takeBinaryData(e),i&&(this.reconstructor=null,super.emitReserved("decoded",i));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let i=0;const r={type:Number(e.charAt(0))};if(Ve[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Ve.BINARY_EVENT||r.type===Ve.BINARY_ACK){const n=i+1;for(;e.charAt(++i)!=="-"&&i!=e.length;);const a=e.substring(n,i);if(a!=Number(a)||e.charAt(i)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(i+1)==="/"){const n=i+1;for(;++i&&!(e.charAt(i)===","||i===e.length););r.nsp=e.substring(n,i)}else r.nsp="/";const s=e.charAt(i+1);if(s!==""&&Number(s)==s){const n=i+1;for(;++i;){const a=e.charAt(i);if(a==null||Number(a)!=a){--i;break}if(i===e.length)break}r.id=Number(e.substring(n,i+1))}if(e.charAt(++i)){const n=this.tryParse(e.substr(i));if(oS.isPayloadValid(r.type,n))r.data=n;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,i){switch(e){case Ve.CONNECT:return s2(i);case Ve.DISCONNECT:return i===void 0;case Ve.CONNECT_ERROR:return typeof i=="string"||s2(i);case Ve.EVENT:case Ve.BINARY_EVENT:return Array.isArray(i)&&(typeof i[0]=="number"||typeof i[0]=="string"&&_V.indexOf(i[0])===-1);case Ve.ACK:case Ve.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class kV{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const i=wV(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const TV=Object.freeze(Object.defineProperty({__proto__:null,Decoder:oS,Encoder:EV,get PacketType(){return Ve},protocol:SV},Symbol.toStringTag,{value:"Module"}));function bs(t,e,i){return t.on(e,i),function(){t.off(e,i)}}const xV=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class uI extends ai{constructor(e,i,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=i,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[bs(e,"open",this.onopen.bind(this)),bs(e,"packet",this.onpacket.bind(this)),bs(e,"error",this.onerror.bind(this)),bs(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...i){if(xV.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(i.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;const r={type:Ve.EVENT,data:i};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof i[i.length-1]=="function"){const a=this.ids++,o=i.pop();this._registerAckCallback(a,o),r.id=a}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,i){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=i;return}const n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);i.call(this,new Error("operation has timed out"))},s);this.acks[e]=(...a)=>{this.io.clearTimeoutFn(n),i.apply(this,[null,...a])}}emitWithAck(e,...i){const r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((s,n)=>{i.push((a,o)=>r?a?n(a):s(o):s(a)),this.emit(e,...i)})}_addToQueue(e){let i;typeof e[e.length-1]=="function"&&(i=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...n)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),i&&i(s)):(this._queue.shift(),i&&i(null,...n)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const i=this._queue[0];i.pending&&!e||(i.pending=!0,i.tryCount++,this.flags=i.flags,this.emit.apply(this,i.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ve.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,i)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ve.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ve.EVENT:case Ve.BINARY_EVENT:this.onevent(e);break;case Ve.ACK:case Ve.BINARY_ACK:this.onack(e);break;case Ve.DISCONNECT:this.ondisconnect();break;case Ve.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const i=e.data||[];e.id!=null&&i.push(this.ack(e.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const r of i)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const i=this;let r=!1;return function(...s){r||(r=!0,i.packet({type:Ve.ACK,id:e,data:s}))}}onack(e){const i=this.acks[e.id];typeof i=="function"&&(i.apply(this,e.data),delete this.acks[e.id])}onconnect(e,i){this.id=e,this.recovered=i&&this._pid===i,this._pid=i,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ve.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const i=this._anyListeners;for(let r=0;r<i.length;r++)if(e===i[r])return i.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const i=this._anyOutgoingListeners;for(let r=0;r<i.length;r++)if(e===i[r])return i.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const r of i)r.apply(this,e.data)}}}function zl(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}zl.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+i:t-i}return Math.min(t,this.max)|0};zl.prototype.reset=function(){this.attempts=0};zl.prototype.setMin=function(t){this.ms=t};zl.prototype.setMax=function(t){this.max=t};zl.prototype.setJitter=function(t){this.jitter=t};class L1 extends ai{constructor(e,i){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(i=e,e=void 0),i=i||{},i.path=i.path||"/socket.io",this.opts=i,$v(this,i),this.reconnection(i.reconnection!==!1),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor((r=i.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new zl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(i.timeout==null?2e4:i.timeout),this._readyState="closed",this.uri=e;const s=i.parser||TV;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=i.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var i;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(i=this.backoff)===null||i===void 0||i.setMin(e),this)}randomizationFactor(e){var i;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(i=this.backoff)===null||i===void 0||i.setJitter(e),this)}reconnectionDelayMax(e){var i;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(i=this.backoff)===null||i===void 0||i.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new dI(this.uri,this.opts);const i=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=bs(i,"open",function(){r.onopen(),e&&e()}),n=bs(i,"error",a=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",a),e?e(a):r.maybeReconnectOnOpen()});if(this._timeout!==!1){const a=this._timeout;a===0&&s();const o=this.setTimeoutFn(()=>{s(),i.close(),i.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&o.unref(),this.subs.push(function(){clearTimeout(o)})}return this.subs.push(s),this.subs.push(n),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(bs(e,"ping",this.onping.bind(this)),bs(e,"data",this.ondata.bind(this)),bs(e,"error",this.onerror.bind(this)),bs(e,"close",this.onclose.bind(this)),bs(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(i){this.onclose("parse error",i)}}ondecoded(e){cI(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,i){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new uI(this,e,i),this.nsps[e]=r),r}_destroy(e){const i=Object.keys(this.nsps);for(const r of i)if(this.nsps[r].active)return;this._close()}_packet(e){const i=this.encoder.encode(e);for(let r=0;r<i.length;r++)this.engine.write(i[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,i){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},i);this.opts.autoUnref&&r.unref(),this.subs.push(function(){clearTimeout(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const hu={};function am(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const i=gV(t,e.path||"/socket.io"),r=i.source,s=i.id,n=i.path,a=hu[s]&&n in hu[s].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return o?c=new L1(r,e):(hu[s]||(hu[s]=new L1(r,e)),c=hu[s]),i.query&&!e.query&&(e.query=i.queryKey),c.socket(i.path,e)}Object.assign(am,{Manager:L1,Socket:uI,io:am,connect:am});const PV=t=>(e,i)=>(t.set(e,i),i),n2=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,pI=536870912,a2=pI*2,CV=(t,e)=>i=>{const r=e.get(i);let s=r===void 0?i.size:r<a2?r+1:0;if(!i.has(s))return t(i,s);if(i.size<pI){for(;i.has(s);)s=Math.floor(Math.random()*a2);return t(i,s)}if(i.size>n2)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;i.has(s);)s=Math.floor(Math.random()*n2);return t(i,s)},hI=new WeakMap,RV=PV(hI),vg=CV(RV,hI),AV=t=>t.method!==void 0&&t.method==="call",IV=t=>t.error===null&&typeof t.id=="number",OV=t=>{const e=new Map([[0,()=>{}]]),i=new Map([[0,()=>{}]]),r=new Map,s=new Worker(t);return s.addEventListener("message",({data:d})=>{if(AV(d)){const{params:{timerId:u,timerType:p}}=d;if(p==="interval"){const g=e.get(u);if(typeof g=="number"){const m=r.get(g);if(m===void 0||m.timerId!==u||m.timerType!==p)throw new Error("The timer is in an undefined state.")}else if(typeof g<"u")g();else throw new Error("The timer is in an undefined state.")}else if(p==="timeout"){const g=i.get(u);if(typeof g=="number"){const m=r.get(g);if(m===void 0||m.timerId!==u||m.timerType!==p)throw new Error("The timer is in an undefined state.")}else if(typeof g<"u")g(),i.delete(u);else throw new Error("The timer is in an undefined state.")}}else if(IV(d)){const{id:u}=d,p=r.get(u);if(p===void 0)throw new Error("The timer is in an undefined state.");const{timerId:g,timerType:m}=p;r.delete(u),m==="interval"?e.delete(g):i.delete(g)}else{const{error:{message:u}}=d;throw new Error(u)}}),{clearInterval:d=>{const u=vg(r);r.set(u,{timerId:d,timerType:"interval"}),e.set(d,u),s.postMessage({id:u,method:"clear",params:{timerId:d,timerType:"interval"}})},clearTimeout:d=>{const u=vg(r);r.set(u,{timerId:d,timerType:"timeout"}),i.set(d,u),s.postMessage({id:u,method:"clear",params:{timerId:d,timerType:"timeout"}})},setInterval:(d,u)=>{const p=vg(e);return e.set(p,()=>{d(),typeof e.get(p)=="function"&&s.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:p,timerType:"interval"}})}),s.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:p,timerType:"interval"}}),p},setTimeout:(d,u)=>{const p=vg(i);return i.set(p,d),s.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:p,timerType:"timeout"}}),p}}},MV=(t,e)=>{let i=null;return()=>{if(i!==null)return i;const r=new Blob([e],{type:"application/javascript; charset=utf-8"}),s=URL.createObjectURL(r);return i=t(s),setTimeout(()=>URL.revokeObjectURL(s)),i}},DV=`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`,gI=MV(OV,DV),mI=t=>gI().clearInterval(t),fI=(t,e)=>gI().setInterval(t,e);var LV=Object.defineProperty,NV=(t,e,i)=>e in t?LV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,y=(t,e,i)=>(NV(t,typeof e!="symbol"?e+"":e,i),i),cS=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},h=(t,e,i)=>(cS(t,e,"read from private field"),i?i.call(t):e.get(t)),R=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},I=(t,e,i,r)=>(cS(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),Xe=(t,e,i)=>(cS(t,e,"access private method"),i),ue;(function(t){t[t.MAJOR_EVENT=0]="MAJOR_EVENT",t[t.MINOR_EVENT=1]="MINOR_EVENT"})(ue||(ue={}));var q;(function(t){t.PRECALL_TEST_BEGIN="precall_begin",t.PRECALL_TEST_COMPLETE="precall_end",t.CALL_JOIN_BEGIN="call_join",t.NET_QUALITY_TEST_BEGIN="net_quality_test_begin",t.NET_QUALITY_TEST_END="net_quality_test_end",t.WEBSOCKET_CONNECTED="websocket_connected",t.TRANSPORT_CONNECTED="transport_connected",t.AUDIO_ON="audio_on",t.AUDIO_OFF="audio_off",t.VIDEO_ON="video_on",t.VIDEO_OFF="video_off",t.PARTICIPANT_ROLE="participant_role",t.PING_STAT="ping_stat",t.DISCONNECT="disconnect",t.RECONNECT_ATTEMPT="reconnect_attempt",t.SCREENSHARE_START_REQUESTED="screenshare_start_requested",t.SCREENSHARE_STARTED="screenshare_started",t.SCREENSHARE_STOPPED="screenshare_stopped",t.TAB_CHANGE="tab_change",t.BROWSER_BACKGROUNDED="browser_backgrounded",t.BROWSER_FOREGROUNDED="browser_foregrounded",t.DOMINANT_SPEAKER="dominant_speaker",t.AUDIO_DEVICES_UPDATES="audio_devices_updates",t.VIDEO_DEVICES_UPDATES="video_devices_updates",t.SPEAKER_DEVICES_UPDATES="speaker_devices_updates",t.SELECTED_MICROHPONE_UPDATE="selected_microphone_update",t.SELECTED_CAMERA_UPDATE="selected_camera_update",t.SELECTED_SPEAKER_UPDATE="selected_speaker_update",t.MEDIA_PERMISSION="camera_permission",t.LEGACY_SWITCH="legacy_switch",t.AUDIO_PLAY_FAILED="audio_play_failed",t.VIDEO_PLAY_FAILED="video_play_failed",t.AUDIO_TRACK_MUTED="audio_track_muted",t.VIDEO_TRACK_MUTED="video_track_muted",t.IVS_PLAYER_REBUFFERING="ivs_player_rebuffering",t.IVS_PLAYER_AUDIO_BLOCKED="ivs_player_audio_blocked",t.IVS_PLAYER_PLAYBACK_BLOCKED="ivs_player_playback_blocked",t.IVS_PLAYER_ERROR="ivs_player_error",t.IVS_PLAYER_RECOVERABLE_ERROR="ivs_player_recoverable_error",t.IVS_PLAYER_WORKER_ERROR="ivs_player_worker_error",t.IVS_PLAYER_NETWORK_UNAVAILABLE="ivs_player_network_unavailable",t.LIVESTREAM_LATENCY="livestream_latency",t.IVS_PLAYER_ANALYTICS_EVENT="ivs_player_analytics_event",t.IVS_PLAYER_PLAYBACK_RATE_CHANGED="ivs_player_playback_rate_changed",t.IVS_PLAYER_QUALITY_CHANGED="ivs_player_quality_changed",t.IVS_PLAYER_INITIALIZED="ivs_player_initialized"})(q||(q={}));const UV=new Map([[q.PRECALL_TEST_BEGIN,ue.MINOR_EVENT],[q.PRECALL_TEST_COMPLETE,ue.MINOR_EVENT],[q.CALL_JOIN_BEGIN,ue.MAJOR_EVENT],[q.NET_QUALITY_TEST_BEGIN,ue.MINOR_EVENT],[q.NET_QUALITY_TEST_END,ue.MINOR_EVENT],[q.WEBSOCKET_CONNECTED,ue.MINOR_EVENT],[q.TRANSPORT_CONNECTED,ue.MAJOR_EVENT],[q.AUDIO_ON,ue.MINOR_EVENT],[q.AUDIO_OFF,ue.MINOR_EVENT],[q.VIDEO_ON,ue.MINOR_EVENT],[q.VIDEO_OFF,ue.MINOR_EVENT],[q.PARTICIPANT_ROLE,ue.MINOR_EVENT],[q.PING_STAT,ue.MAJOR_EVENT],[q.DISCONNECT,ue.MAJOR_EVENT],[q.RECONNECT_ATTEMPT,ue.MAJOR_EVENT],[q.SCREENSHARE_START_REQUESTED,ue.MINOR_EVENT],[q.SCREENSHARE_STARTED,ue.MINOR_EVENT],[q.SCREENSHARE_STOPPED,ue.MINOR_EVENT],[q.TAB_CHANGE,ue.MINOR_EVENT],[q.BROWSER_BACKGROUNDED,ue.MINOR_EVENT],[q.BROWSER_FOREGROUNDED,ue.MINOR_EVENT],[q.DOMINANT_SPEAKER,ue.MINOR_EVENT],[q.AUDIO_DEVICES_UPDATES,ue.MINOR_EVENT],[q.VIDEO_DEVICES_UPDATES,ue.MINOR_EVENT],[q.SPEAKER_DEVICES_UPDATES,ue.MINOR_EVENT],[q.SELECTED_MICROHPONE_UPDATE,ue.MINOR_EVENT],[q.SELECTED_CAMERA_UPDATE,ue.MINOR_EVENT],[q.SELECTED_SPEAKER_UPDATE,ue.MINOR_EVENT],[q.MEDIA_PERMISSION,ue.MINOR_EVENT],[q.LEGACY_SWITCH,ue.MINOR_EVENT],[q.AUDIO_PLAY_FAILED,ue.MINOR_EVENT],[q.VIDEO_PLAY_FAILED,ue.MINOR_EVENT],[q.AUDIO_TRACK_MUTED,ue.MINOR_EVENT],[q.VIDEO_TRACK_MUTED,ue.MINOR_EVENT],[q.IVS_PLAYER_REBUFFERING,ue.MAJOR_EVENT],[q.IVS_PLAYER_AUDIO_BLOCKED,ue.MAJOR_EVENT],[q.IVS_PLAYER_PLAYBACK_BLOCKED,ue.MAJOR_EVENT],[q.IVS_PLAYER_ERROR,ue.MAJOR_EVENT],[q.IVS_PLAYER_RECOVERABLE_ERROR,ue.MAJOR_EVENT],[q.IVS_PLAYER_WORKER_ERROR,ue.MAJOR_EVENT],[q.IVS_PLAYER_NETWORK_UNAVAILABLE,ue.MAJOR_EVENT],[q.LIVESTREAM_LATENCY,ue.MAJOR_EVENT],[q.IVS_PLAYER_ANALYTICS_EVENT,ue.MINOR_EVENT],[q.IVS_PLAYER_PLAYBACK_RATE_CHANGED,ue.MINOR_EVENT],[q.IVS_PLAYER_QUALITY_CHANGED,ue.MINOR_EVENT],[q.IVS_PLAYER_INITIALIZED,ue.MINOR_EVENT]]);var N1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ir={},jV={get exports(){return ir},set exports(t){ir=t}},ol=typeof Reflect=="object"?Reflect:null,o2=ol&&typeof ol.apply=="function"?ol.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)},om;ol&&typeof ol.ownKeys=="function"?om=ol.ownKeys:Object.getOwnPropertySymbols?om=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:om=function(t){return Object.getOwnPropertyNames(t)};function $V(t){console&&console.warn&&console.warn(t)}var vI=Number.isNaN||function(t){return t!==t};function st(){st.init.call(this)}jV.exports=st;ir.once=BV;st.EventEmitter=st;st.prototype._events=void 0;st.prototype._eventsCount=0;st.prototype._maxListeners=void 0;var c2=10;function zv(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(st,"defaultMaxListeners",{enumerable:!0,get:function(){return c2},set:function(t){if(typeof t!="number"||t<0||vI(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c2=t}});st.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};st.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||vI(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function yI(t){return t._maxListeners===void 0?st.defaultMaxListeners:t._maxListeners}st.prototype.getMaxListeners=function(){return yI(this)};st.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r=t==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var n;if(e.length>0&&(n=e[0]),n instanceof Error)throw n;var a=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw a.context=n,a}var o=s[t];if(o===void 0)return!1;if(typeof o=="function")o2(o,this,e);else for(var c=o.length,d=EI(o,c),i=0;i<c;++i)o2(d[i],this,e);return!0};function bI(t,e,i,r){var s,n,a;if(zv(i),n=t._events,n===void 0?(n=t._events=Object.create(null),t._eventsCount=0):(n.newListener!==void 0&&(t.emit("newListener",e,i.listener?i.listener:i),n=t._events),a=n[e]),a===void 0)a=n[e]=i,++t._eventsCount;else if(typeof a=="function"?a=n[e]=r?[i,a]:[a,i]:r?a.unshift(i):a.push(i),s=yI(t),s>0&&a.length>s&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,$V(o)}return t}st.prototype.addListener=function(t,e){return bI(this,t,e,!1)};st.prototype.on=st.prototype.addListener;st.prototype.prependListener=function(t,e){return bI(this,t,e,!0)};function zV(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function wI(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},s=zV.bind(r);return s.listener=i,r.wrapFn=s,s}st.prototype.once=function(t,e){return zv(e),this.on(t,wI(this,t,e)),this};st.prototype.prependOnceListener=function(t,e){return zv(e),this.prependListener(t,wI(this,t,e)),this};st.prototype.removeListener=function(t,e){var i,r,s,n,a;if(zv(e),r=this._events,r===void 0)return this;if(i=r[t],i===void 0)return this;if(i===e||i.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if(typeof i!="function"){for(s=-1,n=i.length-1;n>=0;n--)if(i[n]===e||i[n].listener===e){a=i[n].listener,s=n;break}if(s<0)return this;s===0?i.shift():FV(i,s),i.length===1&&(r[t]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this};st.prototype.off=st.prototype.removeListener;st.prototype.removeAllListeners=function(t){var e,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var s=Object.keys(i),n;for(r=0;r<s.length;++r)n=s[r],n!=="removeListener"&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=i[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this};function _I(t,e,i){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?i?[s.listener||s]:[s]:i?VV(s):EI(s,s.length)}st.prototype.listeners=function(t){return _I(this,t,!0)};st.prototype.rawListeners=function(t){return _I(this,t,!1)};st.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):SI.call(t,e)};st.prototype.listenerCount=SI;function SI(t){var e=this._events;if(e!==void 0){var i=e[t];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}st.prototype.eventNames=function(){return this._eventsCount>0?om(this._events):[]};function EI(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}function FV(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function VV(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}function BV(t,e){return new Promise(function(i,r){function s(a){t.removeListener(e,n),r(a)}function n(){typeof t.removeListener=="function"&&t.removeListener("error",s),i([].slice.call(arguments))}kI(t,e,n,{once:!0}),e!=="error"&&HV(t,s,{once:!0})})}function HV(t,e,i){typeof t.on=="function"&&kI(t,"error",e,i)}function kI(t,e,i,r){if(typeof t.on=="function")r.once?t.once(e,i):t.on(e,i);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(n){r.once&&t.removeEventListener(e,s),i(n)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var d2;(function(t){t.CHROMIUM="chromum",t.FIREFOX="firefox",t.SAFARI="safari"})(d2||(d2={}));var Kp;(function(t){t.DEV="dev",t.STAGING="staging",t.PRODUCTION="production"})(Kp||(Kp={}));var Fr;(function(t){t.AUDIO="AUDIO",t.VIDEO="VIDEO",t.SPEAKER="SPEAKER"})(Fr||(Fr={}));var Ga;(function(t){t[t.INIT=0]="INIT",t[t.ACCEPTED=1]="ACCEPTED",t[t.DENIED=2]="DENIED",t[t.SYS_DENIED=3]="SYS_DENIED",t[t.FAILED=4]="FAILED",t[t.NOTFOUND=5]="NOTFOUND",t[t.NOT_APPLICABLE=6]="NOT_APPLICABLE"})(Ga||(Ga={}));class GV{constructor(){y(this,"events"),this.events=[]}add(e){this.events.push(e)}flush(){return{entries:this.events.splice(0,25)}}}class WV extends ir{constructor({logger:e,peerId:i,env:r}){super(),y(this,"logger"),y(this,"peerId"),y(this,"eventStore"),y(this,"apiEndpoint"),this.logger=e,this.peerId=i,r===Kp.PRODUCTION?this.apiEndpoint="https://collector.prod.da.dyte.io/api/v1/message":this.apiEndpoint="https://collector.non-prod.da.dyte.io/api/v1/message",this.eventStore=new GV}async sendEventsChunkToServer(e){var i;const r={payload:e,peerId:this.peerId};try{return await fetch(this.apiEndpoint,{method:"POST",body:JSON.stringify(r)}),!0}catch(s){return this.logger.error("callStats::sendEventsChunkToServer::catch",{error:s}),(i=e.entries)==null||i.forEach(n=>{this.eventStore.add(n)}),!1}}callEvent(e){e.timestamp=new Date,this.eventStore.add(e),this.emit(e.event,e.metaData),UV.get(e.event)===ue.MAJOR_EVENT&&this.flush()}async flush(){var e;const i=this.eventStore.flush();return(e=i==null?void 0:i.entries)!=null&&e.length?(await this.sendEventsChunkToServer(i),!0):!1}}class Qn{constructor(e){y(this,"pc1"),y(this,"pc2"),y(this,"constrainVideoBitrateKbps"),y(this,"constrainOfferToRemoveVideoFec",!1),y(this,"iceCandidateFilter");const i=new RTCPeerConnection(e),r=new RTCPeerConnection(e);this.pc1=i,this.pc2=r,this.iceCandidateFilter=Qn.noFilter,this.pc1.addEventListener("icecandidate",this.onIceCandidate.bind(this,this.pc2)),this.pc2.addEventListener("icecandidate",this.onIceCandidate.bind(this,this.pc1))}static parseCandidate(e){const i="candidate:",r=e.indexOf(i)+i.length,s=e.substr(r).split(" ");return{type:s[7],protocol:s[2],address:s[4]}}static isNotHostCandidate(e){return e.type!=="host"}static isHost(e){return e.type==="host"}static isRelay(e){return e.type==="relay"}static isReflexive(e){return e.type==="srflx"}static noFilter(e){return!0}onIceCandidate(e,i){if(i.candidate){const r=Qn.parseCandidate(i.candidate.candidate);this.iceCandidateFilter(r)&&e.addIceCandidate(i.candidate)}}setIceCandidateFilter(e){this.iceCandidateFilter=e}constrainVideoBitrate(e){this.constrainVideoBitrateKbps=e}disableVideoFec(){this.constrainOfferToRemoveVideoFec=!0}gotOffer(e){this.constrainOfferToRemoveVideoFec&&(e.sdp=e.sdp.replace(/(m=video 1 [^\r]+)(116 117)(\r\n)/g,`$1\r
`),e.sdp=e.sdp.replace(/a=rtpmap:116 red\/90000\r\n/g,""),e.sdp=e.sdp.replace(/a=rtpmap:117 ulpfec\/90000\r\n/g,""),e.sdp=e.sdp.replace(/a=rtpmap:98 rtx\/90000\r\n/g,""),e.sdp=e.sdp.replace(/a=fmtp:98 apt=116\r\n/g,"")),this.pc1.setLocalDescription(e),this.pc2.setRemoteDescription(e),this.pc2.createAnswer().then(this.gotAnswer.bind(this),this.reportFatal.bind(this))}gotAnswer(e){this.constrainVideoBitrateKbps&&(e.sdp=e.sdp.replace(/a=mid:video\r\n/g,`a=mid:video\r
b=AS:${this.constrainVideoBitrateKbps}\r
`)),this.pc2.setLocalDescription(e),this.pc1.setRemoteDescription(e)}establishConnection(){this.pc1.createOffer().then(this.gotOffer.bind(this),this.reportFatal.bind(this))}reportFatal(e){console.error("Error:",e)}async getRoundTripTime(){const[e,i]=await Promise.all([this.pc1.getStats(),this.pc2.getStats()]);let r,s;if(e.forEach(n=>{n.type==="candidate-pair"&&n.nominated===!0&&n.bytesSent>0&&(r=n)}),i.forEach(n=>{n.type==="candidate-pair"&&n.nominated===!0&&n.bytesReceived>0&&(s=n)}),r&&s)try{if(r.currentRoundTripTime&&s.currentRoundTripTime)return{rtt:r.currentRoundTripTime,backendRTT:s.currentRoundTripTime};const n=(s.lastPacketReceivedTimestamp-r.lastPacketSentTimestamp)/1e3;return{rtt:n,backendRTT:n}}catch{return}}close(){this.pc1.close(),this.pc2.close()}}class TI extends ir{constructor(e){super(),y(this,"call"),y(this,"timeOut"),this.call=new Qn(e)}start(e=1e4){this.call.establishConnection(),this.timeOut=setTimeout(this.testFailed.bind(this),e)}testComplete(e){clearTimeout(this.timeOut),this.call.close(),this.emit("done",e)}testFailed(e){console.warn("Test failed, ",e),this.call.close(),this.emit("failed",e)}}const qV=8,JV=1/1e3;class KV extends TI{constructor(e){super(e),y(this,"senderChannel"),y(this,"recieveChannel"),y(this,"startTime"),y(this,"lastBitrateMeasureTime"),y(this,"sentPayloadBytes",0),y(this,"recievedPayloadBytes",0),y(this,"lastReceivedPayloadBytes",0),y(this,"stopSending",!1),y(this,"testProgress",0),y(this,"samplePacket",""),y(this,"finalBitrateSum",0),y(this,"bitRateSampels",0),y(this,"maxNumberOfPacketsToSend",0),y(this,"bytesToKeepBuffered",0),y(this,"testDurationSeconds",5),this.call.setIceCandidateFilter(Qn.isNotHostCandidate),this.senderChannel=this.call.pc1.createDataChannel(null);for(let i=0;i<1024*256;i+=1)this.samplePacket+="h";this.maxNumberOfPacketsToSend=1,this.bytesToKeepBuffered=1024*this.maxNumberOfPacketsToSend,this.testDurationSeconds=4,this.senderChannel.addEventListener("open",this.sendingStep.bind(this)),this.call.pc2.addEventListener("datachannel",this.onRecieverChannel.bind(this))}sendingStep(){const e=new Date;this.startTime||(this.startTime=e,this.lastBitrateMeasureTime=e);for(let r=0;r!==this.maxNumberOfPacketsToSend&&!(this.senderChannel.bufferedAmount>=this.bytesToKeepBuffered);r+=1){this.sentPayloadBytes+=this.samplePacket.length;try{this.senderChannel.send(this.samplePacket)}catch{}}const i=e.getTime()-this.startTime.getTime();i>=1e3*this.testDurationSeconds?(this.stopSending=!0,this.testProgress=100):(this.testProgress=i/(10*this.testDurationSeconds),setTimeout(this.sendingStep.bind(this),1))}onMessageRecieved(e){this.recievedPayloadBytes+=e.data.length;const i=new Date,r=i.getTime()-this.lastBitrateMeasureTime.getTime();if(r>=1e3){const s=(this.recievedPayloadBytes-this.lastReceivedPayloadBytes)*qV/(r/1e3);this.finalBitrateSum+=s,this.bitRateSampels+=1,this.lastReceivedPayloadBytes=this.recievedPayloadBytes,this.lastBitrateMeasureTime=i}if(this.stopSending&&this.sentPayloadBytes===this.recievedPayloadBytes){const s=this.finalBitrateSum/this.bitRateSampels;this.testComplete({throughput:Math.round(s*JV)})}}testComplete(e){this.call.getRoundTripTime().then(({rtt:i,backendRTT:r})=>super.testComplete({RTT:i,backendRTT:r,throughput:e.throughput}))}onRecieverChannel(e){this.recieveChannel=e.channel,this.recieveChannel.addEventListener("message",this.onMessageRecieved.bind(this))}}class dS extends TI{constructor(e,i=Qn.noFilter){super(e),y(this,"ch1"),y(this,"ch2"),this.call.setIceCandidateFilter(i);const r=this.call.pc1.createDataChannel(null);this.ch1=r,r.addEventListener("open",()=>{r.send("hello")}),r.addEventListener("message",this.onCh1Recieve.bind(this)),this.call.pc2.addEventListener("datachannel",this.dataChannelHandler.bind(this))}onCh1Recieve(e){e.data!=="world"?this.hangup("Invalid data transmitted."):this.testComplete({connectivity:!0})}onCh2Recieve(e){if(e.data!=="hello")this.hangup("Invalid data transmitted.");else try{this.ch2.send("world")}catch{}}dataChannelHandler(e){const i=e.channel;this.ch2=i,i.addEventListener("message",this.onCh2Recieve.bind(this))}hangup(e){this.testFailed(e)}}class YV extends dS{constructor(e){super(e,Qn.isHost)}}class QV extends dS{constructor(e){super(e,Qn.isRelay)}}class ZV extends dS{constructor(e){super(e,Qn.isReflexive)}}class XV{constructor(){y(this,"ipInformation",null)}async getIPDetails({peerId:e}){var i;if(!this.ipInformation){try{const s=await(await fetch("https://media-location.dyte.io")).json();if(((i=s.loc)==null?void 0:i.length)>5)return this.ipInformation=s,s;throw Error("Insufficient data")}catch{}const r=await fetch(`https://location-service.dyte.io/?token=3c493932b0624c&peerId=${e}`,{method:"POST"});this.ipInformation=await r.json()}return this.ipInformation}}const lS=new XV,l2=[{urls:"turn:turn.dyte.in:443?transport=tcp",username:"dyte",credential:"dytein",credentialType:"password"},{urls:"turn:turn.dyte.in:3478?transport=udp",username:"dyte",credential:"dytein",credentialType:"password"}];function eB(t){const[e,i]=t.split(",");return{coords:{latitude:Number(e),longitude:Number(i)}}}class xI{constructor(){y(this,"transport"),y(this,"candidatePair"),y(this,"outboundVideoRtp",new Map),y(this,"inboundVideoRtp",new Map),y(this,"outboundAudioRtp",new Map),y(this,"inboundAudioRtp",new Map),y(this,"remoteInboundRtp",new Map),y(this,"producerStreamMap",new Map),y(this,"consumerStreamMap",new Map),y(this,"staleProducerStreamMap",!1),y(this,"staleConsumerStreamMap",!1)}}class PI{constructor(){y(this,"outboundProducerMap",new Map),y(this,"inboundConsumerMap",new Map),y(this,"consumerPeerIdMap",new Map),y(this,"overallProducingTransportsStatsMap",{}),y(this,"overallConsumingTransportsStatsMap",{}),y(this,"overallConsumersStatsMap",{}),y(this,"overallProducersStatsMap",{}),y(this,"consumerIdsWithFreezedVideo",new Set),y(this,"consumerIdsWithFreezedAudio",new Set),y(this,"producerIdsWithFreezedVideo",new Set),y(this,"producerIdsWithFreezedAudio",new Set),y(this,"freezedProducingTransportIds",new Set),y(this,"freezedConsumingTransportIds",new Set),y(this,"ipDetails"),y(this,"callStatsInstance")}async registerProducer(e){await this.generateProducerStreamMap(e),e.observer.on("close",this.deregisterProducer.bind(this,e))}processInboundConsumerVideoStats(e,i,r){var s,n;const a=((n=(s=this==null?void 0:this.callStatsInstance)==null?void 0:s.consumerSharedMediaStatesMap)==null?void 0:n.get(e))||{};i.totalVideoPacketsReceived===r.packetsReceived?(this.consumerIdsWithFreezedVideo.add(e),this.callStatsInstance&&a.video&&(this.callStatsInstance.logger.debug("callstats::measurements::consumerVideoFreezed",{consumerId:e}),this.callStatsInstance.eventHandler.emit("consumer_video_status","pause",e))):(i.totalVideoPacketsReceived=r.packetsReceived,this.consumerIdsWithFreezedVideo.has(e)&&(this.consumerIdsWithFreezedVideo.delete(e),this.callStatsInstance&&a.video&&(this.callStatsInstance.logger.debug("callstats::measurements::consumerVideoDefreezed",{consumerId:e}),this.callStatsInstance.eventHandler.emit("consumer_video_status","resume",e))))}processInboundConsumerAudioStats(e,i,r){var s,n;const a=((n=(s=this==null?void 0:this.callStatsInstance)==null?void 0:s.consumerSharedMediaStatesMap)==null?void 0:n.get(e))||{};i.totalAudioPacketsReceived===r.packetsReceived?(this.consumerIdsWithFreezedAudio.add(e),this.callStatsInstance&&a.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::consumerAudioFreezed",{consumerId:e}),this.callStatsInstance.eventHandler.emit("consumer_audio_status","pause",e))):(i.totalAudioPacketsReceived=r.packetsReceived,this.consumerIdsWithFreezedAudio.has(e)&&(this.consumerIdsWithFreezedAudio.delete(e),this.callStatsInstance&&a.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::consumerAudioDefreezed",{consumerId:e}),this.callStatsInstance.eventHandler.emit("consumer_audio_status","resume",e))))}processOutboundProducerVideoStats(e,i,r){var s;const n=((s=this==null?void 0:this.callStatsInstance)==null?void 0:s.currentUserMediaStates)||{};i.totalVideoPacketsSent===r.packetsSent?(this.producerIdsWithFreezedVideo.add(e),this.callStatsInstance&&n.video&&(this.callStatsInstance.logger.debug("callStats::measurements::producerVideoFreezed",{producerId:e}),this.callStatsInstance.eventHandler.emit("producer_video_status","pause",e))):(i.totalVideoPacketsSent=r.packetsSent,this.producerIdsWithFreezedVideo.has(e)&&(this.producerIdsWithFreezedVideo.delete(e),this.callStatsInstance&&n.video&&(this.callStatsInstance.logger.debug("callStats::measurements::producerVideoDefreezed",{producerId:e}),this.callStatsInstance.eventHandler.emit("producer_video_status","resume",e))))}processOutboundProducerAudioStats(e,i,r){var s;const n=((s=this==null?void 0:this.callStatsInstance)==null?void 0:s.currentUserMediaStates)||{};i.totalAudioPacketsSent===r.packetsSent?(this.producerIdsWithFreezedAudio.add(e),this.callStatsInstance&&n.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::producerAudioFreezed",{producerId:e}),this.callStatsInstance.eventHandler.emit("producer_audio_status","pause",e))):(i.totalAudioPacketsSent=r.packetsSent,this.producerIdsWithFreezedAudio.has(e)&&(this.producerIdsWithFreezedAudio.delete(e),this.callStatsInstance&&n.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::producerAudioDefreezed",{producerId:e}),this.callStatsInstance.eventHandler.emit("producer_audio_status","resume",e))))}processProducingTransportStats(e,i,r){var s;const n=((s=this==null?void 0:this.callStatsInstance)==null?void 0:s.currentUserMediaStates)||{},{audio:a,video:o,screen:c}=n,d=a||o||c;i.totalPacketsSent===r.packetsSent?(this.freezedProducingTransportIds.add(e),this.callStatsInstance&&d&&(this.callStatsInstance.logger.debug("callStats::measurements::producingTransportFreezed",{transportId:e}),this.callStatsInstance.eventHandler.emit("producing_transport_status","pause",e))):(i.totalPacketsSent=r.packetsSent,this.freezedProducingTransportIds.has(e)&&(this.freezedProducingTransportIds.delete(e),this.callStatsInstance&&d&&(this.callStatsInstance.logger.debug("callStats::measurements::producingTransportDefreezed",{transportId:e}),this.callStatsInstance.eventHandler.emit("producing_transport_status","resume",e))))}processConsumingTransportStats(e,i,r){var s,n;const a=!!Array.from(((n=(s=this==null?void 0:this.callStatsInstance)==null?void 0:s.consumerSharedMediaStatesMap)==null?void 0:n.values())||[]).reduce((o,c)=>o||c.audio||c.video||c.screen,!1);i.totalPacketsReceived===r.packetsSent?(this.freezedConsumingTransportIds.add(e),this.callStatsInstance&&a&&(this.callStatsInstance.logger.debug("callStats::measurements::consumingTransportFreezed",{transportId:e}),this.callStatsInstance.eventHandler.emit("consuming_transport_status","pause",e))):(i.totalPacketsReceived=r.packetsSent,this.freezedConsumingTransportIds.has(e)&&(this.freezedConsumingTransportIds.delete(e),this.callStatsInstance&&a&&(this.callStatsInstance.logger.debug("callStats::measurements::consumingTransportDefreezed",{transportId:e}),this.callStatsInstance.eventHandler.emit("consuming_transport_status","resume",e))))}async registerConsumer(e){await this.generateConsumerStreamMap(e),this.consumerPeerIdMap.set(e.id,{producerId:e.producerId,peerId:e.appData.peerId,appData:e.appData}),e.observer.on("close",this.deregisterConsumer.bind(this,e))}async generateProducerStreamMap(e,i=!1){const r=await e.getStats(),s=i?this.getProducerStatsFromReport(this.parseRTCReport(r,["outbound-rtp","remote-inbound-rtp"],!1,e.id))[0]:void 0;for(const n of r.values())switch(n.type){case"outbound-rtp":{this.outboundProducerMap.set(n.id,e.id);break}}return s}async generateConsumerStreamMap(e,i=!1){const r=await e.getStats(),s=i?this.getConsumerStatsFromReport(this.parseRTCReport(r,["inbound-rtp"],!1,e.id))[0]:void 0;for(const n of r.values())switch(n.type){case"inbound-rtp":{this.inboundConsumerMap.set(n.id,e.id);break}}return s}deregisterProducer(e){this.outboundProducerMap.forEach((i,r)=>{i===e.id&&this.outboundProducerMap.delete(r)})}deregisterConsumer(e){this.inboundConsumerMap.forEach((i,r)=>{i===e.id&&this.inboundConsumerMap.delete(r)}),this.consumerPeerIdMap.delete(e.id)}parseRTCReport(e,i=[],r=!1,s=void 0,n=void 0){const a=e,o=new xI,c=i.length?new Set(i):void 0;for(const d of a.values()){if(c){if(c.size===0)break;if(c.has(d.type))r&&c.delete(d.type);else continue}switch(d.type){case"candidate-pair":{if(d.nominated===!0||d.selected===!0){const u=d,p={bytesReceived:u.bytesReceived,bytesSent:u.bytesSent,currentRoundTripTime:u.currentRoundTripTime,totalRoundTripTime:u.totalRoundTripTime,availableOutgoingBitrate:u.availableOutgoingBitrate};o.candidatePair=p;break}break}case"transport":{const u=d;n&&(n.producing&&(this.overallProducingTransportsStatsMap[n.id]||(this.overallProducingTransportsStatsMap[n.id]={totalPacketsSent:0})),n.consuming&&(this.overallConsumingTransportsStatsMap[n.id]||(this.overallConsumingTransportsStatsMap[n.id]={totalPacketsReceived:0})));const p={bytesReceived:u.bytesReceived,bytesSent:u.bytesSent,packetsSent:u.packetsSent,packetsReceived:u.packetsReceived,dtlsCipher:u.dtlsCipher,dtlsState:u.dtlsState,iceRole:u.iceRole};if(o.transport=p,n){if(n.producing){const g=this.overallProducingTransportsStatsMap[n.id];this.processProducingTransportStats(n.id,g,p)}if(n.consuming){const g=this.overallConsumingTransportsStatsMap[n.id];this.processConsumingTransportStats(n.id,g,p)}}break}case"remote-inbound-rtp":{const u=d,p={jitter:u.jitter,fractionLost:u.fractionLost,roundTripTime:u.roundTripTime,roundTripTimeMeasurements:u.roundTripTimeMeasurements,totalRoundTripTime:u.totalRoundTripTime,packetsLost:u.packetsLost};o.remoteInboundRtp.set(u.localId,p);break}case"outbound-rtp":{const u=d,p=s||this.outboundProducerMap.get(d.id);this.overallProducersStatsMap[p]||(this.overallProducersStatsMap[p]={totalVideoPacketsSent:0,totalAudioPacketsSent:0});const g=this.overallProducersStatsMap[p];if(["video","audio"].includes(u.mediaType)){if(!this.outboundProducerMap.has(d.id)){o.staleProducerStreamMap=!0,c&&c.delete("outbound-rtp");break}o.producerStreamMap.has(p)||o.producerStreamMap.set(p,{outboundVideoRtpId:[],outboundAudioRtpId:[]});const m={bytesSent:u.bytesSent,packetsSent:u.packetsSent,nackCount:u.nackCount};if(u.mediaType==="video"){if(u.decoderImplementation==="unknown")break;const f=u,b={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesEncoded:f.framesEncoded,framesDropped:f.framesDropped,framesPerSecond:f.framesPerSecond,framesSent:f.framesSent,keyFramesEncoded:f.keyFramesEncoded,firCount:f.firCount,encoderImplementation:f.encoderImplementation,hugeFramesSent:f.hugeFramesSent,pliCount:f.pliCount,qpSum:f.qpSum,qualityLimitationDurations:f.qualityLimitationDurations,qualityLimitationReason:f.qualityLimitationReason,qualityLimitationResolutionChanges:f.qualityLimitationResolutionChanges,totalEncodeTime:f.targetBitrate,totalPacketSendDelay:f.totalPacketSendDelay,retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundVideoRtp.set(d.id,b),o.producerStreamMap.get(p).outboundVideoRtpId.push(d.id),this.processOutboundProducerVideoStats(p,g,b)}else if(u.mediaType==="audio"){const f=u,b={retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundAudioRtp.set(d.id,b),o.producerStreamMap.get(p).outboundAudioRtpId.push(d.id),this.processOutboundProducerAudioStats(p,g,b)}}break}case"inbound-rtp":{const u=d,p=s||this.inboundConsumerMap.get(d.id);if(u.ssrc===1234)break;this.overallConsumersStatsMap[p]||(this.overallConsumersStatsMap[p]={totalVideoPacketsReceived:0,totalAudioPacketsReceived:0});const g=this.overallConsumersStatsMap[p];if(["video","audio"].includes(u.mediaType)){if(!this.inboundConsumerMap.has(d.id)){o.staleConsumerStreamMap=!0,c&&c.delete("inbound-rtp");break}o.consumerStreamMap.has(p)||o.consumerStreamMap.set(p,{inboundVideoRtpId:[],inboundAudioRtpId:[]});const m={bytesReceived:u.bytesReceived,packetsReceived:u.packetsReceived,packetsLost:u.packetsLost,jitter:u.jitter,nackCount:u.nackCount};if(u.mediaType==="video"){if(u.decoderImplementation==="unknown")break;const f=u,b={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesDecoded:f.framesDecoded,framesDropped:f.framesDropped,framesPerSecond:f.framesPerSecond,framesReceived:f.framesReceived,keyFramesDecoded:f.keyFramesDecoded,firCount:f.firCount,decoderImplementation:f.decoderImplementation,...m};o.inboundVideoRtp.set(d.id,b),o.consumerStreamMap.get(p).inboundVideoRtpId.push(d.id),this.processInboundConsumerVideoStats(p,g,b)}else if(u.mediaType==="audio"){const f=u,b={audioLevel:f.audioLevel,concealedSampels:f.concealedSampels,concealmentEvents:f.concealmentEvents,jitterBufferDelay:f.jitterBufferDelay,jitterBufferEmittedCount:f.jitterBufferEmittedCount,totalAudioEnergy:f.totalAudioEnergy,totalSamplesDuration:f.totalSamplesDuration,totalSamplesReceived:f.totalSamplesReceived,...m};o.inboundAudioRtp.set(d.id,b),o.consumerStreamMap.get(p).inboundAudioRtpId.push(d.id),this.processInboundConsumerAudioStats(p,g,b)}}break}}}if(o.outboundVideoRtp.forEach((d,u)=>{d.remoteData=o.remoteInboundRtp.get(u)}),o.outboundAudioRtp.forEach((d,u)=>{d.remoteData=o.remoteInboundRtp.get(u)}),o.candidatePair&&(o.transport?(o.transport.totalRoundTripTime=o.candidatePair.totalRoundTripTime,o.transport.availableOutgoingBitrate=o.candidatePair.availableOutgoingBitrate,o.transport.roundTripTime=o.candidatePair.currentRoundTripTime):o.transport={bytesReceived:o.candidatePair.bytesReceived,bytesSent:o.candidatePair.bytesSent,totalRoundTripTime:o.candidatePair.totalRoundTripTime,availableOutgoingBitrate:o.candidatePair.availableOutgoingBitrate,roundTripTime:o.candidatePair.currentRoundTripTime}),o.transport&&!o.transport.roundTripTime){let d=0,u=0;o.remoteInboundRtp.forEach((p,g)=>{p.roundTripTime&&p.roundTripTime>d&&(d=p.roundTripTime,u=p.totalRoundTripTime)}),o.transport.roundTripTime=d,o.transport.totalRoundTripTime=u}return o}async getProducersReport(e){const i=e.map(r=>this.generateProducerStreamMap(r,!0));return i.length>0?Promise.all(i):void 0}async getConsumersReport(e){const i=e.map(r=>this.generateConsumerStreamMap(r,!0));return i.length>0?Promise.all(i):void 0}async getTransportReport(e){return e.getStats()}async getProcessedStats(e,i,r){const s=await this.getTransportReport(e),n={producing:r,consuming:i,id:e.id},a=s,o=this.parseRTCReport(a,["transport","candidate-pair","inbound-rtp","outbound-rtp","remote-inbound-rtp"],!1,void 0,n);if(!o)return;const c={stats:o.transport,transportId:e.id,consuming:i,producing:r},d=o.staleProducerStreamMap?void 0:this.getProducerStatsFromReport(o),u=o.staleConsumerStreamMap?void 0:this.getConsumerStatsFromReport(o);return{transportReport:c,producerReport:d,consumerReport:u}}getProducerStatsFromReport(e){const i=[];try{e.producerStreamMap.forEach((r,s)=>{var n,a;i.push({producerId:s,videoStats:r.outboundVideoRtpId.map(o=>e.outboundVideoRtp.get(o)),audioStats:r.outboundAudioRtpId.map(o=>e.outboundAudioRtp.get(o)),appData:((a=(n=this.callStatsInstance.producers)==null?void 0:n.get(s))==null?void 0:a.appData)||null})})}catch(r){this.callStatsInstance.logger.error("callStats::measurements::getProducerStatsFromReport",{error:{reason:r.reason,message:r.message}})}return i}getConsumerStatsFromReport(e){const i=[];try{e.consumerStreamMap.forEach((r,s)=>{const{peerId:n,producerId:a,appData:o}=this.consumerPeerIdMap.get(s);i.push({consumerId:s,peerId:n,producerId:a,appData:o,videoStats:r.inboundVideoRtpId.map(c=>e.inboundVideoRtp.get(c)),audioStats:r.inboundAudioRtpId.map(c=>e.inboundAudioRtp.get(c))})})}catch(r){console.error("getConsumersReport: ",r,e)}return i}async getUserLocation(){return new Promise((e,i)=>{try{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{e(r)}):i()}catch(r){i(r)}})}async getConnectivity(e){try{const i={iceServers:e||l2},r=new Promise((d,u)=>{try{const p=new YV(i);p.addListener("done",d),p.addListener("failed",()=>{d({connectivity:!1})}),p.start(2e3)}catch(p){u(p)}}),s=new Promise((d,u)=>{try{const p=new QV(i);p.addListener("done",d),p.addListener("failed",()=>{d({connectivity:!1})}),p.start(2e3)}catch(p){u(p)}}),n=new Promise((d,u)=>{try{const p=new ZV(i);p.addListener("done",d),p.addListener("failed",()=>{d({connectivity:!1})}),p.start(2e3)}catch(p){u(p)}}),[a,o,c]=await Promise.all([r,s,n]);return{host:a==null?void 0:a.connectivity,relay:o==null?void 0:o.connectivity,reflexive:c==null?void 0:c.connectivity}}catch{return{host:!1,relay:!1,reflexive:!1}}}async getThroughput(e){try{const i=await new Promise((r,s)=>{try{const n={iceServers:e||l2},a=new KV(n);a.addListener("done",r),a.addListener("failed",s),a.start(1e4)}catch(n){s(n)}});return{throughput:i.throughput,fractionalLoss:0,RTT:i.RTT,jitter:0,backendRTT:i.backendRTT}}catch{return}}async getIPDetails(){var e;try{return this.ipDetails||(this.ipDetails=await lS.getIPDetails({peerId:(e=this.callStatsInstance)==null?void 0:e.peerId})),this.ipDetails}catch{return}}async getNetworkQuality(e){const[i,r]=await Promise.all([this.getConnectivity(e),this.getThroughput(e)]);return{connectivity:i,throughput:r==null?void 0:r.throughput,fractionalLoss:r==null?void 0:r.fractionalLoss,RTT:r==null?void 0:r.RTT,jitter:r==null?void 0:r.jitter,backendRTT:r==null?void 0:r.backendRTT}}async getNetworkInfo(e){var i;const[r,s,n]=await Promise.all([this.getConnectivity(e),this.getThroughput(e),this.getIPDetails()]);return{ipDetails:n,effectiveNetworkType:(i=navigator.connection)==null?void 0:i.effectiveType,location:n.loc?eB(n.loc):void 0,turnConnectivity:r?r.host||r.relay||r.reflexive:!1,connectivity:r,throughput:s==null?void 0:s.throughput,fractionalLoss:s==null?void 0:s.fractionalLoss,RTT:s==null?void 0:s.RTT,jitter:s==null?void 0:s.jitter,backendRTT:s==null?void 0:s.backendRTT}}}let tB=class extends PI{};class CI extends PI{constructor(){super(...arguments),y(this,"producerMap",new Map),y(this,"consumerMap",new Map)}async registerProducer(e){this.producerMap.set(e.id,e),await this.generateProducerStreamMap(e),e.observer.on("close",this.deregisterProducer.bind(this,e))}async registerConsumer(e){this.consumerMap.set(e.id,e),await this.generateConsumerStreamMap(e),this.consumerPeerIdMap.set(e.id,{producerId:e.producerId,peerId:e.appData.peerId,appData:e.appData}),e.observer.on("close",this.deregisterConsumer.bind(this,e))}async generateConsumerStreamMap(e,i=!1){const r=await e.getStats(),s=this.parseRTCReport(r,["inbound-rtp"],!1,e.id),n=[...s.consumerStreamMap.values()][0],a=i?this.getConsumerStatsFromParsedConsumerStats(s,n,e.id):void 0;for(const o of r.values())switch(o.type){case"inbound-rtp":{this.inboundConsumerMap.set(o.id,e.id);break}}return a}deregisterProducer(e){this.producerMap.delete(e.id),this.outboundProducerMap.forEach((i,r)=>{i===e.id&&this.outboundProducerMap.delete(r)})}deregisterConsumer(e){this.consumerMap.delete(e.id),this.inboundConsumerMap.forEach((i,r)=>{i===e.id&&this.inboundConsumerMap.delete(r)}),this.consumerPeerIdMap.delete(e.id)}parseRTCReport(e,i=[],r=!1,s=void 0,n=void 0){const a=e,o=new xI,c=i.length?new Set(i):void 0;for(const d of a.values()){if(c){if(c.size===0)break;if(c.has(d.type))r&&c.delete(d.type);else continue}switch(d.type){case"candidate-pair":{if(d.nominated===!0||d.selected===!0){const u=d,p={bytesReceived:u.bytesReceived,bytesSent:u.bytesSent,currentRoundTripTime:u.currentRoundTripTime,totalRoundTripTime:u.totalRoundTripTime,availableOutgoingBitrate:u.availableOutgoingBitrate};o.candidatePair=p;break}break}case"transport":{const u=d;n&&(n.producing&&(this.overallProducingTransportsStatsMap[n.id]||(this.overallProducingTransportsStatsMap[n.id]={totalPacketsSent:0})),n.consuming&&(this.overallConsumingTransportsStatsMap[n.id]||(this.overallConsumingTransportsStatsMap[n.id]={totalPacketsReceived:0})));const p={bytesReceived:u.bytesReceived,bytesSent:u.bytesSent,packetsSent:u.packetsSent,packetsReceived:u.packetsReceived,dtlsCipher:u.dtlsCipher,dtlsState:u.dtlsState,iceRole:u.iceRole};if(o.transport=p,n){if(n.producing){const g=this.overallProducingTransportsStatsMap[n.id];this.processProducingTransportStats(n.id,g,p)}if(n.consuming){const g=this.overallConsumingTransportsStatsMap[n.id];this.processConsumingTransportStats(n.id,g,p)}}break}case"remote-inbound-rtp":{const u=d,p={jitter:u.jitter,fractionLost:u.fractionLost,roundTripTime:u.roundTripTime,roundTripTimeMeasurements:u.roundTripTimeMeasurements,totalRoundTripTime:u.totalRoundTripTime,packetsLost:u.packetsLost};o.remoteInboundRtp.set(u.localId,p);break}case"outbound-rtp":{const u=d,p=s||this.outboundProducerMap.get(d.id);this.overallProducersStatsMap[p]||(this.overallProducersStatsMap[p]={totalVideoPacketsSent:0,totalAudioPacketsSent:0});const g=this.overallProducersStatsMap[p];if(["video","audio"].includes(u.mediaType)){if(!this.outboundProducerMap.has(d.id)){o.staleProducerStreamMap=!0,c&&c.delete("outbound-rtp");break}o.producerStreamMap.has(p)||o.producerStreamMap.set(p,{outboundVideoRtpId:[],outboundAudioRtpId:[]});const m={bytesSent:u.bytesSent,packetsSent:u.packetsSent,nackCount:u.nackCount};if(u.mediaType==="video"){if(u.decoderImplementation==="unknown")break;const f=u,b={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesEncoded:f.framesEncoded,framesDropped:f.framesDropped?f.framesDropped:f.droppedFrames,framesPerSecond:f.framesPerSecond?f.framesPerSecond:f.framerateMean,framesSent:f.framesSent,keyFramesEncoded:f.keyFramesEncoded,firCount:f.firCount,encoderImplementation:f.encoderImplementation,hugeFramesSent:f.hugeFramesSent,pliCount:f.pliCount,qpSum:f.qpSum,qualityLimitationReason:f.qualityLimitationReason,qualityLimitationDurations:f.qualityLimitationDurations,qualityLimitationResolutionChanges:f.qualityLimitationResolutionChanges,totalEncodeTime:f.totalEncodeTime,totalPacketSendDelay:f.totalEncodeTime,retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundVideoRtp.set(d.id,b),o.producerStreamMap.get(p).outboundVideoRtpId.push(d.id),this.processOutboundProducerVideoStats(p,g,b)}else if(u.mediaType==="audio"){const f=u,b={retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundAudioRtp.set(d.id,b),o.producerStreamMap.get(p).outboundAudioRtpId.push(d.id),this.processOutboundProducerAudioStats(p,g,b)}}break}case"inbound-rtp":{const u=d,p=s||this.inboundConsumerMap.get(d.id);this.overallConsumersStatsMap[p]||(this.overallConsumersStatsMap[p]={totalVideoPacketsReceived:0,totalAudioPacketsReceived:0});const g=this.overallConsumersStatsMap[p];if(["video","audio"].includes(u.mediaType)){if(!this.inboundConsumerMap.has(d.id)){o.staleConsumerStreamMap=!0,c&&c.delete("inbound-rtp");break}o.consumerStreamMap.has(p)||o.consumerStreamMap.set(p,{inboundVideoRtpId:[],inboundAudioRtpId:[]});const m={bytesReceived:u.bytesReceived,packetsReceived:u.packetsReceived,packetsLost:u.packetsLost,jitter:u.jitter,nackCount:u.nackCount};if(u.mediaType==="video"){if(u.decoderImplementation==="unknown")break;const f=u,b={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesDecoded:f.framesDecoded,framesDropped:f.framesDropped?f.framesDropped:f.droppedFrames,framesPerSecond:f.framesPerSecond?f.framesPerSecond:f.framerateMean,framesReceived:f.framesReceived,keyFramesDecoded:f.keyFramesDecoded,firCount:f.firCount,decoderImplementation:f.decoderImplementation,...m};o.inboundVideoRtp.set(d.id,b),o.consumerStreamMap.get(p).inboundVideoRtpId.push(d.id),this.processInboundConsumerVideoStats(p,g,b)}else if(u.mediaType==="audio"){const f=u,b={audioLevel:f.audioLevel,concealedSampels:f.concealedSampels,concealmentEvents:f.concealmentEvents,jitterBufferDelay:f.jitterBufferDelay,jitterBufferEmittedCount:f.jitterBufferEmittedCount,totalAudioEnergy:f.totalAudioEnergy,totalSamplesDuration:f.totalSamplesDuration,totalSamplesReceived:f.totalSamplesReceived,...m};o.inboundAudioRtp.set(d.id,b),o.consumerStreamMap.get(p).inboundAudioRtpId.push(d.id),this.processInboundConsumerAudioStats(p,g,b)}}break}}}if(o.outboundVideoRtp.forEach((d,u)=>{d.remoteData=o.remoteInboundRtp.get(u)}),o.outboundAudioRtp.forEach((d,u)=>{d.remoteData=o.remoteInboundRtp.get(u)}),o.candidatePair&&(o.transport?(o.transport.bytesReceived=o.candidatePair.bytesReceived,o.transport.bytesSent=o.candidatePair.bytesSent,o.transport.totalRoundTripTime=o.candidatePair.totalRoundTripTime,o.transport.availableOutgoingBitrate=o.candidatePair.availableOutgoingBitrate,o.transport.roundTripTime=o.candidatePair.currentRoundTripTime):o.transport={bytesReceived:o.candidatePair.bytesReceived,bytesSent:o.candidatePair.bytesSent,totalRoundTripTime:o.candidatePair.totalRoundTripTime,availableOutgoingBitrate:o.candidatePair.availableOutgoingBitrate,roundTripTime:o.candidatePair.currentRoundTripTime}),o.transport&&!o.transport.roundTripTime){let d=0,u=0;o.remoteInboundRtp.forEach((p,g)=>{p.roundTripTime&&p.roundTripTime>d&&(d=p.roundTripTime,u=p.totalRoundTripTime)}),o.transport.roundTripTime=d,o.transport.totalRoundTripTime=u}return o}getProducerStatsFromReport(e){const i=[];try{e.producerStreamMap.forEach((r,s)=>{const n=this.producerMap.get(s),a=n.track.getSettings(),o=r.outboundVideoRtpId.map(d=>{const u=e.outboundVideoRtp.get(d);return u.frameHeight||(u.frameHeight=a.height,u.frameWidth=a.width,u.framesPerSecond=a.frameRate),u}),c={producerId:s,appData:n.appData,videoStats:o,audioStats:r.outboundAudioRtpId.map(d=>e.outboundAudioRtp.get(d))};i.push(c)})}catch(r){console.error("getProducersReport: ",r,e)}return i}getConsumerStatsFromParsedConsumerStats(e,i,r){let s;try{const{peerId:n,producerId:a,appData:o}=this.consumerPeerIdMap.get(r),c=i==null?void 0:i.inboundVideoRtpId.map(d=>{const u=this.consumerMap.get(r).track.getSettings(),p=e.inboundVideoRtp.get(d);return p.frameHeight||(p.frameHeight=u.height,p.frameWidth=u.width,p.framesPerSecond=u.frameRate),p});s={consumerId:r,peerId:n,producerId:a,appData:o,videoStats:c,audioStats:i==null?void 0:i.inboundAudioRtpId.map(d=>e.inboundAudioRtp.get(d))}}catch(n){console.error("getConsumerStatsFromParsedConsumerStats: ",n,e)}return s}getConsumerStatsFromReport(e){const i=[];try{e.consumerStreamMap.forEach((r,s)=>{i.push(this.getConsumerStatsFromParsedConsumerStats(e,r,s))})}catch(r){console.error("getConsumerStatsFromReport: ",r,e)}return i}}class iB extends CI{}function xf(t,e,i,r){if(typeof i=="function"&&r instanceof e)i.call(null,r,t);else throw r}function u2(t,e,i){const r=t.value;return t.value=function(...s){try{const n=r.apply(this,s);return n&&n instanceof Promise?n.catch(a=>{xf(this,e,i,a)}):n}catch(n){xf(this,e,i,n)}return null},t}const be=(t,e)=>(i,r,s)=>{const n=s.value;return s.value=function(...a){try{const o=n.apply(this,a);return o&&o instanceof Promise?o.catch(c=>{xf(this,t,e,c)}):o}catch(o){xf(this,t,e,o)}return null},s},rB=(t,e)=>(i,r,s)=>{if(s)return u2(s,t,e);for(const n of Reflect.ownKeys(i.prototype).filter(a=>a!=="constructor")){const a=Object.getOwnPropertyDescriptor(i.prototype,n);a.value instanceof Function&&Object.defineProperty(i.prototype,n,u2(a,t,e))}};var fe=globalThis&&globalThis.__decorate||function(t,e,i,r){var s=arguments.length,n=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(n=(s<3?a(n):s>3?a(e,i,n):a(e,i))||n);return s>3&&n&&Object.defineProperty(e,i,n),n};const ve=console;let he=class{constructor(t="https://api.testingv3.dyte.in",e="Blink",i=Kp.PRODUCTION,r,s,n){switch(y(this,"eventHandler"),y(this,"measurements"),y(this,"producingTransport"),y(this,"consumingTransport"),y(this,"producers",new Map),y(this,"consumers",new Map),y(this,"iceServers"),y(this,"connectionInfoPromise"),y(this,"pingStatsTimeout"),y(this,"logger"),y(this,"env"),y(this,"peerId"),y(this,"consumerSharedMediaStatesMap",new Map),y(this,"currentUserMediaStates",{}),this.env=i,this.logger=s,this.peerId=n,this.eventHandler=new WV({logger:s,peerId:n,env:i}),this.logger.debug("callStats::engineName: ",{engineName:e}),e){case"Blink":this.measurements=new tB;break;case"Gecko":this.measurements=new CI;break;case"WebKit":this.measurements=new iB;break;default:throw Error(`Unknown engineName! ${e}`)}this.measurements.callStatsInstance=this,this.registerProducer=this.registerProducer.bind(this),this.registerConsumer=this.registerConsumer.bind(this)}registerIceServers(t){this.iceServers=t}registerConsumer(t){var e;this.consumerSharedMediaStatesMap.has(t.id)||this.consumerSharedMediaStatesMap.set(t.id,{}),this.consumers.set(t.id,t),this.measurements.registerConsumer(t),this.logger.debug("callStats::registerConsumer",{consumerId:t.id,consumerkind:t.kind,isScreenShare:!!((e=t.appData)!=null&&e.screenShare)}),t.observer.on("close",this.deRegisterConsumer.bind(this,t))}registerProducer(t){var e;this.producers.set(t.id,t),this.measurements.registerProducer(t),this.logger.debug("callStats::registerProducer",{producerId:t.id,producerKind:t.kind,isScreenShare:!!((e=t.appData)!=null&&e.screenShare)}),t.observer.on("close",this.deRegisterProducer.bind(this,t))}sendConsumerSharedMediaStateEvent(t,e){this.consumerSharedMediaStatesMap.has(t)||this.consumerSharedMediaStatesMap.set(t,{});const i=this.consumerSharedMediaStatesMap.get(t);this.consumerSharedMediaStatesMap.set(t,Object.assign(i,e))}registerProducingTransport(t){var e;this.producingTransport=t,t.observer.on("close",this.disconnectProducingTransport.bind(this,t)),t.observer.on("disconnect",this.disconnectProducingTransport.bind(this,t)),Array.from(((e=t._producers)==null?void 0:e.values())||[]).forEach(i=>{this.registerProducer(i)}),t.observer.on("newproducer",this.registerProducer)}registerConsumingTransport(t){var e;this.consumingTransport=t,t.observer.on("close",this.disconnectConsumingTransport.bind(this,t)),t.observer.on("disconnect",this.disconnectConsumingTransport.bind(this,t)),Array.from(((e=t._consumers)==null?void 0:e.values())||[]).forEach(i=>{this.registerConsumer(i)}),t.observer.on("newconsumer",this.registerConsumer)}deRegisterConsumer(t){this.consumers.delete(t.id)}deRegisterProducer(t){this.producers.delete(t.id)}disconnectConsumingTransport(){this.consumingTransport=void 0}disconnectProducingTransport(){this.producingTransport=void 0}callEvent(t){this.eventHandler.callEvent(t)}sendPreCallTestBeginEvent(){this.connectionInfoPromise=this.measurements.getNetworkInfo(this.iceServers),this.eventHandler.callEvent({event:q.PRECALL_TEST_BEGIN,timestamp:new Date}),this.connectionInfoPromise&&this.connectionInfoPromise.then(t=>{this.eventHandler.callEvent({event:q.PRECALL_TEST_COMPLETE,metaData:{connectionInfo:t},timestamp:new Date})})}sendScreenShareToggleEvent(t,e){this.currentUserMediaStates.screen=t,this.eventHandler.callEvent({event:t?q.SCREENSHARE_STARTED:q.SCREENSHARE_STOPPED,metaData:{ssrc:e},timestamp:new Date})}sendScreenShareRequestedEvent(){this.eventHandler.callEvent({event:q.SCREENSHARE_START_REQUESTED,timestamp:new Date})}sendActiveSpeakerEvent(t){this.eventHandler.callEvent({event:q.DOMINANT_SPEAKER,metaData:{peerId:t},timestamp:new Date})}devices(t,e){this.eventHandler.callEvent({event:t===Fr.AUDIO&&q.AUDIO_DEVICES_UPDATES||t===Fr.VIDEO&&q.VIDEO_DEVICES_UPDATES||t===Fr.SPEAKER&&q.SPEAKER_DEVICES_UPDATES,metaData:{deviceList:e},timestamp:new Date})}selectedDevice(t,e){this.eventHandler.callEvent({event:t===Fr.AUDIO&&q.SELECTED_MICROHPONE_UPDATE||t===Fr.VIDEO&&q.SELECTED_CAMERA_UPDATE||t===Fr.SPEAKER&&q.SELECTED_SPEAKER_UPDATE,metaData:{device:e},timestamp:new Date})}mediaPermission(t,e){this.eventHandler.callEvent({event:q.MEDIA_PERMISSION,metaData:{deviceType:t,permission:e},timestamp:new Date})}mediaPlaybackFailed(t){this.eventHandler.callEvent({event:t===Fr.AUDIO&&q.AUDIO_PLAY_FAILED||t===Fr.VIDEO&&q.VIDEO_PLAY_FAILED,metaData:{deviceType:t},timestamp:new Date})}mediaTrackMuted(t){this.eventHandler.callEvent({event:t===Fr.AUDIO&&q.AUDIO_TRACK_MUTED||t===Fr.VIDEO&&q.VIDEO_TRACK_MUTED,metaData:{deviceType:t},timestamp:new Date})}tabChanged(t){this.eventHandler.callEvent({event:q.TAB_CHANGE,metaData:{isMeetingsTabActive:t},timestamp:new Date})}browserBackgrounded(){this.eventHandler.callEvent({event:q.BROWSER_BACKGROUNDED,timestamp:new Date})}browserForegrounded(){this.eventHandler.callEvent({event:q.BROWSER_FOREGROUNDED,timestamp:new Date})}legacySwitch(t){this.eventHandler.callEvent({event:q.LEGACY_SWITCH,metadata:{on:t},timestamp:new Date})}async getPreCallTestResults(){return this.connectionInfoPromise}sendCallJoinBeginEvent(t){t={...t,meetingEnv:this.env},t.deviceInfo={...t.deviceInfo,userAgent:navigator.userAgent,cpus:navigator.hardwareConcurrency,memory:navigator.deviceMemory},this.eventHandler.callEvent({event:q.CALL_JOIN_BEGIN,metaData:{peerMetaData:t},timestamp:new Date})}sendNetworkQualityTestBeginEvent(t){this.eventHandler.callEvent({event:q.NET_QUALITY_TEST_BEGIN,timestamp:new Date}),new Promise(async(e,i)=>{const r=[];try{for(const s of t)try{if(s.iceServers&&s.iceServers.length>0){const n=await this.measurements.getNetworkQuality(s.iceServers);r.push({...s,networkResults:n})}}catch(n){console.warn("Error handling ",n)}e({regionData:r})}catch(s){console.warn("Error in callstats, ",s),i(s)}}).then(e=>{this.eventHandler.callEvent({event:q.NET_QUALITY_TEST_END,timestamp:new Date,metaData:e})})}sendWebSocketConnectedEvent(){this.eventHandler.callEvent({event:q.WEBSOCKET_CONNECTED,timestamp:new Date})}sendTransportConnectedEvent(){this.eventHandler.callEvent({event:q.TRANSPORT_CONNECTED,timestamp:new Date})}sendAudioToggleEvent(t){this.currentUserMediaStates.audio=t;let e;t?e=q.AUDIO_ON:e=q.AUDIO_OFF,this.eventHandler.callEvent({event:e,timestamp:new Date})}sendVideoToggleEvent(t){this.currentUserMediaStates.video=t;let e;t?e=q.VIDEO_ON:e=q.VIDEO_OFF,this.eventHandler.callEvent({event:e,timestamp:new Date})}sendParticipantRoleToggleEvent(t){this.eventHandler.callEvent({event:q.PARTICIPANT_ROLE,timestamp:new Date,metaData:t})}startPingStats(t=7e3){this.sendPingStatsEvent(!1),this.pingStatsTimeout=setInterval(this.sendPingStatsEvent.bind(this),t)}stopPingStats(){clearInterval(this.pingStatsTimeout)}async sendPingStatsEvent(t=!0){let e,i;if(this.producingTransport&&(e=await this.measurements.getProcessedStats(this.producingTransport,!1,!0),!e||!(e!=null&&e.producerReport))){this.logger.debug("callStats::sendPingStatsEvent::staleProducingTransport",{disclaimer:"Stale producer? Regenerating Stream Maps!"});const s=await this.measurements.getProducersReport([...this.producers.values()]);e&&s?e.producerReport=s:(e=await this.measurements.getProcessedStats(this.producingTransport,!1,!0),(!e||!(e!=null&&e.producerReport))&&this.logger.debug("callStats::sendPingStatsEvent::noProducingTransportReport",{disclaimer:"Stream maps invalid despite regenerating!"}))}if(this.consumingTransport&&(i=await this.measurements.getProcessedStats(this.consumingTransport,!0,!1),!i||!i.consumerReport)){this.logger.debug("callStats::sendPingStatsEvent::staleConsumingTransport",{disclaimer:"Stale consumer? Regenerating Stream Maps!"});const s=await this.measurements.getConsumersReport([...this.consumers.values()]);i&&s?i.consumerReport=s:(i=await this.measurements.getProcessedStats(this.consumingTransport,!0,!1),(!i||!i.consumerReport)&&this.logger.debug("callStats::sendPingStatsEvent::noConsumingTransportReport",{disclaimer:"Stream maps invalid despite regenerating!"}))}const r={producingTransportStats:e?e==null?void 0:e.transportReport:void 0,consumingTransportStats:i?i==null?void 0:i.transportReport:void 0,producerStats:[].concat((e==null?void 0:e.producerReport)||[]).concat((i==null?void 0:i.producerReport)||[]),consumerStats:[].concat((i==null?void 0:i.consumerReport)||[]).concat((e==null?void 0:e.consumerReport)||[])};if(t&&r.producerStats.length===0&&r.consumerStats.length===0){await this.eventHandler.flush();return}this.eventHandler.callEvent({event:q.PING_STAT,metaData:r,timestamp:new Date})}sendIVSPlayerRebufferEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_REBUFFERING,timestamp:new Date})}sendIVSPlayerAudioBlockEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_AUDIO_BLOCKED,timestamp:new Date})}sendIVSPlayerPlaybackBlockedEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_PLAYBACK_BLOCKED,timestamp:new Date})}sendIVSPlayerNetworkUnavailableEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_NETWORK_UNAVAILABLE,timestamp:new Date})}sendIVSPlayerInitializedEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_INITIALIZED,timestamp:new Date})}sendIVSPlayerWorkerErrorEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_WORKER_ERROR,timestamp:new Date})}sendIVSPlayerErrorEvent(t){this.eventHandler.callEvent({event:q.IVS_PLAYER_ERROR,timestamp:new Date,metaData:t})}sendIVSPlayerRecoverableErrorEvent(t){this.eventHandler.callEvent({event:q.IVS_PLAYER_RECOVERABLE_ERROR,timestamp:new Date,metaData:t})}sendIVSPlayerAnalyticsEvent(t){this.eventHandler.callEvent({event:q.IVS_PLAYER_ANALYTICS_EVENT,timestamp:new Date,metaData:t})}sendIVSPlayerPlaybackRateChangedEvent(t){this.eventHandler.callEvent({event:q.IVS_PLAYER_PLAYBACK_RATE_CHANGED,timestamp:new Date,metaData:{updatedPlaybackRate:t}})}sendIVSPlayerQualityChanged(t){this.eventHandler.callEvent({event:q.IVS_PLAYER_QUALITY_CHANGED,timestamp:new Date,metaData:t})}sendPlayerLiveLatency(t){this.eventHandler.callEvent({event:q.LIVESTREAM_LATENCY,timestamp:new Date,metaData:{latency:t}})}sendDisconnectEvent(){this.eventHandler.callEvent({event:q.DISCONNECT,timestamp:new Date})}sendReconnectEvent(){this.eventHandler.callEvent({event:q.RECONNECT_ATTEMPT,timestamp:new Date})}};fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"registerIceServers",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"registerConsumer",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"registerProducer",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendConsumerSharedMediaStateEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"registerProducingTransport",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"registerConsumingTransport",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"deRegisterConsumer",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"deRegisterProducer",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"disconnectConsumingTransport",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"disconnectProducingTransport",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendPreCallTestBeginEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendScreenShareToggleEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendScreenShareRequestedEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendActiveSpeakerEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"devices",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"selectedDevice",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"mediaPermission",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"mediaPlaybackFailed",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"mediaTrackMuted",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"tabChanged",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"browserBackgrounded",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"browserForegrounded",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"legacySwitch",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"getPreCallTestResults",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendCallJoinBeginEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendNetworkQualityTestBeginEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendWebSocketConnectedEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendTransportConnectedEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendAudioToggleEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendVideoToggleEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendParticipantRoleToggleEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"startPingStats",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"stopPingStats",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendPingStatsEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendIVSPlayerRebufferEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendIVSPlayerAudioBlockEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendIVSPlayerPlaybackBlockedEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendIVSPlayerNetworkUnavailableEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendIVSPlayerInitializedEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendIVSPlayerWorkerErrorEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendIVSPlayerErrorEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendIVSPlayerRecoverableErrorEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendIVSPlayerAnalyticsEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendIVSPlayerPlaybackRateChangedEvent",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendIVSPlayerQualityChanged",null);fe([be(TypeError,(t,e)=>ve.error(e,t))],he.prototype,"sendPlayerLiveLatency",null);he=fe([rB(TypeError,(t,e)=>ve.error(e,t))],he);const sB=he;class nB extends ir{constructor(){super(...arguments),y(this,"stats"),y(this,"roomURL"),y(this,"peerId"),y(this,"backend"),y(this,"iceServers"),y(this,"initialized",!1),y(this,"stalled",!1),y(this,"ipInformation"),y(this,"logger")}async initialize({peerId:e,engineName:i,env:r=Kp.PRODUCTION,iceServers:s,apiBase:n="https://api.cluster.dyte.in",flags:a,logger:o=console}){var c,d,u;try{this.peerId=e,this.logger=o,this.ipInformation=await lS.getIPDetails({peerId:e}),this.backend=new sB(n,i,r,a,o,e),this.iceServers=s,(c=this.backend)==null||c.registerIceServers(this.iceServers),this.initialized=!0,(u=(d=this.backend)==null?void 0:d.eventHandler)==null||u.emit("initialized",this.ipInformation),this.emit("initialized",this.ipInformation),this.startPreCallTest()}catch(p){this.logger.error("callStats::CallStatsIntegration: ",{error:{reason:p.reason}}),this.stallCallStats()}}setRoomName(e){this.roomURL=e}configureSendTransport(e){var i;(i=this.backend)==null||i.registerProducingTransport(e)}configureRecvTransport(e){var i;(i=this.backend)==null||i.registerConsumingTransport(e)}async candidateRegionalNetworkQualityTest(e){var i;try{(i=this.backend)==null||i.sendNetworkQualityTestBeginEvent(e)}catch(r){this.logger.error("callStats::sendNetworkQualityTestBeginEvent",{error:{reason:r.reason}})}}async roomJoined(e){var i,r;(i=this.backend)==null||i.sendCallJoinBeginEvent(e),this.backend,(r=this.backend)==null||r.startPingStats()}audioOff(){var e;(e=this.backend)==null||e.sendAudioToggleEvent(!1)}audioOn(){var e;(e=this.backend)==null||e.sendAudioToggleEvent(!0)}videoOff(){var e;(e=this.backend)==null||e.sendVideoToggleEvent(!1)}videoOn(){var e;(e=this.backend)==null||e.sendVideoToggleEvent(!0)}callEnded(){var e,i;(e=this.backend)==null||e.stopPingStats(),(i=this.backend)==null||i.sendDisconnectEvent()}screenShareStart(e){var i;(i=this.backend)==null||i.sendScreenShareToggleEvent(!0,e)}consumerSharedMediaState(e,i){var r;(r=this.backend)==null||r.sendConsumerSharedMediaStateEvent(e,i)}screenShareStop(e){var i;(i=this.backend)==null||i.sendScreenShareToggleEvent(!1,e)}screenShareRequested(){var e;(e=this.backend)==null||e.sendScreenShareRequestedEvent()}activeSpeaker(e){var i;e===this.peerId&&((i=this.backend)==null||i.sendActiveSpeakerEvent(e))}devices(e,i){var r;(r=this.backend)==null||r.devices(e,i)}selectedDevice(e,i){var r;(r=this.backend)==null||r.selectedDevice(e,i)}mediaPermission(e,i){var r;(r=this.backend)==null||r.mediaPermission(e,i)}mediaPlaybackFailed(e){var i;(i=this.backend)==null||i.mediaPlaybackFailed(e)}mediaTrackMuted(e){var i;(i=this.backend)==null||i.mediaTrackMuted(e)}tabChanged(e=!1){var i;(i=this.backend)==null||i.tabChanged(e)}browserBackgrounded(){var e;(e=this.backend)==null||e.browserBackgrounded()}browserForegrounded(){var e;(e=this.backend)==null||e.browserForegrounded()}legacySwitch(e){var i;(i=this.backend)==null||i.legacySwitch(e)}async startPreCallTest(){var e;(e=this.backend)==null||e.sendPreCallTestBeginEvent()}onPreCallTestResults(e){var i;return(i=this.backend)==null||i.eventHandler.once("precall_end",e),e}onReceivingConsumerAudioStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("consumer_audio_status",e)}onReceivingConsumerVideoStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("consumer_video_status",e)}onReceivingProducerAudioStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("producer_audio_status",e)}onReceivingProducerVideoStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("producer_video_status",e)}onReceivingProducingTransportStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("producing_transport_status",e)}onReceivingConsumingTransportStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("consuming_transport_status",e)}onSafeInitialization(e){if(this.initialized)e(this.ipInformation,!1);else if(!this.stalled){const i=r=>{e(r,!0)};return this.once("initialized",i),i}return()=>{}}removeInitializationListener(e){this.removeListener("initialized",e)}stallCallStats(){this.stalled=!0,this.removeAllListeners("initialized")}ivsPlayerEvent(e,i){var r,s,n,a,o,c,d,u,p,g,m;switch(e){case"PlayerRebuffering":(r=this.backend)==null||r.sendIVSPlayerRebufferEvent();break;case"PlayerAudioBlocked":(s=this.backend)==null||s.sendIVSPlayerAudioBlockEvent();break;case"PlayerPlaybackBlocked":(n=this.backend)==null||n.sendIVSPlayerPlaybackBlockedEvent();break;case"PlayerNetworkUnavailable":(a=this.backend)==null||a.sendIVSPlayerNetworkUnavailableEvent();break;case"PlayerInitialized":(o=this.backend)==null||o.sendIVSPlayerInitializedEvent();break;case"PlayerWorkerError":(c=this.backend)==null||c.sendIVSPlayerWorkerErrorEvent();break;case"PlayerError":(d=this.backend)==null||d.sendIVSPlayerErrorEvent(i);break;case"PlayerRecoverableError":(u=this.backend)==null||u.sendIVSPlayerRecoverableErrorEvent(i);break;case"PlayerAnalyticsEvent":(p=this.backend)==null||p.sendIVSPlayerAnalyticsEvent(i);break;case"PlayerPlaybackRateChanged":(g=this.backend)==null||g.sendIVSPlayerPlaybackRateChangedEvent(i);break;case"PlayerQualityChanged":(m=this.backend)==null||m.sendIVSPlayerQualityChanged(i);break}}livestreamLatency(e){var i;(i=this.backend)==null||i.sendPlayerLiveLatency(e)}}const X=new nB;X.setMaxListeners(30);function aB(t){const{length:e}=this,i=t>=0?t:e+t;return i<0||i>=e?void 0:this[i]}Array.prototype.at||Object.assign(Array.prototype,{at:aB});function oB(t){const{length:e}=this,i=t>=0?t:e+t;return i<0||i>=e?void 0:this[i]}String.prototype.at||Object.assign(String.prototype,{at:oB});var Yp;(function(t){t.skip="SKIP",t.onAccept="ON_ACCEPT",t.skipOnPrivilegedUserEntry="SKIP_ON_PRIVILEGED_USER_ENTRY",t.skipOnAccept="SKIP_ON_ACCEPT"})(Yp||(Yp={}));var Cc;(function(t){t.none="NONE",t.recorder="RECORDER",t.livestreamer="LIVESTREAMER"})(Cc||(Cc={}));var Pf;(function(t){t.groupCall="GROUP_CALL",t.webinar="WEBINAR",t.audioRoom="AUDIO_ROOM",t.livestream="LIVESTREAM",t.chat="CHAT"})(Pf||(Pf={}));var p2;(function(t){t.SKIP="skip",t.SKIP_ON_PRIVILEGED_USER_ENTRY="skipOnPrivilegedUserEntry",t.ON_ACCEPT="skipOnAccept",t.SKIP_ON_ACCEPT="skipOnAccept"})(p2||(p2={}));Pf.groupCall,Yp.skipOnAccept,Cc.none;Pf.groupCall,Cc.none,Yp.skipOnAccept;let RI="hXgU8Wc8pwuGNq9ms5q9Hh";var h2;typeof process<"u"&&(h2=process==null?void 0:process.env)!=null&&h2.FLAGSMITH_ENVIRONMENT_KEY&&(RI={}.FLAGSMITH_ENVIRONMENT_KEY);function cB(t=[]){const e={};return t.forEach(i=>{e[i.feature.name]={enabled:i.enabled,value:i.feature_state_value}}),e}class dB{constructor(e=RI){y(this,"flags",{}),y(this,"environmentKey",null),this.environmentKey=e,this.identify=this.identify.bind(this),this.getValue=this.getValue.bind(this),this.hasFeature=this.hasFeature.bind(this),this.getAllFlags=this.getAllFlags.bind(this)}async identify(e,i={},r=!1,s=5e3){const n=JSON.parse(JSON.stringify(i)),a=Object.entries(n).map(o=>({trait_key:o[0],trait_value:o[1]}));try{const o="_"+(Math.random()+1).toString(36).substring(2),c=await mf.post("https://edge.api.flagsmith.com/api/v1/identities/",{identifier:e+(r?o:""),traits:a},{headers:{"Content-Type":"application/json","X-Environment-Key":this.environmentKey},timeout:s});this.flags=cB(c.data.flags||[])}catch{}return this.flags}getValue(e){return this.flags&&this.flags[e]&&this.flags[e].value}hasFeature(e){return this.flags&&this.flags[e]&&this.flags[e].enabled}getAllFlags(){return this.flags}}const ee=new dB,AI=[-2,-1,0,1,2],lB=[0,1,2,3,4];function uB(t){t=t.trim();let e="0",i="0",r="0";return t.length==4?(e="0x"+t[1]+t[1],i="0x"+t[2]+t[2],r="0x"+t[3]+t[3]):t.length>6&&(e="0x"+t[1]+t[2],i="0x"+t[3]+t[4],r="0x"+t[5]+t[6]),[+e,+i,+r]}const pB=(t,e,i)=>{let r,s,n;if(e==0)r=s=n=i;else{const a=(d,u,p)=>(p<0&&(p+=1),p>1&&(p-=1),p<.16666666666666666?d+(u-d)*6*p:p<.5?u:p<.6666666666666666?d+(u-d)*(.6666666666666666-p)*6:d),o=i<.5?i*(1+e):i+e-i*e,c=2*i-o;r=a(c,o,t+1/3),s=a(c,o,t),n=a(c,o,t-1/3)}return[Math.round(r*255),Math.round(s*255),Math.round(n*255)]},hB=(t,e,i)=>{t/=255,e/=255,i/=255;const r=Math.max(t,e,i),s=Math.min(t,e,i);let n,a;const o=(r+s)/2;if(r==s)n=a=0;else{const c=r-s;switch(a=o>.5?c/(2-r-s):c/(r+s),r){case t:n=(e-i)/c+(e<i?6:0);break;case e:n=(i-t)/c+2;break;case i:n=(t-e)/c+4;break}n/=6}return[n,a,o]},gB=(t,e,i)=>{const r=s=>s.toString(16).padStart(2,"0");return`#${r(t)}${r(e)}${r(i)}`},II=(t,e=AI,i=.4)=>{const r=[],[s,n,a]=uB(t),[o,c,d]=hB(s,n,a),u=Math.round(d*100);u>70?i=.8:u>60?i=.9:u<10?i=.075:u<42&&(i=.3);const p=e.findIndex(w=>w===0);if(p===-1)throw new Error("Invalid reducer provided, it must contain atleast one zero");const g=5-p,m=p+1,f=(100-u)/g,b=u/m;for(const w of e){let v;w<0?v=u+w*b*i:w>0?v=u+w*f*i:v=u;const[_,k,P]=pB(o,c,v/100);r.push(gB(_,k,P))}return r},mB=t=>{const[e,i,r,s,n]=II(t,AI);return{300:e,400:i,500:r,600:s,700:n}},fB=t=>{const[e,i,r,s,n]=II(t,lB);return{1e3:e,900:i,800:r,700:s,600:n}};function vB(){this.__data__=[],this.size=0}function uS(t,e){return t===e||t!==t&&e!==e}function Fv(t,e){for(var i=t.length;i--;)if(uS(t[i][0],e))return i;return-1}var yB=Array.prototype,bB=yB.splice;function wB(t){var e=this.__data__,i=Fv(e,t);if(i<0)return!1;var r=e.length-1;return i==r?e.pop():bB.call(e,i,1),--this.size,!0}function _B(t){var e=this.__data__,i=Fv(e,t);return i<0?void 0:e[i][1]}function SB(t){return Fv(this.__data__,t)>-1}function EB(t,e){var i=this.__data__,r=Fv(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this}function ia(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}ia.prototype.clear=vB;ia.prototype.delete=wB;ia.prototype.get=_B;ia.prototype.has=SB;ia.prototype.set=EB;function kB(){this.__data__=new ia,this.size=0}function TB(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function xB(t){return this.__data__.get(t)}function PB(t){return this.__data__.has(t)}var CB=typeof global=="object"&&global&&global.Object===Object&&global;const OI=CB;var RB=typeof self=="object"&&self&&self.Object===Object&&self,AB=OI||RB||Function("return this")();const Ns=AB;var IB=Ns.Symbol;const un=IB;var MI=Object.prototype,OB=MI.hasOwnProperty,MB=MI.toString,gu=un?un.toStringTag:void 0;function DB(t){var e=OB.call(t,gu),i=t[gu];try{t[gu]=void 0;var r=!0}catch{}var s=MB.call(t);return r&&(e?t[gu]=i:delete t[gu]),s}var LB=Object.prototype,NB=LB.toString;function UB(t){return NB.call(t)}var jB="[object Null]",$B="[object Undefined]",g2=un?un.toStringTag:void 0;function Fl(t){return t==null?t===void 0?$B:jB:g2&&g2 in Object(t)?DB(t):UB(t)}function ao(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var zB="[object AsyncFunction]",FB="[object Function]",VB="[object GeneratorFunction]",BB="[object Proxy]";function DI(t){if(!ao(t))return!1;var e=Fl(t);return e==FB||e==VB||e==zB||e==BB}var HB=Ns["__core-js_shared__"];const I0=HB;var m2=function(){var t=/[^.]+$/.exec(I0&&I0.keys&&I0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function GB(t){return!!m2&&m2 in t}var WB=Function.prototype,qB=WB.toString;function $c(t){if(t!=null){try{return qB.call(t)}catch{}try{return t+""}catch{}}return""}var JB=/[\\^$.*+?()[\]{}|]/g,KB=/^\[object .+?Constructor\]$/,YB=Function.prototype,QB=Object.prototype,ZB=YB.toString,XB=QB.hasOwnProperty,eH=RegExp("^"+ZB.call(XB).replace(JB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function tH(t){if(!ao(t)||GB(t))return!1;var e=DI(t)?eH:KB;return e.test($c(t))}function iH(t,e){return t==null?void 0:t[e]}function zc(t,e){var i=iH(t,e);return tH(i)?i:void 0}var rH=zc(Ns,"Map");const Qp=rH;var sH=zc(Object,"create");const Zp=sH;function nH(){this.__data__=Zp?Zp(null):{},this.size=0}function aH(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var oH="__lodash_hash_undefined__",cH=Object.prototype,dH=cH.hasOwnProperty;function lH(t){var e=this.__data__;if(Zp){var i=e[t];return i===oH?void 0:i}return dH.call(e,t)?e[t]:void 0}var uH=Object.prototype,pH=uH.hasOwnProperty;function hH(t){var e=this.__data__;return Zp?e[t]!==void 0:pH.call(e,t)}var gH="__lodash_hash_undefined__";function mH(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Zp&&e===void 0?gH:e,this}function Rc(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}Rc.prototype.clear=nH;Rc.prototype.delete=aH;Rc.prototype.get=lH;Rc.prototype.has=hH;Rc.prototype.set=mH;function fH(){this.size=0,this.__data__={hash:new Rc,map:new(Qp||ia),string:new Rc}}function vH(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Vv(t,e){var i=t.__data__;return vH(e)?i[typeof e=="string"?"string":"hash"]:i.map}function yH(t){var e=Vv(this,t).delete(t);return this.size-=e?1:0,e}function bH(t){return Vv(this,t).get(t)}function wH(t){return Vv(this,t).has(t)}function _H(t,e){var i=Vv(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this}function Fc(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}Fc.prototype.clear=fH;Fc.prototype.delete=yH;Fc.prototype.get=bH;Fc.prototype.has=wH;Fc.prototype.set=_H;var SH=200;function EH(t,e){var i=this.__data__;if(i instanceof ia){var r=i.__data__;if(!Qp||r.length<SH-1)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new Fc(r)}return i.set(t,e),this.size=i.size,this}function Gn(t){var e=this.__data__=new ia(t);this.size=e.size}Gn.prototype.clear=kB;Gn.prototype.delete=TB;Gn.prototype.get=xB;Gn.prototype.has=PB;Gn.prototype.set=EH;function kH(t,e){for(var i=-1,r=t==null?0:t.length;++i<r&&e(t[i],i,t)!==!1;);return t}var TH=function(){try{var t=zc(Object,"defineProperty");return t({},"",{}),t}catch{}}();const Cf=TH;function LI(t,e,i){e=="__proto__"&&Cf?Cf(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}var xH=Object.prototype,PH=xH.hasOwnProperty;function NI(t,e,i){var r=t[e];(!(PH.call(t,e)&&uS(r,i))||i===void 0&&!(e in t))&&LI(t,e,i)}function Bv(t,e,i,r){var s=!i;i||(i={});for(var n=-1,a=e.length;++n<a;){var o=e[n],c=r?r(i[o],t[o],o,i,t):void 0;c===void 0&&(c=t[o]),s?LI(i,o,c):NI(i,o,c)}return i}function CH(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}function Zn(t){return t!=null&&typeof t=="object"}var RH="[object Arguments]";function f2(t){return Zn(t)&&Fl(t)==RH}var UI=Object.prototype,AH=UI.hasOwnProperty,IH=UI.propertyIsEnumerable,OH=f2(function(){return arguments}())?f2:function(t){return Zn(t)&&AH.call(t,"callee")&&!IH.call(t,"callee")};const pS=OH;var MH=Array.isArray;const Ac=MH;function DH(){return!1}var jI=typeof De=="object"&&De&&!De.nodeType&&De,v2=jI&&typeof Le=="object"&&Le&&!Le.nodeType&&Le,LH=v2&&v2.exports===jI,y2=LH?Ns.Buffer:void 0,NH=y2?y2.isBuffer:void 0,UH=NH||DH;const Xp=UH;var jH=9007199254740991,$H=/^(?:0|[1-9]\d*)$/;function zH(t,e){var i=typeof t;return e=e??jH,!!e&&(i=="number"||i!="symbol"&&$H.test(t))&&t>-1&&t%1==0&&t<e}var FH=9007199254740991;function $I(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=FH}var VH="[object Arguments]",BH="[object Array]",HH="[object Boolean]",GH="[object Date]",WH="[object Error]",qH="[object Function]",JH="[object Map]",KH="[object Number]",YH="[object Object]",QH="[object RegExp]",ZH="[object Set]",XH="[object String]",eG="[object WeakMap]",tG="[object ArrayBuffer]",iG="[object DataView]",rG="[object Float32Array]",sG="[object Float64Array]",nG="[object Int8Array]",aG="[object Int16Array]",oG="[object Int32Array]",cG="[object Uint8Array]",dG="[object Uint8ClampedArray]",lG="[object Uint16Array]",uG="[object Uint32Array]",yt={};yt[rG]=yt[sG]=yt[nG]=yt[aG]=yt[oG]=yt[cG]=yt[dG]=yt[lG]=yt[uG]=!0;yt[VH]=yt[BH]=yt[tG]=yt[HH]=yt[iG]=yt[GH]=yt[WH]=yt[qH]=yt[JH]=yt[KH]=yt[YH]=yt[QH]=yt[ZH]=yt[XH]=yt[eG]=!1;function pG(t){return Zn(t)&&$I(t.length)&&!!yt[Fl(t)]}function Hv(t){return function(e){return t(e)}}var zI=typeof De=="object"&&De&&!De.nodeType&&De,vp=zI&&typeof Le=="object"&&Le&&!Le.nodeType&&Le,hG=vp&&vp.exports===zI,O0=hG&&OI.process,gG=function(){try{var t=vp&&vp.require&&vp.require("util").types;return t||O0&&O0.binding&&O0.binding("util")}catch{}}();const xl=gG;var b2=xl&&xl.isTypedArray,mG=b2?Hv(b2):pG;const hS=mG;var fG=Object.prototype,vG=fG.hasOwnProperty;function FI(t,e){var i=Ac(t),r=!i&&pS(t),s=!i&&!r&&Xp(t),n=!i&&!r&&!s&&hS(t),a=i||r||s||n,o=a?CH(t.length,String):[],c=o.length;for(var d in t)(e||vG.call(t,d))&&!(a&&(d=="length"||s&&(d=="offset"||d=="parent")||n&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||zH(d,c)))&&o.push(d);return o}var yG=Object.prototype;function Gv(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||yG;return t===i}function VI(t,e){return function(i){return t(e(i))}}var bG=VI(Object.keys,Object);const wG=bG;var _G=Object.prototype,SG=_G.hasOwnProperty;function BI(t){if(!Gv(t))return wG(t);var e=[];for(var i in Object(t))SG.call(t,i)&&i!="constructor"&&e.push(i);return e}function Wv(t){return t!=null&&$I(t.length)&&!DI(t)}function gS(t){return Wv(t)?FI(t):BI(t)}function EG(t,e){return t&&Bv(e,gS(e),t)}function kG(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}var TG=Object.prototype,xG=TG.hasOwnProperty;function PG(t){if(!ao(t))return kG(t);var e=Gv(t),i=[];for(var r in t)r=="constructor"&&(e||!xG.call(t,r))||i.push(r);return i}function mS(t){return Wv(t)?FI(t,!0):PG(t)}function CG(t,e){return t&&Bv(e,mS(e),t)}var HI=typeof De=="object"&&De&&!De.nodeType&&De,w2=HI&&typeof Le=="object"&&Le&&!Le.nodeType&&Le,RG=w2&&w2.exports===HI,_2=RG?Ns.Buffer:void 0,S2=_2?_2.allocUnsafe:void 0;function AG(t,e){if(e)return t.slice();var i=t.length,r=S2?S2(i):new t.constructor(i);return t.copy(r),r}function IG(t,e){var i=-1,r=t.length;for(e||(e=Array(r));++i<r;)e[i]=t[i];return e}function GI(t,e){for(var i=-1,r=t==null?0:t.length,s=0,n=[];++i<r;){var a=t[i];e(a,i,t)&&(n[s++]=a)}return n}function WI(){return[]}var OG=Object.prototype,MG=OG.propertyIsEnumerable,E2=Object.getOwnPropertySymbols,DG=E2?function(t){return t==null?[]:(t=Object(t),GI(E2(t),function(e){return MG.call(t,e)}))}:WI;const fS=DG;function LG(t,e){return Bv(t,fS(t),e)}function vS(t,e){for(var i=-1,r=e.length,s=t.length;++i<r;)t[s+i]=e[i];return t}var NG=VI(Object.getPrototypeOf,Object);const qI=NG;var UG=Object.getOwnPropertySymbols,jG=UG?function(t){for(var e=[];t;)vS(e,fS(t)),t=qI(t);return e}:WI;const JI=jG;function $G(t,e){return Bv(t,JI(t),e)}function KI(t,e,i){var r=e(t);return Ac(t)?r:vS(r,i(t))}function U1(t){return KI(t,gS,fS)}function zG(t){return KI(t,mS,JI)}var FG=zc(Ns,"DataView");const j1=FG;var VG=zc(Ns,"Promise");const $1=VG;var BG=zc(Ns,"Set");const cl=BG;var HG=zc(Ns,"WeakMap");const z1=HG;var k2="[object Map]",GG="[object Object]",T2="[object Promise]",x2="[object Set]",P2="[object WeakMap]",C2="[object DataView]",WG=$c(j1),qG=$c(Qp),JG=$c($1),KG=$c(cl),YG=$c(z1),Lo=Fl;(j1&&Lo(new j1(new ArrayBuffer(1)))!=C2||Qp&&Lo(new Qp)!=k2||$1&&Lo($1.resolve())!=T2||cl&&Lo(new cl)!=x2||z1&&Lo(new z1)!=P2)&&(Lo=function(t){var e=Fl(t),i=e==GG?t.constructor:void 0,r=i?$c(i):"";if(r)switch(r){case WG:return C2;case qG:return k2;case JG:return T2;case KG:return x2;case YG:return P2}return e});const Pl=Lo;var QG=Object.prototype,ZG=QG.hasOwnProperty;function XG(t){var e=t.length,i=new t.constructor(e);return e&&typeof t[0]=="string"&&ZG.call(t,"index")&&(i.index=t.index,i.input=t.input),i}var eW=Ns.Uint8Array;const Rf=eW;function yS(t){var e=new t.constructor(t.byteLength);return new Rf(e).set(new Rf(t)),e}function tW(t,e){var i=e?yS(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}var iW=/\w*$/;function rW(t){var e=new t.constructor(t.source,iW.exec(t));return e.lastIndex=t.lastIndex,e}var R2=un?un.prototype:void 0,A2=R2?R2.valueOf:void 0;function sW(t){return A2?Object(A2.call(t)):{}}function nW(t,e){var i=e?yS(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}var aW="[object Boolean]",oW="[object Date]",cW="[object Map]",dW="[object Number]",lW="[object RegExp]",uW="[object Set]",pW="[object String]",hW="[object Symbol]",gW="[object ArrayBuffer]",mW="[object DataView]",fW="[object Float32Array]",vW="[object Float64Array]",yW="[object Int8Array]",bW="[object Int16Array]",wW="[object Int32Array]",_W="[object Uint8Array]",SW="[object Uint8ClampedArray]",EW="[object Uint16Array]",kW="[object Uint32Array]";function TW(t,e,i){var r=t.constructor;switch(e){case gW:return yS(t);case aW:case oW:return new r(+t);case mW:return tW(t,i);case fW:case vW:case yW:case bW:case wW:case _W:case SW:case EW:case kW:return nW(t,i);case cW:return new r;case dW:case pW:return new r(t);case lW:return rW(t);case uW:return new r;case hW:return sW(t)}}var I2=Object.create,xW=function(){function t(){}return function(e){if(!ao(e))return{};if(I2)return I2(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();const PW=xW;function CW(t){return typeof t.constructor=="function"&&!Gv(t)?PW(qI(t)):{}}var RW="[object Map]";function AW(t){return Zn(t)&&Pl(t)==RW}var O2=xl&&xl.isMap,IW=O2?Hv(O2):AW;const OW=IW;var MW="[object Set]";function DW(t){return Zn(t)&&Pl(t)==MW}var M2=xl&&xl.isSet,LW=M2?Hv(M2):DW;const NW=LW;var UW=1,jW=2,$W=4,YI="[object Arguments]",zW="[object Array]",FW="[object Boolean]",VW="[object Date]",BW="[object Error]",QI="[object Function]",HW="[object GeneratorFunction]",GW="[object Map]",WW="[object Number]",ZI="[object Object]",qW="[object RegExp]",JW="[object Set]",KW="[object String]",YW="[object Symbol]",QW="[object WeakMap]",ZW="[object ArrayBuffer]",XW="[object DataView]",eq="[object Float32Array]",tq="[object Float64Array]",iq="[object Int8Array]",rq="[object Int16Array]",sq="[object Int32Array]",nq="[object Uint8Array]",aq="[object Uint8ClampedArray]",oq="[object Uint16Array]",cq="[object Uint32Array]",ut={};ut[YI]=ut[zW]=ut[ZW]=ut[XW]=ut[FW]=ut[VW]=ut[eq]=ut[tq]=ut[iq]=ut[rq]=ut[sq]=ut[GW]=ut[WW]=ut[ZI]=ut[qW]=ut[JW]=ut[KW]=ut[YW]=ut[nq]=ut[aq]=ut[oq]=ut[cq]=!0;ut[BW]=ut[QI]=ut[QW]=!1;function cm(t,e,i,r,s,n){var a,o=e&UW,c=e&jW,d=e&$W;if(i&&(a=s?i(t,r,s,n):i(t)),a!==void 0)return a;if(!ao(t))return t;var u=Ac(t);if(u){if(a=XG(t),!o)return IG(t,a)}else{var p=Pl(t),g=p==QI||p==HW;if(Xp(t))return AG(t,o);if(p==ZI||p==YI||g&&!s){if(a=c||g?{}:CW(t),!o)return c?$G(t,CG(a,t)):LG(t,EG(a,t))}else{if(!ut[p])return s?t:{};a=TW(t,p,o)}}n||(n=new Gn);var m=n.get(t);if(m)return m;n.set(t,a),NW(t)?t.forEach(function(w){a.add(cm(w,e,i,w,t,n))}):OW(t)&&t.forEach(function(w,v){a.set(v,cm(w,e,i,v,t,n))});var f=d?c?zG:U1:c?mS:gS,b=u?void 0:f(t);return kH(b||t,function(w,v){b&&(v=w,w=t[v]),NI(a,v,cm(w,e,i,v,t,n))}),a}var dq=1,lq=4;function bS(t){return cm(t,dq|lq)}var uq="[object Symbol]";function pq(t){return typeof t=="symbol"||Zn(t)&&Fl(t)==uq}function hq(t,e){for(var i=-1,r=t==null?0:t.length,s=Array(r);++i<r;)s[i]=e(t[i],i,t);return s}var _i;(function(t){t.GroupCall="GROUP_CALL",t.Webinar="WEBINAR",t.AudioRoom="AUDIO_ROOM",t.Livestream="LIVESTREAM",t.Chat="CHAT"})(_i||(_i={}));var Af;(function(t){t.Skip="SKIP",t.OnPrivilegedUserEntry="ON_PRIVILEGED_USER_ENTRY",t.SkipOnAccept="SKIP_ON_ACCEPT"})(Af||(Af={}));var bi;(function(t){t.Allowed="ALLOWED",t.NotAllowed="NOT_ALLOWED",t.CanRequest="CAN_REQUEST"})(bi||(bi={}));var If;(function(t){t.Allowed="ALLOWED",t.NotAllowed="NOT_ALLOWED"})(If||(If={}));var D2;(function(t){t.FULL_ACCESS="FULL_ACCESS",t.VIEW_ONLY="VIEW_ONLY"})(D2||(D2={}));const gq={border_radius:"rounded",border_width:"thin",spacing_base:4,theme:"dark",colors:{brand:mB("#2160FD"),background:fB("#141414"),danger:"#FF2D2D",text:"#EEEEEE",text_on_brand:"#EEEEEE",success:"#62A504",video_bg:"#191919",warning:"#FFCD07"}};function XI(){return bS(gq)}const mq={permissions:{can_accept_production_requests:!1,can_edit_display_name:!0,accept_waiting_requests:!1,disable_participant_audio:!1,disable_participant_screensharing:!1,disable_participant_video:!1,can_spotlight:!1,kick_participant:!1,pin_participant:!1,can_record:!1,can_livestream:!1,waiting_room_type:Af.Skip,plugins:{can_close:!0,can_start:!0,can_edit_config:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},media:{video:{can_produce:bi.Allowed,can_consume:If.Allowed},audio:{can_produce:bi.Allowed},screenshare:{can_produce:bi.Allowed,can_consume:If.Allowed}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},hidden_participant:!1,is_recorder:!1,recorder_type:Cc.none,show_participant_list:!0,can_change_participant_permissions:!1,connected_meetings:{can_alter_connected_meetings:!1,can_switch_connected_meetings:!1,can_switch_to_parent_meeting:!1}},ui:{oldTheme:{setup_screen:{is_enabled:!1},alone_here:{is_enabled:!1},waiting_room:{is_enabled:!1,enable_preview:!0},control_bar:{is_enabled:!0,elements:{plugins:!0,screenshare:!0,invite:!1,participants:!0,chat:!0,reactions:!1,polls:!0,fullscreen:!0,layout:!0}},header:{is_enabled:!0,elements:{timer:!0,title:!0,participant_count:!0,change_layout:!0}},pip_mode:!0,auto_tune:!0,colors:{primary:"#2160FD",secondary:"#1A1A1A",text:"#EEEEEE",background:"#1A1A1A",textPrimary:"#EEEEEE",videoBackground:"#1A1A1A"},dimensions:{mode:"fillParent"},grid:{multi:{maxVideoCount:6,videoFit:"cover"},single:{maxVideoCount:6,videoFit:"cover"},defaultView:"MULTI"},controls:{pip_toggle:!1},plugins:[]},design_tokens:XI(),config_diff:{}},config:{view_type:_i.GroupCall,media:{video:{quality:"vga",frame_rate:24},screenshare:{quality:"hd",frame_rate:5}},max_video_streams:{mobile:6,desktop:6},max_screenshare_count:1},version:"hybrid"};function fq(){return bS(mq)}Cc.none,Yp.skip;const vq={permissions:{can_accept_production_requests:!1,can_edit_display_name:!0,accept_waiting_requests:!1,disable_participant_audio:!1,disable_participant_screensharing:!1,disable_participant_video:!1,can_spotlight:!1,kick_participant:!1,pin_participant:!1,can_record:!1,can_livestream:!1,waiting_room_type:Af.Skip,plugins:{can_close:!0,can_start:!0,can_edit_config:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},media:{video:{can_produce:bi.Allowed},audio:{can_produce:bi.Allowed},screenshare:{can_produce:bi.Allowed}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},hidden_participant:!1,is_recorder:!1,recorder_type:Cc.none,show_participant_list:!0,can_change_participant_permissions:!1,connected_meetings:{can_alter_connected_meetings:!1,can_switch_connected_meetings:!1,can_switch_to_parent_meeting:!1}},ui:{design_tokens:XI(),config_diff:{}},config:{view_type:_i.GroupCall,media:{video:{quality:"vga",frame_rate:24},screenshare:{quality:"hd",frame_rate:5}},max_video_streams:{mobile:6,desktop:6},max_screenshare_count:1},version:"2.0.0"};function wS(){return bS(vq)}var Ss={},yq={get exports(){return Ss},set exports(t){Ss=t}},M0,L2;function bq(){if(L2)return M0;L2=1;var t=1e3,e=t*60,i=e*60,r=i*24,s=r*7,n=r*365.25;M0=function(u,p){p=p||{};var g=typeof u;if(g==="string"&&u.length>0)return a(u);if(g==="number"&&isFinite(u))return p.long?c(u):o(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function a(u){if(u=String(u),!(u.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(p){var g=parseFloat(p[1]),m=(p[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return g*n;case"weeks":case"week":case"w":return g*s;case"days":case"day":case"d":return g*r;case"hours":case"hour":case"hrs":case"hr":case"h":return g*i;case"minutes":case"minute":case"mins":case"min":case"m":return g*e;case"seconds":case"second":case"secs":case"sec":case"s":return g*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function o(u){var p=Math.abs(u);return p>=r?Math.round(u/r)+"d":p>=i?Math.round(u/i)+"h":p>=e?Math.round(u/e)+"m":p>=t?Math.round(u/t)+"s":u+"ms"}function c(u){var p=Math.abs(u);return p>=r?d(u,p,r,"day"):p>=i?d(u,p,i,"hour"):p>=e?d(u,p,e,"minute"):p>=t?d(u,p,t,"second"):u+" ms"}function d(u,p,g,m){var f=p>=g*1.5;return Math.round(u/g)+" "+m+(f?"s":"")}return M0}function wq(t){i.debug=i,i.default=i,i.coerce=c,i.disable=n,i.enable=s,i.enabled=a,i.humanize=bq(),i.destroy=d,Object.keys(t).forEach(u=>{i[u]=t[u]}),i.names=[],i.skips=[],i.formatters={};function e(u){let p=0;for(let g=0;g<u.length;g++)p=(p<<5)-p+u.charCodeAt(g),p|=0;return i.colors[Math.abs(p)%i.colors.length]}i.selectColor=e;function i(u){let p,g=null,m,f;function b(...w){if(!b.enabled)return;const v=b,_=Number(new Date),k=_-(p||_);v.diff=k,v.prev=p,v.curr=_,p=_,w[0]=i.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let P=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(D,M)=>{if(D==="%%")return"%";P++;const B=i.formatters[M];if(typeof B=="function"){const G=w[P];D=B.call(v,G),w.splice(P,1),P--}return D}),i.formatArgs.call(v,w),(v.log||i.log).apply(v,w)}return b.namespace=u,b.useColors=i.useColors(),b.color=i.selectColor(u),b.extend=r,b.destroy=i.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(m!==i.namespaces&&(m=i.namespaces,f=i.enabled(u)),f),set:w=>{g=w}}),typeof i.init=="function"&&i.init(b),b}function r(u,p){const g=i(this.namespace+(typeof p>"u"?":":p)+u);return g.log=this.log,g}function s(u){i.save(u),i.namespaces=u,i.names=[],i.skips=[];let p;const g=(typeof u=="string"?u:"").split(/[\s,]+/),m=g.length;for(p=0;p<m;p++)g[p]&&(u=g[p].replace(/\*/g,".*?"),u[0]==="-"?i.skips.push(new RegExp("^"+u.slice(1)+"$")):i.names.push(new RegExp("^"+u+"$")))}function n(){const u=[...i.names.map(o),...i.skips.map(o).map(p=>"-"+p)].join(",");return i.enable(""),u}function a(u){if(u[u.length-1]==="*")return!0;let p,g;for(p=0,g=i.skips.length;p<g;p++)if(i.skips[p].test(u))return!1;for(p=0,g=i.names.length;p<g;p++)if(i.names[p].test(u))return!0;return!1}function o(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var _q=wq;(function(t,e){e.formatArgs=r,e.save=s,e.load=n,e.useColors=i,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;c.splice(1,0,d,"color: inherit");let u=0,p=0;c[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(u++,g==="%c"&&(p=u))}),c.splice(p,0,d)}e.log=console.debug||console.log||(()=>{});function s(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function n(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=_q(e);const{formatters:o}=t.exports;o.j=function(c){try{return JSON.stringify(c)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(yq,Ss);const rd="mediasoup-client";let br=class{constructor(t){t?(this._debug=Ss(`${rd}:${t}`),this._warn=Ss(`${rd}:WARN:${t}`),this._error=Ss(`${rd}:ERROR:${t}`)):(this._debug=Ss(rd),this._warn=Ss(`${rd}:WARN`),this._error=Ss(`${rd}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};const Sq=new br("EnhancedEventEmitter");let rs=class extends ir.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(t,...e){return super.emit(t,...e)}safeEmit(t,...e){const i=super.listenerCount(t);try{return super.emit(t,...e)}catch(r){return Sq.error("safeEmit() | event listener threw an error [eventName:%s]:%o",t,r),!!i}}on(t,e){return super.on(t,e),this}off(t,e){return super.off(t,e),this}addListener(t,e){return super.on(t,e),this}prependListener(t,e){return super.prependListener(t,e),this}once(t,e){return super.once(t,e),this}prependOnceListener(t,e){return super.prependOnceListener(t,e),this}removeListener(t,e){return super.off(t,e),this}removeAllListeners(t){return super.removeAllListeners(t),this}listenerCount(t){return super.listenerCount(t)}listeners(t){return super.listeners(t)}rawListeners(t){return super.rawListeners(t)}},dr=class eO extends Error{constructor(e){super(e),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,eO):this.stack=new Error(e).stack}},St=class tO extends Error{constructor(e){super(e),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,tO):this.stack=new Error(e).stack}};function ci(t,e){return typeof t>"u"?e:JSON.parse(JSON.stringify(t))}function D0(){return Math.round(Math.random()*1e7)}var F1={};(function(t){const e=Ss("h264-profile-level-id");e.log=console.info.bind(console);const i=1,r=2,s=3,n=4,a=5;t.ProfileConstrainedBaseline=i,t.ProfileBaseline=r,t.ProfileMain=s,t.ProfileConstrainedHigh=n,t.ProfileHigh=a;const o=0,c=10,d=11,u=12,p=13,g=20,m=21,f=22,b=30,w=31,v=32,_=40,k=41,P=42,D=50,M=51,B=52;t.Level1_b=o,t.Level1=c,t.Level1_1=d,t.Level1_2=u,t.Level1_3=p,t.Level2=g,t.Level2_1=m,t.Level2_2=f,t.Level3=b,t.Level3_1=w,t.Level3_2=v,t.Level4=_,t.Level4_1=k,t.Level4_2=P,t.Level5=D,t.Level5_1=M,t.Level5_2=B;class G{constructor(H,Z){this.profile=H,this.level=Z}}t.ProfileLevelId=G;const ne=new G(i,w),ie=16;class oe{constructor(H){this._mask=~lt("x",H),this._maskedValue=lt("1",H)}isMatch(H){return this._maskedValue===(H&this._mask)}}class Re{constructor(H,Z,ze){this.profile_idc=H,this.profile_iop=Z,this.profile=ze}}const Ke=[new Re(66,new oe("x1xx0000"),i),new Re(77,new oe("1xxx0000"),i),new Re(88,new oe("11xx0000"),i),new Re(66,new oe("x0xx0000"),r),new Re(88,new oe("10xx0000"),r),new Re(77,new oe("0x0x0000"),s),new Re(100,new oe("00000000"),a),new Re(100,new oe("00001100"),n)];t.parseProfileLevelId=function(F){if(typeof F!="string"||F.length!==6)return null;const H=parseInt(F,16);if(H===0)return null;const Z=H&255,ze=H>>8&255,at=H>>16&255;let kt;switch(Z){case d:{kt=ze&ie?o:d;break}case c:case u:case p:case g:case m:case f:case b:case w:case v:case _:case k:case P:case D:case M:case B:{kt=Z;break}default:return e("parseProfileLevelId() | unrecognized level_idc:%s",Z),null}for(const mi of Ke)if(at===mi.profile_idc&&mi.profile_iop.isMatch(ze))return new G(mi.profile,kt);return e("parseProfileLevelId() | unrecognized profile_idc/profile_iop combination"),null},t.profileLevelIdToString=function(F){if(F.level==o)switch(F.profile){case i:return"42f00b";case r:return"42100b";case s:return"4d100b";default:return e("profileLevelIdToString() | Level 1_b not is allowed for profile:%s",F.profile),null}let H;switch(F.profile){case i:{H="42e0";break}case r:{H="4200";break}case s:{H="4d00";break}case n:{H="640c";break}case a:{H="6400";break}default:return e("profileLevelIdToString() | unrecognized profile:%s",F.profile),null}let Z=F.level.toString(16);return Z.length===1&&(Z=`0${Z}`),`${H}${Z}`},t.parseSdpProfileLevelId=function(F={}){const H=F["profile-level-id"];return H?t.parseProfileLevelId(H):ne},t.isSameProfile=function(F={},H={}){const Z=t.parseSdpProfileLevelId(F),ze=t.parseSdpProfileLevelId(H);return!!(Z&&ze&&Z.profile===ze.profile)},t.generateProfileLevelIdForAnswer=function(F={},H={}){if(!F["profile-level-id"]&&!H["profile-level-id"])return e("generateProfileLevelIdForAnswer() | no profile-level-id in local and remote params"),null;const Z=t.parseSdpProfileLevelId(F),ze=t.parseSdpProfileLevelId(H);if(!Z)throw new TypeError("invalid local_profile_level_id");if(!ze)throw new TypeError("invalid remote_profile_level_id");if(Z.profile!==ze.profile)throw new TypeError("H264 Profile mismatch");const at=os(F)&&os(H),kt=Z.level,mi=ze.level,zs=$t(kt,mi),Ti=at?kt:zs;return e("generateProfileLevelIdForAnswer() | result: [profile:%s, level:%s]",Z.profile,Ti),t.profileLevelIdToString(new G(Z.profile,Ti))};function lt(F,H){return(H[0]===F)<<7|(H[1]===F)<<6|(H[2]===F)<<5|(H[3]===F)<<4|(H[4]===F)<<3|(H[5]===F)<<2|(H[6]===F)<<1|(H[7]===F)<<0}function Jt(F,H){return F===o?H!==c&&H!==o:H===o?F!==c:F<H}function $t(F,H){return Jt(F,H)?F:H}function os(F={}){const H=F["level-asymmetry-allowed"];return H===1||H==="1"}})(F1);const Eq="probator",kq=1234,Tq=127;function L0(t){if(typeof t!="object")throw new TypeError("caps is not an object");if(t.codecs&&!Array.isArray(t.codecs))throw new TypeError("caps.codecs is not an array");t.codecs||(t.codecs=[]);for(const e of t.codecs)xq(e);if(t.headerExtensions&&!Array.isArray(t.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");t.headerExtensions||(t.headerExtensions=[]);for(const e of t.headerExtensions)Pq(e)}function xq(t){const e=new RegExp("^(audio|video)/(.+)","i");if(typeof t!="object")throw new TypeError("codec is not an object");if(!t.mimeType||typeof t.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=e.exec(t.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(t.kind=i[1].toLowerCase(),t.preferredPayloadType&&typeof t.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof t.clockRate!="number")throw new TypeError("missing codec.clockRate");t.kind==="audio"?typeof t.channels!="number"&&(t.channels=1):delete t.channels,(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const r of Object.keys(t.parameters)){let s=t.parameters[r];if(s===void 0&&(t.parameters[r]="",s=""),typeof s!="string"&&typeof s!="number")throw new TypeError(`invalid codec parameter [key:${r}s, value:${s}]`);if(r==="apt"&&typeof s!="number")throw new TypeError("invalid codec apt parameter")}(!t.rtcpFeedback||!Array.isArray(t.rtcpFeedback))&&(t.rtcpFeedback=[]);for(const r of t.rtcpFeedback)iO(r)}function iO(t){if(typeof t!="object")throw new TypeError("fb is not an object");if(!t.type||typeof t.type!="string")throw new TypeError("missing fb.type");(!t.parameter||typeof t.parameter!="string")&&(t.parameter="")}function Pq(t){if(typeof t!="object")throw new TypeError("ext is not an object");if(t.kind!=="audio"&&t.kind!=="video")throw new TypeError("invalid ext.kind");if(!t.uri||typeof t.uri!="string")throw new TypeError("missing ext.uri");if(typeof t.preferredId!="number")throw new TypeError("missing ext.preferredId");if(t.preferredEncrypt&&typeof t.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(t.preferredEncrypt||(t.preferredEncrypt=!1),t.direction&&typeof t.direction!="string")throw new TypeError("invalid ext.direction");t.direction||(t.direction="sendrecv")}function _S(t){if(typeof t!="object")throw new TypeError("params is not an object");if(t.mid&&typeof t.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(t.codecs))throw new TypeError("missing params.codecs");for(const e of t.codecs)Cq(e);if(t.headerExtensions&&!Array.isArray(t.headerExtensions))throw new TypeError("params.headerExtensions is not an array");t.headerExtensions||(t.headerExtensions=[]);for(const e of t.headerExtensions)Rq(e);if(t.encodings&&!Array.isArray(t.encodings))throw new TypeError("params.encodings is not an array");t.encodings||(t.encodings=[]);for(const e of t.encodings)Aq(e);if(t.rtcp&&typeof t.rtcp!="object")throw new TypeError("params.rtcp is not an object");t.rtcp||(t.rtcp={}),Iq(t.rtcp)}function Cq(t){const e=new RegExp("^(audio|video)/(.+)","i");if(typeof t!="object")throw new TypeError("codec is not an object");if(!t.mimeType||typeof t.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=e.exec(t.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(typeof t.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof t.clockRate!="number")throw new TypeError("missing codec.clockRate");i[1].toLowerCase()==="audio"?typeof t.channels!="number"&&(t.channels=1):delete t.channels,(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const r of Object.keys(t.parameters)){let s=t.parameters[r];if(s===void 0&&(t.parameters[r]="",s=""),typeof s!="string"&&typeof s!="number")throw new TypeError(`invalid codec parameter [key:${r}s, value:${s}]`);if(r==="apt"&&typeof s!="number")throw new TypeError("invalid codec apt parameter")}(!t.rtcpFeedback||!Array.isArray(t.rtcpFeedback))&&(t.rtcpFeedback=[]);for(const r of t.rtcpFeedback)iO(r)}function Rq(t){if(typeof t!="object")throw new TypeError("ext is not an object");if(!t.uri||typeof t.uri!="string")throw new TypeError("missing ext.uri");if(typeof t.id!="number")throw new TypeError("missing ext.id");if(t.encrypt&&typeof t.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");t.encrypt||(t.encrypt=!1),(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const e of Object.keys(t.parameters)){let i=t.parameters[e];if(i===void 0&&(t.parameters[e]="",i=""),typeof i!="string"&&typeof i!="number")throw new TypeError("invalid header extension parameter")}}function Aq(t){if(typeof t!="object")throw new TypeError("encoding is not an object");if(t.ssrc&&typeof t.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(t.rid&&typeof t.rid!="string")throw new TypeError("invalid encoding.rid");if(t.rtx&&typeof t.rtx!="object")throw new TypeError("invalid encoding.rtx");if(t.rtx&&typeof t.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!t.dtx||typeof t.dtx!="boolean")&&(t.dtx=!1),t.scalabilityMode&&typeof t.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function Iq(t){if(typeof t!="object")throw new TypeError("rtcp is not an object");if(t.cname&&typeof t.cname!="string")throw new TypeError("invalid rtcp.cname");(!t.reducedSize||typeof t.reducedSize!="boolean")&&(t.reducedSize=!0)}function Oq(t){if(typeof t!="object")throw new TypeError("caps is not an object");if(!t.numStreams||typeof t.numStreams!="object")throw new TypeError("missing caps.numStreams");Mq(t.numStreams)}function Mq(t){if(typeof t!="object")throw new TypeError("numStreams is not an object");if(typeof t.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof t.MIS!="number")throw new TypeError("missing numStreams.MIS")}function N2(t){if(typeof t!="object")throw new TypeError("params is not an object");if(typeof t.streamId!="number")throw new TypeError("missing params.streamId");let e=!1;if(typeof t.ordered=="boolean"?e=!0:t.ordered=!0,t.maxPacketLifeTime&&typeof t.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(t.maxRetransmits&&typeof t.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(t.maxPacketLifeTime&&t.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(e&&t.ordered&&(t.maxPacketLifeTime||t.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!e&&(t.maxPacketLifeTime||t.maxRetransmits)&&(t.ordered=!1),t.label&&typeof t.label!="string")throw new TypeError("invalid params.label");if(t.protocol&&typeof t.protocol!="string")throw new TypeError("invalid params.protocol")}function Dq(t,e){const i={codecs:[],headerExtensions:[]};for(const r of e.codecs||[]){if(yp(r))continue;const s=(t.codecs||[]).find(a=>rO(a,r,{strict:!0,modify:!0}));if(!s)continue;const n={mimeType:s.mimeType,kind:s.kind,clockRate:s.clockRate,channels:s.channels,localPayloadType:s.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:r.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:s.parameters,remoteParameters:r.parameters,rtcpFeedback:$q(s,r)};i.codecs.push(n)}for(const r of i.codecs){const s=t.codecs.find(a=>yp(a)&&a.parameters.apt===r.localPayloadType),n=e.codecs.find(a=>yp(a)&&a.parameters.apt===r.remotePayloadType);s&&n&&(r.localRtxPayloadType=s.preferredPayloadType,r.remoteRtxPayloadType=n.preferredPayloadType)}for(const r of e.headerExtensions){const s=t.headerExtensions.find(a=>jq(a,r));if(!s)continue;const n={kind:r.kind,uri:r.uri,sendId:s.preferredId,recvId:r.preferredId,encrypt:s.preferredEncrypt,direction:"sendrecv"};switch(r.direction){case"sendrecv":n.direction="sendrecv";break;case"recvonly":n.direction="sendonly";break;case"sendonly":n.direction="recvonly";break;case"inactive":n.direction="inactive";break}i.headerExtensions.push(n)}return i}function Lq(t){const e={codecs:[],headerExtensions:[]};for(const i of t.codecs){const r={mimeType:i.mimeType,kind:i.kind,preferredPayloadType:i.remotePayloadType,clockRate:i.clockRate,channels:i.channels,parameters:i.localParameters,rtcpFeedback:i.rtcpFeedback};if(e.codecs.push(r),!i.remoteRtxPayloadType)continue;const s={mimeType:`${i.kind}/rtx`,kind:i.kind,preferredPayloadType:i.remoteRtxPayloadType,clockRate:i.clockRate,parameters:{apt:i.remotePayloadType},rtcpFeedback:[]};e.codecs.push(s)}for(const i of t.headerExtensions){if(i.direction!=="sendrecv"&&i.direction!=="recvonly")continue;const r={kind:i.kind,uri:i.uri,preferredId:i.recvId,preferredEncrypt:i.encrypt,direction:i.direction};e.headerExtensions.push(r)}return e}function ss(t,e){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const r of e.codecs){if(r.kind!==t)continue;const s={mimeType:r.mimeType,payloadType:r.localPayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.localParameters,rtcpFeedback:r.rtcpFeedback};if(i.codecs.push(s),r.localRtxPayloadType){const n={mimeType:`${r.kind}/rtx`,payloadType:r.localRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.localPayloadType},rtcpFeedback:[]};i.codecs.push(n)}}for(const r of e.headerExtensions){if(r.kind&&r.kind!==t||r.direction!=="sendrecv"&&r.direction!=="sendonly")continue;const s={uri:r.uri,id:r.sendId,encrypt:r.encrypt,parameters:{}};i.headerExtensions.push(s)}return i}function pn(t,e){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const r of e.codecs){if(r.kind!==t)continue;const s={mimeType:r.mimeType,payloadType:r.localPayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.remoteParameters,rtcpFeedback:r.rtcpFeedback};if(i.codecs.push(s),r.localRtxPayloadType){const n={mimeType:`${r.kind}/rtx`,payloadType:r.localRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.localPayloadType},rtcpFeedback:[]};i.codecs.push(n)}}for(const r of e.headerExtensions){if(r.kind&&r.kind!==t||r.direction!=="sendrecv"&&r.direction!=="sendonly")continue;const s={uri:r.uri,id:r.sendId,encrypt:r.encrypt,parameters:{}};i.headerExtensions.push(s)}if(i.headerExtensions.some(r=>r.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const r of i.codecs)r.rtcpFeedback=(r.rtcpFeedback||[]).filter(s=>s.type!=="goog-remb");else if(i.headerExtensions.some(r=>r.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const r of i.codecs)r.rtcpFeedback=(r.rtcpFeedback||[]).filter(s=>s.type!=="transport-cc");else for(const r of i.codecs)r.rtcpFeedback=(r.rtcpFeedback||[]).filter(s=>s.type!=="transport-cc"&&s.type!=="goog-remb");return i}function Ls(t,e){const i=[];if(!e)i.push(t[0]),yp(t[1])&&i.push(t[1]);else{for(let r=0;r<t.length;++r)if(rO(t[r],e)){i.push(t[r]),yp(t[r+1])&&i.push(t[r+1]);break}if(i.length===0)throw new TypeError("no matching codec found")}return i}function Nq(t){t=ci(t,{}),_S(t);const e={mid:Eq,codecs:[],headerExtensions:[],encodings:[{ssrc:kq}],rtcp:{cname:"probator"}};return e.codecs.push(t.codecs[0]),e.codecs[0].payloadType=Tq,e.headerExtensions=t.headerExtensions,e}function U2(t,e){return e.codecs.some(i=>i.kind===t)}function Uq(t,e){if(_S(t),t.codecs.length===0)return!1;const i=t.codecs[0];return e.codecs.some(r=>r.remotePayloadType===i.payloadType)}function yp(t){return t?/.+\/rtx$/i.test(t.mimeType):!1}function rO(t,e,{strict:i=!1,modify:r=!1}={}){const s=t.mimeType.toLowerCase(),n=e.mimeType.toLowerCase();if(s!==n||t.clockRate!==e.clockRate||t.channels!==e.channels)return!1;switch(s){case"video/h264":{if(i){const a=t.parameters["packetization-mode"]||0,o=e.parameters["packetization-mode"]||0;if(a!==o||!F1.isSameProfile(t.parameters,e.parameters))return!1;let c;try{c=F1.generateProfileLevelIdForAnswer(t.parameters,e.parameters)}catch{return!1}r&&(c?(t.parameters["profile-level-id"]=c,e.parameters["profile-level-id"]=c):(delete t.parameters["profile-level-id"],delete e.parameters["profile-level-id"]))}break}case"video/vp9":{if(i){const a=t.parameters["profile-id"]||0,o=e.parameters["profile-id"]||0;if(a!==o)return!1}break}}return!0}function jq(t,e){return!(t.kind&&e.kind&&t.kind!==e.kind||t.uri!==e.uri)}function $q(t,e){const i=[];for(const r of t.rtcpFeedback||[]){const s=(e.rtcpFeedback||[]).find(n=>n.type===r.type&&(n.parameter===r.parameter||!n.parameter&&!r.parameter));s&&i.push(s)}return i}var bc={},qv={},zq=N1&&N1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qv,"__esModule",{value:!0});qv.Logger=void 0;const sd=zq(Ss),nd="awaitqueue";let Fq=class{constructor(t){t?(this._debug=(0,sd.default)(`${nd}:${t}`),this._warn=(0,sd.default)(`${nd}:WARN:${t}`),this._error=(0,sd.default)(`${nd}:ERROR:${t}`)):(this._debug=(0,sd.default)(nd),this._warn=(0,sd.default)(`${nd}:WARN`),this._error=(0,sd.default)(`${nd}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};qv.Logger=Fq;Object.defineProperty(bc,"__esModule",{value:!0});var sO=bc.AwaitQueue=bc.AwaitQueueRemovedTaskError=bc.AwaitQueueStoppedError=void 0;const Vq=qv,la=new Vq.Logger;class SS extends Error{constructor(e){super(e??"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,SS)}}bc.AwaitQueueStoppedError=SS;class Jv extends Error{constructor(e){super(e??"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Jv)}}bc.AwaitQueueRemovedTaskError=Jv;class Bq{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(e,i){if(i=i??e.name,la.debug(`push() [name:${i}]`),typeof e!="function")throw new TypeError("given task is not a function");if(i)try{Object.defineProperty(e,"name",{value:i})}catch{}return new Promise((r,s)=>{const n={id:this.nextTaskId++,task:e,name:i,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:a=>{if(n.completed)return;n.completed=!0,this.pendingTasks.delete(n.id),la.debug(`resolving task [name:${n.name}]`),r(a);const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)},reject:a=>{if(!n.completed&&(n.completed=!0,this.pendingTasks.delete(n.id),la.debug(`rejecting task [name:${n.name}]: %s`,String(a)),s(a),!this.stopping)){const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)}}};this.pendingTasks.set(n.id,n),this.pendingTasks.size===1&&this.execute(n)})}stop(){la.debug("stop()"),this.stopping=!0;for(const e of this.pendingTasks.values())la.debug(`stop() | stopping task [name:${e.name}]`);this.stopping=!1}remove(e){la.debug(`remove() [taskIdx:${e}]`);const i=Array.from(this.pendingTasks.values())[e];if(!i){la.debug(`stop() | no task with given idx [taskIdx:${e}]`);return}i.reject(new Jv)}dump(){const e=Date.now();let i=0;return Array.from(this.pendingTasks.values()).map(r=>({idx:i++,task:r.task,name:r.name,enqueuedTime:r.executedAt?r.executedAt-r.enqueuedAt:e-r.enqueuedAt,executionTime:r.executedAt?e-r.executedAt:0}))}async execute(e){if(la.debug(`execute() [name:${e.name}]`),e.executedAt)throw new Error("task already being executed");e.executedAt=Date.now();try{const i=await e.task();e.resolve(i)}catch(i){e.reject(i)}}}sO=bc.AwaitQueue=Bq;/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let j2;var N0=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:N1):t=>(j2||(j2=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0));const Vs=new br("Producer");let Hq=class extends rs{constructor({id:t,localId:e,rtpSender:i,track:r,rtpParameters:s,stopTracks:n,disableTrackOnPause:a,zeroRtpOnPause:o,appData:c}){super(),this._closed=!1,this._observer=new rs,Vs.debug("constructor()"),this._id=t,this._localId=e,this._rtpSender=i,this._track=r,this._kind=r.kind,this._rtpParameters=s,this._paused=a?!r.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=n,this._disableTrackOnPause=a,this._zeroRtpOnPause=o,this._appData=c||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Vs.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Vs.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new St("closed");return new Promise((t,e)=>{this.safeEmit("@getstats",t,e)})}pause(){if(Vs.debug("pause()"),this._closed){Vs.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((t,e)=>{this.safeEmit("@pause",t,e)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(Vs.debug("resume()"),this._closed){Vs.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((t,e)=>{this.safeEmit("@resume",t,e)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:t}){if(Vs.debug("replaceTrack() [track:%o]",t),this._closed){if(t&&this._stopTracks)try{t.stop()}catch{}throw new St("closed")}else if(t&&t.readyState==="ended")throw new St("track ended");if(t===this._track){Vs.debug("replaceTrack() | same track, ignored");return}await new Promise((e,i)=>{this.safeEmit("@replacetrack",t,e,i)}),this.destroyTrack(),this._track=t,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(t){if(this._closed)throw new St("closed");if(this._kind!=="video")throw new dr("not a video Producer");if(typeof t!="number")throw new TypeError("invalid spatialLayer");t!==this._maxSpatialLayer&&(await new Promise((e,i)=>{this.safeEmit("@setmaxspatiallayer",t,e,i)}).catch(()=>{}),this._maxSpatialLayer=t)}async setRtpEncodingParameters(t){if(this._closed)throw new St("closed");if(typeof t!="object")throw new TypeError("invalid params");await new Promise((e,i)=>{this.safeEmit("@setrtpencodingparameters",t,e,i)})}onTrackEnded(){Vs.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}};const Bs=new br("Consumer");let Gq=class extends rs{constructor({id:t,localId:e,producerId:i,rtpReceiver:r,track:s,rtpParameters:n,appData:a}){super(),this._closed=!1,this._observer=new rs,Bs.debug("constructor()"),this._id=t,this._localId=e,this._producerId=i,this._rtpReceiver=r,this._track=s,this._rtpParameters=n,this._paused=!s.enabled,this._appData=a||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Bs.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Bs.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new St("closed");return new Promise((t,e)=>{this.safeEmit("@getstats",t,e)})}pause(){if(Bs.debug("pause()"),this._closed){Bs.error("pause() | Consumer closed");return}if(this._paused){Bs.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(Bs.debug("resume()"),this._closed){Bs.error("resume() | Consumer closed");return}if(!this._paused){Bs.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){Bs.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}};const _n=new br("DataProducer");class Wq extends rs{constructor({id:e,dataChannel:i,sctpStreamParameters:r,appData:s}){super(),this._closed=!1,this._observer=new rs,_n.debug("constructor()"),this._id=e,this._dataChannel=i,this._sctpStreamParameters=r,this._appData=s||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(e){this._dataChannel.bufferedAmountLowThreshold=e}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(_n.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(_n.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(e){if(_n.debug("send()"),this._closed)throw new St("closed");this._dataChannel.send(e)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(_n.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:i}=e;i||(i=new Error("unknown DataChannel error")),i.errorDetail==="sctp-failure"?_n.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",i.sctpCauseCode,i.message):_n.error('DataChannel "error" event: %o',i),this.safeEmit("error",i)}),this._dataChannel.addEventListener("close",()=>{this._closed||(_n.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||_n.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}const Eo=new br("DataConsumer");class qq extends rs{constructor({id:e,dataProducerId:i,dataChannel:r,sctpStreamParameters:s,appData:n}){super(),this._closed=!1,this._observer=new rs,Eo.debug("constructor()"),this._id=e,this._dataProducerId=i,this._dataChannel=r,this._sctpStreamParameters=s,this._appData=n||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(e){this._dataChannel.binaryType=e}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Eo.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Eo.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(Eo.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:i}=e;i||(i=new Error("unknown DataChannel error")),i.errorDetail==="sctp-failure"?Eo.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",i.sctpCauseCode,i.message):Eo.error('DataChannel "error" event: %o',i),this.safeEmit("error",i)}),this._dataChannel.addEventListener("close",()=>{this._closed||(Eo.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",e=>{this._closed||this.safeEmit("message",e.data)})}}const di=new br("Transport");class Jq{constructor(e){this.consumerOptions=e,this.promise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}}let Kq=class extends rs{constructor({direction:t,id:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:u,handlerFactory:p,extendedRtpCapabilities:g,canProduceByKind:m}){super(),this._closed=!1,this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new sO,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new rs,di.debug("constructor() [id:%s, direction:%s]",e,t),this._id=e,this._direction=t,this._extendedRtpCapabilities=g,this._canProduceByKind=m,this._maxSctpMessageSize=n?n.maxMessageSize:null,c=ci(c,{}),delete c.iceServers,delete c.iceTransportPolicy,delete c.bundlePolicy,delete c.rtcpMuxPolicy,delete c.sdpSemantics,this._handler=p(),this._handler.run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:g}),this._appData=u||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get connectionState(){return this._connectionState}get appData(){return this._appData}get producers(){return this._producers}set appData(t){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){if(!this._closed){di.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close();for(const t of this._producers.values())t.transportClosed();this._producers.clear();for(const t of this._consumers.values())t.transportClosed();this._consumers.clear();for(const t of this._dataProducers.values())t.transportClosed();this._dataProducers.clear();for(const t of this._dataConsumers.values())t.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new St("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:t}){if(di.debug("restartIce()"),this._closed)throw new St("closed");if(!t)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>this._handler.restartIce(t),"transport.restartIce()")}async updateIceServers({iceServers:t}={}){if(di.debug("updateIceServers()"),this._closed)throw new St("closed");if(!Array.isArray(t))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(t),"transport.updateIceServers()")}async produce({track:t,encodings:e,codecOptions:i,codec:r,stopTracks:s=!0,disableTrackOnPause:n=!0,zeroRtpOnPause:a=!1,appData:o={}}={}){if(di.debug("produce() [track:%o]",t),this._closed)throw new St("closed");if(t){if(this._direction!=="send")throw new dr("not a sending Transport");if(this._canProduceByKind[t.kind]){if(t.readyState==="ended")throw new St("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new dr(`cannot produce ${t.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let c;if(e&&!Array.isArray(e))throw TypeError("encodings must be an array");e&&e.length===0?c=void 0:e&&(c=e.map(g=>{const m={active:!0};return g.active===!1&&(m.active=!1),typeof g.dtx=="boolean"&&(m.dtx=g.dtx),typeof g.scalabilityMode=="string"&&(m.scalabilityMode=g.scalabilityMode),typeof g.scaleResolutionDownBy=="number"&&(m.scaleResolutionDownBy=g.scaleResolutionDownBy),typeof g.maxBitrate=="number"&&(m.maxBitrate=g.maxBitrate),typeof g.maxFramerate=="number"&&(m.maxFramerate=g.maxFramerate),typeof g.adaptivePtime=="boolean"&&(m.adaptivePtime=g.adaptivePtime),typeof g.priority=="string"&&(m.priority=g.priority),typeof g.networkPriority=="string"&&(m.networkPriority=g.networkPriority),m}));const{localId:d,rtpParameters:u,rtpSender:p}=await this._handler.send({track:t,encodings:c,codecOptions:i,codec:r});try{_S(u);const{id:g}=await new Promise((f,b)=>{this.safeEmit("produce",{kind:t.kind,rtpParameters:u,appData:o},f,b)}),m=new Hq({id:g,localId:d,rtpSender:p,track:t,rtpParameters:u,stopTracks:s,disableTrackOnPause:n,zeroRtpOnPause:a,appData:o});return this._producers.set(m.id,m),this.handleProducer(m),this._observer.safeEmit("newproducer",m),m}catch(g){throw this._handler.stopSending(d).catch(()=>{}),g}},"transport.produce()").catch(c=>{if(s)try{t.stop()}catch{}throw c})}async consume({id:t,producerId:e,kind:i,rtpParameters:r,streamId:s,appData:n={}}){if(di.debug("consume()"),r=ci(r,void 0),this._closed)throw new St("closed");if(this._direction!=="recv")throw new dr("not a receiving Transport");if(typeof t!="string")throw new TypeError("missing id");if(typeof e!="string")throw new TypeError("missing producerId");if(i!=="audio"&&i!=="video")throw new TypeError(`invalid kind '${i}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(n&&typeof n!="object")throw new TypeError("if given, appData must be an object");if(!Uq(r,this._extendedRtpCapabilities))throw new dr("cannot consume this Producer");const a=new Jq({id:t,producerId:e,kind:i,rtpParameters:r,streamId:s,appData:n});return this._pendingConsumerTasks.push(a),N0(()=>{if(this._closed)throw new St("closed");this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),a.promise}async produceData({ordered:t=!0,maxPacketLifeTime:e,maxRetransmits:i,label:r="",protocol:s="",appData:n={}}={}){if(di.debug("produceData()"),this._closed)throw new St("closed");if(this._direction!=="send")throw new dr("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(n&&typeof n!="object")throw new TypeError("if given, appData must be an object")}else throw new dr("SCTP not enabled by remote Transport");return(e||i)&&(t=!1),this._awaitQueue.push(async()=>{const{dataChannel:a,sctpStreamParameters:o}=await this._handler.sendDataChannel({ordered:t,maxPacketLifeTime:e,maxRetransmits:i,label:r,protocol:s});N2(o);const{id:c}=await new Promise((u,p)=>{this.safeEmit("producedata",{sctpStreamParameters:o,label:r,protocol:s,appData:n},u,p)}),d=new Wq({id:c,dataChannel:a,sctpStreamParameters:o,appData:n});return this._dataProducers.set(d.id,d),this.handleDataProducer(d),this._observer.safeEmit("newdataproducer",d),d},"transport.produceData()")}async consumeData({id:t,dataProducerId:e,sctpStreamParameters:i,label:r="",protocol:s="",appData:n={}}){if(di.debug("consumeData()"),i=ci(i,void 0),this._closed)throw new St("closed");if(this._direction!=="recv")throw new dr("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof t!="string")throw new TypeError("missing id");if(typeof e!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(n&&typeof n!="object")throw new TypeError("if given, appData must be an object")}else throw new dr("SCTP not enabled by remote Transport");return N2(i),this._awaitQueue.push(async()=>{const{dataChannel:a}=await this._handler.receiveDataChannel({sctpStreamParameters:i,label:r,protocol:s}),o=new qq({id:t,dataProducerId:e,dataChannel:a,sctpStreamParameters:i,appData:n});return this._dataConsumers.set(o.id,o),this.handleDataConsumer(o),this._observer.safeEmit("newdataconsumer",o),o},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){di.debug("createPendingConsumers() | there is no Consumer to be created");return}const t=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let e;const i=[];for(const r of t){const{id:s,kind:n,rtpParameters:a,streamId:o}=r.consumerOptions;i.push({trackId:s,kind:n,rtpParameters:a,streamId:o})}try{const r=await this._handler.receive(i);for(let s=0;s<r.length;s++){const n=t[s],a=r[s],{id:o,producerId:c,kind:d,rtpParameters:u,appData:p}=n.consumerOptions,{localId:g,rtpReceiver:m,track:f}=a,b=new Gq({id:o,localId:g,producerId:c,rtpReceiver:m,track:f,rtpParameters:u,appData:p});this._consumers.set(b.id,b),this.handleConsumer(b),!this._probatorConsumerCreated&&!e&&d==="video"&&(e=b),this._observer.safeEmit("newconsumer",b),n.resolve(b)}}catch(r){for(const s of t)s.reject(r)}if(e)try{const r=Nq(e.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:r}]),di.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(r){di.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",r)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){di.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const t=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const e=t.map(i=>i.localId);await this._handler.pauseReceiving(e)}catch(e){di.error("pausePendingConsumers() | failed to pause Consumers:",e)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){di.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const t=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const e=t.map(i=>i.localId);await this._handler.resumeReceiving(e)}catch(e){di.error("resumePendingConsumers() | failed to resume Consumers:",e)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){di.debug("closePendingConsumers() | there is no Consumer to be closed");return}const t=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(t.map(e=>e.localId))}catch(e){di.error("closePendingConsumers() | failed to close Consumers:",e)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const t=this._handler;t.on("@connect",({dtlsParameters:e},i,r)=>{if(this._closed){r(new St("closed"));return}this.safeEmit("connect",{dtlsParameters:e},i,r)}),t.on("@connectionstatechange",e=>{e!==this._connectionState&&(di.debug("connection state changed to %s",e),this._connectionState=e,this._closed||this.safeEmit("connectionstatechange",e))})}handleProducer(t){t.on("@close",()=>{this._producers.delete(t.id),!this._closed&&this._awaitQueue.push(async()=>this._handler.stopSending(t.localId),"producer @close event").catch(e=>di.warn("producer.close() failed:%o",e))}),t.on("@pause",(e,i)=>{this._awaitQueue.push(async()=>this._handler.pauseSending(t.localId),"producer @pause event").then(e).catch(i)}),t.on("@resume",(e,i)=>{this._awaitQueue.push(async()=>this._handler.resumeSending(t.localId),"producer @resume event").then(e).catch(i)}),t.on("@replacetrack",(e,i,r)=>{this._awaitQueue.push(async()=>this._handler.replaceTrack(t.localId,e),"producer @replacetrack event").then(i).catch(r)}),t.on("@setmaxspatiallayer",(e,i,r)=>{this._awaitQueue.push(async()=>this._handler.setMaxSpatialLayer(t.localId,e),"producer @setmaxspatiallayer event").then(i).catch(r)}),t.on("@setrtpencodingparameters",(e,i,r)=>{this._awaitQueue.push(async()=>this._handler.setRtpEncodingParameters(t.localId,e),"producer @setrtpencodingparameters event").then(i).catch(r)}),t.on("@getstats",(e,i)=>{if(this._closed)return i(new St("closed"));this._handler.getSenderStats(t.localId).then(e).catch(i)})}handleConsumer(t){t.on("@close",()=>{this._consumers.delete(t.id),this._pendingPauseConsumers.delete(t.id),this._pendingResumeConsumers.delete(t.id),!this._closed&&(this._pendingCloseConsumers.set(t.id,t),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),t.on("@pause",()=>{this._pendingResumeConsumers.has(t.id)&&this._pendingResumeConsumers.delete(t.id),this._pendingPauseConsumers.set(t.id,t),N0(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),t.on("@resume",()=>{this._pendingPauseConsumers.has(t.id)&&this._pendingPauseConsumers.delete(t.id),this._pendingResumeConsumers.set(t.id,t),N0(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),t.on("@getstats",(e,i)=>{if(this._closed)return i(new St("closed"));this._handler.getReceiverStats(t.localId).then(e).catch(i)})}handleDataProducer(t){t.on("@close",()=>{this._dataProducers.delete(t.id)})}handleDataConsumer(t){t.on("@close",()=>{this._dataConsumers.delete(t.id)})}};const Mi=new br("Device");function Yq(){var t,e,i,r;if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(typeof RTCPeerConnection>"u"){Mi.warn("this._detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?");return}return typeof RTCRtpTransceiver<"u"?(Mi.debug("this._detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(Mi.debug("this._detectDevice() | ReactNative PlanB handler chosen"),"ReactNative")}else if(typeof navigator=="object"&&typeof navigator.userAgent=="string"){let s=navigator.userAgent;s=s==null?void 0:s.replace("motorola edge","motorola x");const n=K_.getParser(s),a=n.getEngine();if(n.satisfies({chrome:">=111",chromium:">=111","microsoft edge":">=111"}))return"Chrome111";if(n.satisfies({chrome:">=74",chromium:">=74","microsoft edge":">=88"}))return"Chrome74";if(n.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(n.satisfies({firefox:">=60"}))return"Firefox60";if(n.satisfies({ios:{OS:">=14.3",firefox:">=30.0"}})||n.satisfies({safari:">=12.0"})&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")||((e=(t=n.parsedResult)===null||t===void 0?void 0:t.os)===null||e===void 0?void 0:e.name)==="iOS"&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(n.satisfies({"microsoft edge":">=11"})&&n.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(a.name&&a.name.toLowerCase()==="blink"){const o=s.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(o){const c=Number(o[1]);return c>=111?"Chrome111":c>=74?"Chrome74":"Chrome70"}else return"Chrome111"}else{if(((r=(i=n.parsedResult)===null||i===void 0?void 0:i.os)===null||r===void 0?void 0:r.name)==="iOS"&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")||a.name&&a.name.toLowerCase()==="webkit"&&a.version&&parseFloat(a.version)>605)return"Safari12";Mi.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",n.getBrowserName(),n.getBrowserVersion());return}}else{Mi.warn("this._detectDevice() | unknown device");return}}class Qq{constructor({handlerName:e,handlerFactory:i,Handler:r}={}){if(this._loaded=!1,this._observer=new rs,Mi.debug("constructor()"),r)if(Mi.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),typeof r=="string")e=r;else throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");if(e&&i)throw new TypeError("just one of handlerName or handlerInterface can be given");if(i)this._handlerFactory=i;else{if(e)Mi.debug("constructor() | handler given: %s",e);else if(e=Yq(),e)Mi.debug("constructor() | detected handler: %s",e);else throw new dr("device not supported");this.switchDevice(e)}const s=this._handlerFactory();this._handlerName=s.name,s.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new St("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new St("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:e}){Mi.debug("load() [routerRtpCapabilities:%o]",e),e=ci(e,void 0);let i;try{if(this._loaded)throw new St("already loaded");L0(e),i=this._handlerFactory();const r=await i.getNativeRtpCapabilities();Mi.debug("load() | got native RTP capabilities:%o",r),L0(r),this._extendedRtpCapabilities=Dq(r,e),Mi.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=U2("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=U2("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=Lq(this._extendedRtpCapabilities),L0(this._recvRtpCapabilities),Mi.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await i.getNativeSctpCapabilities(),Mi.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),Oq(this._sctpCapabilities),Mi.debug("load() succeeded"),this._loaded=!0,i.close()}catch(r){throw i&&i.close(),r}}canProduce(e){if(this._loaded){if(e!=="audio"&&e!=="video")throw new TypeError(`invalid kind "${e}"`)}else throw new St("not loaded");return this._canProduceByKind[e]}createSendTransport({id:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:u}){return Mi.debug("createSendTransport()"),this.createTransport({direction:"send",id:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:u})}createRecvTransport({id:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:u}){return Mi.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:u})}createTransport({direction:e,id:i,iceParameters:r,iceCandidates:s,dtlsParameters:n,sctpParameters:a,iceServers:o,iceTransportPolicy:c,additionalSettings:d,proprietaryConstraints:u,appData:p}){if(this._loaded){if(typeof i!="string")throw new TypeError("missing id");if(typeof r!="object")throw new TypeError("missing iceParameters");if(Array.isArray(s)){if(typeof n!="object")throw new TypeError("missing dtlsParameters");if(a&&typeof a!="object")throw new TypeError("wrong sctpParameters");if(p&&typeof p!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new St("not loaded");const g=new Kq({direction:e,id:i,iceParameters:r,iceCandidates:s,dtlsParameters:n,sctpParameters:a,iceServers:o,iceTransportPolicy:c,additionalSettings:d,proprietaryConstraints:u,appData:p,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",g),g}}function Eh({sdpObject:t}){const e=new Map,i=[];let r=!1,s=!1;for(const n of t.media){const a=n.type;switch(a){case"audio":{if(r)continue;r=!0;break}case"video":{if(s)continue;s=!0;break}default:continue}for(const o of n.rtp){const c={kind:a,mimeType:`${a}/${o.codec}`,preferredPayloadType:o.payload,clockRate:o.rate,channels:o.encoding,parameters:{},rtcpFeedback:[]};e.set(c.preferredPayloadType,c)}for(const o of n.fmtp||[]){const c=dA(o.config),d=e.get(o.payload);d&&(c&&c.hasOwnProperty("profile-level-id")&&(c["profile-level-id"]=String(c["profile-level-id"])),d.parameters=c)}for(const o of n.rtcpFb||[]){const c={type:o.type,parameter:o.subtype};if(c.parameter||delete c.parameter,o.payload!=="*"){const d=e.get(o.payload);if(!d)continue;d.rtcpFeedback.push(c)}else for(const d of e.values())d.kind===a&&!/.+\/rtx$/i.test(d.mimeType)&&d.rtcpFeedback.push(c)}for(const o of n.ext||[]){if(o["encrypt-uri"])continue;const c={kind:a,uri:o.uri,preferredId:o.value};i.push(c)}}return{codecs:Array.from(e.values()),headerExtensions:i}}function kh({sdpObject:t}){const e=(t.media||[]).find(s=>s.iceUfrag&&s.port!==0);if(!e)throw new Error("no active media section found");const i=e.fingerprint||t.fingerprint;let r;switch(e.setup){case"active":r="client";break;case"passive":r="server";break;case"actpass":r="auto";break}return{role:r,fingerprints:[{algorithm:i.type,value:i.hash}]}}function Th({offerMediaObject:t}){const e=(t.ssrcs||[]).find(i=>i.attribute==="cname");return e?e.value:""}function xh({offerRtpParameters:t,answerMediaObject:e}){for(const i of t.codecs){const r=i.mimeType.toLowerCase();if(r!=="audio/opus"||!(e.rtp||[]).find(a=>a.payload===i.payloadType))continue;e.fmtp=e.fmtp||[];let s=e.fmtp.find(a=>a.payload===i.payloadType);s||(s={payload:i.payloadType,config:""},e.fmtp.push(s));const n=dA(s.config);switch(r){case"audio/opus":{const a=i.parameters["sprop-stereo"];a!==void 0&&(n.stereo=a?1:0);break}}s.config="";for(const a of Object.keys(n))s.config&&(s.config+=";"),s.config+=`${a}=${n[a]}`}}function oo({offerMediaObject:t}){const e=new Set;for(const s of t.ssrcs||[]){const n=s.id;e.add(n)}if(e.size===0)throw new Error("no a=ssrc lines found");const i=new Map;for(const s of t.ssrcGroups||[]){if(s.semantics!=="FID")continue;let[n,a]=s.ssrcs.split(/\s+/);n=Number(n),a=Number(a),e.has(n)&&(e.delete(n),e.delete(a),i.set(n,a))}for(const s of e)i.set(s,null);const r=[];for(const[s,n]of i){const a={ssrc:s};n&&(a.rtx={ssrc:n}),r.push(a)}return r}function Of({offerMediaObject:t,numStreams:e}){if(e<=1)throw new TypeError("numStreams must be greater than 1");const i=(t.ssrcs||[]).find(p=>p.attribute==="msid");if(!i)throw new Error("a=ssrc line with msid information not found");const[r,s]=i.value.split(" "),n=i.id;let a;(t.ssrcGroups||[]).some(p=>{if(p.semantics!=="FID")return!1;const g=p.ssrcs.split(/\s+/);return Number(g[0])===n?(a=Number(g[1]),!0):!1});const o=t.ssrcs.find(p=>p.attribute==="cname");if(!o)throw new Error("a=ssrc line with cname information not found");const c=o.value,d=[],u=[];for(let p=0;p<e;++p)d.push(n+p),a&&u.push(a+p);t.ssrcGroups=[],t.ssrcs=[],t.ssrcGroups.push({semantics:"SIM",ssrcs:d.join(" ")});for(let p=0;p<d.length;++p){const g=d[p];t.ssrcs.push({id:g,attribute:"cname",value:c}),t.ssrcs.push({id:g,attribute:"msid",value:`${r} ${s}`})}for(let p=0;p<u.length;++p){const g=d[p],m=u[p];t.ssrcs.push({id:m,attribute:"cname",value:c}),t.ssrcs.push({id:m,attribute:"msid",value:`${r} ${s}`}),t.ssrcGroups.push({semantics:"FID",ssrcs:`${g} ${m}`})}}let Vl=class extends rs{constructor(){super()}};class nO{constructor({iceParameters:e,iceCandidates:i,dtlsParameters:r,planB:s=!1}){if(this._mediaObject={},this._planB=s,e&&this.setIceParameters(e),i){this._mediaObject.candidates=[];for(const n of i){const a={};a.component=1,a.foundation=n.foundation,a.ip=n.ip,a.port=n.port,a.priority=n.priority,a.transport=n.protocol,a.type=n.type,n.tcpType&&(a.tcptype=n.tcpType),this._mediaObject.candidates.push(a)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}r&&this.setDtlsRole(r.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(e){this._mediaObject.iceUfrag=e.usernameFragment,this._mediaObject.icePwd=e.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}muxSimulcastStreams(e){if(this._mediaObject.simulcast&&this._mediaObject.simulcast.list1){const i={};e.forEach(n=>{n.rid&&(i[n.rid]=n)});const r=this._mediaObject.simulcast.list1,s=lA(r);s.forEach(n=>{n.forEach(a=>{var o;a.paused=!(!((o=i[a.scid])===null||o===void 0)&&o.active)})}),this._mediaObject.simulcast.list1=s.map(n=>n.map(a=>`${a.paused?"~":""}${a.scid}`).join(",")).join(";")}}}class $2 extends nO{constructor({iceParameters:e,iceCandidates:i,dtlsParameters:r,sctpParameters:s,plainRtpParameters:n,planB:a=!1,offerMediaObject:o,offerRtpParameters:c,answerRtpParameters:d,codecOptions:u,extmapAllowMixed:p=!1,forceGoogConference:g=!1}){switch(super({iceParameters:e,iceCandidates:i,dtlsParameters:r,planB:a}),this._mediaObject.mid=String(o.mid),this._mediaObject.type=o.type,this._mediaObject.protocol=o.protocol,n?(this._mediaObject.connection={ip:n.ip,version:n.ipVersion},this._mediaObject.port=n.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),o.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const m of d.codecs){const f={payload:m.payloadType,codec:V1(m),rate:m.clockRate};m.channels>1&&(f.encoding=m.channels),this._mediaObject.rtp.push(f);const b=ci(m.parameters,{});if(u){const{opusStereo:v,opusFec:_,opusDtx:k,opusMaxPlaybackRate:P,opusMaxAverageBitrate:D,opusPtime:M,videoGoogleStartBitrate:B,videoGoogleMaxBitrate:G,videoGoogleMinBitrate:ne}=u,ie=c.codecs.find(oe=>oe.payloadType===m.payloadType);switch(m.mimeType.toLowerCase()){case"audio/opus":{v!==void 0&&(ie.parameters["sprop-stereo"]=v?1:0,b.stereo=v?1:0),_!==void 0&&(ie.parameters.useinbandfec=_?1:0,b.useinbandfec=_?1:0),k!==void 0&&(ie.parameters.usedtx=k?1:0,b.usedtx=k?1:0),P!==void 0&&(b.maxplaybackrate=P),D!==void 0&&(b.maxaveragebitrate=D),M!==void 0&&(ie.parameters.ptime=M,b.ptime=M);break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":{B!==void 0&&(b["x-google-start-bitrate"]=B),G!==void 0&&(b["x-google-max-bitrate"]=G),ne!==void 0&&(b["x-google-min-bitrate"]=ne);break}}}const w={payload:m.payloadType,config:""};for(const v of Object.keys(b))w.config&&(w.config+=";"),w.config+=`${v}=${b[v]}`;w.config&&this._mediaObject.fmtp.push(w);for(const v of m.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:m.payloadType,type:v.type,subtype:v.parameter})}this._mediaObject.payloads=d.codecs.map(m=>m.payloadType).join(" "),this._mediaObject.ext=[];for(const m of d.headerExtensions)(o.ext||[]).some(f=>f.uri===m.uri)&&this._mediaObject.ext.push({uri:m.uri,value:m.id});if(p&&o.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),o.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:o.simulcast.list1},this._mediaObject.rids=[];for(const m of o.rids||[])m.direction==="send"&&this._mediaObject.rids.push({id:m.id,direction:"recv"})}else if(o.simulcast_03){this._mediaObject.simulcast_03={value:o.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const m of o.rids||[])m.direction==="send"&&this._mediaObject.rids.push({id:m.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",(this._planB||g)&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break}case"application":{typeof o.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=s.port,this._mediaObject.maxMessageSize=s.maxMessageSize):o.sctpmap&&(this._mediaObject.payloads=s.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:s.port,maxMessageSize:s.maxMessageSize});break}}}setDtlsRole(e){switch(e){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass";break}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(e){var i;if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;const r={};for(const a of e)a.rid&&(r[a.rid]=a);const s=this._mediaObject.simulcast.list1,n=lA(s);for(const a of n)for(const o of a)o.paused=!(!((i=r[o.scid])===null||i===void 0)&&i.active);this._mediaObject.simulcast.list1=n.map(a=>a.map(o=>`${o.paused?"~":""}${o.scid}`).join(",")).join(";")}}class z2 extends nO{constructor({iceParameters:e,iceCandidates:i,dtlsParameters:r,sctpParameters:s,plainRtpParameters:n,planB:a=!1,mid:o,kind:c,offerRtpParameters:d,streamId:u,trackId:p,oldDataChannelSpec:g=!1}){switch(super({iceParameters:e,iceCandidates:i,dtlsParameters:r,planB:a}),this._mediaObject.mid=String(o),this._mediaObject.type=c,n?(this._mediaObject.connection={ip:n.ip,version:n.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=n.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},s?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),c){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${u||"-"} ${p}`);for(const w of d.codecs){const v={payload:w.payloadType,codec:V1(w),rate:w.clockRate};w.channels>1&&(v.encoding=w.channels),this._mediaObject.rtp.push(v);const _={payload:w.payloadType,config:""};for(const k of Object.keys(w.parameters))_.config&&(_.config+=";"),_.config+=`${k}=${w.parameters[k]}`;_.config&&this._mediaObject.fmtp.push(_);for(const k of w.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:w.payloadType,type:k.type,subtype:k.parameter})}this._mediaObject.payloads=d.codecs.map(w=>w.payloadType).join(" "),this._mediaObject.ext=[];for(const w of d.headerExtensions)this._mediaObject.ext.push({uri:w.uri,value:w.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const m=d.encodings[0],f=m.ssrc,b=m.rtx&&m.rtx.ssrc?m.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],d.rtcp.cname&&this._mediaObject.ssrcs.push({id:f,attribute:"cname",value:d.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:f,attribute:"msid",value:`${u||"-"} ${p}`}),b&&(d.rtcp.cname&&this._mediaObject.ssrcs.push({id:b,attribute:"cname",value:d.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:b,attribute:"msid",value:`${u||"-"} ${p}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${f} ${b}`}));break}case"application":{g?(this._mediaObject.payloads=s.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:s.port,maxMessageSize:s.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=s.port,this._mediaObject.maxMessageSize=s.maxMessageSize);break}}}setDtlsRole(e){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:e,streamId:i,trackId:r}){const s=e.encodings[0],n=s.ssrc,a=s.rtx&&s.rtx.ssrc?s.rtx.ssrc:void 0,o=this._mediaObject.payloads.split(" ");for(const c of e.codecs){if(o.includes(String(c.payloadType)))continue;const d={payload:c.payloadType,codec:V1(c),rate:c.clockRate};c.channels>1&&(d.encoding=c.channels),this._mediaObject.rtp.push(d);const u={payload:c.payloadType,config:""};for(const p of Object.keys(c.parameters))u.config&&(u.config+=";"),u.config+=`${p}=${c.parameters[p]}`;u.config&&this._mediaObject.fmtp.push(u);for(const p of c.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:c.payloadType,type:p.type,subtype:p.parameter})}this._mediaObject.payloads+=` ${e.codecs.filter(c=>!this._mediaObject.payloads.includes(c.payloadType)).map(c=>c.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),e.rtcp.cname&&this._mediaObject.ssrcs.push({id:n,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:n,attribute:"msid",value:`${i||"-"} ${r}`}),a&&(e.rtcp.cname&&this._mediaObject.ssrcs.push({id:a,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:a,attribute:"msid",value:`${i||"-"} ${r}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${n} ${a}`}))}planBStopReceiving({offerRtpParameters:e}){const i=e.encodings[0],r=i.ssrc,s=i.rtx&&i.rtx.ssrc?i.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(n=>n.id!==r&&n.id!==s),s&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(n=>n.ssrcs!==`${r} ${s}`))}}function V1(t){const e=new RegExp("^(audio|video)/(.+)","i").exec(t.mimeType);if(!e)throw new TypeError("invalid codec.mimeType");return e[2]}const U0=new br("RemoteSdp");class Ph{constructor({iceParameters:e,iceCandidates:i,dtlsParameters:r,sctpParameters:s,plainRtpParameters:n,planB:a=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=e,this._iceCandidates=i,this._dtlsParameters=r,this._sctpParameters=s,this._plainRtpParameters=n,this._planB=a,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},e&&e.iceLite&&(this._sdpObject.icelite="ice-lite"),r){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const o=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:r.fingerprints[o-1].algorithm,hash:r.fingerprints[o-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}n&&(this._sdpObject.origin.address=n.ip,this._sdpObject.origin.ipVer=n.ipVersion)}updateIceParameters(e){U0.debug("updateIceParameters() [iceParameters:%o]",e),this._iceParameters=e,this._sdpObject.icelite=e.iceLite?"ice-lite":void 0;for(const i of this._mediaSections)i.setIceParameters(e)}updateDtlsRole(e){U0.debug("updateDtlsRole() [role:%s]",e),this._dtlsParameters.role=e;for(const i of this._mediaSections)i.setDtlsRole(e)}getNextMediaSectionIdx(){for(let e=0;e<this._mediaSections.length;++e){const i=this._mediaSections[e];if(i.closed)return{idx:e,reuseMid:i.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:e,reuseMid:i,offerRtpParameters:r,answerRtpParameters:s,codecOptions:n,extmapAllowMixed:a=!1,forceGoogConference:o=!1}){const c=new $2({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:e,offerRtpParameters:r,answerRtpParameters:s,codecOptions:n,extmapAllowMixed:a,forceGoogConference:o});i?this._replaceMediaSection(c,i):this._midToIndex.has(c.mid)?this._replaceMediaSection(c):this._addMediaSection(c)}receive({mid:e,kind:i,offerRtpParameters:r,streamId:s,trackId:n}){const a=this._midToIndex.get(e);let o;if(a!==void 0&&(o=this._mediaSections[a]),o)o.planBReceive({offerRtpParameters:r,streamId:s,trackId:n}),this._replaceMediaSection(o);else{o=new z2({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:e,kind:i,offerRtpParameters:r,streamId:s,trackId:n});const c=this._mediaSections.find(d=>d.closed);c?this._replaceMediaSection(o,c.mid):this._addMediaSection(o)}}pauseMediaSection(e){this._findMediaSection(e).pause()}resumeSendingMediaSection(e){this._findMediaSection(e).resume()}resumeReceivingMediaSection(e){this._findMediaSection(e).resume()}disableMediaSection(e){this._findMediaSection(e).disable()}closeMediaSection(e){const i=this._findMediaSection(e);return e===this._firstMid?(U0.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",e),this.disableMediaSection(e),!1):(i.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(e,i){const r=this._midToIndex.get(e);if(r===void 0)throw new Error(`no media section found with mid '${e}'`);const s=this._mediaSections[r];if(s===void 0)throw new Error(`no media section found with idx '${r}'`);s.muxSimulcastStreams(i),this._replaceMediaSection(s)}planBStopReceiving({mid:e,offerRtpParameters:i}){const r=this._findMediaSection(e);r.planBStopReceiving({offerRtpParameters:i}),this._replaceMediaSection(r)}sendSctpAssociation({offerMediaObject:e}){const i=new $2({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:e});this._addMediaSection(i)}receiveSctpAssociation({oldDataChannelSpec:e=!1}={}){const i=new z2({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:e});this._addMediaSection(i)}getSdp(){return this._sdpObject.origin.sessionVersion++,Os(this._sdpObject)}_addMediaSection(e){this._firstMid||(this._firstMid=e.mid),this._mediaSections.push(e),this._midToIndex.set(e.mid,this._mediaSections.length-1),this._sdpObject.media.push(e.getObject()),this._regenerateBundleMids()}_replaceMediaSection(e,i){if(typeof i=="string"){const r=this._midToIndex.get(i);if(r===void 0)throw new Error(`no media section found for reuseMid '${i}'`);const s=this._mediaSections[r];this._mediaSections[r]=e,this._midToIndex.delete(s.mid),this._midToIndex.set(e.mid,r),this._sdpObject.media[r]=e.getObject(),this._regenerateBundleMids()}else{const r=this._midToIndex.get(e.mid);if(r===void 0)throw new Error(`no media section found with mid '${e.mid}'`);this._mediaSections[r]=e,this._sdpObject.media[r]=e.getObject()}}_findMediaSection(e){const i=this._midToIndex.get(e);if(i===void 0)throw new Error(`no media section found with mid '${e}'`);return this._mediaSections[i]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(e=>!e.closed).map(e=>e.mid).join(" "))}}const Zq=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function Ch(t){const e=Zq.exec(t||"");return e?{spatialLayers:Number(e[1]),temporalLayers:Number(e[2])}:{spatialLayers:1,temporalLayers:1}}const Pe=new br("Chrome70"),F2={OS:1024,MIS:1024};class ES extends Vl{static createFactory(){return()=>new ES}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(Pe.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Pe.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const i=await e.createOffer();try{e.close()}catch{}const r=xe(i.sdp);return Eh({sdpObject:r})}catch(i){try{e.close()}catch{}throw i}}async getNativeSctpCapabilities(){return Pe.debug("getNativeSctpCapabilities()"),{numStreams:F2}}run({direction:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:u}){Pe.debug("run()"),this._direction=e,this._remoteSdp=new Ph({iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n}),this._sendingRtpParametersByKind={audio:ss("audio",u),video:ss("video",u)},this._sendingRemoteRtpParametersByKind={audio:pn("audio",u),video:pn("video",u)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Pe.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){Pe.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(e){if(Pe.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});Pe.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};Pe.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};Pe.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Pe.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOptions:r,codec:s}){var n;this.assertSendDirection(),Pe.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const a=ci(this._sendingRtpParametersByKind[e.kind],{});a.codecs=Ls(a.codecs,s);const o=ci(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=Ls(o.codecs,s);const c=this._remoteSdp.getNextMediaSectionIdx(),d=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let u=await this._pc.createOffer(),p=xe(u.sdp),g;this._transportReady||await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:p}),i&&i.length>1&&(Pe.debug("send() | enabling legacy simulcast"),p=xe(u.sdp),g=p.media[c.idx],Of({offerMediaObject:g,numStreams:i.length}),u={type:"offer",sdp:Os(p)});let m=!1;const f=Ch((i||[{}])[0].scalabilityMode);if(i&&i.length===1&&f.spatialLayers>1&&a.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(Pe.debug("send() | enabling legacy simulcast for VP9 SVC"),m=!0,p=xe(u.sdp),g=p.media[c.idx],Of({offerMediaObject:g,numStreams:f.spatialLayers}),u={type:"offer",sdp:Os(p)}),Pe.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),i){Pe.debug("send() | applying given encodings");const v=d.sender.getParameters();for(let _=0;_<(v.encodings||[]).length;++_){const k=v.encodings[_],P=i[_];if(!P)break;v.encodings[_]=Object.assign(k,P)}await d.sender.setParameters(v)}const b=d.mid;if(a.mid=b,p=xe(this._pc.localDescription.sdp),g=p.media[c.idx],a.rtcp.cname=Th({offerMediaObject:g}),a.encodings=oo({offerMediaObject:g}),i)for(let v=0;v<a.encodings.length;++v)i[v]&&Object.assign(a.encodings[v],i[v]);if(m&&(a.encodings=[a.encodings[0]]),a.encodings.length>1&&(a.codecs[0].mimeType.toLowerCase()==="video/vp8"||a.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const v of a.encodings)v.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:g,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:r});const w={type:"answer",sdp:this._remoteSdp.getSdp()};return Pe.debug("send() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w),this._mapMidTransceiver.set(b,d),{localId:b,rtpParameters:a,rtpSender:d.sender}}async stopSending(e){this.assertSendDirection(),Pe.debug("stopSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();Pe.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};Pe.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,i){this.assertSendDirection(),i?Pe.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):Pe.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this.assertSendDirection(),Pe.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();Pe.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Pe.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(e,i){this.assertSendDirection(),Pe.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{s.encodings[c]={...o,...i}}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();Pe.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Pe.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(e){this.assertSendDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:i,maxRetransmits:r,label:s,protocol:n}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:i,maxRetransmitTime:i,maxRetransmits:r,protocol:n};Pe.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(s,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%F2.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),p=xe(u.sdp),g=p.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:p}),Pe.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};Pe.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(e){var i;this.assertRecvDirection();const r=[],s=new Map;for(const c of e){const{trackId:d,kind:u,rtpParameters:p,streamId:g}=c;Pe.debug("receive() [trackId:%s, kind:%s]",d,u);const m=p.mid||String(this._mapMidTransceiver.size);s.set(d,m),this._remoteSdp.receive({mid:m,kind:u,offerRtpParameters:p,streamId:g||p.rtcp.cname,trackId:d})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};Pe.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const o=xe(a.sdp);for(const c of e){const{trackId:d,rtpParameters:u}=c,p=s.get(d),g=o.media.find(m=>String(m.mid)===p);xh({offerRtpParameters:u,answerMediaObject:g})}a={type:"answer",sdp:Os(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),Pe.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of e){const{trackId:d}=c,u=s.get(d),p=this._pc.getTransceivers().find(g=>g.mid===u);if(!p)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(u,p),r.push({localId:u,track:p.receiver.track,rtpReceiver:p.receiver})}return r}async stopReceiving(e){this.assertRecvDirection();for(const s of e){Pe.debug("stopReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(n.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Pe.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Pe.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const s of e)this._mapMidTransceiver.delete(s)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this.assertRecvDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:i,protocol:r}){var s;this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=e,d={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:o,maxRetransmitTime:o,maxRetransmits:c,protocol:r};Pe.debug("receiveDataChannel() [options:%o]",d);const u=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const p={type:"offer",sdp:this._remoteSdp.getSdp()};Pe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const g=await this._pc.createAnswer();if(!this._transportReady){const m=xe(g.sdp);await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:m})}Pe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:e,localSdpObject:i}){i||(i=xe(this._pc.localDescription.sdp));const r=kh({sdpObject:i});r.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((s,n)=>{this.safeEmit("@connect",{dtlsParameters:r},s,n)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}const ce=new br("Chrome74"),V2={OS:1024,MIS:1024};let Xq=class aO extends Vl{static createFactory(){return()=>new aO}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(ce.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){ce.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const i=await e.createOffer();try{e.close()}catch{}const r=xe(i.sdp);return Eh({sdpObject:r})}catch(i){try{e.close()}catch{}throw i}}async getNativeSctpCapabilities(){return ce.debug("getNativeSctpCapabilities()"),{numStreams:V2}}run({direction:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:u}){ce.debug("run()"),this._direction=e,this._remoteSdp=new Ph({iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n}),this._sendingRtpParametersByKind={audio:ss("audio",u),video:ss("video",u)},this._sendingRemoteRtpParametersByKind={audio:pn("audio",u),video:pn("video",u)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(ce.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}))}async updateIceServers(e){ce.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(e){if(ce.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});ce.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};ce.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};ce.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ce.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOptions:r,codec:s}){var n,a;this.assertSendDirection(),ce.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&i.length>1&&i.forEach((_,k)=>{_.rid=`r${k}`});const o=ci(this._sendingRtpParametersByKind[e.kind],{});o.codecs=Ls(o.codecs,s);const c=ci(this._sendingRemoteRtpParametersByKind[e.kind],{});c.codecs=Ls(c.codecs,s);const d=this._remoteSdp.getNextMediaSectionIdx(),u=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:i});let p=await this._pc.createOffer(),g=xe(p.sdp),m;this._transportReady||await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:g});let f=!1;const b=Ch((i||[{}])[0].scalabilityMode);i&&i.length===1&&b.spatialLayers>1&&o.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(ce.debug("send() | enabling legacy simulcast for VP9 SVC"),f=!0,g=xe(p.sdp),m=g.media[d.idx],Of({offerMediaObject:m,numStreams:b.spatialLayers}),p={type:"offer",sdp:Os(g)}),ce.debug("send() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const w=u.mid;if(o.mid=w,g=xe(this._pc.localDescription.sdp),m=g.media[d.idx],o.rtcp.cname=Th({offerMediaObject:m}),!i)o.encodings=oo({offerMediaObject:m});else if(i.length===1){let _=oo({offerMediaObject:m});Object.assign(_[0],i[0]),f&&(_=[_[0]]),o.encodings=_}else o.encodings=i;if(o.encodings.length>1&&(o.codecs[0].mimeType.toLowerCase()==="video/vp8"||o.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const _ of o.encodings)_.scalabilityMode?_.scalabilityMode=`L1T${b.temporalLayers}`:_.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:m,reuseMid:d.reuseMid,offerRtpParameters:o,answerRtpParameters:c,codecOptions:r,extmapAllowMixed:!0,forceGoogConference:(a=r==null?void 0:r.forceGoogConference)!==null&&a!==void 0?a:!1});const v={type:"answer",sdp:this._remoteSdp.getSdp()};return ce.debug("send() | calling pc.setRemoteDescription() [answer:%o]",v),await this._pc.setRemoteDescription(v),this._mapMidTransceiver.set(w,u),{localId:w,rtpParameters:o,rtpSender:u.sender}}async stopSending(e){this.assertSendDirection(),ce.debug("stopSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();ce.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};ce.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),ce.debug("pauseSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();ce.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};ce.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async resumeSending(e){this.assertSendDirection(),ce.debug("resumeSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly";const r=await this._pc.createOffer();ce.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};ce.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async replaceTrack(e,i){this.assertSendDirection(),i?ce.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):ce.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this.assertSendDirection(),ce.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();ce.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ce.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(e,i){this.assertSendDirection(),ce.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{s.encodings[c]={...o,...i}}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();ce.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ce.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(e){this.assertSendDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:i,maxRetransmits:r,label:s,protocol:n}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:i,maxRetransmits:r,protocol:n};ce.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(s,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%V2.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),p=xe(u.sdp),g=p.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:p}),ce.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};ce.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(e){var i;this.assertRecvDirection();const r=[],s=new Map;for(const c of e){const{trackId:d,kind:u,rtpParameters:p,streamId:g}=c;ce.debug("receive() [trackId:%s, kind:%s]",d,u);const m=p.mid||String(this._mapMidTransceiver.size);s.set(d,m),this._remoteSdp.receive({mid:m,kind:u,offerRtpParameters:p,streamId:g||p.rtcp.cname,trackId:d})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};ce.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const o=xe(a.sdp);for(const c of e){const{trackId:d,rtpParameters:u}=c,p=s.get(d),g=o.media.find(m=>String(m.mid)===p);xh({offerRtpParameters:u,answerMediaObject:g})}a={type:"answer",sdp:Os(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),ce.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of e){const{trackId:d}=c,u=s.get(d),p=this._pc.getTransceivers().find(g=>g.mid===u);if(p)this._mapMidTransceiver.set(u,p),r.push({localId:u,track:p.receiver.track,rtpReceiver:p.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(e){this.assertRecvDirection();for(const s of e){ce.debug("stopReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(n.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ce.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ce.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const s of e)this._mapMidTransceiver.delete(s)}async pauseReceiving(e){this.assertRecvDirection();for(const s of e){ce.debug("pauseReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ce.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ce.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertRecvDirection();for(const s of e){ce.debug("resumeReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ce.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ce.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:i,protocol:r}){var s;this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=e,d={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:r};ce.debug("receiveDataChannel() [options:%o]",d);const u=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const p={type:"offer",sdp:this._remoteSdp.getSdp()};ce.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const g=await this._pc.createAnswer();if(!this._transportReady){const m=xe(g.sdp);await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:m})}ce.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:e,localSdpObject:i}){i||(i=xe(this._pc.localDescription.sdp));const r=kh({sdpObject:i});r.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((s,n)=>{this.safeEmit("@connect",{dtlsParameters:r},s,n)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};const le=new br("Chrome111"),B2={OS:1024,MIS:1024};class kS extends Vl{static createFactory(){return()=>new kS}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(le.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){le.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const i=await e.createOffer();try{e.close()}catch{}const r=xe(i.sdp);return Eh({sdpObject:r})}catch(i){try{e.close()}catch{}throw i}}async getNativeSctpCapabilities(){return le.debug("getNativeSctpCapabilities()"),{numStreams:B2}}run({direction:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:u}){le.debug("run()"),this._direction=e,this._remoteSdp=new Ph({iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n}),this._sendingRtpParametersByKind={audio:ss("audio",u),video:ss("video",u)},this._sendingRemoteRtpParametersByKind={audio:pn("audio",u),video:pn("video",u)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(le.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}))}async updateIceServers(e){le.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(e){if(le.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});le.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();le.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOptions:r,codec:s}){var n;if(this.assertSendDirection(),le.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&i.length>1){i.forEach((v,_)=>{v.rid=`r${_}`});let b=1,w=1;for(const v of i){const _=v.scalabilityMode?Ch(v.scalabilityMode).temporalLayers:3;_>w&&(w=_)}for(const v of i)v.rid=`r${b++}`,v.scalabilityMode=`L1T${w}`}const a=ci(this._sendingRtpParametersByKind[e.kind],{});a.codecs=Ls(a.codecs,s);const o=ci(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=Ls(o.codecs,s);const c=this._remoteSdp.getNextMediaSectionIdx(),d=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:i}),u=await this._pc.createOffer();let p=xe(u.sdp);this._transportReady||await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:p}),le.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const g=d.mid;a.mid=g,p=xe(this._pc.localDescription.sdp);const m=p.media[c.idx];if(a.rtcp.cname=Th({offerMediaObject:m}),!i)a.encodings=oo({offerMediaObject:m});else if(i.length===1){const b=oo({offerMediaObject:m});Object.assign(b[0],i[0]),a.encodings=b}else a.encodings=i;this._remoteSdp.send({offerMediaObject:m,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:r,extmapAllowMixed:!0});const f={type:"answer",sdp:this._remoteSdp.getSdp()};return le.debug("send() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f),this._mapMidTransceiver.set(g,d),{localId:g,rtpParameters:a,rtpSender:d.sender}}async stopSending(e){this.assertSendDirection(),le.debug("stopSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();le.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),le.debug("pauseSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();le.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async resumeSending(e){this.assertSendDirection(),le.debug("resumeSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly";const r=await this._pc.createOffer();le.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async replaceTrack(e,i){this.assertSendDirection(),i?le.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):le.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this.assertSendDirection(),le.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();le.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(e,i){this.assertSendDirection(),le.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{s.encodings[c]={...o,...i}}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();le.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(e){this.assertSendDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:i,maxRetransmits:r,label:s,protocol:n}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:i,maxRetransmits:r,protocol:n};le.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(s,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%B2.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),p=xe(u.sdp),g=p.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:p}),le.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(e){var i;this.assertRecvDirection();const r=[],s=new Map;for(const c of e){const{trackId:d,kind:u,rtpParameters:p,streamId:g}=c;le.debug("receive() [trackId:%s, kind:%s]",d,u);const m=p.mid||String(this._mapMidTransceiver.size);s.set(d,m),this._remoteSdp.receive({mid:m,kind:u,offerRtpParameters:p,streamId:g||p.rtcp.cname,trackId:d})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const o=xe(a.sdp);for(const c of e){const{trackId:d,rtpParameters:u}=c,p=s.get(d),g=o.media.find(m=>String(m.mid)===p);xh({offerRtpParameters:u,answerMediaObject:g})}a={type:"answer",sdp:Os(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),le.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of e){const{trackId:d}=c,u=s.get(d),p=this._pc.getTransceivers().find(g=>g.mid===u);if(p)this._mapMidTransceiver.set(u,p),r.push({localId:u,track:p.receiver.track,rtpReceiver:p.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(e){this.assertRecvDirection();for(const s of e){le.debug("stopReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(n.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();le.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const s of e)this._mapMidTransceiver.delete(s)}async pauseReceiving(e){this.assertRecvDirection();for(const s of e){le.debug("pauseReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();le.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertRecvDirection();for(const s of e){le.debug("resumeReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();le.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:i,protocol:r}){var s;this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=e,d={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:r};le.debug("receiveDataChannel() [options:%o]",d);const u=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const p={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const g=await this._pc.createAnswer();if(!this._transportReady){const m=xe(g.sdp);await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:m})}le.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:e,localSdpObject:i}){i||(i=xe(this._pc.localDescription.sdp));const r=kh({sdpObject:i});r.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((s,n)=>{this.safeEmit("@connect",{dtlsParameters:r},s,n)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}function eJ(){const t=RTCRtpReceiver.getCapabilities(),e=ci(t,{});for(const i of e.codecs){if(i.channels=i.numChannels,delete i.numChannels,i.mimeType=i.mimeType||`${i.kind}/${i.name}`,i.parameters){const r=i.parameters;r.apt&&(r.apt=Number(r.apt)),r["packetization-mode"]&&(r["packetization-mode"]=Number(r["packetization-mode"]))}for(const r of i.rtcpFeedback||[])r.parameter||(r.parameter="")}return e}function H2(t){const e=ci(t,{});e.mid&&(e.muxId=e.mid,delete e.mid);for(const i of e.codecs)i.channels&&(i.numChannels=i.channels,delete i.channels),i.mimeType&&!i.name&&(i.name=i.mimeType.split("/")[1]),delete i.mimeType;return e}const Qe=new br("Edge11");class TS extends Vl{static createFactory(){return()=>new TS}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){Qe.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const e of this._rtpSenders.values())try{e.stop()}catch{}for(const e of this._rtpReceivers.values())try{e.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return Qe.debug("getNativeRtpCapabilities()"),eJ()}async getNativeSctpCapabilities(){return Qe.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:u}){Qe.debug("run()"),this._sendingRtpParametersByKind={audio:ss("audio",u),video:ss("video",u)},this._remoteIceParameters=i,this._remoteIceCandidates=r,this._remoteDtlsParameters=s,this._cname=`CNAME-${D0()}`,this.setIceGatherer({iceServers:a,iceTransportPolicy:o}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(e){throw new dr("not supported")}async restartIce(e){if(Qe.debug("restartIce()"),this._remoteIceParameters=e,!!this._transportReady){Qe.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,e,"controlling");for(const i of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(i);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:e,encodings:i,codecOptions:r,codec:s}){Qe.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),Qe.debug("send() | calling new RTCRtpSender()");const n=new RTCRtpSender(e,this._dtlsTransport),a=ci(this._sendingRtpParametersByKind[e.kind],{});a.codecs=Ls(a.codecs,s);const o=a.codecs.some(u=>/.+\/rtx$/i.test(u.mimeType));i||(i=[{}]);for(const u of i)u.ssrc=D0(),o&&(u.rtx={ssrc:D0()});a.encodings=i,a.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const c=H2(a);Qe.debug("send() | calling rtpSender.send() [params:%o]",c),await n.send(c);const d=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(d,n),{localId:d,rtpParameters:a,rtpSender:n}}async stopSending(e){Qe.debug("stopSending() [localId:%s]",e);const i=this._rtpSenders.get(e);if(!i)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(e);try{Qe.debug("stopSending() | calling rtpSender.stop()"),i.stop()}catch(r){throw Qe.warn("stopSending() | rtpSender.stop() failed:%o",r),r}}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,i){i?Qe.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):Qe.debug("replaceTrack() [localId:%s, no track]",e);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");r.setTrack(i)}async setMaxSpatialLayer(e,i){Qe.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");const s=r.getParameters();s.encodings.forEach((n,a)=>{a<=i?n.active=!0:n.active=!1}),await r.setParameters(s)}async setRtpEncodingParameters(e,i){Qe.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");const s=r.getParameters();s.encodings.forEach((n,a)=>{s.encodings[a]={...n,...i}}),await r.setParameters(s)}async getSenderStats(e){const i=this._rtpSenders.get(e);if(!i)throw new Error("RTCRtpSender not found");return i.getStats()}async sendDataChannel(e){throw new dr("not implemented")}async receive(e){const i=[];for(const r of e){const{trackId:s,kind:n}=r;Qe.debug("receive() [trackId:%s, kind:%s]",s,n)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const r of e){const{trackId:s,kind:n,rtpParameters:a}=r;Qe.debug("receive() | calling new RTCRtpReceiver()");const o=new RTCRtpReceiver(this._dtlsTransport,n);o.addEventListener("error",u=>{Qe.error('rtpReceiver "error" event [event:%o]',u)});const c=H2(a);Qe.debug("receive() | calling rtpReceiver.receive() [params:%o]",c),await o.receive(c);const d=s;this._rtpReceivers.set(d,o),i.push({localId:d,track:o.track,rtpReceiver:o})}return i}async stopReceiving(e){for(const i of e){Qe.debug("stopReceiving() [localId:%s]",i);const r=this._rtpReceivers.get(i);if(!r)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(i);try{Qe.debug("stopReceiving() | calling rtpReceiver.stop()"),r.stop()}catch(s){Qe.warn("stopReceiving() | rtpReceiver.stop() failed:%o",s)}}}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){const i=this._rtpReceivers.get(e);if(!i)throw new Error("RTCRtpReceiver not found");return i.getStats()}async receiveDataChannel(e){throw new dr("not implemented")}setIceGatherer({iceServers:e,iceTransportPolicy:i}){const r=new RTCIceGatherer({iceServers:e||[],gatherPolicy:i||"all"});r.addEventListener("error",s=>{Qe.error('iceGatherer "error" event [event:%o]',s)});try{r.gather()}catch(s){Qe.debug("setIceGatherer() | iceGatherer.gather() failed: %s",s.toString())}this._iceGatherer=r}setIceTransport(){const e=new RTCIceTransport(this._iceGatherer);e.addEventListener("statechange",()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),e.addEventListener("icestatechange",()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),e.addEventListener("candidatepairchange",i=>{Qe.debug('iceTransport "candidatepairchange" event [pair:%o]',i.pair)}),this._iceTransport=e}setDtlsTransport(){const e=new RTCDtlsTransport(this._iceTransport);e.addEventListener("statechange",()=>{Qe.debug('dtlsTransport "statechange" event [state:%s]',e.state)}),e.addEventListener("dtlsstatechange",()=>{Qe.debug('dtlsTransport "dtlsstatechange" event [state:%s]',e.state),e.state==="closed"&&this.emit("@connectionstatechange","closed")}),e.addEventListener("error",i=>{Qe.error('dtlsTransport "error" event [event:%o]',i)}),this._dtlsTransport=e}async setupTransport({localDtlsRole:e}){Qe.debug("setupTransport()");const i=this._dtlsTransport.getLocalParameters();i.role=e,await new Promise((r,s)=>{this.safeEmit("@connect",{dtlsParameters:i},r,s)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const r of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(r);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(r=>r.algorithm==="sha-256"||r.algorithm==="sha-384"||r.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}const ge=new br("Firefox60"),G2={OS:16,MIS:2048};let tJ=class oO extends Vl{static createFactory(){return()=>new oO}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(ge.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){ge.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),i=document.createElement("canvas");i.getContext("2d");const r=i.captureStream().getVideoTracks()[0];try{e.addTransceiver("audio",{direction:"sendrecv"});const s=e.addTransceiver(r,{direction:"sendrecv"}),n=s.sender.getParameters(),a=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];n.encodings=a,await s.sender.setParameters(n);const o=await e.createOffer();try{i.remove()}catch{}try{r.stop()}catch{}try{e.close()}catch{}const c=xe(o.sdp);return Eh({sdpObject:c})}catch(s){try{i.remove()}catch{}try{r.stop()}catch{}try{e.close()}catch{}throw s}}async getNativeSctpCapabilities(){return ge.debug("getNativeSctpCapabilities()"),{numStreams:G2}}run({direction:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:u}){ge.debug("run()"),this._direction=e,this._remoteSdp=new Ph({iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n}),this._sendingRtpParametersByKind={audio:ss("audio",u),video:ss("video",u)},this._sendingRemoteRtpParametersByKind={audio:pn("audio",u),video:pn("video",u)},this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(ge.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){throw new dr("not supported")}async restartIce(e){if(ge.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});ge.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ge.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOptions:r,codec:s}){this.assertSendDirection(),ge.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&(i=ci(i,[]),i.length>1&&(i.forEach((f,b)=>{f.rid=`r${b}`}),i.reverse()));const n=ci(this._sendingRtpParametersByKind[e.kind],{});n.codecs=Ls(n.codecs,s);const a=ci(this._sendingRemoteRtpParametersByKind[e.kind],{});a.codecs=Ls(a.codecs,s);const o=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});if(i){const f=o.sender.getParameters();f.encodings=i,await o.sender.setParameters(f)}const c=await this._pc.createOffer();let d=xe(c.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:d});const u=Ch((i||[{}])[0].scalabilityMode);ge.debug("send() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const p=o.mid;n.mid=p,d=xe(this._pc.localDescription.sdp);const g=d.media[d.media.length-1];if(n.rtcp.cname=Th({offerMediaObject:g}),!i)n.encodings=oo({offerMediaObject:g});else if(i.length===1){const f=oo({offerMediaObject:g});Object.assign(f[0],i[0]),n.encodings=f}else n.encodings=i.reverse();if(n.encodings.length>1&&(n.codecs[0].mimeType.toLowerCase()==="video/vp8"||n.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const f of n.encodings)f.scalabilityMode?f.scalabilityMode=`L1T${u.temporalLayers}`:f.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:g,offerRtpParameters:n,answerRtpParameters:a,codecOptions:r,extmapAllowMixed:!0});const m={type:"answer",sdp:this._remoteSdp.getSdp()};return ge.debug("send() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.set(p,o),{localId:p,rtpParameters:n,rtpSender:o.sender}}async stopSending(e){ge.debug("stopSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.disableMediaSection(i.mid);const r=await this._pc.createOffer();ge.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),ge.debug("pauseSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();ge.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async resumeSending(e){this.assertSendDirection(),ge.debug("resumeSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const r=await this._pc.createOffer();ge.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async replaceTrack(e,i){this.assertSendDirection(),i?ge.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):ge.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this.assertSendDirection(),ge.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated transceiver not found");const s=r.sender.getParameters();i=s.encodings.length-1-i,s.encodings.forEach((o,c)=>{c>=i?o.active=!0:o.active=!1}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();ge.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(e,i){this.assertSendDirection(),ge.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{s.encodings[c]={...o,...i}}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();ge.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(e){this.assertSendDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:i,maxRetransmits:r,label:s,protocol:n}){this.assertSendDirection();const a={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:i,maxRetransmits:r,protocol:n};ge.debug("sendDataChannel() [options:%o]",a);const o=this._pc.createDataChannel(s,a);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%G2.MIS,!this._hasDataChannelMediaSection){const d=await this._pc.createOffer(),u=xe(d.sdp),p=u.media.find(m=>m.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:u}),ge.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d),this._remoteSdp.sendSctpAssociation({offerMediaObject:p});const g={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g),this._hasDataChannelMediaSection=!0}const c={streamId:a.id,ordered:a.ordered,maxPacketLifeTime:a.maxPacketLifeTime,maxRetransmits:a.maxRetransmits};return{dataChannel:o,sctpStreamParameters:c}}async receive(e){this.assertRecvDirection();const i=[],r=new Map;for(const o of e){const{trackId:c,kind:d,rtpParameters:u,streamId:p}=o;ge.debug("receive() [trackId:%s, kind:%s]",c,d);const g=u.mid||String(this._mapMidTransceiver.size);r.set(c,g),this._remoteSdp.receive({mid:g,kind:d,offerRtpParameters:u,streamId:p||u.rtcp.cname,trackId:c})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let n=await this._pc.createAnswer();const a=xe(n.sdp);for(const o of e){const{trackId:c,rtpParameters:d}=o,u=r.get(c),p=a.media.find(g=>String(g.mid)===u);xh({offerRtpParameters:d,answerMediaObject:p}),n={type:"answer",sdp:Os(a)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:a}),ge.debug("receive() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const o of e){const{trackId:c}=o,d=r.get(c),u=this._pc.getTransceivers().find(p=>p.mid===d);if(!u)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(d,u),i.push({localId:d,track:u.receiver.track,rtpReceiver:u.receiver})}return i}async stopReceiving(e){this.assertRecvDirection();for(const s of e){ge.debug("stopReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(n.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ge.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const s of e)this._mapMidTransceiver.delete(s)}async pauseReceiving(e){this.assertRecvDirection();for(const s of e){ge.debug("pauseReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ge.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertRecvDirection();for(const s of e){ge.debug("resumeReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ge.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:i,protocol:r}){this.assertRecvDirection();const{streamId:s,ordered:n,maxPacketLifeTime:a,maxRetransmits:o}=e,c={negotiated:!0,id:s,ordered:n,maxPacketLifeTime:a,maxRetransmits:o,protocol:r};ge.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(i,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const p=await this._pc.createAnswer();if(!this._transportReady){const g=xe(p.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:g})}ge.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setLocalDescription(p),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async setupTransport({localDtlsRole:e,localSdpObject:i}){i||(i=xe(this._pc.localDescription.sdp));const r=kh({sdpObject:i});r.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((s,n)=>{this.safeEmit("@connect",{dtlsParameters:r},s,n)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};const de=new br("Safari12"),W2={OS:1024,MIS:1024};let iJ=class cO extends Vl{static createFactory(){return()=>new cO}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(de.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){de.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{e.addTransceiver("audio"),e.addTransceiver("video");const i=await e.createOffer();try{e.close()}catch{}const r=xe(i.sdp);return Eh({sdpObject:r})}catch(i){try{e.close()}catch{}throw i}}async getNativeSctpCapabilities(){return de.debug("getNativeSctpCapabilities()"),{numStreams:W2}}run({direction:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:u}){de.debug("run()"),this._direction=e,this._remoteSdp=new Ph({iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n}),this._sendingRtpParametersByKind={audio:ss("audio",u),video:ss("video",u)},this._sendingRemoteRtpParametersByKind={audio:pn("audio",u),video:pn("video",u)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(de.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){de.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(e){if(de.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});de.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();de.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOptions:r,codec:s}){var n;this.assertSendDirection(),de.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const a=ci(this._sendingRtpParametersByKind[e.kind],{});a.codecs=Ls(a.codecs,s);const o=ci(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=Ls(o.codecs,s);const c=this._remoteSdp.getNextMediaSectionIdx(),d=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let u=await this._pc.createOffer(),p=xe(u.sdp),g;this._transportReady||await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:p});const m=Ch((i||[{}])[0].scalabilityMode);i&&i.length>1&&(de.debug("send() | enabling legacy simulcast"),p=xe(u.sdp),g=p.media[c.idx],Of({offerMediaObject:g,numStreams:i.length}),u={type:"offer",sdp:Os(p)}),de.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const f=d.mid;if(a.mid=f,p=xe(this._pc.localDescription.sdp),g=p.media[c.idx],a.rtcp.cname=Th({offerMediaObject:g}),a.encodings=oo({offerMediaObject:g}),i)for(let w=0;w<a.encodings.length;++w)i[w]&&Object.assign(a.encodings[w],i[w]);if(a.encodings.length>1&&(a.codecs[0].mimeType.toLowerCase()==="video/vp8"||a.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const w of a.encodings)w.scalabilityMode?w.scalabilityMode=`L1T${m.temporalLayers}`:w.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:g,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:r});const b={type:"answer",sdp:this._remoteSdp.getSdp()};return de.debug("send() | calling pc.setRemoteDescription() [answer:%o]",b),await this._pc.setRemoteDescription(b),this._mapMidTransceiver.set(f,d),{localId:f,rtpParameters:a,rtpSender:d.sender}}async stopSending(e){this.assertSendDirection(),de.debug("stopSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();de.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),de.debug("pauseSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();de.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async resumeSending(e){this.assertSendDirection(),de.debug("resumeSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const r=await this._pc.createOffer();de.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async replaceTrack(e,i){this.assertSendDirection(),i?de.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):de.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this.assertSendDirection(),de.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();de.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(e,i){this.assertSendDirection(),de.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{s.encodings[c]={...o,...i}}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();de.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(e){this.assertSendDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:i,maxRetransmits:r,label:s,protocol:n}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:i,maxRetransmits:r,protocol:n};de.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(s,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%W2.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),p=xe(u.sdp),g=p.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:p}),de.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(e){var i;this.assertRecvDirection();const r=[],s=new Map;for(const c of e){const{trackId:d,kind:u,rtpParameters:p,streamId:g}=c;de.debug("receive() [trackId:%s, kind:%s]",d,u);const m=p.mid||String(this._mapMidTransceiver.size);s.set(d,m),this._remoteSdp.receive({mid:m,kind:u,offerRtpParameters:p,streamId:g||p.rtcp.cname,trackId:d})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const o=xe(a.sdp);for(const c of e){const{trackId:d,rtpParameters:u}=c,p=s.get(d),g=o.media.find(m=>String(m.mid)===p);xh({offerRtpParameters:u,answerMediaObject:g})}a={type:"answer",sdp:Os(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),de.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of e){const{trackId:d}=c,u=s.get(d),p=this._pc.getTransceivers().find(g=>g.mid===u);if(!p)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(u,p),r.push({localId:u,track:p.receiver.track,rtpReceiver:p.receiver})}return r}async stopReceiving(e){this.assertRecvDirection();for(const s of e){de.debug("stopReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(n.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();de.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const s of e)this._mapMidTransceiver.delete(s)}async pauseReceiving(e){this.assertRecvDirection();for(const s of e){de.debug("pauseReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();de.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertRecvDirection();for(const s of e){de.debug("resumeReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();de.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:i,protocol:r}){var s;this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=e,d={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:r};de.debug("receiveDataChannel() [options:%o]",d);const u=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const p={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const g=await this._pc.createAnswer();if(!this._transportReady){const m=xe(g.sdp);await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:m})}de.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:e,localSdpObject:i}){i||(i=xe(this._pc.localDescription.sdp));const r=kh({sdpObject:i});r.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((s,n)=>{this.safeEmit("@connect",{dtlsParameters:r},s,n)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}},dO=class extends Qq{constructor({handlerName:t,handlerFactory:e,Handler:i}={}){super({handlerName:t,handlerFactory:e,Handler:i})}switchDevice(t){switch(t){case"Chrome111":this._handlerFactory=kS.createFactory();break;case"Chrome74":this._handlerFactory=Xq.createFactory();break;case"Chrome70":this._handlerFactory=ES.createFactory();break;case"Firefox60":this._handlerFactory=tJ.createFactory();break;case"Safari12":this._handlerFactory=iJ.createFactory();break;case"Edge11":this._handlerFactory=TS.createFactory();break;default:throw new TypeError(`unknown handlerName "${t}"`)}}};const eh="chrome",lO="opera",uO="firefox",pO="iexplorer",hO="safari",gO="nwjs",mO="electron",fO="react-native",xS="unknown",Mf={Chrome:eh,Chromium:eh,Opera:lO,Firefox:uO,"Internet Explorer":pO,Safari:hO};function rJ(){const{userAgent:t}=navigator,e={name:xS,version:void 0};if(t.match(/Chrome/)&&!t.match(/Edge/))if(t.match(/Edg(A?)/)){const i=t.match(/Chrome\/([\d.]+)/)[1];Number.parseInt(i,10)>72&&(e.name=eh,e.version=i)}else e.name=eh,e.version=t.match(/Chrome\/([\d.]+)/)[1];return e}function sJ(){const{userAgent:t}=navigator;if(t.match(/Electron/)){const e=t.match(/Electron\/([\d.]+)/)[1];return{name:mO,version:e}}return null}function nJ(){const{userAgent:t}=navigator;if(t.match(/JitsiMeetNW/)){const e=t.match(/JitsiMeetNW\/([\d.]+)/)[1];return{name:gO,version:e}}}function aJ(){const t=navigator.userAgent.match(/\b(react[ \t_-]*native)(?:\/(\S+))?/i);let e;if(t||navigator.product==="ReactNative")return t&&t.length>2&&(t[1],e=t[2]),e||(e="unknown"),{name:fO,version:e}}function oJ(t){let e;const i=[aJ,sJ,nJ];for(let s=0;s<i.length;s+=1)if(e=i[s](),e)return e;const r=t.getBrowserName();return r in Mf?{name:Mf[r],version:t.getBrowserVersion()}:(e=rJ(),e||{name:xS,version:void 0})}class cJ{constructor(){y(this,"_bowser"),y(this,"_name"),y(this,"_version"),y(this,"getDeviceInfo",()=>({isMobile:this.isMobile(),browserName:this._bowser.getBrowserName(),osName:this._bowser.getOSName(),browserVersion:this._bowser.getBrowserVersion(),osVersionName:this._bowser.getOSVersion(),engineName:this._bowser.getEngineName()}))}init(e){let i,r;if(this._bowser=K_.getParser(navigator.userAgent),typeof e>"u"){const s=oJ(this._bowser);i=s.name,r=s.version}else e.name in Mf?(i=Mf[e.name],r=e.version):(i=xS,r=void 0);this._name=i,this._version=r}getName(){return this._name}isChrome(){return this._name===eh}isOpera(){return this._name===lO}isFirefox(){return this._name===uO}isIExplorer(){return this._name===pO}isSafari(){return this._name===hO}isNWJS(){return this._name===gO}isElectron(){return this._name===mO}isReactNative(){return this._name===fO||navigator.isReactNative===!0}getVersion(){return this._version}isMobile(){return this._bowser.getPlatformType()==="mobile"}_checkCondition(e){if(this._version)return this._bowser.satisfies(e)}isVersionGreaterThan(e){return this._checkCondition({[this._name]:`>${e}`})}isVersionLessThan(e){return this._checkCondition({[this._name]:`<${e}`})}isVersionEqualTo(e){return this._checkCondition({[this._name]:`~${e}`})}}const dJ=72;class lJ extends cJ{doesVideoMuteByStreamRemove(){return this.isChromiumBased()||this.isWebKitBased()}supportsP2P(){return!this.usesUnifiedPlan()}isChromiumBased(){return this.isChrome()||this.isElectron()||this.isNWJS()||this.isOpera()}isWebKitBased(){return this._bowser.isEngine("webkit")&&typeof navigator.mediaDevices<"u"&&typeof navigator.mediaDevices.getUserMedia<"u"&&typeof window.RTCRtpTransceiver<"u"&&Object.keys(RTCRtpTransceiver.prototype).indexOf("currentDirection")>-1}isSupported(){return this.isChromiumBased()&&this._getChromiumBasedVersion()>=dJ||this.isFirefox()||this.isReactNative()||this.isWebKitBased()}isUserInteractionRequiredForUnmute(){return this.isFirefox()&&this.isVersionLessThan("68")}supportsVideoMuteOnConnInterrupted(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsBandwidthStatistics(){return!this.isFirefox()&&!this.isWebKitBased()}supportsCodecPreferences(){return this.usesUnifiedPlan()&&typeof window.RTCRtpTransceiver<"u"&&Object.keys(window.RTCRtpTransceiver.prototype).indexOf("setCodecPreferences")>-1&&Object.keys(RTCRtpSender.prototype).indexOf("getCapabilities")>-1&&!this.isWebKitBased()}supportsDeviceChangeEvent(){return navigator.mediaDevices&&typeof navigator.mediaDevices.ondevicechange<"u"&&typeof navigator.mediaDevices.addEventListener<"u"}supportsLocalCandidateRttStatistics(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsPerformanceObserver(){return typeof window.PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes.indexOf("longtask")>-1}supportsReceiverStats(){return typeof window.RTCRtpReceiver<"u"&&Object.keys(RTCRtpReceiver.prototype).indexOf("getSynchronizationSources")>-1}supportsRTTStatistics(){return!this.isFirefox()}usesPlanB(){return!this.usesUnifiedPlan()}usesSdpMungingForSimulcast(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}usesUnifiedPlan(){return!!(this.isFirefox()||this.isWebKitBased())}usesNewGumFlow(){return!!(this.isChromiumBased()||this.isFirefox()||this.isWebKitBased())}usesAdapter(){return this.usesNewGumFlow()}usesRidsForSimulcast(){return!1}supportsGetDisplayMedia(){return typeof navigator.getDisplayMedia<"u"||typeof navigator.mediaDevices<"u"&&typeof navigator.mediaDevices.getDisplayMedia<"u"}supportsInsertableStreams(){if(!(typeof window.RTCRtpSender<"u"&&(window.RTCRtpSender.prototype.createEncodedStreams||window.RTCRtpSender.prototype.createEncodedVideoStreams)))return!1;const e=new ReadableStream;try{return window.postMessage(e,"*",[e]),!0}catch{return!1}}supportsAudioRed(){return!!(window.RTCRtpSender&&window.RTCRtpSender.getCapabilities&&window.RTCRtpSender.getCapabilities("audio").codecs.some(e=>e.mimeType==="audio/red")&&window.RTCRtpReceiver&&window.RTCRtpReceiver.getCapabilities&&window.RTCRtpReceiver.getCapabilities("audio").codecs.some(e=>e.mimeType==="audio/red"))}supportsSdpSemantics(){return this.isChromiumBased()}_getChromiumBasedVersion(){if(this.isChromiumBased()){if(this.isNWJS())return Number.parseInt(process.versions.chromium,10);const e=navigator.userAgent;if(e.match(/Chrome/))return Number.parseInt(e.match(/Chrome\/([\d.]+)/)[1],10)}return-1}isIOSMobile(){return this.isMobile&&this._bowser.getOSName()==="iOS"}}const Ue=new lJ,vO={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},hd:{width:{ideal:1280},height:{ideal:720}},hd_cropped:{width:{ideal:900},height:{ideal:720}}},q2={},uJ=[{rid:"r0",scalabilityMode:"L1T2"},{rid:"r1",scalabilityMode:"L1T2"}],pJ=[{active:!1,adaptivePtime:!1,networkPriority:"low",priority:"low"},{active:!1,adaptivePtime:!1,networkPriority:"low",priority:"low"},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:25e5}],hJ=[{active:!1,priority:"low"},{active:!1,priority:"low"},{active:!0,priority:"low"}],J2={320:[{rid:"q",maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"}],640:[{rid:"q",scaleResolutionDownBy:2,maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"h",maxBitrate:75e4,maxFramerate:30,scalabilityMode:"L1T3"}],1280:[{rid:"q",scaleResolutionDownBy:4,maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"h",scaleResolutionDownBy:2,maxBitrate:75e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"f",maxBitrate:15e5,maxFramerate:30,scalabilityMode:"L1T3"}]},gJ=[{scalabilityMode:"L3T3_KEY"}];var ae=(t=>(t.WEBCAM="webcam",t.MIC="mic",t.SCREENSHARE_VIDEO="screenshare_video",t.SCREENSHARE_AUDIO="screenshare_audio",t))(ae||{});function mJ(t){return t.replace(/([-_]\w)/g,e=>e[1].toUpperCase())}function Zr(t){if(!t||typeof t!="object")return t;if(Array.isArray(t))return t.map(i=>Zr(i));const e={};return Object.keys(t).forEach(i=>{const r=H_(i)?i:mJ(i);e[r]=Zr(t[i])}),e}function fJ(t){return t.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`)}function yO(t){if(!t||typeof t!="object")return t;if(Array.isArray(t))return t.map(i=>yO(i));const e={};return Object.keys(t).forEach(i=>{const r=H_(i)?i:fJ(i);e[r]=t[i]}),e}function B1(t,e={}){return t==null?{}:(Object.getOwnPropertyNames(t).forEach(i=>{if(typeof t[i]!="function"){if(typeof t[i]=="object"){B1(t[i],e[i]={});return}e[i]=t[i]}}),e)}function vJ(t,e){const i=t.indexOf(e);return i>-1&&t.splice(i,1),t}var H1=(t=>(t.PARTICIPANT="PARTICIPANT",t.PEER="PEER",t.CLIENT="CLIENT",t))(H1||{});const re={INTERNAL_CALL_STATS:"internal_call_stats",SIMULCAST:"simulcast",CHAT_SOCKET_SERVER:"chat_socket_server",POLL_SOCKET_SERVER:"poll_socket_server",PLUGIN_SOCKET_SERVER:"plugin_socket_server",NR_OTEL_WEB:"nr_otel_web",CONNECTED_MEETINGS:"connected_meetings",ICE_RESTART_ON_FAILED_STATE:"ice_restart_on_failed_state",ICE_RESTART_ON_DISCONNECTED_STATE:"ice_restart_on_disconnected_state",ENABLE_ICE_STATE_LOGGING:"enable_ice_state_logging",REMOVE_OPERATIONAL_MIC:"web_core_remove_operational_mic",SUPPRESS_PEER_MUTE_UNMUTE_EMITS:"web_core_suppress_peer_mute_unmute_emits",SKIP_OTEL_TRACES:"skip_otel_traces",NEW_LOCAL_MEDIA_HANDLER:"new_local_media_handler",CALLSTATS_INGESTION_LAYER:"callstats_ingestion_layer",USE_USERIDS_IN_CHAT:"use_userids_in_chat",CUSTOM_PING_PONG:"custom_ping_pong",ENABLE_HIVE_SIMULCAST:"enable_hive_simulcast",ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED:"enable_hive_transport_reconnection_on_ice_failed",ENABLE_HIVE_EXPERIMENTAL_FAIL_RECOVERY:"enable_hive_fail_recovery",BYPASS_LOG_EXCLUSION_LIST:"bypass_log_exclusion_list",LOG_LEVEL:"log_level",V1_PLUGINS:"v1_plugins",SCREENSHARE_DTX:"screenshare_dtx",SCREENSHARE_PRIORITY:"screenshare_priority",SCREENSHARE_MIN_BITRATE:"screenshare_minbitrate",SCREENSHARE_MAX_DIMENSIONS:"screenshare_maxdimensions",SCREENSHARE_SIMULCAST:"screenshare_simulcast",DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE:"disable_webcam_layers_on_screenshare",SCREENSHARE_FORCE_GOOG_CONFERENCE:"screenshare_force_goog_conference",LIVESTREAM:"feat_livestream",FETCH_RETRY:"fetch_retry",DEVICE_REMOVE_EXP:"device_remove_exp",DISABLE_WEBCAM_SIMULCAST:"webcore_disable_webcam_simulcast",OVERRIDE_WEBCAM_SIMULCAST:"override_webcam_simulcast",SOCKET_POLLING:"socket_polling",NS_NETWORK_SCORE:"ns_network_score",FEAT_PAGINATED_CHAT:"feat_paginated_chat",VAL_MIN_FRAMERATE:"val_min_framerate",EXTENSION_HACK:"extension_hack",VAL_MAX_FRAMERATE_EXT:"val_max_framerate_ext",VAL_MIN_FRAMERATE_EXT:"val_min_framerate_ext",SCREEENSHARE_ERR_HACK:"screenshare_err_hack",TROUBLESHOOTING:"feat_troubleshooting",VIDEO_CONSTRAINTS:"video_constraints",SCREENSHARE_CONSTRAINTS:"screenshare_constraints",FEAT_CHAT_SDK:"feat_chat_sdk",FEAT_CHAT_SDK_SEARCH:"chat_search",OBS_QUALITY:"obs_quality"},et={roomName:void 0,authToken:void 0,peerId:void 0,apiBase:void 0,defaults:{audio:!0,video:!0},modules:void 0,organizationId:void 0,overrides:{}};function yJ(t){var e;et.roomName!=null||(et.roomName=t==null?void 0:t.roomName),et.authToken!=null||(et.authToken=t==null?void 0:t.authToken),et.peerId!=null||(et.peerId=t==null?void 0:t.peerId),et.apiBase!=null||(et.apiBase=t==null?void 0:t.apiBase),et.modules!=null||(et.modules=t==null?void 0:t.modules),et.organizationId!=null||(et.organizationId=t==null?void 0:t.organizationId),et.defaults={...et.defaults,...(e=t==null?void 0:t.defaults)!=null?e:{}}}const Cl="1.17.3",Df="web-core",bJ=fq(),hr=Zr(bJ.config.media);var dm;class bO{constructor(e){R(this,dm,void 0),y(this,"getScreenShareConstraints",()=>{var i,r;const{displaySurface:s}=(i=et.defaults.screenShare)!=null?i:{};let n={width:{max:1920},height:{max:1080},frameRate:{ideal:parseInt((r=ee.getValue(re.VAL_MIN_FRAMERATE))!=null?r:"5",10),max:5}};if(ee.hasFeature(re.SCREENSHARE_CONSTRAINTS)){const a=ee.getValue(re.SCREENSHARE_CONSTRAINTS);n=JSON.parse(a)}return s!==void 0&&["monitor","browser","window"].includes(s)&&(n={...n,displaySurface:s}),{audio:!0,video:n}}),y(this,"getAudioConstraints",i=>{const r={};return Ue.isFirefox()||Ue.isWebKitBased()?(r.audio={deviceId:i,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},r):(r.audio={},r.audio.optional=[i?{sourceId:i}:{sourceId:"default"},{echoCancellation:!0},{googEchoCancellation:!0},{googAutoGainControl:!0},{googNoiseSuppression:!0},{googHighpassFilter:!0}],r)}),y(this,"getVideoConstraints",i=>{const r={},{quality:s}=h(this,dm).video;let n=vO[s];if(n.frameRate={ideal:24},Ue.isChromiumBased()&&(n.frameRate.max=30),ee.hasFeature(re.VIDEO_CONSTRAINTS)){const a=ee.getValue(re.VIDEO_CONSTRAINTS);n=JSON.parse(a)}return r.video=n,i?r.video.deviceId={exact:i}:r.video.facingMode="user",r}),I(this,dm,e??hr)}}dm=new WeakMap;var wJ=/\s/;function _J(t){for(var e=t.length;e--&&wJ.test(t.charAt(e)););return e}var SJ=/^\s+/;function EJ(t){return t&&t.slice(0,_J(t)+1).replace(SJ,"")}var K2=0/0,kJ=/^[-+]0x[0-9a-f]+$/i,TJ=/^0b[01]+$/i,xJ=/^0o[0-7]+$/i,PJ=parseInt;function Y2(t){if(typeof t=="number")return t;if(pq(t))return K2;if(ao(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ao(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=EJ(t);var i=TJ.test(t);return i||xJ.test(t)?PJ(t.slice(2),i?2:8):kJ.test(t)?K2:+t}function wO(t){return t}function CJ(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function RJ(){}var AJ=800,IJ=16,OJ=Date.now;function MJ(t){var e=0,i=0;return function(){var r=OJ(),s=IJ-(r-i);if(i=r,s>0){if(++e>=AJ)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function DJ(t){return function(){return t}}var LJ=Cf?function(t,e){return Cf(t,"toString",{configurable:!0,enumerable:!1,value:DJ(e),writable:!0})}:wO;const NJ=LJ;var UJ=MJ(NJ);const jJ=UJ;function $J(t,e,i,r){for(var s=t.length,n=i+(r?1:-1);r?n--:++n<s;)if(e(t[n],n,t))return n;return-1}function zJ(t){return t!==t}function FJ(t,e,i){for(var r=i-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}function VJ(t,e,i){return e===e?FJ(t,e,i):$J(t,zJ,i)}function _O(t,e){var i=t==null?0:t.length;return!!i&&VJ(t,e,0)>-1}var Q2=Math.max;function BJ(t,e,i){return e=Q2(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,n=Q2(r.length-e,0),a=Array(n);++s<n;)a[s]=r[e+s];s=-1;for(var o=Array(e+1);++s<e;)o[s]=r[s];return o[e]=i(a),CJ(t,this,o)}}function HJ(t,e){return jJ(BJ(t,e,wO),t+"")}var Z2=un?un.isConcatSpreadable:void 0;function GJ(t){return Ac(t)||pS(t)||!!(Z2&&t&&t[Z2])}function SO(t,e,i,r,s){var n=-1,a=t.length;for(i||(i=GJ),s||(s=[]);++n<a;){var o=t[n];e>0&&i(o)?e>1?SO(o,e-1,i,r,s):vS(s,o):r||(s[s.length]=o)}return s}var WJ="__lodash_hash_undefined__";function qJ(t){return this.__data__.set(t,WJ),this}function JJ(t){return this.__data__.has(t)}function Rl(t){var e=-1,i=t==null?0:t.length;for(this.__data__=new Fc;++e<i;)this.add(t[e])}Rl.prototype.add=Rl.prototype.push=qJ;Rl.prototype.has=JJ;function KJ(t,e){for(var i=-1,r=t==null?0:t.length;++i<r;)if(e(t[i],i,t))return!0;return!1}function PS(t,e){return t.has(e)}var YJ=1,QJ=2;function EO(t,e,i,r,s,n){var a=i&YJ,o=t.length,c=e.length;if(o!=c&&!(a&&c>o))return!1;var d=n.get(t),u=n.get(e);if(d&&u)return d==e&&u==t;var p=-1,g=!0,m=i&QJ?new Rl:void 0;for(n.set(t,e),n.set(e,t);++p<o;){var f=t[p],b=e[p];if(r)var w=a?r(b,f,p,e,t,n):r(f,b,p,t,e,n);if(w!==void 0){if(w)continue;g=!1;break}if(m){if(!KJ(e,function(v,_){if(!PS(m,_)&&(f===v||s(f,v,i,r,n)))return m.push(_)})){g=!1;break}}else if(!(f===b||s(f,b,i,r,n))){g=!1;break}}return n.delete(t),n.delete(e),g}function ZJ(t){var e=-1,i=Array(t.size);return t.forEach(function(r,s){i[++e]=[s,r]}),i}function CS(t){var e=-1,i=Array(t.size);return t.forEach(function(r){i[++e]=r}),i}var XJ=1,eK=2,tK="[object Boolean]",iK="[object Date]",rK="[object Error]",sK="[object Map]",nK="[object Number]",aK="[object RegExp]",oK="[object Set]",cK="[object String]",dK="[object Symbol]",lK="[object ArrayBuffer]",uK="[object DataView]",X2=un?un.prototype:void 0,j0=X2?X2.valueOf:void 0;function pK(t,e,i,r,s,n,a){switch(i){case uK:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case lK:return!(t.byteLength!=e.byteLength||!n(new Rf(t),new Rf(e)));case tK:case iK:case nK:return uS(+t,+e);case rK:return t.name==e.name&&t.message==e.message;case aK:case cK:return t==e+"";case sK:var o=ZJ;case oK:var c=r&XJ;if(o||(o=CS),t.size!=e.size&&!c)return!1;var d=a.get(t);if(d)return d==e;r|=eK,a.set(t,e);var u=EO(o(t),o(e),r,s,n,a);return a.delete(t),u;case dK:if(j0)return j0.call(t)==j0.call(e)}return!1}var hK=1,gK=Object.prototype,mK=gK.hasOwnProperty;function fK(t,e,i,r,s,n){var a=i&hK,o=U1(t),c=o.length,d=U1(e),u=d.length;if(c!=u&&!a)return!1;for(var p=c;p--;){var g=o[p];if(!(a?g in e:mK.call(e,g)))return!1}var m=n.get(t),f=n.get(e);if(m&&f)return m==e&&f==t;var b=!0;n.set(t,e),n.set(e,t);for(var w=a;++p<c;){g=o[p];var v=t[g],_=e[g];if(r)var k=a?r(_,v,g,e,t,n):r(v,_,g,t,e,n);if(!(k===void 0?v===_||s(v,_,i,r,n):k)){b=!1;break}w||(w=g=="constructor")}if(b&&!w){var P=t.constructor,D=e.constructor;P!=D&&"constructor"in t&&"constructor"in e&&!(typeof P=="function"&&P instanceof P&&typeof D=="function"&&D instanceof D)&&(b=!1)}return n.delete(t),n.delete(e),b}var vK=1,ex="[object Arguments]",tx="[object Array]",yg="[object Object]",yK=Object.prototype,ix=yK.hasOwnProperty;function bK(t,e,i,r,s,n){var a=Ac(t),o=Ac(e),c=a?tx:Pl(t),d=o?tx:Pl(e);c=c==ex?yg:c,d=d==ex?yg:d;var u=c==yg,p=d==yg,g=c==d;if(g&&Xp(t)){if(!Xp(e))return!1;a=!0,u=!1}if(g&&!u)return n||(n=new Gn),a||hS(t)?EO(t,e,i,r,s,n):pK(t,e,c,i,r,s,n);if(!(i&vK)){var m=u&&ix.call(t,"__wrapped__"),f=p&&ix.call(e,"__wrapped__");if(m||f){var b=m?t.value():t,w=f?e.value():e;return n||(n=new Gn),s(b,w,i,r,n)}}return g?(n||(n=new Gn),fK(t,e,i,r,s,n)):!1}function kO(t,e,i,r,s){return t===e?!0:t==null||e==null||!Zn(t)&&!Zn(e)?t!==t&&e!==e:bK(t,e,i,r,kO,s)}var wK=function(){return Ns.Date.now()};const $0=wK;var _K="Expected a function",SK=Math.max,EK=Math.min;function kK(t,e,i){var r,s,n,a,o,c,d=0,u=!1,p=!1,g=!0;if(typeof t!="function")throw new TypeError(_K);e=Y2(e)||0,ao(i)&&(u=!!i.leading,p="maxWait"in i,n=p?SK(Y2(i.maxWait)||0,e):n,g="trailing"in i?!!i.trailing:g);function m(M){var B=r,G=s;return r=s=void 0,d=M,a=t.apply(G,B),a}function f(M){return d=M,o=setTimeout(v,e),u?m(M):a}function b(M){var B=M-c,G=M-d,ne=e-B;return p?EK(ne,n-G):ne}function w(M){var B=M-c,G=M-d;return c===void 0||B>=e||B<0||p&&G>=n}function v(){var M=$0();if(w(M))return _(M);o=setTimeout(v,b(M))}function _(M){return o=void 0,g&&r?m(M):(r=s=void 0,a)}function k(){o!==void 0&&clearTimeout(o),d=0,r=c=s=o=void 0}function P(){return o===void 0?a:_($0())}function D(){var M=$0(),B=w(M);if(r=arguments,s=this,c=M,B){if(o===void 0)return f(c);if(p)return clearTimeout(o),o=setTimeout(v,e),m(c)}return o===void 0&&(o=setTimeout(v,e)),a}return D.cancel=k,D.flush=P,D}function TK(t){return Zn(t)&&Wv(t)}function TO(t,e,i){for(var r=-1,s=t==null?0:t.length;++r<s;)if(i(e,t[r]))return!0;return!1}var xK=200;function PK(t,e,i,r){var s=-1,n=_O,a=!0,o=t.length,c=[],d=e.length;if(!o)return c;i&&(e=hq(e,Hv(i))),r?(n=TO,a=!1):e.length>=xK&&(n=PS,a=!1,e=new Rl(e));e:for(;++s<o;){var u=t[s],p=i==null?u:i(u);if(u=r||u!==0?u:0,a&&p===p){for(var g=d;g--;)if(e[g]===p)continue e;c.push(u)}else n(e,p,r)||c.push(u)}return c}function CK(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var RK="[object Map]",AK="[object Set]",IK=Object.prototype,OK=IK.hasOwnProperty;function xO(t){if(t==null)return!0;if(Wv(t)&&(Ac(t)||typeof t=="string"||typeof t.splice=="function"||Xp(t)||hS(t)||pS(t)))return!t.length;var e=Pl(t);if(e==RK||e==AK)return!t.size;if(Gv(t))return!BI(t).length;for(var i in t)if(OK.call(t,i))return!1;return!0}function MK(t,e){return kO(t,e)}var DK=1/0,LK=cl&&1/CS(new cl([,-0]))[1]==DK?function(t){return new cl(t)}:RJ;const NK=LK;var UK=200;function rx(t,e,i){var r=-1,s=_O,n=t.length,a=!0,o=[],c=o;if(i)a=!1,s=TO;else if(n>=UK){var d=e?null:NK(t);if(d)return CS(d);a=!1,s=PS,c=new Rl}else c=e?[]:o;e:for(;++r<n;){var u=t[r],p=e?e(u):u;if(u=i||u!==0?u:0,a&&p===p){for(var g=c.length;g--;)if(c[g]===p)continue e;e&&c.push(p),o.push(u)}else s(c,p,i)||(c!==o&&c.push(p),o.push(u))}return o}function jK(t,e,i){var r=t.length;if(r<2)return r?rx(t[0]):[];for(var s=-1,n=Array(r);++s<r;)for(var a=t[s],o=-1;++o<r;)o!=s&&(n[s]=PK(n[s]||a,t[o],e,i));return rx(SO(n,1),e,i)}var $K=HJ(function(t){var e=CK(t);return e=typeof e=="function"?e:void 0,jK(GI(t,TK),void 0,e)});const zK=$K;function lm(t){const e={};return typeof(t==null?void 0:t.code)=="number"&&(e.code=t.code),typeof(t==null?void 0:t.code)=="string"&&(e.code=t.code.substring(0,100)),typeof(t==null?void 0:t.name)=="string"&&(e.name=t.name.substring(0,500)),typeof(t==null?void 0:t.message)=="string"&&(e.message=t.message.substring(0,500)),typeof(t==null?void 0:t.reason)=="string"&&(e.reason=t.reason.substring(0,500)),typeof(t==null?void 0:t.stack)=="string"&&(e.stack=t.stack.substring(0,500)),e}function um(){var t,e,i,r;const s=typeof navigator<"u"&&!navigator.isReactNative&&((t=window.location.host)==null?void 0:t.includes("staging"))&&((e=window.location.host)==null?void 0:e.includes("dyte.io")),n=!!((r=(i=et.modules)==null?void 0:i.devTools)!=null&&r.logs);return s||n}function FK(t){if(ee.hasFeature(re.LOG_LEVEL)){let e=ee.getValue(re.LOG_LEVEL)||"all";if(e=e.toLowerCase().trim(),e==="off")return!1;if(e!=="all"){const i=["debug","log","info","warn","error"],r=i.indexOf(t),s=i.indexOf(e);if(r<s)return!1}}return!0}function PO(t,e,i={}){return Object.getOwnPropertyNames(t).forEach(r=>{var s;if([null,void 0,NaN].includes(t[r])||e&&(((s=e.match(/\./g))==null?void 0:s.length)||0)>=10)return;const n=e?`${e}.${r}`:r;typeof t[r]=="object"?PO(t[r],n,i):["number","string","boolean"].includes(typeof t[r])&&(i[n]=t[r])}),i}function z0(t,e={},i=""){const r={};try{const s=JSON.stringify(e),n=JSON.parse(s),a=PO(n,i),o=JSON.stringify(a);if(o.length>5e3){const c=`Log named: "${t}" is trying to log an flattened object of size ${o.length} chars that is beyond permitted limit of 5000 chars. Please optimize.`;throw um()&&console.error(c,{log:e,flattened:o}),new Error(c)}return JSON.parse(o)}catch(s){const n=lm(s);r[`${i}.error.message`]=n.message||"",r[`${i}.error.stack`]=n.stack||"",r[`${i}.error.reason`]=n.reason||"",r[`${i}.error.source`]="safelyFlattenObjForOpenTelemetry"}return r}const Ee={isV2AuthToken:!1,meetingId:null,overrides:{},roomNodeOptions:void 0},mu={baseURL:"http://localhost:5000",createdAt:"2021-08-05T10:49:56.602Z",description:"Develop plugins locally",id:"09259e3b-7be8-46f6-9801-106bf1866e1c",name:"Localhost Dev",organizationId:"4ad15a19-80e2-4105-bf43-48039fd2963e",picture:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/dyte.png",private:!1,published:!0,staggered:!1,tags:["#localhost","#dev"],type:"self_hosted",updatedAt:"2021-08-05T10:50:07.681Z"};function VK(t,e){if(e){Ee.isV2AuthToken=!1;return}try{const{meetingId:i}=JSON.parse(atob(t.split(".")[1]));if(!i)throw Error(`Received V1 auth token ${t}`);Ee.isV2AuthToken=!0,Ee.meetingId=i}catch(i){throw S.error("constants::setIsV2AuthToken",{error:i,debuggingHint:`Unable to decode auth token: ${t}`},!0),new A("Invalid auth token")}}function BK(t){Ee.overrides=t}function Lf(t){return Ee.overrides&&Ee.overrides[t]?Ee.overrides[t]:!1}function CO(t){Ee.roomNodeOptions=t}function RO(t,e){return!!(Ee.isV2AuthToken&&(ee.hasFeature(re.CONNECTED_MEETINGS)||t===_i.Livestream||t===_i.Chat)||e.includes("HIVE"))}function RS(t,e){return RO(t,e)?!0:(ee.getValue(re.CHAT_SOCKET_SERVER)||Lf(re.CHAT_SOCKET_SERVER)||"socket-service")==="socket-service"}function AO(t,e){return RO(t,e)?!0:(ee.getValue(re.POLL_SOCKET_SERVER)||"socket-service")==="socket-service"}function AS(t,e){return e.includes("HIVE")?!0:(ee.getValue(re.PLUGIN_SOCKET_SERVER)||"socket-service")==="socket-service"}function IO(t,e){return RS(t,e)||AO(t,e)||AS(t,e)}const _e=class{static get logsEndpoint(){return um()?"https://api-silos-staging.dyte.io/otel/logs":"https://api-silos.dyte.io/otel/logs"}static init(t,e){if(navigator.isReactNative)return;const i=new Jz({url:"https://otel.dyte.io/v1/traces",headers:{"api-key":""}});let r=um()?"staging":"production";const s=new W$({resource:new rF({"service.name":Df,sdk_version:Cl,env:r,...z0("OTELResource",Ue.getDeviceInfo(),"device")}),idGenerator:{generateTraceId:()=>`${t}`.replace(/-/g,""),generateSpanId:()=>Pv().replace(/-/g,"").substring(0,16)}});_e.tracingEnabled=e,_e.tracer=s.getTracer(t),_e.meetingMetadata.peerId=t,_e.meetingMetadata.sdkVersion=Cl,_e.meetingMetadata.deviceInfo=Ue.getDeviceInfo(),_e.meetingMetadata.visitedUrl=!navigator.isReactNative&&typeof window<"u"&&window.location.href,s.addSpanProcessor(new NA(i)),"zone"in window?s.register({contextManager:new Yz}):s.register({contextManager:new UA}),_e.contextPropagator=sl,document.addEventListener("visibilitychange",_e.processCachedLogs),_e.logsProcessorTimer=setInterval(_e.processCachedLogs,_e.logsProcessingInterval),_e.initPerformanceObserver(),e&&(_e.rootSpan=_e.tracer.startSpan(`peer_${t}`,{},Wr),_e.rootSpan.end(),_e.initialized=!0)}static initPerformanceObserver(){try{typeof PerformanceObserver<"u"&&!Lf("disable_api_peformance_observer")&&(_e.apiPerformanceObserver=new PerformanceObserver(t=>{var e;(e=t.getEntries())==null||e.forEach(i=>{var r;const s=i==null?void 0:i.toJSON();["xmlhttprequest","fetch"].includes(s.initiatorType)&&(r=s.name)!=null&&r.includes("dyte")&&S.debug(`api_performance_observer::${s.name}`,{performanceObserver:{api:s}})})}),_e.apiPerformanceObserver.observe({type:"resource",buffered:!0}))}catch{}}static trace(t){return(e,i,r)=>{const s=r.value;return r.value=function(...n){if(!_e.initialized||navigator.isReactNative||!_e.tracingEnabled||ee.hasFeature(re.SKIP_OTEL_TRACES))return s.apply(this,n);const a=_e.getCurrentSpan(),o=lg.trace.setSpan(Wr,a);return ee.hasFeature(re.NR_OTEL_WEB)||_e.addLogInCurrentSpan("info",t),_e.tracer.startActiveSpan(t,{},o,c=>{const d=s.apply(this,n);return Promise.resolve(d).then(()=>{c.end()}).catch(()=>{c.end()}),d})},r}}static getCurrentSpan(){if(navigator.isReactNative)return null;let t=lg.trace.getSpan(lg.context.active());return t!=null||(t=_e.rootSpan),t}static getCurrentContext(){return lg.trace.setSpan(Wr,_e.getCurrentSpan())}static getCurrentSpanName(){var t;return(t=this.getCurrentSpan())==null?void 0:t.name}static injectContext(t){_e.getCurrentSpan()&&_e.contextPropagator.inject(_e.getCurrentContext(),t)}static addLogInCurrentSpan(t,e,i={},r=!1){var s,n;if(i!=null&&i.error&&Object.assign(i,{error:lm(i.error)}),um()&&(xO(i)?console[t]("DyteInternalLogs:: ",t,e):console[t]("DyteInternalLogs:: ",t,e,i)),!!FK(t))try{const a=z0(e,i,"metadata"),o=_e.getCurrentSpan(),c=new Date,d={message:e,level:t,...a,"trace.id":(s=o==null?void 0:o.spanContext())==null?void 0:s.traceId,"span.id":(n=o==null?void 0:o.spanContext())==null?void 0:n.spanId,loggedAt:c.toISOString(),loggedAtTzOffset:c.getTimezoneOffset()};r?_e.sendOtelLogsToNewRelic([d]):_e.logsCache.push(d)}catch(a){_e.addLogInCurrentSpan("error","opentelemetry::addLogInCurrentSpan_failed",{error:lm(a)})}}static sendOtelLogsToNewRelic(t){mf.post(_e.logsEndpoint,{meetingMetadata:z0("sendOtelLogsToNewRelic",_e.meetingMetadata,"meetingMetadata"),serviceName:Df,logs:t}).catch(e=>{_e.addLogInCurrentSpan("error","opentelemetry::sendOtelLogToNewRelic_failed",{error:lm(e)}),_e.logsCache.push(...t)})}static processCachedLogs(){const t=_e.logsCache.splice(0,25);t!=null&&t.length&&_e.sendOtelLogsToNewRelic(t)}static destruct(){var t;clearInterval(_e.logsProcessorTimer),_e.processCachedLogs(),!navigator.isReactNative&&(document.removeEventListener("visibilitychange",_e.processCachedLogs),(t=_e.apiPerformanceObserver)==null||t.disconnect())}};let E=_e;y(E,"tracer"),y(E,"contextPropagator"),y(E,"apiPerformanceObserver"),y(E,"rootSpan"),y(E,"logsCache",[]),y(E,"logsProcessorTimer"),y(E,"tracingEnabled",!0),y(E,"initialized",!1),y(E,"logsProcessingInterval",7e3),y(E,"logExclusionList",["message","websocket/message","roomMessage","websocket/room-message","websocket/room-legacy-mode","chatMessage","websocket/new-chat-message","websocket/no-active-speaker","websocket/selected-peers","websocket/active-speaker","ping","websocket/new-consumer","websocket/producer-score","websocket/consumer-score","websocket/plugin-event","websocket/plugin-data","websocket/plugin-internal-data"]),y(E,"meetingMetadata",{});let S=class{static info(e,i,r){E.addLogInCurrentSpan("info",e,i,r)}static error(e,i,r){E.addLogInCurrentSpan("error",e,i,r)}static debug(e,i,r){E.addLogInCurrentSpan("debug",e,i,r)}static log(e,i,r){E.addLogInCurrentSpan("log",e,i,r)}static warn(e,i,r){E.addLogInCurrentSpan("warn",e,i,r)}};const HK={"00":"DyteClient","01":"Controller","02":"RoomNodeClient","03":"HiveNodeClient","04":"SocketService","05":"Chat","06":"Plugin","07":"Polls","08":"Meta","09":"Preset",10:"Recording",11:"Self",12:"Participant",13:"Spotlight",14:"Remote Request",15:"Webinar",16:"LocalMediaHandler"},pm={"0000":"Internal exception.","0001":"Failed to initialize.","0002":"Failed to join room.","0003":"Failed to leave room.","0100":"Internal exception","0200":"Internal exception.","0300":"Internal exception","0400":"Internal exception","0500":"Internal exception","0501":"Permission denied.","0502":"Invalid message body.","0510":"Invalid channel name.","0600":"Internal exception","0700":"Internal exception","0800":"Internal exception","0900":"Internal exception",1e3:"Internal exception",1100:"Internal exception",1200:"Internal exception",1300:"Internal exception",1400:"Internal exception",1500:"Internal exception",1600:"Internal exception",1601:"Failed to get audio track",1602:"Failed to get video track",1603:"Incorrect device",1604:"Failed to change device",1700:"Internal exception"};Object.keys(pm).forEach(t=>{pm[t]=`{${HK[t.slice(0,2)]}} ${pm[t]}`});class A extends Error{constructor(e,i,r=!1){super(e),y(this,"code"),this.code=i,this.name="DyteError",this.message=`[ERR${this.code}]: ${pm[this.code]}
${this.message}`;try{let s=r;i&&i.endsWith("00")&&(s=!0),s&&S.error("DyteError",{error:{message:this.message,name:this.name,code:i}})}catch{}}}function bg(t,e,i,r){if(typeof i=="function"&&r instanceof e)i.call(null,r,t);else throw r}function sx(t,e,i){if(!t.value){const s=t.get,n=t.set;return s&&(t.get=function(){try{return s.apply(this)}catch(a){bg(this,e,i,a)}}),n&&(t.set=function(a){try{return n.apply(this,[a])}catch(o){bg(this,e,i,o)}}),t}const r=t.value;return t.value=function(...s){try{const n=r.apply(this,s);return n&&n instanceof Promise?n.catch(a=>{bg(this,e,i,a)}):n}catch(n){bg(this,e,i,n)}},t}function GK(t,e){return(i,r,s)=>{if(s)return sx(s,t,e);for(const n of Reflect.ownKeys(i.prototype).filter(a=>a!=="constructor")){const a=Object.getOwnPropertyDescriptor(i.prototype,n);(a.value instanceof Function||a.get instanceof Function||a.set instanceof Function)&&Object.defineProperty(i.prototype,n,sx(a,t,e))}}}const qi=t=>GK(Error,t);var No=(t=>(t.allowed="ALLOWED",t.notAllowed="NOT_ALLOWED",t.canRequest="CAN_REQUEST",t))(No||{});const WK={view_type:_i.GroupCall,accept_waiting_requests:!1,request_produce:!1,can_allow_participant_audio:!0,can_allow_participant_screensharing:!1,can_allow_participant_video:!0,request_kick_participant:!1,kick_participant:!0,pin_participant:!0,can_record:!1,waiting_room_type:"SKIP",plugins:{can_close:!0,can_start:!0,can_edit_acl:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},produce:{video:{allow:!0,quality:hr.video.quality,frame_rate:hr.video.frameRate},audio:!0,screenshare:{allow:!0,quality:hr.screenshare.quality,frame_rate:hr.screenshare.frameRate}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},reactions:!1,hidden_participant:!1,show_participant_list:!0,can_change_participant_role:!0,can_change_theme:!1,can_present:!1,accept_present_requests:!1,can_edit_display_name:!1,max_screenshare_count:1,is_recorder:!1,can_spotlight:!1},qK=Zr(WK);var Ce;const G1=class{constructor(t){if(R(this,Ce,void 0),!t)throw S.error("DytePermissionsPresetV1::load_preset_permissions_failed"),new A("Could not load preset permissions.");I(this,Ce,t)}static fromResponse(t){return new G1(t)}static default(){return new G1(qK)}get viewType(){return h(this,Ce).viewType}get acceptWaitingRequests(){return h(this,Ce).acceptWaitingRequests}get requestProduce(){return h(this,Ce).requestProduce}get requestProduceAudio(){return this.requestProduce}get requestProduceScreenshare(){return this.requestProduce}get canAllowParticipantAudio(){return h(this,Ce).canAllowParticipantAudio}get canAllowParticipantScreensharing(){return h(this,Ce).canAllowParticipantScreensharing}get canAllowParticipantVideo(){return h(this,Ce).canAllowParticipantVideo}get canDisableParticipantAudio(){return this.canAllowParticipantAudio}get canDisableParticipantVideo(){return this.canAllowParticipantVideo}get kickParticipant(){return h(this,Ce).kickParticipant}get pinParticipant(){return h(this,Ce).pinParticipant}get canRecord(){return h(this,Ce).canRecord}get waitingRoomType(){return h(this,Ce).waitingRoomType}get waitingRoomBehaviour(){return h(this,Ce).waitingRoomType==="SKIP"?"SKIP":h(this,Ce).waitingRoomType==="SKIP_ON_PRIVILEGED_USER_ENTRY"?"ON_PRIVILEGED_USER_ENTRY":h(this,Ce).waitingRoomType==="ON_ACCEPT"?"SKIP_ON_ACCEPT":"SKIP"}get plugins(){return h(this,Ce).plugins}get polls(){return{...h(this,Ce).polls,canViewResults:h(this,Ce).polls.canView}}get produceVideo(){return{...h(this,Ce).produce.video,allow:h(this,Ce).produce.video.allow?"ALLOWED":"NOT_ALLOWED"}}get canProduceVideo(){const t=h(this,Ce).produce.video.allow;return this.requestProduce?"CAN_REQUEST":t?"ALLOWED":"NOT_ALLOWED"}get produceScreenshare(){return{...h(this,Ce).produce.screenshare,allow:h(this,Ce).produce.screenshare.allow?"ALLOWED":"NOT_ALLOWED"}}get canProduceScreenshare(){const t=h(this,Ce).produce.screenshare.allow;return this.requestProduce?"CAN_REQUEST":t?"ALLOWED":"NOT_ALLOWED"}get produceAudio(){return h(this,Ce).produce.audio?"ALLOWED":"NOT_ALLOWED"}get canProduceAudio(){const t=h(this,Ce).produce.audio;return this.requestProduce?"CAN_REQUEST":t?"ALLOWED":"NOT_ALLOWED"}get chatPublic(){return h(this,Ce).chat.public}get chatPrivate(){return h(this,Ce).chat.private}get connectedMeetings(){return{canAlterConnectedMeetings:!1,canSwitchConnectedMeetings:!1,canSwitchToParentMeeting:!1}}get reactions(){return h(this,Ce).reactions}get hiddenParticipant(){return h(this,Ce).hiddenParticipant}get showParticipantList(){return h(this,Ce).showParticipantList}get canChangeParticipantRole(){return h(this,Ce).canChangeParticipantRole}get canChangeTheme(){return h(this,Ce).canChangeTheme}get canPresent(){return h(this,Ce).canPresent}get acceptPresentRequests(){return h(this,Ce).acceptPresentRequests}get canEditDisplayName(){return h(this,Ce).canEditDisplayName}get maxScreenShareCount(){return h(this,Ce).maxScreenshareCount}get isRecorder(){return h(this,Ce).isRecorder}get canLivestream(){return!1}get canSpotlight(){return h(this,Ce).canSpotlight}get isV2(){return!1}};let nx=G1;Ce=new WeakMap;var IS=(t=>(t.REQUESTED_BY_PARTICIPANT="REQUESTED_BY_PARTICIPANT",t.REQUESTED_BY_MODERATOR="REQUESTED_BY_MODERATOR",t))(IS||{}),OS=(t=>(t.PRESENT="REQUEST_TO_PRESENT",t))(OS||{}),wa,_a;class JK extends ir.EventEmitter{constructor(){super(),R(this,wa,void 0),R(this,_a,void 0),y(this,"asyncPromiseTimeout"),I(this,wa,new Map),I(this,_a,new Map),this.asyncPromiseTimeout=8e3}async emitAsync(e,...i){h(this,wa).set(e,[]);const r=h(this,_a).get(e).map(()=>new Promise(s=>{h(this,wa).get(e).push(s)}));super.emit(e,...i),await Promise.race([Promise.all(r),new Promise((s,n)=>setTimeout(()=>n(new Error("emitAsync failed to resolve.")),this.asyncPromiseTimeout))]),h(this,wa).delete(e)}onAsync(e,i){const r=h(this,wa),s=async(...n)=>{var a;try{await i(...n)}catch(c){S.error("[onAsync]",{error:c})}const o=(a=r.get(e))==null?void 0:a.shift();o==null||o()};return h(this,_a).get(e)||h(this,_a).set(e,[]),h(this,_a).get(e).push(s),super.on(e,s)}reset(){I(this,wa,new Map),I(this,_a,new Map),super.removeAllListeners()}}wa=new WeakMap,_a=new WeakMap;const x=new JK;var T=(t=>(t.NEW_PRODUCER="NEW_PRODUCER",t.PRODUCER_TRACK_ENDED="PRODUCER_TRACK_ENDED",t.ROOM_NODE_CONNECTED="ROOM_NODE_CONNECTED",t.ROOM_NODE_DISCONNECTED="ROOM_NODE_DISCONNECTED",t.ROOM_NODE_CONNECTION_ERROR="ROOM_NODE_CONNECTION_ERROR",t.SOCKET_SERVICE_CONNECTED="SOCKET_SERVICE_CONNECTED",t.SOCKET_SERVICE_DISCONNECTED="SOCKET_SERVICE_DISCONNECTED",t.SOCKET_SERVICE_RECONNECTING="SOCKET_SERVICE_RECONNECTING",t.SOCKET_SERVICE_RECONNECTION_ATTEMPT="SOCKET_SERVICE_RECONNECTION_ATTEMPT",t.SOCKET_SERVICE_RECONNECT_FAILURE="SOCKET_SERVICE_RECONNECT_FAILURE",t.SOCKET_SERVICE_RECONNECTED="SOCKET_SERVICE_RECONNECTED",t.SOCKET_SERVICE_FAILED="SOCKET_SERVICE_FAILED",t.ROOM_JOINED="ROOM_JOINED",t.SOCKET_SERVICE_ROOM_JOINED="SOCKET_SERVICE_ROOM_JOINED",t.SELF_ROOM_JOINED="SELF_ROOM_JOINED",t.PRODUCER_SCORE_UPDATE="PRODUCER_SCORE_UPDATE",t.CONSUMER_SCORE_UPDATE="CONSUMER_SCORE_UPDATE",t.PRODUCER_STATUS_UPDATE="PRODUCER_STATUS_UPDATE",t.CONSUMER_STATUS_UPDATE="CONSUMER_STATUS_UPDATE",t.LOW_PRODUCER_SCORE="LOW_PRODUCER_SCORE",t.LOW_CONSUMER_SCORE="LOW_CONSUMER_SCORE",t.MEDIA_PERMISSION_ERROR="MEDIA_PERMISSION_ERROR",t.MEDIA_PERMISSION_UPDATE="MEDIA_PERMISSION_UPDATE",t.WAITLISTED="WAIT_LISTED",t.WAITLIST_ACCEPTED="websocket/waitlist-accepted",t.WAITLIST_REJECTED="websocket/waitlist-rejected",t.WAITLIST_PEER_ADDED="websocket/waitlist-peer-added",t.WAITLIST_PEER_REMOVED="websocket/waitlist-peer-closed",t.MESSAGE="websocket/message",t.ROOM_MESSAGE="websocket/room-message",t.DISABLE_AUDIO="websocket/disable-audio",t.DISABLE_VIDEO="websocket/disable-video",t.PEER_JOINED="websocket/peer-joined",t.PEER_CLOSED="websocket/peer-closed",t.PEER_MUTED="websocket/peer-muted",t.PEER_UNMUTED="websocket/peer-unmuted",t.PEER_PINNED="websocket/pin-peer",t.PEER_UNPINNED="websocker/unpin-peer",t.MUTE_ALL="websocket/mute-all",t.MUTE_ALL_VIDEO="websocket/mute-all-video",t.CONSUMER_CLOSED="websocket/consumer-closed",t.CONSUMER_PAUSED="websocket/consumer-paused",t.CONSUMER_RESUMED="websocket/consumer-resumed",t.PRODUCER_CLOSED="websocket/producer-closed",t.NEW_CONSUMER="websocket/new-consumer",t.CONNECTED_MEETING_STATE="websocket/connectedMeetingState",t.MOVE_TO_CONNECTED_MEETING="websocket/transferMeeting",t.GET_CHAT_MESSAGES="websocket/get-chat-messages",t.NEW_CHAT_MESSAGE="websocket/new-chat-message",t.PIN_CHAT_MESSAGE="websocket/pin-chat-message",t.UNPIN_CHAT_MESSAGE="websocket/unpin-chat-message",t.GET_POLLS="websocket/get-polls",t.UPDATE_POLL="websocket/update-poll",t.SELECTED_PEERS="websocket/selected-peers",t.GET_PAGE="websocket/get-page",t.ACTIVE_SPEAKER="websocket/active-speaker",t.NO_ACTIVE_SPEAKER="websocket/no-active-speaker",t.PRODUCER_SCORE="websocket/producer-score",t.CONSUMER_SCORE="websocket/consumer-score",t.ENABLE_PLUGIN="websocket/enable-plugin",t.DISABLE_PLUGIN="websocket/disable-plugin",t.PLUGIN_EVENT="websocket/plugin-event",t.PLUGIN_DATA="websocket/plugin-data",t.PLUGIN_INTERNAL_DATA="websocket/plugin-internal-data",t.KICKED="websocket/kicked",t.RECORDING_STARTED="websocket/recording-started",t.RECORDING_STOPPED="websocket/recording-stopped",t.ICE_CONNECTED="ICE_CONNECTED",t.ICE_DISCONNECTED="ICE_DISCONNECTED",t.ICE_FAILED="ICE_FAILED",t.ICE_RECONNECTING="ICE_RECONNECTING",t.AUDIO_TRACK_ANALYSIS="AUDIO_TRACK_ANALYSIS",t.AUDIO_TRACK_CLOSED="AUDIO_TRACK_CLOSED",t.AUDIO_TRACK_CHANGED="AUDIO_TRACK_CHANGED",t.AUDIO_TRACK_CREATED="AUDIO_TRACK_CREATED",t.VIDEO_TRACK_ANALYSIS="VIDEO_TRACK_ANALYSIS",t.VIDEO_TRACK_ANALYSIS_ERROR="VIDEO_TRACK_ANALYSIS_ERROR",t.VIDEO_TRACK_CLOSED="VIDEO_TRACK_CLOSED",t.VIDEO_TRACK_CHANGED="VIDEO_TRACK_CHANGED",t.VIDEO_TRACK_CREATED="VIDEO_TRACK_CREATED",t.SCREENSHARE_AUDIO_TRACK_ANALYSIS="SCREENSHARE_AUDIO_TRACK_ANALYSIS",t.SCREENSHARE_AUDIO_TRACK_CLOSED="SCREENSHARE_AUDIO_TRACK_CLOSED",t.SCREENSHARE_AUDIO_TRACK_CREATED="SCREENSHARE_AUDIO_TRACK_CREATED",t.SCREENSHARE_VIDEO_TRACK_ANALYSIS="SCREENSHARE_VIDEO_TRACK_ANALYSIS",t.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR="SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR",t.SCREENSHARE_VIDEO_TRACK_CLOSED="SCREENSHARE_VIDEO_TRACK_CLOSED",t.SCREENSHARE_VIDEO_TRACK_CREATED="SCREENSHARE_VIDEO_TRACK_CREATED",t.SCREENSHARE_TRACK_CHANGED="SCREENSHARE_TRACK_CHANGED",t.CANDIDATE_PEER_UPDATE="CANDIDATE_PEER_UPDATE",t.INBOUND_RTP_UPDATE="INBOUND_RTP_UPDATE",t.OUTBOUND_RTP_UPDATE="OUTBOUND_RTP_UPDATE",t.SEND_TRANSPORT_CLOSED="SEND_TRANSPORT_CLOSED",t.RECV_TRANSPORT_CLOSED="RECV_TRANSPORT_CLOSED",t.SEND_TRANSPORT_CREATED="SEND_TRANSPORT_CREATED",t.RECV_TRANSPORT_CREATED="RECV_TRANSPORT_CREATED",t.PRODUCER_TOGGLE="hive/producer-toggle",t.CONSUMER_TOGGLE="hive/consumer-toggle",t.SELECTED_PEERS_DIFF="hive/selected-peers-diff",t.REFRESH_GRID="hive/refresh-grid",t.RESET_PRODUCER_STATE="hive/reset-producer-state",t.HIVE_RECORDING_STARTED="hive/recording-started",t.HIVE_RECORDING_STOPPED="hive/recording-stopped",t.HIVE_TRANSPORT_STATE_CHANGED="hive/transport-state-changed",t.HIVE_ROOM_REJOINING="hive/room-rejoining",t.HIVE_TRANPSORT_RECONNECTING="hive/transport-reconnecting",t.ROOM_STATE="sockethub/room-state",t.PEER_DISPLAY_NAME_CHANGED="hive/display-name-changed",t.ASSERT_SPOTLIGHTER="websocket/assert-spotlighter",t.PEER_REQUESTED_TO_JOIN_STAGE="websocket/request-to-join-stage-peer-added",t.PEER_WITHDRAWN_REQUEST_TO_JOIN_STAGE="websocket/request-to-join-stage-peer-withdrawn",t.PEER_REJECTED_TO_JOIN_STAGE="websocket/peer-rejected-to-join-stage",t.PEER_ADDED_TO_STAGE="websocket/peer-added-to-stage",t.PEER_REMOVED_FROM_STAGE="websocket/peer-removed-from-stage",t.PEER_STARTED_PRESENTING="websocket/peer-started-presenting",t.PEER_STOPPED_PRESENTING="websocket/peer-stopped-presenting",t.REQUEST_TO_JOIN_STAGE_ACCEPTED="websocket/request-to-join-stage-accepted",t.REQUEST_TO_JOIN_STAGE_REJECTED="websocket/request-to-join-stage-rejected",t.STARTED_PRESENTING="websocket/started-presenting",t.STOPPED_PRESENTING="websocket/stopped-presenting",t.REMOVED_FROM_STAGE="websocket/removed-from-stage",t.JOIN_MEDIA_ROOM="JOIN_MEDIA_ROOM",t.LEAVE_MEDIA_ROOM="LEAVE_MEDIA_ROOM",t))(T||{}),ja;(function(t){t[t.PUBLISHER=0]="PUBLISHER",t[t.SUBSCRIBER=1]="SUBSCRIBER"})(ja||(ja={}));var Es;(function(t){t[t.AUDIO=0]="AUDIO",t[t.VIDEO=1]="VIDEO"})(Es||(Es={}));class KK extends C{constructor(){super("media.Pair",[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}])}}new KK;class YK extends C{constructor(){super("media.Codec",[])}}new YK;class QK extends C{constructor(){super("media.Fingerprint",[{no:1,name:"algorithm",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}])}}new QK;class ZK extends C{constructor(){super("media.SessionDescription",[{no:1,name:"target",kind:"enum",T:()=>["media.Target",ja]},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"sdp",kind:"scalar",T:9}])}}const ra=new ZK;class XK extends C{constructor(){super("media.CreateTransportRequest",[{no:1,name:"consuming",kind:"scalar",T:8},{no:2,name:"force_tcp",kind:"scalar",opt:!0,T:8},{no:3,name:"description",kind:"message",T:()=>ra}])}}const eY=new XK;class tY extends C{constructor(){super("media.CreateTransportResponse",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>ra},{no:3,name:"transcription_enabled",kind:"scalar",opt:!0,T:8}])}}const OO=new tY;class iY extends C{constructor(){super("media.RenegotiateRequest",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>ra}])}}const rY=new iY;class sY extends C{constructor(){super("media.RenegotiateResponse",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>ra}])}}new sY;class nY extends C{constructor(){super("media.NestedScore",[{no:1,name:"encoding_idx",kind:"scalar",T:5},{no:2,name:"rid",kind:"scalar",T:9},{no:3,name:"score",kind:"scalar",T:5},{no:4,name:"ssrc",kind:"scalar",T:3,L:0}])}}const aY=new nY;class oY extends C{constructor(){super("media.ProducerTrack",[{no:1,name:"track_id",kind:"scalar",T:9},{no:2,name:"producer_id",kind:"scalar",T:9},{no:3,name:"stream_id",kind:"scalar",T:9}])}}const cY=new oY;class dY extends C{constructor(){super("media.ProducerEntry",[{no:1,name:"producing_transport_id",kind:"scalar",T:9},{no:2,name:"producer_id",kind:"scalar",T:9}])}}new dY;class lY extends C{constructor(){super("media.ConsumerEntry",[{no:1,name:"consuming_transport_id",kind:"scalar",T:9},{no:2,name:"consumer_id",kind:"scalar",T:9}])}}new lY;class uY extends C{constructor(){super("media.ProducerState",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"kind",kind:"enum",T:()=>["media.ProducerKind",Es]},{no:3,name:"pause",kind:"scalar",T:8},{no:4,name:"screen_share",kind:"scalar",T:8}])}}const Rh=new uY;class pY extends C{constructor(){super("media.ConsumerState",[{no:1,name:"consumer_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>Rh},{no:3,name:"producer_track",kind:"message",T:()=>cY}])}}const hY=new pY;class gY extends C{constructor(){super("media.ProducerIdToConsumerMap",[{no:1,name:"map",kind:"map",K:9,V:{kind:"message",T:()=>hY}}])}}const MO=new gY;class mY extends C{constructor(){super("media.edge.PeerJoinRequest",[{no:1,name:"display_name",kind:"scalar",opt:!0,T:9},{no:2,name:"prejoined",kind:"scalar",T:8},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:5,name:"preset",kind:"scalar",opt:!0,T:12},{no:6,name:"user_id",kind:"scalar",opt:!0,T:9},{no:7,name:"organization_id",kind:"scalar",opt:!0,T:9}])}}const fY=new mY;class vY extends C{constructor(){super("media.edge.PeerJoinCompleteRequest",[])}}const yY=new vY;class bY extends C{constructor(){super("media.edge.PeerLeaveRequest",[{no:1,name:"close_room",kind:"scalar",T:8}])}}const wY=new bY;class _Y extends C{constructor(){super("media.edge.ConsumeMultipleProducerRequest",[{no:1,name:"producer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"paused",kind:"scalar",opt:!0,T:8}])}}new _Y;class SY extends C{constructor(){super("media.edge.ConsumePeerRequest",[{no:1,name:"producing_peer_id",kind:"scalar",T:9},{no:2,name:"paused",kind:"scalar",opt:!0,T:8},{no:3,name:"producer_id",kind:"scalar",opt:!0,T:9}])}}const EY=new SY;class kY extends C{constructor(){super("media.edge.ProducerCreateRequest",[{no:1,name:"kind",kind:"scalar",T:9},{no:2,name:"paused",kind:"scalar",T:8},{no:3,name:"screen_share",kind:"scalar",T:8},{no:4,name:"description",kind:"message",T:()=>ra},{no:5,name:"msid",kind:"scalar",T:9}])}}const TY=new kY;class xY extends C{constructor(){super("media.edge.SelectedPeersRequest",[])}}new xY;class PY extends C{constructor(){super("media.edge.GlobalPeerPinningRequest",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const CY=new PY;class RY extends C{constructor(){super("media.edge.ProducerToggleRequest",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"pause",kind:"scalar",T:8}])}}const wg=new RY;class AY extends C{constructor(){super("media.edge.ConsumerToggleRequest",[{no:1,name:"consumer_id",kind:"scalar",T:9},{no:2,name:"pause",kind:"scalar",T:8}])}}const ax=new AY;class IY extends C{constructor(){super("media.edge.ProducerCloseRequest",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>ra}])}}const OY=new IY;class MY extends C{constructor(){super("media.edge.ConsumerCloseRequest",[{no:1,name:"consumer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"description",kind:"message",T:()=>ra}])}}const DY=new MY;class LY extends C{constructor(){super("media.edge.KickPeerRequest",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const NY=new LY;class UY extends C{constructor(){super("media.edge.KickAllPeersRequest",[])}}const jY=new UY;class $Y extends C{constructor(){super("media.edge.PeerDisplayNameEditRequest",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",T:9}])}}const zY=new $Y;class FY extends C{constructor(){super("media.edge.HostMediaControlForPeerRequest",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"audio",kind:"scalar",T:8},{no:3,name:"video",kind:"scalar",T:8},{no:4,name:"scree_share",kind:"scalar",T:8}])}}const VY=new FY;class BY extends C{constructor(){super("media.edge.HostMediaControlForAllPeerRequest",[{no:1,name:"audio",kind:"scalar",T:8},{no:2,name:"video",kind:"scalar",T:8},{no:3,name:"screen_share",kind:"scalar",T:8}])}}const HY=new BY;class GY extends C{constructor(){super("media.edge.GetRoomStateResponse",[{no:1,name:"display_title",kind:"scalar",T:9},{no:2,name:"locked_mode",kind:"scalar",T:8},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"room_name",kind:"scalar",T:9},{no:5,name:"current_peer_id",kind:"scalar",T:9},{no:6,name:"is_recording",kind:"scalar",opt:!0,T:8},{no:7,name:"recorder_participant_id",kind:"scalar",opt:!0,T:9}])}}const WY=new GY;class qY extends C{constructor(){super("media.edge.ErrorResponse",[{no:1,name:"error_message",kind:"scalar",T:9},{no:2,name:"event_id",kind:"scalar",T:5}])}}const JY=new qY;class KY extends C{constructor(){super("media.edge.EmptyResponse",[])}}new KY;class YY extends C{constructor(){super("media.edge.RoomParticipants",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"producer_states",kind:"message",repeat:1,T:()=>Rh},{no:3,name:"display_name",kind:"scalar",T:9},{no:4,name:"user_id",kind:"scalar",opt:!0,T:9}])}}const DO=new YY;class QY extends C{constructor(){super("media.edge.SelectedPeersResponse",[{no:1,name:"audio_peers",kind:"scalar",repeat:2,T:9},{no:2,name:"compulsory_peers",kind:"scalar",repeat:2,T:9}])}}const LO=new QY;class ZY extends C{constructor(){super("media.edge.SelectedPeersDiffEntry",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"priority",kind:"scalar",T:5}])}}const XY=new ZY;class eQ extends C{constructor(){super("media.edge.SelectedPeersDiffResponse",[{no:1,name:"entries",kind:"message",repeat:1,T:()=>XY}])}}const tQ=new eQ;class iQ extends C{constructor(){super("media.edge.PeerJoinResponse",[])}}new iQ;class rQ extends C{constructor(){super("media.edge.PeerJoinCompleteResponse",[{no:1,name:"room_state",kind:"message",T:()=>WY},{no:2,name:"participants",kind:"message",repeat:1,T:()=>DO},{no:3,name:"selected_peers",kind:"message",T:()=>LO},{no:4,name:"max_preferred_streams",kind:"scalar",T:5}])}}const sQ=new rQ;class nQ extends C{constructor(){super("media.edge.PeerLeaveResponse",[{no:1,name:"closed",kind:"scalar",T:8}])}}const aQ=new nQ;class oQ extends C{constructor(){super("media.edge.ConsumeMultipleProducerResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"consumer_ids_map",kind:"message",T:()=>MO}])}}new oQ;class cQ extends C{constructor(){super("media.edge.ConsumePeerResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"consumer_ids_map",kind:"message",T:()=>MO}])}}const dQ=new cQ;class lQ extends C{constructor(){super("media.edge.ProducerCreateResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"producer_id",kind:"scalar",T:9},{no:4,name:"description",kind:"message",T:()=>ra}])}}const uQ=new lQ;class pQ extends C{constructor(){super("media.edge.ProducerScoreResponse",[{no:1,name:"responseid",kind:"scalar",T:9},{no:2,name:"score",kind:"message",T:()=>aY}])}}new pQ;class hQ extends C{constructor(){super("media.edge.ActiveSpeakerResponse",[{no:1,name:"responsepeer_id",kind:"scalar",T:9},{no:2,name:"volume",kind:"scalar",T:5}])}}new hQ;class gQ extends C{constructor(){super("media.edge.NoActiveSpeakerResponse",[])}}new gQ;class mQ extends C{constructor(){super("media.edge.ProducerToggleResponse",[])}}new mQ;class fQ extends C{constructor(){super("media.edge.ConsumerToggleResponse",[])}}new fQ;class vQ extends C{constructor(){super("media.edge.ProducerClosingResponse",[{no:1,name:"description",kind:"message",T:()=>ra}])}}const yQ=new vQ;class bQ extends C{constructor(){super("media.edge.ConsumerClosingResponse",[])}}new bQ;class wQ extends C{constructor(){super("media.edge.GlobalPeerPinningResponse",[])}}new wQ;class _Q extends C{constructor(){super("media.edge.KickPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const SQ=new _Q;class EQ extends C{constructor(){super("media.edge.KickAllPeersResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const kQ=new EQ;class TQ extends C{constructor(){super("media.edge.HostMediaControlForPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const xQ=new TQ;class PQ extends C{constructor(){super("media.edge.HostMediaControlForAllPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const CQ=new PQ;class RQ extends C{constructor(){super("media.edge.PeerDisplayNameEditResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const AQ=new RQ;class IQ extends C{constructor(){super("media.edge.PeerJoinBroadcastResponse",[{no:1,name:"participant",kind:"message",T:()=>DO}])}}const OQ=new IQ;class MQ extends C{constructor(){super("media.edge.PeerProducingTransportCreateBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"transport_details",kind:"message",T:()=>OO}])}}new MQ;class DQ extends C{constructor(){super("media.edge.PeerProducerCreateBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>Rh}])}}const LQ=new DQ;class NQ extends C{constructor(){super("media.edge.PeerProducerToggleBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>Rh}])}}const UQ=new NQ;class jQ extends C{constructor(){super("media.edge.PeerProducerCloseBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>Rh}])}}const $Q=new jQ;class zQ extends C{constructor(){super("media.edge.PeerLeaveBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const FQ=new zQ;class VQ extends C{constructor(){super("media.edge.GlobalPeerPinningBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const BQ=new VQ;class HQ extends C{constructor(){super("media.edge.RecordingStartedBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const GQ=new HQ;class WQ extends C{constructor(){super("media.edge.RecordingStoppedBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const qQ=new WQ;class JQ extends C{constructor(){super("media.edge.PeerDisplayNameEditBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",T:9}])}}const KQ=new JQ;class YQ extends C{constructor(){super("media.edge.PeerPingRequestBroadcastResponse",[{no:1,name:"password",kind:"scalar",T:9}])}}new YQ;class QQ extends C{constructor(){super("socket.api.BaseSocketHubMessage",[{no:1,name:"event",kind:"scalar",T:5},{no:2,name:"id",kind:"scalar",T:9},{no:3,name:"peer_id",kind:"scalar",T:9},{no:4,name:"room_id",kind:"scalar",T:9},{no:5,name:"user_id",kind:"scalar",T:9},{no:6,name:"payload",kind:"scalar",T:12}])}}new QQ;class ZQ extends C{constructor(){super("socket.api.ErrorMessage",[{no:1,name:"code",kind:"scalar",opt:!0,T:5},{no:2,name:"message",kind:"scalar",T:9}])}}const XQ=new ZQ;class eZ extends C{constructor(){super("socket.PeerPreset",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"message",T:()=>SZ}])}}new eZ;class tZ extends C{constructor(){super("socket.PeerPreset.Plugins",[{no:1,name:"can_close",kind:"scalar",T:8},{no:2,name:"can_start",kind:"scalar",T:8}])}}const iZ=new tZ;class rZ extends C{constructor(){super("socket.PeerPreset.Polls",[{no:1,name:"can_create",kind:"scalar",T:8},{no:2,name:"can_vote",kind:"scalar",T:8},{no:3,name:"can_view",kind:"scalar",T:8}])}}const sZ=new rZ;class nZ extends C{constructor(){super("socket.PeerPreset.Video",[{no:1,name:"allow",kind:"scalar",T:8},{no:2,name:"quality",kind:"scalar",T:9},{no:3,name:"frame_rate",kind:"scalar",T:13}])}}const aZ=new nZ;class oZ extends C{constructor(){super("socket.PeerPreset.Screenshare",[{no:1,name:"allow",kind:"scalar",T:8},{no:2,name:"quality",kind:"scalar",T:9},{no:3,name:"frame_rate",kind:"scalar",T:13}])}}const cZ=new oZ;class dZ extends C{constructor(){super("socket.PeerPreset.Produce",[{no:1,name:"video",kind:"message",T:()=>aZ},{no:2,name:"audio",kind:"scalar",T:8},{no:3,name:"screenshare",kind:"message",T:()=>cZ}])}}const lZ=new dZ;class uZ extends C{constructor(){super("socket.PeerPreset.Public",[{no:1,name:"can_send",kind:"scalar",T:8},{no:2,name:"text",kind:"scalar",T:8},{no:3,name:"files",kind:"scalar",T:8}])}}const pZ=new uZ;class hZ extends C{constructor(){super("socket.PeerPreset.Private",[{no:1,name:"can_send",kind:"scalar",T:8},{no:2,name:"can_receive",kind:"scalar",T:8},{no:3,name:"text",kind:"scalar",T:8},{no:4,name:"files",kind:"scalar",T:8}])}}const gZ=new hZ;class mZ extends C{constructor(){super("socket.PeerPreset.Chat",[{no:1,name:"public",kind:"message",T:()=>pZ},{no:2,name:"private",kind:"message",T:()=>gZ}])}}const fZ=new mZ;class vZ extends C{constructor(){super("socket.PeerPreset.Permissions",[{no:1,name:"view_type",kind:"scalar",T:9},{no:2,name:"accept_waiting_requests",kind:"scalar",T:8},{no:3,name:"request_produce",kind:"scalar",T:8},{no:4,name:"can_allow_participant_audio",kind:"scalar",T:8},{no:5,name:"can_allow_participant_screensharing",kind:"scalar",T:8},{no:6,name:"can_allow_participant_video",kind:"scalar",T:8},{no:7,name:"request_kick_participant",kind:"scalar",T:8},{no:8,name:"kick_participant",kind:"scalar",T:8},{no:9,name:"pin_participant",kind:"scalar",T:8},{no:10,name:"can_record",kind:"scalar",T:8},{no:11,name:"waiting_room_type",kind:"scalar",T:9},{no:12,name:"plugins",kind:"message",T:()=>iZ},{no:13,name:"polls",kind:"message",T:()=>sZ},{no:14,name:"produce",kind:"message",T:()=>lZ},{no:15,name:"chat",kind:"message",T:()=>fZ},{no:16,name:"reactions",kind:"scalar",T:8},{no:17,name:"hidden_participant",kind:"scalar",T:8},{no:18,name:"show_participant_list",kind:"scalar",T:8},{no:19,name:"can_change_participant_role",kind:"scalar",T:8},{no:20,name:"can_change_theme",kind:"scalar",T:8},{no:21,name:"can_present",kind:"scalar",T:8},{no:22,name:"is_recorder",kind:"scalar",opt:!0,T:8}])}}const yZ=new vZ;class bZ extends C{constructor(){super("socket.PeerPreset.Preset",[{no:1,name:"permissions",kind:"message",T:()=>yZ},{no:3,name:"version",kind:"scalar",T:9},{no:4,name:"preset_name",kind:"scalar",T:9}])}}const wZ=new bZ;class _Z extends C{constructor(){super("socket.PeerPreset.Data",[{no:1,name:"preset",kind:"message",T:()=>wZ}])}}const SZ=new _Z;class EZ extends C{constructor(){super("socket.chat.ChatMessage",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"peer_id",kind:"scalar",T:9},{no:3,name:"user_id",kind:"scalar",T:9},{no:4,name:"display_name",kind:"scalar",T:9},{no:5,name:"pinned",kind:"scalar",T:8},{no:6,name:"is_edited",kind:"scalar",T:8},{no:7,name:"payload_type",kind:"scalar",T:5},{no:8,name:"payload",kind:"scalar",T:9},{no:10,name:"target_user_ids",kind:"scalar",repeat:2,T:9},{no:11,name:"created_at",kind:"scalar",T:4,L:2},{no:12,name:"created_at_ms",kind:"scalar",opt:!0,T:4,L:2},{no:13,name:"channel_id",kind:"scalar",opt:!0,T:9},{no:14,name:"channel_index",kind:"scalar",opt:!0,T:9}])}}const Vc=new EZ;class kZ extends C{constructor(){super("socket.chat.GetPaginatedChatMessageRoomRequest",[{no:1,name:"time_stamp",kind:"scalar",T:4,L:2},{no:2,name:"size",kind:"scalar",T:5},{no:3,name:"from",kind:"scalar",T:5},{no:4,name:"reversed",kind:"scalar",T:8},{no:5,name:"channel_id",kind:"scalar",opt:!0,T:9}])}}const TZ=new kZ;class xZ extends C{constructor(){super("socket.chat.GetPaginatedChatMessageRoomResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>Vc},{no:2,name:"next",kind:"scalar",T:8}])}}const PZ=new xZ;class CZ extends C{constructor(){super("socket.chat.GetChatMessagesResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>Vc}])}}const NO=new CZ;class RZ extends C{constructor(){super("socket.chat.SendChatMessageToRoomRequest",[{no:1,name:"payload_type",kind:"scalar",T:5},{no:2,name:"payload",kind:"scalar",T:9}])}}const AZ=new RZ;class IZ extends C{constructor(){super("socket.chat.SendChatMessageToRoomResponse",[{no:1,name:"message",kind:"message",T:()=>Vc}])}}const F0=new IZ;class OZ extends C{constructor(){super("socket.chat.SendChatMessageToPeersRequest",[{no:1,name:"peer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"payload_type",kind:"scalar",T:5},{no:3,name:"payload",kind:"scalar",T:9}])}}const MZ=new OZ;class DZ extends C{constructor(){super("socket.chat.SendChatMessageToPeersResponse",[{no:1,name:"message",kind:"message",T:()=>Vc}])}}const V0=new DZ;class LZ extends C{constructor(){super("socket.chat.SendChatMessageToChannelRequest",[{no:1,name:"channel_id",kind:"scalar",T:9},{no:2,name:"payload_type",kind:"scalar",T:5},{no:3,name:"payload",kind:"scalar",T:9}])}}const NZ=new LZ;class UZ extends C{constructor(){super("socket.chat.SendChatMessageToChannelResponse",[{no:1,name:"message",kind:"message",T:()=>Vc}])}}new UZ;class jZ extends C{constructor(){super("socket.chat.EditChatMessageRequest",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"payload_type",kind:"scalar",opt:!0,T:5},{no:3,name:"payload",kind:"scalar",opt:!0,T:9},{no:4,name:"pinned",kind:"scalar",opt:!0,T:8},{no:5,name:"channel_id",kind:"scalar",opt:!0,T:9}])}}const $Z=new jZ;class zZ extends C{constructor(){super("socket.chat.EditChatMessageResponse",[{no:1,name:"message",kind:"message",T:()=>Vc}])}}const _g=new zZ;class FZ extends C{constructor(){super("socket.chat.DeleteChatMessageRequest",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"channel_id",kind:"scalar",opt:!0,T:9}])}}const VZ=new FZ;class BZ extends C{constructor(){super("socket.chat.DeleteChatMessageResponse",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"channel_id",kind:"scalar",opt:!0,T:9}])}}const Sg=new BZ;class HZ extends C{constructor(){super("socket.chat.SearchChatMessagesRequest",[{no:1,name:"time_stamp",kind:"scalar",T:4,L:2},{no:2,name:"size",kind:"scalar",T:5},{no:3,name:"from",kind:"scalar",T:5},{no:4,name:"reversed",kind:"scalar",T:8},{no:5,name:"channel_id",kind:"scalar",opt:!0,T:9},{no:6,name:"search_term",kind:"scalar",T:9}])}}const GZ=new HZ;class WZ extends C{constructor(){super("socket.chat.MarkChannelIndexAsReadRequest",[{no:1,name:"channel_id",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"channel_index",kind:"scalar",T:9}])}}const qZ=new WZ;class JZ extends C{constructor(){super("socket.chat.MarkChannelIndexAsReadResponse",[{no:1,name:"channel_index",kind:"scalar",T:9}])}}const KZ=new JZ;class YZ extends C{constructor(){super("socket.chat.CreateChatChannelRequest",[{no:1,name:"display_name",kind:"scalar",T:9},{no:2,name:"target_user_ids",kind:"scalar",repeat:2,T:9},{no:3,name:"display_picture_url",kind:"scalar",opt:!0,T:9},{no:4,name:"visibility",kind:"scalar",T:9},{no:5,name:"is_direct_message",kind:"scalar",T:8}])}}const QZ=new YZ;class ZZ extends C{constructor(){super("socket.chat.UpdateChatChannelRequest",[{no:1,name:"chat_channel_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",opt:!0,T:9},{no:3,name:"target_user_ids",kind:"scalar",repeat:2,T:9},{no:4,name:"display_picture_url",kind:"scalar",opt:!0,T:9},{no:5,name:"visibility",kind:"scalar",opt:!0,T:9},{no:6,name:"is_direct_message",kind:"scalar",opt:!0,T:8}])}}const XZ=new ZZ;class eX extends C{constructor(){super("socket.chat.CreateChatChannelResponse",[{no:1,name:"chat_channel_id",kind:"scalar",T:9}])}}new eX;class tX extends C{constructor(){super("socket.chat.GetChatChannelRequest",[{no:1,name:"chat_channel_id",kind:"scalar",T:9}])}}const iX=new tX;class rX extends C{constructor(){super("socket.chat.LatestMessageAndUnreadCount",[{no:1,name:"message",kind:"message",T:()=>Vc},{no:2,name:"unread_count",kind:"scalar",T:4,L:2}])}}const sX=new rX;class nX extends C{constructor(){super("socket.chat.ChatChannel",[{no:1,name:"chat_channel_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",T:9},{no:3,name:"display_picture_url",kind:"scalar",opt:!0,T:9},{no:4,name:"visibility",kind:"scalar",T:9},{no:5,name:"is_direct_message",kind:"scalar",T:8},{no:6,name:"latest_message_and_unread_count",kind:"message",T:()=>sX},{no:7,name:"target_user_ids",kind:"scalar",repeat:2,T:9}])}}const aX=new nX;class oX extends C{constructor(){super("socket.chat.GetChatChannelResponse",[{no:1,name:"chat_channels",kind:"message",repeat:1,T:()=>aX}])}}const En=new oX;class cX extends C{constructor(){super("socket.chat.ChannelMember",[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",opt:!0,T:9},{no:3,name:"picture",kind:"scalar",opt:!0,T:9},{no:4,name:"custom_participant_id",kind:"scalar",T:9}])}}const dX=new cX;class lX extends C{constructor(){super("socket.chat.GetChatChannelMembersResponse",[{no:1,name:"channel_members",kind:"message",repeat:1,T:()=>dX}])}}const uX=new lX;var qr;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ON_STAGE=1]="ON_STAGE",t[t.APPROVED_STAGE=2]="APPROVED_STAGE",t[t.REQUESTED_STAGE=3]="REQUESTED_STAGE",t[t.OFF_STAGE=4]="OFF_STAGE"})(qr||(qr={}));var Nf;(function(t){t[t.HIVE=0]="HIVE",t[t.CHAT=1]="CHAT",t[t.PING=2]="PING"})(Nf||(Nf={}));class pX extends C{constructor(){super("socket.room.Peer",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"display_name",kind:"scalar",T:9},{no:4,name:"stage_type",kind:"enum",opt:!0,T:()=>["socket.room.StageType",qr,"STAGE_TYPE_"]},{no:5,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:6,name:"preset_id",kind:"scalar",opt:!0,T:9},{no:7,name:"display_picture_url",kind:"scalar",opt:!0,T:9},{no:8,name:"waitlisted",kind:"scalar",T:8}])}}const Kv=new pX;class hX extends C{constructor(){super("socket.room.PeerInfoResponse",[{no:1,name:"peer",kind:"message",T:()=>Kv}])}}const Eg=new hX;class gX extends C{constructor(){super("socket.room.RoomPeersInfoRequest",[{no:1,name:"seach_query",kind:"scalar",T:9},{no:2,name:"limit",kind:"scalar",T:5},{no:3,name:"offset",kind:"scalar",T:5}])}}const mX=new gX;class fX extends C{constructor(){super("socket.room.RoomPeersInfoResponse",[{no:1,name:"peers",kind:"message",repeat:1,T:()=>Kv}])}}const vX=new fX;class yX extends C{constructor(){super("socket.room.RoomPeerCountResponse",[{no:1,name:"count",kind:"scalar",T:4,L:2}])}}const ox=new yX;class bX extends C{constructor(){super("socket.room.Room",[{no:1,name:"room_id",kind:"scalar",T:9},{no:2,name:"title",kind:"scalar",T:9},{no:4,name:"created_at",kind:"scalar",T:4,L:2}])}}const UO=new bX;class wX extends C{constructor(){super("socket.room.RoomInfoResponse",[{no:1,name:"room",kind:"message",T:()=>UO}])}}const cx=new wX;class _X extends C{constructor(){super("socket.room.GetPeerInfoRequest",[{no:1,name:"peer_id",kind:"scalar",T:9}])}}new _X;class SX extends C{constructor(){super("socket.room.UpdatePeerInfoRequest",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",opt:!0,T:9}])}}new SX;class EX extends C{constructor(){super("socket.room.JoinRoomRequest",[{no:1,name:"peer",kind:"message",T:()=>Kv},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"organization_id",kind:"scalar",opt:!0,T:9},{no:5,name:"use_hive",kind:"scalar",opt:!0,T:8},{no:6,name:"preset",kind:"scalar",opt:!0,T:12},{no:7,name:"capabilities",kind:"enum",repeat:1,T:()=>["socket.room.Capabilities",Nf,"CAPABILITIES_"]},{no:8,name:"timestamp",kind:"scalar",opt:!0,T:4,L:2}])}}const kX=new EX;class TX extends C{constructor(){super("socket.room.LeaveRoomRequest",[{no:1,name:"peer",kind:"message",T:()=>Kv},{no:2,name:"timestamp",kind:"scalar",opt:!0,T:4,L:2}])}}const xX=new TX;class PX extends C{constructor(){super("socket.room.UpdateRoomInfoRequest",[{no:1,name:"room",kind:"message",T:()=>UO}])}}new PX;class CX extends C{constructor(){super("socket.room.GetConnectedRoomsDumpRequest",[])}}new CX;class RX extends C{constructor(){super("socket.room.ServiceError",[{no:1,name:"message",kind:"scalar",opt:!0,T:9},{no:2,name:"code",kind:"scalar",opt:!0,T:9}])}}const MS=new RX;class AX extends C{constructor(){super("socket.room.ConnectedMeetingPeer",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"display_name",kind:"scalar",opt:!0,T:9},{no:3,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:4,name:"preset_id",kind:"scalar",opt:!0,T:9},{no:5,name:"display_picture_url",kind:"scalar",opt:!0,T:9}])}}const IX=new AX;class OX extends C{constructor(){super("socket.room.ConnectedMeetingDump",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9},{no:3,name:"participants",kind:"message",repeat:1,T:()=>IX}])}}const dx=new OX;class MX extends C{constructor(){super("socket.room.GetConnectedRoomsDumpResponse",[{no:1,name:"parent_meeting",kind:"message",T:()=>dx},{no:2,name:"meetings",kind:"message",repeat:1,T:()=>dx}])}}const DX=new MX;class LX extends C{constructor(){super("socket.room.CreateRoomRequestPayload",[{no:1,name:"title",kind:"scalar",opt:!0,T:9}])}}const NX=new LX;class UX extends C{constructor(){super("socket.room.CreateConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>NX}])}}const jX=new UX;class $X extends C{constructor(){super("socket.room.CreateRoomResponsePayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9},{no:3,name:"error",kind:"message",T:()=>MS}])}}const zX=new $X;class FX extends C{constructor(){super("socket.room.CreateConnectedRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>zX}])}}const lx=new FX;class VX extends C{constructor(){super("socket.room.UpdateRoomRequestPayload",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9}])}}const BX=new VX;class HX extends C{constructor(){super("socket.room.UpdateConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>BX}])}}new HX;class GX extends C{constructor(){super("socket.room.DisableRoomPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9}])}}const WX=new GX;class qX extends C{constructor(){super("socket.room.DisableConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>WX}])}}const JX=new qX;class KX extends C{constructor(){super("socket.room.DisableConnectedRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>ZX}])}}const YX=new KX;class QX extends C{constructor(){super("socket.room.DisableConnectedRoomPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"status",kind:"scalar",opt:!0,T:9},{no:3,name:"title",kind:"scalar",opt:!0,T:9},{no:4,name:"error",kind:"message",T:()=>MS}])}}const ZX=new QX;class XX extends C{constructor(){super("socket.room.MovePeerPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9}])}}const eee=new XX;class tee extends C{constructor(){super("socket.room.MovePeersBetweenRoomsRequest",[{no:1,name:"source_meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"destination_meeting_id",kind:"scalar",opt:!0,T:9},{no:3,name:"participants",kind:"message",repeat:1,T:()=>eee}])}}const iee=new tee;class ree extends C{constructor(){super("socket.room.MovedPeer",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:3,name:"error",kind:"message",T:()=>MS}])}}const jO=new ree;class see extends C{constructor(){super("socket.room.MovePeersBetweenRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>jO}])}}new see;class nee extends C{constructor(){super("socket.room.TransferPeer",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"auth_token",kind:"scalar",opt:!0,T:9}])}}const aee=new nee;class oee extends C{constructor(){super("socket.room.GetAllAddedParticipantsResponse",[{no:1,name:"participants",kind:"message",repeat:1,T:()=>lee}])}}const cee=new oee;class dee extends C{constructor(){super("socket.room.AddedParticipant",[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",opt:!0,T:9},{no:3,name:"picture",kind:"scalar",opt:!0,T:9},{no:4,name:"custom_participant_id",kind:"scalar",T:9}])}}const lee=new dee;class uee extends C{constructor(){super("socket.room.RemoveParticipantsRequest",[{no:1,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const pee=new uee;class hee extends C{constructor(){super("socket.room.BroadcastMessage",[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"timestamp",kind:"scalar",T:4,L:2},{no:4,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const ux=new hee;class gee extends C{constructor(){super("socket.room.AcceptWaitingRoomRequests",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}new gee;class mee extends C{constructor(){super("socket.room.DenyWaitingRoomRequests",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}new mee;class fee extends C{constructor(){super("socket.room.WaitingRoomRequest",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"display_name",kind:"scalar",T:9}])}}const vee=new fee;class yee extends C{constructor(){super("socket.room.GetWaitingRoomRequests",[{no:1,name:"requests",kind:"message",repeat:1,T:()=>vee}])}}new yee;class bee extends C{constructor(){super("socket.plugin.AddPluginRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"staggered",kind:"scalar",T:8}])}}const wee=new bee;class _ee extends C{constructor(){super("socket.plugin.RemovePluginRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"staggered",kind:"scalar",T:8}])}}const See=new _ee;class Eee extends C{constructor(){super("socket.plugin.EnablePluginForRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9}])}}const kee=new Eee;class Tee extends C{constructor(){super("socket.plugin.DisablePluginForRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9}])}}const xee=new Tee;class Pee extends C{constructor(){super("socket.plugin.EnablePluginForPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const Cee=new Pee;class Ree extends C{constructor(){super("socket.plugin.DisablePluginForPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const Aee=new Ree;class Iee extends C{constructor(){super("socket.plugin.PluginEventToRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"plugin_data",kind:"scalar",T:12}])}}const Oee=new Iee;class Mee extends C{constructor(){super("socket.plugin.PluginEventToPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9},{no:3,name:"plugin_data",kind:"scalar",T:12}])}}const Dee=new Mee;class Lee extends C{constructor(){super("socket.plugin.StoreKeys",[{no:1,name:"store_key",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",opt:!0,T:12}])}}const DS=new Lee;class Nee extends C{constructor(){super("socket.plugin.PluginStoreInsertKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"insert_keys",kind:"message",repeat:1,T:()=>DS}])}}const px=new Nee;class Uee extends C{constructor(){super("socket.plugin.PluginStoreGetKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"get_keys",kind:"message",repeat:1,T:()=>DS}])}}const jee=new Uee;class $ee extends C{constructor(){super("socket.plugin.PluginStoreDeleteKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"delete_keys",kind:"message",repeat:1,T:()=>DS}])}}const zee=new $ee;class Fee extends C{constructor(){super("socket.plugin.PluginStoreDeleteRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9}])}}const Vee=new Fee;class Bee extends C{constructor(){super("socket.plugin.EnablePluginResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"enabled_by",kind:"scalar",T:9}])}}const W1=new Bee;class Hee extends C{constructor(){super("socket.plugin.EnablePluginsResponse",[{no:1,name:"plugins",kind:"message",repeat:1,T:()=>W1}])}}const Gee=new Hee;class Wee extends C{constructor(){super("socket.plugin.DisablePluginResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"disabled_by",kind:"scalar",T:9}])}}const hx=new Wee;class qee extends C{constructor(){super("socket.plugin.PluginStoreItem",[{no:1,name:"timestamp",kind:"scalar",T:9},{no:2,name:"peer_id",kind:"scalar",T:9},{no:3,name:"store_key",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}])}}const Jee=new qee;class Kee extends C{constructor(){super("socket.plugin.PluginStoreResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"store_items",kind:"message",repeat:1,T:()=>Jee}])}}const gx=new Kee;class Yee extends C{constructor(){super("socket.plugin.PluginEventResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"plugin_data",kind:"scalar",T:12}])}}const mx=new Yee;class Qee extends C{constructor(){super("socket.livestreaming.LiveStreamingEvent",[{no:1,name:"livestream_id",kind:"scalar",T:9},{no:2,name:"err_message",kind:"scalar",T:9},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"meeting_id",kind:"scalar",T:9},{no:5,name:"playback_url",kind:"scalar",T:9},{no:6,name:"org_id",kind:"scalar",T:9},{no:7,name:"room_name",kind:"scalar",T:9},{no:8,name:"room_uuid",kind:"scalar",T:9},{no:9,name:"status",kind:"scalar",T:9}])}}const fx=new Qee;class Zee extends C{constructor(){super("socket.livestreaming.GetStagePeersResponse",[{no:1,name:"stage_peers",kind:"scalar",repeat:2,T:9}])}}const vx=new Zee;class Xee extends C{constructor(){super("socket.livestreaming.StageRequest",[{no:1,name:"display_name",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"peer_id",kind:"scalar",T:9}])}}const ete=new Xee;class tte extends C{constructor(){super("socket.livestreaming.GetStageRequestsResponse",[{no:1,name:"stage_requests",kind:"message",repeat:1,T:()=>ete}])}}const B0=new tte;class ite extends C{constructor(){super("socket.livestreaming.GrantStageAccessRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const rte=new ite;class ste extends C{constructor(){super("socket.livestreaming.DenyStageAccessRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const nte=new ste;class ate extends C{constructor(){super("socket.livestreaming.LeaveStageRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const yx=new ate;class ote extends C{constructor(){super("socket.polls.Poll",[{no:1,name:"poll_id",kind:"scalar",T:9},{no:2,name:"created_by",kind:"scalar",T:9},{no:3,name:"created_by_user_id",kind:"scalar",T:9},{no:4,name:"question",kind:"scalar",T:9},{no:5,name:"options",kind:"message",repeat:1,T:()=>dte},{no:6,name:"hide_votes",kind:"scalar",T:8},{no:7,name:"anonymous",kind:"scalar",T:8},{no:8,name:"votes",kind:"scalar",repeat:2,T:9}])}}const $O=new ote;class cte extends C{constructor(){super("socket.polls.PollOption",[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"count",kind:"scalar",opt:!0,T:4,L:2},{no:3,name:"votes",kind:"message",repeat:1,T:()=>ute}])}}const dte=new cte;class lte extends C{constructor(){super("socket.polls.PollVote",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}])}}const ute=new lte;class pte extends C{constructor(){super("socket.polls.NewPollRequest",[{no:1,name:"question",kind:"scalar",T:9},{no:2,name:"options",kind:"scalar",repeat:2,T:9},{no:3,name:"anonymous",kind:"scalar",T:8},{no:4,name:"hide_votes",kind:"scalar",T:8},{no:5,name:"created_by",kind:"scalar",opt:!0,T:9},{no:6,name:"created_by_user_id",kind:"scalar",opt:!0,T:9}])}}const hte=new pte;class gte extends C{constructor(){super("socket.polls.VotePollRequest",[{no:1,name:"poll_id",kind:"scalar",T:9},{no:2,name:"index",kind:"scalar",T:4,L:2}])}}const mte=new gte;class fte extends C{constructor(){super("socket.polls.UpdatePollResponse",[{no:1,name:"poll",kind:"message",T:()=>$O}])}}const H0=new fte;class vte extends C{constructor(){super("socket.polls.GetPollsResponse",[{no:1,name:"polls",kind:"message",repeat:1,T:()=>$O}])}}const yte=new vte;var q1;(function(t){t[t.ACTION=0]="ACTION",t[t.RESPONSE=1]="RESPONSE",t[t.EVENT=2]="EVENT"})(q1||(q1={}));var J1;(function(t){t[t.SERVICE_NOT_FOUND=0]="SERVICE_NOT_FOUND",t[t.PARAMETER_VALIDATION_ERROR=1]="PARAMETER_VALIDATION_ERROR",t[t.TIMEOUT_ERROR=2]="TIMEOUT_ERROR",t[t.APPLICATION_ERROR=3]="APPLICATION_ERROR"})(J1||(J1={}));class bte extends C{constructor(){super("bridge.BridgeMessage",[{no:1,name:"type",kind:"enum",T:()=>["bridge.BridgeMessageType",q1]},{no:2,name:"action",kind:"message",oneof:"data",T:()=>_te},{no:3,name:"response",kind:"message",oneof:"data",T:()=>Ete},{no:4,name:"event",kind:"message",oneof:"data",T:()=>Pte}])}}new bte;class wte extends C{constructor(){super("bridge.BridgeAction",[{no:1,name:"action",kind:"scalar",T:9},{no:2,name:"params",kind:"scalar",T:9}])}}const _te=new wte;class Ste extends C{constructor(){super("bridge.BridgeResponse",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"response",kind:"scalar",T:9},{no:3,name:"error",kind:"message",T:()=>Tte}])}}const Ete=new Ste;class kte extends C{constructor(){super("bridge.BridgeError",[{no:1,name:"type",kind:"enum",T:()=>["bridge.ErrorType",J1]},{no:2,name:"message",kind:"scalar",T:9}])}}const Tte=new kte;class xte extends C{constructor(){super("bridge.BridgeEvent",[{no:1,name:"event",kind:"scalar",T:9},{no:2,name:"params",kind:"scalar",T:9}])}}const Pte=new xte;class Cte extends C{constructor(){super("google.protobuf.Timestamp",[{no:1,name:"seconds",kind:"scalar",T:3,L:0},{no:2,name:"nanos",kind:"scalar",T:5}])}now(){const e=this.create(),i=Date.now();return e.seconds=gt.from(Math.floor(i/1e3)).toBigInt(),e.nanos=i%1e3*1e6,e}toDate(e){return new Date(gt.from(e.seconds).toNumber()*1e3+Math.ceil(e.nanos/1e6))}fromDate(e){const i=this.create(),r=e.getTime();return i.seconds=gt.from(Math.floor(r/1e3)).toBigInt(),i.nanos=r%1e3*1e6,i}internalJsonWrite(e,i){let r=gt.from(e.seconds).toNumber()*1e3;if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");if(e.nanos<0)throw new Error("Unable to encode invalid Timestamp to JSON. Nanos must not be negative.");let s="Z";if(e.nanos>0){let n=(e.nanos+1e9).toString().substring(1);n.substring(3)==="000000"?s="."+n.substring(0,3)+"Z":n.substring(6)==="000"?s="."+n.substring(0,6)+"Z":s="."+n+"Z"}return new Date(r).toISOString().replace(".000Z",s)}internalJsonRead(e,i,r){if(typeof e!="string")throw new Error("Unable to parse Timestamp from JSON "+sS(e)+".");let s=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!s)throw new Error("Unable to parse Timestamp from JSON. Invalid format.");let n=Date.parse(s[1]+"-"+s[2]+"-"+s[3]+"T"+s[4]+":"+s[5]+":"+s[6]+(s[8]?s[8]:"Z"));if(Number.isNaN(n))throw new Error("Unable to parse Timestamp from JSON. Invalid value.");if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new globalThis.Error("Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");return r||(r=this.create()),r.seconds=gt.from(n/1e3).toBigInt(),r.nanos=0,s[7]&&(r.nanos=parseInt("1"+s[7]+"0".repeat(9-s[7].length))-1e9),r}}new Cte;const Rte=3,Ate=30,Ite=8e3;class Ote{constructor(e){y(this,"ipInfo"),y(this,"axios"),y(this,"requests"),y(this,"roomName"),y(this,"roomUUID"),y(this,"peerId"),y(this,"authToken"),y(this,"organizationId");const{timeout:i=Ite,retry:r=Rte,retryDelay:s=Ate,baseURL:n="https://api.cluster.dyte.in",authToken:a}=e||{};this.requests=mf.create({baseURL:n,responseType:"json",timeout:i,retry:r,retryDelay:s}),this.axios=mf,this.setAuthToken(a,{bearer:!0}),this.requests.interceptors.request.use(o=>(E.injectContext(this.requests.defaults.headers.common),o),async o=>{S.error("xhr::axios",{debuggingHint:"otelRequestInterceptor failed.",error:o})}),this.requests.interceptors.response.use(o=>{try{o.config.url!==E.logsEndpoint&&S.debug("xhr::axios",{networkCall:{status:o.status,statusText:o.statusText,baseURL:o.config.baseURL,url:o.config.url,method:o.config.method}})}catch(c){console.error("xhr::dyte",{error:"responseInterceptorFailed",err:c,response:o})}return o},async o=>{var c;try{if(!o)return Promise.reject(new Error("Unknown error occurred"));o&&o.config&&((c=o.config)==null?void 0:c.url)!==E.logsEndpoint&&S.error("xhr::axios",{error:o,networkCall:{status:o.status,statusText:o.statusText,baseURL:o.config.baseURL,url:o.config.url,retries:o.config.retry,method:o.config.method,isOnline:navigator.onLine?"online":"offline"}});const{config:d,message:u}=o;return d&&u&&d.retry!==void 0&&d.retry>0&&(u.includes("timeout")||u.includes("Network Error"))?(d.retry-=1,d.baseURL==="https://api.cluster.dyte.in"?d.baseURL="https://network2.dyte.io":d.baseURL==="https://network2.dyte.io"&&(d.baseURL="https://api.cluster.dyte.in"),this.requests(d)):Promise.reject(o)}catch(d){return console.error("xhr::dyte",{error:"responseInterceptorFailed",err:d,responseError:o}),Promise.reject(d)}})}setAuthToken(e,i){const{bearer:r}=i||{};this.authToken=e,this.requests.defaults.headers.common.Authorization=r?`Bearer ${e}`:e}setHeader(e,i){this.requests.defaults.headers.common[e]=i}setRoomName(e){this.roomName=e}setRoomUUID(e){this.roomUUID=e}setPeerId(e){this.peerId=e}setOrganizationId(e){this.organizationId=e}}var Mte=Object.defineProperty,Dte=Object.getOwnPropertyDescriptor,zO=(t,e,i,r)=>{for(var s=r>1?void 0:r?Dte(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Mte(e,i,s),s};class Yv extends Ote{constructor(e){super(e),this.setHeader("x-dyte-web-core-version",Cl)}async getIPDetails({peerId:e}){var i;try{const r=(await this.requests.get("https://media-location.dyte.io")).data;if(((i=r.loc)==null?void 0:i.length)>5)return r;throw Error("Insufficient data")}catch{S.error("getIPDetails::failed")}try{const r=await lS.getIPDetails({peerId:e});return S.info("gotIPDetails",{networkCall:{ip:r.ip,timezone:r.timezone}}),r}catch(r){S.warn("ApiClient.getRoomNodeLinkAndTitleV1 Failed to get ip details",{error:{name:r.name,message:r.message}});return}}async getICEServers(){const{success:e,iceServers:i}=(await this.requests.get("/iceservers")).data;if(e)return i}async getPlugins(e){var i,r,s,n,a,o,c;let{plugins:d}=(await this.requests.get("/v2/plugins/user")).data.data;const u=((r=(i=ee.getValue(re.V1_PLUGINS))==null?void 0:i.toString())==null?void 0:r.split(","))||[],p=d.reduce((g,m)=>(g[u.includes(m.id)?"v1":"v2"].push(m),g),{v1:[],v2:[]});return e?d=p.v2:d=p.v1,(a=(n=(s=et.modules)==null?void 0:s.devTools)==null?void 0:n.plugins)!=null&&a.length&&((c=(o=et.modules)==null?void 0:o.devTools)==null||c.plugins.forEach(g=>{var m,f,b;const w={...mu,tags:[...mu.tags]};w.baseURL=`http://localhost:${g.port}`,w.name=g.name,w.picture=(m=g.picture)!=null?m:mu.picture,w.description=(f=g.description)!=null?f:mu.description,w.staggered=(b=g.staggered)!=null?b:mu.staggered,w.createdAt=new Date().toISOString(),w.updatedAt=new Date().toISOString(),w.id=g.id,w.organizationId=this.organizationId,d.push(w)})),d}async getPluginDetails(e){const{plugin:i}=(await this.requests.get(`/v2/plugins/view/${e}`)).data.data;return i}async getPluginConfig(e){return(await this.axios.get(`${e}/dyte-config.json`)).data}async authorizePlugin(e){const i={peerId:this.peerId};Ee.isV2AuthToken||(i.roomName=this.roomName);const{token:r}=(await this.requests.post(`/v2/plugins/authorize/${e}`,i)).data.data;return r}async getPresignedUrls(e,i){const r={roomUUID:this.roomUUID,filename:e};ee.hasFeature(re.FEAT_CHAT_SDK)&&(r.viewType=i);const{getLocation:s,putLocation:n}=(await this.requests.post("/v1/meetings/genPreSignedUploadUrl",r)).data.data;return{getLocation:s,putLocation:n}}async uploadFile(e,i){if(navigator.isReactNative&&"uri"in e)try{await fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:{uri:e.uri,name:e.name}})}catch(r){S.error(`sendFileMessage::${r}`)}else await this.axios.put(i,e,{headers:{"Content-Type":e.type}})}}zO([E.trace("APIClient.getIPDetails")],Yv.prototype,"getIPDetails",1);zO([E.trace("APIClient.getICEServers")],Yv.prototype,"getICEServers",1);var Lte=Object.defineProperty,Nte=Object.getOwnPropertyDescriptor,sa=(t,e,i,r)=>{for(var s=r>1?void 0:r?Nte(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Lte(e,i,s),s};class fn extends Yv{async startLivestreaming(){var e,i;return(i=(e=(await this.requests.post(`/v2/meetings/${Ee.meetingId}/livestreams`)).data)==null?void 0:e.data)==null?void 0:i.playback_url}async stopLivestreaming(){return this.requests.post(`/v2/meetings/${Ee.meetingId}/active-livestream/stop`)}async getActiveLivestream(){const{playbackUrl:e,status:i}=Zr((await this.requests.get(`/v2/meetings/${Ee.meetingId}/active-livestream`)).data.data);return{status:i,playbackUrl:e}}async getUserDetails(){const e=(await this.requests.get("v2/internals/participant-details")).data.data;return Zr(e)}getUserPreset(){throw new Error("getUserPreset does not exist for v2")}async startRecording(e){return(await this.requests.post("/v2/recordings",{...yO(e),meeting_id:Ee.meetingId})).data.id}stopRecording(e){return this.requests.put(`v2/recordings/${e}`,{action:"stop"})}async getActiveRecording(){const{status:e,id:i}=(await this.requests.get(`v2/recordings/active-recording/${Ee.meetingId}`)).data.data;return{status:e,id:i}}async getRoomNodeData({peerId:e}){const i=await this.getIPDetails({peerId:e});this.ipInfo=i;const{roomNodeLink:r,title:s,useHiveMedia:n}=Zr((await this.requests.post("v2/internals/rooms",{ip_information:i})).data.data);return{roomNodeUrl:r,meetingTitle:s,useHiveMedia:n??!1}}}sa([E.trace("APIClient.startLivestreaming")],fn.prototype,"startLivestreaming",1);sa([E.trace("APIClient.stopLivestreaming")],fn.prototype,"stopLivestreaming",1);sa([E.trace("APIClient.getActiveLivestream")],fn.prototype,"getActiveLivestream",1);sa([E.trace("APIClient.getUserDetails")],fn.prototype,"getUserDetails",1);sa([E.trace("APIClient.getUserPreset")],fn.prototype,"getUserPreset",1);sa([E.trace("APIClient.startRecording")],fn.prototype,"startRecording",1);sa([E.trace("APIClient.stopRecording")],fn.prototype,"stopRecording",1);sa([E.trace("APIClient.getActiveRecording")],fn.prototype,"getActiveRecording",1);sa([E.trace("APIClient.getRoomNodeData")],fn.prototype,"getRoomNodeData",1);var Ute=Object.defineProperty,jte=Object.getOwnPropertyDescriptor,Bl=(t,e,i,r)=>{for(var s=r>1?void 0:r?jte(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Ute(e,i,s),s};class Bc extends Yv{startLivestreaming(){throw new Error("Method not implemented.")}stopLivestreaming(){throw new Error("Method not implemented.")}getActiveLivestream(){throw new Error("Method not implemented.")}async getUserDetails(){const{user:e}=(await this.requests.get("/auth/basicUserDetails")).data;return e}async getUserPreset(e){const{preset:i}=(await this.requests.post("/v1/userpreset",{roomName:e,authToken:this.authToken,clientType:"CLIENT_APP",version:"0.5.0"})).data.data;return Zr(i)}async startRecording(e){const i=await this.requests.post(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/recording`,e);if(i.status!==201)throw new Error("Recording failed to start");return i.data.data.recording.id}async stopRecording(e){if((await this.requests.put(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/recordings/${e}`,{recordingAction:"stop"})).status!==201)throw new Error("Recording failed to stop")}async getActiveRecording(){return this.organizationId?(await this.requests.get(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/active-recording?limit=50`)).data.data.recording:{}}async getRoomNodeData({roomName:e,peerId:i}){const r=`
				query Session($roomName: String!, $password: String, $ipInformation: String) {
						session(roomName: $roomName, password: $password) {
							title,
							roomNodeLink(ipInformation: $ipInformation),
							useHiveMedia,
							roomName,
							password
						}
					}
				`,s=await this.getIPDetails({peerId:i});this.ipInfo=s;const{roomNodeLink:n,title:a,useHiveMedia:o}=(await this.requests.post("/graphql",{query:r,variables:{roomName:e,ipInformation:JSON.stringify(s)}})).data.data.session;return{roomNodeUrl:n,meetingTitle:a,useHiveMedia:o??!1}}}Bl([E.trace("APIClientV1.getUserDetails")],Bc.prototype,"getUserDetails",1);Bl([E.trace("APIClientV1.getUserPreset")],Bc.prototype,"getUserPreset",1);Bl([E.trace("APIClientV1.startRecording")],Bc.prototype,"startRecording",1);Bl([E.trace("APIClientV1.stopRecording")],Bc.prototype,"stopRecording",1);Bl([E.trace("APIClientV1.getActiveRecording")],Bc.prototype,"getActiveRecording",1);Bl([E.trace("APIClientV1.getRoomNodeData")],Bc.prototype,"getRoomNodeData",1);let K1;function $te(t){return K1=Ee.isV2AuthToken?new fn(t):new Bc(t),K1}function gi(){return K1}const zte=0,Fte=1,Vte=2,Bte=3,Hte=4,Gte={getPeerInfo:0,updatePeerInfo:1,getRoomPeersInfo:2,joinRoom:3,leaveRoom:4,getRoomInfo:5,updateRoomInfo:6,closeRoom:7,startedLivestream:8,stoppedLivestream:9,erroredLivestream:10,getStagePeers:11,getStageRequests:12,requestStageAccess:13,cancelStageRequest:14,grantStageAccess:15,denyStageAccess:16,roomPeerCount:17,joinStage:18,leaveStage:19,getConnectedRoomsDump:20,createConnectedRooms:21,deleteConnectedRooms:22,movePeers:23,transferPeer:24,movedPeer:25,connectedRoomsUpdated:26,connectedRoomsDeleted:27,getAllAddedParticipants:28,broadcastMessage:29,kick:30,kickAll:31},Wte={getMessages:0,sendMessageToRoom:1,sendMessageToPeers:2,editMessage:3,deleteMessage:4,getPaginatedMessages:5,sendMessageToChannel:6,searchChannelMessages:7,getAllChatChannels:8,markChannelIndexAsRead:9},qte={getPlugins:0,addPlugin:1,enablePluginForRoom:2,disablePluginForPeers:3,enablePluginForPeers:4,disablePluginForRoom:5,removePlugin:6,customPluginEventToRoom:7,customPluginEventToPeers:8,storeInsertKeys:9,storeGetKeys:10,storeDeleteKeys:11,storeDelete:12},Jte={createPoll:0,getPolls:1,votePoll:2,updatePoll:3},Kte={unknown:0,createWebRTCTransport:1,produce:2,consume:3,toggleProducer:4,toggleConsumer:5,closeProducer:6,closeConsumer:7,joinRoom:16,leaveRoom:17,selectedPeer:18,globalPinPeer:19,selfJoinComplete:20,peerJoinedBroadcast:25,peerLeaveBroadcast:26,peerProducerCreateBroadcast:27,peerProducerToggleBroadcast:28,peerProducerCloseBroadcast:29,globalPeerPinBroadcast:30,recordingStartedBroadcast:31,recordingStoppedBroadcast:32,peerDisplayNameEditBroadcast:33,selectedPeerDiff:40,renegotiateSessionDescription:50,errorResponse:60,kickPeer:90,kickAll:91,changeDisplayName:92,hostControlPeer:93,hostControlAllPeers:94},Yte={createChatChannel:0,getChatChannel:1,deprecatedGetAllChatChannels:2,getChannelMembers:3,updateChatChannel:4};function Ah(t,e){return Object.keys(e).reduce((i,r)=>(i[r]=(t<<16)+e[r],i),{})}function Qte(t){return Object.keys(t).reduce((e,i)=>(e[i]=16777216|t[i],e),{})}const me=Ah(zte,Gte),ti=Ah(Fte,Wte),pe=Ah(Vte,qte),An=Ah(Bte,Jte),ic=Ah(Hte,Yte),He=Qte(Kte);var Y1;class FO{constructor(){y(this,"meetingTitle"),y(this,"roomName"),y(this,"roomUUID"),y(this,"isDisconnected"),y(this,"roomJoined"),R(this,Y1,void 0),y(this,"peerId"),y(this,"authToken"),y(this,"maxPreferredStreams")}get sfuHandler(){return h(this,Y1)}reconnect(){throw new A("Method not implemented.")}async joinRoom(e,i,r,s,n={}){throw new A("Method not implemented.")}async leaveRoom(){throw new A("Method not implemented.")}async handleSocketCallbacks(e){throw new A("Method not implemented.")}async handleSockets(e,i){throw new A("Method not implemented.")}async shareMic(e){throw new A("Method not implemented.")}async shareWebcam(e){throw new A("Method not implemented.")}async shareScreen(e){throw new A("Method not implemented.")}async unmuteSelf(){throw new A("Method not implemented.")}async muteSelf(){throw new A("Method not implemented.")}async pauseWebcam(){throw new A("Method not implemented.")}async disableScreenShare(){throw new A("Method not implemented.")}async acceptWaitingRequest(e){throw new A("Method not implemented.")}async rejectWaitingRequest(e){throw new A("Method not implemented.")}async muteAll(e){throw new A("Method not implemented.")}async muteAllVideo(){throw new A("Method not implemented.")}async disableAudio(e){throw new A("Method not implemented.")}async disableVideo(e){throw new A("Method not implemented.")}async kickAll(){throw new A("Method not implemented.")}async kick(e){throw new A("Method not implemented.")}async pinPeer(e){throw new A("Method not implemented.")}async getChatMessages(){throw new A("Method not implemented.")}async requestRemoteControl(e){throw new A("Method not implemented.")}async acceptRemoteControl(e){throw new A("Method not implemented.")}async terminateRemoteControl(e,i){throw new A("Method not implemented.")}async sendEventRemoteControl(e,i,r){throw new A("Method not implemented.")}async getPolls(){throw new A("Method not implemented.")}async newPoll(e){throw new A("Method not implemented.")}async votePoll(e){throw new A("Method not implemented.")}async getPage(e){throw new A("Method not implemented.")}getConsumers(){throw new A("Method not implemented.")}async sendMessage(e){throw new A("Method not implemented.")}async getRoomState(){throw new A("Method not implemented.")}async addRoomPlugin(e){throw new A("Method not implemented.")}async removeRoomPlugin(e){throw new A("Method not implemented.")}async unpinChatMessage(e){throw new A("Method not implemented.")}async pinChatMessage(e){throw new A("Method not implemented.")}async sendChatMessage(e){throw new A("Method not implemented.")}async broadcastMessage(e,i){throw new A("Method not implemented.")}async acceptAllRequestToJoinStage(e){throw new A("Method not implemented.")}async stopPresenting(){throw new A("Method not implemented.")}async startPresenting(){throw new A("Method not implemented.")}async requestToJoinStage(e){throw new A("Method not implemented.")}async rejectRequestToJoinStage(e){throw new A("Method not implemented.")}async withdrawRequestToJoinStage(){throw new A("Method not implemented.")}async removePeerFromStage(e,i){throw new A("Method not implemented.")}stopAllProducers(){throw new A("Method not implemented.")}}Y1=new WeakMap;class Zte extends ir.EventEmitter{}var ps;const vd=class{constructor(t){R(this,ps,void 0),I(this,ps,t)}static getLogger(t){return new vd(t)}static format(t,...e){const i=t.split("%");let r=t;i.length&&([r]=i),e.reverse();for(let s=1;s<i.length&&e.length;s+=1){const n=e.pop();let a=i[s];switch(a.at(0)){case"s":a=a.replace("s",n);break;case"d":a=a.replace("d",n.toString());break;case"o":a=a.replace("o",JSON.stringify(n));break}r=`${r}${a}`}return e.length&&e.reverse().forEach(s=>{r=`${r} ${JSON.stringify(s)}`}),r}info(t,...e){let i=vd.format(t,...e);h(this,ps)&&(i=`${h(this,ps)}::${i}`),S.info(i)}debug(t,...e){let i=vd.format(t,...e);h(this,ps)&&(i=`${h(this,ps)}::${i}`),S.info(i)}warn(t,...e){let i=vd.format(t,...e);h(this,ps)&&(i=`${h(this,ps)}::${i}`),S.info(i)}error(t,...e){let i=vd.format(t,...e);h(this,ps)&&(i=`${h(this,ps)}::${i}`),S.error(i)}};let Us=vd;ps=new WeakMap;const bx=Us.getLogger("EnhancedEventEmitter");class Ic extends ir.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}safeEmit(e,...i){const r=this.listenerCount(e);try{return this.emit(e,...i)}catch(s){return bx.error("safeEmit() | event listener threw an error [event:%s]:%o",e,s),!!r}}async safeEmitAsPromise(e,...i){const r={}.EVENT_PROMISE_TIMEOUT?parseInt({}.EVENT_PROMISE_TIMEOUT,10):1e4;return this.safeEmitAsPromiseWithTimeout(e,r,...i)}async safeEmitAsPromiseWithTimeout(e,i,...r){return new Promise((s,n)=>{setTimeout(n,i,"event request timeout");try{this.emit(e,...r,s,n)}catch(a){bx.error("safeEmitAsPromise() | event listener threw an error [event:%s]:%o",e,a),n(a)}})}}class Qv extends Ic{constructor(){super(),y(this,"_mapMidTransceiver",new Map),this._mapMidTransceiver=new Map}get midTransceiverMap(){return this._mapMidTransceiver}}const Ne=Us.getLogger("Chrome74");class LS extends Qv{constructor(){super(),y(this,"_direction"),y(this,"_pc"),y(this,"_sendWebStream",new MediaStream),y(this,"_sendScreenShareStream",new MediaStream),y(this,"_transportReady",!1)}static createFactory(){return()=>new LS}get name(){return"Chrome74"}get pc(){return this._pc}close(){if(Ne.debug("close()"),this._pc)try{this._pc.close()}catch(e){Ne.error("pc.close()",e)}}init({direction:e,iceServers:i,iceTransportPolicy:r,additionalSettings:s,proprietaryConstraints:n,onTrackHandler:a}){this._direction=e,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...s},n),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const e=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return Ne.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{Ne.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),e.close()}}}async updateIceServers(e){Ne.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(){Ne.debug("restartIce()");const e=await this.pc.createOffer({iceRestart:!0});return Ne.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),{offerSdp:e,callback:async i=>{Ne.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOption:r,screenShare:s}){var n;this._assertSendDirection(),Ne.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),Ne.debug("creating new transceiver");const a=this._pc.addTransceiver(e,{direction:"sendonly",streams:[s?this._sendScreenShareStream:this._sendWebStream],sendEncodings:i}),o=RTCRtpSender.getCapabilities(e.kind);Ne.info("senders available params:",o);const c=[];if(r){const u=o.codecs.find(p=>p.mimeType.includes(r.name));if(r.parameters){Ne.info("codecOption.parameters:",r.parameters);const p=((n=u.sdpFmtpLine)==null?void 0:n.split(";"))||[];p.push(...r.parameters);const g=[...new Set(p).values()];u.sdpFmtpLine=g.join(";")}c.push(u)}Ne.info("selected codecs:",c),a.setCodecPreferences(c);const d=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(d),r&&r.name==="opus"&&(d.sdp=d.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1"),d.sdp+=`a=rtcp-fb:111 nack\r
`),{offerSdp:d,callback:async u=>(Ne.debug("send() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u),this.midTransceiverMap.set(a.mid,a),a.mid)}}async stopSending(e){this._assertSendDirection(),Ne.debug("stopSending() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return Ne.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{Ne.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this.midTransceiverMap.delete(e)}}}async replaceTrack(e,i){this._assertSendDirection(),i?Ne.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):Ne.debug("replaceTrack() [localId:%s, no track]",e);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this._assertSendDirection(),Ne.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((n,a)=>{a<=i?n.active=!0:n.active=!1}),await r.sender.setParameters(s)}async setRtpEncodingParameters(e,i){this._assertSendDirection(),Ne.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((n,a)=>{s.encodings[a]={...n,...i}}),await r.sender.setParameters(s)}getSenderStats(e){this._assertSendDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async stopReceiving(e){throw this._assertRecvDirection(),Ne.debug("stopReceiving() [localId:%s]",e),Error("method not implemented")}async pauseReceiving(e){throw this._assertRecvDirection(),Ne.debug("pauseReceiving() [localId:%s]",e),Error("method not implemented")}async resumeReceiving(e){throw this._assertRecvDirection(),Ne.debug("resumeReceiving() [localId:%s]",e),Error("method not implemented")}async getReceiverStats(e){this._assertRecvDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const e=await this._pc.createOffer();return await this._pc.setLocalDescription(e),e}async _setAnswer(e){Ne.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",e),await this._pc.setRemoteDescription(e)}_addEventListeners(){this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:Ne.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",e=>{e.candidate&&this.emit("@icecandidate",{candidate:e.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),Ne.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":Ne.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":Ne.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:Ne.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",e=>{Ne.info("icecandidateerror",e)}),this._pc.addEventListener("datachannel",e=>{Ne.info("data channel created: ",e.channel.label);const{channel:i}=e;i.onopen=()=>{Ne.info("data channel open: ",e.channel.label),this.safeEmit("dc_open",e.channel.label)},i.onclose=()=>{Ne.warn("data channel closed: ",e.channel.label)},i.onerror=r=>{Ne.error("data channel error: ",e.channel.label,r)},i.onmessage=r=>{Ne.info("data channel message: ",e.channel.label,r),this.safeEmit("datachannel",e.channel,String.fromCharCode(...new Uint8Array(r.data)))}})}}const ke=Us.getLogger("Firefox60");class NS extends Qv{constructor(){super(),y(this,"_direction"),y(this,"_pc"),y(this,"_sendWebStream",new MediaStream),y(this,"_sendScreenShareStream",new MediaStream),y(this,"_transportReady",!1)}static createFactory(){return()=>new NS}get name(){return"Firefox60"}get pc(){return this._pc}close(){if(ke.debug("close()"),this._pc)try{this._pc.close()}catch(e){ke.error("pc.close()",e)}}init({direction:e,iceServers:i,iceTransportPolicy:r,additionalSettings:s,proprietaryConstraints:n,onTrackHandler:a}){ke.debug("init()"),this._direction=e,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...s},n),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const e=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return ke.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{ke.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),e.close()}}}async updateIceServers(e){throw ke.debug("updateIceServers()"),new Error("not supported")}async restartIce(){ke.debug("restartIce()");const e=await this.pc.createOffer({iceRestart:!0});return ke.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),{offerSdp:e,callback:async i=>{ke.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,screenShare:r}){this._assertSendDirection(),ke.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),ke.debug("creating new transceiver");const s=this._pc.addTransceiver(e,{direction:"sendonly",streams:[r?this._sendScreenShareStream:this._sendWebStream]});if(i){i.reverse();const a=s.sender.getParameters();a.encodings=i,await s.sender.setParameters(a)}const n=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(n),n.sdp=n.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1;maxaveragebitrate=16000"),{offerSdp:n,callback:async a=>(ke.debug("send() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a),this.midTransceiverMap.set(s.mid,s),s.mid)}}async stopSending(e){this._assertSendDirection(),ke.debug("stopSending() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return ke.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{ke.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this.midTransceiverMap.delete(e)}}}async replaceTrack(e,i){this._assertSendDirection(),i?ke.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):ke.debug("replaceTrack() [localId:%s, no track]",e);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this._assertSendDirection(),ke.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters(),n=s.encodings.length-1-i;s.encodings.forEach((a,o)=>{o>=n?a.active=!0:a.active=!1}),await r.sender.setParameters(s)}async setRtpEncodingParameters(e,i){this._assertSendDirection(),ke.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((n,a)=>{s.encodings[a]={...n,...i}}),await r.sender.setParameters(s)}getSenderStats(e){this._assertSendDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async stopReceiving(e){this._assertRecvDirection(),ke.debug("stopReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",ke.info("active transcievers: %o",this._pc.getTransceivers());const r=await this._pc.createOffer();return ke.debug("stopRecieving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{ke.debug("stopRecieving() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this.midTransceiverMap.delete(e)}}}async pauseReceiving(e){this._assertRecvDirection(),ke.debug("pauseReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive";const r=await this._pc.createOffer();return ke.debug("pauseReceiving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{ke.debug("pauseReceiving() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}}}async resumeReceiving(e){this._assertRecvDirection(),ke.debug("resumeReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="recvonly";const r=await this._generateOffer();return ke.debug("resumeReceiving() | calling pc.setLocalDescription() [offer:%o]",r),{offerSdp:r,callback:async s=>{ke.debug("resumeReceiving() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}}}async getReceiverStats(e){this._assertRecvDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const e=await this._pc.createOffer();return await this._pc.setLocalDescription(e),e}async _setAnswer(e){ke.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",e),await this._pc.setRemoteDescription(e)}_addEventListeners(){this._pc.addEventListener("datachannel",e=>{ke.info("data channel created: ",e.channel.label);const{channel:i}=e;i.onopen=()=>{ke.info("data channel open: ",e.channel.label),this.safeEmit("dc_open",e.channel.label)},i.onclose=()=>{ke.warn("data channel closed: ",e.channel.label)},i.onerror=r=>{ke.error("data channel error: ",e.channel.label,r)},i.onmessage=async r=>{ke.debug("data channel message: ",e.channel.label,r);const s=await r.data.arrayBuffer();this.safeEmit("datachannel",e.channel,String.fromCharCode(...new Uint8Array(s)))}}),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:ke.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",e=>{e.candidate&&this.emit("@icecandidate",{candidate:e.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),ke.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":ke.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":ke.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:ke.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",e=>{ke.info("chrome74::icecandidateerror",e)})}}const ye=Us.getLogger("Safari12");class US extends Qv{constructor(){super(),y(this,"_direction"),y(this,"_pc"),y(this,"_sendWebStream",new MediaStream),y(this,"_sendScreenShareStream",new MediaStream),y(this,"_transportReady",!1)}static createFactory(){return()=>new US}get name(){return"Chrome74"}get pc(){return this._pc}close(){if(ye.debug("close()"),this._pc)try{this._pc.close()}catch(e){ye.error("pc.close()",e)}}init({direction:e,iceServers:i,iceTransportPolicy:r,additionalSettings:s,proprietaryConstraints:n,onTrackHandler:a}){ye.debug("init()"),this._direction=e,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...s},n),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const e=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return ye.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{ye.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),e.close()}}}async updateIceServers(e){ye.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(){ye.debug("restartIce()");const e=await this.pc.createOffer({iceRestart:!0});return ye.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),{offerSdp:e,callback:async i=>{ye.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOption:r,screenShare:s}){var n;this._assertSendDirection(),ye.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),ye.debug("creating new transceiver");const a=this._pc.addTransceiver(e,{direction:"sendonly",streams:[s?this._sendScreenShareStream:this._sendWebStream],sendEncodings:i}),o=RTCRtpSender.getCapabilities(e.kind);ye.info("senders available params:",o);const c=[];if(r){const u=o.codecs.find(p=>p.mimeType.includes(r.name));if(r.parameters){ye.info("codecOption.parameters:",r.parameters);const p=((n=u.sdpFmtpLine)==null?void 0:n.split(";"))||[];p.push(...r.parameters);const g=[...new Set(p).values()];u.sdpFmtpLine=g.join(";")}c.push(u)}ye.info("selected codecs:",c),a.setCodecPreferences(c);const d=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(d),d.sdp=d.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1;maxaveragebitrate=16000"),{offerSdp:d,callback:async u=>(ye.debug("send() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u),this.midTransceiverMap.set(a.mid,a),a.mid)}}async stopSending(e){this._assertSendDirection(),ye.debug("stopSending() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return ye.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{ye.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this.midTransceiverMap.delete(e)}}}async replaceTrack(e,i){this._assertSendDirection(),i?ye.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):ye.debug("replaceTrack() [localId:%s, no track]",e);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this._assertSendDirection(),ye.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((n,a)=>{a<=i?n.active=!0:n.active=!1}),await r.sender.setParameters(s)}async setRtpEncodingParameters(e,i){this._assertSendDirection(),ye.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((n,a)=>{s.encodings[a]={...n,...i}}),await r.sender.setParameters(s)}getSenderStats(e){this._assertSendDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async receive(e){this._assertRecvDirection(),ye.debug("recieve() | calling pc.setLocalDescription() [answer:%o]",e);const i=this._pc.getTransceivers().at(-1);return ye.info("Transceiver is now receiving",i,this._pc.getTransceivers()),this.midTransceiverMap.set(i.mid,i),{track:i.receiver.track,localId:i.mid}}async stopReceiving(e){this._assertRecvDirection(),ye.debug("stopReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",ye.info("active transcievers: %o",this._pc.getTransceivers());const r=await this._pc.createOffer();return ye.debug("stopRecieving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{ye.debug("stopRecieving() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this.midTransceiverMap.delete(e)}}}async pauseReceiving(e){this._assertRecvDirection(),ye.debug("pauseReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive";const r=await this._pc.createOffer();return ye.debug("pauseReceiving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{ye.debug("pauseReceiving() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}}}async resumeReceiving(e){this._assertRecvDirection(),ye.debug("resumeReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="recvonly";const r=await this._generateOffer();return ye.debug("resumeReceiving() | calling pc.setLocalDescription() [offer:%o]",r),{offerSdp:r,callback:async s=>{ye.debug("resumeReceiving() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}}}async getReceiverStats(e){this._assertRecvDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const e=await this._pc.createOffer();return await this._pc.setLocalDescription(e),e}async _setAnswer(e){ye.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",e),await this._pc.setRemoteDescription(e)}_addEventListeners(){this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:ye.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",e=>{e.candidate&&this.emit("@icecandidate",{candidate:e.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),ye.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":ye.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":ye.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:ye.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",e=>{ye.info("chrome74::icecandidateerror",e)}),this._pc.ondatachannel=e=>{ye.info("data channel created: ",e.channel.label);const{channel:i}=e;i.onopen=()=>{ye.info("data channel open: ",e.channel.label),this.safeEmit("dc_open",e.channel.label)},i.onclose=()=>{ye.warn("data channel closed: ",e.channel.label)},i.onerror=r=>{ye.error("data channel error: ",e.channel.label,r)},i.onmessage=async r=>{ye.debug("data channel message: ",e.channel.label,r);const s=String.fromCharCode(...new Uint8Array(r.data));this.safeEmit("datachannel",e.channel,s)}}}}class dl extends A{constructor(e){super(e),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,dl):this.stack=new Error(e).stack}}class er extends A{constructor(e){super(e),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,er):this.stack=new Error(e).stack}}const Hs=Us.getLogger("Producer");class Xte extends Ic{constructor({id:e,localId:i,track:r,stopTracks:s,disableTrackOnPause:n,zeroRtpOnPause:a,handler:o,appData:c}){super(),y(this,"_id"),y(this,"_localId"),y(this,"_closed",!1),y(this,"_handler"),y(this,"_track"),y(this,"_kind"),y(this,"_paused"),y(this,"_maxSpatialLayer"),y(this,"_stopTracks"),y(this,"_disableTrackOnPause"),y(this,"_zeroRtpOnPause"),y(this,"_appData"),y(this,"observer"),this._id=e,this._localId=i,this._track=r,this._kind=r.kind,this._paused=n?!r.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=s,this._disableTrackOnPause=n,this._zeroRtpOnPause=a,this._appData=c||{},this._onTrackEnded=this._onTrackEnded.bind(this),this._handler=o,this.observer=new Ic,this._handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get track(){return this._track}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}close(e){if(!this._closed){if(Hs.debug("close() with reason:",e),this._closed=!0,this._destroyTrack(),e===X1){this.observer.emit("close");return}this._handler.stopSending(this.localId).then(({offerSdp:i,callback:r})=>{this.safeEmit("close",i,r,e)}).finally(()=>{this.observer.emit("close")})}}async getStats(){if(this._closed)throw new er("closed");return this._handler.getSenderStats(this.localId)}pause(){Hs.debug(`producer(${this.id}):pause()`),this._closed&&Hs.error("pause() | Producer closed"),this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&this._handler.replaceTrack(this.localId,null),this.observer.emit("pause")}resume(){if(Hs.debug(`producer(${this.id}):resume()`),this._closed){Hs.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&this._handler.replaceTrack(this.localId,this._track),this.observer.emit("resume")}async replaceTrack({track:e}){if(Hs.debug("replaceTrack() [track:%o]",e),this._closed){if(e&&this._stopTracks)try{e.stop()}catch(i){Hs.error(i)}throw new er("closed")}else if(e&&e.readyState==="ended")throw new er("track ended");if(e===this._track){Hs.debug("replaceTrack() | same track, ignored");return}(!this._zeroRtpOnPause||!this._paused)&&await this._handler.replaceTrack(this.localId,e),this._destroyTrack(),this._track=e,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this._handleTrack()}async setMaxSpatialLayer(e){if(this._closed)throw new er("closed");if(this._kind!=="video")throw new dl("not a video Producer");if(typeof e!="number")throw new TypeError("invalid spatialLayer");await this._handler.setMaxSpatialLayer(this.localId,e),this._maxSpatialLayer=e}async setRtpEncodingParameters(e){if(this._closed)throw new er("closed");if(typeof e!="object")throw new TypeError("invalid params");await this._handler.setRtpEncodingParameters(this.localId,e)}_onTrackEnded(){Hs.debug('track "ended" event'),this.observer.emit("trackended"),this.safeEmit("trackended",this.track.id)}_handleTrack(){this._track&&this._track.addEventListener("ended",this._onTrackEnded)}_destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this._onTrackEnded),this._stopTracks&&this._track.stop()}catch(e){Hs.error(e)}}}const rc=Us.getLogger("Consumer");var hm,gm,mm,kn,fm,vm,en,yd,ym,bm,wm,G0,Q1,VO,Z1,BO;class eie extends Ic{constructor({id:e,localId:i,producerId:r,producingPeerId:s,handler:n,track:a,appData:o,paused:c,reuseTrack:d}){super(),R(this,wm),R(this,Q1),R(this,Z1),y(this,"observer"),R(this,hm,void 0),R(this,gm,void 0),R(this,mm,void 0),R(this,kn,void 0),R(this,fm,void 0),R(this,vm,void 0),R(this,en,void 0),R(this,yd,void 0),R(this,ym,void 0),R(this,bm,void 0),I(this,hm,e),I(this,gm,i),I(this,vm,n),I(this,bm,o),I(this,ym,s),I(this,kn,!1),I(this,mm,r),I(this,en,a),I(this,yd,c??!1),I(this,fm,d),this.observer=new Ic,Xe(this,Q1,VO).call(this)}get id(){return h(this,hm)}get peerId(){return h(this,ym)}get localId(){return h(this,gm)}get producerId(){return h(this,mm)}get closed(){return h(this,kn)}get kind(){return h(this,en).kind}get track(){return h(this,en)}get paused(){return h(this,yd)}get remotelyPaused(){return this.paused}get appData(){return h(this,bm)}close(e){h(this,kn)||(rc.debug("close() with reason:",e),I(this,kn,!0),h(this,fm)||Xe(this,Z1,BO).call(this),this.emit("close",e),this.observer.safeEmit("close",e))}async getStats(){if(h(this,kn))throw new er("closed");return h(this,vm).getReceiverStats(this.localId)}pause(){if(rc.debug(`consumer(${this.id}):pause()`),h(this,kn)){rc.error("pause() | Consumer closed");return}I(this,yd,!0),h(this,en).enabled=!1,this.observer.safeEmit("pause")}resume(){if(rc.debug(`consumer(${this.id}):resume()`),h(this,kn)){rc.error("resume() | Consumer closed");return}I(this,yd,!1),h(this,en).enabled=!0,this.observer.safeEmit("resume")}}hm=new WeakMap,gm=new WeakMap,mm=new WeakMap,kn=new WeakMap,fm=new WeakMap,vm=new WeakMap,en=new WeakMap,yd=new WeakMap,ym=new WeakMap,bm=new WeakMap,wm=new WeakSet,G0=function(){rc.debug('track "ended" event'),this.safeEmit("trackended"),this.observer.safeEmit("trackended")},Q1=new WeakSet,VO=function(){h(this,en).addEventListener("ended",Xe(this,wm,G0))},Z1=new WeakSet,BO=function(){try{h(this,en).removeEventListener("ended",Xe(this,wm,G0)),h(this,en).stop()}catch(t){rc.error(t.toString())}};const wx=t=>new Promise(e=>setTimeout(e,t));async function uc(t,e){return new Promise(async(i,r)=>{const{strategy:s,maxRetryCount:n,delayTime:a}={strategy:"linear",maxRetryCount:3,delayTime:10,...e};let o=0,c,d=!1;const u=p=>{d=!0,r(p)};for(;o<n;){try{const p=await t(o,u);return i(p)}catch(p){if(c=p,d)break;if(o<n)s==="linear"?await wx(a*(o+1)):s==="exponential"&&await wx(a*(o+Math.max(0,o-1)));else break}o+=1}return r(c)})}function tie(t,e){return typeof t>"u"?e:typeof window<"u"&&Object.getOwnPropertyDescriptor(window,"structuredClone")?structuredClone(t):JSON.parse(JSON.stringify(t))}const X1="transport closed",Xt=Us.getLogger("Transport");var _m,bp,$r,Uo,HO,ui,Sa,jo,pc,$o,zo,bd,Sm,$a,hc,sc,Em,Ea,Wu,km,ew,GO,tw,WO;class iie extends Ic{constructor({id:e,direction:i,handlerFactory:r,iceServers:s,iceTransportPolicy:n,proprietaryConstraints:a,additionalSettings:o,appData:c}){super(),R(this,Wu),R(this,ew),R(this,tw),y(this,"awaitQueue"),y(this,"observer"),R(this,_m,void 0),R(this,bp,void 0),R(this,$r,!1),R(this,Uo,void 0),R(this,HO,void 0),R(this,ui,void 0),R(this,Sa,"new"),R(this,jo,void 0),R(this,pc,void 0),R(this,$o,void 0),R(this,zo,!1),R(this,bd,null),R(this,Sm,void 0),R(this,$a,void 0),R(this,hc,void 0),R(this,sc,void 0),R(this,Em,void 0),R(this,Ea,new Map),Xt.debug("constructor() [id: %s, direction: %s]",e,i),I(this,_m,e),I(this,Uo,i);const d=tie(o,{});delete d.iceServers,delete d.iceTransportPolicy,delete d.bundlePolicy,delete d.rtcpMuxPolicy,delete d.sdpSemantics,I(this,jo,new Map),I(this,pc,new Map),I(this,$o,new Map),I(this,$a,new Map),I(this,sc,new Map),I(this,hc,new Map),this.awaitQueue=new Tf,this.observer=new Ic,I(this,ui,r()),h(this,ui).init({onTrackHandler:this._ontrack.bind(this),direction:i,iceServers:s,iceTransportPolicy:n,additionalSettings:o,proprietaryConstraints:a}),I(this,Em,c||{}),I(this,Sm,new Promise(u=>{this.observer.once("connected",()=>{u(!0)}),this.observer.once("disconnect",()=>{u(!1)}),this.observer.once("close",()=>{u(!1)})})),h(this,ui).on("@connectionstatechange",u=>{u!==h(this,Sa)&&(Xt.debug("connection state changed to %s",u),I(this,Sa,u),u==="connected"&&(I(this,zo,!0),this.observer.emit("connected")),u==="disconnected"&&(I(this,zo,!1),this.observer.emit("disconnect")),(u==="failed"||u==="closed")&&(I(this,zo,!1),this.observer.emit("close")),h(this,$r)||this.safeEmit("connectionstatechange",u))}),h(this,ui).on("@icecandidate",({candidate:u})=>{h(this,$r)||this.safeEmit("icecandidate",u)}),h(this,ui).on("dc_open",u=>{I(this,bd,!1),setTimeout(()=>{u==="events"&&!h(this,bd)&&this.safeEmit("dc_error",u)},5e3)}),h(this,ui).on("datachannel",(u,p)=>{var g,m;u.label==="events"&&I(this,bd,!0),h(this,$o).has(u.label)||h(this,$o).set(u.label,u);const f=JSON.parse(p);if(h(this,Ea).has(f.id)||h(this,Ea).set(f.id,[]),(g=h(this,Ea).get(f.id))==null||g.push(f),((m=h(this,Ea).get(f.id))==null?void 0:m.length)===f.count){const b=h(this,Ea).get(f.id),w=b==null?void 0:b.reduce((v,_)=>v+_.chunk,"");h(this,Ea).delete(f.id);try{const v=JSON.parse(w);this.safeEmit(`datachannel:${u.label}`,u,v)}catch(v){Xt.error("error parsing message",v)}}})}get id(){return h(this,_m)}get serverId(){return h(this,bp)}get connected(){return h(this,zo)}get isConnected(){return h(this,Sm)}get datachannels(){return h(this,$o)}get eventsDCReady(){return h(this,bd)}get closed(){return h(this,$r)}get direction(){return h(this,Uo)}get handler(){return h(this,ui)}get connectionState(){return h(this,Sa)}get appData(){return h(this,Em)}setServerId(e){I(this,bp,e)}getDatachannel(e){return h(this,$o).get(e)}close(){h(this,$r)||(Xt.debug("close()"),I(this,zo,!1),I(this,$r,!0),h(this,ui).close(),[...h(this,jo).values()].forEach(e=>{e.close(X1)}),h(this,jo).clear(),[...h(this,pc).values()].forEach(e=>{e.close(X1)}),h(this,pc).clear(),h(this,sc).clear(),h(this,$a).clear(),this.emit("close"),this.observer.emit("close"))}async getStats(){if(h(this,$r))throw new er("closed");return h(this,ui).getTransportStats()}async connect(){try{const{offerSdp:e,callback:i}=await h(this,ui).connect(),{answer:r}=await this.safeEmitAsPromise("connect",{offer:e});if(await i(r),!await this.isConnected)throw new Error("ice connection failed")}catch(e){throw Xt.error("transport failed to connect:",e),e}}async restartIce(){if(Xt.debug("restartIce()"),h(this,$r))throw new er("closed");return h(this,ui).restartIce()}async updateIceServers({iceServers:e}={}){if(Xt.debug("updateIceServers()"),h(this,$r))throw new er("closed");return h(this,ui).updateIceServers(e)}async produce({track:e,encodings:i,codecOptions:r,stopTracks:s=!0,disableTrackOnPause:n=!0,zeroRtpOnPause:a=!1,appData:o={}}={}){if(Xt.debug(`produce() [track:${e.id}]`),e){if(h(this,Uo)!=="send")throw new dl("not a sending Transport");if(e.readyState==="ended")throw new er("track ended");if(this.listenerCount("connect")===0&&h(this,Sa)==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing track");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));const{producerId:c,localId:d}=await this.awaitQueue.push(async()=>{const{offerSdp:p,callback:g}=await h(this,ui).send({track:e,encodings:i,codecOption:r,screenShare:o==null?void 0:o.screenShare}),{answer:m,producerId:f}=await this.safeEmitAsPromise("produce",{offer:p,kind:e.kind,paused:n?!e.enabled:!1,appData:o}),b=await g(m);return{producerId:f,localId:b}},"produce"),u=new Xte({id:c,localId:d,track:e,stopTracks:s,disableTrackOnPause:n,zeroRtpOnPause:a,appData:o,handler:this.handler});return h(this,jo).set(c,u),u.observer.on("close",()=>{h(this,jo).delete(u.id)}),this.emit("newproducer",u),this.observer.emit("newproducer",u),u}async consumePeer(e,i={}){if(Xt.debug("consumePeer() producingPeerId:",e),h(this,$r))throw new er("closed");if(h(this,Uo)!=="recv")throw new dl("not a receiving Transport");if(typeof e!="string")throw new TypeError("missing producingPeerId");if(this.listenerCount("connect")===0&&h(this,Sa)==="new")throw new TypeError('no "connect" listener set into this transport');if(i&&typeof i!="object")throw new TypeError("if given, appData must be an object");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));const r=[],{consumersMap:s}=await this.safeEmitAsPromise("consumePeer",{producingPeerId:e});return s.forEach((n,a)=>{const{consumerId:o,trackId:c,screenShare:d,paused:u,streamId:p,kind:g}=n;r.push(uc(async m=>(m>0&&Xt.warn("retrying consumer creation task:",o),Xe(this,Wu,km).call(this,{consumerId:o,trackId:c,streamId:p,kind:g,producerId:a,producingPeerId:e,paused:u,screenShare:d,appData:i}))))}),Promise.allSettled(r)}async consume({producerId:e,producingPeerId:i,appData:r={}}){if(Xt.debug("consume()"),h(this,$r))throw new er("closed");if(h(this,Uo)!=="recv")throw new dl("not a receiving Transport");if(typeof e!="string")throw new TypeError("missing producerId");if(this.listenerCount("connect")===0&&h(this,Sa)==="new")throw new TypeError('no "connect" listener set into this transport');if(r&&typeof r!="object")throw new TypeError("if given, appData must be an object");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));try{const{consumerId:s,screenShare:n,trackId:a,paused:o,streamId:c,kind:d}=await this.safeEmitAsPromise("consume",{producerId:e,producingPeerId:i});return await uc(async u=>(u>0&&Xt.warn("retrying consumer creation task:",s),Xe(this,Wu,km).call(this,{consumerId:s,screenShare:n,trackId:a,streamId:c,kind:d,paused:o,producerId:e,producingPeerId:i,appData:r})))}catch(s){throw Xt.error("consume failed:",s),s}}async setRemoteOffer(e){await Xe(this,ew,GO).call(this,e);const i=await h(this,ui).pc.createAnswer(),r=xe(i.sdp);return r.media=r.media.map(s=>{if(s.type==="audio"){const n={...s};return n.rtcpFb||(n.rtcpFb=[]),n.rtcpFb.some(a=>a.type==="nack")||n.rtcpFb.push({payload:parseInt(n.payloads,10),type:"nack"}),n}return s}),i.sdp=Os(r),await Xe(this,tw,WO).call(this,i),i}async retryFailedConsumerCreationTasks(e){return Promise.allSettled(e.map(async i=>uc(async r=>(r>0&&Xt.warn("retrying failed consumer creation task",i),Xe(this,Wu,km).call(this,{...i})))))}_ontrack(e){const{track:i,transceiver:r,streams:s}=e;Xt.info("track event received",{trackId:i.id,tId:r.receiver.track.id});const n=`${s[0].id}:${i.kind}`;i.addEventListener("ended",()=>{Xt.info("rtc consumer track ended",i.id),h(this,sc).delete(i.id),h(this,hc).delete(n)}),h(this,sc).set(i.id,[i,r]);const a=h(this,$a).get(n);a?(a(i,r),h(this,$a).delete(n)):(Xt.warn(`track event handler not found ${n}`),h(this,hc).set(n,e))}}_m=new WeakMap,bp=new WeakMap,$r=new WeakMap,Uo=new WeakMap,HO=new WeakMap,ui=new WeakMap,Sa=new WeakMap,jo=new WeakMap,pc=new WeakMap,$o=new WeakMap,zo=new WeakMap,bd=new WeakMap,Sm=new WeakMap,$a=new WeakMap,hc=new WeakMap,sc=new WeakMap,Em=new WeakMap,Ea=new WeakMap,Wu=new WeakSet,km=async function({consumerId:t,producerId:e,producingPeerId:i,streamId:r,trackId:s,paused:n,screenShare:a,appData:o,kind:c}){const d=`${r}:${c}`,u={consumerId:t,producerId:e,producingPeerId:i,streamId:r,trackId:s,appData:o,kind:c,paused:n,screenShare:a,name:"consumer creation task error",message:"consumer creation failed"};return new Promise((p,g)=>{const m=setTimeout(()=>{h(this,$a).delete(d),u.isTimedout=!0,g(u)},5e3),f=(v,_)=>{try{if(v.readyState==="ended")clearTimeout(m),g(u);else{const k=v;k.enabled=!0,this.handler.midTransceiverMap.set(_.mid,_);const P=new eie({id:t,localId:_.mid,track:k,paused:n,producerId:e,producingPeerId:i,handler:h(this,ui),reuseTrack:!0,appData:{...o,screenShare:a}});h(this,pc).set(t,P),P.once("close",()=>{h(this,pc).delete(P.id),this.handler.midTransceiverMap.delete(_.mid)}),Xt.info("consumer created for ",{producerId:e,trackId:s,producingPeerId:i}),this.observer.emit("newconsumer",P),clearTimeout(m),p(P)}}catch(k){Xt.warn("error while creating consumer:",k),clearTimeout(m),g(u)}},b=h(this,sc).get(t);if((b==null?void 0:b.length)===2){f(b[0],b[1]);return}const w=h(this,hc).get(d);w?(h(this,hc).delete(d),f(w.track,w.transceiver)):h(this,$a).set(d,f)})},ew=new WeakSet,GO=async function(t){await h(this,ui).pc.setRemoteDescription(t)},tw=new WeakSet,WO=async function(t){Xt.debug(`${this.direction}() {transportId: ${h(this,bp)}} | calling pc.setLocalDescription() [offer:%o]`,t),await h(this,ui).pc.setLocalDescription(t)};const Te=Us.getLogger("Firefox110");class jS extends Qv{constructor(){super(),y(this,"_direction"),y(this,"_pc"),y(this,"_sendWebStream",new MediaStream),y(this,"_sendScreenShareStream",new MediaStream),y(this,"_transportReady",!1)}static createFactory(){return()=>new jS}get name(){return"Firefox110"}get pc(){return this._pc}close(){if(Te.debug("close()"),this._pc)try{this._pc.close()}catch(e){Te.error("pc.close()",e)}}init({direction:e,iceServers:i,iceTransportPolicy:r,additionalSettings:s,proprietaryConstraints:n,onTrackHandler:a}){Te.debug("init()"),this._direction=e,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...s},n),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const e=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return Te.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{Te.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),e.close()}}}async updateIceServers(e){throw Te.debug("updateIceServers()"),new Error("not supported")}async restartIce(){Te.debug("restartIce()");const e=await this.pc.createOffer({iceRestart:!0});return Te.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),{offerSdp:e,callback:async i=>{Te.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,screenShare:r}){this._assertSendDirection(),Te.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),Te.debug("creating new transceiver");const s=this._pc.addTransceiver(e,{direction:"sendonly",streams:[r?this._sendScreenShareStream:this._sendWebStream],sendEncodings:i}),n=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(n),n.sdp=n.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1"),{offerSdp:n,callback:async a=>(Te.debug("send() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a),this.midTransceiverMap.set(s.mid,s),s.mid)}}async stopSending(e){this._assertSendDirection(),Te.debug("stopSending() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return Te.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{Te.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this.midTransceiverMap.delete(e)}}}async replaceTrack(e,i){this._assertSendDirection(),i?Te.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):Te.debug("replaceTrack() [localId:%s, no track]",e);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this._assertSendDirection(),Te.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters(),n=s.encodings.length-1-i;s.encodings.forEach((a,o)=>{o>=n?a.active=!0:a.active=!1}),await r.sender.setParameters(s)}async setRtpEncodingParameters(e,i){this._assertSendDirection(),Te.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((n,a)=>{s.encodings[a]={...n,...i}}),await r.sender.setParameters(s)}getSenderStats(e){this._assertSendDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async stopReceiving(e){this._assertRecvDirection(),Te.debug("stopReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",Te.info("active transcievers: %o",this._pc.getTransceivers());const r=await this._pc.createOffer();return Te.debug("stopRecieving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{Te.debug("stopRecieving() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this.midTransceiverMap.delete(e)}}}async pauseReceiving(e){this._assertRecvDirection(),Te.debug("pauseReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive";const r=await this._pc.createOffer();return Te.debug("pauseReceiving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{Te.debug("pauseReceiving() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}}}async resumeReceiving(e){this._assertRecvDirection(),Te.debug("resumeReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="recvonly";const r=await this._generateOffer();return Te.debug("resumeReceiving() | calling pc.setLocalDescription() [offer:%o]",r),{offerSdp:r,callback:async s=>{Te.debug("resumeReceiving() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}}}async getReceiverStats(e){this._assertRecvDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const e=await this._pc.createOffer();return await this._pc.setLocalDescription(e),e}async _setAnswer(e){Te.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",e),await this._pc.setRemoteDescription(e)}_addEventListeners(){this._pc.addEventListener("datachannel",e=>{Te.info("data channel created: ",e.channel.label);const{channel:i}=e;i.onopen=()=>{Te.info("data channel open: ",e.channel.label),this.safeEmit("dc_open",e.channel.label)},i.onclose=()=>{Te.warn("data channel closed: ",e.channel.label)},i.onerror=r=>{Te.error("data channel error: ",e.channel.label,r)},i.onmessage=async r=>{Te.debug("data channel message: ",e.channel.label,r);const s=await r.data.arrayBuffer();this.safeEmit("datachannel",e.channel,String.fromCharCode(...new Uint8Array(s)))}}),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:Te.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",e=>{e.candidate&&this.emit("@icecandidate",{candidate:e.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),Te.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":Te.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":Te.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:Te.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",e=>{Te.info("chrome74::icecandidateerror",e)})}}const rn=Us.getLogger("Device");function rie(){if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(typeof RTCPeerConnection>"u"){rn.warn("this._detectDevice() | unsupported ReactNative without RTCPeerConnection");return}return rn.debug("this._detectDevice() | ReactNative handler chosen"),"ReactNative"}if(typeof navigator=="object"&&typeof navigator.userAgent=="string"){const t=navigator.userAgent,e=K_.getParser(t),i=e.getEngine();if(rn.debug("current browser info",e.getBrowser()),e.satisfies({chrome:">=74",chromium:">=74","microsoft edge":">=88"}))return"Chrome74";if(e.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(e.satisfies({chrome:">=67",chromium:">=67"}))return"Chrome67";if(e.satisfies({chrome:">=55",chromium:">=55"}))return"Chrome55";if(e.satisfies({firefox:">=110"}))return"Firefox110";if(e.satisfies({firefox:">=60"}))return"Firefox60";if(e.satisfies({ios:{OS:">=14.3",firefox:">=30.0"}})||e.satisfies({safari:">=12.0"})&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(e.satisfies({safari:">=11"}))return"Safari11";if(e.satisfies({"microsoft edge":">=11"})&&e.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(i.name&&i.name.toLowerCase()==="blink"){const r=t.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(r){const s=Number(r[1]);return s>=74?"Chrome74":s>=70?"Chrome70":s>=67?"Chrome67":"Chrome55"}return"Chrome74"}rn.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",e.getBrowserName(),e.getBrowserVersion());return}rn.warn("this._detectDevice() | unknown device")}class sie{constructor({handlerName:e,handlerFactory:i}={}){if(y(this,"_handlerFactory"),y(this,"_handlerName"),y(this,"_observer"),rn.debug("constructor()"),e&&i)throw new TypeError("just one of handlerName or handlerInterface can be given");if(i)this._handlerFactory=i;else{if(e)rn.debug("constructor() | handler given: %s",e);else if(e=rie(),e)rn.debug("constructor() | detected handler: %s",e);else throw new Error("device not supported");switch(e){case"Chrome74":this._handlerFactory=LS.createFactory();break;case"Safari12":this._handlerFactory=US.createFactory();break;case"Firefox60":this._handlerFactory=NS.createFactory();break;case"Firefox110":this._handlerFactory=jS.createFactory();break;default:throw new TypeError(`unknown handlerName "${e}"`)}}const r=this._handlerFactory();this._handlerName=r.name,r.close(),this._observer=new ir}get handlerName(){return this._handlerName}createSendTransport({iceServers:e,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:s,appData:n}){return rn.debug("createSendTransport()"),this._createTransport({direction:"send",iceServers:e,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:s,appData:n})}createRecvTransport({iceServers:e,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:s,appData:n}){return rn.debug("createRecvTransport()"),this._createTransport({direction:"recv",iceServers:e,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:s,appData:n})}_createTransport({direction:e,iceServers:i,iceTransportPolicy:r,additionalSettings:s,proprietaryConstraints:n,appData:a}){const o=Pv(),c=new iie({id:o,direction:e,iceServers:i,iceTransportPolicy:r,additionalSettings:s,proprietaryConstraints:n,appData:a,handlerFactory:this._handlerFactory});return this._observer.emit("newtransport",c),c}}var Zi;class nie{constructor(e){R(this,Zi,void 0),I(this,Zi,e)}async joinRoom(e,i){const r={roomUuid:e,displayName:i,prejoined:!1};return(await h(this,Zi).sendMessagePromise(He.joinRoom,fY.toBinary(r))).payload}async connectTransport(e){const i=(await h(this,Zi).sendMessagePromise(He.createWebRTCTransport,eY.toBinary(e))).payload,{transportId:r,description:s}=OO.fromBinary(i),n={sdp:s==null?void 0:s.sdp,type:s.type};return{transportId:r,answer:n}}async produce(e){var i,r;const s=(await h(this,Zi).sendMessagePromise(He.produce,TY.toBinary(e))).payload,n=uQ.fromBinary(s);return{answer:{sdp:(i=n==null?void 0:n.description)==null?void 0:i.sdp,type:(r=n==null?void 0:n.description)==null?void 0:r.type},producerId:n.producerId}}async consume(e){const i=(await h(this,Zi).sendMessagePromise(He.consume,EY.toBinary(e))).payload,{consumerIdsMap:{map:r}}=dQ.fromBinary(i);return r}async closeProducer(e){const i=(await h(this,Zi).sendMessagePromise(He.closeProducer,OY.toBinary(e))).payload,{description:r}=yQ.fromBinary(i);return r}async closeConsumer(e){return(await h(this,Zi).sendMessagePromise(He.closeConsumer,DY.toBinary(e))).payload}async hostControlForPeer(e,i){const r={audio:i==="audio",screeShare:!1,video:i==="video",participantId:e},s=(await h(this,Zi).sendMessagePromise(He.hostControlPeer,VY.toBinary(r))).payload;if(!s)return!1;const{status:n}=xQ.fromBinary(s);return n==="success"}async hostControlForAll(e){const i={audio:e==="audio",screenShare:!1,video:e==="video"},r=(await h(this,Zi).sendMessagePromise(He.hostControlAllPeers,HY.toBinary(i))).payload;if(!r)return!1;const{status:s}=CQ.fromBinary(r);return s==="success"}async kickAll(){const e={},i=(await h(this,Zi).sendMessagePromise(He.kickAll,jY.toBinary(e))).payload;if(!i)return!1;const{status:r}=kQ.fromBinary(i);return r==="success"}async kickPeer(e){const i=(await h(this,Zi).sendMessagePromise(He.kickPeer,NY.toBinary(e))).payload;if(!i)return!1;const{status:r}=SQ.fromBinary(i);return r==="success"}async changeDisplayName(e){const i=(await h(this,Zi).sendMessagePromise(He.changeDisplayName,zY.toBinary(e))).payload;if(!i)return!1;const{status:r}=AQ.fromBinary(i);return r==="success"}async notifySelfJoinComplete(){const e={},i=(await h(this,Zi).sendMessagePromise(He.selfJoinComplete,yY.toBinary(e))).payload;return sQ.fromBinary(i)}}Zi=new WeakMap;class aie extends Zte{constructor(e){super(),y(this,"_device"),y(this,"_sendTransport"),y(this,"_recvTransport"),y(this,"_consumers"),y(this,"_producers"),y(this,"_producerIdToConsumerIdMap"),y(this,"_logger"),y(this,"_socket"),y(this,"_socketHandler"),y(this,"_totalTransportReconnectionCount"),y(this,"_transportReconnectFailureCount"),y(this,"_consumerCreationFailureCount"),y(this,"_producerNotReadyFailureCount"),y(this,"_consumerNotBoundFailureCount"),y(this,"transportConnectionStatus"),this._device=new sie,this._logger=Us.getLogger("HiveSFUHandler"),this._socket=e,this._socketHandler=new nie(e),this.reset()}get socket(){return this._socket}get producers(){return this._producers}get consumers(){return this._consumers}get producerIdToConsumerIdMap(){return this._producerIdToConsumerIdMap}get hiveSocketHandler(){return this._socketHandler}get sendTransport(){return this._sendTransport}get recvTransport(){return this._recvTransport}reset(){this._producers=new Map,this._consumers=new Map,this._producerIdToConsumerIdMap=new Map,this.transportConnectionStatus=new Map,this._transportReconnectFailureCount=0,this._consumerCreationFailureCount=0,this._totalTransportReconnectionCount=0,this._producerNotReadyFailureCount=0,this._consumerNotBoundFailureCount=0}async setupTransports(e,i){const r=await gi().getICEServers(),s=e.map(n=>{const a=this.transportConnectionStatus.get(n);if(a&&!i)return a;switch(n){case"send":{const o=this.createSendTransport({iceServers:r});return this.transportConnectionStatus.set(n,o),o}case"recv":{const o=this.createRecvTransport({iceServers:r});return this.transportConnectionStatus.set(n,o),o}default:return this._logger.warn(`what are you thinking when passing this ${n}?`),Promise.reject(Error("TYPE_OF_TRANSPORT_UNKNOWN"))}});return Promise.all(s).finally(()=>{e.forEach(n=>{this.transportConnectionStatus.delete(n)})})}async stopAllTransports(){var e,i,r,s;this._logger.info("closing all the transports"),(e=this._sendTransport)==null||e.close(),(i=this._sendTransport)==null||i.removeAllListeners(),(r=this._recvTransport)==null||r.close(),(s=this._recvTransport)==null||s.removeAllListeners(),this._sendTransport=void 0,this._recvTransport=void 0}async createSendTransport(e){if(this._sendTransport&&this._sendTransport.connected)return;this._logger.info("sendTransport::initializing_transport");const i=this._device.createSendTransport(e);this._logger.info("sendTransport::initialized_transport"),this.handleTransport(i,!1),this._logger.info("sendTransport::connecting_transport");try{await uc(async r=>{r>0&&this._logger.debug("retrying transport connect, count:",r);try{await i.connect()}catch(s){throw this._logger.error("fail to connect send transport:",i.id,"[Error]:",s),s}},{delayTime:100}),this._logger.info("sendTransport::connected_transport"),this._transportReconnectFailureCount=Math.max(0,this._transportReconnectFailureCount-1),this._producerNotReadyFailureCount=0,this._sendTransport=i,X.onSafeInitialization(()=>{X.configureSendTransport(i)}),Object.assign(window,{sendTransport:i})}catch(r){this._logger.error("failed to connect send transport after retry:",i.id,"[Error]:",r),i.close(),i.removeAllListeners(),this._transportReconnectFailureCount+=1,this.handleFailure()}}async createRecvTransport(e){if(this._recvTransport&&this._recvTransport.connected)return;this._logger.info("recvTransport::initializing_transport");const i=this._device.createRecvTransport({...e,additionalSettings:{rtcAudioJitterBufferMaxPackets:25,rtcAudioJitterBufferFastAccelerate:!0,rtcAudioJitterBufferMinDelayMs:20}});X.onSafeInitialization(()=>{X.configureRecvTransport(i)}),this._logger.info("recvTransport::initialized_transport"),this.handleTransport(i,!0),this._logger.info("recvTransport::connecting_transport");try{await uc(async r=>{r>0&&this._logger.debug("retrying transport connect, count:",r);try{await i.connect()}catch(s){throw this._logger.error("fail to connect recv transport:",i.id,"[Error]:",s),s}},{delayTime:100}),this._logger.info("recvTransport::connected_transport"),this._transportReconnectFailureCount=Math.max(0,this._transportReconnectFailureCount-1),this._consumerCreationFailureCount=0,this._consumerNotBoundFailureCount=0,this._recvTransport=i,this.producerIdToConsumerIdMap.clear()}catch(r){this._logger.error("failed to connect recv transport after retry:",i.id,"[Error]:",r),i.close(),i.removeAllListeners(),this._transportReconnectFailureCount+=1,this.handleFailure()}}handleTransport(e,i){if(e.on("connect",async({offer:r},s,n)=>{try{const a={consuming:i,description:{sdp:r.sdp,type:r.type,target:i?ja.SUBSCRIBER:ja.PUBLISHER}},{transportId:o,answer:c}=await this._socketHandler.connectTransport(a);e.setServerId(o),s({answer:c})}catch(a){this._logger.error(`${i?"consumer":"producer"} transport connection error:`,a),n(a)}}),e.on("connectionstatechange",async r=>{switch(this._logger.info(`${i?"consumer":"producer"} transport connectionState:`,r),r){case"failed":case"disconnected":if(e.closed)return;this._logger.info(`${i?"consumer":"producer"} transport disconnected or failed, reconnecting...`,"transport id:",e.id,"serverid:",e.serverId),ee.hasFeature(re.ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED)?(x.emit(T.HIVE_TRANSPORT_STATE_CHANGED,{state:"reconnecting",transportDirection:i?"recv":"send"}),this.emit("reconnect_transport",e)):x.emit(T.HIVE_TRANSPORT_STATE_CHANGED,{state:r,transportDirection:i?"recv":"send"});break;case"new":case"closed":break;default:x.emit(T.HIVE_TRANSPORT_STATE_CHANGED,{state:r,transportDirection:i?"recv":"send"});break}}),e.on("icecandidate",async r=>{this._logger.debug("sending icecandidate:",r.toJSON())}),e.on("datachannel:events",async(r,s)=>{this._logger.debug("got data channel message on event:",s);try{switch(s.type){case"offer":{this.negotiateOverDC(s.payload,r,e);break}case"handshake":{r.send(JSON.stringify({type:"handshake",payload:{message:"pong"}}));break}case"consumer_toggle":{this.handleConsumerToggle(s.payload);break}case"error":{this.handleErrorOverDC(s.payload);break}default:this._logger.warn("unknown event received from hive node, event:",s.type);break}}catch{this._logger.error("Unable to handle the incoming datachannel message on",r.label)}}),e.on("dc_error",()=>{e.direction==="recv"&&(this._logger.warn("events datachannel did not open in 5s"),this.handleFailure())}),e.on("negotiate",async({description:r},s,n)=>{try{const a={sdp:r==null?void 0:r.sdp,type:r==null?void 0:r.type},o=await this.negotiate(e,a);s({answer:o})}catch(a){this._logger.error("negotiate error:",a),n(a)}}),!i){e.on("produce",async({offer:r,kind:s,paused:n,appData:a},o,c)=>{var d;const u=xe(r.sdp).media.filter(g=>s==="video"?g.type==="video":g.type==="audio").at(-1).msid,p={description:{sdp:r.sdp,type:r.type,target:ja.PUBLISHER},paused:n,kind:s,msid:u,screenShare:(d=a.screenShare)!=null?d:!1};try{const{answer:g,producerId:m}=await this._socketHandler.produce(p);o({answer:g,producerId:m})}catch(g){this._logger.error("create producer error:",g),c(g)}});return}e.on("datachannel:negotiation",async(r,s)=>{try{this._logger.info("datachannel message recieved:",r.label,s);const n={sdp:s,type:"offer"},a=await e.setRemoteOffer(n);this._logger.info("datachannel answer:",a),r.send(a.sdp)}catch(n){this._logger.error("datachannel:negotiation::Error:",n)}}),e.on("consumePeer",async({producingPeerId:r},s,n)=>{this._logger.info("consumePeer:",r);const a={producingPeerId:r};try{const o=await this._socketHandler.consume(a);this._logger.debug(`consumePeer response for ${r}:`,{consumerStateMap:o});const c=new Map;Object.entries(o).forEach(([d,u])=>{var p,g,m;c.set(d,{consumerId:u.consumerId,trackId:(p=u.producerTrack)==null?void 0:p.trackId,streamId:u.producerTrack.streamId,kind:u.producerState.kind===Es.VIDEO?"video":"audio",screenShare:(g=u.producerState)==null?void 0:g.screenShare,paused:(m=u.producerState)==null?void 0:m.pause})}),s({consumersMap:c})}catch(o){this._logger.error("consumePeer error:",o),n(o)}}),e.on("consume",async({producerId:r,producingPeerId:s},n,a)=>{var o,c,d,u;const p={producingPeerId:s,producerId:r};try{const g=(await this._socketHandler.consume(p))[r];this._logger.info("consumer create response:",{consumerState:g,paused:(o=g.producerState)==null?void 0:o.pause}),n({consumerId:g.consumerId,screenShare:(c=g.producerState)==null?void 0:c.screenShare,trackId:(d=g.producerTrack)==null?void 0:d.trackId,streamId:g.producerTrack.streamId,kind:g.producerState.kind===Es.VIDEO?"video":"audio",paused:(u=g.producerState)==null?void 0:u.pause})}catch(g){this._logger.error("error during consuming on server:",g),a(g)}})}async createProducer(e,i,r){if(this._sendTransport===void 0||this._sendTransport.closed)return;const s=await this._sendTransport.produce(i);s.on("close",async(n,a,o)=>{this._logger.info("producer id:",s.id,"closed with reason:",o);const c={producerId:s.id,description:{sdp:n.sdp,type:n.type,target:ja.PUBLISHER}};try{const d=await this._socketHandler.closeProducer(c);this._logger.info("response",d);const u={sdp:d==null?void 0:d.sdp,type:d==null?void 0:d.type};a(u)}catch(d){this._logger.error("producer close error:",d)}this._producers.delete(e),r(),e===ae.SCREENSHARE_VIDEO&&this._switchWebcamLayers(3)}),s.on("trackended",()=>{S.info("producer::trackended",{producer:{id:s==null?void 0:s.id,kind:e,status:"UNKNOWN",appData:s==null?void 0:s.appData}}),[ae.MIC,ae.WEBCAM].includes(e)||r()}),this._producers.set(e,s),this._producers.has(ae.SCREENSHARE_VIDEO)&&this._switchWebcamLayers(0)}async _switchWebcamLayers(e){const i=this._producers.get(ae.WEBCAM);if(i)try{this._logger.debug("switching layer of webcam producer to:",e),await i.setMaxSpatialLayer(e)}catch(r){this._logger.error("failed to switch spatial layer",r)}}_initConsumer(e){e&&(e.observer.on("close",async i=>{this._logger.debug("consumer closed",i),this._consumers.delete(e.id),x.emit(T.CONSUMER_CLOSED,{id:e.id})}),this._consumers.set(e.id,e),this.producerIdToConsumerIdMap.set(e.producerId,e.id),x.emit(T.NEW_CONSUMER,{id:e.id}))}async consumePeer(e){if(this._recvTransport===void 0||this._recvTransport.closed||!this._recvTransport.connected)throw Error("Receiving transport not connected");await uc(async i=>{i>0&&this._logger.debug("retrying consumePeer call, retryCount:",i);try{const r=await this._recvTransport.consumePeer(e),s=[];r.forEach(n=>{n.status==="rejected"?s.push(n.reason):this._initConsumer(n.value)}),this._recvTransport.retryFailedConsumerCreationTasks(s).then(n=>{n.forEach(a=>{a.status==="rejected"?(this._logger.error("consumer creation task is failing",a.reason),this._consumerCreationFailureCount+=1,setTimeout(this.handleFailure.bind(this),0)):this._initConsumer(a.value)})})}catch(r){throw this._logger.error("got error in consumePeer",r),r}}).catch(i=>{this._logger.error("consumePeer failed after retries",i),this._consumerCreationFailureCount+=1,this.handleFailure()})}async createConsumer(e){if(this._recvTransport===void 0||this._recvTransport.closed||!this._recvTransport.connected)return;const{producerId:i,producingPeerId:r,appData:s}=e;if(this.getProducer(i)){this._logger.warn("why are you creating a consumer for local producer?");return}await uc(async n=>{n>0&&this._logger.debug("retrying createConsumer call, retryCount:",n);const a=await this._recvTransport.consume({producerId:i,producingPeerId:r,appData:s});this._initConsumer(a)}).catch(n=>{this._logger.error("createConsumer failed after retries",n),this._consumerCreationFailureCount+=1,this.handleFailure()}),Object.assign(window,{consumers:this._consumers})}async pauseProducer(e){const i=this._producers.get(e);if(!i){this._logger.warn("producer type:",e,"not found");return}i.pause(),this._logger.info(e,"producer id:",i.id,"paused")}async resumeProducer(e){const i=this._producers.get(e);if(!i){this._logger.warn("producer type:",e,"not found");return}i.resume(),this._logger.info(e,"producer id:",i.id,"resumed")}async replaceTrack(e,i){const r=this._producers.get(e);if(!r){this._logger.warn("producer type:",e,"not found");return}await r.replaceTrack({track:i}),this._logger.info("track replaced with id:",i.id,"on producer:",e)}async removeProducer(e,i){const r=this._producers.get(e);if(!r){this._logger.warn("producer type:",e,"not found");return}i&&r.track.stop(),r.close()}async pauseConsumer(e){if(!this._consumers.get(e)){this._logger.warn("consumer id:",e,"not found");return}this.toggleConsumerOverDC(e,!0)}async pauseConsumerOverSocket(e){try{const i={consumerId:e.id,pause:!0};await this.socket.sendMessagePromise(He.toggleConsumer,ax.toBinary(i)),e.pause(),x.emit(T.CONSUMER_PAUSED,{id:e.id}),this._logger.info("consumer:",e.id,"paused")}catch(i){this._logger.error("error on pausing consumer",i)}}async toggleConsumerOverDC(e,i){const r={type:"consumer_toggle",payload:{consumerId:e,mute:i}},s=this._recvTransport.getDatachannel("events");if(!s){this._logger.warn("events datachannel not found");return}s.send(JSON.stringify(r))}async resumeConsumer(e){const i=this._consumers.get(e);if(!i){this._logger.warn("consumer id:",e,"not found");return}if(!i.paused){this._logger.warn("consumer is not paused so not resuming",e);return}try{const r={consumerId:e,pause:!1};await this.socket.sendMessagePromise(He.toggleConsumer,ax.toBinary(r)),i.resume(),x.emit(T.CONSUMER_RESUMED,{id:i.id}),this._logger.info("consumer:",e,"resumed")}catch(r){this._logger.error("error on resuming consumer",r)}}async closeConsumer(e,i){return this.closeConsumers([e],i)}async closeConsumers(e,i=!1){this._logger.info("Closing consumers:",e,"with force:",i);let r=!0;const s=e.filter(o=>this._consumers.get(o)?!0:(this._logger.warn("consumer id:",o,"not found"),!1)),n={consumerIds:s},a=async()=>{var o;return(o=this._recvTransport)==null?void 0:o.awaitQueue.push(async()=>{await this._socketHandler.closeConsumer(n)},"close_consumer").catch(c=>{this._logger.warn("error on closing consumer:",c),r=i})};i?a():await a(),r&&s.forEach(o=>{const c=this.consumers.get(o);this.producerIdToConsumerIdMap.delete(c.producerId),c.close(i?"force closed":void 0)})}async cleanupConsumers(e){const i=[];this._consumers.forEach(r=>{e?r.peerId===e&&i.push(r.id):i.push(r.id)}),this.closeConsumers(i,!0)}async stopAllProducers(){this._logger.info("stopping all available producers"),this._producers.forEach((e,i)=>{this._logger.debug("closing producer type",i),e.close()})}getProducer(e){return[...this.producers.values()].filter(i=>i.id===e).at(0)}async negotiate(e,i){this._logger.info("setting remote offer :",i,"on transport",e.serverId);const r=await e.setRemoteOffer(i),s={transportId:e.serverId,description:{sdp:r.sdp,type:r.type,target:ja.SUBSCRIBER}};return this._logger.info("sending renegotiate request",s),await this.socket.sendMessagePromise(He.renegotiateSessionDescription,rY.toBinary(s)),this._logger.info("renegotiation done",e.serverId),r}async negotiateOverDC(e,i,r){const s={sdp:e.sdp,type:"offer"};let n;try{const a=await r.setRemoteOffer(s);n={type:"answer",payload:{type:a.type,sdp:a.sdp}}}catch(a){this._logger.error("datachannel:events::Error:",a),n={type:"error",payload:{error:a.message}}}this._logger.debug("datachannel answer:",n),i.send(JSON.stringify(n))}handleConsumerToggle(e){const{mute:i,trackId:r}=e;this._logger.info("consumer toggled for",r,"muted:",i);const s=this.consumers.get(r);if(!s){this._logger.warn("consumer with id",r," not found");return}s.paused!==i&&(this._logger.debug("consumer state is not same",{consumerPaused:s.paused,mute:i}),i?(s.pause(),x.emit(T.CONSUMER_PAUSED,{id:s.id})):(s.resume(),x.emit(T.CONSUMER_RESUMED,{id:s.id})))}async handleErrorOverDC(e){this._logger.error("got error over dc:",e);const{type:i,error:r,id:s}=e;if(i==="consumer"){if(r==="bind-fail"){if(this._consumerNotBoundFailureCount>=2){this.handleFailure();return}this._consumerNotBoundFailureCount+=1;const n=this.consumers.get(s);if(!n)return;try{await this.closeConsumer(n.id),await this.createConsumer({producerId:n.producerId,producingPeerId:n.peerId,appData:n.appData})}catch(a){this._logger.error("failed to recreate consumer on downtrack bound failure, consumerID:",n.id,"producerId:",n.producerId,"error:",a)}}}else if(i==="producer"&&r==="ready-fail"){if(this._producerNotReadyFailureCount>=2){this.handleFailure();return}this._producerNotReadyFailureCount+=1;const[n]=[...this.producers.entries()].find(a=>a[1].id===s);if(!n)return;await this.removeProducer(n).catch(a=>{this._logger.error("failed to remove ready-fail producer:",s,"error:",a)})}}async handleFailure(){var e;if(this._transportReconnectFailureCount>0||((e=this._recvTransport)==null?void 0:e.eventsDCReady)===!1||this._totalTransportReconnectionCount>3){this._logger.warn("transport failure detected"),ee.hasFeature(re.ENABLE_HIVE_EXPERIMENTAL_FAIL_RECOVERY)&&(this._logger.debug("rejoining room"),this.emit("rejoin"));return}(this._consumerCreationFailureCount>0||this._consumerNotBoundFailureCount>=2)&&(this._logger.warn("consumer creation failure detected or consumer not bound failure increased"),ee.hasFeature(re.ENABLE_HIVE_EXPERIMENTAL_FAIL_RECOVERY)&&(this._logger.debug("reconnecting recv transport"),this._totalTransportReconnectionCount+=1,this.emit("reconnect_transport",this._recvTransport))),this._producerNotReadyFailureCount>=2&&(this._logger.warn("producer receiver not getting added needs to reconnect send transport"),this._totalTransportReconnectionCount+=1,this.emit("reconnect_transport",this._sendTransport))}}var oie=Object.defineProperty,cie=Object.getOwnPropertyDescriptor,$e=(t,e,i,r)=>{for(var s=r>1?void 0:r?cie(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&oie(e,i,s),s},Kt,qe,ad,ua,_x;const qO=(_x=class extends FO{constructor(t){super(),R(this,Kt,void 0),R(this,qe,void 0),R(this,ad,void 0),R(this,ua,void 0),y(this,"legacyMode"),y(this,"roomNodeUrl"),y(this,"peerDisplayName"),y(this,"activatedProducingPeerIds"),y(this,"logger"),y(this,"_totalRejoinCount"),y(this,"_transportQueue");const{roomName:e,peerId:i,authToken:r,legacyMode:s,socketClient:n,meetingTitle:a}=t;this.roomName=e,this.peerId=i,this.authToken=r,this.legacyMode=s,this.roomJoined=!1,this.meetingTitle=a,I(this,ua,!1),I(this,Kt,n),I(this,qe,new aie(n)),this.maxPreferredStreams=6,this.activatedProducingPeerIds=new Set,this.logger=Us.getLogger("HiveNodeClient()"),this._totalRejoinCount=0,this._transportQueue=new Tf,X.legacySwitch(s),this.handleSocketEvents(),this.handleSFUEvents(),I(this,ad,()=>{this.logger.info("noop reconnection handler")})}static async init(t){const{legacyMode:e=!0,roomName:i,peerId:r,authToken:s,meetingTitle:n,socket:a}=t,o=new qO({legacyMode:e,authToken:s,socketClient:a,peerId:r,roomName:i,meetingTitle:n});return a.onStateEvent("disconnected",c=>{var d;o.isDisconnected=!0,(d=h(o,qe))==null||d.cleanupConsumers(),x.emit(T.ROOM_NODE_DISCONNECTED,c),o.roomJoined=!1,o.activatedProducingPeerIds=new Set,S.info("HiveNodeClient::HIVE_NODE_DISCONNECTED")}),a.onStateEvent("reconnected",async()=>{var c,d;S.info("HiveNodeClient::HIVE_NODE_RECONNECTED"),await((c=h(o,qe))==null?void 0:c.cleanupConsumers()),h(d=o,ad).call(d)}),a.onStateEvent("connected",async c=>{x.emit(T.ROOM_NODE_CONNECTED,{...c,wasDisconnected:o.isDisconnected}),o.isDisconnected=!1,S.info("HiveNodeClient::HIVE_NODE_CONNECTED")}),o}get sfuHandler(){return h(this,qe)}set onSocketReconnection(t){I(this,ad,t)}async reset(){this.activatedProducingPeerIds.clear(),this._transportQueue.stop(),await this.sfuHandler.stopAllTransports(),this.sfuHandler.reset(),this._transportQueue=new Tf}async reconnectTransport(t){if(this.logger.info("Room joining state",h(this,ua)),!(!t||h(this,ua))){if(t.close(),t.removeAllListeners(),t.direction==="send"){await this.sfuHandler.setupTransports(["send"]),this.logger.info("send transport reconected!"),x.emit(T.RESET_PRODUCER_STATE);return}this.sfuHandler.cleanupConsumers(),await this.sfuHandler.setupTransports(["recv"]),this.logger.info("recv transport reconnected!"),this.activatedProducingPeerIds=new Set,x.emit(T.REFRESH_GRID,!0)}}async setupTransports(t=!1){await h(this,qe).setupTransports(["recv","send"],t)}async joinRoom(t,e,i,r,s={}){return I(this,ua,!0),this.reset(),this._transportQueue.push(()=>this._joinRoom(t,i,s),"joinRoom")}async _joinRoom(t,e,i={}){this.peerDisplayName=t;try{return await this.sfuHandler.hiveSocketHandler.joinRoom(e,t),await this.setupTransports(!0),ee.hasFeature(re.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"&&setTimeout(async()=>{var r;const s=await gi().getUserDetails(),n=Ee.isV2AuthToken?s.participant:s,a={userId:(r=n.id)!=null?r:n.participant.id,peerId:this.peerId,displayName:t,roomUUID:this.roomUUID,roomViewType:"groupCall",roomName:this.roomName,deviceInfo:{...Ue.getDeviceInfo(),userAgent:navigator.userAgent,memory:navigator.deviceMemory,cpus:navigator.hardwareConcurrency},sdkName:Df,sdkVersion:Cl,metaData:{},permissions:{}};X.roomJoined(a),i!=null&&i.audio?X.audioOn():X.audioOff(),i!=null&&i.video?X.videoOn():X.videoOff()}),{roomJoined:await this.completeJoinRoom()}}catch(r){return this.logger.error("error on sending join room request",r),{roomJoined:!1}}}async completeJoinRoom(){try{const{maxPreferredStreams:t,participants:e,roomState:i,selectedPeers:r}=await this.sfuHandler.hiveSocketHandler.notifySelfJoinComplete();this.logger.debug("peerJoinCompleteResponse",{participants:e,roomState:i,selectedPeers:r}),this.roomUUID=i.roomUuid,this.maxPreferredStreams=t??6;const s=e.map(c=>{const d=c.producerStates,u={id:c.peerId,isHost:!1,displayName:c.displayName,flags:{},userId:c.userId,audioMuted:!0,videoEnabled:!1,audioTrack:null,videoTrack:null,producers:[]};return d.forEach(p=>{p.kind===Es.AUDIO?u.audioMuted=p.pause:u.videoEnabled=!p.pause,u.producers.push({producerId:p.producerId,kind:p.kind===Es.AUDIO?"audio":"video",pause:p.pause,screenShare:p.screenShare})}),u}),{audioPeers:n,compulsoryPeers:a}=r??{},o=s.filter(c=>c.id!==this.peerId);return I(this,ua,!1),this.roomJoined=!0,S.info("HiveNodeClient::joinRoom::pre_emitasync_room_joined"),await x.emitAsync(T.ROOM_JOINED,{peers:o}),i.isRecording&&x.emit(T.HIVE_RECORDING_STARTED,i.recorderParticipantId),S.info("HiveNodeClient::joinRoom::post_emitasync_room_joined"),x.emit(T.SELF_ROOM_JOINED),x.emit(T.SELECTED_PEERS,{peerIds:n??[],compulsoryPeers:a}),x.emit(T.REFRESH_GRID,!0),!0}catch(t){return this.logger.error("error on completing join room:",t),!1}}async leaveRoom(){await h(this,qe).stopAllTransports();const t={closeRoom:!1};h(this,Kt).sendMessagePromise(He.leaveRoom,wY.toBinary(t)).then(e=>{var i;(i=aQ.fromBinary(e.payload))!=null&&i.closed||this.logger.warn("weird state on peer closed and should not happen")}).catch(e=>{this.logger.error("error on sending leave room request",e)}),X.callEnded(),E.destruct()}getConsumers(){return h(this,qe).consumers}async activatePeers(t){const e=t.map(({peerId:i,producers:r,force:s})=>{if(r.length===0)return Promise.resolve();if(s)return this.consumePeer(i,s);const n=[];return r.every(a=>{const o=this.sfuHandler.producerIdToConsumerIdMap.get(a.producerId);if(!o)return!1;const c=this.sfuHandler.consumers.get(o);return c&&!a.pause&&c.paused&&n.push(o),!0})?n.length>0?this.resumeConsumers(n):Promise.resolve():this.consumePeer(i)});await Promise.all(e)}async deactivatePeers(t){if(this.logger.info("deactivating producers",t),t.producers.some(e=>e.screenShare&&e.kind==="video")){this.logger.debug("peer is screensharing can't deactivate");return}t.producers.forEach(({producerId:e,kind:i})=>{if(i==="audio"){this.logger.debug("we don't want to deactive audio consumers");return}const r=this.sfuHandler.producerIdToConsumerIdMap.get(e);if(!r){this.logger.warn("consumer not found in deactivate producers:",e);return}this.sfuHandler.closeConsumer(r)}),this.activatedProducingPeerIds.delete(t.peerId)}async createConsumer({producerId:t,producingPeerId:e,screenShare:i}){return this.sfuHandler.createConsumer({producerId:t,producingPeerId:e,appData:{screenShare:i}})}async pauseConsumers(t){t.forEach(e=>{this.sfuHandler.pauseConsumer(e)})}async resumeConsumers(t){t.forEach(e=>{this.sfuHandler.resumeConsumer(e)})}async closeConsumers(t){const e=[...this.getConsumers().values()].filter(i=>t.includes(i.peerId)).map(i=>i.id);return t.forEach(i=>{this.activatedProducingPeerIds.delete(i)}),this.sfuHandler.closeConsumers(e)}async consumePeer(t,e){if(this.logger.info("current activated Peer ids",[...this.activatedProducingPeerIds.values()],"forced?:",e),!this.activatedProducingPeerIds.has(t)||e)try{await h(this,qe).consumePeer(t),this.activatedProducingPeerIds.add(t)}catch(i){this.logger.error("consumePeer failed in HiveNodeClient.ts",i)}else this.logger.info("not creating consumer for this peerId",t)}async shareWebcam(t){if(t===void 0)return;if(h(this,qe).producers.has(ae.WEBCAM)){const r=h(this,qe).producers.get(ae.WEBCAM);if(!r.closed&&!navigator.isReactNative){await r.replaceTrack({track:t}),await this.resumeWebcam();return}await h(this,qe).removeProducer(r.id)}const e={track:t,codecOptions:{name:"VP8"},appData:{screenShare:!1},stopTracks:!1};if(ee.hasFeature(re.ENABLE_HIVE_SIMULCAST)){let r=t.getConstraints().width;r in J2||(r=320),e.encodings=J2[r]}const i=()=>{this.disableWebcam()};await h(this,qe).createProducer(ae.WEBCAM,e,i)}async shareScreen(t){const{video:e,audio:i}=t;if(e===void 0)return;const r={track:e,codecOptions:{name:"VP8"},appData:{screenShare:!0,supportsRemoteControl:Ue.isElectron()},stopTracks:!1};let s=()=>{this.disableScreenShare()};if(X.screenShareRequested(),await h(this,qe).createProducer(ae.SCREENSHARE_VIDEO,r,s),i){const n={track:i,codecOptions:{name:"opus"},appData:{screenShare:!0,supportsRemoteControl:Ue.isElectron()},stopTracks:!1};s=()=>{},await h(this,qe).createProducer(ae.SCREENSHARE_AUDIO,n,s)}}async shareMic(t){try{if(t===void 0)throw new er("track undefined");if(h(this,qe).producers.has(ae.MIC)){const r=h(this,qe).producers.get(ae.MIC);if(!r.closed&&!navigator.isReactNative){await r.replaceTrack({track:t}),await this.resumeMic();return}await h(this,qe).removeProducer(ae.MIC,!1)}const e={track:t,encodings:[{priority:"high"}],codecOptions:{name:"opus"},stopTracks:!1},i=()=>{this.disableMic()};await h(this,qe).createProducer(ae.MIC,e,i)}catch(e){throw new A(e)}}pauseMic(){const t=h(this,qe).producers.get(ae.MIC);if(!t){S.error("pauseMic::could_not_find_mic_producer");return}if(t.paused){S.info("pauseMic::mic_producer_already_paused");return}t.pause();const e={producerId:t.id,pause:!0};h(this,Kt).sendMessage(He.toggleProducer,wg.toBinary(e))}async pauseWebcam(){const t=h(this,qe).producers.get(ae.WEBCAM);if(!t){S.error("pauseWebcam::could_not_find_webcam_producer");return}t.pause();const e={producerId:t.id,pause:!0};h(this,Kt).sendMessage(He.toggleProducer,wg.toBinary(e))}async resumeMic(){const t=h(this,qe).producers.get(ae.MIC);if(!t){S.error("resumeMic::could_not_find_mic_producer");return}if(!t.pause){S.info("resumeMic::mic_producer_already_resumed");return}t.resume();const e={producerId:t.id,pause:!1};h(this,Kt).sendMessage(He.toggleProducer,wg.toBinary(e))}async resumeWebcam(){const t=h(this,qe).producers.get(ae.WEBCAM);if(!t){S.error("resumeWebcam::could_not_find_webcam_producer");return}t.resume();const e={producerId:t.id,pause:!1};h(this,Kt).sendMessage(He.toggleProducer,wg.toBinary(e))}async disableWebcam(){await h(this,qe).removeProducer(ae.WEBCAM)}async disableMic(){await h(this,qe).removeProducer(ae.MIC)}async disableScreenShare(){S.info("screen_sharing_stopped"),await h(this,qe).removeProducer(ae.SCREENSHARE_VIDEO),await h(this,qe).removeProducer(ae.SCREENSHARE_AUDIO)}async muteSelf(){this.pauseMic()}async unmuteSelf(){await this.resumeMic()}async resetVideoProducers(t,e){t&&(await h(this,qe).removeProducer(ae.WEBCAM,!1),this.shareWebcam(t)),e&&(await h(this,qe).removeProducer(ae.SCREENSHARE_VIDEO,!1),this.shareScreen({video:e}))}async getPolls(){return{payload:{polls:{}}}}async changeDisplayName(t,e){const i={displayName:t,participantId:e??this.peerId};if(!await this.sfuHandler.hiveSocketHandler.changeDisplayName(i))throw new Error("failed to change display name!")}async kick(t){const e={participantId:t};if(!await this.sfuHandler.hiveSocketHandler.kickPeer(e))throw new Error("failed to kickout the participant!")}async kickAll(){if(!await this.sfuHandler.hiveSocketHandler.kickAll())throw new Error("failed to kickout all participant!")}async muteAll(t){if(!await this.sfuHandler.hiveSocketHandler.hostControlForAll("audio"))throw new Error("failed to mute all participant")}async muteAllVideo(){if(!await this.sfuHandler.hiveSocketHandler.hostControlForAll("video"))throw new Error("failed to mute all video participant")}async mutePeer(t){if(!await this.sfuHandler.hiveSocketHandler.hostControlForPeer(t,"audio"))throw new Error("failed to mute given participant")}async mutePeerVideo(t){if(!await this.sfuHandler.hiveSocketHandler.hostControlForPeer(t,"video"))throw new Error("failed to mute video of given participant")}async pinPeer(t){const e={participantId:t??""};try{await h(this,Kt).sendMessagePromise(He.globalPinPeer,CY.toBinary(e))}catch(i){this.logger.error(`Error in pinning peer: ${i}`)}}async handleSocketEvents(){h(this,Kt).on(He.peerJoinedBroadcast,({id:t,payload:e})=>{if(this.roomJoined){this.logger.debug("got peer joined with id",t);try{const{participant:{peerId:i,displayName:r,producerStates:s,userId:n}}=OQ.fromBinary(e);if(i===this.peerId)return;this.logger.info("peer-joined",{peerId:i,displayName:r,producerStates:s});const a={id:i,isHost:!1,displayName:r,flags:{},userId:n,audioMuted:!0,videoEnabled:!1,audioTrack:null,videoTrack:null,producers:[]};s.forEach(o=>{o.kind===Es.AUDIO?a.audioMuted=o.pause:a.videoEnabled=!o.pause,a.producers.push({producerId:o.producerId,kind:o.kind===Es.AUDIO?"audio":"video",pause:o.pause,screenShare:o.screenShare})}),x.emit(T.PEER_JOINED,a),x.emit(T.REFRESH_GRID)}catch(i){this.logger.error("error in peer-joined-broadcast",i)}}}),h(this,Kt).on(He.peerProducerCreateBroadcast,({payload:t})=>{if(this.roomJoined)try{const{participantId:e,producerState:i}=LQ.fromBinary(t);if(e===this.peerId)return;this.logger.info("producer created broadcast:",e,"producer state",i),x.emit(T.NEW_PRODUCER,{peerId:e,producer:{producerId:i.producerId,kind:i.kind===Es.AUDIO?"audio":"video",pause:i.pause,screenShare:i.screenShare}})}catch(e){this.logger.error("error in peer-producer-create-broadcast",e)}}),h(this,Kt).on(He.peerProducerToggleBroadcast,({payload:t})=>{if(this.roomJoined)try{const{participantId:e,producerState:{kind:i,pause:r,producerId:s}}=UQ.fromBinary(t),n=i===Es.AUDIO?"audio":"video";if(this.logger.info("producer toggle broadcast:",e,"producerId",s,"kind",n,"paused",r),e===this.peerId&&r){x.emit(n==="audio"?T.MUTE_ALL:T.MUTE_ALL_VIDEO);return}x.emit(T.PRODUCER_TOGGLE,{peerId:e,producerId:s,paused:r,kind:n}),[...this.getConsumers().values()].filter(a=>a.producerId===s).forEach(a=>{a.paused!==r&&(this.logger.debug("consumer state mismatched for",a.id,". updating consumer pause state",a.paused,"to",r),r?(a.pause(),x.emit(T.CONSUMER_PAUSED,{id:a.id})):(a.resume(),x.emit(T.CONSUMER_RESUMED,{id:a.id})))})}catch(e){this.logger.error("error in producer toggle broadcast handler",e)}}),h(this,Kt).on(He.selectedPeer,({payload:t})=>{if(this.roomJoined)try{const{audioPeers:e,compulsoryPeers:i}=LO.fromBinary(t);this.logger.info("selected peers:",e,i),x.emit(T.SELECTED_PEERS,{peerIds:i.concat(e)})}catch(e){this.logger.error("error in selected-peer",e)}}),h(this,Kt).on(He.selectedPeerDiff,({payload:t})=>{if(this.roomJoined)try{const{entries:e}=tQ.fromBinary(t);this.logger.debug("selected peers diff:",e);const i=e.map(r=>({peerId:r.peerId,priority:r.priority}));x.emit(T.SELECTED_PEERS_DIFF,{entries:i})}catch(e){this.logger.error("error in selected-peer-diff",e)}}),h(this,Kt).on(He.peerLeaveBroadcast,({payload:t})=>{if(this.roomJoined)try{const{participantId:e}=FQ.fromBinary(t);if(e===this.peerId){this.logger.warn("peer got kicked out of the room"),x.emit(T.KICKED);return}this.logger.info("peer left broadcast:",e),this.sfuHandler.cleanupConsumers(e),x.emit(T.PEER_CLOSED,{id:e})}catch(e){this.logger.error("error in peer left broadcast",e)}}),h(this,Kt).on(He.peerProducerCloseBroadcast,({payload:t})=>{if(this.roomJoined)try{const{participantId:e,producerState:{producerId:i}}=$Q.fromBinary(t);if(e===this.peerId)return;this.logger.info("producer closed broadcast:",e),x.emit(T.PRODUCER_CLOSED,{peerId:e,producerId:i});const r=this.sfuHandler.producerIdToConsumerIdMap.get(i);if(!r){this.logger.warn("no consumer found for producer",i);return}this.logger.info("closing consumer",r,"producer id ",i),this.sfuHandler.closeConsumer(r).then(()=>{this.logger.info("closed consumer",r),this.sfuHandler.producerIdToConsumerIdMap.delete(i),x.emit(T.CONSUMER_CLOSED,{id:r})}).catch(s=>{this.logger.error("error closing consumer",s)})}catch(e){this.logger.error("error on producer close broadcast",e)}}),h(this,Kt).on(He.globalPeerPinBroadcast,({payload:t})=>{if(this.roomJoined)try{let e;if(t){const i=BQ.fromBinary(t);this.logger.info("pinning peerId: ",i),e=i.participantId}x.emit(T.PEER_PINNED,{peerId:e})}catch(e){this.logger.error("error on global peer pin broadcast",e)}}),h(this,Kt).on(He.recordingStartedBroadcast,({payload:t})=>{if(this.roomJoined)try{let e;if(t){const i=GQ.fromBinary(t);this.logger.info("recording started. peerId: ",i),e=i.participantId}x.emit(T.HIVE_RECORDING_STARTED,e)}catch(e){this.logger.error("error on recording started broadcast",e)}}),h(this,Kt).on(He.recordingStoppedBroadcast,({payload:t})=>{if(this.roomJoined)try{let e;if(t){const i=qQ.fromBinary(t);this.logger.info("recording stopped. peerId: ",i),e=i.participantId}x.emit(T.HIVE_RECORDING_STOPPED,e)}catch(e){this.logger.error("error on recording started broadcast",e)}}),h(this,Kt).on(He.peerDisplayNameEditBroadcast,({payload:t})=>{if(this.roomJoined)try{const e=KQ.fromBinary(t);this.logger.debug("peer display name changed to:",e.displayName),x.emit(T.PEER_DISPLAY_NAME_CHANGED,e.participantId)}catch(e){this.logger.error("failed to handle peerDisplayNameEditBroadcast:",e)}})}handleSFUEvents(){h(this,qe).on("reconnect_transport",async t=>{try{x.emit(T.HIVE_TRANPSORT_RECONNECTING),await this._transportQueue.push(this.reconnectTransport.bind(this,t),"reconnect_transport"),this.logger.info("transport reconnected [id:%s]",t.id)}catch(e){this.logger.error("error on reconnection transports",e)}}),h(this,qe).on("rejoin",()=>{if(this._totalRejoinCount>1){this.logger.warn("cannot rejoin more already rejoined 3 times");return}if(h(this,ua)){this.logger.warn("room joining in progress, cannot start rejoining");return}this._totalRejoinCount+=1,this.logger.warn("rejoining the room because transports are failing",{rejoinCount:this._totalRejoinCount}),x.emit(T.HIVE_ROOM_REJOINING),h(this,ad).call(this)})}},Kt=new WeakMap,qe=new WeakMap,ad=new WeakMap,ua=new WeakMap,_x);let we=qO;$e([E.trace("HiveNodeClient.reset")],we.prototype,"reset",1);$e([E.trace("HiveNodeClient.reconnect")],we.prototype,"reconnectTransport",1);$e([E.trace("HiveNodeClient.setupTransport")],we.prototype,"setupTransports",1);$e([E.trace("HiveNodeClient.joinRoom")],we.prototype,"joinRoom",1);$e([E.trace("HiveNodeClient.completeJoinRoom")],we.prototype,"completeJoinRoom",1);$e([E.trace("HiveNodeClient.leaveRoom")],we.prototype,"leaveRoom",1);$e([E.trace("HiveNodeClient.activatePeers")],we.prototype,"activatePeers",1);$e([E.trace("HiveNodeClient.deactivatePeers")],we.prototype,"deactivatePeers",1);$e([E.trace("HiveNodeClient.createConsumer")],we.prototype,"createConsumer",1);$e([E.trace("HiveNodeClient.pauseConsumers")],we.prototype,"pauseConsumers",1);$e([E.trace("HiveNodeClient.resumeConsumers")],we.prototype,"resumeConsumers",1);$e([E.trace("HiveNodeClient.closeConsumers")],we.prototype,"closeConsumers",1);$e([E.trace("HiveNodeClient.consumePeer")],we.prototype,"consumePeer",1);$e([E.trace("HiveNodeClient.shareWebcam")],we.prototype,"shareWebcam",1);$e([E.trace("HiveNodeClient.shareScreen")],we.prototype,"shareScreen",1);$e([E.trace("HiveNodeClient.shareMic")],we.prototype,"shareMic",1);$e([E.trace("HiveNodeClient.pauseMic")],we.prototype,"pauseMic",1);$e([E.trace("HiveNodeClient.pauseWebcam")],we.prototype,"pauseWebcam",1);$e([E.trace("HiveNodeClient.resumeMic")],we.prototype,"resumeMic",1);$e([E.trace("HiveNodeClient.resumeWebcam")],we.prototype,"resumeWebcam",1);$e([E.trace("HiveNodeClient.disableWebcam")],we.prototype,"disableWebcam",1);$e([E.trace("HiveClient.disableMic")],we.prototype,"disableMic",1);$e([E.trace("HiveClient.disableScreenShare")],we.prototype,"disableScreenShare",1);$e([E.trace("HiveNodeClient.muteSelf")],we.prototype,"muteSelf",1);$e([E.trace("HiveNodeClient.unmuteSelf")],we.prototype,"unmuteSelf",1);$e([E.trace("HiveNodeClient.resetVideoProducers")],we.prototype,"resetVideoProducers",1);$e([E.trace("HiveNodeClient.getPolls")],we.prototype,"getPolls",1);$e([E.trace("HiveNodeClient.changeDisplayName")],we.prototype,"changeDisplayName",1);$e([E.trace("HiveNodeClient.kickPeer")],we.prototype,"kick",1);$e([E.trace("HiveNodeClient.kickAllPeers")],we.prototype,"kickAll",1);$e([E.trace("HiveNodeClient.muteAll")],we.prototype,"muteAll",1);$e([E.trace("HiveNodeClient.muteAllVideo")],we.prototype,"muteAllVideo",1);$e([E.trace("HiveNodeClient.mute")],we.prototype,"mutePeer",1);$e([E.trace("HiveNodeClient.muteVideo")],we.prototype,"mutePeerVideo",1);$e([E.trace("HiveNodeClient.pinPeer")],we.prototype,"pinPeer",1);$e([E.trace("HiveNodeClient.init")],we,"init",1);var sn=(t=>(t.SOCKET_CONNECTED="SOCKET_CONNECTED",t.SOCKET_DISCONNECTED="SOCKET_DISCONNECTED",t.SOCKET_CONNECTION_ERROR="SOCKET_CONNECTION_ERROR",t.SOCKET_MESSAGE="SOCKET_MESSAGE",t))(sn||{}),qu=(t=>(t[t.NOT_STARTED=0]="NOT_STARTED",t[t.CONNECTED=1]="CONNECTED",t[t.DISCONNECTED=2]="DISCONNECTED",t[t.ERRORED=3]="ERRORED",t))(qu||{}),die=Object.defineProperty,lie=Object.getOwnPropertyDescriptor,Zv=(t,e,i,r)=>{for(var s=r>1?void 0:r?lie(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&die(e,i,s),s};const uie="event://server-simple-message",pie="event://send-message";class Ih extends ir{constructor(e){super(),y(this,"socket"),y(this,"socketState"),y(this,"callbackHandler",null),this.socketState=qu.NOT_STARTED,e.callbackHandler&&(this.callbackHandler=e.callbackHandler)}connect(e){this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect()),this.socket=am(e,{closeOnBeforeunload:!1}),this.setupSocket()}disconnect(){this.socket.disconnect()}reconnect(){this.socket.connect()}setupSocket(){this.socket.on("disconnect",e=>{this.socketState=qu.DISCONNECTED,S.warn("SocketClient::socket_disconnected",{error:{reason:e}}),this.emit(sn.SOCKET_DISCONNECTED,{reason:e})}),this.socket.on("connect_error",e=>{this.socketState=qu.ERRORED,ee.hasFeature(re.SOCKET_POLLING)&&(this.socket.io.opts.transports=["polling","websocket"]),S.error("SocketClient::socket_connection_errored",{error:e}),this.emit(sn.SOCKET_CONNECTION_ERROR,{err:e})}),this.socket.on("connect",()=>{this.socketState=qu.CONNECTED,S.info("SocketClient::socket_connected"),this.emit(sn.SOCKET_CONNECTED)}),this.socket.on(uie,async(e,i)=>{const r=JSON.parse(e);if((!E.logExclusionList.includes(r==null?void 0:r.type)||ee.hasFeature(re.BYPASS_LOG_EXCLUSION_LIST))&&S.info(`SocketClient::SIMPLE_SERVER_MESSAGE_EVENT::${r==null?void 0:r.type}`),i){let s="OK";this.callbackHandler&&(s=await this.callbackHandler(r)),i(s)}else this.emit(sn.SOCKET_MESSAGE,r);Object.values(T).find(s=>s===r.type)&&x.emit(r.type,r.payload)})}async sendMessage(e){return(!E.logExclusionList.includes(e==null?void 0:e.type)||ee.hasFeature(re.BYPASS_LOG_EXCLUSION_LIST))&&S.info(`SocketClient::sendMessage::${e==null?void 0:e.type}`),Object.assign(e,{metadata:e.metadata||{}}),E.injectContext(e.metadata),new Promise(i=>{this.socket.emit(pie,JSON.stringify(e),r=>{if(!r){i(void 0);return}const s=JSON.parse(r);i(s)})})}}Zv([E.trace("SocketClient.connect")],Ih.prototype,"connect",1);Zv([E.trace("SocketClient.disconnect")],Ih.prototype,"disconnect",1);Zv([E.trace("SocketClient.reconnect")],Ih.prototype,"reconnect",1);Zv([E.trace("SocketClient.setupSocket")],Ih.prototype,"setupSocket",1);var iw,JO,rw,KO,kg,W0;const sw=class{constructor(t=1e3){R(this,iw),R(this,rw),y(this,"sendTransport"),y(this,"recvTransport"),y(this,"collectStpStats"),y(this,"collectRtpStats"),y(this,"pingInterval"),this.pingInterval=t}initSendTransport(t){this.sendTransport=t,x.emit(T.SEND_TRANSPORT_CREATED)}initRecvTransport(t){this.recvTransport=t,x.emit(T.RECV_TRANSPORT_CREATED)}collectSendTransportStats(){return!this.sendTransport||this.collectStpStats?!1:(this.collectStpStats=setInterval(Xe(this,iw,JO).bind(this),this.pingInterval),!0)}collectRecvTransportStats(){return!this.recvTransport||this.collectRtpStats?!1:(this.collectRtpStats=setInterval(Xe(this,rw,KO).bind(this),this.pingInterval),!0)}stopStatsCollection(t){return t==="send"?(clearInterval(this.collectStpStats),this.collectStpStats=void 0,!0):t==="receive"?(clearInterval(this.collectRtpStats),this.collectRtpStats=void 0,!0):!1}cleanup(t){this.stopStatsCollection(t),t==="send"?(this.sendTransport=void 0,this.collectStpStats=void 0,x.emit(T.SEND_TRANSPORT_CLOSED)):(this.recvTransport=void 0,this.collectRtpStats=void 0,x.emit(T.RECV_TRANSPORT_CLOSED))}};let YO=sw;iw=new WeakSet,JO=function(){this.sendTransport||this.stopStatsCollection("send"),this.sendTransport.getStats().then(t=>{var e;return Xe(e=sw,kg,W0).call(e,t,"send")})},rw=new WeakSet,KO=function(){this.recvTransport||this.stopStatsCollection("receive"),this.recvTransport.getStats().then(t=>{var e;return Xe(e=sw,kg,W0).call(e,t,"receive")})},kg=new WeakSet,W0=function(t,e){t.forEach(i=>{i.type==="candidate-pair"&&x.emit(T.CANDIDATE_PEER_UPDATE,{...i,transport:e}),i.type==="inbound-rtp"&&x.emit(T.INBOUND_RTP_UPDATE,{...i,transport:e}),i.type==="outbound-rtp"&&x.emit(T.OUTBOUND_RTP_UPDATE,{...i,transport:e})})},R(YO,kg);const Wa=new YO;var hie=Object.defineProperty,gie=Object.getOwnPropertyDescriptor,wr=(t,e,i,r)=>{for(var s=r>1?void 0:r?gie(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&hie(e,i,s),s};class nr extends ir{constructor(e,i){super(),y(this,"device"),y(this,"sendTransport"),y(this,"recvTransport"),y(this,"sendTransportIceStateDisconnectTime"),y(this,"recvTransportIceStateDisconnectTime"),y(this,"producerCreationStatus"),y(this,"consumers"),y(this,"producers"),y(this,"socketClient"),y(this,"iceRestartInProgress"),this.producers=new Map,this.consumers=new Map,this.producerCreationStatus=new Map,this.iceRestartInProgress={sendTransport:!1,recvTransport:!1},i!==void 0?this.device=i:this.device=new dO,this.socketClient=e}async setupTransports(){const e=await gi().getICEServers();await this.loadRouter(),await Promise.all([this.createRecvTransport(e),this.createSendTransport(e)])}async loadRouter(){(this.recvTransport||this.sendTransport)&&await this.stopAllTransports()}getRTPCapabilities(){return this.device.rtpCapabilities}async createRecvTransport(e){if(!this.socketClient)return;const i={forceTcp:!1,producing:!1,consuming:!0},r=(await this.socketClient.sendMessage({type:"createWebRtcTransport",payload:i})).payload;if(S.info("recvTransport::initializing_transport"),this.recvTransport=this.device.createRecvTransport({...r,iceServers:e,proprietaryConstraints:q2}),Wa.initRecvTransport(this.recvTransport),S.info("recvTransport::initialized_transport"),X.onSafeInitialization(()=>{X.configureRecvTransport(this.recvTransport)}),this.recvTransport.on("connect",async({dtlsParameters:s},n,a)=>{var o,c,d,u;const p=await this.socketClient.sendMessage({type:"connectWebRtcTransport",payload:{transportId:this.recvTransport.id,dtlsParameters:s}});(o=p.payload)!=null&&o.error?(S.error("recvTransport::transport_status",{error:(d=p.payload)==null?void 0:d.error,transport:{id:(u=this==null?void 0:this.recvTransport)==null?void 0:u.id,status:"failed",type:"recv"}}),a(new Error("failed"))):(n(),S.info("recvTransport::transport_status",{transport:{id:(c=this==null?void 0:this.recvTransport)==null?void 0:c.id,status:"connected",type:"recv"}}))}),ee.hasFeature(re.ENABLE_ICE_STATE_LOGGING)){S.info("enabling_ice_state_logging_for_recv_transport");let s;this.recvTransport.on("connectionstatechange",async n=>{var a,o,c,d,u,p,g,m;switch(S.info("recvTransport::connection_state_change",{transport:{id:(a=this==null?void 0:this.recvTransport)==null?void 0:a.id,status:n,type:"recv"}}),n){case"failed":if(x.emit(T.ICE_FAILED,{transport:"recv"}),S.warn("recvTransport::ice_state_failed"),ee.hasFeature(re.ICE_RESTART_ON_FAILED_STATE))try{await this.restartIceTillSuccess(this.recvTransport)}catch(f){S.error("recvTransport::ice_restart_failed",{error:f,transport:{id:(o=this==null?void 0:this.recvTransport)==null?void 0:o.id,status:"failed",type:"recv"}})}break;case"disconnected":x.emit(T.ICE_DISCONNECTED,{transport:"recv"}),S.warn("recvTransport::ice_state_disconnected"),this.recvTransportIceStateDisconnectTime&&S.warn("recvTransport::ice_state_disconnected_again",{transport:{id:(c=this==null?void 0:this.recvTransport)==null?void 0:c.id,status:"disconnected",type:"recv",lastDisconnectedTime:(d=this.recvTransportIceStateDisconnectTime)==null?void 0:d.toISOString(),lastDisconnectedTimeOffset:(u=this.recvTransportIceStateDisconnectTime)==null?void 0:u.getTimezoneOffset(),durationPassed:new Date().getTime()-this.recvTransportIceStateDisconnectTime.getTime()}}),this.recvTransportIceStateDisconnectTime=new Date;try{s=ee.getValue(re.ICE_RESTART_ON_DISCONNECTED_STATE),typeof s!="number"&&(s=void 0)}catch{s=void 0}s&&setTimeout(async()=>{var f,b,w,v,_;if(this.recvTransportIceStateDisconnectTime!==void 0){x.emit(T.ICE_RECONNECTING,{transport:"recv"}),S.info("recvTransport::attempting_ice_restart",{transport:{id:(f=this==null?void 0:this.recvTransport)==null?void 0:f.id,type:"recv",status:"reconnecting",lastDisconnectedTime:(b=this.recvTransportIceStateDisconnectTime)==null?void 0:b.toISOString(),lastDisconnectedTimeOffset:(w=this.recvTransportIceStateDisconnectTime)==null?void 0:w.getTimezoneOffset()},iceRestart:{isSendTransport:(v=this==null?void 0:this.iceRestartInProgress)==null?void 0:v.sendTransport,isRecvTransport:(_=this==null?void 0:this.iceRestartInProgress)==null?void 0:_.recvTransport}});try{await this.restartIceTillSuccess(this.recvTransport)}catch(k){S.info("SFUHandler.disconnected.restartIceFailed",{error:k,iceRestart:{status:"failed",isRecvTransport:!0}})}}},s);break;case"connected":x.emit(T.ICE_CONNECTED,{transport:"recv"}),S.info("recvTransport::ice_state_connected",{transport:{id:(p=this==null?void 0:this.recvTransport)==null?void 0:p.id,type:"recv",status:"connected",lastDisconnectedTime:(g=this.recvTransportIceStateDisconnectTime)==null?void 0:g.toISOString(),lastDisconnectedTimeOffset:(m=this.recvTransportIceStateDisconnectTime)==null?void 0:m.getTimezoneOffset(),durationPassed:this.recvTransportIceStateDisconnectTime?new Date().getTime()-this.recvTransportIceStateDisconnectTime.getTime():null}}),this.recvTransportIceStateDisconnectTime=void 0;break}})}this.recvTransport.observer.on("close",()=>{this.recvTransport=void 0,Wa.cleanup("receive"),S.warn("recvTransport_closed")})}async createSendTransport(e){const i={forceTcp:!1,producing:!0,consuming:!1},r=(await this.socketClient.sendMessage({type:"createWebRtcTransport",payload:i})).payload;if(S.info("sendTransport::initializing_transport"),this.sendTransport=this.device.createSendTransport({...r,iceServers:e,proprietaryConstraints:q2}),Wa.initSendTransport(this.sendTransport),S.info("sendTransport::initialized_transport"),X.onSafeInitialization(()=>{X.configureSendTransport(this.sendTransport)}),this.sendTransport.on("connect",async({dtlsParameters:s},n,a)=>{var o,c,d,u;(c=(await this.socketClient.sendMessage({type:"connectWebRtcTransport",payload:{transportId:(o=this.sendTransport)==null?void 0:o.id,dtlsParameters:s}})).payload)!=null&&c.error?(S.error("sendTransport::transport_status",{transport:{id:(u=this==null?void 0:this.sendTransport)==null?void 0:u.id,status:"failed",type:"send"}}),a(new Error("failed"))):(S.info("sendTransport::transport_status",{transport:{id:(d=this==null?void 0:this.sendTransport)==null?void 0:d.id,status:"connected",type:"send"}}),n())}),this.sendTransport.on("produce",async({kind:s,rtpParameters:n,appData:a},o,c)=>{var d,u,p,g,m,f;const b=await this.socketClient.sendMessage({type:"produce",payload:{transportId:(d=this.sendTransport)==null?void 0:d.id,kind:s,rtpParameters:n,appData:a}});(u=b.payload)!=null&&u.error?(S.info("sendTransport::producer_status::failed",{producer:{kind:s,appData:a,status:"failed",id:(m=b==null?void 0:b.payload)==null?void 0:m.id}}),c((f=b.payload)==null?void 0:f.error)):(S.info("sendTransport::producer_status::producing",{producer:{kind:s,appData:a,status:"producing",id:(p=b==null?void 0:b.payload)==null?void 0:p.id}}),o({id:(g=b.payload)==null?void 0:g.id}))}),ee.hasFeature(re.ENABLE_ICE_STATE_LOGGING)){S.info("Enabling ice state logging for send transport");let s;this.sendTransport.on("connectionstatechange",async n=>{var a,o,c,d;switch(S.info("sendTransport::connection_state_change",{transport:{id:(a=this==null?void 0:this.sendTransport)==null?void 0:a.id,status:n,type:"send"}}),n){case"failed":if(x.emit(T.ICE_FAILED,{transport:"send"}),S.warn("sendTransport::ice_state_failed"),ee.hasFeature(re.ICE_RESTART_ON_FAILED_STATE))try{await this.restartIceTillSuccess(this.sendTransport)}catch(u){S.error("sendTransport::ice_restart_failed",{error:u})}break;case"disconnected":x.emit(T.ICE_DISCONNECTED,{transport:"send"}),S.warn("sendTransport::ice_state_disconnected"),this.sendTransportIceStateDisconnectTime&&S.warn("sendTransport::ice_state_disconnected_again",{transport:{id:(o=this==null?void 0:this.sendTransport)==null?void 0:o.id,status:"disconnected",lastDisconnectedTime:this.sendTransportIceStateDisconnectTime.toLocaleTimeString(),durationPassed:new Date().getTime()-this.sendTransportIceStateDisconnectTime.getTime(),type:"send"}}),this.sendTransportIceStateDisconnectTime=new Date;try{s=ee.getValue(re.ICE_RESTART_ON_DISCONNECTED_STATE),typeof s!="number"&&(s=void 0)}catch{s=void 0}s&&setTimeout(async()=>{var u,p,g,m;if(this.sendTransportIceStateDisconnectTime!==void 0){x.emit(T.ICE_RECONNECTING,{transport:"send"}),S.info("sendTransport::attempting_ice_restart",{transport:{id:(u=this==null?void 0:this.sendTransport)==null?void 0:u.id,status:"reconnecting",type:"send",lastDisconnectedTime:(p=this.sendTransportIceStateDisconnectTime)==null?void 0:p.toISOString(),lastDisconnectedTimeOffset:(g=this.sendTransportIceStateDisconnectTime)==null?void 0:g.getTimezoneOffset()},iceRestart:{status:"connecting"}});try{await this.restartIceTillSuccess(this.sendTransport)}catch(f){S.info("SFUHandler.disconnected.restartIceFailed",{error:f,transport:{id:(m=this==null?void 0:this.sendTransport)==null?void 0:m.id,type:"send",status:"failed"}})}}},s);break;case"connected":x.emit(T.ICE_CONNECTED,{transport:"send"}),S.info("sendTransport::ice_state_connected",{transport:{id:(c=this==null?void 0:this.sendTransport)==null?void 0:c.id,type:"send",status:"connected",lastDisconnectedTime:(d=this.sendTransportIceStateDisconnectTime)==null?void 0:d.toLocaleTimeString(),durationPassed:this.sendTransportIceStateDisconnectTime?new Date().getTime()-this.sendTransportIceStateDisconnectTime.getTime():null}}),this.sendTransportIceStateDisconnectTime=void 0;break}})}this.sendTransport.observer.on("close",()=>{this.sendTransport=void 0,Wa.cleanup("send"),S.warn("sendTransport_closed")})}async restartIce(e){const{direction:i}=e;if(!(i==="recv"?this.iceRestartInProgress.recvTransport:this.iceRestartInProgress.sendTransport)){i==="recv"?this.iceRestartInProgress.recvTransport=!0:this.iceRestartInProgress.sendTransport=!0;try{const r=(await this.socketClient.sendMessage({type:"restartIce",payload:{transportId:e.id}})).payload;await e.restartIce(r)}catch(r){S.error("SFUHandler.restartIce.Failed",{error:r,iceRestart:{status:"failed"},transport:{id:e==null?void 0:e.id,status:"failed",type:i}})}i==="recv"?this.iceRestartInProgress.recvTransport=!1:this.iceRestartInProgress.sendTransport=!1}}async createConsumer(e){if(this.recvTransport===void 0||this.recvTransport.closed)return;const{peerId:i,producerId:r,id:s,kind:n,rtpParameters:a,appData:o,remotelyPaused:c}=e;S.info("createConsumer::initializing_consumer",{consumer:{id:s,peerId:i,kind:n,appData:o,remotelyPaused:c,producerId:r}});const d=await this.recvTransport.consume({id:s,producerId:r,kind:n,rtpParameters:a,appData:{...o,peerId:i}});S.info("createConsumer::initialized_consumer",{consumer:{id:d.id,peerId:i,kind:n,appData:o,remotelyPaused:c,producerId:r}});const u=d;u.peerId=i,u.remotelyPaused=c,u.score=10,this.consumers.set(d.id,u)}async closeConsumer(e){const{id:i}=e,r=this.consumers.get(i);r&&(S.info("SFUHandler::close_consumer",{consumer:r}),r.close(),this.consumers.delete(i))}async cleanupConsumers(){var e;(e=this.consumers)==null||e.forEach(i=>{x.emit(T.CONSUMER_CLOSED,{id:i.id}),this.closeConsumer({id:i.id})})}async pauseConsumer(e){const{id:i}=e,r=this.consumers.get(i);r&&r.pause()}async resumeConsumer(e){const{id:i}=e,r=this.consumers.get(i);r&&r.resume()}async createProducer(e,i,r){if(this.sendTransport===void 0||this.sendTransport.closed)return;if(S.info("createProducer::initializing_producer",{producer:{id:"TO_BE_CREATED",kind:e,status:"initializing",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.get(e)&&this.producerCreationStatus.get(e)==="INITIALIZING"){S.info("createProducer::producer getting initializing",{producer:{id:"GETTING_CREATED",status:"initializing",kind:e,appData:i==null?void 0:i.appData}});return}this.producerCreationStatus.set(e,"INITIALIZING");const s=await Promise.race([this.sendTransport.produce(i),new Promise(a=>setTimeout(()=>a(void 0),6e3))]);if(!s)throw S.error("createProducer::transport_initialization_timed_out",{producer:{id:"FAILED_TO_CREATE",kind:e,status:"failed",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.set(e,"NOT_INITIALIZED"),new A(`Producer Creation timed out! ${e}`);this.producerCreationStatus.set(e,"INITIALIZED"),S.info("createProducer::initialized_producer",{producer:{id:s==null?void 0:s.id,kind:e,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),s.on("transportclose",()=>{S.info("producer::transportclose",{producer:{id:s==null?void 0:s.id,kind:e,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.set(e,"NOT_INITIALIZED"),this.producers.delete(e)}),s.on("trackended",()=>{x.emit(T.PRODUCER_TRACK_ENDED,{kind:e}),S.info("producer::trackended",{producer:{id:s==null?void 0:s.id,kind:e,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),[ae.MIC,ae.WEBCAM].includes(e)||r()});const n=s;n.score=10,this.producers.set(e,n),await this.reconfigureWebcamLayers(),await this.reconfigureSafariScreenshareLayers()}async removeProducer(e,i=!0){const r=this.producers.get(e);!r||r.closed||(S.info("SFUHandler::remove_producer",{producer:{id:r==null?void 0:r.id,kind:e,status:"UNKNOWN",appData:r==null?void 0:r.appData},debuggingHint:`stopTrack was ${i}`}),i&&r.track.stop(),r.close(),await this.socketClient.sendMessage({type:"closeProducer",payload:{producerId:r.id}}),this.producerCreationStatus.set(e,"NOT_INITIALIZED"),this.producers.delete(e),await this.reconfigureWebcamLayers())}stopAllProducers(){Array.from(this.producers.keys()).forEach(e=>{this.removeProducer(e)})}async stopAllTransports(){if(this.sendTransport){try{this.sendTransport.close()}catch(e){S.error("stopAllTransports",{error:e})}this.sendTransport=void 0}if(this.recvTransport){try{this.recvTransport.close()}catch(e){S.error("SFUHandler::stopAllTransports::error",e)}this.recvTransport=void 0}}async reconfigureWebcamLayers(){if(!ee.hasFeature(re.DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE))return;const e=this.producers.get(ae.WEBCAM);e&&await e.setMaxSpatialLayer(this.producers.get(ae.SCREENSHARE_VIDEO)?0:1)}async reconfigureSafariScreenshareLayers(){if(!ee.hasFeature(re.SCREENSHARE_SIMULCAST)||!Ue.isSafari())return;const e=this.producers.get(ae.SCREENSHARE_VIDEO);if(!e)return;const i=e.rtpSender.getParameters();i.encodings=hJ,e.rtpSender.setParameters(i)}async restartIceTillSuccess(e,i=3){let r=!1,s=0;for(;!r&&s<i;)try{S.info("SFUHandler.restartIceTillSuccess.AttemptRestart",{iceRestart:{currentAttempt:s,isSendTransport:e.direction==="send",isRecvTransport:e.direction==="recv"}}),await this.restartIce(e),r=!0}catch{s+=1}if(!r)throw new A("Failed to restart Ice")}}wr([E.trace("SFUHandler.setupTransports")],nr.prototype,"setupTransports",1);wr([E.trace("SFUHandler.loadRouter")],nr.prototype,"loadRouter",1);wr([E.trace("SFUHandler.createRecvTransport")],nr.prototype,"createRecvTransport",1);wr([E.trace("SFUHandler.createSendTransport")],nr.prototype,"createSendTransport",1);wr([E.trace("SFUHandler.restartIce")],nr.prototype,"restartIce",1);wr([E.trace("SFUHandler.createConsumer")],nr.prototype,"createConsumer",1);wr([E.trace("SFUHandler.closeConsumer")],nr.prototype,"closeConsumer",1);wr([E.trace("SFUHandler.cleanupConsumers")],nr.prototype,"cleanupConsumers",1);wr([E.trace("SFUHandler.pauseConsumer")],nr.prototype,"pauseConsumer",1);wr([E.trace("SFUHandler.resumeConsumer")],nr.prototype,"resumeConsumer",1);wr([E.trace("SFUHandler.createProducer")],nr.prototype,"createProducer",1);wr([E.trace("SFUHandler.removeProducer")],nr.prototype,"removeProducer",1);wr([E.trace("SFUHandler.stopAllProducers")],nr.prototype,"stopAllProducers",1);wr([E.trace("SFUHandler.stopAllTransports")],nr.prototype,"stopAllTransports",1);class jt extends ir.EventEmitter{emit(e,...i){return super.emit("*",e,...i),super.emit(e,...i)}on(e,i){return super.on(e,i)}addListener(e,i){return super.addListener(e,i)}off(e,i){return super.off(e,i)}once(e,i){return super.once(e,i)}prependListener(e,i){return super.prependListener(e,i)}prependOnceListener(e,i){return super.prependOnceListener(e,i)}removeListener(e,i){return super.removeListener(e,i)}removeAllListeners(e){return super.removeAllListeners(e)}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}}var mie=Object.defineProperty,fie=Object.getOwnPropertyDescriptor,vie=(t,e,i,r)=>{for(var s=r>1?void 0:r?fie(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&mie(e,i,s),s},zn=(t=>(t.REQUEST="REQUEST",t.ACCEPT="ACCEPT",t.REJECT="REJECT",t.END="END",t.EVENT="EVENT",t))(zn||{}),ll=(t=>(t.PENDING="PENDING",t.ACCEPTED="ACCEPTED",t.REJECTED="REJECTED",t.ENDED="ENDED",t))(ll||{}),th=(t=>(t.KEYBOARD="KEYBOARD",t.MOUSE="MOUSE",t))(th||{}),Tm=(t=>(t.LEFT_CLICK="click",t.RIGHT_CLICK="contextmenu",t.MOVE="mousemove",t))(Tm||{}),Fn=(t=>(t.REQUEST_RECEIVED="REQUEST_RECEIVED",t.REQUEST_SENT="REQUEST_SENT",t.INCOMING_REQUEST_ACCEPTED="INCOMING_REQUEST_ACCEPTED",t.OUTGOING_REQUEST_ACCEPTED="OUTGOING_REQUEST_ACCEPTED",t.INCOMING_REQUEST_ENDED="INCOMING_REQUEST_ENDED",t.OUTGOING_REQUEST_ENDED="OUTGOING_REQUEST_ENDED",t))(Fn||{});let ih=class extends jt{constructor(t){super(),y(this,"id"),y(this,"remotePeerId"),y(this,"hostPeerId"),y(this,"state");const{remotePeerId:e,requestId:i,hostPeerId:r,state:s}=t;this.id=i,this.remotePeerId=e,this.hostPeerId=r,this.state=s}};ih=vie([qi(t=>{throw new A(t.message,"1400")})],ih);var yie=Object.defineProperty,bie=Object.getOwnPropertyDescriptor,_r=(t,e,i,r)=>{for(var s=r>1?void 0:r?bie(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&yie(e,i,s),s},Ae,ko,Sx;const nw=(Sx=class extends FO{constructor(t){super(),R(this,Ae,void 0),y(this,"isV2AuthToken"),R(this,ko,void 0),y(this,"legacyMode"),y(this,"roomNodeUrl"),y(this,"peerDisplayName");const{roomName:e,roomNodeUrl:i,peerId:r,authToken:s,legacyMode:n,socketClient:a,meetingTitle:o,viewType:c}=t;this.roomName=e,this.roomNodeUrl=i,this.peerId=r,this.authToken=s,this.legacyMode=n,I(this,Ae,a),this.roomJoined=!1,this.meetingTitle=o,this.isV2AuthToken=Ee.isV2AuthToken,I(this,ko,new nr(a,t.device)),X.legacySwitch(n);let d=0;const u=async({err:p})=>{var g;this.isDisconnected=!0,(g=this.sfuHandler)==null||g.cleanupConsumers(),x.emit(T.ROOM_NODE_CONNECTION_ERROR,p),this.roomJoined=!1,S.error("RoomNodeClient::ROOM_NODE_CONNECTION_ERROR",p);const m=Ee.isV2AuthToken?Ee.meetingId:e,f=gi(),{roomNodeUrl:b}=await f.getRoomNodeData({roomName:m,peerId:r}),w=`${b}?roomURL=${e}&peerId=${r}&authToken=${s}&version=0.5.0`;d+=1,!(d>3)&&(S.log("RoomNodeClient::SocketReconnection",{socket:{retryAttempt:d}}),h(this,Ae).connect(w),CO({...Ee.roomNodeOptions,roomNodeUrl:b}),this.roomNodeUrl=b)};c===_i.Livestream&&(a.removeListener(sn.SOCKET_CONNECTION_ERROR,u.bind(this)),a.on(sn.SOCKET_CONNECTION_ERROR,u.bind(this)))}static async init(t){const{legacyMode:e=!0,roomName:i,peerId:r,authToken:s,meetingTitle:n,device:a,viewType:o}=t;let c;const d=`${t.roomNodeUrl}?roomURL=${i}&peerId=${r}&authToken=${s}&version=0.5.0`,u=new Ih({callbackHandler:async p=>{await c.handleSocketCallbacks(p)}});return u.on(sn.SOCKET_MESSAGE,async(p,g)=>{await c.handleSockets(p,g)}),u.connect(d),c=new nw({legacyMode:e,authToken:s,peerId:r,roomName:i,roomNodeUrl:d,socketClient:u,meetingTitle:n,device:a,viewType:o}),u.on(sn.SOCKET_DISCONNECTED,p=>{var g,m;c.isDisconnected=!0,(g=c.sfuHandler)==null||g.cleanupConsumers(),(m=c.sfuHandler)==null||m.stopAllTransports(),x.emit(T.ROOM_NODE_DISCONNECTED,p),c.roomJoined=!1,S.info("RoomNodeClient::ROOM_NODE_DISCONNECTED")}),u.on(sn.SOCKET_CONNECTED,async p=>{x.emit(T.ROOM_NODE_CONNECTED,{...p,wasDisconnected:c.isDisconnected}),c.isDisconnected=!1,S.info("RoomNodeClient::ROOM_NODE_CONNECTED")}),c}get sfuHandler(){return h(this,ko)}reconnect(){h(this,Ae).reconnect()}async setupTransports(){await this.sfuHandler.setupTransports()}async handleSocketCallbacks(t){switch(t.type){case T.NEW_CONSUMER:return this.sfuHandler.createConsumer(t.payload);default:return null}}async handleSockets(t,e){if(t){switch((!E.logExclusionList.includes(t==null?void 0:t.type)||ee.hasFeature(re.BYPASS_LOG_EXCLUSION_LIST))&&S.info(`RoomNodeClient::handleSockets::${t==null?void 0:t.type}`),t.type){case T.CONSUMER_CLOSED:this.sfuHandler.closeConsumer(t.payload);break;case T.CONSUMER_PAUSED:this.sfuHandler.pauseConsumer(t.payload);break;case T.CONSUMER_RESUMED:this.sfuHandler.resumeConsumer(t.payload);break;case T.CONSUMER_SCORE:this.handleConsumerScore(t.payload);break;case T.PRODUCER_SCORE:this.handleProducerScore(t.payload);break;case T.PRODUCER_CLOSED:this.handleProducerClosed(t.payload);break}typeof e=="function"&&e()}}async joinRoom(t,e,i,r,s={}){var n,a,o;this.peerDisplayName=t,this.roomUUID=i;const c=await h(this,Ae).sendMessage({type:"joinRoom",payload:{device:Ue.getDeviceInfo(),displayName:t,rtpCapabilities:this.sfuHandler.getRTPCapabilities(),isLegacy:this.legacyMode,audioMuted:e}});if((n=c.payload)!=null&&n.waitlisted)return x.emit(T.WAITLISTED),{roomJoined:!1};this.roomJoined=!0,(o=(a=c.payload)==null?void 0:a.waitlistedPeers)==null||o.forEach(u=>{x.emit(T.WAITLIST_PEER_ADDED,u)}),this.legacyMode=c.payload.legacyMode||this.legacyMode,r&&r!==""&&await this.changeRoomDisplayTitle(r),this.maxPreferredStreams=c.payload.maxPreferredStreams;const d=gi();S.info("RoomNodeClient::joinRoom::pre emitasync room_joined");try{await x.emitAsync(T.ROOM_JOINED,c.payload)}catch(u){S.error("RoomNodeClient::joinRoom::emitAsync",{error:u})}return S.info("RoomNodeClient::joinRoom::post emitasync room_joined"),x.emit(T.SELF_ROOM_JOINED),ee.hasFeature(re.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"&&setTimeout(async()=>{const u=await d.getUserDetails(),p={userId:Ee.isV2AuthToken?u.participant.id:u.id,peerId:this.peerId,displayName:t,roomUUID:this.roomUUID,roomViewType:"groupCall",roomName:this.roomName,deviceInfo:{...Ue.getDeviceInfo(),userAgent:navigator.userAgent,memory:navigator.deviceMemory,cpus:navigator.hardwareConcurrency},sdkName:Df,sdkVersion:Cl,metaData:{},permissions:{}};X.roomJoined(p),s!=null&&s.audio?X.audioOn():X.audioOff(),s!=null&&s.video?X.videoOn():X.videoOff()}),{roomJoined:!0}}async leaveRoom(){this.sfuHandler.stopAllProducers(),await this.sfuHandler.stopAllTransports(),h(this,Ae).disconnect(),X.callEnded(),E.destruct()}handleProducerClosed({id:t}){this.sfuHandler.producers.forEach((e,i)=>{e.id===t&&this.sfuHandler.removeProducer(i)})}getConsumers(){return this.sfuHandler.consumers}static getComputedScore(t){var e,i;let r=0;try{Array.isArray(t)?t.length===1?r=t[0].score:r=t.map(({score:s})=>s??10).filter(s=>s>0).reduce((s,n)=>s+n,0)/t.length:r=(e=t==null?void 0:t.score)!=null?e:10}catch{r=(i=t==null?void 0:t.score)!=null?i:10}return r}handleConsumerScore({id:t,score:e}){var i;const r=h(this,ko).consumers.get(t);r&&(r.score=e&&e.producerScore!==void 0&&e.producerScore>=0?e.producerScore:(i=e==null?void 0:e.score)!=null?i:10,x.emit(T.CONSUMER_SCORE_UPDATE,{id:r.id,kind:r.kind,peerId:r.peerId,score:r.score}))}handleProducerScore({id:t,score:e}){const i=[...h(this,ko).producers.values()].find(s=>s.id===t);if(!i){S.error(`RoomNodeClient::producer_not_found. ProducerId: ${t}`);return}if(!i)return;const r=nw.getComputedScore(e);r!==void 0&&r!==i.score&&(i.score=r,x.emit(T.PRODUCER_SCORE_UPDATE,{id:i.id,kind:i.kind,appData:i.appData,score:i.score}))}async shareWebcam(t){if(t===void 0)return;if(this.sfuHandler.producers.has(ae.WEBCAM)){const c=this.sfuHandler.producers.get(ae.WEBCAM);if(!c.closed&&!navigator.isReactNative){await c.replaceTrack({track:t}),await this.resumeWebcam();return}await this.sfuHandler.removeProducer(ae.WEBCAM,!1)}let e=uJ;const i=this.sfuHandler.getRTPCapabilities().codecs.find(c=>c.mimeType.toLowerCase()==="video/vp9")||void 0,r=this.sfuHandler.getRTPCapabilities().codecs.find(c=>c.mimeType.toLowerCase()==="video/vp8")||void 0,s=ee.getValue(re.OVERRIDE_WEBCAM_SIMULCAST);if(i&&!this.legacyMode)e=gJ;else if(s!==void 0)try{e=JSON.parse(s)}catch{S.error("Failed to parse flagsmith simulcast")}const n=()=>this.legacyMode?r:i,a={track:t,encodings:ee.hasFeature(re.DISABLE_WEBCAM_SIMULCAST)?void 0:e,codecOptions:{videoGoogleStartBitrate:1e3},codec:n(),appData:{screenShare:!1},stopTracks:!1},o=()=>{this.disableWebcam()};await this.sfuHandler.createProducer(ae.WEBCAM,a,o)}async shareScreen(t){var e,i;const{video:r,audio:s}=t;if(r===void 0)return;let n;ee.hasFeature(re.SCREENSHARE_SIMULCAST)&&(n=pJ);const a={track:r,appData:{screenShare:!0,supportsRemoteControl:Ue.isElectron()},encodings:n,stopTracks:!1};let o=()=>{this.disableScreenShare()};X.screenShareRequested(),await this.sfuHandler.createProducer(ae.SCREENSHARE_VIDEO,a,o);const c={opusDtx:!1,opusStereo:!1,opusFec:!0,forceGoogConference:!1};if(ee.hasFeature(re.SCREENSHARE_FORCE_GOOG_CONFERENCE)&&(c.forceGoogConference=!0),s){const d={track:s,codecOptions:c,appData:{screenShare:!0,supportsRemoteControl:Ue.isElectron()},stopTracks:!1};o=()=>{},await this.sfuHandler.createProducer(ae.SCREENSHARE_AUDIO,d,o)}X.screenShareStart((i=(e=this.sfuHandler.producers.get(ae.SCREENSHARE_VIDEO))==null?void 0:e.rtpParameters.encodings[0])==null?void 0:i.ssrc)}async shareMic(t){try{if(t===void 0)throw new A("track undefined");if(this.sfuHandler.producers.has(ae.MIC)){const r=this.sfuHandler.producers.get(ae.MIC);if(!r.closed&&!navigator.isReactNative){await r.replaceTrack({track:t}),await this.resumeMic();return}await this.sfuHandler.removeProducer(ae.MIC,!1)}const e={track:t,codecOptions:{opusDtx:!1,opusStereo:!1,opusFec:!0,opusMaxAverageBitrate:16e3},stopTracks:!1},i=()=>{this.disableMic()};await this.sfuHandler.createProducer(ae.MIC,e,i)}catch(e){throw new A(e)}}pauseMic(){const t=this.sfuHandler.producers.get(ae.MIC);if(!t){S.error("pauseMic::could_not_find_mic_producer");return}t.pause(),h(this,Ae).sendMessage({type:"pauseProducer",payload:{producerId:t.id}})}async pauseWebcam(){const t=this.sfuHandler.producers.get(ae.WEBCAM);if(!t){S.error("pauseWebcam::could_not_find_webcam_producer");return}t.pause(),await h(this,Ae).sendMessage({type:"pauseProducer",payload:{producerId:t.id}})}async resumeMic(){const t=this.sfuHandler.producers.get(ae.MIC);if(!t){S.error("resumeMic::could_not_find_mic_producer");return}t.resume(),await h(this,Ae).sendMessage({type:"resumeProducer",payload:{producerId:t.id}})}async resumeWebcam(){const t=this.sfuHandler.producers.get(ae.WEBCAM);if(!t){S.error("resumeWebcam::could_not_find_webcam_producer");return}t.resume(),await h(this,Ae).sendMessage({type:"resumeProducer",payload:{producerId:t.id}})}async disableWebcam(){await this.sfuHandler.removeProducer(ae.WEBCAM)}async disableMic(){await this.sfuHandler.removeProducer(ae.MIC)}async disableScreenShare(){var t,e;S.info("screen_sharing_stopped"),X.screenShareStop((e=(t=this.sfuHandler.producers.get(ae.SCREENSHARE_VIDEO))==null?void 0:t.rtpParameters.encodings[0])==null?void 0:e.ssrc),await this.sfuHandler.removeProducer(ae.SCREENSHARE_VIDEO),await this.sfuHandler.removeProducer(ae.SCREENSHARE_AUDIO)}async resetVideoProducers(t,e){t&&(await this.sfuHandler.removeProducer(ae.WEBCAM,!1),this.shareWebcam(t)),e&&(await this.sfuHandler.removeProducer(ae.SCREENSHARE_VIDEO,!1),this.shareScreen({video:e}))}async getRoomState(){return h(this,Ae).sendMessage({type:"getRoomState"})}async changeRoomDisplayTitle(t){await h(this,Ae).sendMessage({type:"changeDisplayTitle",payload:{displayTitle:t}})}async sendMessage(t){return h(this,Ae).sendMessage(t)}async broadcastMessage(t,e){const i={payload:e,type:t};return h(this,Ae).sendMessage({type:"roomMessage",payload:i})}async sendChatMessage(t){await h(this,Ae).sendMessage({type:"chatMessage",payload:t})}async getChatMessages(){return h(this,Ae).sendMessage({type:"getChatMessages"})}async pinChatMessage(t){return h(this,Ae).sendMessage({type:"pinChatMessage",payload:t})}async unpinChatMessage(t){return h(this,Ae).sendMessage({type:"unpinChatMessage",payload:t})}async getPolls(){return h(this,Ae).sendMessage({type:"getPolls"})}async newPoll(t){await h(this,Ae).sendMessage({type:"newPoll",payload:t})}async votePoll(t){await h(this,Ae).sendMessage({type:"votePoll",payload:t})}async acceptWaitingRequest(t){await h(this,Ae).sendMessage({type:"acceptWaitingRequest",payload:{id:t}})}async rejectWaitingRequest(t){await h(this,Ae).sendMessage({type:"rejectWaitingRequest",payload:{id:t}})}async muteAll(t){await h(this,Ae).sendMessage({type:"muteAllNew",payload:{allowUnMute:t}})}async muteAllVideo(){await h(this,Ae).sendMessage({type:"muteAllVideo"})}async pinPeer(t){return h(this,Ae).sendMessage({type:"pinPeer",payload:{id:t}})}async unpinPeer(t){return h(this,Ae).sendMessage({type:"unpinPeer",payload:{id:t}})}async disableAudio(t){await h(this,Ae).sendMessage({type:"disableAudioPeerNew",payload:{id:t}})}async disableVideo(t){await h(this,Ae).sendMessage({type:"disableVideoPeer",payload:{id:t}})}async kickAll(){await h(this,Ae).sendMessage({type:"kickAll"})}async kick(t){await h(this,Ae).sendMessage({type:"kick",payload:{id:t}})}async getPage(t){return h(this,Ae).sendMessage({type:"getPage",payload:{pageNum:t}})}async muteSelf(){this.pauseMic(),await h(this,Ae).sendMessage({type:"muteSelf"})}async unmuteSelf(){await this.resumeMic(),await h(this,Ae).sendMessage({type:"unmuteSelf"})}async addRoomPlugin(t){return h(this,Ae).sendMessage({type:"addPlugin",payload:t})}async removeRoomPlugin(t){return h(this,Ae).sendMessage({type:"removePlugin",payload:t})}async remoteControlMessage(t){return h(this,Ae).sendMessage({type:"message",payload:t})}async requestRemoteControl(t){return this.remoteControlMessage({peerId:t.hostPeerId,remoteRequestId:t.id,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId,remoteRequestType:zn.REQUEST})}async acceptRemoteControl(t){return this.remoteControlMessage({peerId:t.remotePeerId,remoteRequestId:t.id,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId,remoteRequestType:zn.ACCEPT})}async terminateRemoteControl(t,e){return this.remoteControlMessage({peerId:t,remoteRequestId:e.id,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId,remoteRequestType:zn.END})}async sendEventRemoteControl(t,e,i){return this.remoteControlMessage({peerId:t,remoteRequestId:e,remoteEvent:i,hostPeerId:this.peerId,remotePeerId:t,remoteRequestType:zn.EVENT})}async assertSpotlight(t,e){return h(this,Ae).sendMessage({type:t,payload:{...e,roomMessageType:"spotlight"}})}async assertSpotlightToRoom(t){return this.assertSpotlight("roomMessage",t)}async assertSpotlightToPeer(t){return this.assertSpotlight("message",t)}async requestToJoinStage(t){await this.sendMessage({type:"requestToJoinStage",payload:t})}async withdrawRequestToJoinStage(){await this.sendMessage({type:"withdrawRequestToJoinStage"})}async acceptAllRequestToJoinStage(t){await this.sendMessage({type:"acceptAllRequestToJoinStage",payload:t.map(e=>({...e,type:IS.REQUESTED_BY_MODERATOR}))})}async removePeerFromStage(t,e){await this.sendMessage({type:"removePeerFromStage",payload:{id:t,type:e}})}stopAllProducers(){h(this,ko).stopAllProducers()}async startPresenting(){await this.sendMessage({type:"startPresenting"})}async stopPresenting(){this.stopAllProducers(),await this.sendMessage({type:"stopPresenting"})}async rejectRequestToJoinStage(t){await this.sendMessage({type:"rejectRequestToJoinStage",payload:{id:t}})}},Ae=new WeakMap,ko=new WeakMap,Sx);let Je=nw;_r([E.trace("RoomNodeClient.reconnect")],Je.prototype,"reconnect",1);_r([E.trace("RoomNodeClient.joinRoom")],Je.prototype,"joinRoom",1);_r([E.trace("RoomNodeClient.leaveRoom")],Je.prototype,"leaveRoom",1);_r([E.trace("RoomNodeClient.shareWebcam")],Je.prototype,"shareWebcam",1);_r([E.trace("RoomNodeClient.shareScreen")],Je.prototype,"shareScreen",1);_r([E.trace("RoomNodeClient.shareMic")],Je.prototype,"shareMic",1);_r([E.trace("RoomNodeClient.pauseMic")],Je.prototype,"pauseMic",1);_r([E.trace("RoomNodeClient.pauseWebcam")],Je.prototype,"pauseWebcam",1);_r([E.trace("RoomNodeClient.resumeMic")],Je.prototype,"resumeMic",1);_r([E.trace("RoomNodeClient.resumeWebcam")],Je.prototype,"resumeWebcam",1);_r([E.trace("RoomNodeClient.disableWebcam")],Je.prototype,"disableWebcam",1);_r([E.trace("RoomNodeClient.disableMic")],Je.prototype,"disableMic",1);_r([E.trace("RoomNodeClient.disableScreenShare")],Je.prototype,"disableScreenShare",1);_r([E.trace("RoomNodeClient.resetVideoProducers")],Je.prototype,"resetVideoProducers",1);let Rs;async function wie(t){if(Rs)throw new Error("Room Node Client already setup");Rs=await we.init(t)}async function QO(t){if(Rs!=null&&Rs.roomJoined)throw new Error("Room Node Client already setup");Rs&&(Rs=void 0),Rs=await Je.init(t)}function ZO(){try{Rs==null||Rs.leaveRoom()}catch{S.error("roomNodeClient::cleanupRoomNodeClient")}Rs=void 0}function si(){return Rs}function nc(t){var e,i,r,s,n,a,o,c,d,u,p,g,m;return t?{media:{audio:{enabled:t.audioEnabled,trackId:(e=t.audioTrack)==null?void 0:e.id,permission:"mediaPermissions"in t?(i=t.mediaPermissions)==null?void 0:i.audio:null},video:{enabled:t.videoEnabled,trackId:(r=t.videoTrack)==null?void 0:r.id,permission:"mediaPermissions"in t?(s=t.mediaPermissions)==null?void 0:s.video:null},screenshare:{enabled:t.screenShareEnabled,permission:"mediaPermissions"in t?(n=t.mediaPermissions)==null?void 0:n.screenshare:null,audio:{enabled:(o=(a=t.screenShareTracks)==null?void 0:a.audio)==null?void 0:o.enabled,trackId:(d=(c=t.screenShareTracks)==null?void 0:c.audio)==null?void 0:d.id},video:{enabled:(p=(u=t.screenShareTracks)==null?void 0:u.video)==null?void 0:p.enabled,trackId:(m=(g=t.screenShareTracks)==null?void 0:g.video)==null?void 0:m.id}}}}:{}}const In={setItem:(t,e)=>{try{localStorage.setItem(t,e)}catch(i){S.error("LocalStorage::setItem::crashed",{error:i,localStorage:{key:t,value:e}})}},getItem:t=>{try{return localStorage.getItem(t)}catch(e){S.error("LocalStorage::getItem::crashed",{error:e,localStorage:{key:t}})}return null}},_ie=(t=0)=>new Promise(e=>setTimeout(e,t)),Sie=(t,e,i)=>{const r=typeof i=="number"?i:250,s=t.createMediaStreamSource(e),n=t.createAnalyser();n.fftSize=2048,s.connect(n);const a=new Uint8Array(n.fftSize);let o=!1;setTimeout(()=>{o=!0},r);function c(){return o?Promise.resolve(!0):(n.getByteTimeDomainData(a),a.some(d=>d!==128&&d!==0)?Promise.resolve(!1):_ie().then(c))}return c().then(d=>(s.disconnect(),d),d=>{throw s.disconnect(),d})},Eie=typeof AudioContext<"u"?AudioContext:null;class $S{constructor(e){y(this,"_AudioContext"),y(this,"audioContext"),y(this,"_audioContextRefContainers");const i={AudioContext:Eie,...e};Object.defineProperties(this,{_AudioContext:{value:i.AudioContext},audioContext:{value:null,writable:!0},_audioContextRefContainers:{value:new Set},AudioContextProvider:{enumerable:!0,value:$S}})}getOrCreate(e){if(!this._audioContextRefContainers.has(e)&&(this._audioContextRefContainers.add(e),this._AudioContext&&!this.audioContext))try{this.audioContext=new this._AudioContext}catch{}return this.audioContext}release(e){this._audioContextRefContainers.has(e)&&(this._audioContextRefContainers.delete(e),!this._audioContextRefContainers.size&&this.audioContext&&(this.audioContext.close(),this.audioContext=null))}}const Ex=new $S,kie=3,Tie=250;function xie(t){const e={},i=Ex.getOrCreate(e);let r=kie;function s(){return r-=1,Sie(i,t.srcObject,Tie).then(n=>n?r>0?s():!0:!1).catch(()=>!0)}return s().finally(()=>{Ex.release(e)})}async function wp(t){const e=new Audio,i=new MediaStream;i.addTrack(t),e.srcObject=i;let r=!1;try{const s=e.play();s&&await s,r=await xie(e),r&&S.info("checkIfAudioTrackIsSilent::silence_detected")}catch(s){S.error("checkIfAudioTrackIsSilent::failed_to_detect_silence",{error:s})}finally{e.pause(),e.remove()}return r}async function Pie(t,e){if(!(t!=null&&t.length))return e;const i=new AudioContext,r=await Promise.all(t==null?void 0:t.map(a=>a(i))),s=i.createMediaStreamSource(new MediaStream([e])),n=i.createMediaStreamDestination();try{let a=s;for(let o=0;o<r.length;o+=1)a.connect(r[o]),a=r[o];a.connect(n)}catch(a){return S.error("getTransformedAudioTrack::middleware_execution_failed",{error:a}),e}return n.stream.getAudioTracks()[0]}var Cie=Object.defineProperty,Rie=Object.getOwnPropertyDescriptor,Aie=(t,e,i,r)=>{for(var s=r>1?void 0:r?Rie(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Cie(e,i,s),s};let aw=class extends jt{constructor(t,e){super(),y(this,"constructorName",this.constructor.name),y(this,"userSelectedDevice"),y(this,"mediaInterface"),y(this,"_mediaTrack"),y(this,"transformedMediaTrack"),y(this,"middlewares",[]),y(this,"currentDevice"),this.mediaInterface=t,e&&this.setMediaTrack(e),this.userSelectedDevice=void 0,this.onTrackEnded=this.onTrackEnded.bind(this),this.onTrackMuted=this.onTrackMuted.bind(this)}disableTrack(){var t,e;this.removeMediaTrackListeners(),(t=this._mediaTrack)==null||t.stop(),this._mediaTrack=void 0,(e=this.transformedMediaTrack)==null||e.stop(),this.transformedMediaTrack=void 0}get mediaTrack(){return this._mediaTrack}async setMediaTrack(t){const e=i=>{S.error(`${this.constructorName}.setMediaTrack.error`,{error:i})};try{this.disableTrack()}catch(i){e(i)}this._mediaTrack=t,await this.setTransformedTrack();try{this.addMediaTrackListeners(),await this.setCurrentDevice()}catch(i){e(i)}}get trackEnabled(){return!!this.mediaTrack&&this.mediaTrack.readyState==="live"&&this.mediaTrack.enabled}muteTrack(){if(!this.mediaTrack){S.warn("BaseMediaHandler.muteTrack Tried muting with no track present");return}this.transformedMediaTrack&&(this.transformedMediaTrack.enabled=!1),this.mediaTrack.enabled=!1}async unmuteTrack(){try{this.mediaTrack?this.mediaTrack.enabled=!0:await this.enableTrack(!1)}catch(t){throw S.error(`${this.constructorName}.unmuteTrack.error`,{error:t}),this.disableTrack(),new A("Failed to unmute track")}}async setCurrentDevice(){var t;if(!this.mediaTrack){this.currentDevice=void 0;return}((t=this.currentDevice)==null?void 0:t.deviceId)!==this.mediaTrack.getSettings().deviceId&&(this.currentDevice=await this.mediaInterface.getDevice(this.mediaTrack.getSettings().deviceId))}async addMiddleware(t){if(Ue.isSafari())return{success:!1,message:"Middlewares are not yet supported in Safari."};if(this.middlewares.includes(t))return{success:!1,message:"This middleware has been applied, already. Skipping."};try{return this.trackEnabled&&await this.setTransformedTrack(),this.middlewares.push(t),{success:!0,message:"Successfully added the middleware."}}catch(e){return S.error("While adding middleware",{error:e}),{success:!1,message:e==null?void 0:e.message}}}async removeMiddleware(t){const e=this.middlewares.indexOf(t,0);if(e>-1)try{return await this.setTransformedTrack(),this.middlewares.splice(e,1),{success:!0,message:"Successfully removed the middleware."}}catch(i){return S.error("While removing middleware",{error:i}),{success:!1,message:i==null?void 0:i.message}}return{success:!1,message:"No such middleware was found. Skipping."}}addMediaTrackListeners(){var t,e,i;this.mediaTrack&&(S.info(`${this.constructorName}.addMediaTrackListeners for deviceId ${(e=(t=this.mediaTrack)==null?void 0:t.getSettings())==null?void 0:e.deviceId} of type ${(i=this.mediaTrack)==null?void 0:i.kind}`),this.mediaTrack.addEventListener("ended",this.onTrackEnded),this.mediaTrack.addEventListener("mute",this.onTrackMuted))}removeMediaTrackListeners(){var t,e,i;this.mediaTrack&&(S.info(`${this.constructorName}.removeMediaTrackListeners for deviceId ${(e=(t=this.mediaTrack)==null?void 0:t.getSettings())==null?void 0:e.deviceId} of type ${(i=this.mediaTrack)==null?void 0:i.kind}`),S.info(`${this.constructorName}.removeMediaTrackListeners`),this.mediaTrack.removeEventListener("ended",this.onTrackEnded),this.mediaTrack.removeEventListener("mute",this.onTrackMuted))}};aw=Aie([qi(t=>{throw new A(t.message,"1600")})],aw);const XO=aw;var Iie=Object.defineProperty,Oie=Object.getOwnPropertyDescriptor,zS=(t,e,i,r)=>{for(var s=r>1?void 0:r?Oie(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Iie(e,i,s),s};const q0="[Dyte]nonSilentDeviceLabels";class Xv extends XO{async setDevice(e){if(!e)throw S.warn("AudioMediaHandler.setDevice No device received"),new A("No device received!","1603");if(e.kind!=="audioinput")throw S.warn("AudioMediaHandler.setDevice Received non audio device"),new A("Non audio device received while setting device!","1603");try{const i=this.trackEnabled;this.userSelectedDevice=e.deviceId,await this.setMediaTrack(await this.mediaInterface.getAudioTrack(!i,e.deviceId))}catch(i){throw S.error("AudioMediaHandler.setDevice.error",{error:i}),this.disableTrack(),new A(i.message,"1604")}}async enableTrack(e){if(this.trackEnabled){S.warn("AudioMediaHandler.enableTrack Track already enabled!");return}const i=await this.mediaInterface.getAudioTrack(e,this.userSelectedDevice);await this.setMediaTrack(i),await this.conditionallyChangeTrack()}async setTransformedTrack(){var e;if(!((e=this.middlewares)!=null&&e.length)){this.transformedMediaTrack=this.mediaTrack;return}try{this.transformedMediaTrack=await Pie(this.middlewares,this.mediaTrack),this.emit("trackChanged")}catch(i){S.error("AudioMediaHandler.setTransformedTrack",{error:i}),this.transformedMediaTrack=this.mediaTrack}}async onTrackEnded(){S.info("AudioMediaHandler.TrackEnded"),this.emit("trackEnded");const e=this.mediaTrack.enabled;this.disableTrack(),await this.enableTrack(!e),await this.setTransformedTrack(),this.emit("trackChanged")}onTrackMuted(){S.info("AudioMediaHandler.TrackMuted"),this.emit("trackMuted")}async conditionallyChangeTrack(){var e;if(!this.mediaTrack)return;const i=JSON.parse(In.getItem(q0));if(i!=null&&i.devices.some(s=>s.label===this.mediaTrack.label))return;if(!await wp(this.mediaTrack)){const s=(e=i==null?void 0:i.devices.concat({label:this.mediaTrack.label}))!=null?e:[{label:this.mediaTrack.label}];In.setItem(q0,JSON.stringify({devices:s}));return}S.info("AudioMediaHandler.conditionallyChangeTrack.DetectedSilentTrack");const r=this.mediaTrack.getSettings().deviceId;(await this.mediaInterface.getAudioInputDevices()).filter(s=>s.deviceId!==r).some(async s=>{if(await this.setDevice(s),!await wp(this.mediaTrack)){const n=i.devices.concat({label:this.mediaTrack.label});return In.setItem(q0,JSON.stringify({devices:n})),S.info("AudioMediaHandler.conditionallyChangeTrack.SuccesfullyChangedTrack"),!0}return S.info("AudioMediaHandler.conditionallyChangeTrack.AnotherSilentTrackFound"),!1})}}zS([E.trace("AudioMediaHandler.setTransformedTrack")],Xv.prototype,"setTransformedTrack",1);zS([E.trace("AudioMediaHandler.onTrackEnded")],Xv.prototype,"onTrackEnded",1);zS([E.trace("AudioMediaHandler.conditionallyChangeTrack")],Xv.prototype,"conditionallyChangeTrack",1);class wc extends Error{constructor(e,i,r){super(i),y(this,"constraints"),y(this,"name"),this.name=e,this.constraints=r}}function ey(t,e,i){if(Ue.isChromiumBased()){if(e==="NotAllowedError")return i.indexOf("by system")>0?"SYSTEM_DENIED":t==="screenshare"?"CANCELED":"DENIED";if(e==="NotReadableError")return"COULD_NOT_START"}else if(Ue.isSafari()){if(e==="NotAllowedError")return"DENIED"}else if(Ue.isFirefox()){if(e==="NotFoundError"||e==="NotReadableError")return"SYSTEM_DENIED";if(e==="NotAllowedError")return"DENIED";if(e==="AbortError")return"COULD_NOT_START"}return"COULD_NOT_START"}function J0(t){return t===2 .toString()?Ga.DENIED:t===4 .toString()?Ga.SYS_DENIED:t===1 .toString()?Ga.ACCEPTED:Ga.FAILED}class Mie{constructor(){y(this,"permissions"),this.permissions={audio:"NOT_REQUESTED",video:"NOT_REQUESTED",screenshare:"NOT_REQUESTED"}}async getAudioInputDevices(){return(await this.getAvailableDevices()).filter(e=>e.kind==="audioinput")}async getVideoInputDevices(){return(await this.getAvailableDevices()).filter(e=>e.kind==="videoinput")}async getAudioOutputDevices(){return(await this.getAvailableDevices()).filter(e=>e.kind==="audiooutput")}}var Die=Object.defineProperty,Lie=Object.getOwnPropertyDescriptor,eM=(t,e,i,r)=>{for(var s=r>1?void 0:r?Lie(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Die(e,i,s),s},pa,kx;let Uf=(kx=class extends Mie{constructor(t){super(),R(this,pa,void 0),I(this,pa,new bO(t))}handlePermissionErrors(t,e){const i=ey(t,e.name,e.message);this.permissions[t]=i,x.emit(T.MEDIA_PERMISSION_ERROR,{message:i,constraints:e.constraints,kind:t})}async getAudioAndVideoTrack(){const t={audio:h(this,pa).getAudioConstraints().audio,video:h(this,pa).getVideoConstraints().video};try{const e=await navigator.mediaDevices.getUserMedia(t),i=e.getAudioTracks()[0];let r=e.getVideoTracks()[0];if(this.permissions.audio="ACCEPTED",this.permissions.video="ACCEPTED",ee.hasFeature(re.OBS_QUALITY)&&r.label.includes("OBS Virtual")){const s=(await this.getVideoInputDevices()).find(n=>n.label.includes("OBS Virtual"));r=await this.getVideoTrack(s.deviceId)}return x.emit(T.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),x.emit(T.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),{audioTrack:i,videoTrack:r}}catch(e){if(e.name==="NotAllowedError"){const i=await this.getAudioTrack(!1),r=await this.getVideoTrack();return{audioTrack:i,videoTrack:r}}throw S.error("WebMediaInterface.getAudioAndVideoTrack",{error:e}),new A("Couldnt fetch audio and video track")}}async getAudioTrack(t,e){const i=h(this,pa).getAudioConstraints(e);try{const r=(await navigator.mediaDevices.getUserMedia(i)).getAudioTracks()[0];return r.enabled=!t,this.permissions.audio="ACCEPTED",x.emit(T.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),r}catch(r){throw this.handlePermissionErrors("audio",new wc(r.name,r.message,i)),new A(r.message,"1601")}}async getScreenShareTracks(){const t=h(this,pa).getScreenShareConstraints();try{const e=await navigator.mediaDevices.getDisplayMedia(t);return this.permissions.screenshare="ACCEPTED",x.emit(T.MEDIA_PERMISSION_UPDATE,{message:this.permissions.screenshare,kind:"screenshare"}),{audioTrack:e.getAudioTracks()[0],videoTrack:e.getVideoTracks()[0]}}catch(e){throw this.handlePermissionErrors("screenshare",new wc(e.name,e.message,t)),S.error("WebMediaInterface.getScreenShareTracks Error while fetching screenshare tracks",{error:e}),new A("Couldnt fetch screen share tracks")}}async getCurrentDeviceLabel(t){const e=await this.getDevice(t||"default");return e==null?void 0:e.label}async getVideoTrack(t){const e=ee.hasFeature(re.OBS_QUALITY),i=await this.getCurrentDeviceLabel(t),r=i&&i.includes("OBS Virtual"),{video:s}=h(this,pa).getVideoConstraints(t);let n={};e&&r&&typeof s!="boolean"?n={deviceId:s.deviceId}:n=s;try{const a=(await navigator.mediaDevices.getUserMedia({video:n})).getVideoTracks()[0];if(e&&r&&typeof s!="boolean"&&typeof s.width=="object"){const{width:o,height:c}=a.getSettings(),{ideal:d}=s.width;a.applyConstraints({width:{ideal:d},height:{ideal:Math.floor(c*d/o)},frameRate:s.frameRate})}return this.permissions.video="ACCEPTED",x.emit(T.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),a}catch(a){throw this.handlePermissionErrors("video",new wc(a.name,a.message,n)),S.error("WebMediaInterface.getVideoTrack Error while fetching video track",{error:a}),new A("Couldnt fetch video track")}}async getAvailableDevices(){try{return navigator.mediaDevices.enumerateDevices()}catch(t){throw S.error("enumerate_devices_failed",{error:t}),new A("Failed to get available devices")}}async getAvailableDevicesByKind(t){try{return(await navigator.mediaDevices.enumerateDevices()).filter(({kind:e})=>t===e)}catch(e){throw S.error("enumerate_devices_failed",{error:e}),new A("Failed to get available devices by kind")}}async getDevice(t){try{return(await navigator.mediaDevices.enumerateDevices()).filter(e=>e.deviceId===t)[0]}catch(e){throw S.error("enumerate_devices_failed",{error:e}),new A("Failed to get device")}}},pa=new WeakMap,kx);eM([E.trace("WebMediaInterface.getVideoTrack")],Uf.prototype,"getVideoTrack",1);Uf=eM([qi(t=>{throw new A(t.message,"1600")})],Uf);const tM=Uf;var Ju;class Nie{constructor(e){R(this,Ju,void 0),y(this,"currentDevice"),I(this,Ju,e)}async setupSpeaker(e){var i;if(!(h(this,Ju)instanceof tM))return;let r=e;if(e||([r]=await h(this,Ju).getAvailableDevicesByKind("audiooutput")),!r)throw new A("No speaker found");((i=this.currentDevice)==null?void 0:i.deviceId)!==r.deviceId&&(this.currentDevice!=null||(this.currentDevice=r),document.querySelectorAll("audio").forEach(async s=>{if(typeof s.sinkId<"u"&&this.currentDevice.deviceId&&s.sinkId!==this.currentDevice.deviceId)try{await s.setSinkId(this.currentDevice.deviceId)}catch{}}))}}Ju=new WeakMap;class Uie extends jt{constructor(e){super(),y(this,"mediaInterface"),y(this,"audioMediaTrack"),y(this,"videoMediaTrack"),this.mediaInterface=e}get trackEnabled(){return!!this.videoMediaTrack}async enableScreenShare(){var e,i;const{audioTrack:r,videoTrack:s}=await this.mediaInterface.getScreenShareTracks();this.audioMediaTrack=r,this.videoMediaTrack=s,this.addMediaTrackListeners(),((i=(e=this.mediaInterface)==null?void 0:e.permissions)==null?void 0:i.screenshare)!=="ACCEPTED"&&this.mediaInterface.permissions&&(this.mediaInterface.permissions.screenshare="ACCEPTED",x.emit(T.MEDIA_PERMISSION_UPDATE,{message:this.mediaInterface.permissions.screenshare,kind:"screenshare"}))}disableScreenShare(){var e,i;this.removeMediaTrackListeners(),(e=this.audioMediaTrack)==null||e.stop(),(i=this.videoMediaTrack)==null||i.stop(),this.videoMediaTrack=void 0,this.audioMediaTrack=void 0}addMediaTrackListeners(){var e;(e=this.videoMediaTrack)==null||e.addEventListener("ended",this.onTrackEnded.bind(this))}removeMediaTrackListeners(){var e;(e=this.videoMediaTrack)==null||e.removeEventListener("ended",this.onTrackEnded)}onTrackEnded(){this.emit("trackEnded")}}var wd;class jie{constructor(){R(this,wd,void 0)}terminateMiddlewareWebWorker(){if(h(this,wd))try{mI(h(this,wd)),I(this,wd,void 0)}catch{S.debug("WorkerTimers::terminateMiddlewareWebWorker::failed")}}async getTransformedVideoTrack(e,i){if(!(e!=null&&e.length))return i;const r=await Promise.all(e==null?void 0:e.map(d=>d())),s=new MediaStream;s.addTrack(i);const n=document.createElement("canvas"),a=n.getContext("2d"),o=document.createElement("video");o.srcObject=s,o.autoplay=!0,this.terminateMiddlewareWebWorker();const c=async()=>{if(i.enabled===!1||i.readyState==="ended"){this.terminateMiddlewareWebWorker(),o.remove(),n.remove();return}try{a.drawImage(o,0,0);for(let d=0;d<r.length;d+=1)await r[d](n,a)}catch(d){S.error("getTransformedVideoTrack::middleware_execution_failed",{error:d})}};try{o.play()}catch{}return o.addEventListener("play",()=>{n.width=o.width||i.getSettings().width,n.height=o.width||i.getSettings().height,I(this,wd,fI(c,50))},!1),n.captureStream().getVideoTracks()[0]}}wd=new WeakMap;var $ie=Object.defineProperty,zie=Object.getOwnPropertyDescriptor,iM=(t,e,i,r)=>{for(var s=r>1?void 0:r?zie(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&$ie(e,i,s),s},Ku;class FS extends XO{constructor(e,i){super(e,i),R(this,Ku,void 0),I(this,Ku,new jie)}async setDevice(e){if(!e)throw S.warn("VideoMediaHandler.setDevice No device received"),new A("No device received!");if(e.kind!=="videoinput")throw S.warn("VideoMediaHandler.setDevice Received non video device",{devices:[e]}),new A("Non video device received while setting video device!");if(this.userSelectedDevice=e.deviceId,!(this.mediaTrack&&this.mediaTrack.enabled)){S.warn("VideoMediaHandler.setDevice Tried switching device with video disabled",{devices:[e]}),this.currentDevice=e;return}try{await this.setMediaTrack(await this.mediaInterface.getVideoTrack(this.userSelectedDevice))}catch(i){throw S.error("VideoMediaHandler.setDevice.error",{error:i}),this.disableTrack(),new A("Failed to change device")}}async enableTrack(){if(this.trackEnabled){S.warn("VideoMediaHandler.enableTrack Track already enabled!");return}await this.setMediaTrack(await this.mediaInterface.getVideoTrack(this.userSelectedDevice))}async setTransformedTrack(){var e;if(!((e=this.middlewares)!=null&&e.length)){this.transformedMediaTrack=this.mediaTrack;return}try{this.transformedMediaTrack=await h(this,Ku).getTransformedVideoTrack(this.middlewares,this.mediaTrack),this.emit("trackChanged")}catch(i){S.error("VideoMediaHandler.setTransformedTrack",{error:i}),this.transformedMediaTrack=this.mediaTrack}}terminateMiddlewareWebWorker(){h(this,Ku).terminateMiddlewareWebWorker()}async onTrackEnded(){S.info("VideoMediaHandler.TrackEnded"),this.disableTrack(),this.emit("trackEnded")}onTrackMuted(){S.info("VideoMediaHandler.TrackMuted"),this.emit("trackMuted")}}Ku=new WeakMap;iM([E.trace("VideoMediaHandler.setTransformedTrack")],FS.prototype,"setTransformedTrack",1);iM([E.trace("VideoMediaHandler.onTrackEnded")],FS.prototype,"onTrackEnded",1);var Fie=Object.defineProperty,Vie=Object.getOwnPropertyDescriptor,vn=(t,e,i,r)=>{for(var s=r>1?void 0:r?Vie(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Fie(e,i,s),s},Vi,Ai,Ii,Fo,qs;class js extends jt{constructor(e){super(),R(this,Vi,void 0),R(this,Ai,void 0),R(this,Ii,void 0),R(this,Fo,void 0),R(this,qs,void 0),I(this,Vi,new tM(e)),I(this,Ai,new Xv(h(this,Vi))),I(this,Ii,new FS(h(this,Vi))),I(this,qs,new Uie(h(this,Vi))),I(this,Fo,new Nie(h(this,Vi))),h(this,Ai).on("trackMuted",this.onAudioTrackMuted.bind(this)),h(this,Ai).on("trackChanged",this.onAudioTrackChanged.bind(this)),h(this,Ii).on("trackChanged",this.onVideoTrackChanged.bind(this)),h(this,Ii).on("trackEnded",this.onVideoTrackEnded.bind(this)),h(this,qs).on("trackEnded",this.onScreenShareEnded.bind(this))}async repopulateAvailableDevices(){return!0}async setupStreams({audio:e,video:i}){let r,s;if(e&&i)try{const n=await h(this,Vi).getAudioAndVideoTrack();r=n.audioTrack,s=n.videoTrack}catch(n){S.error("LocalMediaHandler::init::Failed to get audio video tracks",{error:n})}if(!r&&e)try{r=await h(this,Vi).getAudioTrack(!1)}catch(n){S.error("LocalMediaHandler::init::Failed to get audio track",{error:n})}if(!s&&i)try{s=await h(this,Vi).getVideoTrack()}catch(n){S.error("LocalMediaHandler::init::Failed to get video track",{error:n})}await h(this,Ai).setMediaTrack(r),await h(this,Ai).conditionallyChangeTrack(),await h(this,Ii).setMediaTrack(s);try{await h(this,Fo).setupSpeaker()}catch{}}getCurrentDevices(){return{audio:h(this,Ai).currentDevice,video:h(this,Ii).currentDevice,speaker:h(this,Fo).currentDevice}}get permissions(){return h(this,Vi).permissions}getAllDevices(){return h(this,Vi).getAvailableDevices()}getDeviceById(e,i){return h(this,Vi).getDevice(e)}onAudioTrackMuted(){this.emit("AUDIO_TRACK_SILENT")}onAudioTrackChanged(){this.emit("AUDIO_TRACK_CHANGE")}get rawAudioTrack(){return h(this,Ai).mediaTrack}get audioTrack(){return h(this,Ai).transformedMediaTrack}get audioEnabled(){return h(this,Ai).trackEnabled}async enableAudio(){await h(this,Ai).unmuteTrack()}disableAudio(){h(this,Ai).muteTrack()}getAudioDevices(){return h(this,Vi).getAudioInputDevices()}async setAudioDevice(e){await h(this,Ai).setDevice(e),this.emit("AUDIO_TRACK_CHANGE")}setupSpeaker(){return h(this,Fo).setupSpeaker()}setSpeakerDevice(e){return h(this,Fo).setupSpeaker(e)}onVideoTrackChanged(){this.emit("VIDEO_TRACK_CHANGE")}onVideoTrackEnded(){this.emit("VIDEO_TRACK_CHANGE")}get rawVideoTrack(){return h(this,Ii).mediaTrack}get videoTrack(){return h(this,Ii).transformedMediaTrack}get videoEnabled(){return h(this,Ii).trackEnabled}async enableVideo(){await h(this,Ii).unmuteTrack()}disableVideo(){h(this,Ii).disableTrack()}getVideoDevices(){return h(this,Vi).getVideoInputDevices()}async setVideoDevice(e){await h(this,Ii).setDevice(e),this.emit("VIDEO_TRACK_CHANGE")}onScreenShareEnded(){this.emit("SCREENSHARE_ENDED")}get screenShareTracks(){return{audio:h(this,qs).audioMediaTrack,video:h(this,qs).videoMediaTrack}}get screenShareEnabled(){return h(this,qs).trackEnabled}async enableScreenShare(){await h(this,qs).enableScreenShare()}async disableScreenShare(){h(this,qs).disableScreenShare()}getSpeakerDevices(){return h(this,Vi).getAudioOutputDevices()}addAudioMiddleware(e){return h(this,Ai).addMiddleware(e)}removeAudioMiddleware(e){return h(this,Ai).removeMiddleware(e)}addVideoMiddleware(e){return h(this,Ii).addMiddleware(e)}removeVideoMiddleware(e){return h(this,Ii).removeMiddleware(e)}destruct(){h(this,Ai).disableTrack(),h(this,Ii).disableTrack(),h(this,Ii).terminateMiddlewareWebWorker(),h(this,qs).disableScreenShare()}removeAllTracks(){this.destruct()}async removeDocumentEventListeners(){}}Vi=new WeakMap,Ai=new WeakMap,Ii=new WeakMap,Fo=new WeakMap,qs=new WeakMap;vn([E.trace("MediaHandler.setupStreams")],js.prototype,"setupStreams",1);vn([E.trace("MediaHandler.enableAudio")],js.prototype,"enableAudio",1);vn([E.trace("MediaHandler.disableAudio")],js.prototype,"disableAudio",1);vn([E.trace("MediaHandler.setAudioDevice")],js.prototype,"setAudioDevice",1);vn([E.trace("MediaHandler.enableVideo")],js.prototype,"enableVideo",1);vn([E.trace("MediaHandler.disableVideo")],js.prototype,"disableVideo",1);vn([E.trace("MediaHandler.setVideoDevice")],js.prototype,"setVideoDevice",1);vn([E.trace("MediaHandler.enableScreenShare")],js.prototype,"enableScreenShare",1);vn([E.trace("MediaHandler.disableScreenShare")],js.prototype,"disableScreenShare",1);vn([E.trace("MediaHandler.destruct")],js.prototype,"destruct",1);class Bie extends Error{constructor(e,i){super(e),y(this,"code"),this.code=i}}var Hie=Object.defineProperty,Gie=Object.getOwnPropertyDescriptor,na=(t,e,i,r)=>{for(var s=r>1?void 0:r?Gie(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Hie(e,i,s),s};const K0={port:void 0},Wie=["virtual","emulator","krisp","solstice conference","teams","manycam","blackHole"];function Vo(t){const e=t.label.toLowerCase();return Ue._bowser.getOSName()==="macOS"&&e.includes("iphone")?(S.log("isVirtualDevice::ignore_macos_continuity"),!0):Wie.some(i=>e.includes(i))}var ha,fu,Tx;const ka=(Tx=class{constructor(t){R(this,ha,void 0),R(this,fu,void 0),I(this,ha,t),I(this,fu,new AbortController)}static async init(){let t=[];return ka.isDeviceListAvailable()?(t=await ka.enumerateDevices(),S.info("initial_full_device_list",{devices:JSON.stringify(t)})):S.error("UnsupportedMediaAPI::navigator.mediaDevices.enumerateDevices",{debuggingHint:"Try checking meetingMetadata.visitedUrl. It should be running on localhost/127.0.0.1 or HTTPS, if not, there would be issues."}),new ka(t)}async destruct(){var t;(t=h(this,fu))==null||t.abort()}static isDeviceListAvailable(){return!!(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)}static enumerateDevices(){try{return navigator.mediaDevices.enumerateDevices()}catch(t){return S.error("enumerate_devices_failed",{error:t}),Promise.resolve([])}}static getAudioConstraints(t){const e={},{disableAP:i=!1,disableAEC:r=!1,disableNS:s=!1,disableAGC:n=!1,disableHPF:a=!1}=t.audioOptions||{};if(Ue.isFirefox()||Ue.isWebKitBased())e.audio={deviceId:t.audioDeviceId,autoGainControl:!n&&!i,echoCancellation:!r&&!i,noiseSuppression:!s&&!i};else{if(typeof e.audio=="boolean")return e;e.audio={},e.audio.optional=[t.audioDeviceId?{sourceId:t.audioDeviceId}:{sourceId:"default"},{echoCancellation:!r&&!i},{googEchoCancellation:!r&&!i},{googAutoGainControl:!n&&!i},{googNoiseSuppression:!s&&!i},{googHighpassFilter:!a&&!i},{googNoiseSuppression2:!s&&!i},{googEchoCancellation2:!r&&!i},{googAutoGainControl2:!n&&!i}]}return e}static getVideoConstraints(t){const e={},{videoDeviceId:i,videoTrackConstraints:r,facingMode:s="user",frameRate:n={ideal:24,max:30}}=t;return e.video=r||vO.vga,typeof e.video=="boolean"||(i&&(e.video.deviceId={exact:i}),e.video.facingMode=s,e.video.frameRate=n),e}static async getUserMediaWithTimeout(t={},e=0){try{if(S.info("getUserMediaWithTimeout::requesting_user_media",{timeout:e,constraints:JSON.stringify(t)}),!e){const r=await navigator.mediaDevices.getUserMedia(t);return S.info("getUserMediaWithTimeout::received_user_media",{timeout:e,constraints:JSON.stringify(t)}),r}const i=await Promise.race([navigator.mediaDevices.getUserMedia(t),new Promise((r,s)=>{setTimeout(()=>s(new Bie("Get user media timed out","ERR_GUM_TIMEOUT")),e)})]);return S.info("getUserMediaWithTimeout::received_user_media",{timeout:e,constraints:JSON.stringify(t)}),i}catch(i){throw S.error("getUserMediaWithTimeout::failed_to_access_local_media",{error:i,constraints:JSON.stringify(t)}),S.error("Failed to get access to local media.",{error:i,constraints:JSON.stringify(t)}),new wc(i.name,i.message,t)}}static async getAudioTrack(t){return(await ka.getUserMediaWithTimeout(t)).getAudioTracks()[0]}static async getVideoTrack(t){return(await ka.getUserMediaWithTimeout(t)).getVideoTracks()[0]}static async getScreenShareTracks(t){var e,i;let r=ee.hasFeature(re.EXTENSION_HACK),s=null;if(r)try{K0.port=window.chrome.runtime.connect("nkeimhogjdpnpccoofpliimaahmaaome",{name:"chooseDesktopMedia"})}catch{E.addLogInCurrentSpan("error","Extension connect error"),r=!1}r&&(s=await new Promise(a=>{const o=setTimeout(()=>a(void 0),12e3);K0.port.onMessage.addListener(async c=>{if(c.value.streamId){const{streamId:d}=c.value;clearTimeout(o),a(d)}}),K0.port.postMessage({method:"chooseDesktopMedia",sources:["screen"]})}));let n;return s?(E.addLogInCurrentSpan("error","Acquiring extension screenshare track"),n=await navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{maxWidth:1920,maxHeight:1080,chromeMediaSource:"desktop",chromeMediaSourceId:s},optional:[{maxFrameRate:parseInt((e=ee.getValue(re.VAL_MAX_FRAMERATE_EXT))!=null?e:"12",10)},{minFrameRate:parseInt((i=ee.getValue(re.VAL_MIN_FRAMERATE_EXT))!=null?i:"8",10)}]}}),E.addLogInCurrentSpan("error","Acquired extension screenshare track")):n=await navigator.mediaDevices.getDisplayMedia(t),{video:n.getVideoTracks()[0],audio:n.getAudioTracks()[0]}}static async getAudioAndVideoTrack(t){const e=await ka.getUserMediaWithTimeout(t),i=e.getAudioTracks()[0],r=e.getVideoTracks()[0];return{audioTrack:i,videoTrack:r}}onDeviceChange(t){Ue.supportsDeviceChangeEvent()&&navigator.mediaDevices.addEventListener("devicechange",kK(async e=>{const i=this.availableDevices,r=new Set(i.map(o=>o.deviceId));await this.repopulateAvailableDevices();const s=this.availableDevices,n=new Set(s.map(o=>o.deviceId)),a={added:s.filter(o=>!r.has(o.deviceId)),removed:i.filter(o=>!n.has(o.deviceId))};this.repopulateAvailableDevices().then(()=>t(e,a))},100),{signal:h(this,fu).signal})}async repopulateAvailableDevices(){const t=await ka.enumerateDevices();!xO(zK(t,h(this,ha),MK))&&(I(this,ha,t),X.devices("AUDIO",this.getAudioDevices()),X.devices("VIDEO",this.getVideoDevices()),X.devices("SPEAKER",this.getSpeakerDevices()),S.info("repopulated_full_device_list",{devices:JSON.stringify(t)}))}get availableDevices(){return h(this,ha)}getAvailableDevicesByKind(t){return h(this,ha).filter(e=>e.kind===t)}getDeviceById(t,e){return h(this,ha).find(i=>i.deviceId===t&&i.kind===e)}getAudioDevices(){return this.getAvailableDevicesByKind("audioinput").sort((t,e)=>{const i=Vo(t)?0:1;return(Vo(e)?0:1)-i})}getVideoDevices(){return this.getAvailableDevicesByKind("videoinput").sort((t,e)=>{const i=Vo(t)?0:1;return(Vo(e)?0:1)-i})}getSpeakerDevices(){return this.getAvailableDevicesByKind("audiooutput").sort((t,e)=>{const i=Vo(t)?0:1;return(Vo(e)?0:1)-i})}},ha=new WeakMap,fu=new WeakMap,Tx);let Ct=ka;na([E.trace("LocalMediaUtils.onDeviceChange")],Ct.prototype,"onDeviceChange",1);na([E.trace("LocalMediaUtils.repopulateAvailableDevices")],Ct.prototype,"repopulateAvailableDevices",1);na([E.trace("LocalMediaUtils.isDeviceListAvailable")],Ct,"isDeviceListAvailable",1);na([E.trace("LocalMediaUtils.enumerateDevices")],Ct,"enumerateDevices",1);na([E.trace("LocalMediaUtils.getUserMediaWithTimeout")],Ct,"getUserMediaWithTimeout",1);na([E.trace("LocalMediaUtils.getAudioTrack")],Ct,"getAudioTrack",1);na([E.trace("LocalMediaUtils.getVideoTrack")],Ct,"getVideoTrack",1);na([E.trace("LocalMediaUtils.getScreenShareTracks")],Ct,"getScreenShareTracks",1);na([E.trace("LocalMediaUtils.getAudioAndVideoTrack")],Ct,"getAudioAndVideoTrack",1);var qie=Object.defineProperty,Jie=Object.getOwnPropertyDescriptor,Hl=(t,e,i,r)=>{for(var s=r>1?void 0:r?Jie(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&qie(e,i,s),s},Qt,_d;class Hc{constructor(e){R(this,Qt,void 0),y(this,"audioMiddlewares",[]),y(this,"videoMiddlewares",[]),R(this,_d,void 0),I(this,Qt,e)}terminateMiddlewareWebWorker(){if(h(this,_d))try{mI(h(this,_d)),I(this,_d,void 0)}catch{S.debug("WorkerTimers::terminateMiddlewareWebWorker::failed")}}async getTransformedVideoTrack(e){var i,r;if(!((i=this.videoMiddlewares)!=null&&i.length))return e;const s=await Promise.all((r=this.videoMiddlewares)==null?void 0:r.map(u=>u())),n=new MediaStream;n.addTrack(e);const a=document.createElement("canvas"),o=a.getContext("2d"),c=document.createElement("video");c.srcObject=n,c.autoplay=!0,this.terminateMiddlewareWebWorker();const d=async()=>{if(!h(this,Qt).videoEnabled||e.readyState==="ended"){this.terminateMiddlewareWebWorker(),c.remove(),a.remove();return}try{o.drawImage(c,0,0);for(let u=0;u<s.length;u+=1)await s[u](a,o)}catch(u){S.error("getTransformedVideoTrack::middleware_execution_failed",{error:u})}};try{c.play()}catch{}return c.addEventListener("play",()=>{a.width=c.width||e.getSettings().width,a.height=c.width||e.getSettings().height,I(this,_d,fI(d,50))},!1),a.captureStream().getVideoTracks()[0]}async addVideoMiddleware(e){return Ue.isSafari()?{success:!1,message:"Video middlewares are not yet supported in Safari."}:this.videoMiddlewares.includes(e)?{success:!0,message:"This video middleware has been applied, already. Skipping."}:(this.videoMiddlewares.push(e),h(this,Qt).videoEnabled?(h(this,Qt).setVideoTrack(await this.getTransformedVideoTrack(h(this,Qt).rawVideoTrack)),h(this,Qt).emit("VIDEO_TRACK_CHANGE"),{success:!0,message:"Successfully applied the video middleware."}):{success:!0,message:"Successfully added the video middleware. It will be applied automatically once webcam is turned on."})}async removeVideoMiddleware(e){const i=this.videoMiddlewares.indexOf(e,0);return i>-1?(this.videoMiddlewares.splice(i,1),h(this,Qt).videoEnabled&&(h(this,Qt).setVideoTrack(await this.getTransformedVideoTrack(h(this,Qt).rawVideoTrack)),h(this,Qt).emit("VIDEO_TRACK_CHANGE")),{success:!0,message:"Successfully removed the video middleware."}):{success:!0,message:"No such video middleware was found. Skipping."}}async getTransformedAudioTrack(e){var i,r;if(!((i=this.audioMiddlewares)!=null&&i.length))return e;const s=new AudioContext,n=await Promise.all((r=this.audioMiddlewares)==null?void 0:r.map(c=>c(s))),a=s.createMediaStreamSource(new MediaStream([e])),o=s.createMediaStreamDestination();try{let c=a;for(let d=0;d<n.length;d+=1)c.connect(n[d]),c=n[d];c.connect(o)}catch(c){return S.error("getTransformedAudioTrack::middleware_execution_failed",{error:c}),e}return o.stream.getAudioTracks()[0]}async addAudioMiddleware(e){return Ue.isSafari()?{success:!1,message:"Audio middlewares are not yet supported in Safari."}:this.audioMiddlewares.includes(e)?{success:!0,message:"This audio middleware has been applied, already. Skipping."}:(this.audioMiddlewares.push(e),h(this,Qt).audioEnabled?(h(this,Qt).setAudioTrack(await this.getTransformedAudioTrack(h(this,Qt).rawAudioTrack)),h(this,Qt).emit("AUDIO_TRACK_CHANGE"),{success:!0,message:"Successfully applied the audio middleware."}):{success:!0,message:"Successfully added the audio middleware. It will be applied automatically once mic is turned on."})}async removeAudioMiddleware(e){const i=this.audioMiddlewares.indexOf(e,0);return i>-1?(this.audioMiddlewares.splice(i,1),h(this,Qt).audioEnabled&&(h(this,Qt).setAudioTrack(await this.getTransformedAudioTrack(h(this,Qt).rawAudioTrack)),h(this,Qt).emit("AUDIO_TRACK_CHANGE")),{success:!0,message:"Successfully removed the audio middleware."}):{success:!0,message:"No such audio middleware was found. Skipping."}}}Qt=new WeakMap,_d=new WeakMap;Hl([E.trace("MediaMiddlewareUtils.getTransformedVideoTrack")],Hc.prototype,"getTransformedVideoTrack",1);Hl([E.trace("MediaMiddlewareUtils.addVideoMiddleware")],Hc.prototype,"addVideoMiddleware",1);Hl([E.trace("MediaMiddlewareUtils.removeVideoMiddleware")],Hc.prototype,"removeVideoMiddleware",1);Hl([E.trace("MediaMiddlewareUtils.getTransformedAudioTrack")],Hc.prototype,"getTransformedAudioTrack",1);Hl([E.trace("MediaMiddlewareUtils.addAudioMiddleware")],Hc.prototype,"addAudioMiddleware",1);Hl([E.trace("MediaMiddlewareUtils.removeAudioMiddleware")],Hc.prototype,"removeAudioMiddleware",1);const Yu=class{constructor(){y(this,"mediaPermissionEvent"),this.mediaPermissionEvent=!0}static getInstance(){return Yu.instance||(Yu.instance=new Yu),Yu.instance}get shouldEmitMediaPermissionEvent(){return this.mediaPermissionEvent}setEmitMediaPermissionEvent(t){this.mediaPermissionEvent=t}};let rM=Yu;y(rM,"instance");const Tg=rM.getInstance(),Kie={lowVolumeThreshold:-40,clipThreshold:1,silentThreshold:1/1987,delay:500,media:"audio"};var jf,Qd,ow,sM,xm,Y0;const nM=class{constructor(t){R(this,ow),R(this,xm),y(this,"analyser"),y(this,"silentThreshold"),y(this,"lowVolumeThreshold"),y(this,"clipThreshold"),y(this,"delay"),y(this,"audioContext"),y(this,"audioSource"),y(this,"metadata",{}),y(this,"analysing"),y(this,"track"),R(this,jf,void 0),R(this,Qd,void 0);const{lowVolumeThreshold:e,silentThreshold:i,clipThreshold:r,delay:s,media:n}={...Kie,...t};this.lowVolumeThreshold=e,this.silentThreshold=i,this.clipThreshold=r,this.delay=s,this.analysing=!1,I(this,Qd,n)}setTrack(t){if(!t)return;this.track=t.clone();const e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,this.analyser=this.audioContext.createAnalyser(),h(this,Qd)==="screenshare"){x.emit(T.SCREENSHARE_AUDIO_TRACK_CREATED);return}x.emit(T.AUDIO_TRACK_CREATED)}getTrackMetadata(){if(!this.track)return null;switch(this.metadata.label=this.track.label,this.metadata.channelCountMode=this.analyser.channelCountMode,this.metadata.channelCount=this.analyser.channelCount,this.metadata.channelInterpretation=this.analyser.channelInterpretation,this.metadata.outputs=this.analyser.numberOfOutputs,this.analyser.numberOfOutputs){case 1:this.metadata.channelType="MONO";break;case 2:this.metadata.channelType="STEREO";break;case 4:this.metadata.channelType="QUAD";break}return this.metadata}async startTrackAnalysis(){if(!this.track||this.analysing)return!1;try{return await this.audioContext.resume(),await Xe(this,ow,sM).call(this),this.analysing=!0,!0}catch(t){return S.error(t),!1}}stopTrackAnalysis(){this.analysing&&(this.analysing=!1,clearTimeout(h(this,jf)))}cleanup(){var t,e,i,r,s;if(this.stopTrackAnalysis(),(t=this.analyser)==null||t.disconnect(),(e=this.audioSource)==null||e.disconnect(this.analyser),(i=this.audioSource)==null||i.disconnect(),(r=this.audioContext)==null||r.close(),this.audioContext=void 0,this.analyser=void 0,this.audioSource=void 0,(s=this.track)==null||s.stop(),this.track=void 0,h(this,Qd)==="screenshare"){x.emit(T.SCREENSHARE_AUDIO_TRACK_CLOSED);return}x.emit(T.AUDIO_TRACK_CLOSED)}static dbFS(t){const e=20*(Math.log(t)/Math.log(10));return Math.round(e*10)/10}};let aM=nM;jf=new WeakMap,Qd=new WeakMap,ow=new WeakSet,sM=async function(){try{const t=new MediaStream;t.addTrack(this.track),this.audioSource=this.audioContext.createMediaStreamSource(t),this.audioSource.connect(this.analyser),await new Promise(e=>{window.requestAnimationFrame(()=>{Xe(this,xm,Y0).call(this),e(!0)})})}catch(t){S.error(t)}},xm=new WeakSet,Y0=function(){const t=new Float32Array(this.analyser.fftSize);this.analyser.getFloatTimeDomainData(t);let e=0;for(const n of t)e+=n*n;const i=Math.sqrt(e/t.length),r=nM.dbFS(i),s={volume:i,lowVolume:r<this.lowVolumeThreshold,silence:i<this.silentThreshold,clip:i>this.clipThreshold,timestamp:new Date().getTime()};h(this,Qd)==="screenshare"?x.emit(T.SCREENSHARE_AUDIO_TRACK_ANALYSIS,s):x.emit(T.AUDIO_TRACK_ANALYSIS,s),I(this,jf,setTimeout(()=>{window.requestAnimationFrame(Xe(this,xm,Y0).bind(this))},this.delay))};const Zs=new aM,_c=new aM({media:"screenshare"});var Yie=Object.defineProperty,Qie=Object.getOwnPropertyDescriptor,mt=(t,e,i,r)=>{for(var s=r>1?void 0:r?Qie(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Yie(e,i,s),s},Ze,To,xx;const oM=(xx=class extends ir.EventEmitter{constructor(t,e){super(),R(this,Ze,void 0),R(this,To,void 0),y(this,"mediaMiddlewareUtils"),y(this,"audioTrack"),y(this,"rawAudioTrack"),y(this,"videoTrack"),y(this,"rawVideoTrack"),y(this,"screenShareTracks"),y(this,"audioEnabled"),y(this,"videoEnabled"),y(this,"screenShareEnabled"),y(this,"currentDevices"),y(this,"permissions"),y(this,"audioUpdateInProgress"),y(this,"videoUpdateInProgress"),y(this,"audioRestartInProgress"),y(this,"videoRestartInProgress"),y(this,"screenShareUpdateInProgress"),I(this,Ze,t),I(this,To,new bO(e)),this.audioEnabled=!0,this.videoEnabled=!0,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1,this.audioRestartInProgress=!1,this.videoRestartInProgress=!1,this.screenShareUpdateInProgress=!1,this.screenShareEnabled=!1,this.permissions={audio:"NOT_REQUESTED",video:"NOT_REQUESTED",screenshare:"NOT_REQUESTED"},this.screenShareTracks={audio:void 0,video:void 0},this.currentDevices={audio:void 0,video:void 0,speaker:void 0},h(this,Ze).onDeviceChange((i,r)=>{this.onDeviceChange(r,!1),this.emit("DEVICE_LIST_UPDATED",r)}),this.conditionallyRestartAudio=this.conditionallyRestartAudio.bind(this),this.conditionallyRestartVideo=this.conditionallyRestartVideo.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),document.addEventListener("visibilitychange",this.onVisibilityChange),this.on("AUDIO_TRACK_CHANGE",()=>{this.notifyIfTrackSilent()}),x.on(T.PRODUCER_TRACK_ENDED,({kind:i})=>{i==="mic"&&this.conditionallyRestartAudio(),i==="webcam"&&this.conditionallyRestartVideo()})}handlePermissionErrors(t,e){const i=ey(t,e.name,e.message);this.permissions[t]=i,x.emit(T.MEDIA_PERMISSION_ERROR,{message:i,constraints:e.constraints,kind:t})}async repopulateAvailableDevices(){return h(this,Ze).repopulateAvailableDevices()}onVisibilityChange(t){document.visibilityState==="visible"&&(Ue.isMobile()&&this.conditionallyRestartAudio(),this.conditionallyRestartVideo()),X.tabChanged(document.visibilityState==="visible"),document.visibilityState!=="visible"?X.browserBackgrounded():X.browserForegrounded()}async conditionallyRestartAudio(t){var e,i;if(this.audioRestartInProgress||(this.audioRestartInProgress=!0,!((e=this.currentDevices)!=null&&e.audio)||!this.audioEnabled))return;await Promise.race([new Promise(s=>{var n;return(n=this.rawAudioTrack)==null?void 0:n.addEventListener("unmute",a=>{s(a)})}),new Promise(s=>setTimeout(s,50))]),S.info("performingCheck::shouldReacquireAudioTrack",{actions:{trackRobustness:{eventType:t==null?void 0:t.type}}});const r=await this.shouldReacquireTrack("audio");S.info("performedCheck::shouldReacquireAudioTrack",{actions:{trackRobustness:{reacquireTrack:r}}}),r&&(S.info("reacquiring_audio_track"),this.removeMediaStreamTrackListeners(this.rawAudioTrack),Ue.isChromiumBased()&&await h(this,Ze).repopulateAvailableDevices(),await this.setupAudioStream((i=this.currentDevices.audio)==null?void 0:i.deviceId),this.addMediaStreamTrackListeners(this.rawAudioTrack),this.emit("AUDIO_TRACK_CHANGE")),this.audioRestartInProgress=!1}async conditionallyRestartVideo(t){var e;if(this.videoRestartInProgress||(this.videoRestartInProgress=!0,!((e=this.currentDevices)!=null&&e.video)||!this.videoEnabled))return;S.info("performingCheck::shouldReacquireVideoTrack",{actions:{trackRobustness:{eventType:t==null?void 0:t.type}}}),await Promise.race([new Promise(r=>{var s;return(s=this.rawVideoTrack)==null?void 0:s.addEventListener("unmute",r)}),new Promise(r=>setTimeout(r,50))]);const i=await this.shouldReacquireTrack("video");S.info("performedCheck::shouldReacquireVideoTrack",{actions:{trackRobustness:{reacquireTrack:i}}}),i&&(S.info("reacquiring_video_track"),this.removeMediaStreamTrackListeners(this.rawVideoTrack),await h(this,Ze).repopulateAvailableDevices(),await this.setupVideoStream(this.currentDevices.video.deviceId),this.addMediaStreamTrackListeners(this.rawVideoTrack),this.emit("VIDEO_TRACK_CHANGE")),this.videoRestartInProgress=!1}async shouldReacquireTrack(t){if(t==="audio"){if(this.audioUpdateInProgress||!this.audioEnabled)return!1;if(!this.rawAudioTrack||!this.audioTrack)return!0;const r=this.rawAudioTrack.muted||this.audioTrack.muted,s=(this.rawAudioTrack.readyState==="ended"||this.audioTrack.readyState==="ended")&&this.audioEnabled,n=await wp(this.rawAudioTrack);return document.visibilityState==="visible"&&(n||s||r)}if(this.videoUpdateInProgress||!this.videoEnabled)return!1;if(!this.rawVideoTrack||!this.videoTrack)return!0;const e=this.rawVideoTrack.muted||this.videoTrack.muted,i=(this.rawVideoTrack.readyState==="ended"||this.videoTrack.readyState==="ended")&&this.videoEnabled;return document.visibilityState==="visible"&&(i||e)}onAudioUnmute(t){S.info("audio_track_unmuted",{actions:{trackRobustness:{eventType:t==null?void 0:t.type}}})}onVideoUnmute(t){S.info("video_track_unmuted",{actions:{trackRobustness:{eventType:t==null?void 0:t.type}}})}removeMediaStreamTrackListeners(t){if(S.info(`Removing ${t.kind} listerners`),!t)return;const e=t.kind==="audio"?this.conditionallyRestartAudio:this.conditionallyRestartVideo;return t.removeEventListener("ended",e),t.removeEventListener("mute",e),t.removeEventListener("unmute",t.kind==="audio"?this.onAudioUnmute:this.onVideoUnmute),t}addMediaStreamTrackListeners(t){if(!t)return null;S.info(`adding_${t.kind}_stream_listerners`);const e=t.kind==="audio",i=e?this.conditionallyRestartAudio:this.conditionallyRestartVideo;return t.addEventListener("ended",async()=>{await i();const r=e?this.audioEnabled:this.videoEnabled,s=e?this.audioTrack:this.videoTrack,n=e?"FORCE_MUTE_AUDIO":"FORCE_MUTE_VIDEO";r&&!(s&&s.readyState==="live"&&s.enabled)&&(S.info(`LocalMediaHandler::trackEnded::Failed to restart ${t.kind} track`),this.emit(n))}),t.addEventListener("mute",i),t.addEventListener("unmute",e?this.onAudioUnmute:this.onVideoUnmute),t}async notifyIfTrackSilent(){var t,e,i,r,s,n;this.audioEnabled&&this.audioTrack&&this.audioTrack.readyState!=="ended"&&this.audioTrack.enabled&&await wp(this.audioTrack)===!0&&(S.info("LocalMediaHandler:notifyIfTrackSilent:TrackSilent",{media:{audio:{enabled:this.audioEnabled,deviceId:(e=(t=this.audioTrack)==null?void 0:t.getSettings())==null?void 0:e.deviceId,permission:(i=this.permissions)==null?void 0:i.audio,deviceName:(s=(r=this.currentDevices)==null?void 0:r.audio)==null?void 0:s.label,trackId:(n=this.audioTrack)==null?void 0:n.id}}}),this.emit("AUDIO_TRACK_SILENT"))}async setupAudioStream(t,e=!0){var i,r,s;if(!this.audioUpdateInProgress)try{this.audioUpdateInProgress=!0;const n=h(this,Ze).getAudioDevices();if(!n.length)return;let a=t;(!a||!n.find(c=>c.deviceId===a))&&(a=await this.getPreferredDeviceId("AUDIO"),S.debug("setupAudioStream::AUDIO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"audio"}}));const o=Ct.getAudioConstraints({audioDeviceId:a});e&&((i=this.rawAudioTrack)==null||i.stop(),(r=this.audioTrack)==null||r.stop()),this.rawAudioTrack=await Ct.getAudioTrack(o),a=this.rawAudioTrack.getSettings().deviceId,((s=this.currentDevices.audio)==null?void 0:s.deviceId)!==a&&(this.currentDevices.audio=h(this,Ze).getDeviceById(a,"audioinput"),this.emit("DEVICE_CHANGE",{device:this.currentDevices.audio})),this.rawAudioTrack.enabled=this.audioEnabled,this.setAudioTrack(await this.mediaMiddlewareUtils.getTransformedAudioTrack(this.rawAudioTrack)),this.addMediaStreamTrackListeners(this.rawAudioTrack),await h(this,Ze).repopulateAvailableDevices(),this.permissions.audio="ACCEPTED",x.emit(T.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),X.mediaPermission("AUDIO",Ga.ACCEPTED),X.selectedDevice("AUDIO",this.currentDevices.audio),a&&In.setItem("lastUsedAudioDeviceId",a)}catch(n){this.handlePermissionErrors("audio",n)}finally{this.audioUpdateInProgress=!1}}async getPreferredDeviceId(t){var e,i;let r;if(t==="AUDIO"){const s=h(this,Ze).getAudioDevices(),n=In.getItem("lastUsedAudioDeviceId");S.debug("getPreferredDeviceId::lastUsedAudioDeviceId",{preferredDevice:{lastUsedPreferredDeviceId:n,kind:"audio"}});let a;n&&(a=s.find(o=>o.deviceId===n)),a?r=n:ee.hasFeature(re.REMOVE_OPERATIONAL_MIC)||(r=(await this.getOperationalMicDeviceId()).deviceId),r||(r=(e=s[0])==null?void 0:e.deviceId)}if(t==="VIDEO"){const s=In.getItem("lastUsedVideoDeviceId");S.debug("getPreferredDeviceId::lastUsedVideoDeviceId",{preferredDevice:{kind:"video",lastUsedPreferredDeviceId:s}});const n=h(this,Ze).getVideoDevices();let a;s&&(a=n.find(o=>o.deviceId===s)),a?r=s:r=(await this.getOperationalWebcamDeviceId()).deviceId,r||(r=(i=n[0])==null?void 0:i.deviceId)}return r}async setupVideoStream(t,e=!0){var i,r;if(!this.videoUpdateInProgress)try{this.videoUpdateInProgress=!0;const s=h(this,Ze).getVideoDevices();if(!s.length)return;let n=t;if((!n||!s.find(a=>a.deviceId===n))&&(n=await this.getPreferredDeviceId("VIDEO"),S.debug("setupVideoStream::VIDEO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:n,kind:"video"}})),e&&((i=this.videoTrack)==null||i.stop()),this.videoEnabled){const a=h(this,To).getVideoConstraints(n);this.rawVideoTrack=await Ct.getVideoTrack(a),n=this.rawVideoTrack.getSettings().deviceId,this.setVideoTrack(await this.mediaMiddlewareUtils.getTransformedVideoTrack(this.rawVideoTrack)),this.addMediaStreamTrackListeners(this.rawVideoTrack)}await h(this,Ze).repopulateAvailableDevices(),((r=this.currentDevices.video)==null?void 0:r.deviceId)!==n&&(this.currentDevices.video=h(this,Ze).getDeviceById(n,"videoinput"),this.emit("DEVICE_CHANGE",{device:this.currentDevices.video})),this.permissions.video="ACCEPTED",x.emit(T.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),X.mediaPermission("VIDEO",Ga.ACCEPTED),X.selectedDevice("VIDEO",this.currentDevices.video),n&&In.setItem("lastUsedVideoDeviceId",n)}catch(s){this.handlePermissionErrors("video",s)}finally{this.videoUpdateInProgress=!1}}async setupScreenShareStreams(){if(this.screenShareUpdateInProgress)return;const t=h(this,To).getScreenShareConstraints();ee.hasFeature(re.SCREENSHARE_MAX_DIMENSIONS)&&(t.video.width.max=window.screen.width,t.video.height.max=window.screen.height);try{this.screenShareUpdateInProgress=!0;const e=await Ct.getScreenShareTracks(t);this.setScreenShareTracks(e)}catch(e){throw this.handlePermissionErrors("screenshare",new wc(e.name,e.message,t)),new A(e.message)}finally{this.screenShareUpdateInProgress=!1}}async setupSpeaker(t){var e;const i=h(this,Ze).getSpeakerDevices();if(!i.length)return;const r=t??i[0].deviceId;((e=this.currentDevices.speaker)==null?void 0:e.deviceId)!==r&&(this.currentDevices.speaker=h(this,Ze).getDeviceById(r,"audiooutput"),X.selectedDevice("SPEAKER",this.currentDevices.speaker),this.emit("DEVICE_CHANGE",{device:this.currentDevices.speaker})),document.querySelectorAll("audio").forEach(async s=>{if(typeof s.sinkId<"u"&&this.currentDevices.speaker.deviceId&&s.sinkId!==this.currentDevices.speaker.deviceId)try{await s.setSinkId(this.currentDevices.speaker.deviceId)}catch{}})}async getOperationalWebcamDeviceId(){const t=h(this,Ze).getVideoDevices();if(!t.length)return{isOperational:!1,deviceId:null};Tg.setEmitMediaPermissionEvent(!1);const e=[],i=await t.reduce(async(r,s)=>{const n=await r;if(n!==null)return n;const a=h(this,To).getVideoConstraints(s.deviceId);try{return(await Ct.getVideoTrack(a)).stop(),s.deviceId}catch(o){S.error("getOperationalWebcamDeviceId::could_not_acquire_video_device",{error:o,constraints:a}),e.push({exception:o,constraints:a})}return n},Promise.resolve(null));if(Tg.setEmitMediaPermissionEvent(!0),!i&&e.length>0&&e.length===t.length){const{exception:r,constraints:s}=e[0];throw new wc(r.name,r.message,s)}return i?{isOperational:!0,deviceId:i}:{isOperational:!1,deviceId:t[0].deviceId}}async getOperationalMicDeviceId(){const t=h(this,Ze).getAudioDevices();if(!t.length)return{isOperational:!1,deviceId:null};const e=[];Tg.setEmitMediaPermissionEvent(!1);const i=await t.reduce(async(r,s)=>{const n=await r;if(n!==null)return n;const a=Ct.getAudioConstraints({audioDeviceId:s.deviceId});try{const o=await Ct.getAudioTrack(a),c=await wp(o);if(o==null||o.stop(),!c)return s}catch(o){S.error("getOperationalMicDeviceId::could_not_acquire_audio_device",{error:o,constraints:a}),e.push({exception:o,constraints:a})}return n},Promise.resolve(null));if(Tg.setEmitMediaPermissionEvent(!0),!i&&e.length>0&&e.length===t.length){const{exception:r,constraints:s}=e[0];throw new wc(r.name,r.message,s)}return i?{isOperational:!0,deviceId:i.deviceId}:{isOperational:!1,deviceId:t[0].deviceId}}async setupStreams({audio:t,video:e}){var i;const r={};this.currentDevices||(this.currentDevices={audio:void 0,video:void 0,speaker:void 0});try{if(t&&!this.audioUpdateInProgress&&h(this,Ze).getAudioDevices().length!==0){const a=await this.getPreferredDeviceId("AUDIO");S.info("setupStreams::AUDIO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"audio"}});const o=Ct.getAudioConstraints({audioDeviceId:a});r.audio=o.audio}if(e&&!this.videoUpdateInProgress&&h(this,Ze).getVideoDevices().length!==0){const a=await this.getPreferredDeviceId("VIDEO");S.info("setupStreams::VIDEO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"video"}});const o=h(this,To).getVideoConstraints(a);r.video=o.video}if(((i=Object.keys(r))==null?void 0:i.length)===0){this.audioEnabled=t??this.audioEnabled,this.videoEnabled=e??this.videoEnabled,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1;return}const{audioTrack:s,videoTrack:n}=await Ct.getAudioAndVideoTrack(r);t&&s&&(this.audioTrack=s,this.rawAudioTrack=s,this.permissions.audio="ACCEPTED",x.emit(T.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),this.currentDevices.audio=h(this,Ze).getDeviceById(s.getSettings().deviceId,"audioinput"),In.setItem("lastUsedAudioDeviceId",s.getSettings().deviceId)),e&&n&&(this.videoTrack=n,this.rawVideoTrack=n,this.permissions.video="ACCEPTED",x.emit(T.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),this.currentDevices.video=h(this,Ze).getDeviceById(n.getSettings().deviceId,"videoinput"),In.setItem("lastUsedVideoDeviceId",n.getSettings().deviceId)),await h(this,Ze).repopulateAvailableDevices()}catch(s){s.name==="NotAllowedError"&&(t&&await this.setupAudioStream(),e&&await this.setupVideoStream())}this.audioEnabled=!!this.audioTrack,this.videoEnabled=!!this.videoTrack,this.screenShareEnabled=!1,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1,await this.setupSpeaker()}stopAudioTrack(){var t,e;this.audioUpdateInProgress||(this.audioUpdateInProgress=!0,(t=this.audioTrack)==null||t.stop(),(e=this.rawAudioTrack)==null||e.stop(),this.audioEnabled=!1,this.audioUpdateInProgress=!1)}stopVideoTrack(){var t,e;this.videoUpdateInProgress||(this.videoUpdateInProgress=!0,(t=this.videoTrack)==null||t.stop(),(e=this.rawVideoTrack)==null||e.stop(),this.videoEnabled=!1,this.videoUpdateInProgress=!1)}stopScreenShareTracks(t={}){var e,i,r,s;if(this.screenShareUpdateInProgress)return;this.screenShareUpdateInProgress=!0;const{audio:n=!0,video:a=!0}=t;n&&((i=(e=this.screenShareTracks)==null?void 0:e.audio)==null||i.stop()),a&&((s=(r=this.screenShareTracks)==null?void 0:r.video)==null||s.stop()),this.screenShareEnabled=!1,this.screenShareUpdateInProgress=!1}removeAudioTrack(){this.stopAudioTrack(),this.audioTrack=void 0,this.rawAudioTrack=void 0,ee.hasFeature(re.TROUBLESHOOTING)&&Zs.cleanup()}removeVideoTrack(){this.stopVideoTrack(),this.videoTrack=void 0,this.rawVideoTrack=void 0}removeScreenShareTracks(t){var e;(e=this.screenShareTracks.video)==null||e.removeEventListener("ended",this.onScreenShareEnded),this.stopScreenShareTracks(t),this.screenShareTracks={audio:void 0,video:void 0}}removeAllTracks(){this.removeAudioTrack(),this.removeVideoTrack(),this.removeScreenShareTracks({audio:!!this.screenShareTracks.audio,video:!!this.screenShareTracks.video})}setAudioTrack(t){t!==this.audioTrack&&(t===void 0&&this.stopAudioTrack(),this.audioTrack=t,this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled))}setVideoTrack(t){t!==this.videoTrack&&(t===void 0&&this.stopVideoTrack(),this.videoTrack=t)}setScreenShareTracks(t){var e;const{audio:i,video:r}=t;(!i||!r)&&this.stopScreenShareTracks({audio:!!i,video:!!r}),this.screenShareTracks=t,(e=this.screenShareTracks.video)==null||e.addEventListener("ended",this.onScreenShareEnded.bind(this))}onScreenShareEnded(){this.emit("SCREENSHARE_ENDED")}disableAudio(){this.audioEnabled=!1,this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled),this.rawAudioTrack&&(this.rawAudioTrack.enabled=this.audioEnabled)}async enableAudio(){var t;if(this.permissions.audio==="DENIED"){this.audioEnabled=!1;return}try{if((!this.audioTrack||this.audioTrack.readyState==="ended")&&await this.setupAudioStream((t=this.currentDevices.audio)==null?void 0:t.deviceId),!this.audioTrack||!this.rawAudioTrack){this.audioEnabled=!1,S.error("LocalMediaHandler::enableAudio:Setting up audio stream failed while enabling audio",{debuggingHint:"Refer to SelfController::mediaPermissionError log."});return}this.audioEnabled=!0}catch(e){this.audioEnabled=!1,this.audioTrack=void 0,this.rawAudioTrack=void 0,S.error("LocalMediaHandler::enableAudio",{error:e},!0)}this.audioTrack&&(this.audioTrack.enabled=!0),this.rawAudioTrack&&(this.rawAudioTrack.enabled=!0),!(this.permissions.audio==="ACCEPTED"||!this.audioEnabled)&&(this.permissions.audio="ACCEPTED",x.emit(T.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}))}async toggleAudio(){var t;if(this.permissions.audio==="DENIED"){this.audioEnabled=!1;return}try{if((!this.audioTrack||this.audioTrack.readyState==="ended")&&await this.setupAudioStream((t=this.currentDevices.audio)==null?void 0:t.deviceId),!this.audioTrack||!this.rawAudioTrack){this.audioEnabled=!1;return}this.audioEnabled=!this.audioEnabled}catch(e){this.audioEnabled=!1,S.error("LocalMediaHandler::toggleAudio",{error:e},!0)}this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled),this.rawAudioTrack&&(this.rawAudioTrack.enabled=this.audioEnabled)}async toggleVideo(){var t;if(this.permissions.video==="DENIED"){this.videoEnabled=!1;return}if(this.videoEnabled){this.removeVideoTrack();return}this.videoEnabled=!0;try{await this.setupVideoStream((t=this.currentDevices.video)==null?void 0:t.deviceId)}catch{this.videoEnabled=!1}this.videoTrack&&(this.videoTrack.enabled=this.videoEnabled),this.rawVideoTrack&&(this.rawVideoTrack.enabled=this.videoEnabled),!(this.permissions.video==="ACCEPTED"||!this.videoEnabled)&&(this.permissions.video="ACCEPTED",x.emit(T.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}))}async toggleScreenShare(){if(this.screenShareEnabled){this.removeScreenShareTracks({audio:!!this.screenShareTracks.audio,video:!!this.screenShareTracks.video});return}try{if(await this.setupScreenShareStreams(),this.screenShareEnabled=!0,this.permissions.screenshare==="ACCEPTED")return;this.permissions.screenshare="ACCEPTED",x.emit(T.MEDIA_PERMISSION_UPDATE,{message:this.permissions.screenshare,kind:"screenshare"})}catch{this.screenShareEnabled=!1}}getAllDevices(){return h(this,Ze).availableDevices}getDeviceById(t,e){return h(this,Ze).getDeviceById(t,e)}getAudioDevices(){return h(this,Ze).getAudioDevices()}getVideoDevices(){return h(this,Ze).getVideoDevices()}getSpeakerDevices(){return h(this,Ze).getSpeakerDevices()}async onDeviceChange(t,e){var i,r;(i=t==null?void 0:t.added)==null||i.forEach(async s=>{s&&(e||!Vo(s))&&(s.kind==="audioinput"?(await this.setupAudioStream(s.deviceId),this.emit("AUDIO_TRACK_CHANGE")):s.kind==="videoinput"&&this.videoEnabled?(await this.setupVideoStream(s.deviceId),this.emit("VIDEO_TRACK_CHANGE")):s.kind==="audiooutput"&&await this.setupSpeaker(s.deviceId))}),(r=t==null?void 0:t.removed)==null||r.forEach(async s=>{var n,a,o;s&&((s.kind==="audioinput"&&!this.audioEnabled||s.kind==="videoinput"&&!this.videoEnabled||ee.hasFeature(re.DEVICE_REMOVE_EXP)||!Ue.isChromiumBased())&&(s.kind==="audioinput"&&s.deviceId===((n=this.currentDevices.audio)==null?void 0:n.deviceId)?(await this.setupAudioStream(),this.emit("AUDIO_TRACK_CHANGE")):s.kind==="videoinput"&&s.deviceId===((a=this.currentDevices.video)==null?void 0:a.deviceId)&&(await this.setupVideoStream(),this.emit("VIDEO_TRACK_CHANGE"))),s.kind==="audiooutput"&&s.deviceId===((o=this.currentDevices.speaker)==null?void 0:o.deviceId)&&await this.setupSpeaker())})}static async init(t){const e=await Ct.init(),i=new oM(e,t),r=new Hc(i);return i.mediaMiddlewareUtils=r,i}emit(t,...e){return super.emit(t,...e)}on(t,e){return super.on(t,e)}async removeDocumentEventListeners(){document.removeEventListener("visibilitychange",this.onVisibilityChange)}addAudioMiddleware(t){return this.mediaMiddlewareUtils.addAudioMiddleware(t)}removeAudioMiddleware(t){return this.mediaMiddlewareUtils.removeAudioMiddleware(t)}addVideoMiddleware(t){return this.mediaMiddlewareUtils.addVideoMiddleware(t)}removeVideoMiddleware(t){return this.mediaMiddlewareUtils.removeVideoMiddleware(t)}async enableVideo(){await this.toggleVideo()}async disableVideo(){await this.toggleVideo()}async enableScreenShare(){await this.toggleScreenShare()}async disableScreenShare(){await this.toggleScreenShare()}getCurrentDevices(){return this.currentDevices}destruct(){this.mediaMiddlewareUtils.terminateMiddlewareWebWorker(),h(this,Ze).destruct(),this.removeAllTracks(),this.removeAllListeners()}},Ze=new WeakMap,To=new WeakMap,xx);let dt=oM;mt([E.trace("OldMediaHandler.shouldReacquireTrack")],dt.prototype,"shouldReacquireTrack",1);mt([E.trace("OldMediaHandler.removeMediaStreamTrackListeners")],dt.prototype,"removeMediaStreamTrackListeners",1);mt([E.trace("OldMediaHandler.addMediaStreamTrackListeners")],dt.prototype,"addMediaStreamTrackListeners",1);mt([E.trace("OldMediaHandler.setupAudioStream")],dt.prototype,"setupAudioStream",1);mt([E.trace("OldMediaHandler.getPreferredDeviceId")],dt.prototype,"getPreferredDeviceId",1);mt([E.trace("OldMediaHandler.setupVideoStream")],dt.prototype,"setupVideoStream",1);mt([E.trace("OldMediaHandler.setupScreenShareStreams")],dt.prototype,"setupScreenShareStreams",1);mt([E.trace("OldMediaHandler.setupSpeaker")],dt.prototype,"setupSpeaker",1);mt([E.trace("OldMediaHandler.getOperationalWebcamDeviceId")],dt.prototype,"getOperationalWebcamDeviceId",1);mt([E.trace("OldMediaHandler.getOperationalMicDeviceId")],dt.prototype,"getOperationalMicDeviceId",1);mt([E.trace("OldMediaHandler.setupStreams")],dt.prototype,"setupStreams",1);mt([E.trace("OldMediaHandler.stopAudioTrack")],dt.prototype,"stopAudioTrack",1);mt([E.trace("OldMediaHandler.stopVideoTrack")],dt.prototype,"stopVideoTrack",1);mt([E.trace("OldMediaHandler.stopScreenShareTracks")],dt.prototype,"stopScreenShareTracks",1);mt([E.trace("OldMediaHandler.removeAudioTrack")],dt.prototype,"removeAudioTrack",1);mt([E.trace("OldMediaHandler.removeVideoTrack")],dt.prototype,"removeVideoTrack",1);mt([E.trace("OldMediaHandler.removeScreenShareTracks")],dt.prototype,"removeScreenShareTracks",1);mt([E.trace("OldMediaHandler.removeAllTracks")],dt.prototype,"removeAllTracks",1);mt([E.trace("OldMediaHandler.setAudioTrack")],dt.prototype,"setAudioTrack",1);mt([E.trace("OldMediaHandler.setVideoTrack")],dt.prototype,"setVideoTrack",1);mt([E.trace("OldMediaHandler.setScreenShareTracks")],dt.prototype,"setScreenShareTracks",1);mt([E.trace("OldMediaHandler::disableAudio")],dt.prototype,"disableAudio",1);mt([E.trace("OldMediaHandler::enableAudio")],dt.prototype,"enableAudio",1);mt([E.trace("OldMediaHandler.toggleAudio")],dt.prototype,"toggleAudio",1);mt([E.trace("OldMediaHandler.toggleVideo")],dt.prototype,"toggleVideo",1);mt([E.trace("OldMediaHandler.toggleScreenShare")],dt.prototype,"toggleScreenShare",1);class Zie extends jt{constructor(){super(...arguments),y(this,"localMediaHandler")}async init(e={}){var i,r;if(Ue.init(),!this.localMediaHandler)try{let s=!0;const n=e.constraints||hr;if(et.defaults.mediaHandler)s=!1,this.localMediaHandler=et.defaults.mediaHandler.localMediaHandler;else if(navigator.RNLocalMediaHandlerImpl){const{RNLocalMediaHandlerImpl:a}=navigator;this.localMediaHandler=await a.init()}else ee.hasFeature(re.NEW_LOCAL_MEDIA_HANDLER)?this.localMediaHandler=new js(n):this.localMediaHandler=await dt.init(n);s&&await this.localMediaHandler.setupStreams({video:(i=e==null?void 0:e.video)!=null?i:!0,audio:(r=e==null?void 0:e.audio)!=null?r:!0})}catch(s){S.error("DyteSelf::init::Failed To Setup Streams",{error:{name:s.name,message:s.message}})}}get audioTrack(){return this.localMediaHandler.audioTrack}get rawAudioTrack(){return this.localMediaHandler.rawAudioTrack}async addAudioMiddleware(e){return this.localMediaHandler.addAudioMiddleware(e)}async removeAudioMiddleware(e){return this.localMediaHandler.removeAudioMiddleware(e)}get videoTrack(){return this.localMediaHandler.videoTrack}get rawVideoTrack(){return this.localMediaHandler.rawVideoTrack}async addVideoMiddleware(e){return this.localMediaHandler.addVideoMiddleware(e)}async removeVideoMiddleware(e){return this.localMediaHandler.removeVideoMiddleware(e)}get screenShareTracks(){return this.localMediaHandler.screenShareTracks}get audioEnabled(){return this.localMediaHandler.audioEnabled}get videoEnabled(){return this.localMediaHandler.videoEnabled}get screenShareEnabled(){return this.localMediaHandler.screenShareEnabled}async enableAudio(){await this.localMediaHandler.enableAudio(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}async enableVideo(){await this.localMediaHandler.enableVideo(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}async disableAudio(){this.localMediaHandler.disableAudio(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}async disableVideo(){await this.localMediaHandler.disableVideo(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}getCurrentDevices(){return this.localMediaHandler.getCurrentDevices()}async getAudioDevices(){return await this.localMediaHandler.getAudioDevices()}async getVideoDevices(){return await this.localMediaHandler.getVideoDevices()}async getSpeakerDevices(){return await this.localMediaHandler.getSpeakerDevices()}getDeviceById(e,i){let r;return i==="audio"?r="audioinput":i==="video"?r="videoinput":i==="speaker"&&(r="audiooutput"),this.localMediaHandler.getDeviceById(e,r)}async setDevice(e){const i={added:[e],removed:[]};if("onDeviceChange"in this.localMediaHandler){await this.localMediaHandler.onDeviceChange(i,!0);return}switch(e.kind){case"audioinput":try{await this.localMediaHandler.setAudioDevice(e)}catch{}finally{this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}break;case"audiooutput":await this.localMediaHandler.setSpeakerDevice(e);break;case"videoinput":try{await this.localMediaHandler.setVideoDevice(e)}catch{}finally{this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}break}this.emit("deviceUpdate",{device:e})}}const Xie={nonBlackPixelLumaThreshold:20,identicalFrameSsimThreshold:.985,media:"video"};var $f,gc,Sd,zf,cw,dw,Px,lw,Cx,Q0,Rx,xg,Z0,X0,Ax;const Qu=class{constructor(t){R(this,zf),R(this,dw),R(this,lw),y(this,"metadata",{}),y(this,"video"),y(this,"canvas"),y(this,"nonBlackPixelLumaThreshold"),y(this,"identicalFrameSsimThreshold"),y(this,"previousFrame",new Uint8ClampedArray),R(this,$f,void 0),y(this,"track"),y(this,"analysing"),R(this,gc,void 0),R(this,Sd,void 0),y(this,"preview");const{nonBlackPixelLumaThreshold:e,identicalFrameSsimThreshold:i,media:r}={...Xie,...t};this.nonBlackPixelLumaThreshold=e,this.identicalFrameSsimThreshold=i,this.analysing=!1,I(this,gc,r),this.preview=!1}setTrack(t){var e,i,r;(e=this.track)==null||e.stop(),this.track=t;const{height:s,width:n}=(r=(i=this.track)==null?void 0:i.getConstraints())!=null?r:{};if(this.metadata.resolution=[n,s],h(this,gc)==="screenshare"){x.emit(T.SCREENSHARE_VIDEO_TRACK_CREATED);return}x.emit(T.VIDEO_TRACK_CREATED)}getTrackMetadata(){return this.track?(this.metadata.label=this.track.label,this.metadata):null}async startTrackAnalysis(){var t;return!this.track||this.analysing?!1:(!this.video&&!((t=this.video)!=null&&t.src)&&(I(this,Sd,new MediaStream),h(this,Sd).addTrack(this.track),this.video=document.createElement("video"),this.canvas=document.createElement("canvas"),this.video.setAttribute("autoplay",""),this.video.setAttribute("muted",""),[this.video.width,this.video.height]=this.metadata.resolution,this.video.srcObject=h(this,Sd)),window.requestAnimationFrame(Xe(this,zf,cw).bind(this)),this.analysing=!0,!0)}stopTrackAnalysis(){this.analysing&&(this.analysing=!1,clearTimeout(h(this,$f)))}cleanup(){var t;if(this.stopTrackAnalysis(),(t=this.track)==null||t.stop(),this.track=void 0,I(this,Sd,void 0),this.video&&(this.video.srcObject=void 0,this.video=void 0),this.canvas=void 0,this.previousFrame=new Uint8ClampedArray,h(this,gc)==="screenshare"){x.emit(T.SCREENSHARE_VIDEO_TRACK_CLOSED);return}x.emit(T.VIDEO_TRACK_CLOSED)}};let _p=Qu;$f=new WeakMap,gc=new WeakMap,Sd=new WeakMap,zf=new WeakSet,cw=function(){var t;try{const e=Xe(this,dw,Px).call(this),i=Xe(this,lw,Cx).call(this,e.data,e.data.length),r=Xe(t=Qu,Q0,Rx).call(t,this.previousFrame,e.data);this.previousFrame=e.data;const s={isBlackFrame:i,videoScore:r,isFrozenFrame:r>this.identicalFrameSsimThreshold,timestamp:new Date().getTime()};h(this,gc)==="screenshare"?x.emit(T.SCREENSHARE_VIDEO_TRACK_ANALYSIS,s):x.emit(T.VIDEO_TRACK_ANALYSIS,s),I(this,$f,setTimeout(()=>{this.track&&window.requestAnimationFrame(Xe(this,zf,cw).bind(this))},3e3))}catch{h(this,gc)==="screenshare"?x.emit(T.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR):x.emit(T.VIDEO_TRACK_ANALYSIS_ERROR)}},dw=new WeakSet,Px=function(){var t,e;this.canvas.width=(t=this.video)==null?void 0:t.width,this.canvas.height=(e=this.video)==null?void 0:e.height;const i=this.canvas.getContext("2d",{willReadFrequently:!0});return i.drawImage(this.video,0,0,this.canvas.width,this.canvas.height),i.getImageData(0,0,this.canvas.width,this.canvas.height)},lw=new WeakSet,Cx=function(t,e){const i=this.nonBlackPixelLumaThreshold;let r=0;for(let s=4;s<e;s+=4)if(r+=.21*t[s]+.72*t[s+1]+.07*t[s+2],r>i*(s/4))return!1;return!0},Q0=new WeakSet,Rx=function(t,e){var i,r,s;if(t.length!==e.length)return 0;const n=.01,a=.03,o=255,c=n*o*(n*o),d=a*o*(a*o),u=d/2,p=Xe(i=Qu,xg,Z0).call(i,t),g=p.mean,m=p.variance,f=Math.sqrt(m),b=Xe(r=Qu,xg,Z0).call(r,e),w=b.mean,v=b.variance,_=Math.sqrt(v),k=Xe(s=Qu,X0,Ax).call(s,t,e,g,w),P=(2*g*w+c)/(g*g+w*w+c),D=(k+u)/(f*_+u),M=(2*f*_+d)/(m+v+d);return P*M*D},xg=new WeakSet,Z0=function(t){let e=0,i;for(i=0;i<t.length;i++)e+=t[i];const r=e/(t.length-1);let s=0;for(i=1;i<t.length;i++)s=t[i-1]-r,e+=t[i]+s*s;return{mean:r,variance:e/t.length}},X0=new WeakSet,Ax=function(t,e,i,r){let s=0;for(let n=0;n<t.length;n+=1)s+=(t[n]-i)*(e[n]-r);return s/t.length},R(_p,Q0),R(_p,xg),R(_p,X0);const Tr=new _p,io=new _p({media:"screenshare"});var ere=Object.defineProperty,tre=Object.getOwnPropertyDescriptor,ki=(t,e,i,r)=>{for(var s=r>1?void 0:r?tre(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&ere(e,i,s),s},Bt=(t=>(t.OFF_STAGE="OFF_STAGE",t.REQUESTED_TO_JOIN_STAGE="REQUESTED_TO_JOIN_STAGE",t.ACCEPTED_TO_JOIN_STAGE="ACCEPTED_TO_JOIN_STAGE",t.ON_STAGE="ON_STAGE",t))(Bt||{}),od,ga,Sn,vu,yu,Fe,Be,Ix;let qt=(Ix=class extends Zie{constructor(t,e,i,r,s){var n;super(),R(this,Fe),y(this,"id"),y(this,"name"),y(this,"picture"),y(this,"clientSpecificId"),y(this,"waitlistStatus"),R(this,od,void 0),R(this,ga,void 0),R(this,Sn,void 0),R(this,vu,void 0),y(this,"role"),y(this,"userId"),y(this,"organizationId"),y(this,"supportsRemoteControl",!1),y(this,"device"),R(this,yu,"OFF_STAGE"),y(this,"stageStatus"),y(this,"presetName"),y(this,"roomState","init"),this.id=t,this.userId=e.id,this.name=e.name,this.picture=e.picture,this.clientSpecificId=(n=e.customParticipantId)!=null?n:e.clientSpecificId,this.waitlistStatus="none",I(this,Sn,i),I(this,ga,r),I(this,vu,!1),this.organizationId=e.organizationId,this.supportsRemoteControl=Ue.isElectron(),this.device=Ue.getDeviceInfo(),this.presetName=s,I(this,od,Ee.isV2AuthToken?r.viewType:i.viewType),r.viewType!==_i.Chat&&this.updatePermission()}static async __init__(t,e,i,r,s){var n,a,o,c;let d=(a=(n=et.defaults)==null?void 0:n.audio)!=null?a:!0,u=(c=(o=et.defaults)==null?void 0:o.video)!=null?c:!0;i.canProduceAudio!=="ALLOWED"&&(d=!1),i.canProduceVideo!=="ALLOWED"&&(u=!1);const p=new qt(t,e,i,r,s);return r.viewType===_i.Chat||(await p.init({audio:d,video:u}),p.setupEvents()),p}async updatePermission(){var t,e;if(Ue.getName()==="firefox")return;const i="microphone",r="camera",s=await((t=navigator==null?void 0:navigator.permissions)==null?void 0:t.query({name:i})),n=await((e=navigator==null?void 0:navigator.permissions)==null?void 0:e.query({name:r})),a=(c,d)=>{this.mediaPermissions[c]=d;const u={message:this.mediaPermissions[c],kind:c};d==="DENIED"?x.emit(T.MEDIA_PERMISSION_ERROR,u):x.emit(T.MEDIA_PERMISSION_UPDATE,u)},o=(c,d)=>{switch(d){case"granted":a(c,"ACCEPTED");break;case"denied":a(c,"DENIED");break}this.localMediaHandler.repopulateAvailableDevices()};s&&(s.onchange=()=>o("audio",s.state)),n&&(n.onchange=()=>o("video",n.state))}setupEvents(){x.on(T.ROOM_NODE_CONNECTED,async({wasDisconnected:t})=>{t&&await this.resetSelf()}),x.on(T.RESET_PRODUCER_STATE,async()=>{if(this.roomJoined&&h(this,Fe,Be)instanceof we){if(this.localMediaHandler.videoEnabled&&await h(this,Fe,Be).shareWebcam(this.localMediaHandler.videoTrack),this.localMediaHandler.audioEnabled)try{await h(this,Fe,Be).shareMic(this.localMediaHandler.audioTrack)}catch{this.localMediaHandler.disableAudio()}this.localMediaHandler.screenShareEnabled&&await h(this,Fe,Be).shareScreen({video:this.localMediaHandler.screenShareTracks.video,audio:this.localMediaHandler.screenShareTracks.audio})}}),this.localMediaHandler.on("AUDIO_TRACK_CHANGE",async()=>{if(x.emit(T.AUDIO_TRACK_CHANGED),S.info("DyteSelf::setupEvents::AUDIO_TRACK_CHANGE",{...nc(this)}),this.roomJoined&&this.audioEnabled)try{await h(this,Fe,Be).shareMic(this.audioTrack)}catch(t){S.error("DyteSelf::setupEvents::Error while sharing mic",{error:t}),this.localMediaHandler.disableAudio()}this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}),this.localMediaHandler.on("VIDEO_TRACK_CHANGE",async()=>{if(x.emit(T.VIDEO_TRACK_CHANGED),S.info("DyteSelf::setupEvents::VIDEO_TRACK_CHANGE",{...nc(this)}),this.videoEnabled&&this.roomJoined)try{await h(this,Fe,Be).shareWebcam(this.videoTrack)}catch(t){S.error("DyteSelf::setupEvents::failed shareWebcam",{error:t}),this.videoEnabled&&await this.localMediaHandler.disableVideo()}this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}),this.localMediaHandler.on("DEVICE_CHANGE",async({device:t})=>{this.emit("deviceUpdate",{device:t})}),this.localMediaHandler.on("DEVICE_LIST_UPDATED",t=>{this.emit("deviceListUpdate",t)}),this.localMediaHandler.on("SCREENSHARE_TRACK_CHANGE",async()=>{if(x.emit(T.SCREENSHARE_TRACK_CHANGED),!this.roomJoined){S.error("DyteSelf.SCREENSHARE_TRACK_CHANGE.LocalMediaInitialized_WithoutRoomNode");return}if(this.screenShareEnabled)try{await h(this,Fe,Be).shareScreen(this.screenShareTracks)}catch(t){S.error("DyteSelf::setupEvents::Error while sharing screen",{error:t}),this.screenShareEnabled&&await this.localMediaHandler.disableScreenShare()}S.info("DyteSelf::setupEvents::SCREENSHARE_TRACK_CHANGE",{...nc(this)}),this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks})}),this.localMediaHandler.on("SCREENSHARE_ENDED",async()=>{await this.disableScreenShare(),S.info("DyteSelf::setupEvents::SCREENSHARE_ENDED",{...nc(this)})}),this.localMediaHandler.on("AUDIO_TRACK_SILENT",()=>{this.emit("audioTrackSilent"),X.mediaTrackMuted("AUDIO")}),this.localMediaHandler.on("FORCE_MUTE_AUDIO",()=>{this.disableAudio()}),this.localMediaHandler.on("FORCE_MUTE_VIDEO",async()=>{this.roomJoined&&await h(this,Fe,Be).pauseWebcam(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),X.videoOff()})}get mediaPermissions(){return this.localMediaHandler.permissions}get permissions(){return h(this,Sn)}get suggestedTheme(){return h(this,ga)}get config(){return h(this,ga)}get roomJoined(){var t;return((t=h(this,Fe,Be))==null?void 0:t.roomJoined)===!0}setName(t){if(!t)throw new A("Name cannot be empty.");this.name=t}async setupTracks(t={}){var e,i;return t.forceReset&&(h(this,Fe,Be).stopAllProducers(),this.localMediaHandler.removeAllTracks()),this.localMediaHandler.setupStreams({video:(e=t.video)!=null?e:!0,audio:(i=t.audio)!=null?i:!0})}async resetSelf(){var t,e,i,r,s,n,a,o,c,d;if(X.callEnded(),(i=(e=(t=h(this,Fe,Be))==null?void 0:t.sfuHandler)==null?void 0:e.cleanupConsumers)==null||i.call(e),await((n=(s=(r=h(this,Fe,Be))==null?void 0:r.sfuHandler)==null?void 0:s.setupTransports)==null?void 0:n.call(s)),await((a=h(this,Fe,Be))==null?void 0:a.joinRoom(this.name,!this.localMediaHandler.audioEnabled,h(this,Fe,Be).roomUUID,h(this,Fe,Be).meetingTitle,{audio:this.localMediaHandler.audioEnabled,video:this.localMediaHandler.videoEnabled,screen:this.localMediaHandler.screenShareEnabled})),this.localMediaHandler.videoEnabled&&await((o=h(this,Fe,Be))==null?void 0:o.shareWebcam(this.localMediaHandler.videoTrack)),this.localMediaHandler.audioEnabled)try{await((c=h(this,Fe,Be))==null?void 0:c.shareMic(this.localMediaHandler.audioTrack))}catch{this.localMediaHandler.disableAudio()}this.localMediaHandler.screenShareEnabled&&await((d=h(this,Fe,Be))==null?void 0:d.shareScreen({video:this.localMediaHandler.screenShareTracks.video,audio:this.localMediaHandler.screenShareTracks.audio}))}async destructMediaHandler(){return this.localMediaHandler.destruct()}async removeDocumentEventListeners(){return this.localMediaHandler.removeDocumentEventListeners()}async enableAudio(){if(!(this.permissions.canProduceAudio===No.notAllowed||h(this,ga).viewType==="WEBINAR"&&h(this,Sn).canProduceAudio===No.canRequest&&(this.webinarStageStatus==="OFF_STAGE"||this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE")||this.audioEnabled)){if(await this.localMediaHandler.enableAudio(),this.roomJoined){if(this.audioTrack)try{await h(this,Fe,Be).shareMic(this.audioTrack)}catch(t){S.error("DyteSelf::enableAudio::Error while sharing mic",{error:t}),this.localMediaHandler.disableAudio()}if(!this.audioEnabled)return;h(this,Fe,Be).unmuteSelf()}if(this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}),X.audioOn(),ee.hasFeature(re.TROUBLESHOOTING))try{Zs.setTrack(this.rawAudioTrack)}catch(t){S.error("Troubleshooter::micTest::Error while setting track",{error:t})}}}async enableVideo(){var t;if(!(h(this,Sn).canProduceVideo===No.notAllowed||h(this,ga).viewType==="WEBINAR"&&h(this,Sn).canProduceVideo===No.canRequest&&(this.webinarStageStatus==="OFF_STAGE"||this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE")||this.videoEnabled)){if(await this.localMediaHandler.enableVideo(),this.roomJoined)try{await h(this,Fe,Be).shareWebcam(this.videoTrack)}catch(e){S.error("DyteSelf::enableVideo::Error while sharing video",{error:e}),this.videoEnabled&&await this.localMediaHandler.disableVideo()}if(this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),S.info("DyteSelf.enableVideo",{...nc(this)}),X.videoOn(),ee.hasFeature(re.TROUBLESHOOTING))try{Tr.setTrack((t=this.videoTrack)==null?void 0:t.clone())}catch(e){S.error("Troubleshooter::camTest::Error while setting track",{error:e})}}}async enableScreenShare(){var t;if(!this.roomJoined)throw new A("Can`t enable screenshare without joining room");if(h(this,Sn).canProduceScreenshare===No.notAllowed||h(this,ga).viewType==="WEBINAR"&&h(this,Sn).canProduceScreenshare===No.canRequest&&(this.webinarStageStatus==="OFF_STAGE"||this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE")||this.screenShareEnabled)return;if(await this.localMediaHandler.enableScreenShare(),this.screenShareTracks.audio||this.screenShareTracks.video)try{await h(this,Fe,Be).shareScreen(this.screenShareTracks)}catch(i){S.error("DyteSelf::enableScreenShare::Error while sharing screen",{error:i}),this.screenShareEnabled&&await this.localMediaHandler.disableScreenShare()}this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks});const e=ee.hasFeature(re.TROUBLESHOOTING);if(e&&this.screenShareTracks.audio)try{_c.setTrack(this.screenShareTracks.audio)}catch(i){S.error("Troubleshooter::screenshareMicTest::Error while setting track",{error:i})}if(e&&this.screenShareTracks.video)try{io.setTrack((t=this.screenShareTracks.video)==null?void 0:t.clone())}catch(i){S.error("Troubleshooter::screenshareCamTest::Error while setting track",{error:i})}}async disableAudio(){this.audioEnabled&&(this.localMediaHandler.disableAudio(),this.roomJoined&&h(this,Fe,Be).muteSelf(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}),X.audioOff())}async disableVideo(){!this.videoEnabled||(await this.localMediaHandler.disableVideo(),this.roomJoined&&await h(this,Fe,Be).pauseWebcam(),this.mediaPermissions.video!=="ACCEPTED")||(this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),X.videoOff(),ee.hasFeature(re.TROUBLESHOOTING)&&!Tr.preview&&Tr.cleanup())}async disableScreenShare(){this.screenShareEnabled&&(await this.localMediaHandler.disableScreenShare(),this.roomJoined&&await h(this,Fe,Be).disableScreenShare(),this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks}),ee.hasFeature(re.TROUBLESHOOTING)&&(io.cleanup(),_c.cleanup()))}getAllDevices(){return this.localMediaHandler.getAllDevices()}setIsPinned(t,e=!0){I(this,vu,t);const i=t?"pinned":"unpinned";e&&this.emit(i,this)}get isPinned(){return h(this,vu)}get webinarStageStatus(){return h(this,yu)}async pin(){if(!this.roomJoined)throw new A("Can`t pin participants without joining room");return h(this,Fe,Be).pinPeer(this.id)}async unpin(){if(!this.roomJoined)throw new A("Can`t unpin participants without joining room");return h(this,Fe,Be).pinPeer(null)}async setDevice(t){const e={added:[t],removed:[]};if("onDeviceChange"in this.localMediaHandler){await this.localMediaHandler.onDeviceChange(e,!0);return}switch(t.kind){case"audioinput":try{await this.localMediaHandler.setAudioDevice(t)}catch{this.roomJoined&&await h(this,Fe,Be).muteSelf(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}break;case"audiooutput":await this.localMediaHandler.setSpeakerDevice(t);break;case"videoinput":try{await this.localMediaHandler.setVideoDevice(t)}catch{this.roomJoined&&await h(this,Fe,Be).pauseWebcam(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}break}this.emit("deviceUpdate",{device:t})}cleanUpTracks(){var t,e,i,r;(t=this.audioTrack)==null||t.stop(),(e=this.rawAudioTrack)==null||e.stop(),(i=this.videoTrack)==null||i.stop(),(r=this.rawVideoTrack)==null||r.stop()}async requestToJoinStage(){if(!this.roomJoined)throw new A("Can`t request to join stage without joining room");if(h(this,od)!==_i.Webinar)throw new A("Not allowed to go on stage on non webinar meeting");if(!this.permissions.requestProduce)throw S.error("DyteSelf::requestGoToStage::permission_denied"),new A("User does not have permission to go on stage");await h(this,Fe,Be).requestToJoinStage(OS.PRESENT),this.setWebinarStageStatus("REQUESTED_TO_JOIN_STAGE")}async withdrawRequestToJoinStage(){if(!this.roomJoined)throw new A("Can`t request to join stage without joining room");if(h(this,od)!==_i.Webinar)throw new A("Not allowed to go on stage on non webinar meeting");this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"&&(await h(this,Fe,Be).withdrawRequestToJoinStage(),this.setWebinarStageStatus("OFF_STAGE"))}async leaveStage(){if(!this.roomJoined)throw new A("Can`t leave stage without joining room");if(h(this,od)!==_i.Webinar)throw new A("Not allowed to leave stage on non webinar meeting");await this.disableScreenShare(),await this.disableVideo(),await this.disableAudio(),this.localMediaHandler.destruct(),await h(this,Fe,Be).stopPresenting(),this.setWebinarStageStatus("OFF_STAGE")}async joinStage(){if(!this.roomJoined)throw new A("Can`t join stage without joining room");if(!this.permissions.canPresent&&this.webinarStageStatus!=="ACCEPTED_TO_JOIN_STAGE")throw S.error("DyteSelf::joinStage::permission_denied"),new A("User does not have permission to join stage");await h(this,Fe,Be).startPresenting()}setWebinarStageStatus(t){if(t==="REQUESTED_TO_JOIN_STAGE"&&h(this,yu)==="ACCEPTED_TO_JOIN_STAGE"){this.emit("joinStageRequestAccepted");return}switch(I(this,yu,t),t){case"REQUESTED_TO_JOIN_STAGE":this.emit("peerRequestToJoinStage");break;case"OFF_STAGE":this.emit("stageLeft");break}}async disablePreview(){return this}},od=new WeakMap,ga=new WeakMap,Sn=new WeakMap,vu=new WeakMap,yu=new WeakMap,Fe=new WeakSet,Be=function(){return si()},Ix);ki([E.trace("DyteSelf.setupEvents")],qt.prototype,"setupEvents",1);ki([E.trace("DyteSelf.setupTracks")],qt.prototype,"setupTracks",1);ki([E.trace("DyteSelf.resetSelf")],qt.prototype,"resetSelf",1);ki([E.trace("DyteSelf.destructMediaHandler")],qt.prototype,"destructMediaHandler",1);ki([E.trace("DyteSelf.removeDocumentEventListeners")],qt.prototype,"removeDocumentEventListeners",1);ki([E.trace("DyteSelf.enableAudio")],qt.prototype,"enableAudio",1);ki([E.trace("DyteSelf.enableVideo")],qt.prototype,"enableVideo",1);ki([E.trace("DyteSelf.enableScreenShare")],qt.prototype,"enableScreenShare",1);ki([E.trace("DyteSelf.disableAudio")],qt.prototype,"disableAudio",1);ki([E.trace("DyteSelf.disableVideo")],qt.prototype,"disableVideo",1);ki([E.trace("DyteSelf.disableScreenShare")],qt.prototype,"disableScreenShare",1);ki([E.trace("DyteSelf.setDevice")],qt.prototype,"setDevice",1);ki([E.trace("DyteSelf.requestToJoinStage")],qt.prototype,"requestToJoinStage",1);ki([E.trace("DyteSelf.withdrawRequestToJoinStage")],qt.prototype,"withdrawRequestToJoinStage",1);ki([E.trace("DyteSelf.leaveStage")],qt.prototype,"leaveStage",1);ki([E.trace("DyteSelf.joinStage")],qt.prototype,"joinStage",1);ki([E.trace("DyteSelf.deprecated.disablePreview")],qt.prototype,"disablePreview",1);qt=ki([qi(t=>{throw new A(t.message,"1100")})],qt);function ire(t){if(!Ee.isV2AuthToken)return!1;const e=t;return[e.canProduceAudio,e.canProduceScreenshare,e.canProduceVideo].includes(bi.Allowed)}function cM(t){return!(t.viewType==="LIVESTREAM"||t.viewType==="CHAT")}let cd;class rh{constructor(e){y(this,"socket"),this.socket=e,this.handleSocketEvents()}static create(e){return cd||(cd=new rh(e)),cd}static cleanup(){var e;try{(e=cd==null?void 0:cd.socket)==null||e.disconnect()}catch{S.error("roomSocketHandler::cleanup")}cd=void 0}set onReconnect(e){this.socket.onStateEvent("reconnected",e)}async joinRoom(e,i,r,s){const n={capabilities:[],peer:{displayName:e,peerId:i,userId:r,waitlisted:!1},roomUuid:s},a=Eg.fromBinary((await this.socket.sendMessagePromise(me.joinRoom,kX.toBinary(n))).payload);await x.emitAsync(T.SOCKET_SERVICE_ROOM_JOINED,a);try{const{room:o}=await this.getRoomState();x.emit(T.ROOM_STATE,o)}catch(o){S.error("RoomSocketHandler.joinRoom.failedToGetRoomState",{error:o})}}async getAllAddedParticipants(){try{return cee.fromBinary((await this.socket.sendMessagePromise(me.getAllAddedParticipants)).payload).participants.map(({id:e,...i})=>({...i,userId:e}))}catch{return[]}}async getRoomPeers(e,i,r){let s;try{const n={seachQuery:e,limit:i,offset:r},a=await this.socket.sendMessagePromise(me.getRoomPeersInfo,mX.toBinary(n));s=vX.fromBinary(a.payload)}catch(n){S.error("getRoomPeers::binary_decode_error",{error:n})}return s}async getRoomState(){let e=cx.create();try{const i=await this.socket.sendMessagePromise(me.getRoomInfo);e=cx.fromBinary(i.payload)}catch(i){S.error("getRoomState::binary_decode_error",{error:i})}return e}async broadcastMessage(e,i){const r={type:e,payload:new TextEncoder().encode(JSON.stringify(i)),timestamp:Date.now(),peerIds:[]};return this.socket.sendMessagePromise(me.broadcastMessage,ux.toBinary(r))}leaveRoom(){this.socket.sendMessage(me.leaveRoom,xX.toBinary({}))}async kick(e){const i={peerIds:[e]};this.socket.sendMessage(me.kick,pee.toBinary(i))}async kickAll(){this.socket.sendMessage(me.kickAll)}handleSocketEvents(){this.socket.on(me.broadcastMessage,({payload:e})=>{try{const i=ux.fromBinary(e);x.emit(T.ROOM_MESSAGE,{payload:JSON.parse(new TextDecoder().decode(i.payload)),type:i.type,timestamp:i.timestamp})}catch(i){S.error("failed to decode broadcast message:",i)}})}on(e,i){let r,s;switch(e){case me.joinRoom:case me.leaveRoom:case me.kick:case me.kickAll:{r=Eg.fromBinary.bind(Eg),s=Eg.create();break}}this.socket.on(e,({payload:n})=>{let a=s;try{a=r(n)}catch(o){S.error("roomSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}var rre=Object.defineProperty,sre=Object.getOwnPropertyDescriptor,Oh=(t,e,i,r)=>{for(var s=r>1?void 0:r?sre(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&rre(e,i,s),s},bu,Gs,Yt,li,Ox;const dM=(Ox=class{constructor(t,e,i,r){R(this,Yt),y(this,"self"),y(this,"authToken"),y(this,"peerId"),R(this,bu,void 0),y(this,"roomNodeSetupInProgress",!1),y(this,"viewType"),R(this,Gs,void 0);var s,n,a,o;I(this,bu,t),I(this,Gs,i),this.authToken=(n=(s=si())==null?void 0:s.authToken)!=null?n:t.authToken,this.peerId=(o=(a=si())==null?void 0:a.peerId)!=null?o:t.peerId,this.self=e,this.viewType=r,e.config.viewType!==_i.Chat&&this.setupEvents()}get roomJoined(){var t;return((t=h(this,Yt,li))==null?void 0:t.roomJoined)===!0}static async init(t,e,i,r,s,n){var a,o;const c=gi(),{isV2AuthToken:d}=Ee,u=await qt.__init__((o=(a=si())==null?void 0:a.peerId)!=null?o:t.peerId,Ee.isV2AuthToken?i.participant:i,r,s,n),p=d?i.participant.organizationId:i.organizationId;if(E.meetingMetadata.organizationId=p,ee.hasFeature(re.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"){ee.getValue(re.CALLSTATS_INGESTION_LAYER);let g="dev";et.apiBase.indexOf("cluster.dyte")>-1||et.apiBase.indexOf("api.dyte")>-1?g="production":et.apiBase.indexOf("staging.dyte")>-1&&(g="staging"),setTimeout(async()=>{var m,f;X.initialize({peerId:(f=(m=si())==null?void 0:m.peerId)!=null?f:t.peerId,engineName:Ue.getDeviceInfo().engineName,env:g,iceServers:await c.getICEServers(),apiBase:et.apiBase,flags:ee.getAllFlags(),logger:S})})}return new dM(t,u,e,s.viewType)}async shareMediaTracks(){if(this.self.audioTrack)try{await h(this,Yt,li).shareMic(this.self.audioTrack)}catch{this.self.disableAudio()}if(this.self.videoTrack)try{await h(this,Yt,li).shareWebcam(this.self.videoTrack)}catch{this.self.disableVideo()}}async kickHandler(t){let e="kicked";(t==null?void 0:t.kickType)==="kickAll"&&(e="ended"),this.leaveRoom(e)}setupEvents(){x.on(T.DISABLE_AUDIO,async()=>{this.self.audioEnabled&&(await this.self.disableAudio(),X.audioOff())}),x.on(T.DISABLE_VIDEO,async()=>{this.self.videoEnabled&&(await this.self.disableVideo(),X.videoOff())}),x.on(T.MUTE_ALL,async()=>{this.self.audioEnabled&&(await this.self.disableAudio(),X.audioOff())}),x.on(T.MUTE_ALL_VIDEO,async()=>{this.self.videoEnabled&&(await this.self.disableVideo(),X.videoOff())}),x.on(T.WAITLISTED,()=>{this.self.waitlistStatus="waiting",this.self.roomState="waitlisted",this.self.emit("waitlisted")}),x.on(T.WAITLIST_ACCEPTED,async()=>{if(this.self.waitlistStatus==="accepted"){S.warn("SelfController.WAITLIST_ACCEPTED.UserAlreadyAccepted");return}this.self.waitlistStatus="accepted",this.joinRoom()}),x.on(T.WAITLIST_REJECTED,async()=>{if(this.self.waitlistStatus==="rejected"){S.warn("SelfController.WAITLIST_REJECTED.UserAlreadyRejected");return}this.self.waitlistStatus="rejected",this.leaveRoom("rejected")}),x.on(T.KICKED,this.kickHandler.bind(this)),h(this,Gs).on(me.kick,()=>{this.kickHandler({kickType:"kick"})}),h(this,Gs).on(me.kickAll,()=>{this.kickHandler({kickType:"kickAll"})}),x.on(T.SELF_ROOM_JOINED,()=>{this.self.config.viewType==="WEBINAR"&&this.self.permissions.canPresent&&this.self.joinStage(),this.self.roomState="joined",this.self.emit("roomJoined")}),x.on(T.SOCKET_SERVICE_ROOM_JOINED,()=>{this.self.emit("socketServiceRoomJoined")}),x.on(T.MEDIA_PERMISSION_UPDATE,async t=>{if(t.message==="ACCEPTED"){const e=this.self.getCurrentDevices(),i=await this.self.getAudioDevices(),r=await this.self.getVideoDevices(),s=await this.self.getSpeakerDevices();switch(t==null?void 0:t.kind){case"audio":!e.audio&&i.length>0&&this.self.setDevice(i[0]),!e.speaker&&s.length>0&&this.self.setDevice(s[0]);break;case"video":!e.video&&r.length>0&&this.self.setDevice(r[0]);break}}this.self.emit("mediaPermissionUpdate",t)}),x.on(T.MEDIA_PERMISSION_ERROR,async t=>{const{kind:e,message:i}=t;e==="audio"?(X.mediaPermission("AUDIO",J0(i)),this.self.disableAudio()):e==="video"?(X.mediaPermission("VIDEO",J0(i)),this.self.disableVideo()):e==="screenshare"&&(X.mediaPermission("VIDEO",J0(i)),this.self.disableScreenShare()),S.error("SelfController::mediaPermissionError",{error:{message:t.message},constraints:t.constraints,mediaPermissionsErrors:{kind:e,message:i}}),this.self.emit("mediaPermissionError",t),this.self.emit("mediaPermissionUpdate",{message:i,kind:e})}),x.on(T.REQUEST_TO_JOIN_STAGE_ACCEPTED,()=>{this.self.setWebinarStageStatus(Bt.ACCEPTED_TO_JOIN_STAGE),this.self.emit("joinStageRequestAccepted")}),x.on(T.REQUEST_TO_JOIN_STAGE_REJECTED,()=>{this.self.setWebinarStageStatus(Bt.OFF_STAGE),this.self.emit("joinStageRequestRejected")}),x.on(T.REMOVED_FROM_STAGE,async()=>{this.self.setWebinarStageStatus(Bt.OFF_STAGE),await this.self.disableScreenShare(),await this.self.disableVideo(),await this.self.disableAudio(),this.self.destructMediaHandler(),this.self.emit("removedFromStage")}),x.on(T.STARTED_PRESENTING,()=>{this.self.setWebinarStageStatus(Bt.ON_STAGE),this.self.emit("stageJoined")}),x.on(T.STOPPED_PRESENTING,()=>{this.self.setWebinarStageStatus(Bt.OFF_STAGE),this.self.emit("stageLeft")}),x.on(T.PRODUCER_SCORE_UPDATE,({score:t,kind:e,appData:i})=>{var r;const s=e==="video"&&((r=i==null?void 0:i.screenShare)!=null?r:!1);this.self.emit("mediaScoreUpdate",{kind:e,isScreenshare:s,score:t})}),x.on(T.PRODUCER_STATUS_UPDATE,({status:t})=>{this.self.emit("mediaChannelUpdate",{status:t})}),x.onAsync(T.JOIN_MEDIA_ROOM,this.setupRoomNode.bind(this)),x.onAsync(T.LEAVE_MEDIA_ROOM,this.leaveMediaRoom.bind(this))}async setupRoomNode(){var t;if(this.roomNodeSetupInProgress){S.warn("SelfController.roomNodeSetupInProgress");return}if((t=h(this,Yt,li))!=null&&t.roomJoined){S.warn("SelfController.roomNodeAlreadySetup");return}this.roomNodeSetupInProgress=!0;const e=Ee.roomNodeOptions;await QO({...e,roomName:e.roomName,peerId:e.peerId,viewType:this.viewType}),x.once(T.ROOM_NODE_CONNECTED,async()=>{var i,r;let s="";if(h(this,Yt,li)instanceof Je){await h(this,Yt,li).setupTransports();const n=await h(this,Yt,li).getRoomState();({roomUUID:s}=(r=(i=n==null?void 0:n.payload)==null?void 0:i.roomState)!=null?r:{}),gi().setRoomUUID(s)}await this.joinMediaRoom(s),this.roomNodeSetupInProgress=!1})}async joinRoom(){var t,e;try{const i=gi();let r="";if(h(this,Yt,li)instanceof Je){const s=await h(this,Yt,li).getRoomState();({roomUUID:r}=(e=(t=s==null?void 0:s.payload)==null?void 0:t.roomState)!=null?e:{}),i.setRoomUUID(r)}else i.setRoomUUID(Ee.meetingId);IO(this.self.config.viewType,h(this,bu).capabilities)&&(await h(this,Gs).joinRoom(this.self.name,this.self.id,this.self.userId,r),h(this,Gs).socket.flush(),h(this,Gs).onReconnect=async()=>{await h(this,Gs).joinRoom(this.self.name,this.self.id,this.self.userId,r),h(this,Gs).socket.flush()}),cM(this.self.config)&&await this.joinMediaRoom(r)}catch(i){throw S.error("Error in joinRoom",{error:i}),i}}async leaveRoom(t="left"){var e;const{roomJoined:i}=this;await this.leaveMediaRoom();try{(e=h(this,bu))==null||e.disconnect()}catch{S.error("SelfController::leaveRoom::socketDisconnect")}this.self.roomState=t,ZO(),rh.cleanup(),!(this.self.config.viewType!=="LIVESTREAM"&&!i)&&this.self.emit("roomLeft",{state:t})}async joinMediaRoom(t){var e,i,r,s;if((e=h(this,Yt,li))!=null&&e.isDisconnected&&h(this,Yt,li)instanceof Je){(i=h(this,Yt,li))==null||i.reconnect();return}const{roomJoined:n}=(s=await((r=h(this,Yt,li))==null?void 0:r.joinRoom(this.self.name,!this.self.audioEnabled,t,void 0,{audio:this.self.audioEnabled,video:this.self.videoEnabled,screen:this.self.screenShareEnabled})))!=null?s:{};h(this,Yt,li)instanceof we&&(h(this,Yt,li).onSocketReconnection=this.joinMediaRoom.bind(this,t)),n&&await this.shareMediaTracks()}async leaveMediaRoom(){await this.cleanupSelf(),h(this,Yt,li)&&this.roomJoined&&(await h(this,Yt,li).leaveRoom(),h(this,Yt,li).roomJoined=!1)}async cleanupSelf(){await this.self.disableAudio(),await this.self.disableVideo(),await this.self.disableScreenShare(),this.self.cleanUpTracks(),this.self.destructMediaHandler(),this.self.removeDocumentEventListeners()}},bu=new WeakMap,Gs=new WeakMap,Yt=new WeakSet,li=function(){return si()},Ox);let Gl=dM;Oh([E.trace("SelfController.setupEvents")],Gl.prototype,"setupEvents",1);Oh([E.trace("SelfController.joinRoom")],Gl.prototype,"joinRoom",1);Oh([E.trace("SelfController.leaveRoom")],Gl.prototype,"leaveRoom",1);Oh([E.trace("SelfController.joinMediaRoom")],Gl.prototype,"joinMediaRoom",1);Oh([E.trace("SelfController.leaveMediaRoom")],Gl.prototype,"leaveMediaRoom",1);var nre=Object.defineProperty,are=Object.getOwnPropertyDescriptor,fo=(t,e,i,r)=>{for(var s=r>1?void 0:r?are(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&nre(e,i,s),s},wu,ds,Ws,dd,Mx;let Xr=(Mx=class extends jt{constructor(t,e){super(),R(this,ds),y(this,"id"),y(this,"userId"),y(this,"name"),y(this,"picture"),y(this,"isHost"),y(this,"clientSpecificId"),y(this,"flags"),y(this,"device"),y(this,"videoTrack"),y(this,"audioTrack"),y(this,"screenShareTracks"),y(this,"videoEnabled"),y(this,"audioEnabled"),y(this,"screenShareEnabled"),y(this,"producers"),R(this,wu,void 0),y(this,"supportsRemoteControl",!1),y(this,"webinarStageStatus",Bt.OFF_STAGE),y(this,"presetName"),R(this,dd,void 0);const{id:i,userId:r,displayName:s,device:n,picture:a,isHost:o,flags:c,clientSpecificId:d,stageStatus:u,customParticipantId:p,audioMuted:g,audioTrack:m,videoEnabled:f=!1,videoTrack:b,producers:w,metadata:v}=t;this.id=i,this.userId=r,this.name=s,this.device=n,this.picture=a,this.isHost=o,this.flags=c,this.webinarStageStatus=u,this.clientSpecificId=p??d,this.audioEnabled=!g,this.audioTrack=m,this.videoEnabled=f,this.videoTrack=b,this.screenShareTracks={audio:void 0,video:void 0},this.producers=w??[],this.presetName=v==null?void 0:v.preset_name,I(this,wu,!1),I(this,dd,e)}get roomJoined(){var t;return((t=h(this,ds,Ws))==null?void 0:t.roomJoined)===!0}setVideoEnabled(t,e=!0){this.videoEnabled=t,e&&(S.info("DyteParticipant::setVideoEnabled::videoUpdate",{...nc(this)}),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}))}setAudioEnabled(t,e=!0){this.audioEnabled=t,e&&(S.info("DyteParticipant::setAudioEnabled::audioUpdate",{...nc(this)}),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}))}setScreenShareEnabled(t,e=!0){this.screenShareEnabled=t,e&&this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks})}async pin(){if(!this.roomJoined)throw new A("Can`t pin participant without joining room");return h(this,ds,Ws).pinPeer(this.id)}async unpin(){if(!this.roomJoined)throw new A("Can`t unpin participant without joining room");return h(this,ds,Ws).pinPeer(null)}setIsPinned(t,e=!0){I(this,wu,t);const i=t?"pinned":"unpinned";e&&this.emit(i,this)}async disableAudio(){const t=this.id;if(S.info("DyteParticipant::disable_audio",{dyteParticipant:{id:t}}),!this.roomJoined)throw new A("Can`t disable participant audio without joining room");if(h(this,dd).permissions.canDisableParticipantAudio)return h(this,ds,Ws).disableAudio(t);throw S.error("DyteParticipant::unauthorized_disable_audio",{dyteParticipant:{id:t}}),new A("Unauthorized: User does not have permission to disable participant audio.")}async kick(){const t=this.id;if(S.info("DyteParticipant::kick",{dyteParticipant:{id:t}}),!this.roomJoined)throw new A("Can`t kick participant without joining room");if(h(this,dd).permissions.kickParticipant)return h(this,ds,Ws).kick(t);throw S.error("DyteParticipant::unauthorized_kick",{dyteParticipant:{id:t}}),new A("Unauthorized: User does not have permission to kick participants.")}async disableVideo(){const t=this.id;if(S.info("DyteParticipant::disable_video",{dyteParticipant:{id:t}}),!this.roomJoined)throw new A("Can`t disable participant video without joining room");if(h(this,dd).permissions.canDisableParticipantVideo)return h(this,ds,Ws).disableVideo(t);throw S.error("DyteParticipant::unauthorized_disable_video",{dyteParticipant:{id:t}}),new A("Unauthorized: User does not have permission to disable participant video.")}async acceptJoinStageRequest(){if(!this.roomJoined)throw new A("Can`t acceptJoinStageRequest for participant without joining room");h(this,ds,Ws).acceptAllRequestToJoinStage([{id:this.id,requestToJoinType:OS.PRESENT}])}async rejectRequestToJoinStage(){if(!this.roomJoined)throw new A("Can`t rejectRequestToJoinStage for participant without joining room");h(this,ds,Ws).rejectRequestToJoinStage(this.id)}async removeFromStage(){if(!this.roomJoined)throw new A("Can`t removeFromStage participant without joining room");h(this,ds,Ws).removePeerFromStage(this.id,IS.REQUESTED_BY_MODERATOR)}setWebinarStageStatus(t){this.webinarStageStatus=t;let e;t===Bt.OFF_STAGE&&(e="peerStoppedPresenting"),t===Bt.ON_STAGE&&(e="peerStartedPresenting"),t===Bt.ACCEPTED_TO_JOIN_STAGE&&(e="peerAcceptedToJoinStage"),t===Bt.REQUESTED_TO_JOIN_STAGE&&(e="peerRequestToJoinStage"),e&&this.emit(e,this)}get isPinned(){return h(this,wu)}},wu=new WeakMap,ds=new WeakSet,Ws=function(){return si()},dd=new WeakMap,Mx);fo([E.trace("DyteParticipant.disableAudio")],Xr.prototype,"disableAudio",1);fo([E.trace("DyteParticipant.kick")],Xr.prototype,"kick",1);fo([E.trace("DyteParticipant.disableVideo")],Xr.prototype,"disableVideo",1);fo([E.trace("DyteParticipant.acceptJoinStageRequest")],Xr.prototype,"acceptJoinStageRequest",1);fo([E.trace("DyteParticipant.rejectRequestToJoinStage")],Xr.prototype,"rejectRequestToJoinStage",1);fo([E.trace("DyteParticipant.removeFromStage")],Xr.prototype,"removeFromStage",1);fo([E.trace("DyteParticipant.setWebinarStageStatus")],Xr.prototype,"setWebinarStageStatus",1);Xr=fo([qi(t=>{throw new A(t.message,"1200")})],Xr);var Zt,Ed;class VS extends Map{constructor(e){const{onAddEvent:i="added",onDeleteEvent:r="deleted",onClearEvent:s="cleared"}=e??{};super(),R(this,Zt,void 0),R(this,Ed,void 0),y(this,"onAddEvent"),y(this,"onDeleteEvent"),y(this,"onClearEvent"),I(this,Zt,new jt),this.onAddEvent=i,this.onDeleteEvent=r,this.onClearEvent=s,I(this,Ed,new Map)}emit(e,...i){return h(this,Zt).emit(e,...i)}on(e,i){return h(this,Zt).on(e,i)}addListener(e,i){return h(this,Zt).addListener(e,i)}off(e,i){return h(this,Zt).off(e,i)}once(e,i){return h(this,Zt).once(e,i)}prependListener(e,i){return h(this,Zt).prependListener(e,i)}prependOnceListener(e,i){return h(this,Zt).prependOnceListener(e,i)}removeListener(e,i){return h(this,Zt).removeListener(e,i)}removeAllListeners(e){return h(this,Zt).removeAllListeners(e)}listeners(e){return h(this,Zt).listeners(e)}listenerCount(e){return h(this,Zt).listenerCount(e)}getMaxListeners(){return h(this,Zt).getMaxListeners()}setMaxListeners(e){return h(this,Zt).setMaxListeners(e)}eventNames(){return h(this,Zt).eventNames()}add(e,i=!0){return this.set(e.id,e,i)}set(e,i,r=!0){const s=super.set(e,i),n=(a,...o)=>{this.emit(a,i,...o)};return h(this,Ed).set(e,n),i.on("*",n),r&&h(this,Zt).emit(this.onAddEvent,i),s}delete(e,i=!0,r=!1){const s=this.get(e);if(!s)return!1;s.removeListener("*",h(this,Ed).get(e));const n=super.delete(e);return r&&s.removeAllListeners(),i&&h(this,Zt).emit(this.onDeleteEvent,s),n}clear(e=!0,i=!1){this.forEach(s=>{s.removeListener("*",h(this,Ed).get(s.id)),i&&s.removeAllListeners()});const r=super.clear();return e&&h(this,Zt).emit(this.onClearEvent),r}toArray(){return Array.from(this.values())}}Zt=new WeakMap,Ed=new WeakMap;class Pg extends VS{constructor(e){const{onAddEvent:i="participantJoined",onDeleteEvent:r="participantLeft",onClearEvent:s="participantsCleared"}=e??{};super({onAddEvent:i,onDeleteEvent:r,onClearEvent:s})}add(e,i=!0){return super.add(e,i)}clear(e=!0,i=!1){return super.clear(e,i)}delete(e,i=!0,r=!1){return super.delete(e,i,r)}}class ore{constructor(){y(this,"_orderedArray"),y(this,"_map"),this._map=new Map,this._orderedArray=[]}add(e,i){if(!this._map.has(e))return this._map.set(e,{peerId:e,priority:i}),this._orderedArray.splice(Math.max(i-1,0),0,e),this.index(e);const r=this.index(e);this.delete(e);const s=this.add(e,i);return r!==s?(S.info("DyteSelectedPeer::add()::new_position_for_active_speaker",{selectedPeer:{oldIndex:r,newIndex:s}}),s):-1}delete(e){if(this._map.has(e)){const i=this.index(e);this._map.delete(e),this._orderedArray.splice(i,1)}}index(e){return this._map.has(e)?this._orderedArray.indexOf(e):-1}[Symbol.iterator](){return this._orderedArray[Symbol.iterator]()}}class cre{constructor(){y(this,"_activeSpeakerPeers"),y(this,"_compulsoryPeers"),this._activeSpeakerPeers=new ore,this._compulsoryPeers=new Set}add(e,i){if(i<0)return this._compulsoryPeers.add(e),0;if(this.compulsoryPeers.includes(e)&&(i>0||i===246267631)){if(S.info("DyteSelectedPeer::removing_compulsory_peer",{selectedPeer:{peerId:e}}),this._removeFromCompulsoryPeer(e),i===246267631)return-1}else if(i===229490415)return this.delete(e),-1;return this._activeSpeakerPeers.add(e,i)}delete(e){S.info("DyteSelectedPeer::deleting_peer_from_selectedPeer",{selectedPeer:{peerId:e}}),this._removeFromCompulsoryPeer(e),this._activeSpeakerPeers.delete(e)}index(e){return this._activeSpeakerPeers.index(e)}get peers(){return[...new Set(this.compulsoryPeers.concat(this.activeSpeakerPeers))]}get compulsoryPeers(){return[...this._compulsoryPeers.values()]}get peerPriorities(){return[...this._activeSpeakerPeers].map((e,i)=>i)}get activeSpeakerPeers(){return[...this._activeSpeakerPeers]}_removeFromCompulsoryPeer(e){this._compulsoryPeers.delete(e)}}var Bo;class dre extends jt{constructor(){super(),R(this,Bo,void 0),I(this,Bo,new Map)}__set(e,i){return h(this,Bo).set(e,i)}__clear(){return h(this,Bo).clear()}get(e){return h(this,Bo).get(e)}toArray(){return Array.from(h(this,Bo).values())}}Bo=new WeakMap;var lre=Object.defineProperty,ure=Object.getOwnPropertyDescriptor,ns=(t,e,i,r)=>{for(var s=r>1?void 0:r?ure(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&lre(e,i,s),s},fi,xi,ma,xo,Dx;let vr=(Dx=class extends jt{constructor(t,e){super(),R(this,fi),y(this,"waitlisted"),y(this,"joined"),y(this,"active"),y(this,"pinned"),y(this,"all"),R(this,ma,void 0),R(this,xo,void 0),y(this,"viewMode"),y(this,"currentPage"),y(this,"lastActiveSpeaker"),y(this,"selectedPeers"),I(this,ma,t),I(this,xo,e),this.waitlisted=new Pg,this.joined=new Pg,this.active=new Pg,this.pinned=new Pg,this.all=new dre,this.selectedPeers=new cre,this.viewMode="ACTIVE_GRID",this.currentPage=0}get roomJoined(){var t;return((t=h(this,fi,xi))==null?void 0:t.roomJoined)===!0}get count(){return this.joined.size}get maxActiveParticipantsCount(){return h(this,fi,xi).maxPreferredStreams}get pageCount(){return this.viewMode==="PAGINATED"?Math.ceil(this.joined.size/this.maxActiveParticipantsCount):0}async acceptWaitingRoomRequest(t){if(!this.roomJoined)throw new A("Can`t accept waiting room request without joining room");return h(this,fi,xi).acceptWaitingRequest(t)}async rejectWaitingRoomRequest(t){if(!this.roomJoined)throw new A("Can`t reject waiting room request without joining room");await h(this,fi,xi).rejectWaitingRequest(t),this.waitlisted.delete(t)}async setViewMode(t){if(S.info("DyteParticipants::set_view_mode",{pageNavigation:{viewMode:t,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),!["ACTIVE_GRID","PAGINATED"].includes(t))throw S.error("DyteParticipants::setViewMode::invalid_view_mode",{pageNavigation:{viewMode:t,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new A(`Invalid view mode: ${t}. Try ACTIVE_GRID or PAGINATED.`);if(this.viewMode===t){S.info("DyteParticipants::setViewMode::view_mode_same_as_previous",{pageNavigation:{viewMode:t,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}});return}if(this.viewMode=t,t==="PAGINATED"){this.currentPage=1;let e=[];h(this,fi,xi)instanceof Je?{peerIds:e}=(await h(this,fi,xi).getPage(this.currentPage)).payload:e=this.getPeerIdsForCurrentPage(),x.emit(T.GET_PAGE,{peerIds:e})}else t==="ACTIVE_GRID"&&(this.currentPage=0,h(this,fi,xi)instanceof Je?h(this,fi,xi).getPage(this.currentPage):x.emit(T.REFRESH_GRID));this.emit("viewModeChanged",{viewMode:t,currentPage:this.currentPage,pageCount:this.pageCount})}getPeerIdsForCurrentPage(){S.info("DyteParticipants::getPeerIdsForCurrentPage()",{pageNavigation:{viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}});const{compulsoryPeers:t}=this.selectedPeers,e=t.filter(a=>this.joined.has(a)),i=[...this.pinned.keys()].filter(a=>!e.includes(a)),r=[...this.joined.keys()],s=Math.max((this.currentPage-1)*(this.maxActiveParticipantsCount-e.length-i.length)),n=this.currentPage*(this.maxActiveParticipantsCount-e.length-i.length);return e.concat(i,r.slice(s,n))}async setPage(t){if(S.info("DyteParticipants::set_page",{pageNavigation:{settingPage:t,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),this.viewMode!=="PAGINATED")return;if(!Number.isInteger(t))throw S.error("DyteParticipants::invalid_page_number",{pageNavigation:{settingPage:t,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new A(`Invalid page: ${t}. Page must be an integer.`);if(t<1||t>this.pageCount)throw S.error("DyteParticipants::invalid_page_number",{pageNavigation:{settingPage:t,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new A(`Invalid page: ${t}. Page must be greater than 0 and less than or equal to ${this.pageCount}.`);this.currentPage=t;let e=[];h(this,fi,xi)instanceof Je?{peerIds:e}=(await h(this,fi,xi).getPage(t)).payload:e=this.getPeerIdsForCurrentPage(),x.emit(T.GET_PAGE,{peerIds:e}),this.emit("pageChanged",{viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount})}async disableAllAudio(t){if(S.info("DyteParticipants::disable_all_audio",{actions:{disableAllAudio:{allowUnmute:t}}}),!this.roomJoined)throw new A("Can`t disable all audio without joining room");if(h(this,ma).permissions.canAllowParticipantAudio)return h(this,fi,xi).muteAll(t);throw S.error("DyteParticipants::unauthorized_disable_all_audio",{actions:{disableAllAudio:{allowUnmute:t}}}),new A("Unauthorized: User does not have permission to disable peer audio.")}async disableAllVideo(){if(S.info("DyteParticipants::disable_all_video"),!this.roomJoined)throw new A("Can`t disable all video without joining room");if(h(this,ma).permissions.canAllowParticipantVideo)return h(this,fi,xi).muteAllVideo();throw S.error("DyteParticipants::unauthorized_disable_all_video"),new A("Unauthorized: User does not have permission to disable peer video.")}async disableAudio(t){this.joined.get(t).disableAudio()}async disableVideo(t){this.joined.get(t).disableVideo()}async kick(t){await this.joined.get(t).kick(),await h(this,xo).kick(t)}async kickAll(){if(S.info("DyteParticipants::kick_all"),!this.roomJoined)throw new A("Can`t kick all without joining room");if(!h(this,ma).permissions.kickParticipant)throw S.error("DyteParticipants::unauthorized_kick_all"),new A("Unauthorized: User does not have permission to kick peers.");await h(this,fi,xi).kickAll(),await h(this,xo).kickAll()}async broadcastMessage(t,e){if(S.info("DyteParticipants::broadcastMessage"),!this.roomJoined)throw new A("Can`t broadcast message without joining room");if(!(t!=null&&t.trim()))throw new A("`type` must be a non-empty string.");h(this,fi,xi)instanceof Je&&h(this,ma).config.viewType!=="LIVESTREAM"&&h(this,ma).config.viewType!=="CHAT"?h(this,fi,xi).broadcastMessage(t,e):h(this,xo).broadcastMessage(t,e)}async acceptAllRequestToJoinStageRequests(t){if(!this.roomJoined)throw new A("Can`t acceptAllRequestToJoinStageRequests without joining room");h(this,fi,xi).acceptAllRequestToJoinStage(t)}async getAllJoinedPeers(t,e,i){return(await h(this,xo).getRoomPeers(t,e,i)).peers.map(yn.formatSocketServiceMessage)}},fi=new WeakSet,xi=function(){return si()},ma=new WeakMap,xo=new WeakMap,Dx);ns([E.trace("DyteParticipants.setViewMode")],vr.prototype,"setViewMode",1);ns([E.trace("DyteParticipants.setPage")],vr.prototype,"setPage",1);ns([E.trace("DyteParticipants.disableAllAudio")],vr.prototype,"disableAllAudio",1);ns([E.trace("DyteParticipants.disableAllVideo")],vr.prototype,"disableAllVideo",1);ns([E.trace("DyteParticipants.disablePeerAudio")],vr.prototype,"disableAudio",1);ns([E.trace("DyteParticipants.disablePeerVideo")],vr.prototype,"disableVideo",1);ns([E.trace("DyteParticipants.kickPeer")],vr.prototype,"kick",1);ns([E.trace("DyteParticipants.kickAll")],vr.prototype,"kickAll",1);ns([E.trace("DyteParticipants.broadcastMessage")],vr.prototype,"broadcastMessage",1);ns([E.trace("DyteParticipants.acceptAllRequestToJoinStageRequests")],vr.prototype,"acceptAllRequestToJoinStageRequests",1);ns([E.trace("DyteParticipants.getAllJoinedPeers")],vr.prototype,"getAllJoinedPeers",1);vr=ns([qi(t=>{throw new A(t.message,"1200")})],vr);var pre=Object.defineProperty,hre=Object.getOwnPropertyDescriptor,vo=(t,e,i,r)=>{for(var s=r>1?void 0:r?hre(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&pre(e,i,s),s},vi,kd,Tn,Pm,Td,xt,Ot;class yn{constructor(e,i,r){R(this,xt),y(this,"participants"),R(this,vi,void 0),R(this,kd,void 0),R(this,Tn,new Set),R(this,Pm,void 0),R(this,Td,void 0),y(this,"syncMembers",async()=>{const s=await h(this,Td).getAllAddedParticipants();this.participants.all.__clear(),s.forEach(n=>this.participants.all.__set(n.userId,n)),this.participants.all.emit("participantsUpdate")}),y(this,"chatRoomJoinHandler",async s=>{s.peer&&s.peer.userId!==h(this,vi).userId&&await this.syncMembers()}),I(this,Td,i),this.participants=new vr(e,h(this,Td)),I(this,kd,new Map),I(this,vi,e),I(this,Pm,RS(e.config.viewType,r)?"socket-service":"room-node"),h(this,Pm)==="socket-service"&&e.config.viewType==="CHAT"?this.setupChatEvents():this.setupEvents()}get roomJoined(){var e;return((e=h(this,xt,Ot))==null?void 0:e.roomJoined)===!0}updatePageParticipants(e){const i=new Set(e),r=new Map(this.participants.active);if(this.participants.active.forEach((s,n)=>{this.participants.active.delete(n,!i.has(n))}),i.forEach(s=>{if(!this.participants.joined.get(s)){S.warn("updatePageParticipants::participant_not_in_joined_list",{dyteParticipant:{id:s}});return}this.participants.active.add(this.participants.joined.get(s),!r.get(s))}),h(this,xt,Ot)instanceof we){I(this,Tn,new Set(this.participants.active.keys())),Array.from(r.keys()).forEach(n=>{if(i.has(n))return;const a=this.participants.joined.get(n);if(!a)return;const o={producers:a.producers,peerId:a.id};h(this,xt,Ot).deactivatePeers(o)});const s=[];this.participants.active.forEach(n=>{const a={peerId:n.id,producers:n.producers};s.push(a)}),h(this,xt,Ot).activatePeers(s)}}updatePinnedParticipants(){this.participants.pinned.forEach(e=>{e.setIsPinned(!1),this.participants.pinned.delete(e.id)})}refreshGridParticipants(e=!1){const i=[...this.participants.joined.keys()],r=this.participants.selectedPeers.peers,s=[...this.participants.pinned.keys()];if(this.participants.viewMode!=="ACTIVE_GRID"){S.warn("ParticipantController::refreshGridParticipants::not_refreshing_grid_in_not_active_grid_mode");return}const n=this.participants.maxActiveParticipantsCount-1,a=new Set(r.concat(s).filter(d=>d!==h(this,vi).id&&this.participants.joined.has(d)));let o=[...a];const c=n-a.size;if(c>=0){const d=i.filter(u=>!a.has(u)&&u!==h(this,vi).id).slice(0,c);o=[...a].concat(d)}else o=o.slice(0,n);this.updateActiveParticipantsHiveNode(o,e)}updateActiveParticipantsHiveNode(e,i=!1){if(!this.roomJoined){S.warn("Skipped::ParticipantController::updateActiveParticipants",{roomJoined:this.roomJoined});return}const r=Array.from(this.participants.active.keys()),s=new Map(this.participants.active),n={};e.forEach(u=>{n[u]=!0});const a=[];r.forEach((u,p)=>{(!n[u]||!this.participants.joined.get(u))&&a.push(p)}),e.forEach(u=>{s.get(u)||(r.length<e.length?r.push(u):r[a.shift()]=u)}),r.forEach((u,p)=>{n[u]||r.splice(p,1)}),Array.from(this.participants.active.keys()).forEach(u=>{this.participants.active.delete(u,!n[u])}),r.forEach(u=>{if(!this.participants.joined.get(u)){S.warn("updateActiveParticipants::participant_not_in_joined_list",{dyteParticipant:{id:u}});return}this.participants.active.add(this.participants.joined.get(u),!s.get(u))}),this.updateWebinarStatusForJoinedParticipants(e),this.participants.active.emit("participantsUpdate"),S.info("ParticipantController::updateActiveParticipants::updating_current_selected_peers",{debuggingHint:i?"Forcefully updating currentActiveGridParticipants set":null}),i&&I(this,Tn,new Set);const o=new Set(e),c=[],d=[];if(h(this,Tn).forEach(u=>{o.has(u)||c.push(u)}),o.forEach(u=>{h(this,Tn).has(u)||d.push(u)}),I(this,Tn,o),d.length===0&&c.length===0){S.info("ParticipantController::updateActiveParticipants::current_selected_peers_is_same");return}if(h(this,xt,Ot)instanceof we){const u=[];c.forEach(p=>{const g=this.participants.joined.get(p);if(!g)return;const m={producers:g.producers,peerId:g.id};u.push(h(this,xt,Ot).deactivatePeers(m))}),Promise.all(u).then(()=>{const p=[];d.forEach(g=>{const m=this.participants.active.get(g);if(!m){S.warn("peer is not in active map which is going to activate, should not happen",{dyteParticipant:{id:g}});return}const f={peerId:m.id,producers:m.producers};p.push(f)}),h(this,xt,Ot).activatePeers(p)}).catch(p=>{S.info("Error on deactivating peers",p)})}}updateActiveParticipants(e){if(!this.roomJoined){S.warn("Skipped::ParticipantController::updateActiveParticipants",{roomJoined:this.roomJoined});return}const i=Array.from(this.participants.active.keys()),r=new Map(this.participants.active),s={};e.forEach(a=>{s[a]=!0});const n=[];i.forEach((a,o)=>{(!s[a]||!this.participants.joined.get(a))&&n.push(o)}),e.forEach(a=>{r.get(a)||(i.length<e.length?i.push(a):i[n.shift()]=a)}),i.forEach((a,o)=>{s[a]||i.splice(o,1)}),Array.from(this.participants.active.keys()).forEach(a=>{this.participants.active.delete(a,!s[a])}),i.forEach(a=>{if(!this.participants.joined.get(a)){S.warn("updateActiveParticipants::participant_not_in_joined_list",{dyteParticipant:{id:a}});return}this.participants.active.add(this.participants.joined.get(a),!r.get(a))}),this.updateWebinarStatusForJoinedParticipants(e),this.participants.active.emit("participantsUpdate")}updateActiveParticipantsWithPriorities(e,i=!1){if(!this.roomJoined){S.warn("Skipped::ParticipantController::updateActiveParticipantsWithPriorities",{roomJoined:this.roomJoined});return}e.forEach(r=>{this.participants.selectedPeers.add(r.peerId,r.priority)}),i&&this.refreshGridParticipants()}setupChatEvents(){x.onAsync(T.SOCKET_SERVICE_ROOM_JOINED,this.syncMembers),h(this,Td).on(me.joinRoom,this.chatRoomJoinHandler)}setupEvents(){x.on(T.PEER_JOINED,async e=>{var i,r,s;const n=new Xr(e,h(this,vi));h(this,vi).id!==n.id&&!((i=e.flags)!=null&&i.recorder)&&!((r=n.flags)!=null&&r.hidden_participant)&&!((s=n.flags)!=null&&s.hiddenParticipant)&&(this.participants.joined.add(n),this.participants.waitlisted.delete(n.id),this.participants.currentPage===this.participants.pageCount&&h(this,xt,Ot)instanceof Je&&x.emit(T.GET_PAGE,(await h(this,xt,Ot).getPage(this.participants.currentPage)).payload))}),x.on(T.WAITLIST_PEER_ADDED,({id:e,name:i})=>{this.participants.waitlisted.add(new Xr({id:e,displayName:i,audioMuted:!0,videoEnabled:!1,audioTrack:void 0,videoTrack:void 0,stageStatus:Bt.OFF_STAGE,userId:void 0,flags:{},isHost:!1},h(this,vi)))}),x.on(T.WAITLIST_PEER_REMOVED,({id:e})=>{this.participants.waitlisted.delete(e)}),x.on(T.ROOM_JOINED,e=>{h(this,xt,Ot)instanceof we&&this.participants.joined.clear(),e.peers.forEach(i=>{var r,s,n;if((r=i.flags)!=null&&r.recorder||(s=i.flags)!=null&&s.hidden_participant||(n=i.flags)!=null&&n.hiddenParticipant)return;const a=new Xr(i,h(this,vi));a.id===e.pinnedPeerId&&(a.setIsPinned(!0,!1),this.participants.pinned.add(a)),this.participants.joined.add(a)}),e.requestToJoinPeersList&&e.requestToJoinPeersList.forEach(({id:i})=>{var r;(r=this.participants.joined.get(i))==null||r.setWebinarStageStatus(Bt.REQUESTED_TO_JOIN_STAGE)}),h(this,xt,Ot)instanceof Je&&h(this,xt,Ot).getPage(this.participants.currentPage)}),x.on(T.PEER_CLOSED,async({id:e})=>{if(this.participants.joined.delete(e,!0,!0),this.participants.pinned.delete(e,!0,!0),h(this,xt,Ot)instanceof we&&(this.participants.selectedPeers.delete(e),this.participants.active.get(e)&&this.participants.currentPage===0)){this.refreshGridParticipants();return}const{currentPage:i}=this.participants,r=h(this,vi).config.maxVideoStreams,s=(Ue.isMobile()?r.mobile:r.desktop)*(i-1),n=this.participants.active.get(e);if(s===0)this.participants.setViewMode("ACTIVE_GRID");else if(this.participants.joined.size<=s)i===2?this.participants.setViewMode("ACTIVE_GRID"):this.participants.setPage(i-1);else if(n){let a=[];h(this,xt,Ot)instanceof Je?{peerIds:a}=(await h(this,xt,Ot).getPage(i)).payload:a=this.participants.getPeerIdsForCurrentPage(),x.emit(T.GET_PAGE,{peerIds:a})}}),x.on(T.ROOM_NODE_DISCONNECTED,()=>{Array.from(this.participants.joined.keys()).forEach(e=>{this.participants.joined.delete(e)}),Array.from(this.participants.active.keys()).forEach(e=>{this.participants.active.delete(e)}),Array.from(this.participants.pinned.keys()).forEach(e=>{this.participants.pinned.delete(e)}),this.participants.currentPage=0,this.participants.viewMode="ACTIVE_GRID",this.participants.emit("viewModeChanged",{viewMode:"ACTIVE_GRID",currentPage:this.participants.currentPage,pageCount:this.participants.pageCount}),I(this,Tn,new Set)}),x.on(T.PEER_MUTED,({peerId:e})=>{const i=this.participants.joined.get(e);i&&i.setAudioEnabled(!1)}),x.on(T.PEER_UNMUTED,({peerId:e})=>{const i=this.participants.joined.get(e);i&&i.setAudioEnabled(!0)}),x.on(T.CONSUMER_PAUSED,({id:e})=>{this.processConsumerPaused(e)}),x.on(T.CONSUMER_RESUMED,({id:e})=>{this.processConsumerResumed(e)}),x.on(T.NEW_CONSUMER,({id:e})=>{this.processNewConsumer(e)}),x.on(T.CONSUMER_CLOSED,({id:e})=>{this.processConsumerClosed(e)}),x.on(T.GET_PAGE,({peerIds:e})=>{this.participants.viewMode==="PAGINATED"&&this.updatePageParticipants(e)}),x.on(T.SELECTED_PEERS,({peerIds:e,compulsoryPeers:i})=>{if(this.participants.viewMode!=="ACTIVE_GRID")return;if(h(this,xt,Ot)instanceof Je){this.updateActiveParticipants(e);return}const r=e.map((n,a)=>({peerId:n,priority:a+1})),s=i==null?void 0:i.map((n,a)=>({peerId:n,priority:-(a+1)}));r.push(...s??[]),r.length>0&&this.updateActiveParticipantsWithPriorities(r)}),x.on(T.SELECTED_PEERS_DIFF,({entries:e})=>{this.participants.viewMode==="ACTIVE_GRID"&&this.updateActiveParticipantsWithPriorities(e,!0)}),x.on(T.REFRESH_GRID,(e=!1)=>{this.participants.viewMode==="ACTIVE_GRID"&&this.refreshGridParticipants(e)}),x.on(T.NEW_PRODUCER,({peerId:e,producer:i})=>{const r=this.participants.joined.get(e);if(!r){S.warn("ParticipantController::NEW_PRODUCER::participant not found",{producer:{id:i==null?void 0:i.producerId,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}},dyteParticipant:{id:e}});return}r.producers.push(i),S.info("ParticipantController::NEW_PRODUCER::producer_added_to_participant",{producer:{id:i==null?void 0:i.producerId,peerId:e,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}}}),(i==null?void 0:i.kind)==="audio"||i!=null&&i.screenShare||h(this,Tn).has(e)?h(this,xt,Ot).createConsumer({producingPeerId:e,producerId:i.producerId,screenShare:i.screenShare}):S.info("ParticipantController::NEW_PRODUCER::not_consuming_producer",{producer:{id:i==null?void 0:i.producerId,peerId:e,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}}})}),x.on(T.PRODUCER_CLOSED,({peerId:e,producerId:i})=>{const r=this.participants.joined.get(e);if(!r){S.warn("ParticipantController::NEW_PRODUCER::participant not found",{dyteParticipant:{id:e}});return}r.producers=r.producers.filter(s=>s.producerId!==i)}),x.on(T.PRODUCER_TOGGLE,({peerId:e,producerId:i,paused:r,kind:s})=>{const n=this.participants.joined.get(e);if(n&&s==="audio"){n.setAudioEnabled(!r);const a=n.producers.find(o=>o.producerId===i);a&&(a.pause=r)}}),x.on(T.ACTIVE_SPEAKER,({peerId:e,volume:i})=>{this.participants.lastActiveSpeaker=e,this.participants.emit("activeSpeaker",{peerId:e,volume:i})}),x.on(T.ROOM_MESSAGE,async({payload:e,type:i,timestamp:r})=>{this.participants.emit("broadcastedMessage",{type:i,payload:e,timestamp:r})}),x.on(T.LOW_CONSUMER_SCORE,({peerId:e,score:i,kind:r})=>{const s=this.participants.joined.get(e);s&&(s.emit("poorConnection",{score:i,kind:r}),this.participants.emit("poorConnection",{participantId:e,score:i,kind:r}))}),x.on(T.CONSUMER_SCORE_UPDATE,({score:e,kind:i,appData:r,peerId:s})=>{var n;const a=i==="video"&&((n=r==null?void 0:r.screenShare)!=null?n:!1),o=this.participants.joined.get(s);o&&(o.emit("mediaScoreUpdate",{kind:i,isScreenshare:a,score:e,participantId:s}),this.participants.emit("mediaScoreUpdate",{kind:i,isScreenshare:a,score:e,participantId:s}))}),x.on(T.PEER_PINNED,({peerId:e})=>{if(!e){h(this,vi).isPinned&&h(this,vi).setIsPinned(!1),this.participants.pinned.size!==0&&this.updatePinnedParticipants();return}if(e===h(this,vi).id){this.participants.pinned.size!==0&&this.updatePinnedParticipants(),h(this,vi).setIsPinned(!0);return}const i=this.participants.joined.get(e);h(this,vi).isPinned&&h(this,vi).setIsPinned(!1),this.updatePinnedParticipants(),i.setIsPinned(!0),this.participants.pinned.add(i),h(this,xt,Ot)instanceof we&&h(this,xt,Ot).activatePeers([{peerId:i.id,producers:i.producers}]).catch(r=>{S.error("unable to create consumers",{error:r})})}),x.on(T.PEER_REQUESTED_TO_JOIN_STAGE,({id:e})=>{const i=this.participants.joined.get(e);i==null||i.setWebinarStageStatus(Bt.REQUESTED_TO_JOIN_STAGE)}),x.on(T.PEER_WITHDRAWN_REQUEST_TO_JOIN_STAGE,({id:e})=>{const i=this.participants.joined.get(e);i==null||i.setWebinarStageStatus(Bt.OFF_STAGE)}),x.on(T.PEER_REJECTED_TO_JOIN_STAGE,({id:e})=>{const i=this.participants.joined.get(e);i==null||i.setWebinarStageStatus(Bt.OFF_STAGE)}),x.on(T.PEER_ADDED_TO_STAGE,({id:e})=>{const i=this.participants.joined.get(e);i==null||i.setWebinarStageStatus(Bt.ACCEPTED_TO_JOIN_STAGE)}),x.on(T.PEER_REMOVED_FROM_STAGE,({id:e})=>{const i=this.participants.joined.get(e);i==null||i.setWebinarStageStatus(Bt.OFF_STAGE),this.participants.pinned.delete(e)}),x.on(T.PEER_STARTED_PRESENTING,({id:e})=>{const i=this.participants.joined.get(e);i==null||i.setWebinarStageStatus(Bt.ON_STAGE)}),x.on(T.PEER_STOPPED_PRESENTING,({id:e})=>{const i=this.participants.joined.get(e);i==null||i.setWebinarStageStatus(Bt.OFF_STAGE),this.participants.pinned.delete(e)})}processMedia(e){var i;const r=h(this,xt,Ot).getConsumers(),{peerId:s,kind:n,appData:a,remotelyPaused:o,track:c,producerId:d}=(i=r.get(e))!=null?i:{};if(!s)return S.warn("processMedia::Peer ID is undefined",{consumer:{id:e,kind:n,peerId:s,appData:{supportsRemoteControl:a==null?void 0:a.supportsRemoteControl,screenShare:a==null?void 0:a.screenShare},remotelyPaused:o,producerId:d}}),{};const u=a;return S.info("ParticipantController::processMedia",{consumer:{id:e,peerId:s,kind:n,appData:u,remotelyPaused:o,producerId:d}}),h(this,kd).set(e,{type:n,peerId:s,appData:u,remotelyPaused:o,producerId:d}),{peerId:s,kind:n,appData:u,remotelyPaused:o,track:c,producerId:d}}processConsumerClosed(e){const{peerId:i,type:r,appData:s,remotelyPaused:n,producerId:a}=h(this,kd).get(e)||{},o=this.participants.joined.get(i);if(S.info("ParticipantController::processConsumerClosed",{consumer:{id:e,peerId:i,appData:s,kind:r,remotelyPaused:n,producerId:a}}),h(this,kd).delete(e),!!o){if(s&&s.screenShare){o.setScreenShareEnabled(!1),X.consumerSharedMediaState(e,{screen:!1}),o.screenShareTracks={audio:void 0,video:void 0};return}r==="audio"?(o.setAudioEnabled(!1),X.consumerSharedMediaState(e,{audio:!1}),o.audioTrack=void 0):r==="video"&&(o.setVideoEnabled(!1),X.consumerSharedMediaState(e,{video:!1}),o.videoTrack=void 0)}}processConsumerResumed(e){const{peerId:i,kind:r,appData:s,track:n,remotelyPaused:a,producerId:o}=this.processMedia(e);if(!i)return;S.info("ParticipantController::processConsumerResumed",{consumer:{id:e,peerId:i,kind:r,appData:s,remotelyPaused:a,producerId:o}});const c=this.participants.joined.get(i);if(c){if(s.screenShare){r==="video"?c.screenShareTracks.video=n:r==="audio"&&(c.screenShareTracks.audio=n),c.setScreenShareEnabled(!0),X.consumerSharedMediaState(e,{screen:!0});return}r==="video"?(c.videoTrack=n,c.setVideoEnabled(!0),X.consumerSharedMediaState(e,{video:!0})):r==="audio"&&(c.audioTrack=n,c.setAudioEnabled(c.audioEnabled),X.consumerSharedMediaState(e,{audio:c.audioEnabled}))}}processConsumerPaused(e){S.info(`ParticipantController::processConsumerPaused called for consumerId: ${e}`);const{peerId:i,kind:r,track:s,appData:n,remotelyPaused:a,producerId:o}=this.processMedia(e);if(!i)return;S.info("ParticipantController::processConsumerPaused",{consumer:{id:e,peerId:i,kind:r,appData:n,remotelyPaused:a,producerId:o}});const c=this.participants.joined.get(i);c&&(r==="video"?(c.videoTrack=s,c.setVideoEnabled(!1),X.consumerSharedMediaState(e,{video:!1})):r==="audio"&&(c.audioTrack=s,c.setAudioEnabled(c.audioEnabled),X.consumerSharedMediaState(e,{audio:c.audioEnabled})))}processNewConsumer(e){const{peerId:i,kind:r,remotelyPaused:s,track:n,appData:a,producerId:o}=this.processMedia(e);if(!i)return;S.info("ParticipantController::processNewConsumer",{consumer:{id:e,peerId:i,kind:r,remotelyPaused:s,appData:a,producerId:o}});const c=this.participants.joined.get(i);if(c){if(a.screenShare){r==="video"?c.screenShareTracks.video=n:r==="audio"&&(c.screenShareTracks.audio=n),(!s||h(this,vi).permissions.isRecorder||ee.hasFeature(re.SCREEENSHARE_ERR_HACK))&&c.setScreenShareEnabled(!0),a.supportsRemoteControl&&(c.supportsRemoteControl=!0);return}r==="video"?(c.videoTrack=n,s||c.setVideoEnabled(!0),X.consumerSharedMediaState(e,{video:!s})):r==="audio"&&h(this,xt,Ot)instanceof we&&(c.audioTrack=n,s||c.setAudioEnabled(!0),X.consumerSharedMediaState(e,{audio:!s}))}}updateWebinarStatusForJoinedParticipants(e){e.forEach(i=>{const r=this.participants.joined.get(i);r&&(r.webinarStageStatus=Bt.ON_STAGE)})}static formatSocketServiceMessage(e){let i;switch(e.stageType){case qr.UNSPECIFIED:i="OFF_STAGE";break;case qr.REQUESTED_STAGE:i="REQUESTED_TO_JOIN_STAGE";break;case qr.APPROVED_STAGE:i="ACCEPTED_TO_JOIN_STAGE";break;case qr.OFF_STAGE:i="OFF_STAGE";break;case qr.ON_STAGE:i="ON_STAGE";break;default:i="OFF_STAGE"}return{id:e.peerId,userId:e.userId,name:e.displayName,stageType:i,customParticipantId:e.customParticipantId,presetId:e.presetId,picture:e.displayPictureUrl,waitlisted:e.waitlisted}}}vi=new WeakMap,kd=new WeakMap,Tn=new WeakMap,Pm=new WeakMap,Td=new WeakMap,xt=new WeakSet,Ot=function(){return si()};vo([E.trace("ParticipantController.updatePageParticipants")],yn.prototype,"updatePageParticipants",1);vo([E.trace("ParticipantController.setupChatEvents")],yn.prototype,"setupChatEvents",1);vo([E.trace("ParticipantController.setupEvents")],yn.prototype,"setupEvents",1);vo([E.trace("ParticipantController.processMedia")],yn.prototype,"processMedia",1);vo([E.trace("ParticipantController.processConsumerClosed")],yn.prototype,"processConsumerClosed",1);vo([E.trace("ParticipantController.processConsumerResumed")],yn.prototype,"processConsumerResumed",1);vo([E.trace("ParticipantController.processConsumerPaused")],yn.prototype,"processConsumerPaused",1);vo([E.trace("ParticipantController.processNewConsumer")],yn.prototype,"processNewConsumer",1);var gre=Object.defineProperty,mre=Object.getOwnPropertyDescriptor,fre=(t,e,i,r)=>{for(var s=r>1?void 0:r?mre(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&gre(e,i,s),s},lM=(t=>(t[t.User=0]="User",t[t.Meeting=1]="Meeting",t))(lM||{}),ld,_u,ud,Cg,Lx;let uw=(Lx=class extends jt{constructor(t,e,i,r){super(),R(this,ld),y(this,"selfActiveTab"),y(this,"broadcastTabChanges"),R(this,ud,void 0),R(this,Cg,void 0),y(this,"viewType"),y(this,"meetingStartedTimestamp"),y(this,"meetingTitle"),I(this,ud,t),this.viewType=e,I(this,Cg,i),this.meetingTitle=r,this.broadcastTabChanges=t.permissions.canSpotlight}get joined(){var t;return(t=h(this,ld,_u))==null?void 0:t.roomJoined}get roomName(){var t;return(t=h(this,ld,_u))==null?void 0:t.roomName}get socketConnected(){return h(this,Cg).isConnected}setBroadcastTabChanges(t){if(!h(this,ud).permissions.canSpotlight)throw S.error("DyteSpotlight::setSpotlighted::permission_denied"),new A("User does not have permission to toggle spotlight");this.broadcastTabChanges=t,this.emit("broadcastTabChangesUpdate",this.broadcastTabChanges),this.broadcastTabChanges&&this.assertActiveTabToRoom()}setSelfActiveTab(t,e){var i;S.info("DyteSpotlight::setActiveTab",{spotlight:{currentTab:{id:t.id,type:t.type}}}),this.selfActiveTab=t,e===0&&this.emit("selfTabUpdate",t),(i=h(this,ud).permissions)!=null&&i.canSpotlight&&this.broadcastTabChanges&&e===0&&this.assertActiveTabToRoom()}assertActiveTabToRoom(){h(this,ld,_u)instanceof Je&&this.selfActiveTab&&h(this,ld,_u).assertSpotlightToRoom({userId:h(this,ud).userId,currentTab:this.selfActiveTab,peerId:void 0})}},ld=new WeakSet,_u=function(){return si()},ud=new WeakMap,Cg=new WeakMap,Lx);uw=fre([qi(t=>{throw new A(t.message,"0800")})],uw);var vre=Object.defineProperty,yre=Object.getOwnPropertyDescriptor,bre=(t,e,i,r)=>{for(var s=r>1?void 0:r?yre(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&vre(e,i,s),s},Ho,xd,Zu;class uM{constructor(e,i,r){R(this,xd),y(this,"meta"),R(this,Ho,void 0),this.meta=new uw(e,Ee.isV2AuthToken?e.config.viewType:e.permissions.viewType,i,r),I(this,Ho,e),e.config.viewType!==_i.Chat&&this.setupEvents()}get roomName(){return this.meta.roomName}conditionallySetActiveTab(e){var i;e!=null&&e.currentTab&&((i=this.meta.selfActiveTab)==null?void 0:i.id)!==e.currentTab.id&&(this.meta.setSelfActiveTab(e.currentTab,lM.Meeting),this.meta.emit("activeTabUpdate",e.currentTab))}setupEvents(){x.on(T.ROOM_JOINED,e=>{e.startedAt&&(this.meta.meetingStartedTimestamp=new Date(e.startedAt),this.meta.emit("meetingStartTimeUpdate",{meetingStartedTimestamp:this.meta.meetingStartedTimestamp}))}),x.on(T.ROOM_STATE,({createdAt:e})=>{const i=this.meta.meetingStartedTimestamp;if(e&&!i){const r=new Date(e*1e3);this.meta.meetingStartedTimestamp=r,this.meta.emit("meetingStartTimeUpdate",{meetingStartedTimestamp:this.meta.meetingStartedTimestamp})}}),x.on(T.ROOM_NODE_CONNECTED,()=>{this.meta.emit("connected")}),x.on(T.ROOM_NODE_DISCONNECTED,()=>{this.meta.emit("disconnected")}),x.on(T.ICE_CONNECTED,({transport:e})=>{this.meta.emit("iceConnected",{transport:e})}),x.on(T.ICE_DISCONNECTED,({transport:e})=>{this.meta.emit("iceDisconnected",{transport:e})}),x.on(T.ICE_RECONNECTING,({transport:e})=>{this.meta.emit("iceReconnecting",{transport:e})}),x.on(T.ICE_FAILED,({transport:e})=>{this.meta.emit("iceFailed",{transport:e})}),x.on(T.PRODUCER_SCORE_UPDATE,({score:e})=>{e<5&&this.meta.emit("poorConnection",{score:e})}),x.on(T.SOCKET_SERVICE_CONNECTED,()=>{this.meta.emit("socketConnected")}),x.on(T.SOCKET_SERVICE_DISCONNECTED,()=>{this.meta.emit("socketDisconnected")}),x.on(T.SOCKET_SERVICE_RECONNECTING,()=>{this.meta.emit("socketReconnecting")}),x.on(T.SOCKET_SERVICE_RECONNECTION_ATTEMPT,({attempt:e})=>{this.meta.emit("socketReconnectAttempt",{attempt:e})}),x.on(T.SOCKET_SERVICE_RECONNECT_FAILURE,({attempt:e})=>{this.meta.emit("socketReconnectFailure",{attempt:e})}),x.on(T.SOCKET_SERVICE_RECONNECTED,()=>{this.meta.emit("socketReconnected")}),x.on(T.SOCKET_SERVICE_FAILED,()=>{this.meta.emit("socketFailure")}),x.on(T.ROOM_NODE_CONNECTION_ERROR,e=>{const{message:i}=e;i.match(/room '([a-z0-9-]+)' not found/i)&&this.meta.emit("connectionError",{reason:"ROOM_NOT_FOUND"})}),h(this,Ho).permissions.canSpotlight&&(S.info("DyteSpotlightController::Asserting Spotlight"),h(this,xd,Zu)instanceof Je&&this.meta.selfActiveTab&&h(this,xd,Zu).assertSpotlightToRoom({userId:h(this,Ho).userId,currentTab:this.meta.selfActiveTab,peerId:void 0})),x.on(T.PEER_JOINED,async e=>{h(this,Ho).permissions.canSpotlight&&h(this,xd,Zu)instanceof Je&&this.meta.selfActiveTab&&h(this,xd,Zu).assertSpotlightToPeer({userId:h(this,Ho).userId,currentTab:this.meta.selfActiveTab,peerId:e.id})}),x.on(T.ROOM_MESSAGE,e=>{var i,r;e.roomMessageType==="spotlight"&&(S.info("Spotlight Assertion Received",{spotlight:{spotlighter:{id:e.userId},currentTab:{id:(i=e.currentTab)==null?void 0:i.id,type:(r=e.currentTab)==null?void 0:r.type}}}),this.conditionallySetActiveTab(e))}),x.on(T.MESSAGE,e=>{var i,r;e.roomMessageType==="spotlight"&&(S.info("Spotlight Assertion Received",{spotlight:{spotlighter:{id:e.userId},currentTab:{id:(i=e.currentTab)==null?void 0:i.id,type:(r=e.currentTab)==null?void 0:r.type}}}),this.conditionallySetActiveTab(e))})}}Ho=new WeakMap,xd=new WeakSet,Zu=function(){return si()};bre([E.trace("MetaController.setupEvents")],uM.prototype,"setupEvents",1);var wre=Object.defineProperty,_re=Object.getOwnPropertyDescriptor,BS=(t,e,i,r)=>{for(var s=r>1?void 0:r?_re(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&wre(e,i,s),s};const ei={getPeer:14,getPeers:15,chatMessage:16,getRoomName:17,getDisplayTitle:18,getPluginInitiator:19,customPluginEventToParent:20,peerJoined:22,peerLeft:23,sendData:24};var Ki,Po,ar,Su,Eu,ku,Yi,or,Nx;let sh=(Nx=class extends jt{constructor({baseURL:t,createdAt:e,description:i,id:r,name:s,organizationId:n,picture:a,private:o,published:c,staggered:d,tags:u,type:p,updatedAt:g},m,f,b,w,v){super(),R(this,Yi),R(this,Ki,void 0),R(this,Po,void 0),y(this,"baseURL"),y(this,"createdAt"),y(this,"description"),y(this,"id"),y(this,"name"),R(this,ar,void 0),R(this,Su,void 0),R(this,Eu,void 0),y(this,"organizationId"),y(this,"picture"),y(this,"private"),y(this,"published"),y(this,"staggered"),y(this,"tags"),y(this,"type"),y(this,"updatedAt"),y(this,"config"),R(this,ku,void 0),y(this,"active"),y(this,"iframes"),y(this,"enabledBy"),this.baseURL=t,this.createdAt=new Date(e),this.description=i,this.id=r,this.name=s,I(this,ar,b),this.organizationId=n,this.picture=a,this.private=o,this.published=c,this.staggered=d,this.tags=u,this.type=p,this.updatedAt=new Date(g),this.active=!1,this.iframes=new Map,I(this,Ki,m),I(this,Po,f),I(this,Su,w),I(this,Eu,v),this.enabledBy=""}get roomJoined(){var t;return((t=h(this,Yi,or))==null?void 0:t.roomJoined)===!0}sendIframeEvent(t){this.iframes.size&&this.iframes.forEach(e=>{const{iframe:i}=e;i&&(navigator.isReactNative?i.postMessage(JSON.stringify(t)):i.contentWindow.postMessage(t,"*"))})}async handleIframeMessage(t){var e,i,r,s;let n;if(h(this,Po)==="socket-service"){const c=t,{payload:d,uuid:u,type:p}=c;switch(p){case pe.customPluginEventToRoom:{h(this,Ki).customPluginEventToRoom(this.id,d,u);break}case pe.customPluginEventToPeers:{h(this,Ki).customPluginEventToPeers(this.id,d.peerIds,d,u);break}case pe.enablePluginForRoom:{h(this,Ki).enablePluginForRoom(this.id,u);break}case pe.enablePluginForPeers:{h(this,Ki).enablePluginForPeers(this.id,d.peerIds,u);break}case pe.disablePluginForRoom:{h(this,Ki).disablePluginForRoom(this.id,u);break}case pe.disablePluginForPeers:{h(this,Ki).disablePluginForPeers(this.id,d.peerIds,u);break}case pe.storeInsertKeys:{h(this,Ki).storeInsertKeys(this.id,d.store,d.insertKeys,u);break}case pe.storeGetKeys:{h(this,Ki).storeGetKeys(this.id,d.store,d.getKeys,u);break}case pe.storeDeleteKeys:{h(this,Ki).storeDeleteKeys(this.id,d.store,d.deleteKeys,u);break}case pe.storeDelete:{h(this,Ki).storeDelete(this.id,d.store,u);break}case ei.chatMessage:{const{messagePayload:g,peerIds:m}=d;if(!h(this,Eu)){this.sendIframeEvent({type:ei.chatMessage,uuid:c.uuid,payload:{error:"Chat is disabled for this room."}});return}try{await h(this,Eu).sendMessage(g,m),this.sendIframeEvent({type:ei.chatMessage,uuid:c.uuid,payload:{success:!0}})}catch(f){this.sendIframeEvent({type:ei.chatMessage,uuid:c.uuid,payload:{error:f}})}break}case ei.getPeer:{let g;const{peerId:m}=d,f={...h(this,ar),isRecorder:(e=h(this,ar).permissions)==null?void 0:e.isRecorder,isHidden:h(this,ar).permissions.hiddenParticipant};m?(g=h(this,Su).joined.get(d.peerId),h(this,ar).id===m&&(g=f)):g=f,this.sendIframeEvent({type:ei.getPeer,payload:{peer:g&&B1(g)},uuid:c.uuid});break}case ei.getPeers:{const g=h(this,Su).joined.toArray().map(m=>B1(m));this.sendIframeEvent({type:ei.getPeers,payload:{peers:g},uuid:c.uuid});break}case ei.getPluginInitiator:{this.sendIframeEvent({type:ei.getPluginInitiator,payload:{enabledBy:this.enabledBy},uuid:c.uuid});break}case ei.getDisplayTitle:{this.sendIframeEvent({type:ei.getDisplayTitle,payload:{displayTitle:h(this,Yi,or).meetingTitle},uuid:c.uuid});break}case ei.getRoomName:{this.sendIframeEvent({type:ei.getRoomName,payload:{roomName:h(this,Yi,or).roomName},uuid:c.uuid});break}case ei.customPluginEventToParent:{this.emit(c.payload.eventName,c.payload.data);break}}return}const a=(c,d)=>{if(h(this,ar).userId===c)return h(this,ar).id;let u;return d.forEach(p=>{p.userId===c&&(u=p.id)}),u},o=t;switch(o.type){case"pluginEvent":case"storePluginData":case"getPluginData":case"enablePluginForAll":case"enablePluginForUser":case"disablePluginForUser":case"chatMessage":{n=await h(this,Yi,or).sendMessage(o),this.sendIframeEvent(n);break}case"getJoinedPeers":{n=await h(this,Yi,or).getRoomState(),this.sendIframeEvent({type:"websocket/get-joined-peers",payload:{...o.payload,peers:n.payload.roomState.peers}});break}case"getPeerInfo":{n=await h(this,Yi,or).sendMessage({type:o.type,payload:{...o.payload,peerId:(r=(i=o.payload)==null?void 0:i.peerId)!=null?r:h(this,ar).id}}),this.sendIframeEvent(n);break}case"getRoomState":{n=await h(this,Yi,or).getRoomState();const{plugins:c,peers:d}=n.payload.roomState,{enabledBy:u}=c.find(g=>g.id===this.id),p=a(u,d);this.sendIframeEvent({type:"websocket/get-room-state",payload:{...o.payload,roomName:n.payload.roomState.roomName,pluginInitiatorPeerId:p,pluginInitiatorUserId:u,peers:n.payload.roomState.peers,displayTitle:n.payload.roomState.displayTitle,roomUUID:n.payload.roomState.roomUUID,currentPeer:h(this,ar).id,isRecorder:(s=h(this,ar).permissions)==null?void 0:s.isRecorder}});break}case"getPluginInitiatorId":{n=await h(this,Yi,or).getRoomState();const{plugins:c,peers:d}=n.payload.roomState,{enabledBy:u}=c.find(g=>g.id===this.id),p=a(u,d);this.sendIframeEvent({type:"websocket/get-plugin-initiator-peer-id",payload:{...o.payload,pluginInitiatorPeerId:p}});break}case"getPluginInitiatorUserId":{n=await h(this,Yi,or).getRoomState();const{plugins:c}=n.payload.roomState,{enabledBy:d}=c.find(u=>u.id===this.id);this.sendIframeEvent({type:"websocket/get-plugin-initiator-user-id",payload:{...o.payload,pluginInitiatorUserId:d}});break}case"pluginEventToParent":{this.emit(o.payload.eventName,o.payload.data);break}case"toggleViewMode":{this.emit("toggleViewMode",o.payload.data);break}}}sendData(t){if(h(this,Po)==="socket-service"){this.sendIframeEvent({type:ei.sendData,uuid:"",payload:t});return}this.sendIframeEvent({type:T.PLUGIN_INTERNAL_DATA,payload:{pluginId:this.id,data:t}})}removePluginView(t="default"){var e;const{iframe:i,listener:r}=(e=this.iframes.get(t))!=null?e:{};(i||r)&&(navigator.isReactNative?i.props.onMessage=void 0:window.removeEventListener("message",r),this.iframes.delete(t))}addPluginView(t,e="default"){var i;if(!h(this,ku))throw S.error("DytePlugin::addPluginView::no_auth_token_set_for_plugin"),new A("No auth token set for plugin.");if(!t)throw S.error("DytePlugin::addPluginView::iframe_was_not_provided"),new A("Iframe was not provided.");this.removePluginView(e);const r=t,s=new URL(this.baseURL),n={auth:h(this,ku),parent:navigator.isReactNative?this.baseURL:window.location.origin,backend:et.apiBase,pluginId:this.id,roomName:(i=h(this,Yi,or).roomName)!=null?i:"",displayTitle:h(this,Yi,or).meetingTitle};if(Object.keys(n).forEach(a=>{s.searchParams.set(a,n[a])}),r.src=s.href,r.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",r.title=e,navigator.isReactNative)r.props.onMessage=a=>{this.handleIframeMessage(JSON.parse(a.nativeEvent.data))},this.iframes.set(e,{iframe:r});else{const a=async o=>{o.source===t.contentWindow&&await this.handleIframeMessage(o.data)};window.addEventListener("message",a),this.iframes.set(e,{iframe:r,listener:a})}}setActive(t){var e,i;if(this.active=t,t){this.emit("stateUpdate",{active:this.active,pluginId:this.id,bind:this.addPluginView.bind(this),views:(e=this.config)==null?void 0:e.views});return}this.active=!1,this.emit("stateUpdate",{active:this.active,pluginId:this.id,views:(i=this.config)==null?void 0:i.views})}async activateForSelf(){const t=gi(),e=await t.authorizePlugin(this.id);I(this,ku,e);try{const i=await t.getPluginConfig(this.baseURL);this.config=i}catch(i){S.error("DytePlugin::activateForSelf",{error:i})}this.setActive(!0),this.emit("enabled")}deactivateForSelf(){[...this.iframes.keys()].forEach(t=>{this.removePluginView(t)}),this.iframes.clear(),this.setActive(!1),this.emit("closed")}async enable(){return this.activateForSelf()}disable(){return this.deactivateForSelf()}async activate(){var t,e;this.active||(e=(t=h(this,ar).permissions)==null?void 0:t.plugins)!=null&&e.canStart&&(h(this,Po)==="socket-service"?h(this,Ki).addPlugin(this.id,this.staggered):await h(this,Yi,or).addRoomPlugin(this),S.info("plugin::activated",{plugin:{id:this.id,enabledBy:this.enabledBy,name:this.name}}))}async deactivate(){var t,e;this.activate&&(e=(t=h(this,ar).permissions)==null?void 0:t.plugins)!=null&&e.canClose&&(h(this,Po)==="socket-service"?h(this,Ki).removePlugin(this.id):await h(this,Yi,or).removeRoomPlugin(this),S.info("plugin::deactivated",{plugin:{id:this.id,name:this.name}}))}},Ki=new WeakMap,Po=new WeakMap,ar=new WeakMap,Su=new WeakMap,Eu=new WeakMap,ku=new WeakMap,Yi=new WeakSet,or=function(){return si()},Nx);BS([E.trace("PluginController.activatePlugin")],sh.prototype,"activate",1);BS([E.trace("PluginController.deactivatePlugin")],sh.prototype,"deactivate",1);sh=BS([qi(t=>{throw new A(t.message,"0600")})],sh);class Ux extends VS{constructor(){super({onAddEvent:"pluginAdded",onDeleteEvent:"pluginDeleted"})}add(e,i=!0){return super.add(e,i)}delete(e,i=!0,r=!1){return super.delete(e,i,r)}}var Sre=Object.defineProperty,Ere=Object.getOwnPropertyDescriptor,kre=(t,e,i,r)=>{for(var s=r>1?void 0:r?Ere(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Sre(e,i,s),s};let pw=class{constructor(){y(this,"all"),y(this,"active"),this.all=new Ux,this.active=new Ux}};pw=kre([qi(t=>{throw new A(t.message,"0600")})],pw);var Tre=Object.defineProperty,xre=Object.getOwnPropertyDescriptor,HS=(t,e,i,r)=>{for(var s=r>1?void 0:r?xre(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Tre(e,i,s),s},Co,jx;const hw=(jx=class{constructor(t){R(this,Co,void 0),I(this,Co,t)}async createChannel(t,e,i,r="public",s=!1){const n={displayName:t,targetUserIds:e,displayPictureUrl:i,visibility:r,isDirectMessage:s};s&&(n.visibility="private");const a=await h(this,Co).sendMessagePromise(ic.createChatChannel,QZ.toBinary(n)),o=En.fromBinary(a.payload).chatChannels;return hw.formatChannel(o[0])}async updateChannel(t,e){const i=await h(this,Co).sendMessagePromise(ic.updateChatChannel,XZ.toBinary({chatChannelId:t,targetUserIds:e.memberIds,displayName:e.displayName,displayPictureUrl:e.displayPictureUrl,visibility:e.visibility})),r=En.fromBinary(i.payload).chatChannels;return hw.formatChannel(r[0])}static formatChannel(t){var e;const{latestMessageAndUnreadCount:i}=t,r={...t,id:t.chatChannelId,memberIds:t.targetUserIds,unreadCount:(e=i==null?void 0:i.unreadCount)!=null?e:0};return i!=null&&i.message&&(r.latestMessage=Vn.formatSocketServiceMessage(i.message)),delete r.chatChannelId,delete r.targetUserIds,delete r.latestMessageAndUnreadCount,r}async getChannelMembers(t){try{const e=await h(this,Co).sendMessagePromise(ic.getChannelMembers,iX.toBinary({chatChannelId:t}));return uX.fromBinary(e.payload).channelMembers.map(({id:i,...r})=>({...r,userId:i}))}catch{return[]}}on(t,e){let i,r;switch(t){case ic.createChatChannel:{i=En.fromBinary.bind(En),r=En.create();break}case ic.updateChatChannel:{i=En.fromBinary.bind(En),r=En.create();break}}if(!i){S.warn(`ChatChannelSocketHandler::Event ${t} is not recognized`);return}h(this,Co).on(t,({payload:s})=>{let n=r;try{n=i(s)}catch(a){S.error("ChatChannelSocketHandler::on::binary_decode_error",{error:a})}return e(n)})}},Co=new WeakMap,jx);let Oc=hw;HS([E.trace("ChatChannelHandler.createChannel")],Oc.prototype,"createChannel",1);HS([E.trace("ChatChannelHandler.updateChannel")],Oc.prototype,"updateChannel",1);HS([E.trace("ChatChannelHandler.getChannelMembers")],Oc.prototype,"getChannelMembers",1);var Pre=Object.defineProperty,Cre=Object.getOwnPropertyDescriptor,$s=(t,e,i,r)=>{for(var s=r>1?void 0:r?Cre(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Pre(e,i,s),s},xr=(t=>(t[t.TEXT=0]="TEXT",t[t.IMAGE=1]="IMAGE",t[t.FILE=2]="FILE",t))(xr||{}),cr;class as{constructor(e){R(this,cr,void 0),I(this,cr,e)}getChatMessages(){return h(this,cr).sendMessagePromise(ti.getMessages)}async getChatMessagesPaginated(e,i,r,s=0,n=""){const a={timeStamp:e,size:i,from:s,reversed:r,channelId:n},o=await h(this,cr).sendMessagePromise(ti.getPaginatedMessages,TZ.toBinary(a));return o.payload?PZ.fromBinary(o.payload):{messages:[],next:!1}}sendMessageToRoom(e,i){const r={payloadType:i,payload:e};h(this,cr).sendMessage(ti.sendMessageToRoom,AZ.toBinary(r))}sendMessageToPeers(e,i,r){const s={payloadType:i,peerIds:r,payload:e};h(this,cr).sendMessage(ti.sendMessageToPeers,MZ.toBinary(s))}sendMessageToChannel(e,i,r){const s={payloadType:i,channelId:r,payload:e};h(this,cr).sendMessage(ti.sendMessageToChannel,NZ.toBinary(s))}sendMessage(e,i,r,s){if(s&&this.sendMessageToChannel(e,i,s),r&&r.length>0){this.sendMessageToPeers(e,i,r);return}this.sendMessageToRoom(e,i)}async editMessage(e,i,r,s){const n={chatId:e,payloadType:r,payload:i};s&&(n.channelId=s);const a=await h(this,cr).sendMessagePromise(ti.editMessage,$Z.toBinary(n));return _g.fromBinary(a.payload).message}async deleteMessage(e,i){const r={chatId:e};i&&(r.channelId=i);const s=await h(this,cr).sendMessagePromise(ti.deleteMessage,VZ.toBinary(r)),n=Sg.fromBinary(s.payload);return{id:n.chatId,...n.channelId?{channelId:n.channelId}:{}}}async searchMessages(e,i){var r,s,n;const a={searchTerm:e,timeStamp:(r=i.timestamp)!=null?r:Date.now(),size:(s=i.size)!=null?s:75,from:0,reversed:(n=i.reversed)!=null?n:!0};i.channelId&&(a.channelId=i.channelId);try{const o=await h(this,cr).sendMessagePromise(ti.searchChannelMessages,GZ.toBinary(a));return NO.fromBinary(o.payload).messages}catch{return[]}}async getAllChannels(){try{const e=await h(this,cr).sendMessagePromise(ti.getAllChatChannels);return En.fromBinary(e.payload).chatChannels.map(Oc.formatChannel)}catch{return[]}}async markLastReadMessage(e,i){const r=await h(this,cr).sendMessagePromise(ti.markChannelIndexAsRead,qZ.toBinary({channelId:e,userId:i.userId,channelIndex:i.channelIndex}));return KZ.fromBinary(r.payload).channelIndex}on(e,i){let r,s;switch(e){case ti.sendMessageToRoom:{r=F0.fromBinary.bind(F0),s=F0.create();break}case ti.sendMessageToPeers:{r=V0.fromBinary.bind(V0),s=V0.create();break}case ti.editMessage:{r=_g.fromBinary.bind(_g),s=_g.create();break}case ti.deleteMessage:{r=Sg.fromBinary.bind(Sg),s=Sg.create();break}}if(!r){S.warn(`ChatSocketHandler::Event ${e} is not recognized`);return}h(this,cr).on(e,({payload:n})=>{let a=s;try{a=r(n)}catch(o){S.error("chatSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}cr=new WeakMap;$s([E.trace("SocketService.getChatMessages")],as.prototype,"getChatMessages",1);$s([E.trace("SocketService.getChatMessagesPaginated")],as.prototype,"getChatMessagesPaginated",1);$s([E.trace("SocketService.sendMessageToRoom")],as.prototype,"sendMessageToRoom",1);$s([E.trace("SocketService.sendMessageToPeers")],as.prototype,"sendMessageToPeers",1);$s([E.trace("SocketService.sendMessageToChannel")],as.prototype,"sendMessageToChannel",1);$s([E.trace("SocketService.sendMessage")],as.prototype,"sendMessage",1);$s([E.trace("SocketService.editMessage")],as.prototype,"editMessage",1);$s([E.trace("SocketService.deleteMessage")],as.prototype,"deleteMessage",1);$s([E.trace("SocketService.searchMessages")],as.prototype,"searchMessages",1);$s([E.trace("SocketService.getAllChannels")],as.prototype,"getAllChannels",1);$s([E.trace("SocketService.markLastReadMessage")],as.prototype,"markLastReadMessage",1);function Rre(t,e){return`<blockquote>${e.replace(/<blockquote>[.\s\S]*<\/blockquote>\n\n/m,"")}</blockquote>

${t}`}var Are=Object.defineProperty,Ire=Object.getOwnPropertyDescriptor,Ji=(t,e,i,r)=>{for(var s=r>1?void 0:r?Ire(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Are(e,i,s),s};const ul=["text","image","file","poll"];var Oe,pd,zi,hd,Fi,fa,Ro,$x;let Ei=($x=class extends jt{constructor(t,e,i,r,s){super(),R(this,fa),y(this,"messages"),y(this,"channels",[]),R(this,Oe,void 0),R(this,pd,void 0),R(this,zi,void 0),R(this,hd,void 0),R(this,Fi,void 0),I(this,zi,t),I(this,hd,e),I(this,Fi,i),I(this,Oe,r),I(this,pd,s),this.messages=[]}get roomJoined(){var t;return((t=h(this,fa,Ro))==null?void 0:t.roomJoined)===!0}async sendMessageInternal(t,e,i,r={}){switch(t.type){case"text":{const s=r.replyTo&&r.replyTo.type==="text"?Rre(t.message,r.replyTo.message):t.message;await this.sendTextMessageInternal(s,e,i);break}case"image":await this.sendImageMessageInternal(t.image,e,i);break;case"file":await this.sendFileMessageInternal(t.file,e,i);break;default:S.error("sendMessage::message_type_not_supported",{dyteChat:{messageType:t.type}});break}}async sendTextMessageInternal(t,e,i){var r,s,n,a,o,c;if(e&&e.length>0){if(!((r=h(this,Oe).permissions)!=null&&r.chatPrivate.canSend)||!((s=h(this,Oe).permissions)!=null&&s.chatPrivate.text))throw S.error("sendTextMessage::private_chat_permission_denied"),new A("Could not send message to private chat.","0501")}else if(!((a=(n=h(this,Oe).permissions)==null?void 0:n.chatPublic)!=null&&a.canSend)||!((c=(o=h(this,Oe).permissions)==null?void 0:o.chatPublic)!=null&&c.text))throw S.error("sendTextMessage::public_chat_permission_denied"),new A("Could not send message to public chat.","0501");if(!t)throw S.error("sendTextMessage::message_can_not_be_empty"),new A("Message can not be empty.","0502");if(i){if(h(this,Fi)!=="socket-service")throw new Error("Socket service required for channel support");h(this,zi).sendMessageToChannel(t,xr.TEXT,i);return}if(h(this,Fi)==="socket-service"){let u=[];e&&e.length>0&&(e.push(h(this,Oe).id),u=h(this,pd).joined.toArray().filter(p=>e.includes(p.id)).map(p=>p.userId),u.push(h(this,Oe).userId)),h(this,zi).sendMessage(t,xr.TEXT,e);return}if(e!==void 0&&e.length>0){S.error("sendTextMessage::private_chat_unsupported");return}const d={userId:h(this,Oe).userId,displayName:h(this,Oe).name,message:t,type:ul.indexOf("text"),time:+new Date};if(!this.roomJoined)throw S.error("DyteChat.sendTextMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new A("Can`t sendTextMessage without joining room");await h(this,fa,Ro).sendChatMessage(d)}async sendImageMessageInternal(t,e,i){var r,s,n,a,o,c;if(e&&e.length>0){if(!((r=h(this,Oe).permissions)!=null&&r.chatPrivate.canSend)||!((s=h(this,Oe).permissions)!=null&&s.chatPrivate.files)){S.error("sendImageMessage::private_chat_permission_denied");return}}else if(!((a=(n=h(this,Oe).permissions)==null?void 0:n.chatPublic)!=null&&a.canSend)||!((c=(o=h(this,Oe).permissions)==null?void 0:o.chatPublic)!=null&&c.files)){S.error("sendImageMessage::permission_denied");return}if(!t){S.error("sendImageMessage::required_argument_image_can_not_be_empty");return}if(!["image/gif","image/jpeg","image/png"].includes(t.type)){S.error("sendImageMessage::image_type_not_supported",{dyteChat:{imageType:t.type}});return}try{const d=gi(),{getLocation:u,putLocation:p}=await d.getPresignedUrls(t.name,h(this,Oe).config.viewType);if(await d.uploadFile(t,p),i){if(h(this,Fi)!=="socket-service")throw new Error("Socket service required for channel support");h(this,zi).sendMessageToChannel(u,xr.IMAGE,i);return}if(h(this,Fi)==="socket-service"){let m=[];e&&e.length>0&&(e.push(h(this,Oe).id),m=h(this,pd).joined.toArray().filter(f=>e.includes(f.id)).map(f=>f.userId),m.push(h(this,Oe).userId)),h(this,zi).sendMessage(u,xr.IMAGE,e);return}if(e!==void 0&&e.length>0){S.error("sendImageMessage::private_chat_unsupported");return}const g={userId:h(this,Oe).userId,displayName:h(this,Oe).name,type:ul.indexOf("image"),link:u,time:+new Date};if(!this.roomJoined)throw S.error("DyteChat.sendImageMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new A("Can`t sendImageMessage without joining room");await h(this,fa,Ro).sendChatMessage(g)}catch{throw new A("Error sending image message.")}}async sendFileMessageInternal(t,e,i){var r,s,n,a,o,c;if(e&&e.length>0){if(!((r=h(this,Oe).permissions)!=null&&r.chatPrivate.canSend)||!((s=h(this,Oe).permissions)!=null&&s.chatPrivate.files)){S.error("sendFileMessage::private_chat_permission_denied");return}}else if(!((a=(n=h(this,Oe).permissions)==null?void 0:n.chatPublic)!=null&&a.canSend)||!((c=(o=h(this,Oe).permissions)==null?void 0:o.chatPublic)!=null&&c.files)){S.error("sendFileMessage::permission_denied");return}if(!t){S.error("sendFileMessage::required_argument_file_can_not_be_empty");return}try{const d=gi(),{getLocation:u,putLocation:p}=await d.getPresignedUrls(t.name,h(this,Oe).config.viewType);if(await d.uploadFile(t,p),i){if(h(this,Fi)!=="socket-service")throw new Error("Socket service required for channel support");h(this,zi).sendMessageToChannel(JSON.stringify({link:u,name:t.name,size:"size"in t?t.size:0}),xr.FILE,i);return}if(h(this,Fi)==="socket-service"){let m=[];e&&e.length>0&&(e.push(h(this,Oe).id),m=h(this,pd).joined.toArray().filter(b=>e.includes(b.id)).map(b=>b.userId),m.push(h(this,Oe).userId));const f=JSON.stringify({link:u,name:t.name,size:"size"in t?t.size:0});h(this,zi).sendMessage(f,xr.FILE,e);return}if(e!==void 0&&e.length>0){S.error("sendFileMessage::private_chat_unsupported");return}const g={userId:h(this,Oe).userId,displayName:h(this,Oe).name,type:ul.indexOf("file"),link:u,name:t.name,size:"size"in t?t.size:0,time:+new Date};if(!this.roomJoined)throw S.error("DyteChat.sendFileMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new A("Can`t sendFileMessage without joining room");await h(this,fa,Ro).sendChatMessage(g)}catch{throw new A("Error sending file message.")}}async sendTextMessage(t,e){return this.sendTextMessageInternal(t,e)}async sendImageMessage(t,e){return this.sendImageMessageInternal(t,e)}async sendFileMessage(t,e){return this.sendFileMessageInternal(t,e)}async sendMessage(t,e){return this.sendMessageInternal(t,e)}async editTextMessage(t,e,i){var r,s,n,a;if(h(this,Fi)!=="socket-service"){S.warn("editTextMessage::Coming soon!");return}if(!((s=(r=h(this,Oe).permissions)==null?void 0:r.chatPublic)!=null&&s.canSend)||!((a=(n=h(this,Oe).permissions)==null?void 0:n.chatPublic)!=null&&a.text)){S.error("editTextMessage::permission_denied");return}if(!e){S.error("editTextMessage::message_can_not_be_empty");return}h(this,zi).editMessage(t,e,xr.TEXT,i)}async editImageMessage(t,e,i){var r,s,n,a;if(h(this,Fi)!=="socket-service"){S.warn("editImageMessage::Coming soon!");return}if(!((s=(r=h(this,Oe).permissions)==null?void 0:r.chatPublic)!=null&&s.canSend)||!((a=(n=h(this,Oe).permissions)==null?void 0:n.chatPublic)!=null&&a.files)){S.error("editImageMessage::permission_denied");return}if(!e){S.error("editImageMessage::required_argument_image_can_not_be_empty");return}if(!["image/gif","image/jpeg","image/png"].includes(e.type)){S.error("sendImageMessage::image_type_not_supported",{dyteChat:{imageType:e.type}});return}try{const o=gi(),{getLocation:c,putLocation:d}=await o.getPresignedUrls(e.name,h(this,Oe).config.viewType);await o.uploadFile(e,d),h(this,zi).editMessage(t,c,xr.IMAGE,i)}catch{throw new A("Error editing image message.")}}async editFileMessage(t,e,i){var r,s,n,a;if(h(this,Fi)!=="socket-service"){S.warn("editFileMessage::Coming soon!");return}if(!((s=(r=h(this,Oe).permissions)==null?void 0:r.chatPublic)!=null&&s.canSend)||!((a=(n=h(this,Oe).permissions)==null?void 0:n.chatPublic)!=null&&a.files)){S.error("sendFileMessage::permission_denied");return}if(!e){S.error("sendFileMessage::required_argument_file_can_not_be_empty");return}try{const o=gi(),{getLocation:c,putLocation:d}=await o.getPresignedUrls(e.name,h(this,Oe).config.viewType);await o.uploadFile(e,d),h(this,zi).editMessage(t,JSON.stringify({link:c,name:e.name,size:"size"in e?e.size:0}),xr.FILE,i)}catch{throw new A("Error editing file message.")}}async editMessage(t,e,i){if(h(this,Fi)!=="socket-service"){S.warn("editMessage::Coming soon!");return}switch(e.type){case"text":{this.editTextMessage(t,e.message,i);break}case"image":{this.editImageMessage(t,e.image,i);break}case"file":{this.editFileMessage(t,e.file,i);break}default:{S.error("editMessage::message_type_not_supported",{dyteChat:{messageType:e.type}});break}}}async deleteMessage(t,e){if(h(this,Fi)!=="socket-service"){S.warn("editMessage::Coming soon!");return}h(this,zi).deleteMessage(t,e)}getMessagesByUser(t){return this.messages.filter(e=>e.userId===t)}getMessagesByType(t){return this.messages.filter(e=>e.type===t)}async pin(t){if(h(this,Fi)!=="socket-service"){if(!this.roomJoined)throw new A("Can`t pin message without joining room");await h(this,fa,Ro).pinChatMessage({id:t})}}async unpin(t){if(h(this,Fi)!=="socket-service"){if(!this.roomJoined)throw new A("Can`t unpin message without joining room");await h(this,fa,Ro).unpinChatMessage({id:t})}}async getMessages(t,e,i,r=0,s=void 0){const n=await h(this,zi).getChatMessagesPaginated(t,e,i,r,s);return{messages:n.messages.map(a=>Vn.formatSocketServiceMessage(a)),next:n.next}}async createChannel(t,e,i={}){if(!t||t.trim().length===0)throw new A("channel name cannot be empty.","0510");e.push(h(this,Oe).userId);const r=[...new Set(e)];return await h(this,hd).createChannel(t.trim(),r,i.displayPictureUrl,i.visibility,i.isDirectMessage)}updateChannel(t,e){var i,r,s,n;const a=this.channels.find(c=>c.id===t),o={memberIds:(i=e.memberIds)!=null?i:a.memberIds,displayName:(r=e.displayName)!=null?r:a.displayName,displayPictureUrl:(s=e.displayPictureUrl)!=null?s:a.displayPictureUrl,visibility:(n=e.visibility)!=null?n:a.visibility};return h(this,hd).updateChannel(t,o)}async sendMessageToChannel(t,e,i={}){return this.sendMessageInternal(t,null,e,i)}async getChannelMembers(t){return h(this,hd).getChannelMembers(t)}async searchMessages(t,e={}){if(!ee.hasFeature(re.FEAT_CHAT_SDK_SEARCH))throw new A("searchMessages is temporarily disabled!");return(await h(this,zi).searchMessages(t,e)).map(Vn.formatSocketServiceMessage)}async markLastReadMessage(t,e){await h(this,zi).markLastReadMessage(t,e);const i=this.channels.find(r=>r.id===t);if(i){const r={...i,unreadCount:0};this.channels=this.channels.map(s=>s.id===t?r:s),this.emit("channelMessageUpdate",r)}}get pinned(){return this.messages.filter(t=>t.pinned)}},Oe=new WeakMap,pd=new WeakMap,zi=new WeakMap,hd=new WeakMap,Fi=new WeakMap,fa=new WeakSet,Ro=function(){return si()},$x);Ji([E.trace("DyteChat.sendTextMessage")],Ei.prototype,"sendTextMessage",1);Ji([E.trace("DyteChat.sendImageMessage")],Ei.prototype,"sendImageMessage",1);Ji([E.trace("DyteChat.sendFileMessage")],Ei.prototype,"sendFileMessage",1);Ji([E.trace("DyteChat.sendMessage")],Ei.prototype,"sendMessage",1);Ji([E.trace("DyteChat.editTextMessage")],Ei.prototype,"editTextMessage",1);Ji([E.trace("DyteChat.editImageMessage")],Ei.prototype,"editImageMessage",1);Ji([E.trace("DyteChat.editFileMessage")],Ei.prototype,"editFileMessage",1);Ji([E.trace("DyteChat.editMessage")],Ei.prototype,"editMessage",1);Ji([E.trace("DyteChat.deleteMessage")],Ei.prototype,"deleteMessage",1);Ji([E.trace("DyteChat.createChannel")],Ei.prototype,"createChannel",1);Ji([E.trace("DyteChat.updateChannel")],Ei.prototype,"updateChannel",1);Ji([E.trace("DyteChat.sendMessageToChannel")],Ei.prototype,"sendMessageToChannel",1);Ji([E.trace("DyteChat.getChannelMembers")],Ei.prototype,"getChannelMembers",1);Ji([E.trace("DyteChat.searchMessages")],Ei.prototype,"searchMessages",1);Ji([E.trace("DyteChat.markLastReadMessage")],Ei.prototype,"markLastReadMessage",1);Ei=Ji([qi(t=>{throw new A(t.message,"0500")})],Ei);var Ore=Object.defineProperty,Mre=Object.getOwnPropertyDescriptor,Dre=(t,e,i,r)=>{for(var s=r>1?void 0:r?Mre(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Ore(e,i,s),s},Rg,eb,Tu,zx;const hs=(zx=class{constructor(t,e,i,r,s){R(this,Rg),y(this,"chat"),y(this,"chatSocketHandler"),y(this,"chatChannelSocketHandler"),y(this,"self"),R(this,Tu,void 0),this.chatSocketHandler=t,this.chatChannelSocketHandler=e,I(this,Tu,i),this.chat=new Ei(t,e,i,r,s),this.self=r,this.setupEvents()}get roomJoined(){var t;return((t=h(this,Rg,eb))==null?void 0:t.roomJoined)===!0}static async init(t,e,i,r,s){const n=RS(i.config.viewType,s)?"socket-service":"room-node";return S.info(`Using socket server :: ${n} for chat`),new hs(t,e,n,i,r)}static formatMessage(t){return{...t,time:new Date(t.time),type:ul[t.type]}}static formatSocketServiceMessage(t){const e=t.createdAt*1e3,i={displayName:t.displayName,id:t.chatId,time:e,timeMs:t.createdAtMs,type:t.payloadType,isEdited:t.isEdited,userId:t.userId,targetUserIds:t.targetUserIds,channelId:t.channelId,channelIndex:t.channelIndex,message:"",link:"",name:"",size:0};switch(i.type){case xr.TEXT:{i.message=t.payload;break}case xr.IMAGE:{i.link=t.payload;break}case xr.FILE:{const{link:r,name:s,size:n}=JSON.parse(t.payload);i.link=r,i.name=s,i.size=n;break}}return hs.formatMessage(i)}async getChatMessages(){if(this.self.config.viewType==="LIVESTREAM"||this.self.config.viewType==="CHAT"||ee.hasFeature(re.FEAT_PAGINATED_CHAT))return;if(h(this,Tu)==="socket-service"){const e=await this.chatSocketHandler.getChatMessages();if(!(e!=null&&e.payload))return;const i=NO.fromBinary(e.payload).messages;this.chat.messages=i.map(r=>hs.formatSocketServiceMessage(r));return}if(!this.roomJoined){S.error("ChatController.getChatMessages.RoomNodeClientSocketUsed_WithoutRoomJoin");return}const{messages:t}=(await h(this,Rg,eb).getChatMessages()).payload;this.chat.messages=t.filter(e=>ul[e.type]!=="poll").map(hs.formatMessage)}async getAllChannels(){this.self.config.viewType==="CHAT"&&(this.chat.channels=await this.chatSocketHandler.getAllChannels())}setupEvents(){h(this,Tu)==="socket-service"?x.onAsync(T.SOCKET_SERVICE_ROOM_JOINED,async()=>{this.getChatMessages(),await this.getAllChannels()}):x.onAsync(T.ROOM_JOINED,async()=>{await this.getChatMessages()}),this.chatSocketHandler.on(ti.sendMessageToRoom,t=>{const e=hs.formatSocketServiceMessage(t.message);if(!e.channelId)this.chat.messages=[...this.chat.messages,e];else{const i=this.chat.channels.find(r=>r.id===e.channelId);i&&(i.latestMessage=e,i.unreadCount+=1,this.chat.emit("channelMessageUpdate",i))}this.chat.emit("chatUpdate",{action:"add",message:e,messages:this.chat.messages})}),this.chatSocketHandler.on(ti.sendMessageToPeers,t=>{const e=hs.formatSocketServiceMessage(t.message);this.chat.messages=[...this.chat.messages,e],this.chat.emit("chatUpdate",{action:"add",message:e,messages:this.chat.messages})}),this.chatSocketHandler.on(ti.editMessage,t=>{const e=hs.formatSocketServiceMessage(t.message);if(e.channelId){this.chat.emit("chatUpdate",{action:"edit",message:e,messages:this.chat.messages});return}const i=this.chat.messages.findIndex(r=>r.id===e.id);i!==-1&&(this.chat.messages[i]=e,this.chat.emit("chatUpdate",{action:"edit",message:e,messages:this.chat.messages}))}),this.chatSocketHandler.on(ti.deleteMessage,t=>{if(t.channelId){this.chat.emit("chatUpdate",{action:"delete",message:{id:t.chatId,channelId:t.channelId},messages:this.chat.messages});return}const e=this.chat.messages.findIndex(r=>r.id===t.chatId);if(e===-1)return;const[i]=this.chat.messages.splice(e,1);this.chat.emit("chatUpdate",{action:"delete",message:i,messages:this.chat.messages})}),this.chatChannelSocketHandler.on(ic.createChatChannel,t=>{const[e]=t.chatChannels,i=Oc.formatChannel(e);this.chat.channels.push(i),this.chat.emit("channelCreate",i)}),this.chatChannelSocketHandler.on(ic.updateChatChannel,t=>{const[e]=t.chatChannels,i=Oc.formatChannel(e);this.chat.channels=this.chat.channels.map(r=>r.id===i.id?i:r),this.chat.emit("channelUpdate",i)}),x.on(T.NEW_CHAT_MESSAGE,t=>{if(ul[t==null?void 0:t.type]==="poll")return;const e=hs.formatMessage(t);this.chat.messages=[...this.chat.messages,e],this.chat.emit("chatUpdate",{action:"add",message:e,messages:this.chat.messages})}),x.on(T.PIN_CHAT_MESSAGE,async t=>{const e=hs.formatMessage(t),i=this.chat.messages.findIndex(r=>r.id===e.id);this.chat.messages[i]=e,this.chat.emit("pinMessage",{message:e,messages:this.chat.messages})}),x.on(T.UNPIN_CHAT_MESSAGE,async t=>{const e=hs.formatMessage(t),i=this.chat.messages.findIndex(r=>r.id===e.id);this.chat.messages[i]=e,this.chat.emit("unpinMessage",{message:e,messages:this.chat.messages})})}},Rg=new WeakSet,eb=function(){return si()},Tu=new WeakMap,zx);let Vn=hs;Dre([E.trace("ChatController.setupEvents")],Vn.prototype,"setupEvents",1);var Lre=Object.defineProperty,Nre=Object.getOwnPropertyDescriptor,ty=(t,e,i,r)=>{for(var s=r>1?void 0:r?Nre(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Lre(e,i,s),s},ls,xu,Pu,Ag,tb,Fx;const pM=(Fx=class{constructor(t,e,i,r){R(this,Ag),y(this,"plugins"),R(this,ls,void 0),R(this,xu,void 0),R(this,Pu,void 0),I(this,ls,t),I(this,Pu,e),I(this,xu,i),this.plugins=r,this.setupEvents()}get roomJoined(){var t;return((t=h(this,Ag,tb))==null?void 0:t.roomJoined)===!0}static async init(t,e,i,r,s,n,a){const o=AS(s.config.viewType,a)?"socket-service":"room-node";S.info(`Using socket server ${o} for plugin`);const c=new pw;return t.forEach(d=>{const u=new sh(d,e,o,s,n,r);c.all.add(u)}),s.config.isV2===!1&&s.config.setDisabledPlugins(c.all.toArray().map(d=>d.id)),new pM(e,i,o,c)}async getRoomPlugins(){if(h(this,xu)==="socket-service"){const{plugins:e}=await h(this,ls).getActivePlugins();await Promise.all(e.map(i=>this.enablePlugin({id:i.pluginId,enabledBy:i.enabledBy})));return}if(!this.roomJoined){S.error("PluginController.getRoomPlugins.RoomNodeClientSocketUsed_WithoutRoomJoin");return}const{payload:t}=await h(this,Ag,tb).getRoomState();await Promise.all(t.roomState.plugins.map(e=>this.enablePlugin(e)))}async enablePlugin({id:t,enabledBy:e}){const i=this.plugins.all.get(t);i&&(await i.activateForSelf(),i.enabledBy=e)}async disablePlugin({id:t}){const e=this.plugins.all.get(t);e&&e.deactivateForSelf()}sendIframeEventOld(t,e){const{id:i}=e,r=this.plugins.all.get(i);r&&r.sendIframeEvent({type:t,payload:e})}sendIframeEvent(t,e,i,r){const s=this.plugins.all.get(e);e&&s.sendIframeEvent({type:t,uuid:i,payload:r})}broadcastIframeEventOld(t,e){this.plugins.active.forEach(i=>{this.sendIframeEventOld(t,{...e,id:i.id})})}broadcastIframeEvent(t,e){this.plugins.active.forEach(i=>{this.sendIframeEvent(t,i.id,"",e)})}setupEvents(){if(this.plugins.all.on("stateUpdate",({active:t,id:e})=>{if(t){this.plugins.active.add(this.plugins.all.get(e));return}this.plugins.active.delete(e)}),x.onAsync(T.ROOM_JOINED,async()=>{await this.getRoomPlugins(),S.debug("[ROOM_JOINED] resolved request to fetch plugins.")}),h(this,xu)==="socket-service"){h(this,ls).on(pe.addPlugin,async t=>{var e;const i=t.pluginId;(e=this.plugins.all.get(i))!=null&&e.active||await this.enablePlugin({id:i,enabledBy:t.enabledBy})}),h(this,ls).on(pe.removePlugin,async t=>{var e;const i=t.pluginId;(e=this.plugins.all.get(i))!=null&&e.active&&await this.disablePlugin({id:i})}),[pe.enablePluginForPeers,pe.enablePluginForRoom].forEach(t=>{h(this,ls).on(t,async(e,i)=>{this.sendIframeEvent(t,e.pluginId,i,{enabledBy:e.enabledBy})})}),[pe.disablePluginForPeers,pe.disablePluginForRoom].forEach(t=>{h(this,ls).on(t,async(e,i)=>{this.sendIframeEvent(t,e.pluginId,i,{disabledBy:e.disabledBy})})}),[pe.customPluginEventToPeers,pe.customPluginEventToRoom].forEach(t=>{h(this,ls).on(t,async(e,i)=>{this.sendIframeEvent(t,e.pluginId,i,{data:JSON.parse(new TextDecoder().decode(e.pluginData))})})}),[pe.storeInsertKeys,pe.storeGetKeys,pe.storeDeleteKeys].forEach(t=>{h(this,ls).on(t,async(e,i)=>{var r;const s=(r=e.storeItems)==null?void 0:r.map(n=>{var a;return{timestamp:n.timestamp,peerId:n.peerId,payload:JSON.parse((a=n.payload)!=null&&a.length?new TextDecoder().decode(n.payload):"{}"),key:n.storeKey}});this.sendIframeEvent(t,e.pluginId,i,{storeName:e.storeName,storeItems:s})})}),h(this,ls).on(pe.storeDelete,async(t,e)=>{this.sendIframeEvent(pe.storeDelete,t.pluginId,e,{storeName:t.storeName})}),h(this,Pu).on(ti.sendMessageToPeers,t=>{const e=Vn==null?void 0:Vn.formatSocketServiceMessage(t.message);this.broadcastIframeEvent(ei.chatMessage,{message:e})}),h(this,Pu).on(ti.sendMessageToRoom,t=>{const e=Vn==null?void 0:Vn.formatSocketServiceMessage(t.message);this.broadcastIframeEvent(ei.chatMessage,{message:e})}),x.on(T.PEER_JOINED,t=>{this.broadcastIframeEvent(ei.peerJoined,t)}),x.on(T.PEER_CLOSED,t=>{this.broadcastIframeEvent(ei.peerLeft,t)});return}x.on(T.ENABLE_PLUGIN,async({id:t,enabledBy:e})=>{await this.enablePlugin({id:t,enabledBy:e})}),x.on(T.DISABLE_PLUGIN,async({id:t})=>{await this.disablePlugin({id:t})}),[T.PLUGIN_DATA,T.PLUGIN_EVENT].forEach(t=>{x.on(t,e=>{this.sendIframeEventOld(t,e)})}),[T.PEER_JOINED,T.PEER_CLOSED,T.NEW_CHAT_MESSAGE].forEach(t=>{x.on(t,e=>{this.broadcastIframeEventOld(t,e)})})}},ls=new WeakMap,xu=new WeakMap,Pu=new WeakMap,Ag=new WeakSet,tb=function(){return si()},Fx);let Mh=pM;ty([E.trace("PluginController.getRoomPlugins")],Mh.prototype,"getRoomPlugins",1);ty([E.trace("PluginController.enableForSelf")],Mh.prototype,"enablePlugin",1);ty([E.trace("PluginController.disableForSelf")],Mh.prototype,"disablePlugin",1);ty([E.trace("PluginController.setupEvents")],Mh.prototype,"setupEvents",1);function Ure(){Ue.isElectron()&&window.dyteElectronGetDisplayMediaSource&&(navigator.mediaDevices.getDisplayMedia=async()=>{const t=await window.dyteElectronGetDisplayMediaSource({types:["window","screen"]});let e=[];if(t&&(Array.isArray(t)?e=t:e=[t]),!(e!=null&&e.length))throw new Error("Couldn't find any media source for screen share.");let i=e.find(s=>{var n;return(n=s.id)==null?void 0:n.includes("screen")});i=i??e[0];const r={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i.id}}};return await navigator.mediaDevices.getUserMedia(r)})}var jre=Object.defineProperty,$re=Object.getOwnPropertyDescriptor,zre=(t,e,i,r)=>{for(var s=r>1?void 0:r?$re(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&jre(e,i,s),s},Cu,Ig,va,Ru,Au,Vx;let gw=(Vx=class extends jt{constructor(t,e,i){super(),R(this,Cu),y(this,"items"),R(this,va,void 0),R(this,Ru,void 0),R(this,Au,void 0),I(this,va,t),I(this,Ru,e),I(this,Au,i),this.items=[]}get roomJoined(){var t;return((t=h(this,Cu,Ig))==null?void 0:t.roomJoined)===!0}async create(t,e,i=!1,r=!1){if(h(this,va).config.viewType!=="LIVESTREAM"&&!this.roomJoined)throw new A("Can't create polls without joining room");if(!h(this,va).permissions.polls.canCreate){S.error("DytePolls::create::permission_denied");return}if(!t||!e){S.error("DytePolls::question_and_options_can_not_be_empty",{dytePolls:{hasQuestion:!!t,optionsLength:e==null?void 0:e.length}});return}if(e.length<2){S.error("DytePolls::there_must_be_at_least_two_options",{dytePolls:{hasQuestion:!!t,optionsLength:e.length}});return}if(h(this,Au)==="socket-service"){await h(this,Ru).createPoll(t,e,i,r);return}const s={question:t,options:e,anonymous:i,hideVotes:r,createdBy:h(this,va).name,createdByUserId:h(this,va).userId};await h(this,Cu,Ig).newPoll(s)}async vote(t,e){if(!h(this,va).permissions.polls.canVote){S.error("DytePolls::vote::permission_denied");return}if(h(this,Au)==="socket-service"){await h(this,Ru).votePoll(t,e);return}const i={pollId:t,index:e};await h(this,Cu,Ig).votePoll(i)}},Cu=new WeakSet,Ig=function(){return si()},va=new WeakMap,Ru=new WeakMap,Au=new WeakMap,Vx);gw=zre([qi(t=>{throw new A(t.message,"0700")})],gw);var Fre=Object.defineProperty,Vre=Object.getOwnPropertyDescriptor,Bre=(t,e,i,r)=>{for(var s=r>1?void 0:r?Vre(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Fre(e,i,s),s},Og,Ao,Iu,Mg,ib,Bx;const Pd=(Bx=class{constructor(t,e,i){R(this,Mg),y(this,"polls"),R(this,Og,void 0),R(this,Ao,void 0),R(this,Iu,void 0),this.polls=new gw(t,e,i),I(this,Og,t),I(this,Ao,e),I(this,Iu,i),this.setupEvents()}static async init(t,e,i){const r=AO(t.config.viewType,i)?"socket-service":"room-node";return S.info(`Using socket server ${r} for polls`),new Pd(t,e,r)}canViewPolls(){return h(this,Og).permissions.polls.canView}setupEvents(){if(h(this,Iu)==="socket-service"){if(!this.canViewPolls())return;x.on(T.SOCKET_SERVICE_ROOM_JOINED,()=>{this.getPolls()}),h(this,Ao).on(An.createPoll,t=>{t.poll&&this.updatePoll(Pd.formatSocketServicePoll(t.poll))}),h(this,Ao).on(An.updatePoll,t=>{t.poll&&this.updatePoll(Pd.formatSocketServicePoll(t.poll))}),h(this,Ao).on(An.votePoll,t=>{t.poll&&this.updatePoll(Pd.formatSocketServicePoll(t.poll))})}else x.onAsync(T.ROOM_JOINED,async()=>{this.canViewPolls()&&this.getPolls()});x.on(T.UPDATE_POLL,async({poll:t})=>{this.updatePoll(t)})}updatePoll(t){if(!this.canViewPolls())return;const e=this.polls.items.findIndex(i=>i.id===t.id);if(e>-1){const i=JSON.stringify(this.polls.items[e]);this.polls.items[e]=t,i!==JSON.stringify(t)&&this.polls.emit("pollsUpdate",{polls:this.polls.items,newPoll:!1});return}this.polls.items=[...this.polls.items,t],this.polls.emit("pollsUpdate",{polls:this.polls.items,newPoll:!0})}async getPolls(){if(h(this,Iu)==="socket-service"){const t=await h(this,Ao).getPolls();if(!(t!=null&&t.payload))return;const{polls:e}=yte.fromBinary(t.payload);this.polls.items=e.map(i=>Pd.formatSocketServicePoll(i));return}if(h(this,Mg,ib)instanceof Je){const{polls:t}=(await h(this,Mg,ib).getPolls()).payload;this.polls.items=Object.values(t)}}static formatSocketServicePoll(t){const e=t.options.map(i=>({count:i.count,text:i.text,votes:i.votes.map(r=>({id:r.userId,name:r.name}))}));return{anonymous:t.anonymous,createdBy:t.createdBy,createdByUserId:t.createdByUserId,hideVotes:t.hideVotes,id:t.pollId,options:e,question:t.question,voted:t.votes}}},Og=new WeakMap,Ao=new WeakMap,Iu=new WeakMap,Mg=new WeakSet,ib=function(){return si()},Bx);let hM=Pd;Bre([E.trace("PollController.setupEvents")],hM.prototype,"setupEvents",1);class Hx extends VS{constructor(){super({onAddEvent:"remoteRequestAdd",onDeleteEvent:"remoteRequestRemove"})}add(e,i=!0){return super.add(e,i)}delete(e,i=!0,r=!1){return super.delete(e,i,r)}}var Go,Cd,Rd,Cm;const mw=class extends jt{constructor(t,e){super(),R(this,Go),y(this,"incomingRequests"),y(this,"outgoingRequests"),y(this,"active"),R(this,Rd,void 0),R(this,Cm,void 0),I(this,Cm,e),I(this,Rd,t),this.incomingRequests=new Hx,this.outgoingRequests=new Hx,this.active=null,this.mouseEvent=this.mouseEvent.bind(this),this.keyboardEvent=this.keyboardEvent.bind(this)}async requestControl(t){var e;if(!h(this,Cm).joined.get(t))throw new A("Invalid peer.");const i=(e=this.outgoingRequests)==null?void 0:e.toArray().find(n=>n.hostPeerId===t);if(i)return i.id;const r=Pv(),s=new ih({requestId:r,hostPeerId:t,remotePeerId:h(this,Rd).id,state:ll.PENDING});return this.outgoingRequests.add(s),await h(this,Go,Cd).requestRemoteControl(s),this.emit("remoteUpdate",{payload:{request:{id:s.id,hostPeerId:s.hostPeerId,remotePeerId:s.remotePeerId}},type:Fn.REQUEST_SENT}),r}async acceptControl(t){var e;if(((e=this.active)==null?void 0:e.id)===t)return;const i=this.incomingRequests.get(t);if(!i)throw new A("No request found.");i.state=ll.ACCEPTED,this.endControl(),this.active=i,h(this,Go,Cd).acceptRemoteControl(i),this.emit("remoteUpdate",{payload:{request:{id:this.active.id,hostPeerId:this.active.hostPeerId,remotePeerId:this.active.remotePeerId}},type:Fn.INCOMING_REQUEST_ACCEPTED})}async endControl(){if(!this.active)return;const t={...this.active};h(this,Go,Cd).terminateRemoteControl(this.active.hostPeerId===h(this,Rd).id?this.active.remotePeerId:this.active.hostPeerId,this.active),this.active=null,this.emit("remoteUpdate",{payload:{request:{id:t.id,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId}},type:t.hostPeerId===h(this,Rd).id?Fn.INCOMING_REQUEST_ENDED:Fn.OUTGOING_REQUEST_ENDED})}async keyboardEvent(t){if(!this.active)return;const e=mw.getFormattedKeyboardEvent(t);if(e){const i={eventType:th.KEYBOARD,keyboardEvent:e};h(this,Go,Cd).sendEventRemoteControl(this.active.hostPeerId,this.active.id,i)}}async mouseEvent(t,e){if(!this.active)return;const i=mw.getFormattedRemoteMouseEvent(t,e);if(i){const r={eventType:th.MOUSE,mouseEvent:i};h(this,Go,Cd).sendEventRemoteControl(this.active.hostPeerId,this.active.id,r)}}static getFormattedRemoteMouseEvent(t,e){const i=e.getBoundingClientRect();return{type:t.type,position:{x:Math.floor(t.x-i.left),y:Math.floor(t.y-i.top)},boundingRect:{width:i.width,height:i.height}}}static getFormattedKeyboardEvent(t){return t.type==="keydown"?{type:t.type,key:t.key}:null}};let Hre=mw;Go=new WeakSet,Cd=function(){return si()},Rd=new WeakMap,Cm=new WeakMap;var Rm,fw;const vw=class{constructor(t,e){y(this,"remote"),y(this,"hostPeetId"),y(this,"remotePeetId"),y(this,"remoteRequestTokens"),y(this,"activeRemoteToken"),R(this,Rm,void 0),R(this,fw,void 0),I(this,Rm,t),I(this,fw,e),this.hostPeetId=t.id,this.remote=new Hre(t,e),this.setupEvents()}setupEvents(){x.on(T.MESSAGE,t=>{var e;if(t.remoteRequestType===zn.REQUEST&&(this.remote.incomingRequests.add(new ih({requestId:t.remoteRequestId,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId,state:ll.PENDING})),this.remote.emit("remoteUpdate",{payload:{request:{id:t.remoteRequestId,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId}},type:Fn.REQUEST_RECEIVED})),t.remoteRequestType===zn.ACCEPT){const i=this.remote.outgoingRequests.get(t.remoteRequestId);if(!i)throw new A("There is no pending remote control request to accept.");this.remote.endControl(),i.state=ll.ACCEPTED,this.remote.active=new ih({requestId:t.remoteRequestId,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId,state:ll.ACCEPTED}),this.remote.emit("remoteUpdate",{payload:{request:{id:t.remoteRequestId,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId}},type:Fn.OUTGOING_REQUEST_ACCEPTED})}t.remoteRequestType===zn.END&&(((e=this.remote.active)==null?void 0:e.id)===t.remoteRequestId&&(this.remote.active=null),this.remote.emit("remoteUpdate",{payload:{request:{id:t.remoteRequestId,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId}},type:t.hostPeerId===h(this,Rm).id?Fn.INCOMING_REQUEST_ENDED:Fn.OUTGOING_REQUEST_ENDED})),t.remoteRequestType===zn.EVENT&&this.remote.active&&this.remote.active.id===t.remoteRequestId&&window.DyteRobot&&(t.remoteEvent.eventType===th.MOUSE?vw.executeMouseEvent(t.remoteEvent.mouseEvent):t.remoteEvent.eventType===th.KEYBOARD&&vw.executeKeyboardEvent(t.remoteEvent.keyboardEvent))}),x.on(T.PEER_CLOSED,({id:t})=>{var e,i,r,s,n,a,o,c;[(i=(e=this.remote)==null?void 0:e.active)==null?void 0:i.hostPeerId,(s=(r=this.remote)==null?void 0:r.active)==null?void 0:s.remotePeerId].includes(t)&&this.remote.endControl(),(a=(n=this.remote)==null?void 0:n.incomingRequests)==null||a.toArray().forEach(d=>{[d.hostPeerId,d.remotePeerId].includes(t)&&this.remote.incomingRequests.delete(d.id)}),(c=(o=this.remote)==null?void 0:o.outgoingRequests)==null||c.toArray().forEach(d=>{[d.hostPeerId,d.remotePeerId].includes(t)&&this.remote.outgoingRequests.delete(d.id)})})}static executeMouseEvent(t){const e=window.screen.width*t.position.x/t.boundingRect.width,i=window.screen.height*t.position.y/t.boundingRect.height,r={width:window.screen.width,height:window.screen.height};switch(t.type){case Tm.LEFT_CLICK:window.DyteRobot.mouse.leftClick(e,i,r);break;case Tm.RIGHT_CLICK:window.DyteRobot.mouse.rightClick(e,i,r);break;case Tm.MOVE:window.DyteRobot.mouse.moveTo(e,i,r);break}}static executeKeyboardEvent(t){switch(t.type){case"keydown":window.DyteRobot.keyboard.press(t.key);break}}};let Gre=vw;Rm=new WeakMap,fw=new WeakMap;var Wre=Object.defineProperty,qre=(t,e,i)=>e in t?Wre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Jre=(t,e,i)=>(qre(t,typeof e!="symbol"?e+"":e,i),i),GS=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},z=(t,e,i)=>(GS(t,e,"read from private field"),i?i.call(t):e.get(t)),Mt=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Pt=(t,e,i,r)=>(GS(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),Dt=(t,e,i)=>(GS(t,e,"access private method"),i),Ta,Wo,qo,Lt,Ad,vt,Ht,xa,ii,On,Jr,pl,Mn,yw,gM,Xu,Am,bw,mM,WS,fM,hl,nh,Sp,Ff,Vf,qS,gl,ah,Ep,Bf,JS={exports:{}},ml=typeof Reflect=="object"?Reflect:null,Gx=ml&&typeof ml.apply=="function"?ml.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)},Im;ml&&typeof ml.ownKeys=="function"?Im=ml.ownKeys:Object.getOwnPropertySymbols?Im=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Im=function(t){return Object.getOwnPropertyNames(t)};function Kre(t){console&&console.warn&&console.warn(t)}var vM=Number.isNaN||function(t){return t!==t};function nt(){nt.init.call(this)}JS.exports=nt;JS.exports.once=Xre;nt.EventEmitter=nt;nt.prototype._events=void 0;nt.prototype._eventsCount=0;nt.prototype._maxListeners=void 0;var Wx=10;function iy(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(nt,"defaultMaxListeners",{enumerable:!0,get:function(){return Wx},set:function(t){if(typeof t!="number"||t<0||vM(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Wx=t}});nt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};nt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||vM(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function yM(t){return t._maxListeners===void 0?nt.defaultMaxListeners:t._maxListeners}nt.prototype.getMaxListeners=function(){return yM(this)};nt.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r=t==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var n;if(e.length>0&&(n=e[0]),n instanceof Error)throw n;var a=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw a.context=n,a}var o=s[t];if(o===void 0)return!1;if(typeof o=="function")Gx(o,this,e);else for(var c=o.length,d=EM(o,c),i=0;i<c;++i)Gx(d[i],this,e);return!0};function bM(t,e,i,r){var s,n,a;if(iy(i),n=t._events,n===void 0?(n=t._events=Object.create(null),t._eventsCount=0):(n.newListener!==void 0&&(t.emit("newListener",e,i.listener?i.listener:i),n=t._events),a=n[e]),a===void 0)a=n[e]=i,++t._eventsCount;else if(typeof a=="function"?a=n[e]=r?[i,a]:[a,i]:r?a.unshift(i):a.push(i),s=yM(t),s>0&&a.length>s&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,Kre(o)}return t}nt.prototype.addListener=function(t,e){return bM(this,t,e,!1)};nt.prototype.on=nt.prototype.addListener;nt.prototype.prependListener=function(t,e){return bM(this,t,e,!0)};function Yre(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function wM(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},s=Yre.bind(r);return s.listener=i,r.wrapFn=s,s}nt.prototype.once=function(t,e){return iy(e),this.on(t,wM(this,t,e)),this};nt.prototype.prependOnceListener=function(t,e){return iy(e),this.prependListener(t,wM(this,t,e)),this};nt.prototype.removeListener=function(t,e){var i,r,s,n,a;if(iy(e),r=this._events,r===void 0)return this;if(i=r[t],i===void 0)return this;if(i===e||i.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if(typeof i!="function"){for(s=-1,n=i.length-1;n>=0;n--)if(i[n]===e||i[n].listener===e){a=i[n].listener,s=n;break}if(s<0)return this;s===0?i.shift():Qre(i,s),i.length===1&&(r[t]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this};nt.prototype.off=nt.prototype.removeListener;nt.prototype.removeAllListeners=function(t){var e,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var s=Object.keys(i),n;for(r=0;r<s.length;++r)n=s[r],n!=="removeListener"&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=i[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this};function _M(t,e,i){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?i?[s.listener||s]:[s]:i?Zre(s):EM(s,s.length)}nt.prototype.listeners=function(t){return _M(this,t,!0)};nt.prototype.rawListeners=function(t){return _M(this,t,!1)};nt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):SM.call(t,e)};nt.prototype.listenerCount=SM;function SM(t){var e=this._events;if(e!==void 0){var i=e[t];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}nt.prototype.eventNames=function(){return this._eventsCount>0?Im(this._events):[]};function EM(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}function Qre(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Zre(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}function Xre(t,e){return new Promise(function(i,r){function s(a){t.removeListener(e,n),r(a)}function n(){typeof t.removeListener=="function"&&t.removeListener("error",s),i([].slice.call(arguments))}kM(t,e,n,{once:!0}),e!=="error"&&ese(t,s,{once:!0})})}function ese(t,e,i){typeof t.on=="function"&&kM(t,"error",e,i)}function kM(t,e,i,r){if(typeof t.on=="function")r.once?t.once(e,i):t.on(e,i);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(n){r.once&&t.removeEventListener(e,s),i(n)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var tse=JS.exports;class ise extends C{constructor(){super("message.v1.SocketMessage",[{no:1,name:"event",kind:"scalar",T:13},{no:2,name:"id",kind:"scalar",opt:!0,T:9},{no:3,name:"payload",kind:"scalar",opt:!0,T:12},{no:4,name:"metadata",kind:"scalar",opt:!0,T:12}])}}const qx=new ise;class TM{static encode(e){return qx.toBinary(e)}static decode(e){return qx.fromBinary(new Uint8Array(e))}}function rse(t,e){return Math.floor(Math.random()*(e-t+1)+t)}class sse{constructor(e={}){Jre(this,"opts"),Mt(this,Ta,void 0),this.opts={initialTimeout:e.initialTimeout||1e3,maxTimeout:e.maxTimeout||1e4,factor:e.factor||2},Pt(this,Ta,0)}async wait(){Pt(this,Ta,z(this,Ta)+1);const e=rse(0,Math.min(this.opts.maxTimeout,this.opts.initialTimeout*2**z(this,Ta)));await new Promise(i=>{setTimeout(i,e)})}getAttempts(){return z(this,Ta)}reset(){Pt(this,Ta,0)}}Ta=new WeakMap;const ya={debug:0,info:1,warn:2,error:3};class nse{constructor(e){Mt(this,Wo,void 0),Mt(this,qo,void 0),Pt(this,Wo,console),Pt(this,qo,e)}debug(...e){ya[z(this,qo)]>ya.debug||z(this,Wo).debug("[Sockrates]:",...e)}info(...e){ya[z(this,qo)]>ya.info||z(this,Wo).info("[Sockrates]:",...e)}warn(...e){ya[z(this,qo)]>ya.warn||z(this,Wo).warn("[Sockrates]:",...e)}error(...e){ya[z(this,qo)]>ya.error||z(this,Wo).error("[Sockrates]:",...e)}}Wo=new WeakMap;qo=new WeakMap;var xM=(t=>(t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSING=2]="CLOSING",t[t.CLOSED=3]="CLOSED",t))(xM||{});const ase="2",ose="3";class cse{constructor(e,i){Mt(this,yw),Mt(this,Xu),Mt(this,bw),Mt(this,WS),Mt(this,hl),Mt(this,Sp),Mt(this,Vf),Mt(this,gl),Mt(this,Ep),Mt(this,Lt,void 0),Mt(this,Ad,void 0),Mt(this,vt,void 0),Mt(this,Ht,void 0),Mt(this,xa,void 0),Mt(this,ii,void 0),Mt(this,On,void 0),Mt(this,Jr,void 0),Mt(this,pl,void 0),Mt(this,Mn,void 0);var r,s,n,a,o,c,d,u,p,g;Pt(this,Ad,e),Pt(this,xa,[]),Pt(this,ii,new tse),Pt(this,On,!0),Pt(this,Jr,!1),Pt(this,vt,i??{}),(r=z(this,vt)).autoReconnect!=null||(r.autoReconnect=!0),(s=z(this,vt)).retryConnectionInterval!=null||(s.retryConnectionInterval=1e3),(n=z(this,vt)).pingTimeout!=null||(n.pingTimeout=3e4),(a=z(this,vt)).connectionTimeout!=null||(a.connectionTimeout=5e3),(o=z(this,vt)).debug!=null||(o.debug=!0),(c=z(this,vt)).maxReconnectionAttempts!=null||(c.maxReconnectionAttempts=10),(d=z(this,vt)).disconnectOnPingTimeout!=null||(d.disconnectOnPingTimeout=!0),(u=z(this,vt)).queueOnDisconnect!=null||(u.queueOnDisconnect=!1),(p=z(this,vt)).flushOnReconnect!=null||(p.flushOnReconnect=!1),Pt(this,Ht,(g=z(this,vt).logger)!=null?g:new nse(z(this,vt).debug?"debug":"info")),Pt(this,Mn,new sse)}get readyState(){var e;return(e=z(this,Lt))==null?void 0:e.readyState}get url(){return z(this,Ad)}get config(){return z(this,vt)}get sendQueue(){return z(this,xa)}flush(){if(!z(this,vt).queueOnDisconnect)return!1;const e=[];return z(this,xa).forEach(i=>{this.send(i.event,i.id,i.payload,i.metadata)||e.push(i)}),Pt(this,xa,e),z(this,xa)}async connect(e=!1){if(!e&&[0,1].includes(this.readyState)){z(this,Ht).debug("Websocket was already connecting or connected.");return}if(z(this,On)!==!1)return new Promise((i,r)=>{Dt(this,gl,ah).call(this),Dt(this,Ep,Bf).call(this);try{Pt(this,Lt,new WebSocket(Dt(this,yw,gM).call(this,z(this,Ad)))),z(this,Lt).binaryType="arraybuffer",z(this,Ht).debug("Connecting to",z(this,Ad));const s=setTimeout(()=>{z(this,Ht).debug("Connection timeout. Closing socket"),Pt(this,On,!0),Dt(this,Ep,Bf).call(this),z(this,Lt).close(3001,"Connection Timeout"),z(this,vt).autoReconnect&&!z(this,Jr)&&(z(this,ii).emit("reconnecting"),Dt(this,hl,nh).call(this)),r(new Error("Connection timed out!"))},z(this,vt).connectionTimeout);z(this,Lt).onopen=()=>{z(this,Ht).debug(`Ready State: ${xM[z(this,Lt).readyState]}`),s&&clearTimeout(s),Dt(this,Vf,qS).call(this),z(this,ii).emit("connected"),z(this,vt).flushOnReconnect&&this.flush(),i()},z(this,Lt).onclose=n=>{try{s&&clearTimeout(s);const{code:a,reason:o}=n;if(r(o),z(this,Ht).debug("Socket closed. Close event:",n),z(this,Ht).debug("Connection closed code:",a),z(this,Ht).debug("Connection closed reason:",o),z(this,On)&&a!==1e3&&z(this,vt).autoReconnect&&!z(this,Jr)){z(this,ii).emit("reconnecting"),Dt(this,hl,nh).call(this);return}z(this,Jr)||z(this,ii).emit("disconnected",{code:a,reason:o})}catch(a){Dt(this,Xu,Am).call(this,a)}},z(this,Lt).onerror=n=>{Dt(this,Xu,Am).call(this,n)},z(this,Lt).onmessage=n=>Dt(this,bw,mM).call(this,n)}catch(s){Dt(this,Xu,Am).call(this,s,r)}})}send(e,i,r,s){const n={event:e,id:i,payload:r,metadata:s};if(z(this,vt).queueOnDisconnect&&(!z(this,Lt)||z(this,Lt).readyState!==1))return z(this,Ht).debug("Queuing message since socket is not connected!",n),z(this,xa).push(n),!1;const a=TM.encode(n);return Dt(this,Sp,Ff).call(this,a)}emit(e,i,r,s){return this.send(e,i,r,s)}sendRaw(e){return Dt(this,Sp,Ff).call(this,e)}receive(e,i){return z(this,ii).on(e.toString(),i)}on(e,i){if(typeof e=="string"&&(e==="connected"||e==="disconnected"||e==="errored"||e==="reconnected"||e==="reconnecting"||e==="reconnectAttempt"||e==="reconnectFailure"||e==="failed")){z(this,ii).on(e,i);return}this.receive(e,i)}removeAllListeners(){z(this,ii).removeAllListeners()}removeReceiver(e,i){this.removeListener(e,i)}removeListener(e,i){z(this,ii).removeListener(e.toString(),i)}removeReceivers(e){this.removeListeners(e)}removeListeners(e){z(this,ii).listeners(e.toString()).map(i=>this.removeListener(e,i))}disconnect(){Pt(this,On,!1),Dt(this,gl,ah).call(this),this.removeAllListeners(),z(this,Lt).close(1e3,"Sockrates disconnect method called.")}}Lt=new WeakMap;Ad=new WeakMap;vt=new WeakMap;Ht=new WeakMap;xa=new WeakMap;ii=new WeakMap;On=new WeakMap;Jr=new WeakMap;pl=new WeakMap;Mn=new WeakMap;yw=new WeakSet;gM=function(t){if(t.startsWith("ws://")||t.startsWith("wss://"))return t;if(t.startsWith("https://"))return`wss://${t.substring(8)}`;if(t.startsWith("http://"))return`ws://${t.substring(7)}`;throw new Error("Invalid URL. URL must start with http(s):// or ws(s)://.")};Xu=new WeakSet;Am=function(t,e){z(this,Ht).error("Error:",t),z(this,ii).emit("errored",{error:t}),e==null||e(t)};bw=new WeakSet;mM=function(t){if(t.data===ase){z(this,Ht).debug("Received ping from server"),Dt(this,Vf,qS).call(this),Dt(this,Sp,Ff).call(this,ose);return}z(this,Ht).debug("Received data:",t.data);const e=TM.decode(t.data),{id:i,payload:r}=e;z(this,ii).emit(e.event.toString(),{id:i,payload:r})};WS=new WeakSet;fM=function(){return z(this,Lt).readyState===1};hl=new WeakSet;nh=async function(t=!0){if(t&&z(this,Jr)){z(this,Ht).debug("Reconnect called when already in a reconnect loop. Ignoring.");return}if(z(this,Jr)||z(this,Mn).reset(),z(this,vt).maxReconnectionAttempts!==null&&z(this,Mn).getAttempts()>=z(this,vt).maxReconnectionAttempts){z(this,ii).emit("failed"),Pt(this,Jr,!1);return}Pt(this,Jr,!0),Dt(this,Ep,Bf).call(this),Dt(this,gl,ah).call(this);try{if(await z(this,Mn).wait(),z(this,On)===!1)return;if(z(this,Ht).debug(`Reconnection attempt ${z(this,Mn).getAttempts()}`),z(this,ii).emit("reconnectAttempt",{attempt:z(this,Mn).getAttempts()}),await this.connect(),!Dt(this,WS,fM).call(this))throw Error("Reconnect Failed");Pt(this,Jr,!1),z(this,ii).emit("reconnected")}catch{z(this,Ht).debug("Failed to reconnect."),z(this,ii).emit("reconnectFailure",{attempt:z(this,Mn).getAttempts()}),Dt(this,hl,nh).call(this,!1)}};Sp=new WeakSet;Ff=function(t){try{return z(this,Lt).send(t),!0}catch(e){return z(this,Ht).error(e.message),!1}};Vf=new WeakSet;qS=function(){this.config.disconnectOnPingTimeout&&(z(this,Ht).debug("Resetting ping timeout"),Dt(this,gl,ah).call(this),Pt(this,pl,setTimeout(()=>{var t;z(this,Ht).debug("Disconnecting the socket due to ping timeout"),Pt(this,On,!0);const e=3002,i="Ping timeout";(t=z(this,Lt))==null||t.close(e,i),z(this,ii).emit("disconnected",{code:e,reason:i}),z(this,vt).autoReconnect&&!z(this,Jr)&&(z(this,Ht).debug("Triggering reconnection due to ping timeout"),z(this,ii).emit("reconnecting"),Dt(this,hl,nh).call(this))},z(this,vt).pingTimeout)))};gl=new WeakSet;ah=function(){z(this,pl)&&(clearTimeout(z(this,pl)),Pt(this,pl,void 0))};Ep=new WeakSet;Bf=function(){z(this,Lt)&&(z(this,Lt).onopen=void 0,z(this,Lt).onerror=void 0,z(this,Lt).onmessage=void 0,z(this,Lt).onclose=void 0)};var dse=Object.defineProperty,lse=Object.getOwnPropertyDescriptor,Dh=(t,e,i,r)=>{for(var s=r>1?void 0:r?lse(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&dse(e,i,s),s};const Jx=65535;var Ou,Pi,Dg,Lg,rb,Kx;const PM=(Kx=class{constructor({peerId:t,roomName:e,authToken:i,url:r,capabilities:s}){R(this,Lg),R(this,Ou,void 0),R(this,Pi,void 0),R(this,Dg,void 0),y(this,"roomName"),y(this,"peerId"),y(this,"authToken"),y(this,"capabilities");var n;if(!t||!e||!i)throw new A("peerId, roomName, or authToken can not be empty");const{apiBase:a}=et;let o=PM.getSocketEdgeDomain(a);typeof Lf("socket_server_base")=="string"&&(o=Lf("socket_server_base"));const c=`wss://${o}`;this.roomName=e,this.peerId=t,this.authToken=i,this.capabilities=s;const d=new URL(`${r??c}/ws`),u={roomID:e,peerID:t,authToken:i,useMediaV2:s.includes("HIVE"),ping:s.includes("PING"),capabilities:s.map(p=>Nf[p]).join(" ")};Object.entries(u).forEach(([p,g])=>{d.searchParams.append(p,g.toString())}),I(this,Ou,d.href),I(this,Dg,t),I(this,Pi,new cse(h(this,Ou),{autoReconnect:!0,disconnectOnPingTimeout:(n=s.includes("PING"))!=null?n:!1,queueOnDisconnect:!0,flushOnReconnect:!1,logger:S}))}static getSocketEdgeDomain(t){let e="";return t.includes("api.cluster.dyte")||t.includes("api.dyte")?e="edge":t.includes("api.staging.dyte")?e="staging":t.includes("api.preprod.dyte")?e="preprod":t.includes("api.devel.dyte")&&(e="devel"),`socket-${e}.dyte.io`}get url(){return h(this,Ou)}async connect(){const t=()=>{S.info("SocketService::connect::Connected to socket-edge"),x.emit(T.SOCKET_SERVICE_CONNECTED)};this.onStateEvent("connected",t);const e=({reason:o,code:c})=>{S.info("SocketService::connect::Disconnected from socket-edge",{error:{code:c,reason:o}}),x.emit(T.SOCKET_SERVICE_DISCONNECTED),!(c<4e3||c>4002)&&(c===4e3?S.error("SocketService::connect::Bad Request",{error:{code:c,reason:o}}):c===4001?S.error("SocketService::connect::Unauthorized",{error:{code:c,reason:o}}):c===4002?S.error("SocketService::connect::Internal Error",{error:{code:c,reason:o}}):S.error("SocketService::connect::Unknown Error",{error:{code:c,reason:o}}))};this.onStateEvent("disconnected",e);const i=()=>{S.info("SocketService::connect::Reconnecting to socket-edge"),x.emit(T.SOCKET_SERVICE_RECONNECTING)};this.onStateEvent("reconnecting",i);const r=({attempt:o})=>{S.info("SocketService::connect::Attempting reconnect to socket-edge"),x.emit(T.SOCKET_SERVICE_RECONNECTION_ATTEMPT,{attempt:o})};this.onStateEvent("reconnectAttempt",r);const s=({attempt:o})=>{S.info("SocketService::connect::Reconnect attempt failed"),x.emit(T.SOCKET_SERVICE_RECONNECT_FAILURE,{attempt:o})};this.onStateEvent("reconnectFailure",s);const n=()=>{S.info("SocketService::connect::Reconnected to socket-edge"),x.emit(T.SOCKET_SERVICE_RECONNECTED)};this.onStateEvent("reconnected",n);const a=()=>{S.info("SocketService::connect::Socket-edge reconnects failed"),x.emit(T.SOCKET_SERVICE_FAILED)};this.onStateEvent("failed",a),await h(this,Pi).connect()}disconnect(){return h(this,Pi).disconnect()}get isConnected(){try{return h(this,Pi).readyState===1}catch{return!1}}sendMessage(t,e,i){const r={};return E.injectContext(r),h(this,Pi).send(t,i??Xe(this,Lg,rb).call(this),e,new TextEncoder().encode(JSON.stringify(r)))}sendMessagePromise(t,e,i){const r=parseInt({}.SOCKET_SERVICE_MESSAGE_REQUEST_TIMEOUT,10)||2e4;return this.sendMessagePromiseWithTimeout({event:t,timeout:r,protobuf:e,messageId:i})}sendMessagePromiseWithTimeout({event:t,timeout:e,protobuf:i,messageId:r}){return new Promise((s,n)=>{const a=(p,g)=>{h(this,Pi).removeListener(t,p),h(this,Pi).removeListener(Jx,g),h(this,Pi).removeListener(He.errorResponse,g)},o=r??Xe(this,Lg,rb).call(this),c={};E.injectContext(c);const d=({id:p,payload:g})=>{if(o===p){let m;try{const f=JY.fromBinary(g);m=new Error(f.errorMessage)}catch(f){m=new Error("failed to parse error message",{cause:f})}try{const f=XQ.fromBinary(g);m=new Error(f.message)}catch(f){m=new Error("failed to parse error message",{cause:f})}n(m),a(u,d)}},u=({id:p,payload:g})=>{o===p&&(s({id:p,payload:g}),a(u,d))};h(this,Pi).on(t,u),h(this,Pi).on(Jx,d),h(this,Pi).on(He.errorResponse,d),setTimeout(()=>{a(u,d),n(new Error("request timeout for callback"))},e),h(this,Pi).send(t,o,i,new TextEncoder().encode(JSON.stringify(c)))})}on(t,e){h(this,Pi).on(t,e)}onStateEvent(t,e){h(this,Pi).on(t,e)}flush(){return h(this,Pi).flush()}},Ou=new WeakMap,Pi=new WeakMap,Dg=new WeakMap,Lg=new WeakSet,rb=function(){return`${h(this,Dg)}-${(Math.random()+1).toString(36).substring(7)}`},Kx);let Wl=PM;Dh([E.trace("SocketService.connect")],Wl.prototype,"connect",1);Dh([E.trace("SocketService.disconnect")],Wl.prototype,"disconnect",1);Dh([E.trace("SocketService.sendMessage")],Wl.prototype,"sendMessage",1);Dh([E.trace("SocketService.sendMessagePromise")],Wl.prototype,"sendMessagePromise",1);Dh([E.trace("SocketService.sendMessagePromiseWithTimeout")],Wl.prototype,"sendMessagePromiseWithTimeout",1);var yi;class use{constructor(e){R(this,yi,void 0),I(this,yi,e)}addPlugin(e,i){h(this,yi).sendMessage(pe.addPlugin,wee.toBinary({pluginId:e,staggered:i}))}removePlugin(e){h(this,yi).sendMessage(pe.removePlugin,See.toBinary({pluginId:e,staggered:!1}))}async getActivePlugins(){const{payload:e}=await h(this,yi).sendMessagePromise(pe.getPlugins);return e?Gee.fromBinary(e):{plugins:[]}}customPluginEventToRoom(e,i,r){const s={pluginId:e,pluginData:new TextEncoder().encode(JSON.stringify(i))};h(this,yi).sendMessage(pe.customPluginEventToRoom,Oee.toBinary(s),r)}customPluginEventToPeers(e,i,r,s){const n={pluginId:e,peerIds:i,pluginData:new TextEncoder().encode(JSON.stringify(r))};h(this,yi).sendMessage(pe.customPluginEventToPeers,Dee.toBinary(n),s)}enablePluginForRoom(e,i){h(this,yi).sendMessage(pe.enablePluginForRoom,kee.toBinary({pluginId:e}),i)}enablePluginForPeers(e,i,r){h(this,yi).sendMessage(pe.enablePluginForPeers,Cee.toBinary({pluginId:e,peerIds:i}),r)}disablePluginForRoom(e,i){h(this,yi).sendMessage(pe.disablePluginForRoom,xee.toBinary({pluginId:e}),i)}disablePluginForPeers(e,i,r){h(this,yi).sendMessage(pe.disablePluginForPeers,Aee.toBinary({pluginId:e,peerIds:i}),r)}storeInsertKeys(e,i,r,s){const n={pluginId:e,storeName:i,insertKeys:r.map(a=>({storeKey:a.key,payload:new TextEncoder().encode(JSON.stringify(a.payload))}))};h(this,yi).sendMessage(pe.storeInsertKeys,px.toBinary(n),s)}storeGetKeys(e,i,r,s){const n={pluginId:e,storeName:i,getKeys:r.map(a=>({storeKey:a.key}))};h(this,yi).sendMessage(pe.storeGetKeys,jee.toBinary(n),s)}storeDeleteKeys(e,i,r,s){const n={pluginId:e,storeName:i,deleteKeys:r.map(a=>({storeKey:a.key}))};h(this,yi).sendMessage(pe.storeDeleteKeys,zee.toBinary(n),s)}storeDelete(e,i,r){h(this,yi).sendMessage(pe.storeDelete,Vee.toBinary({pluginId:e,storeName:i}),r)}getPluginDataOld(e,i){S.info("getPluginDataOld",{plugin:{id:e,storeName:i}})}storePluginDataOld(e,i,r){const s={pluginId:e,storeName:i,insertKeys:[{storeKey:r.key,payload:new TextEncoder().encode(JSON.stringify(r))}]};h(this,yi).sendMessage(pe.storeInsertKeys,px.toBinary(s))}on(e,i){let r;switch(e){case pe.addPlugin:case pe.enablePluginForPeers:case pe.enablePluginForRoom:{r=W1.fromBinary.bind(W1);break}case pe.removePlugin:case pe.disablePluginForPeers:case pe.disablePluginForRoom:{r=hx.fromBinary.bind(hx);break}case pe.customPluginEventToPeers:case pe.customPluginEventToRoom:{r=mx.fromBinary.bind(mx);break}case pe.storeInsertKeys:case pe.storeGetKeys:case pe.storeDeleteKeys:case pe.storeDelete:{r=gx.fromBinary.bind(gx);break}}h(this,yi).on(e,({payload:s,id:n})=>{const a=r(s);return i(a,n)})}}yi=new WeakMap;var pse=Object.defineProperty,hse=Object.getOwnPropertyDescriptor,ry=(t,e,i,r)=>{for(var s=r>1?void 0:r?hse(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&pse(e,i,s),s},gd,Yx;let Al=(Yx=class extends jt{constructor(t){super(),R(this,gd,void 0),y(this,"recordingState","IDLE"),y(this,"recordingId"),y(this,"recordingPeerIds",[]),I(this,gd,t)}get activeRecordingsCount(){var t,e;return(e=(t=this.recordingPeerIds)==null?void 0:t.length)!=null?e:0}setRecordingState(t){const e=this.recordingState;this.recordingState=t,e!==t&&this.emitCurrentRecordingState()}emitCurrentRecordingState(){this.emit("recordingUpdate",this.recordingState)}async start(){if(!h(this,gd).permissions.canRecord)throw S.error("DyteRecording::start::permission_denied"),new A("User does not have permission to start recording");if(this.recordingState==="STARTING"||this.recordingState==="RECORDING"||this.recordingState==="STOPPING")throw S.error("DyteRecording::start::recording_in_progress",{recording:{state:this.recordingState}}),new A(`Cant start recording, recordingState irregular: ${this.recordingState}`);this.setRecordingState("STARTING");try{const t=gi(),{recording:e={}}=et.defaults,i=await t.startRecording(e);this.recordingId=i}catch(t){throw S.error("DyteRecording::stop::recording_failed_to_start",{error:t}),this.setRecordingState("IDLE"),new A("Error while starting recording")}}async stop(){if(!h(this,gd).permissions.canRecord)throw S.error("DyteRecording::stop::permission_denied"),new A("User does not have permission to stop recording");if((this.recordingState!=="RECORDING"||!this.recordingId)&&(S.error("DyteRecording::stop::recording_not_in_progress",{recording:{state:this.recordingState,id:this.recordingId}}),await this.getRecordingId()),this.recordingState!=="RECORDING"||!this.recordingId)throw S.error("DyteRecording::stop::recording_not_in_progress",{recording:{state:this.recordingState,id:this.recordingId}}),new A(`Cant stop recording, recordingState irregular: ${this.recordingState}`);this.setRecordingState("STOPPING");try{const t=gi(),e=this.activeRecordingsCount===1?"IDLE":"RECORDING";await t.stopRecording(this.recordingId),this.recordingId=void 0,this.setRecordingState(e)}catch(t){throw S.error("DyteRecording::stop::recording_failed_to_stop",{error:t}),this.setRecordingState("RECORDING"),new A("Error while stopping recording")}}async getRecordingId(){if(!h(this,gd).permissions.canRecord)throw S.error("DyteRecording::getRecordingId::permission_denied"),new A("User does not have permission to stop recording");try{const t=gi(),{status:e,id:i}=await t.getActiveRecording();e==="RECORDING"&&(this.recordingState="RECORDING",this.recordingId=i)}catch(t){throw S.error("DyteRecording::getRecordingId::unable_to_get_recording_id",{error:t}),new A("Unable to get recording")}}},gd=new WeakMap,Yx);ry([E.trace("DyteRecording.start")],Al.prototype,"start",1);ry([E.trace("DyteRecording.stop")],Al.prototype,"stop",1);ry([E.trace("DyteRecording.getRecordingId")],Al.prototype,"getRecordingId",1);Al=ry([qi(t=>{throw new A(t.message,"1000")})],Al);var gse=Object.defineProperty,mse=Object.getOwnPropertyDescriptor,fse=(t,e,i,r)=>{for(var s=r>1?void 0:r?mse(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&gse(e,i,s),s};class CM{constructor(e){y(this,"recording"),this.recording=new Al(e),this.setupEvents()}setupEvents(){x.on(T.HIVE_RECORDING_STARTED,e=>{this.recording.recordingPeerIds.push(e),this.recording.setRecordingState("RECORDING")}),x.on(T.HIVE_RECORDING_STOPPED,()=>{this.recording.recordingPeerIds=[],this.recording.setRecordingState("IDLE")}),x.on(T.LEAVE_MEDIA_ROOM,()=>{this.recording.setRecordingState("IDLE")}),x.on(T.PEER_JOINED,async e=>{var i;(i=e.flags)!=null&&i.recorder&&(this.recording.recordingPeerIds.push(e.id),this.recording.setRecordingState("RECORDING"))}),x.on(T.PEER_CLOSED,e=>{this.recording.recordingPeerIds=vJ(this.recording.recordingPeerIds,e.id),this.recording.recordingPeerIds.length===0&&this.recording.setRecordingState("IDLE")}),x.onAsync(T.ROOM_JOINED,async e=>{var i;S.debug("[ROOM_JOINED] resolved request to fetch recordings.");const r=(i=e.peers)==null?void 0:i.filter(s=>{var n;return!!((n=s.flags)!=null&&n.recorder)});r.length?(this.recording.recordingPeerIds=r.map(s=>s.id),this.recording.setRecordingState("RECORDING")):(this.recording.recordingPeerIds=[],this.recording.setRecordingState("IDLE"))}),x.on(T.RECORDING_STARTED,()=>{this.recording.setRecordingState("RECORDING")}),x.on(T.RECORDING_STOPPED,()=>{this.recording.recordingId=void 0,this.recording.recordingPeerIds=[],this.recording.setRecordingState("IDLE")})}}fse([E.trace("RecordingController.setupEvents")],CM.prototype,"setupEvents",1);function vse(t){let e=0,i,r;if(!t)return e;for(i=0;i<t.length;i+=1)r=t.charCodeAt(i),e=(e<<5)-e+r,e|=0;return Math.abs(e)%100+1}class yse{static hasFeature(e){var i;return(i=ee.hasFeature(e))!=null?i:!1}static getFeatureValue(e){return ee.getValue(e)}static getAllFeatures(){return ee.getAllFlags()}}class KS{constructor(e,i,r){y(this,"logger"),y(this,"features"),y(this,"browserSpecs"),y(this,"callStats"),this.logger=e,this.features=i,this.browserSpecs=Ue,this.callStats=r}static init(e){return new KS(S,yse,e)}}class YS{constructor(e){y(this,"internals"),this.internals=e}static async init(){const e=KS.init(X);return new YS(e)}}var bse=Object.defineProperty,wse=Object.getOwnPropertyDescriptor,RM=(t,e,i,r)=>{for(var s=r>1?void 0:r?wse(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&bse(e,i,s),s},ep;class QS extends jt{constructor(e){super(),R(this,ep,void 0),y(this,"state","IDLE"),y(this,"playbackUrl"),y(this,"viewerCount"),I(this,ep,e),this.viewerCount=0}setLivestreamState(e){const i=this.state;this.state=e,i!==e&&this.emitCurrentLivestreamState()}emitCurrentLivestreamState(){this.emit("livestreamUpdate",this.state)}async start(){if(!h(this,ep).permissions.canLivestream)throw S.error("DyteLivestream::start::permission_denied"),new A("User does not have permission to start livestreaming");this.setLivestreamState("STARTING");try{const e=await gi().startLivestreaming();this.playbackUrl=e}catch(e){throw S.error("DyteRecording::stop::livestream_failed_to_start",{error:e}),this.setLivestreamState("IDLE"),new A("Error while starting livestream")}}async stop(){if(!h(this,ep).permissions.canLivestream)throw S.error("DyteLivestream::stop::permission_denied"),new A("User does not have permission to stop livestreaming");if(this.state!=="LIVESTREAMING")throw S.error("DyteLivestream::stop::inconsistent_state"),new A("Livestream not started yet");try{this.setLivestreamState("STOPPING"),await gi().stopLivestreaming()}catch(e){throw S.error("DyteLivestream::stop::livestream_failed_to_stop",{error:e}),this.setLivestreamState("STOPPING"),new A("Error while stopping livestream")}}}ep=new WeakMap;RM([E.trace("livestream.start")],QS.prototype,"start",1);RM([E.trace("livestream.stop")],QS.prototype,"stop",1);var _se=Object.defineProperty,Sse=Object.getOwnPropertyDescriptor,Ese=(t,e,i,r)=>{for(var s=r>1?void 0:r?Sse(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&_se(e,i,s),s},Jo,Ko;class AM{constructor(e,i){y(this,"livestream"),R(this,Jo,void 0),R(this,Ko,void 0),this.livestream=new QS(e),I(this,Ko,i),this.setupEvents()}async fetchInitialLivestreamingState(){const e=gi(),{status:i,playbackUrl:r}=await e.getActiveLivestream();this.livestream.playbackUrl=r,i==="LIVE"&&this.livestream.setLivestreamState("LIVESTREAMING")}setupEvents(){h(this,Ko).on(me.startedLivestream,e=>{this.livestream.playbackUrl=e.playbackUrl,this.livestream.setLivestreamState("LIVESTREAMING")}),h(this,Ko).on(me.stoppedLivestream,()=>{this.livestream.setLivestreamState("IDLE"),this.livestream.playbackUrl=void 0}),h(this,Ko).on(me.erroredLivestream,()=>{this.livestream.setLivestreamState("IDLE"),this.livestream.playbackUrl=void 0}),h(this,Ko).on(me.roomPeerCount,e=>{this.livestream.viewerCount=e.count,this.livestream.emit("viewerCountUpdate",e.count)}),x.on(T.PEER_JOINED,async e=>{var i;((i=e.flags)==null?void 0:i.hiddenParticipant)===!0&&e.recorderType==="LIVESTREAMER"&&(I(this,Jo,e.id),this.livestream.setLivestreamState("LIVESTREAMING"))}),x.on(T.PEER_CLOSED,e=>{e.id===h(this,Jo)&&(I(this,Jo,void 0),this.livestream.setLivestreamState("IDLE"))}),x.onAsync(T.ROOM_JOINED,async e=>{var i,r;S.debug("[ROOM_JOINED] resolved request to fetch livestream.");const s=(i=e.peers)==null?void 0:i.filter(n=>{var a;return((a=n.flags)==null?void 0:a.hiddenParticipant)===!0&&n.recorderType==="LIVESTREAMER"});s.length?(I(this,Jo,s&&((r=s[0])==null?void 0:r.id)),this.livestream.setLivestreamState("LIVESTREAMING")):(I(this,Jo,void 0),this.livestream.setLivestreamState("IDLE"))}),x.onAsync(T.LEAVE_MEDIA_ROOM,async()=>{if(!this.livestream.playbackUrl){S.info("Fetching livestreaming state on leave stage");try{await this.fetchInitialLivestreamingState()}catch{}}}),x.onAsync(T.SOCKET_SERVICE_ROOM_JOINED,async()=>{try{await this.fetchInitialLivestreamingState()}catch{}})}}Jo=new WeakMap,Ko=new WeakMap;Ese([E.trace("LivestreamController.setupEvents")],AM.prototype,"setupEvents",1);const rt=Zr(wS().permissions);var Se;const ww=class{constructor(t){if(R(this,Se,void 0),!t)throw S.error("DytePermissionsPreset::load_preset_permissions_failed"),new A("Could not load preset permissions.");I(this,Se,t)}static fromResponse(t){return new ww(t)}static default(){return new ww(rt)}get acceptWaitingRequests(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.acceptWaitingRequests)!=null?e:rt.acceptWaitingRequests}get requestProduceVideo(){var t,e,i;return((i=(e=(t=h(this,Se))==null?void 0:t.media)==null?void 0:e.video)==null?void 0:i.canProduce)===bi.CanRequest}get requestProduceAudio(){var t,e,i;return((i=(e=(t=h(this,Se))==null?void 0:t.media)==null?void 0:e.audio)==null?void 0:i.canProduce)===bi.CanRequest}get requestProduceScreenshare(){var t,e,i;return((i=(e=(t=h(this,Se))==null?void 0:t.media)==null?void 0:e.screenshare)==null?void 0:i.canProduce)===bi.CanRequest}get canAllowParticipantAudio(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.canAcceptProductionRequests)!=null?e:rt.canAcceptProductionRequests}get canAllowParticipantScreensharing(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.canAcceptProductionRequests)!=null?e:rt.canAcceptProductionRequests}get canAllowParticipantVideo(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.canAcceptProductionRequests)!=null?e:rt.canAcceptProductionRequests}get canDisableParticipantAudio(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.disableParticipantAudio)!=null?e:rt.disableParticipantAudio}get canDisableParticipantVideo(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.disableParticipantVideo)!=null?e:rt.disableParticipantVideo}get kickParticipant(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.kickParticipant)!=null?e:rt.kickParticipant}get pinParticipant(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.pinParticipant)!=null?e:rt.pinParticipant}get canRecord(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.canRecord)!=null?e:rt.canRecord}get waitingRoomType(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.waitingRoomType)!=null?e:rt.waitingRoomType}get waitingRoomBehaviour(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.waitingRoomType)!=null?e:rt.waitingRoomType}get plugins(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.plugins)!=null?e:rt.plugins}get polls(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.polls)!=null?e:rt.polls}get produceVideo(){var t,e,i,r;return(r=(i=(e=(t=h(this,Se))==null?void 0:t.media)==null?void 0:e.video)==null?void 0:i.canProduce)!=null?r:rt.media.video.canProduce}get requestProduce(){return h(this,Se).media.audio.canProduce===bi.CanRequest||h(this,Se).media.video.canProduce===bi.CanRequest||h(this,Se).media.screenshare.canProduce===bi.CanRequest}get canProduceVideo(){var t,e,i,r;return(r=(i=(e=(t=h(this,Se))==null?void 0:t.media)==null?void 0:e.video)==null?void 0:i.canProduce)!=null?r:rt.media.video.canProduce}get produceScreenshare(){var t,e,i,r;return(r=(i=(e=(t=h(this,Se))==null?void 0:t.media)==null?void 0:e.screenshare)==null?void 0:i.canProduce)!=null?r:rt.media.screenshare.canProduce}get canProduceScreenshare(){var t,e,i,r;return(r=(i=(e=(t=h(this,Se))==null?void 0:t.media)==null?void 0:e.screenshare)==null?void 0:i.canProduce)!=null?r:rt.media.screenshare.canProduce}get produceAudio(){var t;return(t=h(this,Se).media.audio.canProduce)!=null?t:rt.media.audio.canProduce}get canProduceAudio(){var t;return(t=h(this,Se).media.audio.canProduce)!=null?t:rt.media.audio.canProduce}get chatPublic(){var t,e,i;return(i=(e=(t=h(this,Se))==null?void 0:t.chat)==null?void 0:e.public)!=null?i:rt.chat.public}get chatPrivate(){var t,e,i;return(i=(e=(t=h(this,Se))==null?void 0:t.chat)==null?void 0:e.private)!=null?i:rt.chat.private}get connectedMeetings(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.connectedMeetings)!=null?e:rt==null?void 0:rt.connectedMeetings}get hiddenParticipant(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.hiddenParticipant)!=null?e:rt.hiddenParticipant}get showParticipantList(){var t;return(t=h(this,Se).showParticipantList)!=null?t:rt.showParticipantList}get canChangeParticipantRole(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.canChangeParticipantPermissions)!=null?e:rt.canChangeParticipantPermissions}get canChangeParticipantPermissions(){var t,e;return(e=(t=h(this,Se))==null?void 0:t.canChangeParticipantPermissions)!=null?e:rt.canChangeParticipantPermissions}get canChangeTheme(){return!1}get canPresent(){return h(this,Se).media.audio.canProduce===bi.Allowed||h(this,Se).media.video.canProduce===bi.Allowed||h(this,Se).media.screenshare.canProduce===bi.Allowed}get acceptPresentRequests(){return h(this,Se).canAcceptProductionRequests}get canEditDisplayName(){var t;return(t=h(this,Se).canEditDisplayName)!=null?t:!1}get maxScreenShareCount(){return 1}get isRecorder(){return h(this,Se).isRecorder}get canSpotlight(){return h(this,Se).canSpotlight}get canLivestream(){return h(this,Se).canLivestream}get isV2(){return!0}};let Qx=ww;Se=new WeakMap;const kse=Zr(wS());var Js,Id,tp;const _w=class{constructor(t){if(R(this,Js,void 0),R(this,Id,void 0),R(this,tp,void 0),!t)throw new A("Could not load preset.");I(this,Js,t.config),I(this,Id,t.ui||Zr(wS().ui)),I(this,tp,t.permissions.plugins.config)}static fromResponse(t){return new _w(t)}static default(){return new _w(kse)}get setupScreen(){return{isEnabled:!0}}get waitingRoom(){return{isEnabled:!0}}get controlBar(){return{isEnabled:!0,elements:{chat:!0,fullscreen:!0,invite:!1,layout:!1,participants:!0,plugins:!0,polls:!0,reactions:!1,screenshare:!0}}}get header(){return{isEnabled:!0,elements:{logo:h(this,Id).designTokens.logo,timer:!0,title:!0,participantCount:!0,changeLayout:!1}}}get pipMode(){return!0}get viewType(){return h(this,Js).viewType}get maxVideoStreams(){return h(this,Js).maxVideoStreams}get maxScreenShareCount(){return h(this,Js).maxScreenshareCount}get plugins(){return[]}get disabledPlugins(){return Object.keys(h(this,tp)).filter(t=>h(this,tp)[t].disabled)}get designTokens(){return h(this,Id).designTokens}get configDiff(){return h(this,Id).configDiff}get mediaConstraints(){var t,e,i,r,s,n,a,o,c,d,u,p,g,m,f,b;return{video:{quality:(r=(i=(e=(t=h(this,Js))==null?void 0:t.media)==null?void 0:e.video)==null?void 0:i.quality)!=null?r:hr.video.quality,frameRate:(o=(a=(n=(s=h(this,Js))==null?void 0:s.media)==null?void 0:n.video)==null?void 0:a.frameRate)!=null?o:hr.video.frameRate},screenshare:{quality:(p=(u=(d=(c=h(this,Js))==null?void 0:c.media)==null?void 0:d.screenshare)==null?void 0:u.quality)!=null?p:hr.screenshare.quality,frameRate:(b=(f=(m=(g=h(this,Js))==null?void 0:g.media)==null?void 0:m.screenshare)==null?void 0:f.frameRate)!=null?b:hr.screenshare.frameRate}}}get isV2(){return!0}};let Zx=_w;Js=new WeakMap,Id=new WeakMap,tp=new WeakMap;const Tse={setup_screen:{is_enabled:!1},alone_here:{is_enabled:!1},waiting_room:{is_enabled:!1,enable_preview:!0},control_bar:{is_enabled:!0,elements:{plugins:!0,screenshare:!0,invite:!1,participants:!0,chat:!0,reactions:!1,polls:!0,fullscreen:!0,layout:!0}},header:{is_enabled:!0,elements:{logo:"",timer:!0,title:!0,participant_count:!0,change_layout:!0}},pip_mode:!0,auto_tune:!0,grid:{multi:{max_video_count:9,video_fit:"cover"},single:{max_video_count:6,video_fit:"cover"},default_view:"MULTI"},colors:{primary:"#2160FD",secondary:"#1A1A1A",text:"#EEEEEE",background:"#1A1A1A",text_primary:"#EEEEEE",video_background:"#1A1A1A"},controls:{pip_toggle:!1},plugins:[]},xse=Zr(Tse);var Bi,ip,rp,Om,Mm;const Sw=class{constructor(t){if(R(this,Bi,void 0),R(this,ip,void 0),R(this,rp,void 0),R(this,Om,void 0),R(this,Mm,[]),!t)throw new A("Could not load preset theme.");I(this,Bi,t),I(this,ip,1),I(this,rp,_i.GroupCall)}static fromResponse(t){return new Sw(t)}static default(){return new Sw(xse)}configFromPermissions(t){var e,i,r,s,n,a,o,c,d,u,p,g;I(this,ip,t.maxScreenshareCount||1),I(this,rp,t.viewType),I(this,Om,{video:{quality:(r=(i=(e=t==null?void 0:t.produce)==null?void 0:e.video)==null?void 0:i.quality)!=null?r:hr.video.quality,frameRate:(a=(n=(s=t==null?void 0:t.produce)==null?void 0:s.video)==null?void 0:n.frameRate)!=null?a:hr.video.frameRate},screenshare:{quality:(d=(c=(o=t==null?void 0:t.produce)==null?void 0:o.screenshare)==null?void 0:c.quality)!=null?d:hr.screenshare.quality,frameRate:(g=(p=(u=t==null?void 0:t.produce)==null?void 0:u.screenshare)==null?void 0:p.frameRate)!=null?g:hr.screenshare.frameRate}})}setDisabledPlugins(t){const e=h(this,Bi).plugins;e&&e.length>0&&I(this,Mm,t.filter(i=>!e.includes(i)))}get setupScreen(){return h(this,Bi).setupScreen}get aloneHere(){return h(this,Bi).aloneHere}get waitingRoom(){return h(this,Bi).waitingRoom}get controlBar(){return h(this,Bi).controlBar}get header(){return h(this,Bi).header}get pipMode(){var t;return((t=h(this,Bi).controls)==null?void 0:t.pipToggle)||h(this,Bi).pipMode}get viewType(){return h(this,rp)}get autoTune(){return h(this,Bi).autoTune}get grid(){return h(this,Bi).grid}get maxVideoStreams(){return{mobile:this.grid.multi.maxVideoCount>6?6:this.grid.multi.maxVideoCount,desktop:this.grid.multi.maxVideoCount}}get maxScreenShareCount(){return h(this,ip)}get colors(){return h(this,Bi).colors}get controls(){return h(this,Bi).controls}get plugins(){return h(this,Bi).plugins}get disabledPlugins(){return h(this,Mm)}get mediaConstraints(){return h(this,Om)}get isV2(){return!1}};let Xx=Sw;Bi=new WeakMap,ip=new WeakMap,rp=new WeakMap,Om=new WeakMap,Mm=new WeakMap;var Dm;class Pse{constructor(e){R(this,Dm,void 0),I(this,Dm,e)}on(e,i){let r;e===me.roomPeerCount?r=ox.fromBinary.bind(ox):r=fx.fromBinary.bind(fx),h(this,Dm).on(e,({payload:s})=>{const n=r(s);return i(n)})}}Dm=new WeakMap;var zr;class Cse{constructor(e){R(this,zr,void 0),I(this,zr,e)}async getStageRequests(){const{payload:e}=await h(this,zr).sendMessagePromise(me.getStageRequests);return e?B0.fromBinary(e):{stageRequests:[]}}requestAccess(){h(this,zr).sendMessage(me.requestStageAccess)}cancelRequestAccess(){h(this,zr).sendMessage(me.cancelStageRequest)}async grantAccess(e){const i={userIds:e};await h(this,zr).sendMessagePromise(me.grantStageAccess,rte.toBinary(i))}async denyAccess(e){const i={userIds:e};await h(this,zr).sendMessagePromise(me.denyStageAccess,nte.toBinary(i))}joinStage(){return h(this,zr).sendMessage(me.joinStage)}leaveStage(e){const i={userIds:[e]};return h(this,zr).sendMessage(me.leaveStage,yx.toBinary(i))}kick(e){const i={userIds:e};return h(this,zr).sendMessagePromise(me.leaveStage,yx.toBinary(i))}on(e,i){let r;switch(e){case me.grantStageAccess:case me.denyStageAccess:{r=void 0;break}case me.getStagePeers:{r=vx.fromBinary.bind(vx);break}case me.getStageRequests:case me.requestStageAccess:case me.cancelStageRequest:{r=B0.fromBinary.bind(B0);break}}h(this,zr).on(e,({payload:s,id:n})=>{if(!s||!r)return i(void 0,n);const a=r(s);return i(a,n)})}}zr=new WeakMap;var Rse=Object.defineProperty,Ase=Object.getOwnPropertyDescriptor,Gc=(t,e,i,r)=>{for(var s=r>1?void 0:r?Ase(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Rse(e,i,s),s},gs,Ks,xn;class yo extends jt{constructor(e,i,r){super(),R(this,gs,void 0),R(this,Ks,void 0),R(this,xn,void 0),y(this,"status"),I(this,gs,r),I(this,xn,i),I(this,Ks,e)}async getAccessRequests(){if(!h(this,Ks))throw new A("You do not have permissions for getStageRequests");const{stageRequests:e}=await h(this,gs).getStageRequests();return{stageRequests:e}}requestAccess(){if(this.status!=="OFF_STAGE")throw new A(`Unable to request access you are currently ${this.status}`);if(h(this,Ks)){this.setStatus("ACCEPTED_TO_JOIN_STAGE");return}h(this,gs).requestAccess(),this.setStatus("REQUESTED_TO_JOIN_STAGE")}cancelRequestAccess(){h(this,gs).cancelRequestAccess(),this.setStatus("OFF_STAGE")}grantAccess(e){if(!h(this,Ks))throw new A("You do not have permissions for grantAccess");return h(this,gs).grantAccess(e)}denyAccess(e){if(!h(this,Ks))throw new A("You do not have permissions for denyAccess");return h(this,gs).denyAccess(e)}async join(){if(!h(this,Ks)&&this.status!=="ACCEPTED_TO_JOIN_STAGE")throw new A(`Unable to join stage you are currently ${this.status}`);if(h(this,Ks)&&this.status==="ON_STAGE")throw new A("You are already on stage.");h(this,gs).joinStage(),await x.emitAsync(T.JOIN_MEDIA_ROOM),this.setStatus("ON_STAGE")}async leave(){var e;if(!(this.status==="ON_STAGE"||this.status==="ACCEPTED_TO_JOIN_STAGE"))throw new A(`Unable to leave stage you are currently ${this.status}`);h(this,xn).setIsPinned(!1),this.setStatus("OFF_STAGE"),(e=si())!=null&&e.roomJoined&&await x.emitAsync(T.LEAVE_MEDIA_ROOM);try{await h(this,xn).disableScreenShare(),await h(this,xn).disableVideo(),await h(this,xn).disableAudio(),h(this,xn).destructMediaHandler()}catch(i){S.error("DyteStage.leaveStage.DisableMediaError",{error:i})}h(this,gs).leaveStage(h(this,xn).userId)}async kick(e){if(!h(this,Ks))throw new A("You do not have permissions for kick");return h(this,gs).kick(e)}setStatus(e){this.status!==e&&(this.status=e,this.emit("stageStatusUpdate",e))}}gs=new WeakMap,Ks=new WeakMap,xn=new WeakMap;Gc([E.trace("DyteStage.getStageRequests")],yo.prototype,"getAccessRequests",1);Gc([E.trace("DyteStage.requestAccess")],yo.prototype,"requestAccess",1);Gc([E.trace("DyteStage.cancelRequestAccess")],yo.prototype,"cancelRequestAccess",1);Gc([E.trace("DyteStage.grantAccess")],yo.prototype,"grantAccess",1);Gc([E.trace("DyteStage.denyAccess")],yo.prototype,"denyAccess",1);Gc([E.trace("DyteStage.joinStage")],yo.prototype,"join",1);Gc([E.trace("DyteStage.leaveStage")],yo.prototype,"leave",1);var Ise=Object.defineProperty,Ose=Object.getOwnPropertyDescriptor,Mse=(t,e,i,r)=>{for(var s=r>1?void 0:r?Ose(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Ise(e,i,s),s},Od,sp,Yo,Lm;class IM{constructor(e,i,r){y(this,"stage"),R(this,Od,void 0),R(this,sp,void 0),R(this,Yo,void 0),R(this,Lm,0),this.stage=new yo(i,r,e),I(this,Yo,e),I(this,Od,i),I(this,sp,r),this.setupEvents()}setupEvents(){h(this,Yo).on(me.grantStageAccess,()=>{h(this,Od)||(this.stage.emit("stageRequestApproved"),this.setStageStatus("ACCEPTED_TO_JOIN_STAGE"))}),h(this,Yo).on(me.denyStageAccess,()=>{h(this,Od)||(this.stage.emit("stageRequestRejected"),this.setStageStatus("OFF_STAGE"))}),h(this,Yo).on(me.getStagePeers,e=>{this.stage.status==="ON_STAGE"&&!e.stagePeers.includes(h(this,sp).userId)&&this.stage.leave()}),h(this,Yo).on(me.getStageRequests,e=>{var i;if(!h(this,Od))return;const r=(i=e==null?void 0:e.stageRequests)!=null?i:[];h(this,Lm)<r.length&&r.length>0&&this.stage.emit("newStageRequest",{count:r.length}),I(this,Lm,r.length),this.stage.emit("stageAccessRequestUpdate",r)}),x.onAsync(T.SOCKET_SERVICE_ROOM_JOINED,async e=>{var i;switch((i=e.peer)==null?void 0:i.stageType){case qr.OFF_STAGE:{this.setStageStatus("OFF_STAGE");break}case qr.ON_STAGE:{h(this,sp).config.viewType==="LIVESTREAM"&&(await x.emitAsync(T.JOIN_MEDIA_ROOM),this.setStageStatus("ON_STAGE"));break}case qr.APPROVED_STAGE:{this.stage.emit("stageRequestApproved"),this.setStageStatus("ACCEPTED_TO_JOIN_STAGE");break}case qr.REQUESTED_STAGE:{this.setStageStatus("REQUESTED_TO_JOIN_STAGE");break}default:this.setStageStatus("OFF_STAGE")}})}setStageStatus(e){this.stage.status!==e&&(this.stage.status=e,this.stage.emit("stageStatusUpdate",e))}}Od=new WeakMap,sp=new WeakMap,Yo=new WeakMap,Lm=new WeakMap;Mse([E.trace("DyteStage.setupEvents")],IM.prototype,"setupEvents",1);var Dse=Object.defineProperty,Lse=Object.getOwnPropertyDescriptor,ZS=(t,e,i,r)=>{for(var s=r>1?void 0:r?Lse(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Dse(e,i,s),s},Qo;class sy{constructor(e){R(this,Qo,void 0),I(this,Qo,e)}getPolls(){return h(this,Qo).sendMessagePromise(An.getPolls)}createPoll(e,i,r=!1,s=!1){const n={anonymous:r,hideVotes:s,question:e,options:i};return h(this,Qo).sendMessage(An.createPoll,hte.toBinary(n))}votePoll(e,i){const r={index:i,pollId:e};return h(this,Qo).sendMessage(An.votePoll,mte.toBinary(r))}on(e,i){let r,s;switch(e){case An.updatePoll:case An.createPoll:case An.votePoll:{r=H0.fromBinary.bind(H0),s=H0.create();break}}h(this,Qo).on(e,({payload:n})=>{let a=s;try{a=r(n)}catch(o){S.error("pollSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}Qo=new WeakMap;ZS([E.trace("PollSocketHandler.getPolls")],sy.prototype,"getPolls",1);ZS([E.trace("PollSocketHandler.createPoll")],sy.prototype,"createPoll",1);ZS([E.trace("PollSocketHandler.votePoll")],sy.prototype,"votePoll",1);class Nse{constructor(){y(this,"battery"),y(this,"init",async()=>{try{"getBattery"in navigator&&(this.battery=await navigator.getBattery(),this.battery.addEventListener("chargingchange",this.updateChargeInfo),this.battery.addEventListener("levelchange",this.updateLevelInfo),this.updateLevelInfo(),this.updateChargeInfo())}catch(e){S.error("Error getting battery",e)}}),y(this,"updateChargeInfo",()=>{var e;S.log(`Battery charging? ${(e=this.battery)!=null&&e.charging?"Yes":"No"}`)}),y(this,"updateLevelInfo",()=>{if(!this.battery){S.log("Battery level: Not known");return}S.log(`Battery level: ${this.battery.level*100}%`)}),y(this,"cleanup",()=>{var e,i;"getBattery"in navigator&&((e=this.battery)==null||e.removeEventListener("chargingchange",this.updateChargeInfo),(i=this.battery)==null||i.removeEventListener("levelchange",this.updateLevelInfo))})}}const eP=new Nse;var za,Pa,Nm,Ew;class Use extends jt{constructor(e){super(),R(this,Nm),R(this,za,void 0),R(this,Pa,void 0),I(this,za,e),I(this,Pa,!1)}get mediaPermission(){return h(this,za).mediaPermissions.audio}async getTrackMetadata(e=!1){if(!Zs.track){if(!e)return null;const i=await Xe(this,Nm,Ew).call(this);Zs.setTrack(i)}return Zs.getTrackMetadata()}async startTrackAnalysis(e=!1){if(h(this,Pa))return!0;I(this,Pa,!0);let i=await Zs.startTrackAnalysis();if(!i&&e){const r=await Xe(this,Nm,Ew).call(this);Zs.setTrack(r),i=await Zs.startTrackAnalysis()}return i||I(this,Pa,!1),i}stopTrackAnalysis(){return h(this,Pa)&&(I(this,Pa,!1),Zs.stopTrackAnalysis()),!0}}za=new WeakMap,Pa=new WeakMap,Nm=new WeakSet,Ew=async function(){var t;try{const e=h(this,za).getCurrentDevices(),i=(t=e==null?void 0:e.audio)==null?void 0:t.deviceId;let r={audio:!0};i&&(r=Ct.getAudioConstraints({audioDeviceId:i}));const s=await Ct.getAudioTrack(r);return h(this,za).mediaPermissions.audio="ACCEPTED",x.emit(T.MEDIA_PERMISSION_UPDATE,{message:h(this,za).mediaPermissions.audio,kind:"audio"}),s}catch(e){const i=ey("audio",e.name,e.message);throw h(this,za).mediaPermissions.audio=i,x.emit(T.MEDIA_PERMISSION_ERROR,{message:i,constraints:e.constraints,kind:"audio"}),new A("Failed to fetch audio track","1700")}};var Zo;class jse extends jt{constructor(){super(),R(this,Zo,void 0),I(this,Zo,!1)}async getNetworkMetadata(){return new Promise(e=>{X.onSafeInitialization(()=>{X.onPreCallTestResults(i=>{e(i.connectionInfo)}),X.startPreCallTest()})})}startNetworkAnalysis(){return I(this,Zo,Wa.collectSendTransportStats()&&Wa.collectRecvTransportStats()),h(this,Zo)}stopNetworkAnalysis(){return I(this,Zo,!(Wa.stopStatsCollection("send")&&Wa.stopStatsCollection("receive"))),h(this,Zo)}}Zo=new WeakMap;var Md,Er;class $se extends jt{constructor(e){super(),R(this,Md,void 0),R(this,Er,void 0),I(this,Md,e),I(this,Er,{audio:!1,video:!1})}get mediaPermission(){return h(this,Md).mediaPermissions.screenshare}getAudioTrackMetaData(){var e;return(e=h(this,Md).screenShareTracks)!=null&&e.audio?_c.getTrackMetadata():null}getVideoTrackMetaData(){var e;return(e=h(this,Md).screenShareTracks)!=null&&e.video?io.getTrackMetadata():null}async startAudioTrackAnalysis(){if(h(this,Er).audio)return!0;const e=await _c.startTrackAnalysis();return h(this,Er).audio=e,h(this,Er).audio}async startVideoTrackAnalysis(){if(h(this,Er).video)return!0;const e=await io.startTrackAnalysis();return h(this,Er).video=e,h(this,Er).video}stopAudioTrackAnalysis(){return h(this,Er)&&(h(this,Er).audio=!1,_c.stopTrackAnalysis()),!0}stopVideoTrackAnalysis(){return h(this,Er)&&(h(this,Er).video=!1,io.stopTrackAnalysis()),!0}}Md=new WeakMap,Er=new WeakMap;var Ln,Pn,Ca,kw,OM;class zse extends jt{constructor(e){super(),R(this,kw),R(this,Ln,void 0),R(this,Pn,void 0),R(this,Ca,void 0),y(this,"preview"),I(this,Ln,e),I(this,Pn,!1),I(this,Ca,!1)}get mediaPermission(){return h(this,Ln).mediaPermissions.video}getTrackMetadata(){return h(this,Ln).videoTrack?null:Tr.getTrackMetadata()}async startTrackAnalysis({preview:e}={preview:!1}){return h(this,Pn)?!0:await Tr.startTrackAnalysis()?((e||this.preview)&&I(this,Ca,!0),I(this,Pn,!0),!0):!1}stopTrackAnalysis(){h(this,Pn)&&(Tr.stopTrackAnalysis(),I(this,Pn,!1),h(this,Ca)&&I(this,Ca,!1))}async startPreview(){let{track:e}=Tr;return e||(e=await Xe(this,kw,OM).call(this)),this.preview||(Tr.setTrack(e),this.preview=!0,Tr.preview=!0),e}stopPreview(){h(this,Pn)&&h(this,Ca)&&this.stopTrackAnalysis(),this.preview=!1,Tr.preview=!1,Tr.cleanup()}cleanup(){h(this,Pn)&&h(this,Ca)&&this.stopTrackAnalysis(),this.preview=!1,Tr.preview=!1}}Ln=new WeakMap,Pn=new WeakMap,Ca=new WeakMap,kw=new WeakSet,OM=async function(){var t;try{const e=h(this,Ln).getCurrentDevices(),i=(t=e==null?void 0:e.video)==null?void 0:t.deviceId;let r={video:{width:{ideal:1280},height:{ideal:720}}};i&&(r=Ct.getVideoConstraints({videoDeviceId:i}));const s=await Ct.getVideoTrack(r);return h(this,Ln).mediaPermissions.video="ACCEPTED",x.emit(T.MEDIA_PERMISSION_UPDATE,{message:h(this,Ln).mediaPermissions.video,kind:"video"}),s}catch(e){const i=ey("video",e.name,e.message);throw h(this,Ln).mediaPermissions.video=i,x.emit(T.MEDIA_PERMISSION_ERROR,{message:i,constraints:e.constraints,kind:"video"}),new A("Failed to fetch video track","1700")}};class Fse{constructor(e){y(this,"audio"),y(this,"video"),y(this,"screenshare"),y(this,"network"),this.audio=new Use(e),this.video=new zse(e),this.screenshare=new $se(e),this.network=new jse}}const sb=t=>{const{type:e,id:i,transport:r,timestamp:s,currentRoundTripTime:n,bytesSent:a,bytesReceived:o,kind:c,jitter:d,packetsLost:u,totalPacketSendDelay:p}=t;switch(e){case"candidate-pair":return{type:e,id:i,transport:r,timestamp:s,rtt:n,bytesSent:a,bytesReceived:o};case"inbound-rtp":return{type:e,id:i,transport:r,timestamp:s,kind:c,jitter:d,packetsLost:u,bytesReceived:o};default:return{type:e,id:i,transport:r,timestamp:s,kind:c,packetSendDelay:p,bytesSent:a}}};class Vse{constructor(e){y(this,"troubleshooter"),y(this,"self"),this.troubleshooter=new Fse(e),this.self=e,this.setupEvents()}setupEvents(){x.on(T.AUDIO_TRACK_CHANGED,()=>{var e;this.self.audioTrack&&(e=this.self.audioTrack)!=null&&e.enabled&&Zs.setTrack(this.self.audioTrack)}),x.on(T.VIDEO_TRACK_CHANGED,()=>{var e;this.self.videoTrack&&Tr.setTrack((e=this.self.videoTrack)==null?void 0:e.clone())}),x.on(T.SCREENSHARE_TRACK_CHANGED,()=>{var e,i,r,s,n;(e=this.self.screenShareTracks)!=null&&e.audio&&this.self.screenShareTracks.audio.enabled?_c.setTrack((i=this.self.screenShareTracks)==null?void 0:i.audio):_c.cleanup(),(r=this.self.screenShareTracks)!=null&&r.video?io.setTrack((n=(s=this.self.screenShareTracks)==null?void 0:s.video)==null?void 0:n.clone()):io.cleanup()}),x.on(T.AUDIO_TRACK_ANALYSIS,e=>{this.troubleshooter.audio.emit("audioTrackStats",e)}),x.on(T.AUDIO_TRACK_CLOSED,()=>{this.troubleshooter.audio.emit("audioTrackUpdate",{status:"ended"})}),x.on(T.AUDIO_TRACK_CREATED,()=>{this.troubleshooter.audio.emit("audioTrackUpdate",{status:"live"})}),x.on(T.SCREENSHARE_AUDIO_TRACK_ANALYSIS,e=>{this.troubleshooter.screenshare.emit("audioTrackStats",e)}),x.on(T.SCREENSHARE_AUDIO_TRACK_CLOSED,()=>{this.troubleshooter.screenshare.emit("audioTrackUpdate",{status:"ended"})}),x.on(T.SCREENSHARE_AUDIO_TRACK_CREATED,()=>{this.troubleshooter.screenshare.emit("audioTrackUpdate",{status:"live"})}),x.on(T.SCREENSHARE_VIDEO_TRACK_ANALYSIS,e=>{this.troubleshooter.screenshare.emit("videoTrackStats",e)}),x.on(T.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR,()=>{this.troubleshooter.screenshare.stopVideoTrackAnalysis(),io.cleanup()}),x.on(T.SCREENSHARE_VIDEO_TRACK_CLOSED,()=>{this.troubleshooter.screenshare.emit("videoTrackUpdate",{status:"ended"})}),x.on(T.SCREENSHARE_VIDEO_TRACK_CREATED,()=>{this.troubleshooter.screenshare.emit("videoTrackUpdate",{status:"live"})}),x.on(T.VIDEO_TRACK_ANALYSIS,e=>{this.troubleshooter.video.emit("videoTrackStats",e)}),x.on(T.VIDEO_TRACK_ANALYSIS_ERROR,()=>{this.troubleshooter.video.stopTrackAnalysis(),this.troubleshooter.video.startTrackAnalysis(),this.troubleshooter.video.stopPreview()}),x.on(T.VIDEO_TRACK_CLOSED,()=>{this.troubleshooter.video.cleanup(),this.troubleshooter.video.emit("videoTrackUpdate",{status:"ended"})}),x.on(T.VIDEO_TRACK_CREATED,()=>{this.troubleshooter.video.emit("videoTrackUpdate",{status:"live"})}),x.on(T.CANDIDATE_PEER_UPDATE,e=>{this.troubleshooter.network.emit("connectionDelayStats",sb(e))}),x.on(T.INBOUND_RTP_UPDATE,e=>{this.troubleshooter.audio.emit("audioConsumptionStats",sb(e))}),x.on(T.OUTBOUND_RTP_UPDATE,e=>{this.troubleshooter.audio.emit("audioProductionStats",sb(e))}),x.on(T.SEND_TRANSPORT_CLOSED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"send",status:"ended"})}),x.on(T.RECV_TRANSPORT_CLOSED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"receive",status:"ended"})}),x.on(T.SEND_TRANSPORT_CREATED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"send",status:"live"})}),x.on(T.RECV_TRANSPORT_CREATED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"receive",status:"live"})})}}const Xo=class{static handleConnectedRoomsDumpRaw({payload:t}){var e;const i=DX.fromBinary(t),r=i.meetings.map(s=>{var n;return{id:s.id,title:s.title,participants:(n=s.participants)!=null?n:[]}});return{parentMeeting:{id:i.parentMeeting.id,title:i.parentMeeting.title,participants:(e=i.parentMeeting.participants)!=null?e:[]},meetings:r}}static handleTransferPeerRaw({payload:t}){const e=aee.fromBinary(t);return{authToken:e.authToken,meetingId:e.meetingId}}static handleMovedPeerRaw({payload:t}){const e=jO.fromBinary(t);return{meetingId:e.meetingId,customParticipantId:e.customParticipantId}}static handleConnectedRoomsUpdatedRaw({payload:t}){return lx.fromBinary(t).payloads.map(e=>({id:e.id,title:e.title}))}static handleConnectedRoomsDeletedRaw({payload:t}){return YX.fromBinary(t).payloads}static async getConnectedRoomsDump(){const t=await Xo.socketService.sendMessagePromise(me.getConnectedRoomsDump);return Xo.handleConnectedRoomsDumpRaw(t)}static async createConnectedRooms(t){const{payload:e}=await Xo.socketService.sendMessagePromise(me.createConnectedRooms,jX.toBinary({payloads:t}));return lx.fromBinary(e).payloads.map(i=>({id:i.id,title:i.title}))}static async updateConnectedRooms(t){}static async disableConnectedRooms(t){const e=t.map(r=>({id:r})),i=await Xo.socketService.sendMessagePromise(me.deleteConnectedRooms,JX.toBinary({payloads:e}));return Xo.handleConnectedRoomsDeletedRaw(i)}static async movePeersBetweenRooms(t){try{const e=await Xo.socketService.sendMessagePromise(me.movePeers,iee.toBinary({sourceMeetingId:t.sourceMeetingId,destinationMeetingId:t.destinationMeetingId,participants:t.participants}));return new TextDecoder().decode(e.payload).includes("error")?{success:!1,error:"failed to move participants"}:{success:!0}}catch(e){return{success:!1,error:e}}}};let Nt=Xo;y(Nt,"socketService"),y(Nt,"currentMeetingId");const Bse={codecs:[{kind:"audio",mimeType:"audio/opus",clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc",parameter:""}],parameters:{},preferredPayloadType:100},{kind:"video",mimeType:"video/VP8",clockRate:9e4,rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],parameters:{"x-google-start-bitrate":1e3},preferredPayloadType:101},{kind:"video",mimeType:"video/rtx",preferredPayloadType:102,clockRate:9e4,parameters:{apt:101},rtcpFeedback:[]},{kind:"video",mimeType:"video/VP9",clockRate:9e4,rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],parameters:{"profile-id":0,"x-google-start-bitrate":1e3},preferredPayloadType:103},{kind:"video",mimeType:"video/rtx",preferredPayloadType:104,clockRate:9e4,parameters:{apt:103},rtcpFeedback:[]},{kind:"video",mimeType:"video/H264",clockRate:9e4,parameters:{"level-asymmetry-allowed":1,"packetization-mode":1,"profile-level-id":"42e01f","x-google-start-bitrate":1e3},rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],preferredPayloadType:105},{kind:"video",mimeType:"video/rtx",preferredPayloadType:106,clockRate:9e4,parameters:{apt:105},rtcpFeedback:[]}],headerExtensions:[{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id",preferredId:2,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id",preferredId:3,preferredEncrypt:!1,direction:"recvonly"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://tools.ietf.org/html/draft-ietf-avtext-framemarking-07",preferredId:6,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:framemarking",preferredId:7,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",preferredId:10,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:toffset",preferredId:12,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",preferredId:13,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",preferredId:13,preferredEncrypt:!1,direction:"sendrecv"}]};var Hse=Object.defineProperty,Gse=Object.getOwnPropertyDescriptor,Lh=(t,e,i,r)=>{for(var s=r>1?void 0:r?Gse(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Hse(e,i,s),s};const Um=class{constructor(t,e,i,r,s,n,a,o,c,d,u,p,g){y(this,"apiBase"),y(this,"chatController"),y(this,"metaController"),y(this,"participantController"),y(this,"pluginController"),y(this,"pollController"),y(this,"remoteController"),y(this,"selfController"),y(this,"recordingController"),y(this,"livestreamController"),y(this,"internalsController"),y(this,"stageController"),y(this,"troubleshooterController"),this.apiBase=t,this.metaController=e,this.selfController=i,this.pluginController=r,this.participantController=s,this.chatController=n,this.pollController=a,this.remoteController=o,this.recordingController=c,this.livestreamController=u,this.internalsController=d,this.stageController=p,this.troubleshooterController=g}static async init(t,e){var i,r,s,n,a,o,c,d,u,p,g,m;const{apiBase:f="https://api.cluster.dyte.in",authToken:b}=t,w={chat:!0,participant:!0,plugin:!0,poll:!0,self:!0,meta:!0,permissions:!0,theme:!0,tracing:!0,devTools:{logs:!1},internals:!0,stage:!0,...t==null?void 0:t.modules};x.reset(),ZO(),rh.cleanup();const v=$te({authToken:b,baseURL:f});v.setHeader("dyte-tracing-id",e),v.setPeerId(e),v.setRoomName(t.roomName);const{roomName:_}=t,k=Ee.isV2AuthToken?Ee.meetingId:_,P=new dO,D=P.load({routerRtpCapabilities:Bse}),M=v.getRoomNodeData({roomName:k,peerId:e}),B=Ee.isV2AuthToken?void 0:v.getUserPreset(_),G=await v.getUserDetails(),ne=Ee.isV2AuthToken?G.participant.organizationId:G.organizationId;E.meetingMetadata.userId=Ee.isV2AuthToken?G.participant.id:G.id,yJ({...t,modules:w,apiBase:f,organizationId:ne}),E.meetingMetadata.organizationId=ne;const ie=vse(k);await ee.identify(`${H1.PEER}_${e}`,JSON.parse(JSON.stringify({entity:H1.PEER,clientId:ne,isAnonUser:!ne,sdkVersion:Cl,meetingHash:ie,roomName:k,...Ue.getDeviceInfo()}))),Ure(),S.info("flagsmith::allFlags",{flags:JSON.stringify(ee.getAllFlags())},!0),eP.init();let oe=Ee.isV2AuthToken?Qx.default():nx.default(),Re=Ee.isV2AuthToken?Zx.default():Xx.default(),Ke=Ee.isV2AuthToken?G.preset.name:void 0;if(w.permissions||w.theme){const wn=await B;wn&&(Ke=wn.presetName),w.permissions&&(oe=Ee.isV2AuthToken?Qx.fromResponse(G.preset.permissions):nx.fromResponse(wn.permissions)),w.theme&&(Re=Ee.isV2AuthToken?Zx.fromResponse(G.preset):Xx.fromResponse(wn.theme),Ee.isV2AuthToken||Re.configFromPermissions(wn.permissions))}const{roomNodeUrl:lt,meetingTitle:Jt,useHiveMedia:$t}=await M;await D;const os=cM(Re),F=ee.hasFeature(re.CUSTOM_PING_PONG),H=[];$t&&H.push("HIVE"),F&&H.push("PING");const Z=AS(Re.viewType,H),ze=v.getPlugins(Z),at=Re.viewType!==_i.Chat;CO({...t,roomName:k,peerId:e,meetingTitle:Jt,roomNodeUrl:lt,device:P});const kt=await Um.createSocketServiceAndRoomNodeClient({...t,roomName:k,peerId:e,meetingTitle:Jt,roomNodeUrl:lt,capabilities:H,shouldInitializeRoomNode:os,viewType:Re.viewType,device:P}),mi=si();let zs,Ti,_o,xE,Tt,PE,CE,RE,AE,IE,OE,ME;const DE=new as(kt),K6=new Oc(kt),Y6=new sy(kt),Q6=new use(kt),Z6=new Pse(kt),X6=new Cse(kt);Nt.socketService=kt;const LE=rh.create(kt);(i=w.self)==null||i?([Tt]=await Promise.all([Gl.init(kt,LE,G,oe,Re,Ke),mi instanceof Je?mi.setupTransports():null]),v.setOrganizationId(Tt.self.organizationId)):mi instanceof Je&&await mi.setupTransports();const eL=ee.hasFeature(re.TROUBLESHOOTING);if(Tt&&eL&&(ME=new Vse(Tt.self)),(r=w.participant)==null||r){if(!Tt)throw new A("The participant module cannot be initialized without the `self` module");Ti=new yn(Tt.self,LE,H)}if((s=w.chat)==null||s){if(!Tt)throw new A("The chat module cannot be initialized without the `self` module");zs=await Vn.init(DE,K6,Tt.self,Ti.participants,H)}if(at&&((n=w.plugin)==null||n)){if(!Tt)throw new A("The plugin module cannot be initialized without the `self` module");if(!Ti)throw new A("The plugin module cannot be initialized without the `participant` module");const wn=await ze;_o=await Mh.init(wn,Q6,DE,zs==null?void 0:zs.chat,Tt.self,Ti.participants,H)}if(at&&((a=w.poll)==null||a)){if(!Tt)throw new A("The poll cannot be initialized without the `self` module");xE=await hM.init(Tt.self,Y6,H)}if((o=w.meta)==null||o){if(!Tt)throw new A("The meta module cannot be initialized without the `self` module");PE=new uM(Tt.self,kt,Jt)}if((c=w.remoteControl)==null||c){if(!Tt)throw new A("The remote controller cannot be initialized without the `self` module");CE=new Gre(Tt.self,Ti.participants)}if(at&&((d=w.recording)==null||d)){if(!Tt)throw new A("The recording controller cannot be initialized without the `self` module");RE=new CM(Tt.self)}if(((u=w.internals)==null||u)&&(IE=await YS.init()),Re.viewType===_i.Livestream&&((p=w.livestream)==null||p)){if(!Tt)throw new A("The livestream controller cannot be initialized without the `self` module");ee.hasFeature(re.LIVESTREAM)&&(AE=new AM(Tt.self,Z6))}if(at&&((g=w.stage)==null||g)){if(!Tt)throw new A("The stage client cannot be initialized without the `self` module");OE=new IM(X6,ire(oe),Tt.self)}if(IO(Re.viewType,H)||((m=t.overrides)==null?void 0:m.chat_socket_server)==="socket-service")try{await kt.connect()}catch(wn){S.error("[Socket Service] Failed to connect to socket server:",{error:wn})}return new Um(f,PE,Tt,_o,Ti,zs,xE,CE,RE,IE,AE,OE,ME)}static async createSocketServiceAndRoomNodeClient(t){const e=Um.createSocketService(t);return t.shouldInitializeRoomNode?t.capabilities.includes("HIVE")?(await wie({...t,roomName:t.roomName,peerId:t.peerId,socket:e}),e):(await QO({...t,roomName:t.roomName,peerId:t.peerId}),e):e}static createSocketService(t){const{peerId:e,roomName:i,authToken:r,capabilities:s}=t;return new Wl({peerId:e,roomName:i,authToken:r,capabilities:s})}async joinRoom(){return this.selfController.joinRoom()}async leaveRoom(t="left"){return eP.cleanup(),this.selfController.leaveRoom(t)}};let ql=Um;Lh([E.trace("Controller.joinRoom")],ql.prototype,"joinRoom",1);Lh([E.trace("Controller.leaveRoom")],ql.prototype,"leaveRoom",1);Lh([E.trace("Controller.init")],ql,"init",1);Lh([E.trace("Controller.createSocketServiceAndRoomNodeClient")],ql,"createSocketServiceAndRoomNodeClient",1);Lh([E.trace("Controller.createSocketService")],ql,"createSocketService",1);var jm;class Wse extends jt{constructor(e){super(),R(this,jm,void 0),y(this,"meetings",[]),y(this,"parentMeeting",null),I(this,jm,e.self)}get supportsConnectedMeetings(){return h(this,jm).id!==""&&Ee.isV2AuthToken&&ee.hasFeature(re.CONNECTED_MEETINGS)}get isActive(){return this.meetings.length!==0}get currentMeetingId(){return Nt.currentMeetingId}validateConnectedMeetingsAction(){if(!this.supportsConnectedMeetings)throw new Error(`You are not allowed to perform this action.
						Please connect with Dyte team to move you to V2 APIs & to enable connected meetings.`)}async getConnectedMeetings(){return this.validateConnectedMeetingsAction(),await Nt.getConnectedRoomsDump()}async createMeetings(e){return this.validateConnectedMeetingsAction(),(await Nt.createConnectedRooms(e)).map(i=>({id:i.id,title:i.title}))}async updateMeetings(e){this.validateConnectedMeetingsAction(),await Nt.updateConnectedRooms(e.map(i=>({meetingId:i.id,title:i.title})))}async deleteMeetings(e){this.validateConnectedMeetingsAction();const i=this.meetings.map(r=>e.includes(r.id)&&r.participants.length!==0?this.moveParticipants(r.id,this.parentMeeting.id,r.participants.map(s=>s.id)):Promise.resolve());return await Promise.all(i),await Nt.disableConnectedRooms(e)}async moveParticipants(e,i,r){this.validateConnectedMeetingsAction();const s=new Map;[...this.parentMeeting.participants,...this.meetings.flatMap(a=>a.participants)].forEach(a=>s.set(a.id,a));const n=await Nt.movePeersBetweenRooms({sourceMeetingId:e,destinationMeetingId:i,participants:r.map(a=>({id:a}))});return n.success&&(i===this.parentMeeting.id&&(this.parentMeeting.participants=this.parentMeeting.participants.concat(r.map(a=>s.get(a)))),e===this.parentMeeting.id&&(this.parentMeeting.participants=this.parentMeeting.participants.filter(a=>!r.includes(a.id))),this.meetings=this.meetings.map(a=>{if(i===a.id){const o=a.participants.concat(r.map(c=>s.get(c)));return{...a,participants:o}}if(e===a.id){const o=a.participants.filter(c=>!r.includes(c.id));return{...a,participants:o}}return a})),n}}jm=new WeakMap;var qse=Object.defineProperty,Jse=Object.getOwnPropertyDescriptor,XS=(t,e,i,r)=>{for(var s=r>1?void 0:r?Jse(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&qse(e,i,s),s},md,Mu,nb;const Ra=(nb=class{constructor(t,e){y(this,"connectedMeetings"),R(this,md,void 0),R(this,Mu,void 0),I(this,md,e),this.connectedMeetings=new Wse(t),this.setCurrentMeeting(t)}static init(t,e){return Ra.instance||(Ra.instance=new Ra(t,e)),Ra.instance.connectedMeetings.supportsConnectedMeetings&&(Ra.instance.setupEvents(),t.self.once("roomJoined",()=>Ra.instance.getConnectedMeetings())),Ra.instance}setCurrentMeeting(t){I(this,Mu,t),Nt.currentMeetingId=t.meta.roomName}getConnectedMeetings(){this.connectedMeetings.getConnectedMeetings()}setupEvents(){Nt.socketService&&(Nt.socketService.on(me.getConnectedRoomsDump,this.handleConnectedRoomsDump.bind(this)),Nt.socketService.on(me.transferPeer,this.handleTransferPeer.bind(this)),Nt.socketService.on(me.movedPeer,this.handleMovedPeer.bind(this)),Nt.socketService.on(me.connectedRoomsUpdated,this.handleConnectedRoomsUpdated.bind(this)),Nt.socketService.on(me.connectedRoomsDeleted,this.handleConnectedRoomsDeleted.bind(this)))}handleTransferPeer(t){const e=Nt.handleTransferPeerRaw(t);return this.switchMeeting(e)}async switchMeeting({authToken:t,meetingId:e}){if(!this.connectedMeetings.supportsConnectedMeetings)throw new Error(`You are not allowed to perform this action.
								Please connect with Dyte team to move you to V2 APIs & to enable connected meetings.`);this.connectedMeetings.emit("changingMeeting",e);const i=h(this,Mu).self.videoEnabled;await h(this,Mu).leaveRoom("connected-meeting"),Nt.socketService=void 0;const r=await DM.init({authToken:t,apiBase:h(this,md).apiBase,defaults:{...h(this,md).defaults,video:i,audio:!1},modules:h(this,md).modules});return this.connectedMeetings.emit("meetingChanged",r),this.setCurrentMeeting(r),r}handleConnectedRoomsDump(t){const e=Nt.handleConnectedRoomsDumpRaw(t);this.connectedMeetings.meetings=e.meetings.map(i=>({id:i.id,title:i.title,participants:i.participants||[]})),this.connectedMeetings.parentMeeting={id:e.parentMeeting.id,title:e.parentMeeting.title,participants:e.parentMeeting.participants},this.emitStateUpdate()}handleMovedPeer(t){return Nt.handleMovedPeerRaw(t)}handleConnectedRoomsUpdated(t){const e=Nt.handleConnectedRoomsUpdatedRaw(t),i=new Map;this.connectedMeetings.meetings.forEach(r=>{i.set(r.id,r)}),e.forEach(r=>{i.has(r.id)?i.get(r.id).title=r.title:i.set(r.id,{...r,participants:[]})}),this.connectedMeetings.meetings=Array.from(i.values()),this.emitStateUpdate()}handleConnectedRoomsDeleted(t){const e=Nt.handleConnectedRoomsDeletedRaw(t).map(i=>i.id);this.connectedMeetings.meetings=this.connectedMeetings.meetings.filter(i=>!e.includes(i.id))}emitStateUpdate(){this.connectedMeetings.emit("stateUpdate",{meetings:this.connectedMeetings.meetings,parentMeeting:this.connectedMeetings.parentMeeting})}},md=new WeakMap,Mu=new WeakMap,y(nb,"instance"),nb);let ny=Ra;XS([E.trace("ConnectedMeetingsController.getConnectedMeetings")],ny.prototype,"getConnectedMeetings",1);XS([E.trace("ConnectedMeetingsController.setupEvents")],ny.prototype,"setupEvents",1);XS([E.trace("ConnectedMeetingsController.switchMeeting")],ny.prototype,"switchMeeting",1);const Du={},MM={executeWithLock({methodName:t,lockName:e,timeout:i}){return(r,s,n)=>{const a=n.value;return n.value=function(...o){if(Du[e]){const u=new Error(`Unsupported concurrent calls on Dyte method: ${t}.`);throw u.name="UnsupportedConcurrentMethodExecution",S.error("DyteLocker::UnsupportedConcurrentMethodExecution",{error:{stack:u.stack},dyteLocker:{methodName:t,lockName:e}}),u}Du[e]=!0;const c=setTimeout(()=>delete Du[e],i),d=a.apply(this,o);return Promise.resolve(d).then(()=>{delete Du[e],clearTimeout(c)}).catch(()=>{delete Du[e],clearTimeout(c)}),d},n}}};var Kse=Object.defineProperty,Yse=Object.getOwnPropertyDescriptor,ay=(t,e,i,r)=>{for(var s=r>1?void 0:r?Yse(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Kse(e,i,s),s},Ci,Ng,ab,tP,iP;let Mc=(iP=class{constructor(t){R(this,ab),R(this,Ci,void 0),R(this,Ng,void 0),I(this,Ci,t)}static async init(t){var e,i,r,s,n,a,o,c;BK((e=t.overrides)!=null?e:{}),Ue.init();const d=Pv();try{(r=(i=t.modules)==null?void 0:i.tracing)==null||r||(window.__zone_symbol__DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION=!0,window.Zone===void 0&&require("zone.js"))}catch{}E.init(d,(n=(s=t.modules)==null?void 0:s.tracing)!=null?n:!0),S.info("DyteClient::init::options",{dyteClientInitOptions:{...t,authToken:`${(a=t.authToken)==null?void 0:a.slice(0,10)}...${(o=t.authToken)==null?void 0:o.slice(-10)}`}}),!navigator.isReactNative&&typeof window<"u"&&(window.addEventListener("error",g=>{var m;!((m=g.filename)!=null&&m.includes("localhost"))&&g.lineno!==0&&S.error("window::error",{error:g.error},!0)}),window.addEventListener("unhandledrejection",g=>{var m,f,b,w,v,_,k,P;S.error("window::unhandledrejection",{error:g==null?void 0:g.reason,networkCall:{url:(f=(m=g==null?void 0:g.reason)==null?void 0:m.config)==null?void 0:f.url,baseURL:(w=(b=g==null?void 0:g.reason)==null?void 0:b.config)==null?void 0:w.baseURL,method:(_=(v=g==null?void 0:g.reason)==null?void 0:v.config)==null?void 0:_.method,status:(k=g==null?void 0:g.reason)==null?void 0:k.status,statusText:(P=g==null?void 0:g.reason)==null?void 0:P.statusText}},!0)})),VK(t.authToken,t.roomName),E.meetingMetadata.roomName=Ee.isV2AuthToken?Ee.meetingId:t.roomName;const u=await ql.init(t,d),p=new Mc(u);return Xe(c=p,ab,tP).call(c,t),p}async joinRoom(){return h(this,Ci).joinRoom()}async leaveRoom(t){return h(this,Ci).leaveRoom(t)}get participants(){var t;return(t=h(this,Ci).participantController)==null?void 0:t.participants}get self(){var t;return(t=h(this,Ci).selfController)==null?void 0:t.self}get meta(){var t;return(t=h(this,Ci).metaController)==null?void 0:t.meta}get plugins(){var t;return(t=h(this,Ci).pluginController)==null?void 0:t.plugins}get chat(){var t;return(t=h(this,Ci).chatController)==null?void 0:t.chat}get polls(){var t;return(t=h(this,Ci).pollController)==null?void 0:t.polls}get remote(){var t;return(t=h(this,Ci).remoteController)==null?void 0:t.remote}get connectedMeetings(){var t;return(t=h(this,Ng))==null?void 0:t.connectedMeetings}get recording(){var t;return(t=h(this,Ci).recordingController)==null?void 0:t.recording}get livestream(){var t;return(t=h(this,Ci).livestreamController)==null?void 0:t.livestream}get stage(){var t;return(t=h(this,Ci).stageController)==null?void 0:t.stage}get troubleshoot(){var t;return(t=h(this,Ci).troubleshooterController)==null?void 0:t.troubleshooter}get __internals__(){var t;return(t=h(this,Ci).internalsController)==null?void 0:t.internals}},Ci=new WeakMap,Ng=new WeakMap,ab=new WeakSet,tP=function(t){I(this,Ng,ny.init(this,t))},iP);ay([qi(t=>{throw new A(t.message,"0002")}),MM.executeWithLock({methodName:"meeting.joinRoom",lockName:"DyteClient.joinRoom",timeout:3e3})],Mc.prototype,"joinRoom",1);ay([qi(t=>{throw new A(t.message,"0003")})],Mc.prototype,"leaveRoom",1);ay([qi(t=>{throw new A(t.message,"0001")}),MM.executeWithLock({methodName:"DyteClient.init",lockName:"DyteClient.init",timeout:3e3})],Mc,"init",1);Mc=ay([qi(t=>{throw new A(t.message,"0000")})],Mc);const DM=Mc;var LM={exports:{}},Nh={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var rP=Object.getOwnPropertySymbols,Qse=Object.prototype.hasOwnProperty,Zse=Object.prototype.propertyIsEnumerable;function Xse(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function ene(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var r=Object.getOwnPropertyNames(e).map(function(n){return e[n]});if(r.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(n){s[n]=n}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}ene();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tne=vl,NM=60103;Nh.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var sP=Symbol.for;NM=sP("react.element"),Nh.Fragment=sP("react.fragment")}var ine=tne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rne=Object.prototype.hasOwnProperty,sne={key:!0,ref:!0,__self:!0,__source:!0};function UM(t,e,i){var r,s={},n=null,a=null;i!==void 0&&(n=""+i),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)rne.call(e,r)&&!sne.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:NM,type:t,key:n,ref:a,props:s,_owner:ine.current}}Nh.jsx=UM;Nh.jsxs=UM;LM.exports=Nh;LM.exports.jsx;Q.createContext({meeting:void 0,updates:void 0});const nne=t=>{const e=Q.useRef(!1),[i,r]=Q.useState(),s=t==null?void 0:t.resetOnLeave;return[i,async a=>{if(!e.current){e.current=!0;try{const o=await DM.init(a);return r(o),s&&o.self.on("roomLeft",()=>r(void 0)),o}catch{}finally{e.current=!1}}}]},ane=t=>t.toLowerCase().split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(""),jM=t=>t.replace(/([A-Z])/g,e=>`-${e[0].toLowerCase()}`),one=(t,e,i={})=>{if(t instanceof Element){const r=cne(t.classList,e,i);r!==""&&(t.className=r),Object.keys(e).forEach(s=>{if(!(s==="children"||s==="style"||s==="ref"||s==="class"||s==="className"||s==="forwardedRef"))if(s.indexOf("on")===0&&s[2]===s[2].toUpperCase()){const n=s.substring(2),a=n[0].toLowerCase()+n.substring(1);$M(a)||dne(t,a,e[s])}else t[s]=e[s],typeof e[s]==="string"&&t.setAttribute(jM(s),e[s])})}},cne=(t,e,i)=>{const r=e.className||e.class,s=i.className||i.class,n=ob(t),a=ob(r?r.split(" "):[]),o=ob(s?s.split(" "):[]),c=[];return n.forEach(d=>{a.has(d)?(c.push(d),a.delete(d)):o.has(d)||c.push(d)}),a.forEach(d=>c.push(d)),c.join(" ")};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const $M=t=>{if(typeof document>"u")return!0;{const e="on"+t;let i=e in document;if(!i){const r=document.createElement("div");r.setAttribute(e,"return;"),i=typeof r[e]=="function"}return i}},dne=(t,e,i)=>{const r=t.__events||(t.__events={}),s=r[e];s&&t.removeEventListener(e,s),t.addEventListener(e,r[e]=function(a){i&&i.call(this,a)})},ob=t=>{const e=new Map;return t.forEach(i=>e.set(i,i)),e},lne=(t,e)=>{typeof t=="function"?t(e):t!=null&&(t.current=e)},une=(...t)=>e=>{t.forEach(i=>{lne(i,e)})},pne=(t,e)=>{const i=(r,s)=>vl.createElement(t,Object.assign({},r,{forwardedRef:s}));return i.displayName=e,vl.forwardRef(i)};var hne=globalThis&&globalThis.__rest||function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]]);return i};const gne=(t,e,i,r)=>{r!==void 0&&r();const s=ane(t),n=class extends vl.Component{constructor(a){super(a),this.setComponentElRef=o=>{this.componentEl=o}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(a){one(this.componentEl,this.props,a)}render(){const a=this.props,{children:o,forwardedRef:c,style:d,className:u,ref:p}=a,g=hne(a,["children","forwardedRef","style","className","ref"]);let m=Object.keys(g).reduce((b,w)=>{const v=g[w];if(w.indexOf("on")===0&&w[2]===w[2].toUpperCase()){const _=w.substring(2).toLowerCase();typeof document<"u"&&$M(_)&&(b[w]=v)}else{const _=typeof v;(_==="string"||_==="boolean"||_==="number")&&(b[jM(w)]=v)}return b},{});i&&(m=i(this.props,m));const f=Object.assign(Object.assign({},m),{ref:une(c,this.setComponentElRef),style:d});return Q.createElement(t,f,o)}static get displayName(){return s}};return e&&(n.contextType=e),pne(n,s)};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__rest;const mne="modulepreload",fne=function(t){return"/AgroGyan/"+t},nP={},vne=function(e,i,r){if(!i||i.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(i.map(n=>{if(n=fne(n),n in nP)return;nP[n]=!0;const a=n.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!r)for(let u=s.length-1;u>=0;u--){const p=s[u];if(p.href===n&&(!a||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${o}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":mne,a||(d.as="script",d.crossOrigin=""),d.href=n,document.head.appendChild(d),a)return new Promise((u,p)=>{d.addEventListener("load",u),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e()).catch(n=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=n,window.dispatchEvent(a),!a.defaultPrevented)throw n})},yne="dyte-ui-kit";let Dd,zM,oy,FM=!1,Hf=!1,eE=!1,VM=!1,Tw=null,xw=!1;const Xn=(t,e="")=>()=>{},bne=(t,e)=>()=>{},wne="{visibility:hidden}.hydrated{visibility:inherit}",aP="http://www.w3.org/1999/xlink",oP={},_ne=t=>t!=null,tE=t=>(t=typeof t,t==="object"||t==="function"),l=(t,e,...i)=>{let r=null,s=null,n=null,a=!1,o=!1;const c=[],d=p=>{for(let g=0;g<p.length;g++)r=p[g],Array.isArray(r)?d(r):r!=null&&typeof r!="boolean"&&((a=typeof t!="function"&&!tE(r))&&(r=String(r)),a&&o?c[c.length-1].$text$+=r:c.push(a?Gf(null,r):r),o=a)};if(d(i),e){e.key&&(s=e.key),e.name&&(n=e.name);{const p=e.className||e.class;p&&(e.class=typeof p!="object"?p:Object.keys(p).filter(g=>p[g]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,c,Ene);const u=Gf(t,null);return u.$attrs$=e,c.length>0&&(u.$children$=c),u.$key$=s,u.$name$=n,u},Gf=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},O={},Sne=t=>t&&t.$tag$===O,Ene={forEach:(t,e)=>t.map(cP).forEach(e),map:(t,e)=>t.map(cP).map(e).map(kne)},cP=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),kne=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),l(t.vtag,i,...t.vchildren||[])}const e=Gf(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},Tne=(t,e)=>t!=null&&!tE(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,jr=t=>bo(t).$hostElement$,K=(t,e,i)=>{const r=jr(t);return{emit:s=>BM(r,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:s})}},BM=(t,e,i)=>{const r=ni.ce(e,i);return t.dispatchEvent(r),r},dP=new WeakMap,xne=(t,e,i)=>{let r=Jf.get(t);Yne&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,Jf.set(t,r)},Pne=(t,e,i,r)=>{let s=HM(e);const n=Jf.get(s);if(t=t.nodeType===11?t:Ms,n)if(typeof n=="string"){t=t.head||t;let a=dP.get(t),o;a||dP.set(t,a=new Set),a.has(s)||(o=Ms.createElement("style"),o.innerHTML=n,t.insertBefore(o,t.querySelector("link")),a&&a.add(s))}else t.adoptedStyleSheets.includes(n)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,n]);return s},Cne=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,r=e.$flags$,s=Xn("attachStyles",e.$tagName$),n=Pne(i.shadowRoot?i.shadowRoot:i.getRootNode(),e);r&10&&(i["s-sc"]=n,i.classList.add(n+"-h")),s()},HM=(t,e)=>"sc-"+t.$tagName$,lP=(t,e,i,r,s,n)=>{if(i!==r){let a=gP(t,e),o=e.toLowerCase();if(e==="class"){const c=t.classList,d=uP(i),u=uP(r);c.remove(...d.filter(p=>p&&!u.includes(p))),c.add(...u.filter(p=>p&&!d.includes(p)))}else if(e==="style"){for(const c in i)(!r||r[c]==null)&&(c.includes("-")?t.style.removeProperty(c):t.style[c]="");for(const c in r)(!i||r[c]!==i[c])&&(c.includes("-")?t.style.setProperty(c,r[c]):t.style[c]=r[c])}else if(e!=="key")if(e==="ref")r&&r(t);else if(!a&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):gP(Uh,o)?e=o.slice(2):e=o[2]+e.slice(3),i&&ni.rel(t,e,i,!1),r&&ni.ael(t,e,r,!1);else{const c=tE(r);if((a||c&&r!==null)&&!s)try{if(t.tagName.includes("-"))t[e]=r;else{const u=r??"";e==="list"?a=!1:(i==null||t[e]!=u)&&(t[e]=u)}}catch{}let d=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(e=o,d=!0),r==null||r===!1?(r!==!1||t.getAttribute(e)==="")&&(d?t.removeAttributeNS(aP,e):t.removeAttribute(e)):(!a||n&4||s)&&!c&&(r=r===!0?"":r,d?t.setAttributeNS(aP,e,r):t.setAttribute(e,r))}}},Rne=/\s/,uP=t=>t?t.split(Rne):[],GM=(t,e,i,r)=>{const s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,n=t&&t.$attrs$||oP,a=e.$attrs$||oP;for(r in n)r in a||lP(s,r,n[r],void 0,i,e.$flags$);for(r in a)lP(s,r,n[r],a[r],i,e.$flags$)},Wf=(t,e,i,r)=>{const s=e.$children$[i];let n=0,a,o,c;if(FM||(eE=!0,s.$tag$==="slot"&&(Dd&&r.classList.add(Dd+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)a=s.$elm$=Ms.createTextNode(s.$text$);else if(s.$flags$&1)a=s.$elm$=Ms.createTextNode("");else if(a=s.$elm$=Ms.createElement(s.$flags$&2?"slot-fb":s.$tag$),GM(null,s,VM),_ne(Dd)&&a["s-si"]!==Dd&&a.classList.add(a["s-si"]=Dd),s.$children$)for(n=0;n<s.$children$.length;++n)o=Wf(t,s,n,a),o&&a.appendChild(o);return a["s-hn"]=oy,s.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=zM,a["s-sn"]=s.$name$||"",c=t&&t.$children$&&t.$children$[i],c&&c.$tag$===s.$tag$&&t.$elm$&&oh(t.$elm$,!1)),a},oh=(t,e)=>{ni.$flags$|=1;const i=t.childNodes;for(let r=i.length-1;r>=0;r--){const s=i[r];s["s-hn"]!==oy&&s["s-ol"]&&(JM(s).insertBefore(s,iE(s)),s["s-ol"].remove(),s["s-ol"]=void 0,eE=!0),e&&oh(s,e)}ni.$flags$&=-2},WM=(t,e,i,r,s,n)=>{let a=t["s-cr"]&&t["s-cr"].parentNode||t,o;for(a.shadowRoot&&a.tagName===oy&&(a=a.shadowRoot);s<=n;++s)r[s]&&(o=Wf(null,i,s,t),o&&(r[s].$elm$=o,a.insertBefore(o,iE(e))))},qM=(t,e,i,r,s)=>{for(;e<=i;++e)(r=t[e])&&(s=r.$elm$,QM(r),Hf=!0,s["s-ol"]?s["s-ol"].remove():oh(s,!0),s.remove())},Ane=(t,e,i,r)=>{let s=0,n=0,a=0,o=0,c=e.length-1,d=e[0],u=e[c],p=r.length-1,g=r[0],m=r[p],f,b;for(;s<=c&&n<=p;)if(d==null)d=e[++s];else if(u==null)u=e[--c];else if(g==null)g=r[++n];else if(m==null)m=r[--p];else if(Ug(d,g))Ld(d,g),d=e[++s],g=r[++n];else if(Ug(u,m))Ld(u,m),u=e[--c],m=r[--p];else if(Ug(d,m))(d.$tag$==="slot"||m.$tag$==="slot")&&oh(d.$elm$.parentNode,!1),Ld(d,m),t.insertBefore(d.$elm$,u.$elm$.nextSibling),d=e[++s],m=r[--p];else if(Ug(u,g))(d.$tag$==="slot"||m.$tag$==="slot")&&oh(u.$elm$.parentNode,!1),Ld(u,g),t.insertBefore(u.$elm$,d.$elm$),u=e[--c],g=r[++n];else{for(a=-1,o=s;o<=c;++o)if(e[o]&&e[o].$key$!==null&&e[o].$key$===g.$key$){a=o;break}a>=0?(b=e[a],b.$tag$!==g.$tag$?f=Wf(e&&e[n],i,a,t):(Ld(b,g),e[a]=void 0,f=b.$elm$),g=r[++n]):(f=Wf(e&&e[n],i,n,t),g=r[++n]),f&&JM(d.$elm$).insertBefore(f,iE(d.$elm$))}s>c?WM(t,r[p+1]==null?null:r[p+1].$elm$,i,r,n,p):n>p&&qM(e,s,c)},Ug=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,iE=t=>t&&t["s-ol"]||t,JM=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Ld=(t,e)=>{const i=e.$elm$=t.$elm$,r=t.$children$,s=e.$children$,n=e.$tag$,a=e.$text$;let o;a===null?(n==="slot"||GM(t,e,VM),r!==null&&s!==null?Ane(i,r,e,s):s!==null?(t.$text$!==null&&(i.textContent=""),WM(i,null,e,s,0,s.length-1)):r!==null&&qM(r,0,r.length-1)):(o=i["s-cr"])?o.parentNode.textContent=a:t.$text$!==a&&(i.data=a)},KM=t=>{const e=t.childNodes;let i,r,s,n,a,o;for(r=0,s=e.length;r<s;r++)if(i=e[r],i.nodeType===1){if(i["s-sr"]){for(a=i["s-sn"],i.hidden=!1,n=0;n<s;n++)if(o=e[n].nodeType,e[n]["s-hn"]!==i["s-hn"]||a!==""){if(o===1&&a===e[n].getAttribute("slot")){i.hidden=!0;break}}else if(o===1||o===3&&e[n].textContent.trim()!==""){i.hidden=!0;break}}KM(i)}},ks=[],YM=t=>{let e,i,r,s,n,a,o=0;const c=t.childNodes,d=c.length;for(;o<d;o++){if(e=c[o],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,s=e["s-sn"],a=r.length-1;a>=0;a--)i=r[a],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(pP(i,s)?(n=ks.find(u=>u.$nodeToRelocate$===i),Hf=!0,i["s-sn"]=i["s-sn"]||s,n?n.$slotRefNode$=e:ks.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&ks.map(u=>{pP(u.$nodeToRelocate$,i["s-sn"])&&(n=ks.find(p=>p.$nodeToRelocate$===i),n&&!u.$slotRefNode$&&(u.$slotRefNode$=n.$slotRefNode$))})):ks.some(u=>u.$nodeToRelocate$===i)||ks.push({$nodeToRelocate$:i}));e.nodeType===1&&YM(e)}},pP=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",QM=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(QM)},Ine=(t,e)=>{const i=t.$hostElement$,r=t.$cmpMeta$,s=t.$vnode$||Gf(null,null),n=Sne(e)?e:l(null,null,e);oy=i.tagName,r.$attrsToReflect$&&(n.$attrs$=n.$attrs$||{},r.$attrsToReflect$.map(([a,o])=>n.$attrs$[o]=i[a])),n.$tag$=null,n.$flags$|=4,t.$vnode$=n,n.$elm$=s.$elm$=i.shadowRoot||i,Dd=i["s-sc"],zM=i["s-cr"],FM=(r.$flags$&1)!==0,Hf=!1,Ld(s,n);{if(ni.$flags$|=1,eE){YM(n.$elm$);let a,o,c,d,u,p,g=0;for(;g<ks.length;g++)a=ks[g],o=a.$nodeToRelocate$,o["s-ol"]||(c=Ms.createTextNode(""),c["s-nr"]=o,o.parentNode.insertBefore(o["s-ol"]=c,o));for(g=0;g<ks.length;g++)if(a=ks[g],o=a.$nodeToRelocate$,a.$slotRefNode$){for(d=a.$slotRefNode$.parentNode,u=a.$slotRefNode$.nextSibling,c=o["s-ol"];c=c.previousSibling;)if(p=c["s-nr"],p&&p["s-sn"]===o["s-sn"]&&d===p.parentNode&&(p=p.nextSibling,!p||!p["s-nr"])){u=p;break}(!u&&d!==o.parentNode||o.nextSibling!==u)&&o!==u&&(!o["s-hn"]&&o["s-ol"]&&(o["s-hn"]=o["s-ol"].parentNode.nodeName),d.insertBefore(o,u))}else o.nodeType===1&&(o.hidden=!0)}Hf&&KM(n.$elm$),ni.$flags$&=-2,ks.length=0}},ZM=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise(i=>t.$onRenderResolve$=i))},cy=(t,e)=>{if(t.$flags$|=16,t.$flags$&4){t.$flags$|=512;return}return ZM(t,t.$ancestorComponent$),Li(()=>One(t,e))},One=(t,e)=>{const i=Xn("scheduleUpdate",t.$cmpMeta$.$tagName$),r=t.$lazyInstance$;let s;return e&&(t.$flags$|=256,t.$queuedListeners$&&(t.$queuedListeners$.map(([n,a])=>Il(r,n,a)),t.$queuedListeners$=null),s=Il(r,"componentWillLoad")),i(),Nne(s,()=>Mne(t,r,e))},Mne=async(t,e,i)=>{const r=t.$hostElement$,s=Xn("update",t.$cmpMeta$.$tagName$),n=r["s-rc"];i&&Cne(t);const a=Xn("render",t.$cmpMeta$.$tagName$);Dne(t,e),n&&(n.map(o=>o()),r["s-rc"]=void 0),a(),s();{const o=r["s-p"],c=()=>Lne(t);o.length===0?c():(Promise.all(o).then(c),t.$flags$|=4,o.length=0)}},Dne=(t,e,i)=>{try{Tw=e,e=e.render(),t.$flags$&=-17,t.$flags$|=2,Ine(t,e)}catch(r){W(r,t.$hostElement$)}return Tw=null,null},hP=()=>Tw,Lne=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,r=Xn("postUpdate",e),s=t.$lazyInstance$,n=t.$ancestorComponent$;Il(s,"componentDidRender"),t.$flags$&64?r():(t.$flags$|=64,e3(i),Il(s,"componentDidLoad"),r(),t.$onReadyResolve$(i),n||XM()),t.$onInstanceResolve$(i),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),t.$flags$&512&&sE(()=>cy(t,!1)),t.$flags$&=-517},qf=t=>{{const e=bo(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&cy(e,!1),i}},XM=t=>{e3(Ms.documentElement),sE(()=>BM(Uh,"appload",{detail:{namespace:yne}}))},Il=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(r){W(r)}},Nne=(t,e)=>t&&t.then?t.then(e):e(),e3=t=>t.classList.add("hydrated"),Une=(t,e)=>bo(t).$instanceValues$.get(e),jne=(t,e,i,r)=>{const s=bo(t),n=s.$hostElement$,a=s.$instanceValues$.get(e),o=s.$flags$,c=s.$lazyInstance$;i=Tne(i,r.$members$[e][0]);const d=Number.isNaN(a)&&Number.isNaN(i),u=i!==a&&!d;if((!(o&8)||a===void 0)&&u&&(s.$instanceValues$.set(e,i),c)){if(r.$watchers$&&o&128){const p=r.$watchers$[e];p&&p.map(g=>{try{c[g](i,a,e)}catch(m){W(m,n)}})}(o&18)===2&&cy(s,!1)}},t3=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const r=Object.entries(e.$members$),s=t.prototype;if(r.map(([n,[a]])=>{a&31||i&2&&a&32?Object.defineProperty(s,n,{get(){return Une(this,n)},set(o){jne(this,n,o,e)},configurable:!0,enumerable:!0}):i&1&&a&64&&Object.defineProperty(s,n,{value(...o){const c=bo(this);return c.$onInstancePromise$.then(()=>c.$lazyInstance$[n](...o))}})}),i&1){const n=new Map;s.attributeChangedCallback=function(a,o,c){ni.jmp(()=>{const d=n.get(a);if(this.hasOwnProperty(d))c=this[d],delete this[d];else if(s.hasOwnProperty(d)&&typeof this[d]=="number"&&this[d]==c)return;this[d]=c===null&&typeof this[d]=="boolean"?!1:c})},t.observedAttributes=r.filter(([a,o])=>o[0]&15).map(([a,o])=>{const c=o[1]||a;return n.set(c,a),o[0]&512&&e.$attrsToReflect$.push([a,c]),c})}}return t},$ne=async(t,e,i,r,s)=>{if(!(e.$flags$&32)){{if(e.$flags$|=32,s=Kne(i),s.then){const c=bne();s=await s,c()}s.isProxied||(i.$watchers$=s.watchers,t3(s,i,2),s.isProxied=!0);const o=Xn("createInstance",i.$tagName$);e.$flags$|=8;try{new s(e)}catch(c){W(c)}e.$flags$&=-9,e.$flags$|=128,o(),i3(e.$lazyInstance$)}if(s.style){let o=s.style;const c=HM(i);if(!Jf.has(c)){const d=Xn("registerStyles",i.$tagName$);xne(c,o,!!(i.$flags$&1)),d()}}}const n=e.$ancestorComponent$,a=()=>cy(e,!0);n&&n["s-rc"]?n["s-rc"].push(a):a()},i3=t=>{Il(t,"connectedCallback")},zne=t=>{if(!(ni.$flags$&1)){const e=bo(t),i=e.$cmpMeta$,r=Xn("connectedCallback",i.$tagName$);if(e.$flags$&1)r3(t,e,i.$listeners$),i3(e.$lazyInstance$);else{e.$flags$|=1,i.$flags$&12&&Fne(t);{let s=t;for(;s=s.parentNode||s.host;)if(s["s-p"]){ZM(e,e.$ancestorComponent$=s);break}}i.$members$&&Object.entries(i.$members$).map(([s,[n]])=>{if(n&31&&t.hasOwnProperty(s)){const a=t[s];delete t[s],t[s]=a}}),$ne(t,e,i)}r()}},Fne=t=>{const e=t["s-cr"]=Ms.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},Vne=t=>{if(!(ni.$flags$&1)){const e=bo(t),i=e.$lazyInstance$;e.$rmListeners$&&(e.$rmListeners$.map(r=>r()),e.$rmListeners$=void 0),Il(i,"disconnectedCallback")}},Bne=(t,e={})=>{const i=Xn(),r=[],s=e.exclude||[],n=Uh.customElements,a=Ms.head,o=a.querySelector("meta[charset]"),c=Ms.createElement("style"),d=[];let u,p=!0;Object.assign(ni,e),ni.$resourcesUrl$=new URL(e.resourcesUrl||"./",Ms.baseURI).href,t.map(g=>{g[1].map(m=>{const f={$flags$:m[0],$tagName$:m[1],$members$:m[2],$listeners$:m[3]};f.$members$=m[2],f.$listeners$=m[3],f.$attrsToReflect$=[],f.$watchers$={};const b=f.$tagName$,w=class extends HTMLElement{constructor(v){super(v),v=this,Jne(v,f),f.$flags$&1&&v.attachShadow({mode:"open"})}connectedCallback(){u&&(clearTimeout(u),u=null),p?d.push(this):ni.jmp(()=>zne(this))}disconnectedCallback(){ni.jmp(()=>Vne(this))}componentOnReady(){return bo(this).$onReadyPromise$}};f.$lazyBundleId$=g[0],!s.includes(b)&&!n.get(b)&&(r.push(b),n.define(b,t3(w,f,1)))})}),c.innerHTML=r+wne,c.setAttribute("data-styles",""),a.insertBefore(c,o?o.nextSibling:a.firstChild),p=!1,d.length?d.map(g=>g.connectedCallback()):ni.jmp(()=>u=setTimeout(XM,30)),i()},Hne=(t,e)=>e,r3=(t,e,i,r)=>{i&&i.map(([s,n,a])=>{const o=Wne(t,s),c=Gne(e,a),d=qne(s);ni.ael(o,n,c,d),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>ni.rel(o,n,c,d))})},Gne=(t,e)=>i=>{try{t.$flags$&256?t.$lazyInstance$[e](i):(t.$queuedListeners$=t.$queuedListeners$||[]).push([e,i])}catch(r){W(r)}},Wne=(t,e)=>e&8?Uh:t,qne=t=>(t&2)!==0,rE=new WeakMap,bo=t=>rE.get(t),U=(t,e)=>rE.set(e.$lazyInstance$=t,e),Jne=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return i.$onInstancePromise$=new Promise(r=>i.$onInstanceResolve$=r),i.$onReadyPromise$=new Promise(r=>i.$onReadyResolve$=r),t["s-p"]=[],t["s-rc"]=[],r3(t,i,e.$listeners$),rE.set(t,i)},gP=(t,e)=>e in t,W=(t,e)=>(0,console.error)(t,e),cb=new Map,Kne=(t,e,i)=>{const r=t.$tagName$.replace(/-/g,"_"),s=t.$lazyBundleId$,n=cb.get(s);if(n)return n[r];if(!i||!BUILD.hotModuleReplacement){const a=o=>(cb.set(s,o),o[r]);switch(s){case"dyte-meeting":return Promise.resolve().then(function(){return Ode}).then(a,W);case"dyte-ai":return Promise.resolve().then(function(){return Dde}).then(a,W);case"dyte-ai-chat":return Promise.resolve().then(function(){return Nde}).then(a,W);case"dyte-ai-home":return Promise.resolve().then(function(){return Fde}).then(a,W);case"dyte-ai-toggle":return Promise.resolve().then(function(){return Bde}).then(a,W);case"dyte-ai-transcriptions":return Promise.resolve().then(function(){return Gde}).then(a,W);case"dyte-audio-tile":return Promise.resolve().then(function(){return qde}).then(a,W);case"dyte-breakout-rooms-manager":return Promise.resolve().then(function(){return Qde}).then(a,W);case"dyte-breakout-rooms-toggle":return Promise.resolve().then(function(){return Xde}).then(a,W);case"dyte-broadcast-message-modal":return Promise.resolve().then(function(){return tle}).then(a,W);case"dyte-camera-toggle":return Promise.resolve().then(function(){return rle}).then(a,W);case"dyte-channel-creator":return Promise.resolve().then(function(){return nle}).then(a,W);case"dyte-chat-toggle":return Promise.resolve().then(function(){return ole}).then(a,W);case"dyte-clock":return Promise.resolve().then(function(){return dle}).then(a,W);case"dyte-confirmation-modal":return Promise.resolve().then(function(){return ule}).then(a,W);case"dyte-controlbar":return Promise.resolve().then(function(){return hle}).then(a,W);case"dyte-debugger":return Promise.resolve().then(function(){return mle}).then(a,W);case"dyte-debugger-network":return Promise.resolve().then(function(){return vle}).then(a,W);case"dyte-debugger-toggle":return Promise.resolve().then(function(){return ble}).then(a,W);case"dyte-ended-screen":return Promise.resolve().then(function(){return _le}).then(a,W);case"dyte-fullscreen-toggle":return Promise.resolve().then(function(){return Ele}).then(a,W);case"dyte-grid":return Promise.resolve().then(function(){return Rle}).then(a,W);case"dyte-grid-pagination":return Promise.resolve().then(function(){return Ile}).then(a,W);case"dyte-header":return Promise.resolve().then(function(){return Mle}).then(a,W);case"dyte-idle-screen":return Promise.resolve().then(function(){return Lle}).then(a,W);case"dyte-image-viewer":return Promise.resolve().then(function(){return zle}).then(a,W);case"dyte-leave-button":return Promise.resolve().then(function(){return Vle}).then(a,W);case"dyte-leave-meeting":return Promise.resolve().then(function(){return Hle}).then(a,W);case"dyte-livestream-toggle":return Promise.resolve().then(function(){return Wle}).then(a,W);case"dyte-meeting-title":return Promise.resolve().then(function(){return Jle}).then(a,W);case"dyte-mic-toggle":return Promise.resolve().then(function(){return Yle}).then(a,W);case"dyte-mixed-grid":return Promise.resolve().then(function(){return Zle}).then(a,W);case"dyte-more-toggle":return Promise.resolve().then(function(){return eue}).then(a,W);case"dyte-mute-all-button":return Promise.resolve().then(function(){return iue}).then(a,W);case"dyte-mute-all-confirmation":return Promise.resolve().then(function(){return sue}).then(a,W);case"dyte-network-indicator":return Promise.resolve().then(function(){return aue}).then(a,W);case"dyte-participant-count":return Promise.resolve().then(function(){return cue}).then(a,W);case"dyte-participant-setup":return Promise.resolve().then(function(){return lue}).then(a,W);case"dyte-participants-audio":return Promise.resolve().then(function(){return hue}).then(a,W);case"dyte-participants-stage-list":return Promise.resolve().then(function(){return mue}).then(a,W);case"dyte-participants-stage-queue":return Promise.resolve().then(function(){return vue}).then(a,W);case"dyte-participants-toggle":return Promise.resolve().then(function(){return bue}).then(a,W);case"dyte-participants-viewer-list":return Promise.resolve().then(function(){return _ue}).then(a,W);case"dyte-participants-waiting-list":return Promise.resolve().then(function(){return Eue}).then(a,W);case"dyte-permissions-message":return Promise.resolve().then(function(){return Tue}).then(a,W);case"dyte-pip-toggle":return Promise.resolve().then(function(){return Pue}).then(a,W);case"dyte-plugin-main":return Promise.resolve().then(function(){return Rue}).then(a,W);case"dyte-plugins-toggle":return Promise.resolve().then(function(){return Iue}).then(a,W);case"dyte-polls-toggle":return Promise.resolve().then(function(){return Mue}).then(a,W);case"dyte-recording-indicator":return Promise.resolve().then(function(){return Lue}).then(a,W);case"dyte-recording-toggle":return Promise.resolve().then(function(){return Uue}).then(a,W);case"dyte-remote-access-manager":return Promise.resolve().then(function(){return $ue}).then(a,W);case"dyte-screen-share-toggle":return Promise.resolve().then(function(){return Fue}).then(a,W);case"dyte-screenshare-view":return Promise.resolve().then(function(){return Bue}).then(a,W);case"dyte-settings":return Promise.resolve().then(function(){return Gue}).then(a,W);case"dyte-settings-toggle":return Promise.resolve().then(function(){return que}).then(a,W);case"dyte-setup-screen":return Promise.resolve().then(function(){return Kue}).then(a,W);case"dyte-sidebar":return Promise.resolve().then(function(){return Que}).then(a,W);case"dyte-simple-grid":return Promise.resolve().then(function(){return Xue}).then(a,W);case"dyte-spotlight-grid":return Promise.resolve().then(function(){return tpe}).then(a,W);case"dyte-stage":return Promise.resolve().then(function(){return rpe}).then(a,W);case"dyte-stage-toggle":return Promise.resolve().then(function(){return npe}).then(a,W);case"dyte-text-field":return Promise.resolve().then(function(){return ope}).then(a,W);case"dyte-ui-provider":return Promise.resolve().then(function(){return dpe}).then(a,W);case"dyte-waiting-screen":return Promise.resolve().then(function(){return upe}).then(a,W);case"dyte-webinar-stage-toggle":return Promise.resolve().then(function(){return hpe}).then(a,W);case"dyte-audio-grid_2":return Promise.resolve().then(function(){return fpe}).then(a,W);case"dyte-breakout-room-manager_3":return Promise.resolve().then(function(){return wpe}).then(a,W);case"dyte-chat_5":return Promise.resolve().then(function(){return Ope}).then(a,W);case"dyte-debugger-audio_3":return Promise.resolve().then(function(){return Npe}).then(a,W);case"dyte-name-tag":return Promise.resolve().then(function(){return jpe}).then(a,W);case"dyte-participant":return Promise.resolve().then(function(){return zpe}).then(a,W);case"dyte-settings-audio_2":return Promise.resolve().then(function(){return Bpe}).then(a,W);case"dyte-tab-bar":return Promise.resolve().then(function(){return Gpe}).then(a,W);case"dyte-audio-visualizer_2":return Promise.resolve().then(function(){return Qpe}).then(a,W);case"dyte-channel-details_14":return Promise.resolve().then(function(){return vhe}).then(a,W);case"dyte-livestream-indicator_3":return Promise.resolve().then(function(){return _he}).then(a,W);case"dyte-participant-tile":return Promise.resolve().then(function(){return Ehe}).then(a,W);case"dyte-poll_2":return Promise.resolve().then(function(){return xhe}).then(a,W);case"dyte-spotlight-indicator":return Promise.resolve().then(function(){return Che}).then(a,W);case"dyte-chat-message_5":return Promise.resolve().then(function(){return Jhe}).then(a,W);case"dyte-debugger-issues-ui_3":return Promise.resolve().then(function(){return nge}).then(a,W);case"dyte-dialog":return Promise.resolve().then(function(){return oge}).then(a,W);case"dyte-logo":return Promise.resolve().then(function(){return dge}).then(a,W);case"dyte-menu_3":return Promise.resolve().then(function(){return Lge}).then(a,W);case"dyte-avatar":return Promise.resolve().then(function(){return Uge}).then(a,W);case"dyte-controlbar-button":return Promise.resolve().then(function(){return $ge}).then(a,W);case"dyte-tooltip":return Promise.resolve().then(function(){return Fge}).then(a,W);case"dyte-spinner":return Promise.resolve().then(function(){return Bge}).then(a,W);case"dyte-button":return Promise.resolve().then(function(){return Gge}).then(a,W);case"dyte-icon":return Promise.resolve().then(function(){return Jge}).then(a,W)}}return vne(()=>import(`./${s}.entry.js`),[]).then(a=>(cb.set(s,a),a[r]),W)},Jf=new Map,Uh=typeof window<"u"?window:{},Ms=Uh.document||{head:{}},ni={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,r)=>t.addEventListener(e,i,r),rel:(t,e,i,r)=>t.removeEventListener(e,i,r),ce:(t,e)=>new CustomEvent(t,e)},s3=t=>Promise.resolve(t),Yne=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),mP=[],n3=[],Qne=(t,e)=>i=>{t.push(i),xw||(xw=!0,e&&ni.$flags$&4?sE(Pw):ni.raf(Pw))},fP=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){W(i)}t.length=0},Pw=()=>{fP(mP),fP(n3),(xw=mP.length>0)&&ni.raf(Pw)},sE=t=>s3().then(t),Li=Qne(n3,!0),Zne=()=>s3(),Xne=(t,e)=>typeof window>"u"?Promise.resolve():Zne().then(()=>Bne(JSON.parse('[["dyte-icon",[[1,"dyte-icon",{"icon":[1],"iconPack":[16],"t":[16],"size":[513]}]]],["dyte-sidebar",[[1,"dyte-sidebar",{"enabledSections":[16],"defaultSection":[1,"default-section"],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"size":[513],"view":[513],"currentTab":[32]}]]],["dyte-breakout-rooms-manager",[[1,"dyte-breakout-rooms-manager",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"loading":[32],"roomConfig":[32],"draftState":[32],"assigningParticipants":[32],"selectedParticipants":[32],"ephemeralStatusText":[32],"isDragMode":[32]},[[0,"participantDelete","onParticipantDelete"],[0,"participantsDragging","toggleDragMode"],[0,"selectedParticipantsUpdate","updateSelectedParticipants"],[0,"allParticipantsToggleUpdate","updateAllParticipants"]]]]],["dyte-debugger",[[1,"dyte-debugger",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"isMobileMainVisible":[32],"progress":[32]},[[0,"testProgress","progressUpdate"]]]]],["dyte-grid",[[1,"dyte-grid",{"layout":[513],"aspectRatio":[513,"aspect-ratio"],"meeting":[16],"gap":[514],"size":[513],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"overrides":[8]}]]],["dyte-participants-viewer-list",[[1,"dyte-participants-viewer-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"search":[1],"t":[16],"stageViewers":[32]}]]],["dyte-settings",[[1,"dyte-settings",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"isMobileMainVisible":[32],"networkStatus":[32],"canProduceVideo":[32]}]]],["dyte-screenshare-view",[[1,"dyte-screenshare-view",{"hideFullScreenButton":[4,"hide-full-screen-button"],"nameTagPosition":[513,"name-tag-position"],"participant":[16],"meeting":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoExpanded":[32],"screenShareEnabled":[32],"isFullScreen":[32],"remoteControlInfo":[32]}]]],["dyte-mixed-grid",[[1,"dyte-mixed-grid",{"layout":[513],"participants":[16],"pinnedParticipants":[16],"screenShareParticipants":[16],"plugins":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"activeTab":[32],"initialised":[32]}]]],["dyte-participants-stage-queue",[[1,"dyte-participants-stage-queue",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"stageRequestedParticipants":[32]}]]],["dyte-participants-waiting-list",[[1,"dyte-participants-waiting-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"waitlistedParticipants":[32]}]]],["dyte-audio-tile",[[1,"dyte-audio-tile",{"meeting":[16],"config":[16],"size":[513],"states":[16],"iconPack":[16],"t":[16],"participant":[16],"isSpeaking":[32]}]]],["dyte-camera-toggle",[[1,"dyte-camera-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"videoEnabled":[32],"canProduceVideo":[32],"cameraPermission":[32]}]]],["dyte-channel-creator",[[1,"dyte-channel-creator",{"meeting":[16],"t":[16],"iconPack":[16],"channelName":[32],"searchQuery":[32],"step":[32],"loading":[32],"selectedMemberIds":[32],"focusedMemberIndex":[32],"showAllMembersList":[32]}]]],["dyte-mic-toggle",[[1,"dyte-mic-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"audioEnabled":[32],"canProduceAudio":[32],"micPermission":[32]}]]],["dyte-mute-all-button",[[1,"dyte-mute-all-button",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-remote-access-manager",[[1,"dyte-remote-access-manager",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"acceptedRequestId":[32]}]]],["dyte-screen-share-toggle",[[1,"dyte-screen-share-toggle",{"states":[16],"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"maxScreenShareCount":[32],"screenShareCount":[32],"screenShareEnabled":[32],"canScreenShare":[32],"shareScreenPermission":[32],"screenShareState":[32]}]]],["dyte-stage-toggle",[[1,"dyte-stage-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"stageStatus":[32],"state":[32]}]]],["dyte-webinar-stage-toggle",[[1,"dyte-webinar-stage-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"stageStatus":[32],"canPresent":[32],"requestProduce":[32]}]]],["dyte-ai-toggle",[[1,"dyte-ai-toggle",{"variant":[513],"states":[16],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"middlewares":[16],"aiActive":[32]}]]],["dyte-breakout-rooms-toggle",[[1,"dyte-breakout-rooms-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-chat-toggle",[[1,"dyte-chat-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"unreadMessageCount":[32],"chatActive":[32],"canViewChat":[32],"hasNewMessages":[32]}]]],["dyte-debugger-toggle",[[1,"dyte-debugger-toggle",{"variant":[513],"meeting":[16],"states":[16],"t":[16],"iconPack":[16],"size":[513]}]]],["dyte-fullscreen-toggle",[[1,"dyte-fullscreen-toggle",{"states":[16],"targetElement":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"fullScreenActive":[32],"isFullScreenSupported":[32]}]]],["dyte-grid-pagination",[[1,"dyte-grid-pagination",{"meeting":[16],"states":[16],"size":[513],"variant":[513],"iconPack":[16],"t":[16],"page":[32],"pageCount":[32],"activeCount":[32],"activeComputedCount":[32],"showPagination":[32]}]]],["dyte-idle-screen",[[1,"dyte-idle-screen",{"meeting":[16],"config":[16],"iconPack":[16],"t":[16]}]]],["dyte-leave-button",[[1,"dyte-leave-button",{"variant":[513],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-livestream-toggle",[[1,"dyte-livestream-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"livestreamState":[32]}]]],["dyte-more-toggle",[[1,"dyte-more-toggle",{"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-participants-audio",[[1,"dyte-participants-audio",{"meeting":[16],"iconPack":[16],"t":[16],"showPlayDialog":[32]}]]],["dyte-participants-toggle",[[1,"dyte-participants-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"participantsActive":[32],"waitlistedParticipants":[32],"stageRequestedParticipants":[32],"canViewParticipants":[32]}]]],["dyte-pip-toggle",[[1,"dyte-pip-toggle",{"variant":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"size":[513],"t":[16],"pipEnabled":[32],"pipSupported":[32]}]]],["dyte-plugins-toggle",[[1,"dyte-plugins-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"pluginsActive":[32],"canViewPlugins":[32]}]]],["dyte-polls-toggle",[[1,"dyte-polls-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"pollsActive":[32],"unreadPollsCount":[32],"canViewPolls":[32]}]]],["dyte-recording-toggle",[[1,"dyte-recording-toggle",{"variant":[513],"meeting":[16],"t":[16],"iconPack":[16],"size":[513],"disabled":[4],"recordingState":[32],"canRecord":[32]}]]],["dyte-settings-toggle",[[1,"dyte-settings-toggle",{"variant":[513],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-setup-screen",[[1,"dyte-setup-screen",{"meeting":[16],"states":[16],"size":[513],"config":[16],"iconPack":[16],"t":[16],"displayName":[32],"isJoining":[32],"canEditName":[32]}]]],["dyte-ai",[[1,"dyte-ai",{"defaultSection":[1,"default-section"],"meeting":[16],"middlewares":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"size":[513],"view":[513],"tab":[32],"newTranscriptionAvailable":[32],"newAiMessageAvailable":[32]}]]],["dyte-ai-home",[[1,"dyte-ai-home",{"meeting":[16],"initialMessages":[16],"middlewares":[16],"prompt":[32],"messages":[32]}]]],["dyte-broadcast-message-modal",[[1,"dyte-broadcast-message-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"messagePayload":[32],"successMessage":[32]}]]],["dyte-ended-screen",[[1,"dyte-ended-screen",{"config":[16],"size":[513],"states":[16],"t":[16],"iconPack":[16],"meeting":[16],"icon":[32],"message":[32]}]]],["dyte-image-viewer",[[1,"dyte-image-viewer",{"image":[16],"size":[513],"t":[16],"iconPack":[16]}]]],["dyte-permissions-message",[[1,"dyte-permissions-message",{"meeting":[16],"t":[16],"iconPack":[16],"states":[16],"device":[32]}]]],["dyte-plugin-main",[[1,"dyte-plugin-main",{"meeting":[16],"plugin":[16],"iconPack":[16],"t":[16],"canClosePlugin":[32],"viewModeEnabled":[32]}]]],["dyte-clock",[[1,"dyte-clock",{"meeting":[16],"iconPack":[16],"t":[16],"startedTime":[32],"timeDiff":[32]}]]],["dyte-confirmation-modal",[[1,"dyte-confirmation-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16]}]]],["dyte-leave-meeting",[[1,"dyte-leave-meeting",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"canEndMeeting":[32]}]]],["dyte-meeting-title",[[1,"dyte-meeting-title",{"meeting":[16],"iconPack":[16],"t":[16]}]]],["dyte-mute-all-confirmation",[[1,"dyte-mute-all-confirmation",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"allowUnmute":[32]}]]],["dyte-network-indicator",[[1,"dyte-network-indicator",{"participant":[16],"meeting":[16],"iconPack":[16],"t":[16],"isScreenShare":[4,"is-screen-share"],"score":[32]}]]],["dyte-participant-count",[[1,"dyte-participant-count",{"meeting":[16],"iconPack":[16],"t":[16],"participantCount":[32],"isViewer":[32]}]]],["dyte-participant-setup",[[1,"dyte-participant-setup",{"nameTagPosition":[513,"name-tag-position"],"isPreview":[4,"is-preview"],"participant":[16],"states":[16],"config":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoState":[32],"isPinned":[32]}]]],["dyte-recording-indicator",[[1,"dyte-recording-indicator",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"isRecording":[32]}]]],["dyte-waiting-screen",[[1,"dyte-waiting-screen",{"meeting":[16],"config":[16],"iconPack":[16],"t":[16]}]]],["dyte-ai-chat",[[1,"dyte-ai-chat",{"t":[16]}]]],["dyte-ai-transcriptions",[[1,"dyte-ai-transcriptions",{"t":[16],"meeting":[16],"initialTranscriptions":[16],"middlewares":[16],"participantQuery":[32],"isProcessing":[32],"captionViewEnabled":[32],"transcriptions":[32]}]]],["dyte-controlbar",[[1,"dyte-controlbar",{"variant":[513],"disableRender":[4,"disable-render"],"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"t":[16],"middlewares":[16],"size":[513]}]]],["dyte-debugger-network",[[1,"dyte-debugger-network",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"issueKey":[32]}]]],["dyte-header",[[1,"dyte-header",{"variant":[513],"disableRender":[4,"disable-render"],"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"t":[16],"size":[513]}]]],["dyte-meeting",[[1,"dyte-meeting",{"loadConfigFromPreset":[4,"load-config-from-preset"],"applyDesignSystem":[4,"apply-design-system"],"mode":[513],"leaveOnUnmount":[4,"leave-on-unmount"],"meeting":[16],"showSetupScreen":[1028,"show-setup-screen"],"t":[16],"config":[1040],"iconPackUrl":[513,"icon-pack-url"],"size":[1537],"gridLayout":[1,"grid-layout"],"middlewares":[16],"states":[32],"newMeeting":[32],"iconPack":[32]},[[0,"dyteStateUpdate","listenState"]]]]],["dyte-participants-stage-list",[[1,"dyte-participants-stage-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"search":[1],"participants":[32],"showStageList":[32]}]]],["dyte-simple-grid",[[1,"dyte-simple-grid",{"participants":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"dimensions":[32]}]]],["dyte-spotlight-grid",[[1,"dyte-spotlight-grid",{"layout":[513],"participants":[16],"pinnedParticipants":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16]}]]],["dyte-stage",[[1,"dyte-stage",{"iconPack":[16],"t":[16]}]]],["dyte-text-field",[[1,"dyte-text-field",{"type":[1],"placeholder":[1],"disabled":[4],"iconPack":[16],"t":[16]}]]],["dyte-ui-provider",[[4,"dyte-ui-provider",{"meeting":[16],"size":[1537],"config":[1040],"t":[16],"iconPackUrl":[513,"icon-pack-url"],"loadConfigFromPreset":[4,"load-config-from-preset"],"applyDesignSystem":[4,"apply-design-system"],"joinRoom":[4,"join-room"],"isReady":[32],"iconPack":[32]}]]],["dyte-button",[[1,"dyte-button",{"size":[513],"variant":[513],"kind":[513],"reverse":[516],"disabled":[516],"iconPack":[16],"t":[16]}]]],["dyte-participant",[[1,"dyte-participant",{"meeting":[16],"view":[1],"participant":[16],"iconPack":[16],"t":[16],"audioEnabled":[32],"videoEnabled":[32],"isPinned":[32],"isOnStage":[32],"canDisableParticipantAudio":[32],"canDisableParticipantVideo":[32],"canKickParticipant":[32],"canPinParticipant":[32],"canAllowParticipantOnStage":[32]}]]],["dyte-tab-bar",[[1,"dyte-tab-bar",{"size":[513],"meeting":[16],"states":[16],"config":[16],"layout":[513],"iconPack":[16],"t":[16],"activeTab":[16],"tabs":[16]}]]],["dyte-name-tag",[[1,"dyte-name-tag",{"participant":[16],"meeting":[16],"size":[513],"maxLength":[2,"max-length"],"isScreenShare":[4,"is-screen-share"],"variant":[513],"iconPack":[16],"t":[16],"length":[32]}]]],["dyte-participant-tile",[[1,"dyte-participant-tile",{"nameTagPosition":[513,"name-tag-position"],"isPreview":[4,"is-preview"],"participant":[16],"meeting":[16],"states":[16],"config":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoState":[32],"isPinned":[32]}]]],["dyte-settings-audio_2",[[1,"dyte-settings-audio",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"audioDevices":[32],"speakerDevices":[32],"canProduceAudio":[32],"currentDevices":[32]}],[1,"dyte-settings-video",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"videoDevices":[32],"currentDevice":[32],"videoEnabled":[32]}]]],["dyte-audio-grid_2",[[1,"dyte-video-grid",{"layout":[513],"aspectRatio":[513,"aspect-ratio"],"meeting":[16],"gap":[514],"size":[513],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"overrides":[8],"participants":[32],"pinnedParticipants":[32],"screenShareParticipants":[32],"plugins":[32],"showWebinarStage":[32],"showLiveStreamPlayer":[32],"canCurrentPeerHost":[32],"connected":[32],"pipSupported":[32],"pipEnabled":[32]}],[1,"dyte-audio-grid",{"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"size":[513],"t":[16],"hideSelf":[4,"hide-self"],"onStageParticipants":[32],"offStageParticipants":[32]}]]],["dyte-tooltip",[[1,"dyte-tooltip",{"label":[1],"variant":[513],"disabled":[516],"open":[516],"kind":[513],"size":[513],"placement":[1],"delay":[2],"iconPack":[16],"t":[16],"isInFocus":[32]}]]],["dyte-spotlight-indicator",[[1,"dyte-spotlight-indicator",{"meeting":[16],"iconPack":[16],"t":[16],"size":[513],"canSpotlight":[32],"isSpotlighted":[32]}]]],["dyte-debugger-audio_3",[[1,"dyte-debugger-audio",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"micMetadata":[32],"micPreview":[32],"speakerPreview":[32],"audioTrackStats":[32],"activeTab":[32],"stage":[32],"mediaPermission":[32],"speakerDevice":[32],"speakerTest":[32]}],[1,"dyte-debugger-screenshare",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"stage":[32],"mediaPermission":[32],"screenshareEnabled":[32],"audioTrackMetadata":[32],"videoTrackMetadata":[32],"screenshareTest":[32],"audioTrackStats":[32],"videoTrackStats":[32]}],[1,"dyte-debugger-video",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"stage":[32],"mediaPermission":[32],"videoPreview":[32],"videoMetadata":[32],"videoTrackStats":[32]}]]],["dyte-breakout-room-manager_3",[[1,"dyte-breakout-room-manager",{"meeting":[16],"assigningParticipants":[4,"assigning-participants"],"mode":[1],"states":[16],"allowDelete":[4,"allow-delete"],"iconPack":[16],"t":[16],"isDragMode":[4,"is-drag-mode"],"room":[16],"defaultExpanded":[4,"default-expanded"],"editingTitleRoomId":[32],"newTitle":[32],"showExpandedCard":[32],"glowingCard":[32]}],[1,"dyte-breakout-room-participants",{"meeting":[16],"participantIds":[16],"iconPack":[16],"t":[16],"selectedParticipantIds":[16],"search":[32],"participantsToShow":[32],"isDragging":[32]}],[1,"dyte-counter",{"size":[513],"value":[2],"minValue":[2,"min-value"],"iconPack":[16],"t":[16],"input":[32]}]]],["dyte-poll_2",[[1,"dyte-poll-form",{"iconPack":[16],"t":[16],"options":[32],"anonymous":[32],"hideVotes":[32],"error":[32]}],[1,"dyte-poll",{"poll":[16],"self":[1],"permissions":[16],"iconPack":[16],"t":[16]}]]],["dyte-dialog",[[1,"dyte-dialog",{"hideCloseButton":[4,"hide-close-button"],"disableEscapeKey":[4,"disable-escape-key"],"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"open":[1540]}]]],["dyte-spinner",[[1,"dyte-spinner",{"iconPack":[16],"size":[513],"t":[16]}]]],["dyte-chat-message_5",[[1,"dyte-chat-message",{"message":[16],"isContinued":[4,"is-continued"],"isUnread":[4,"is-unread"],"size":[513],"iconPack":[16],"t":[16],"isSelf":[4,"is-self"],"canEdit":[4,"can-edit"],"canDelete":[4,"can-delete"],"canReply":[4,"can-reply"],"disableControls":[4,"disable-controls"],"alignRight":[4,"align-right"],"senderDisplayPicture":[1,"sender-display-picture"],"hideAvatar":[4,"hide-avatar"],"now":[32]}],[1,"dyte-paginated-list",{"pageSize":[2,"page-size"],"pagesAllowed":[2,"pages-allowed"],"fetchData":[16],"createNodes":[16],"selectedItemId":[1,"selected-item-id"],"autoScroll":[4,"auto-scroll"],"iconPack":[16],"t":[16],"emptyListLabel":[1,"empty-list-label"],"isLoading":[32],"rerenderBoolean":[32],"shouldRenderNewNodes":[32],"hasNewNodesToRender":[32],"showEmptyListLabel":[32],"onNewNode":[64],"onNodeDelete":[64],"onNodeUpdate":[64]}],[0,"dyte-image-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16],"showBubble":[4,"show-bubble"],"status":[32]}],[0,"dyte-file-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16],"showBubble":[4,"show-bubble"]}],[0,"dyte-text-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16],"showBubble":[4,"show-bubble"]}]]],["dyte-chat_5",[[1,"dyte-chat",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"disablePrivateChat":[4,"disable-private-chat"],"privatePresetFilter":[16],"unreadCountGroups":[32],"chatGroups":[32],"selectedGroup":[32],"now":[32],"dropzoneActivated":[32],"showLatestMessageButton":[32],"canSend":[32],"canSendTextMessage":[32],"canSendFiles":[32],"canPrivateMessage":[32],"canSendPrivateTexts":[32],"canSendPrivateFiles":[32],"emojiPickerEnabled":[32],"chatRecipientId":[32],"participants":[32],"selectedParticipant":[32],"channels":[32],"selectedChannelId":[32],"editingMessage":[32],"replyMessage":[32],"searchQuery":[32],"creatingChannel":[32]},[[8,"editMessageInit","onEditMessageInit"],[0,"switchChannel","channelSwitchListener"]]],[1,"dyte-polls",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"create":[32],"polls":[32]}],[1,"dyte-plugins",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"plugins":[32],"canStartPlugins":[32],"canClosePlugins":[32],"activatedPluginsId":[32]}],[1,"dyte-sidebar-ui",{"view":[513],"tabs":[16],"currentTab":[1,"current-tab"],"iconPack":[16],"t":[16]}],[1,"dyte-participants",{"meeting":[16],"states":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"search":[32]}]]],["dyte-audio-visualizer_2",[[1,"dyte-audio-visualizer",{"variant":[513],"participant":[16],"size":[513],"iconPack":[16],"t":[16],"isScreenShare":[4,"is-screen-share"],"audioEnabled":[32],"volume":[32]}],[1,"dyte-switch",{"checked":[1028],"readonly":[4],"disabled":[516],"iconPack":[16],"t":[16]}]]],["dyte-logo",[[1,"dyte-logo",{"logoUrl":[1025,"logo-url"],"config":[16],"meeting":[16],"t":[16]}]]],["dyte-livestream-indicator_3",[[1,"dyte-livestream-player",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"playbackUrl":[32],"isSupported":[32],"playerState":[32],"livestreamState":[32],"playerError":[32],"latency":[32],"audioPlaybackError":[32]}],[1,"dyte-livestream-indicator",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"isLivestreaming":[32]}],[1,"dyte-viewer-count",{"meeting":[16],"variant":[513],"iconPack":[16],"t":[16],"viewerCount":[32]}]]],["dyte-debugger-issues-ui_3",[[1,"dyte-debugger-permissions-ui",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"mediaType":[1,"media-type"],"issueKey":[32],"permission":[32],"devices":[32]}],[1,"dyte-debugger-issues-ui",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"mediaType":[1,"media-type"],"issueIndex":[32],"reported":[32]}],[1,"dyte-information-tooltip",{"iconPack":[16]}]]],["dyte-avatar",[[1,"dyte-avatar",{"participant":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"imageState":[32]}]]],["dyte-controlbar-button",[[1,"dyte-controlbar-button",{"variant":[513],"showWarning":[4,"show-warning"],"size":[513],"label":[1],"icon":[1],"isLoading":[4,"is-loading"],"disabled":[516],"iconPack":[16],"t":[16],"brandIcon":[516,"brand-icon"]}]]],["dyte-menu_3",[[1,"dyte-menu",{"size":[513],"placement":[1],"iconPack":[16],"t":[16]}],[1,"dyte-menu-item",{"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-menu-list",{"iconPack":[16],"t":[16]}]]],["dyte-channel-details_14",[[1,"dyte-chat-messages-ui-paginated",{"meeting":[16],"selectedChannel":[16],"selectedChannelId":[1,"selected-channel-id"],"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-chat-search-results",{"meeting":[16],"query":[1],"channelId":[1,"channel-id"],"iconPack":[16],"t":[16]}],[0,"dyte-channel-header",{"meeting":[16],"channel":[16],"iconPack":[16],"t":[16],"showChannelDetailsDialog":[32],"showSearchBar":[32],"members":[32]}],[1,"dyte-chat-composer-ui",{"canSendTextMessage":[4,"can-send-text-message"],"canSendFiles":[4,"can-send-files"],"size":[513],"iconPack":[16],"t":[16],"disableEmojiPicker":[4,"disable-emoji-picker"],"prefill":[16],"members":[16],"channelId":[1,"channel-id"],"emojiPickerActive":[32],"mentionQuery":[32],"focusedMemberIndex":[32],"filePreview":[32]}],[1,"dyte-chat-messages-ui",{"selectedGroup":[1,"selected-group"],"messages":[16],"selfUserId":[1,"self-user-id"],"size":[513],"iconPack":[16],"t":[16],"now":[32],"showLatestMessageButton":[32]}],[1,"dyte-dialog-manager",{"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-channel-selector-ui",{"channels":[16],"selectedChannelId":[1,"selected-channel-id"],"iconPack":[16],"t":[16],"showRecentMessage":[4,"show-recent-message"],"isHidden":[32],"searchQuery":[32]}],[1,"dyte-notifications",{"meeting":[16],"states":[16],"config":[16],"t":[16],"size":[513],"iconPack":[16],"notifications":[32]},[[8,"dyteAPIError","apiErrorListener"]]],[1,"dyte-chat-selector-ui",{"selfUserId":[1,"self-user-id"],"selectedGroupId":[1,"selected-group-id"],"unreadCounts":[16],"groups":[16],"iconPack":[16],"t":[16],"showParticipantsPanel":[32],"query":[32]}],[1,"dyte-channel-details",{"channel":[16],"t":[16],"iconPack":[16],"members":[16]}],[1,"dyte-emoji-picker",{"iconPack":[16],"t":[16],"emojiList":[32],"filterVal":[32],"filteredEmojis":[32]}],[1,"dyte-notification",{"notification":[16],"size":[513],"iconPack":[16],"t":[16],"imageState":[32]}],[1,"dyte-join-stage",{"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"dataConfig":[16]}],[1,"dyte-overlay-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16]}]]]]'),e)),Me={designTokens:{spacingBase:4,googleFont:"Inter"},styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",position:"relative",overflow:"visible",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"dyte-debugger":{width:"720px",height:"480px"},"dyte-breakout-rooms-manager":{minHeight:"400px",minWidth:"500px",maxWidth:"80%",maxHeight:"480px"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:{"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":["dyte-header","dyte-stage","dyte-controlbar","dyte-participants-audio","dyte-dialog-manager"],"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"],"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":["dyte-logo","dyte-recording-indicator","dyte-livestream-indicator"],"div#header-center":["dyte-meeting-title"],"div#header-right":["dyte-grid-pagination","dyte-clock","dyte-participant-count","dyte-viewer-count"],"div#header-left.sm":["dyte-meeting-title","dyte-recording-indicator","dyte-livestream-indicator"],"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],children:["dyte-simple-grid"]},"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],children:["dyte-simple-grid"]},"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-settings","div#setupcontrols-media"],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}]],"dyte-screenshare-view":{children:["dyte-name-tag","dyte-network-indicator"]},"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]],"dyte-controlbar":{states:["activeMoreMenu"],props:{variant:"solid"},children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"dyte-more-toggle":{states:["activeMoreMenu"],children:[]},"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-more-toggle.activeMoreMenu":[["dyte-fullscreen-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-pip-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-mute-all-button",{variant:"horizontal",slot:"more-elements"}],["dyte-breakout-rooms-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-recording-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-debugger-toggle",{variant:"horizontal"}]],"dyte-more-toggle.activeMoreMenu.sm":[["dyte-chat-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-participants-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-polls-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-plugins-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-fullscreen-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-screen-share-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-pip-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-mute-all-button",{variant:"horizontal",slot:"more-elements"}],["dyte-breakout-rooms-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-settings-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-ai-toggle",{variant:"horizontal"}],["dyte-debugger-toggle",{variant:"horizontal"}]],"dyte-more-toggle.activeMoreMenu.md":[["dyte-chat-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-participants-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-polls-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-plugins-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-fullscreen-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-screen-share-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-pip-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-mute-all-button",{variant:"horizontal",slot:"more-elements"}],["dyte-breakout-rooms-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-settings-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-ai-toggle",{variant:"horizontal"}],["dyte-debugger-toggle",{variant:"horizontal"}]],"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-leave-button","dyte-more-toggle"],"div#controlbar-left":["dyte-settings-toggle","dyte-screen-share-toggle","dyte-livestream-toggle"],"div#controlbar-center":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-more-toggle","dyte-leave-button"],"div#controlbar-right":["dyte-chat-toggle","dyte-polls-toggle","dyte-participants-toggle","dyte-plugins-toggle","dyte-ai-toggle"]},config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}};var a3=typeof global=="object"&&global&&global.Object===Object&&global,eae=typeof self=="object"&&self&&self.Object===Object&&self,Wc=a3||eae||Function("return this")(),Kf=Wc.Symbol,o3=Object.prototype,tae=o3.hasOwnProperty,iae=o3.toString,Lu=Kf?Kf.toStringTag:void 0;function rae(t){var e=tae.call(t,Lu),i=t[Lu];try{t[Lu]=void 0;var r=!0}catch{}var s=iae.call(t);return r&&(e?t[Lu]=i:delete t[Lu]),s}var sae=Object.prototype,nae=sae.toString;function aae(t){return nae.call(t)}var oae="[object Null]",cae="[object Undefined]",vP=Kf?Kf.toStringTag:void 0;function jh(t){return t==null?t===void 0?cae:oae:vP&&vP in Object(t)?rae(t):aae(t)}function hn(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Jl(t){return t!=null&&typeof t=="object"}const Nn=720,Un=1280,dae="#000000",lae=t=>{switch(t){case 0:case 1:return[Un,Nn];case 2:return[Math.floor(Un/2),Nn];case 3:case 4:return[Math.floor(Un/2),Math.floor(Nn/2)];case 5:case 6:return[Math.floor(Un/3),Math.floor(Nn/2)];default:return[Math.floor(Un/3),Math.floor(Nn/2)]}},uae=(t,e,i,r,s,n)=>{let a=.5,o=.5;const c=s,d=n,u=Math.min(i/c,r/d);let p=c*u,g=d*u,m,f,b,w,v=1;return p<i&&(v=i/p),Math.abs(v-1)<1e-14&&g<r&&(v=r/g),p*=v,g*=v,b=c/(p/i),w=d/(g/r),m=(c-b)*a,f=(d-w)*o,m<0&&(m=0),f<0&&(f=0),b>c&&(b=c),w>d&&(w=d),[m,f,b,w,t,e,i,r]};var ur;(function(t){t.CAMERA="CAMERA",t.MIC="MIC",t.END="END"})(ur||(ur={}));class pae{constructor(){this.tracks=[],this.sources=[],this.enabled=!1}isSupported(){return!!window.chrome&&document.pictureInPictureEnabled}cleanup(){this.isSupported()&&document.exitPictureInPicture!==void 0&&document.pictureInPictureElement!==null&&document.exitPictureInPicture(),this.canvas=void 0,this.video=void 0,this.tracks=[],this.request=void 0}createCanvas(){const e=document.createElement("canvas");e.height=Nn,e.width=Un,this.canvas=e}setupEvents(e){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("hangup",()=>{e(ur.END)})}mountAudioEvents(e){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglemicrophone",()=>{e(ur.MIC)})}mountVideoEvents(e){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglecamera",()=>{e(ur.CAMERA)})}unmountAudioEvents(){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglemicrophone",void 0)}unmountVideoEvents(){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglecamera",void 0)}drawGrid(e,i,r){if(this.canvas===void 0)return;const s=this.canvas.getContext("2d");s.fillStyle=dae,s.fillRect(0,0,Un,Nn);let n=0,a=0;for(;n<Nn-5;){let o=0;for(;o<Un-5&&a<r;){const c=this.tracks[a],[d,u,p,g,m,f,b,w]=uae(o,n,e,i,c.videoWidth,c.videoHeight);s.drawImage(c,d,u,p,g,m,f,b,w),a+=1,o+=e}n+=i}}paintCanvas(){const e=this.tracks.length,[i,r]=lae(e);this.drawGrid(i,r,e)}animate(){this.tracks!==void 0&&this.paintCanvas(),this.request!==void 0&&(this.request=requestAnimationFrame(()=>this.animate()))}create(e,i,r){this.cleanup(),this.createCanvas(),this.setupEvents(r);const s=document.createElement("video");s.height=Nn,s.width=Un,s.autoplay=!0,s.srcObject=this.canvas.captureStream(24),this.video=s,this.video.onloadedmetadata=()=>{try{e(),this.video.onleavepictureinpicture=()=>{i()}}catch(n){i(n.getMessage())}},this.paintCanvas()}updateMediaSession(e,i){navigator.mediaSession!==void 0&&(e===ur.CAMERA&&navigator.mediaSession.setCameraActive!==void 0&&navigator.mediaSession.setCameraActive(i),e===ur.MIC&&navigator.mediaSession.setMicrophoneActive!==void 0&&navigator.mediaSession.setMicrophoneActive(i))}updateVideoSources(){const e=Object.values(this.sources).filter(r=>r.enabled),i=[];e.map(r=>{i.push(r.element)}),this.tracks=i}enableSource(e){this.sources[e]!==void 0&&(this.sources[e].enabled=!0),this.updateVideoSources()}disableSource(e){this.sources[e]!==void 0&&(this.sources[e].enabled=!1),this.updateVideoSources()}addSource(e,i,r){this.sources[e]={element:i,enabled:r}}removeSource(e){delete this.sources[e]}removeAllSource(){this.sources=[]}enable(){this.enabled=!0,this.request=requestAnimationFrame(()=>this.animate()),this.video.requestPictureInPicture()}disable(){this.enabled=!1,cancelAnimationFrame(this.request),this.request=void 0,document.exitPictureInPicture()}}const pt=new pae,ch=t=>bn(t)?t.meta.viewType==="LIVESTREAM"&&t.stage.status!=="ON_STAGE":!1,c3=t=>{var e;return bn(t)?t.meta.viewType==="LIVESTREAM"&&((e=t==null?void 0:t.self)===null||e===void 0?void 0:e.permissions.canLivestream):!1},bn=t=>{var e;return((e=t==null?void 0:t.self)===null||e===void 0?void 0:e.permissions.isV2)&&(t==null?void 0:t.livestream)};var Qs;(function(t){t.BUFFERING="Buffering",t.ENDED="Ended",t.IDLE="Idle",t.PLAYING="Playing",t.READY="Ready"})(Qs||(Qs={}));var Vt;(function(t){t.INITIALIZED="PlayerInitialized",t.QUALITY_CHANGED="PlayerQualityChanged",t.DURATION_CHANGED="PlayerDurationChanged",t.VOLUME_CHANGED="PlayerVolumeChanged",t.MUTED_CHANGED="PlayerMutedChanged",t.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",t.REBUFFERING="PlayerRebuffering",t.AUDIO_BLOCKED="PlayerAudioBlocked",t.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",t.ERROR="PlayerError",t.RECOVERABLE_ERROR="PlayerRecoverableError",t.ANALYTICS_EVENT="PlayerAnalyticsEvent",t.TIME_UPDATE="PlayerTimeUpdate",t.BUFFER_UPDATE="PlayerBufferUpdate",t.SEEK_COMPLETED="PlayerSeekCompleted",t.SESSION_DATA="PlayerSessionData",t.STATE_CHANGED="PlayerStateChanged",t.WORKER_ERROR="PlayerWorkerError",t.METADATA="PlayerMetadata",t.TEXT_CUE="PlayerTextCue",t.TEXT_METADATA_CUE="PlayerTextMetadataCue",t.AD_CUE="PlayerAdCue",t.STREAM_SOURCE_CUE="PlayerStreamSourceCue",t.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",t.SEGMENT_DISCONTINUITY="PlayerSegmentDiscontinuity",t.SEGMENT_METADATA="PlayerSegmentMetadata",t.PLAYER_METADATA="PlayerMetadata"})(Vt||(Vt={}));const hae=[Vt.TIME_UPDATE,Vt.BUFFER_UPDATE,Vt.TEXT_METADATA_CUE,Vt.PLAYER_METADATA],gae=[Vt.REBUFFERING,Vt.AUDIO_BLOCKED,Vt.PLAYBACK_BLOCKED,Vt.ERROR,Vt.RECOVERABLE_ERROR,Vt.WORKER_ERROR,Vt.NETWORK_UNAVAILABLE,Vt.ANALYTICS_EVENT,Vt.PLAYBACK_RATE_CHANGED,Vt.QUALITY_CHANGED,Vt.INITIALIZED],mae=t=>{var e,i,r,s,n,a;return bn(t)?((i=(e=t==null?void 0:t.self)===null||e===void 0?void 0:e.permissions)===null||i===void 0?void 0:i.canProduceAudio)==="ALLOWED"||((s=(r=t==null?void 0:t.self)===null||r===void 0?void 0:r.permissions)===null||s===void 0?void 0:s.canProduceScreenshare)==="ALLOWED"||((a=(n=t==null?void 0:t.self)===null||n===void 0?void 0:n.permissions)===null||a===void 0?void 0:a.canProduceVideo)==="ALLOWED":!1},fae=t=>{var e,i,r,s,n,a,o,c;return bn(t)?((i=(e=t==null?void 0:t.self)===null||e===void 0?void 0:e.permissions)===null||i===void 0?void 0:i.canProduceAudio)!=="NOT_ALLOWED"||((s=(r=t==null?void 0:t.self)===null||r===void 0?void 0:r.permissions)===null||s===void 0?void 0:s.canProduceScreenshare)!=="NOT_ALLOWED"||((a=(n=t==null?void 0:t.self)===null||n===void 0?void 0:n.permissions)===null||a===void 0?void 0:a.canProduceVideo)!=="NOT_ALLOWED"||((c=(o=t==null?void 0:t.self)===null||o===void 0?void 0:o.permissions)===null||c===void 0?void 0:c.canLivestream):!1},Yf={PLAY_PARTICIPANT_TILE_VIDEO_ON_PAUSE:"play_participant_tile_video_on_pause",DISABLE_EMOJI_PICKER:"disable_emoji_picker",FEAT_PAGINATED_CHAT:"feat_paginated_chat",LOG_PLAYING_FAILURES:"log_playing_failures",FEAT_CHANNEL_CHAT:"feat_channel_chat",FEAT_PARTICIPANT_LIST:"feat_participant_list"},vae=t=>t.connectedMeetings.supportsConnectedMeetings,Qf=t=>{var e;return(t==null?void 0:t.meta.viewType)==="CHAT"||bn(t)||((e=t==null?void 0:t.__internals__)===null||e===void 0?void 0:e.features.hasFeature("feat_paginated_chat"))};let d3=0;function yae(){return++d3}function bae(){d3=0}const l3="temp-";function wae(){return{id:`${l3}${Math.random().toString(36)}`,title:`Room ${yae()}`,participants:[]}}function db(t){return t.includes(l3)}function _ae(t,e){const i=t.length,r=Math.ceil(i/e),s=new Array(e);let n=0;for(let a=0;a<e;a++)s[a]=t.slice(n,n+r),n+=r;return s.filter(a=>a.length)}function Wt(t){var e;return(e=t.customParticipantId)!==null&&e!==void 0?e:t.clientSpecificId}function u3(t){const e=new Map;return[t.self,...t.participants.joined.toArray()].map(i=>{e.set(Wt(i),i.picture)}),[t.connectedMeetings.parentMeeting,...t.connectedMeetings.meetings].flatMap(i=>i.participants).map(i=>({id:i.id,customParticipantId:Wt(i),displayName:i.displayName,displayPictureUrl:i.displayPictureUrl!==""?i.displayPictureUrl:e.get(Wt(i))}))}const p3=t=>{const e=t.self.permissions.connectedMeetings;return!(!e.canAlterConnectedMeetings&&!t.connectedMeetings.isActive||!e.canSwitchConnectedMeetings&&!e.canSwitchToParentMeeting||!vae(t))},Sae=[0,.5,1,1.5,2,3,4,5,6,7,8,9,10,12,14,16,20,24,28,32,36,40,44,48,52,56,60,64,72,80,96],Eae={darkest:{background:{1e3:"#080808",900:"#1A1A1A",800:"#1E1E1E",700:"#2C2C2C",600:"#393939"},text:"#FFFFFF"},dark:{background:{1e3:"#252525",900:"#2F2F2F",800:"#323232",700:"#3E3E3E",600:"#4A4A4A"},text:"#F5F5F5","video-bg":"#1C1C1C"},light:{background:{1e3:"#FFFFFF",900:"#F5F5F5",800:"#EBEBEB",700:"#E0E0E0",600:"#D6D6D6"},text:"#111111","text-on-brand":"#ffffff","video-bg":"#DADADA"}},yP={none:{none:0,sm:0,md:0,lg:0},thin:{none:0,sm:1,md:2,lg:4},fat:{none:0,sm:2,md:4,lg:8}},bP={sharp:{none:0,sm:0,md:0,lg:0},rounded:{none:0,sm:4,md:8,lg:12},"extra-rounded":{none:0,sm:8,md:16,lg:24},circular:{none:9999,sm:9999,md:9999,lg:9999}},nE=[-2,-1,0,1,2];function $m(t){t=t.trim();let e="0",i="0",r="0";return t.length==4?(e="0x"+t[1]+t[1],i="0x"+t[2]+t[2],r="0x"+t[3]+t[3]):t.length>6&&(e="0x"+t[1]+t[2],i="0x"+t[3]+t[4],r="0x"+t[5]+t[6]),[+e,+i,+r]}const kae=(t,e,i)=>{let r,s,n;if(e==0)r=s=n=i;else{const a=(d,u,p)=>(p<0&&(p+=1),p>1&&(p-=1),p<.16666666666666666?d+(u-d)*6*p:p<.5?u:p<.6666666666666666?d+(u-d)*(.6666666666666666-p)*6:d),o=i<.5?i*(1+e):i+e-i*e,c=2*i-o;r=a(c,o,t+1/3),s=a(c,o,t),n=a(c,o,t-1/3)}return[Math.round(r*255),Math.round(s*255),Math.round(n*255)]},Tae=(t,e,i)=>{t/=255,e/=255,i/=255;const r=Math.max(t,e,i),s=Math.min(t,e,i);let n,a,o=(r+s)/2;if(r==s)n=a=0;else{const c=r-s;switch(a=o>.5?c/(2-r-s):c/(r+s),r){case t:n=(e-i)/c+(e<i?6:0);break;case e:n=(i-t)/c+2;break;case i:n=(t-e)/c+4;break}n/=6}return[n,a,o]},xae=(t,e,i)=>{const r=s=>s.toString(16).padStart(2,"0");return`#${r(t)}${r(e)}${r(i)}`},h3=(t,e=nE,i=.4)=>{const r=[],[s,n,a]=$m(t),[o,c,d]=Tae(s,n,a),u=Math.round(d*100);u>70?i=.8:u>60?i=.9:u<10?i=.075:u<42&&(i=.3);const p=e.findIndex(w=>w===0);if(p===-1)throw new Error("Invalid reducer provided, it must contain atleast one zero");const g=5-p,m=p+1,f=(100-u)/g,b=u/m;for(const w of e){let v;w<0?v=u+w*b*i:w>0?v=u+w*f*i:v=u;const[_,k,P]=kae(o,c,v/100);r.push(xae(_,k,P))}return r},Io=t=>typeof t=="string"&&t.length===7&&t.startsWith("#"),Pae=t=>{const[e,i,r,s,n]=h3(t,nE);return{300:e,400:i,500:r,600:s,700:n}},Cae=t=>{const[e,i,r,s,n]=h3(t,nE);return{1e3:e,900:i,800:r,700:s,600:n}},Rae=t=>{const e=[400,500,700],i=[];if(document.querySelector("link[data-dyte-font]")==null){const s=document.createElement("link");s.rel="preconnect",s.setAttribute("data-dyte-font","true"),s.href="https://fonts.googleapis.com";const n=s.cloneNode(!0);n.href="https://fonts.gstatic.com",n.crossOrigin="",i.push(s,n)}const r=document.createElement("link");r.rel="stylesheet",r.setAttribute("data-dyte-font",t),r.href=encodeURI(`https://fonts.googleapis.com/css2?family=${t}:wght@${e.join(";")}&display=swap`),i.push(r),document.head.append(...i)},Aae=(t,e)=>{Sae.forEach(i=>{t.style.setProperty(`--dyte-space-${i}`,`${i*e}px`)})},Iae=(t,e)=>{if(e in yP){const i=yP[e];Object.keys(i).forEach(r=>{t.style.setProperty(`--dyte-border-width-${r}`,`${i[r]}px`)})}},Oae=(t,e)=>{if(e in bP){const i=bP[e];Object.keys(i).forEach(r=>{t.style.setProperty(`--dyte-border-radius-${r}`,`${i[r]}px`)})}},wP=(t,e)=>{Object.keys(e).forEach(i=>{const r=e[i];if(typeof r=="string")if(i==="text"||i==="text-on-brand"){const s=$m(r).join(" ");t.style.setProperty(`--dyte-colors-${i}-1000`,`${s}`),t.style.setProperty(`--dyte-colors-${i}-900`,`${s} / 0.88`),t.style.setProperty(`--dyte-colors-${i}-800`,`${s} / 0.76`),t.style.setProperty(`--dyte-colors-${i}-700`,`${s} / 0.64`),t.style.setProperty(`--dyte-colors-${i}-600`,`${s} / 0.52`)}else{const s=$m(r).join(" ");t.style.setProperty(`--dyte-colors-${i}`,s)}else typeof r=="object"&&Object.keys(r).forEach(s=>{const n=r[s],a=$m(n).join(" ");t.style.setProperty(`--dyte-colors-${i}-${s}`,a)})})},Cw=(t,{spacingBase:e,borderRadius:i,borderWidth:r,colors:s,fontFamily:n,googleFont:a,theme:o})=>{if(typeof t!="object")throw new Error("[dyte-ui-kit] (provideDyteDesignSystem): Passed element is not a valid HTML Element");if(typeof a=="string"&&(Rae(a),t.style.setProperty("--dyte-font-family",a)),typeof n=="string"&&t.style.setProperty("--dyte-font-family",n),typeof e=="number"&&Aae(t,e),typeof r=="string"&&Iae(t,r),typeof i=="string"&&Oae(t,i),typeof o=="string"){const c=Eae[o];c!=null&&wP(t,c)}typeof s=="object"&&wP(t,s)};function Mae(){this.__data__=[],this.size=0}function dy(t,e){return t===e||t!==t&&e!==e}function ly(t,e){for(var i=t.length;i--;)if(dy(t[i][0],e))return i;return-1}var Dae=Array.prototype,Lae=Dae.splice;function Nae(t){var e=this.__data__,i=ly(e,t);if(i<0)return!1;var r=e.length-1;return i==r?e.pop():Lae.call(e,i,1),--this.size,!0}function Uae(t){var e=this.__data__,i=ly(e,t);return i<0?void 0:e[i][1]}function jae(t){return ly(this.__data__,t)>-1}function $ae(t,e){var i=this.__data__,r=ly(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this}function aa(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}aa.prototype.clear=Mae;aa.prototype.delete=Nae;aa.prototype.get=Uae;aa.prototype.has=jae;aa.prototype.set=$ae;function zae(){this.__data__=new aa,this.size=0}function Fae(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function Vae(t){return this.__data__.get(t)}function Bae(t){return this.__data__.has(t)}var Hae="[object AsyncFunction]",Gae="[object Function]",Wae="[object GeneratorFunction]",qae="[object Proxy]";function aE(t){if(!hn(t))return!1;var e=jh(t);return e==Gae||e==Wae||e==Hae||e==qae}var lb=Wc["__core-js_shared__"],_P=function(){var t=/[^.]+$/.exec(lb&&lb.keys&&lb.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Jae(t){return!!_P&&_P in t}var Kae=Function.prototype,Yae=Kae.toString;function Qae(t){if(t!=null){try{return Yae.call(t)}catch{}try{return t+""}catch{}}return""}var Zae=/[\\^$.*+?()[\]{}|]/g,Xae=/^\[object .+?Constructor\]$/,eoe=Function.prototype,toe=Object.prototype,ioe=eoe.toString,roe=toe.hasOwnProperty,soe=RegExp("^"+ioe.call(roe).replace(Zae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function noe(t){if(!hn(t)||Jae(t))return!1;var e=aE(t)?soe:Xae;return e.test(Qae(t))}function aoe(t,e){return t==null?void 0:t[e]}function oE(t,e){var i=aoe(t,e);return noe(i)?i:void 0}var g3=oE(Wc,"Map"),dh=oE(Object,"create");function ooe(){this.__data__=dh?dh(null):{},this.size=0}function coe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var doe="__lodash_hash_undefined__",loe=Object.prototype,uoe=loe.hasOwnProperty;function poe(t){var e=this.__data__;if(dh){var i=e[t];return i===doe?void 0:i}return uoe.call(e,t)?e[t]:void 0}var hoe=Object.prototype,goe=hoe.hasOwnProperty;function moe(t){var e=this.__data__;return dh?e[t]!==void 0:goe.call(e,t)}var foe="__lodash_hash_undefined__";function voe(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=dh&&e===void 0?foe:e,this}function Dc(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}Dc.prototype.clear=ooe;Dc.prototype.delete=coe;Dc.prototype.get=poe;Dc.prototype.has=moe;Dc.prototype.set=voe;function yoe(){this.size=0,this.__data__={hash:new Dc,map:new(g3||aa),string:new Dc}}function boe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function uy(t,e){var i=t.__data__;return boe(e)?i[typeof e=="string"?"string":"hash"]:i.map}function woe(t){var e=uy(this,t).delete(t);return this.size-=e?1:0,e}function _oe(t){return uy(this,t).get(t)}function Soe(t){return uy(this,t).has(t)}function Eoe(t,e){var i=uy(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this}function Kl(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}Kl.prototype.clear=yoe;Kl.prototype.delete=woe;Kl.prototype.get=_oe;Kl.prototype.has=Soe;Kl.prototype.set=Eoe;var koe=200;function Toe(t,e){var i=this.__data__;if(i instanceof aa){var r=i.__data__;if(!g3||r.length<koe-1)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new Kl(r)}return i.set(t,e),this.size=i.size,this}function Yl(t){var e=this.__data__=new aa(t);this.size=e.size}Yl.prototype.clear=zae;Yl.prototype.delete=Fae;Yl.prototype.get=Vae;Yl.prototype.has=Bae;Yl.prototype.set=Toe;var Zf=function(){try{var t=oE(Object,"defineProperty");return t({},"",{}),t}catch{}}();function cE(t,e,i){e=="__proto__"&&Zf?Zf(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function Rw(t,e,i){(i!==void 0&&!dy(t[e],i)||i===void 0&&!(e in t))&&cE(t,e,i)}function xoe(t){return function(e,i,r){for(var s=-1,n=Object(e),a=r(e),o=a.length;o--;){var c=a[t?o:++s];if(i(n[c],c,n)===!1)break}return e}}var Poe=xoe(),m3=typeof De=="object"&&De&&!De.nodeType&&De,SP=m3&&typeof Le=="object"&&Le&&!Le.nodeType&&Le,Coe=SP&&SP.exports===m3,EP=Coe?Wc.Buffer:void 0,kP=EP?EP.allocUnsafe:void 0;function Roe(t,e){if(e)return t.slice();var i=t.length,r=kP?kP(i):new t.constructor(i);return t.copy(r),r}var TP=Wc.Uint8Array;function Aoe(t){var e=new t.constructor(t.byteLength);return new TP(e).set(new TP(t)),e}function Ioe(t,e){var i=e?Aoe(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Ooe(t,e){var i=-1,r=t.length;for(e||(e=Array(r));++i<r;)e[i]=t[i];return e}var xP=Object.create,Moe=function(){function t(){}return function(e){if(!hn(e))return{};if(xP)return xP(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function Doe(t,e){return function(i){return t(e(i))}}var f3=Doe(Object.getPrototypeOf,Object),Loe=Object.prototype;function v3(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||Loe;return t===i}function Noe(t){return typeof t.constructor=="function"&&!v3(t)?Moe(f3(t)):{}}var Uoe="[object Arguments]";function PP(t){return Jl(t)&&jh(t)==Uoe}var y3=Object.prototype,joe=y3.hasOwnProperty,$oe=y3.propertyIsEnumerable,Aw=PP(function(){return arguments}())?PP:function(t){return Jl(t)&&joe.call(t,"callee")&&!$oe.call(t,"callee")},Iw=Array.isArray,zoe=9007199254740991;function b3(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=zoe}function dE(t){return t!=null&&b3(t.length)&&!aE(t)}function Foe(t){return Jl(t)&&dE(t)}function Voe(){return!1}var w3=typeof De=="object"&&De&&!De.nodeType&&De,CP=w3&&typeof Le=="object"&&Le&&!Le.nodeType&&Le,Boe=CP&&CP.exports===w3,RP=Boe?Wc.Buffer:void 0,Hoe=RP?RP.isBuffer:void 0,_3=Hoe||Voe,Goe="[object Object]",Woe=Function.prototype,qoe=Object.prototype,S3=Woe.toString,Joe=qoe.hasOwnProperty,Koe=S3.call(Object);function Yoe(t){if(!Jl(t)||jh(t)!=Goe)return!1;var e=f3(t);if(e===null)return!0;var i=Joe.call(e,"constructor")&&e.constructor;return typeof i=="function"&&i instanceof i&&S3.call(i)==Koe}var Qoe="[object Arguments]",Zoe="[object Array]",Xoe="[object Boolean]",ece="[object Date]",tce="[object Error]",ice="[object Function]",rce="[object Map]",sce="[object Number]",nce="[object Object]",ace="[object RegExp]",oce="[object Set]",cce="[object String]",dce="[object WeakMap]",lce="[object ArrayBuffer]",uce="[object DataView]",pce="[object Float32Array]",hce="[object Float64Array]",gce="[object Int8Array]",mce="[object Int16Array]",fce="[object Int32Array]",vce="[object Uint8Array]",yce="[object Uint8ClampedArray]",bce="[object Uint16Array]",wce="[object Uint32Array]",bt={};bt[pce]=bt[hce]=bt[gce]=bt[mce]=bt[fce]=bt[vce]=bt[yce]=bt[bce]=bt[wce]=!0;bt[Qoe]=bt[Zoe]=bt[lce]=bt[Xoe]=bt[uce]=bt[ece]=bt[tce]=bt[ice]=bt[rce]=bt[sce]=bt[nce]=bt[ace]=bt[oce]=bt[cce]=bt[dce]=!1;function _ce(t){return Jl(t)&&b3(t.length)&&!!bt[jh(t)]}function Sce(t){return function(e){return t(e)}}var E3=typeof De=="object"&&De&&!De.nodeType&&De,kp=E3&&typeof Le=="object"&&Le&&!Le.nodeType&&Le,Ece=kp&&kp.exports===E3,ub=Ece&&a3.process,AP=function(){try{var t=kp&&kp.require&&kp.require("util").types;return t||ub&&ub.binding&&ub.binding("util")}catch{}}(),IP=AP&&AP.isTypedArray,k3=IP?Sce(IP):_ce;function Ow(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var kce=Object.prototype,Tce=kce.hasOwnProperty;function xce(t,e,i){var r=t[e];(!(Tce.call(t,e)&&dy(r,i))||i===void 0&&!(e in t))&&cE(t,e,i)}function Pce(t,e,i,r){var s=!i;i||(i={});for(var n=-1,a=e.length;++n<a;){var o=e[n],c=r?r(i[o],t[o],o,i,t):void 0;c===void 0&&(c=t[o]),s?cE(i,o,c):xce(i,o,c)}return i}function Cce(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}var Rce=9007199254740991,Ace=/^(?:0|[1-9]\d*)$/;function T3(t,e){var i=typeof t;return e=e??Rce,!!e&&(i=="number"||i!="symbol"&&Ace.test(t))&&t>-1&&t%1==0&&t<e}var Ice=Object.prototype,Oce=Ice.hasOwnProperty;function Mce(t,e){var i=Iw(t),r=!i&&Aw(t),s=!i&&!r&&_3(t),n=!i&&!r&&!s&&k3(t),a=i||r||s||n,o=a?Cce(t.length,String):[],c=o.length;for(var d in t)(e||Oce.call(t,d))&&!(a&&(d=="length"||s&&(d=="offset"||d=="parent")||n&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||T3(d,c)))&&o.push(d);return o}function Dce(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}var Lce=Object.prototype,Nce=Lce.hasOwnProperty;function Uce(t){if(!hn(t))return Dce(t);var e=v3(t),i=[];for(var r in t)r=="constructor"&&(e||!Nce.call(t,r))||i.push(r);return i}function x3(t){return dE(t)?Mce(t,!0):Uce(t)}function jce(t){return Pce(t,x3(t))}function $ce(t,e,i,r,s,n,a){var o=Ow(t,i),c=Ow(e,i),d=a.get(c);if(d){Rw(t,i,d);return}var u=n?n(o,c,i+"",t,e,a):void 0,p=u===void 0;if(p){var g=Iw(c),m=!g&&_3(c),f=!g&&!m&&k3(c);u=c,g||m||f?Iw(o)?u=o:Foe(o)?u=Ooe(o):m?(p=!1,u=Roe(c,!0)):f?(p=!1,u=Ioe(c,!0)):u=[]:Yoe(c)||Aw(c)?(u=o,Aw(o)?u=jce(o):(!hn(o)||aE(o))&&(u=Noe(c))):p=!1}p&&(a.set(c,u),s(u,c,r,n,a),a.delete(c)),Rw(t,i,u)}function P3(t,e,i,r,s){t!==e&&Poe(e,function(n,a){if(s||(s=new Yl),hn(n))$ce(t,e,a,i,P3,r,s);else{var o=r?r(Ow(t,a),n,a+"",t,e,s):void 0;o===void 0&&(o=n),Rw(t,a,o)}},x3)}function C3(t){return t}function zce(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}var OP=Math.max;function Fce(t,e,i){return e=OP(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,n=OP(r.length-e,0),a=Array(n);++s<n;)a[s]=r[e+s];s=-1;for(var o=Array(e+1);++s<e;)o[s]=r[s];return o[e]=i(a),zce(t,this,o)}}function Vce(t){return function(){return t}}var Bce=Zf?function(t,e){return Zf(t,"toString",{configurable:!0,enumerable:!1,value:Vce(e),writable:!0})}:C3,Hce=800,Gce=16,Wce=Date.now;function qce(t){var e=0,i=0;return function(){var r=Wce(),s=Gce-(r-i);if(i=r,s>0){if(++e>=Hce)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Jce=qce(Bce);function Kce(t,e){return Jce(Fce(t,e,C3),t+"")}function Yce(t,e,i){if(!hn(i))return!1;var r=typeof e;return(r=="number"?dE(i)&&T3(e,i.length):r=="string"&&e in i)?dy(i[e],t):!1}function Qce(t){return Kce(function(e,i){var r=-1,s=i.length,n=s>1?i[s-1]:void 0,a=s>2?i[2]:void 0;for(n=t.length>3&&typeof n=="function"?(s--,n):void 0,a&&Yce(i[0],i[1],a)&&(n=s<3?void 0:n,s=1),e=Object(e);++r<s;){var o=i[r];o&&t(e,o,r,n)}return e})}var R3=Qce(function(t,e,i){P3(t,e,i)});const Zce=(t,e=Me)=>{let i=Object.assign({},e);return R3(i,t),i},A3=(t,e,i={},r={grid_pagination:!0,settings_toggle:!0})=>{var s,n,a,o,c,d,u,p,g,m,f,b,w,v,_,k;const P={showSetupScreen:!0};let D,M=["dyte-stage"],B={},G={};const ne=(r==null?void 0:r.settings_toggle)!==!1,ie=(r==null?void 0:r.grid_pagination)!==!1;if(!((s=t.controlBar)===null||s===void 0)&&s.isEnabled){M.push("dyte-controlbar");const{elements:Ke}=t.controlBar,lt=[...Ke.fullscreen?["dyte-fullscreen-toggle"]:[],...ne?["dyte-settings-toggle"]:[]],Jt=[],$t=[];e.troubleshoot!==void 0&&$t.push("dyte-debugger-toggle"),pt.isSupported()&&(!((a=(n=e.self)===null||n===void 0?void 0:n.config)===null||a===void 0)&&a.pipMode)&&((o=e.self.config)===null||o===void 0?void 0:o.viewType)!=="LIVESTREAM"&&$t.push("dyte-pip-toggle"),e!=null&&e.self.permissions.canDisableParticipantAudio&&$t.push("dyte-mute-all-button"),p3(e)&&$t.push("dyte-breakout-rooms-toggle"),!((c=e.self)===null||c===void 0)&&c.permissions.canRecord&&$t.push("dyte-recording-toggle"),c3(e)&&lt.push("dyte-livestream-toggle"),Ke.screenshare&&lt.push("dyte-screen-share-toggle"),Ke.chat&&Jt.push("dyte-chat-toggle"),Ke.polls&&Jt.push("dyte-polls-toggle"),Ke.participants&&Jt.push("dyte-participants-toggle"),Ke.plugins&&Jt.push("dyte-plugins-toggle"),Jt.push("dyte-ai-toggle");const os=["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-leave-button"];$t.length>0&&os.push("dyte-more-toggle");const F=lt.concat(Jt).concat($t);let H=!1;F.length>0&&(H=!0),G={"dyte-controlbar":{states:["activeMoreMenu"],children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"div#controlbar-left":lt,"div#controlbar-center":os,"div#controlbar-right":Jt,"dyte-more-toggle":{states:["activeMoreMenu"],children:[]},"dyte-more-toggle.activeMoreMenu":$t.map(Z=>[Z,{variant:"horizontal",slot:"more-elements"}]),"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-more-toggle.activeMoreMenu.md":F.map(Z=>[Z,{variant:"horizontal",slot:"more-elements"}]),"dyte-more-toggle.activeMoreMenu.sm":F.map(Z=>[Z,{variant:"horizontal",slot:"more-elements"}]),"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle",H&&"dyte-more-toggle","dyte-leave-button"]}}if(!((d=t.header)===null||d===void 0)&&d.isEnabled){M.unshift("dyte-header");const{elements:Ke}=t.header;let lt=["dyte-recording-indicator","dyte-livestream-indicator"],Jt=[],$t=[];ie&&$t.push("dyte-grid-pagination"),Ke.title&&Jt.push("dyte-meeting-title"),typeof Ke.logo=="string"&&Ke.logo.length>0&&(D=Ke.logo,lt.unshift("dyte-logo")),Ke.participantCount&&$t.push("dyte-participant-count","dyte-viewer-count"),Ke.timer&&$t.push("dyte-clock"),B={"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":lt,"div#header-center":Jt,"div#header-right":$t,"div#header-left.sm":{remove:["dyte-logo"],prepend:["dyte-meeting-title"]}}}M.push("dyte-participants-audio","dyte-dialog-manager");let oe={logo:D};t.isV2===!0?(oe=t.designTokens,Io((p=(u=t==null?void 0:t.designTokens)===null||u===void 0?void 0:u.colors)===null||p===void 0?void 0:p.textOnBrand)&&(oe.colors["text-on-brand"]=(m=(g=t==null?void 0:t.designTokens)===null||g===void 0?void 0:g.colors)===null||m===void 0?void 0:m.textOnBrand),Io((b=(f=t==null?void 0:t.designTokens)===null||f===void 0?void 0:f.colors)===null||b===void 0?void 0:b.videoBg)&&(oe.colors["video-bg"]=(v=(w=t==null?void 0:t.designTokens)===null||w===void 0?void 0:w.colors)===null||v===void 0?void 0:v.videoBg)):t.colors!=null&&(oe.colors={},Io(t.colors.primary)?oe.colors.brand=Pae(t.colors.primary):typeof t.colors.primary=="object"&&(oe.colors.brand=t.colors.primary),Io(t.colors.secondary)?oe.colors.background=Cae(t.colors.secondary):typeof t.colors.secondary=="object"&&(oe.colors.background=t.colors.secondary),Io(t.colors.text)&&(oe.colors.text=t.colors.text),Io(t.colors.textPrimary)&&(oe.colors["text-on-brand"]=t.colors.textPrimary),Io(t.colors.videoBackground)&&(oe.colors["video-bg"]=t.colors.videoBackground));let Re={designTokens:oe,styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",position:"relative",overflow:"visible",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center",zIndex:"10000"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"dyte-debugger":{width:"720px",height:"480px"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:Object.assign(Object.assign(Object.assign({"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":M,"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"]},B),G),{"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],children:["dyte-simple-grid"]},"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],children:["dyte-simple-grid"]},"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-media",...ne?["div#setupcontrols-settings"]:[]],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}],["dyte-debugger-toggle",{size:"sm"}]],"dyte-screenshare-view":["dyte-name-tag","dyte-network-indicator"],"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]]}),config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:3,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}};return Re=Zce(i,Re),P.showSetupScreen=(k=(_=t.setupScreen)===null||_===void 0?void 0:_.isEnabled)!==null&&k!==void 0?k:!0,{config:Re,data:P}},N={people:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 13.999 13 14a2 2 0 0 1 1.995 1.85L15 16v1.5C14.999 21 11.284 22 8.5 22c-2.722 0-6.335-.956-6.495-4.27L2 17.5v-1.501c0-1.054.816-1.918 1.85-1.995L4 14ZM15.22 14H20c1.054 0 1.918.816 1.994 1.85L22 16v1c-.001 3.062-2.858 4-5 4a7.16 7.16 0 0 1-2.14-.322c.336-.386.607-.827.802-1.327A6.19 6.19 0 0 0 17 19.5l.267-.006c.985-.043 3.086-.363 3.226-2.289L20.5 17v-1a.501.501 0 0 0-.41-.492L20 15.5h-4.051a2.957 2.957 0 0 0-.595-1.34L15.22 14H20h-4.78ZM4 15.499l-.1.01a.51.51 0 0 0-.254.136.506.506 0 0 0-.136.253l-.01.101V17.5c0 1.009.45 1.722 1.417 2.242.826.445 2.003.714 3.266.753l.317.005.317-.005c1.263-.039 2.439-.308 3.266-.753.906-.488 1.359-1.145 1.412-2.057l.005-.186V16a.501.501 0 0 0-.41-.492L13 15.5l-9-.001ZM8.5 3a4.5 4.5 0 1 1 0 9 4.5 4.5 0 0 1 0-9Zm9 2a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Zm-9-.5c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3Zm9 2c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2Z" fill="currentColor"/></svg>',people_checked:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 29"><path fill="currentColor" d="M14.58 15.333H2.833a2.667 2.667 0 0 0-2.666 2.666v2l.006.307c.214 4.419 5.031 5.693 8.66 5.693 1.374 0 2.92-.182 4.32-.649a8.53 8.53 0 0 1-.717-1.87c-.93.298-2.027.478-3.18.513l-.423.006-.422-.006c-1.684-.052-3.254-.411-4.355-1.004-1.29-.694-1.89-1.644-1.89-2.99v-2.001l.014-.135a.675.675 0 0 1 .181-.337.68.68 0 0 1 .338-.181l.134-.014h10.31a8.71 8.71 0 0 1 1.436-1.998h.001Zm.253-8.667a6 6 0 1 0-12 0 6 6 0 0 0 12 0Zm-10 0c0-2.205 1.795-4 4-4 2.206 0 4 1.795 4 4s-1.794 4-4 4c-2.205 0-4-1.795-4-4ZM25.5 7.999a4.667 4.667 0 1 0-9.333 0A4.667 4.667 0 0 0 25.5 8Zm-7.333 0a2.67 2.67 0 0 1 2.666-2.666A2.67 2.67 0 0 1 23.5 7.999a2.67 2.67 0 0 1-2.667 2.667 2.67 2.67 0 0 1-2.666-2.667Zm10 13.334a7.333 7.333 0 1 1-14.667 0 7.333 7.333 0 0 1 14.667 0Zm-2.862-3.139a.666.666 0 0 0-.944 0l-4.86 4.863-2.196-2.196a.667.667 0 1 0-.944.944l2.667 2.666a.666.666 0 0 0 .944 0l5.333-5.333a.666.666 0 0 0 0-.944Z"/></svg>',chat:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5ZM8.75 13h4.498a.75.75 0 0 1 .102 1.493l-.102.007H8.75a.75.75 0 0 1-.102-1.493L8.75 13h4.498H8.75Zm0-3.5h6.505a.75.75 0 0 1 .101 1.493l-.101.007H8.75a.75.75 0 0 1-.102-1.493L8.75 9.5h6.505H8.75Z" fill="currentColor"/></svg>',poll:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.752 2a2.752 2.752 0 0 1 2.752 2.751V19.25a2.752 2.752 0 1 1-5.504 0V4.75A2.752 2.752 0 0 1 11.752 2Zm7 5a2.752 2.752 0 0 1 2.752 2.751v9.499a2.752 2.752 0 1 1-5.504 0V9.75A2.752 2.752 0 0 1 18.752 7Zm-14 5a2.752 2.752 0 0 1 2.752 2.751v4.499a2.752 2.752 0 0 1-5.504 0V14.75A2.752 2.752 0 0 1 4.752 12Zm7-8.5c-.692 0-1.252.56-1.252 1.251V19.25a1.252 1.252 0 0 0 2.504 0V4.75c0-.691-.56-1.251-1.252-1.251Zm7 5c-.691 0-1.252.56-1.252 1.251v9.499a1.252 1.252 0 0 0 2.504 0V9.75c0-.691-.56-1.251-1.252-1.251Zm-14 5c-.692 0-1.252.56-1.252 1.251v4.499a1.252 1.252 0 1 0 2.504 0V14.75c0-.691-.56-1.252-1.252-1.252Z" fill="currentColor"/></svg>',participants:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.754 10c.966 0 1.75.784 1.75 1.75v4.749a4.501 4.501 0 0 1-9.002 0V11.75c0-.966.783-1.75 1.75-1.75h5.502Zm0 1.5H9.252a.25.25 0 0 0-.25.25v4.749a3.001 3.001 0 0 0 6.002 0V11.75a.25.25 0 0 0-.25-.25ZM3.75 10h3.381a2.738 2.738 0 0 0-.618 1.5H3.75a.25.25 0 0 0-.25.25v3.249a2.501 2.501 0 0 0 3.082 2.433c.085.504.24.985.453 1.432A4.001 4.001 0 0 1 2 14.999V11.75c0-.966.784-1.75 1.75-1.75Zm13.125 0h3.375c.966 0 1.75.784 1.75 1.75V15a4 4 0 0 1-5.03 3.866c.214-.448.369-.929.455-1.433A2.5 2.5 0 0 0 20.5 15v-3.25a.25.25 0 0 0-.25-.25h-2.757a2.738 2.738 0 0 0-.618-1.5ZM12 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm6.5 1a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm-13 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm6.5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Zm6.5 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm-13 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"/></svg>',rocket:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M9.35 20.45 14.65 22.7Q15.55 20.9 16.575 19.15Q17.6 17.4 18.75 15.8L14.8 15Q14.8 15 14.8 15Q14.8 15 14.8 15ZM17.05 24.5 23.7 31.15Q26.55 29.85 29.05 28.2Q31.55 26.55 33.1 25Q37.15 20.95 39.05 16.7Q40.95 12.45 41.1 7.1Q35.75 7.25 31.5 9.15Q27.25 11.05 23.2 15.1Q21.65 16.65 20 19.15Q18.35 21.65 17.05 24.5ZM28.5 19.7Q27.5 18.7 27.5 17.225Q27.5 15.75 28.5 14.75Q29.5 13.75 30.975 13.75Q32.45 13.75 33.45 14.75Q34.45 15.75 34.45 17.225Q34.45 18.7 33.45 19.7Q32.45 20.7 30.975 20.7Q29.5 20.7 28.5 19.7ZM27.75 38.85 33.2 33.4Q33.2 33.4 33.2 33.4Q33.2 33.4 33.2 33.4L32.4 29.45Q30.8 30.6 29.05 31.625Q27.3 32.65 25.5 33.55ZM44.05 4.15Q44.5 10.95 42.35 16.55Q40.2 22.15 35.25 27.1Q35.2 27.15 35.15 27.2Q35.1 27.25 35.05 27.3L36.15 32.8Q36.3 33.55 36.075 34.25Q35.85 34.95 35.3 35.5L26.75 44.1L22.5 34.2L14 25.7L4.1 21.45L12.7 12.9Q13.25 12.35 13.95 12.125Q14.65 11.9 15.4 12.05L20.9 13.15Q20.95 13.1 21 13.075Q21.05 13.05 21.1 13Q26.05 8.05 31.65 5.875Q37.25 3.7 44.05 4.15ZM7.45 31.75Q9.2 30 11.725 29.975Q14.25 29.95 16 31.7Q17.75 33.45 17.725 35.975Q17.7 38.5 15.95 40.25Q14.65 41.55 11.925 42.4Q9.2 43.25 3.75 44Q4.5 38.55 5.325 35.8Q6.15 33.05 7.45 31.75ZM9.55 33.9Q8.85 34.65 8.3 36.25Q7.75 37.85 7.35 40.35Q9.85 39.95 11.45 39.4Q13.05 38.85 13.8 38.15Q14.75 37.3 14.775 36.025Q14.8 34.75 13.9 33.8Q12.95 32.9 11.675 32.925Q10.4 32.95 9.55 33.9Z" fill="currentColor" /></svg>',call_end:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.903 13.202-.191.816a2.75 2.75 0 0 1-2.955 2.107l-1.755-.178A2.75 2.75 0 0 1 14.6 13.83l-.389-1.686a.25.25 0 0 0-.113-.157c-.321-.197-1.034-.32-2.098-.32-.786 0-1.386.067-1.786.189-.14.043-.238.085-.301.116l-.09.048-.015.04-.409 1.77A2.75 2.75 0 0 1 7 15.948l-1.746.177A2.75 2.75 0 0 1 2.3 14.03l-.196-.817a3.75 3.75 0 0 1 1.13-3.651C5.134 7.839 8.064 7 12 7c3.943 0 6.875.842 8.776 2.57a3.75 3.75 0 0 1 1.172 3.41l-.045.222Zm-1.426-.514a2.25 2.25 0 0 0-.71-2.009C18.184 9.241 15.602 8.5 12 8.5c-3.598 0-6.177.739-7.76 2.172a2.25 2.25 0 0 0-.677 2.19l.196.818a1.25 1.25 0 0 0 1.342.953l1.746-.178a1.25 1.25 0 0 0 1.09-.962l.423-1.82.043-.136c.376-.998 1.591-1.37 3.597-1.37 1.318 0 2.265.164 2.88.54.401.245.687.642.793 1.1l.389 1.685c.12.522.56.909 1.092.963l1.754.178a1.25 1.25 0 0 0 1.343-.958l.192-.816.034-.171Z" fill="currentColor"/></svg>',share:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 2.498a3.502 3.502 0 1 1-2.597 5.851l-4.558 2.604a3.5 3.5 0 0 1 0 2.093l4.557 2.606a3.502 3.502 0 1 1-.745 1.302L9.1 14.347a3.502 3.502 0 1 1 0-4.698l4.557-2.604A3.502 3.502 0 0 1 17 2.498Zm0 13.5a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm-10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Z" fill="currentColor"/></svg>',mic_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 11a.75.75 0 0 1 .743.648l.007.102v.5a6.75 6.75 0 0 1-6.249 6.732l-.001 2.268a.75.75 0 0 1-1.493.102l-.007-.102v-2.268a6.75 6.75 0 0 1-6.246-6.496L5 12.25v-.5a.75.75 0 0 1 1.493-.102l.007.102v.5a5.25 5.25 0 0 0 5.034 5.246l.216.004h.5a5.25 5.25 0 0 0 5.246-5.034l.004-.216v-.5a.75.75 0 0 1 .75-.75ZM12 2a4 4 0 0 1 4 4v6a4 4 0 0 1-8 0V6a4 4 0 0 1 4-4Zm0 1.5A2.5 2.5 0 0 0 9.5 6v6a2.5 2.5 0 0 0 5 0V6A2.5 2.5 0 0 0 12 3.5Z" fill="currentColor"/></svg>',mic_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L8 9.06V12a4 4 0 0 0 6.248 3.309l1.146 1.146A5.227 5.227 0 0 1 12.25 17.5h-.5l-.216-.004A5.25 5.25 0 0 1 6.5 12.25v-.5l-.007-.102A.75.75 0 0 0 5 11.75v.5l.004.236a6.75 6.75 0 0 0 6.246 6.496v2.268l.007.102a.75.75 0 0 0 1.493-.102l.001-2.268a6.718 6.718 0 0 0 3.712-1.458l4.256 4.256a.75.75 0 0 0 1.061-1.06L3.28 2.22Zm9.876 11.997A2.5 2.5 0 0 1 9.5 12v-1.44l3.656 3.657ZM14.5 6v5.318l1.43 1.43c.046-.242.07-.492.07-.748V6a4 4 0 0 0-7.862-1.044L9.5 6.318V6a2.5 2.5 0 0 1 5 0ZM17.196 14.014l1.146 1.146A6.725 6.725 0 0 0 19 12.25v-.5l-.007-.102a.75.75 0 0 0-1.493.102v.5l-.004.216a5.233 5.233 0 0 1-.3 1.548Z" fill="currentColor"/></svg>',video_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.75 4.5A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75a.75.75 0 0 1-1.136.643L17 16.075v.175a3.25 3.25 0 0 1-3.25 3.25h-8.5A3.25 3.25 0 0 1 2 16.25v-8.5A3.25 3.25 0 0 1 5.25 4.5h8.5Zm0 1.5h-8.5A1.75 1.75 0 0 0 3.5 7.75v8.5c0 .966.784 1.75 1.75 1.75h8.5a1.75 1.75 0 0 0 1.75-1.75v-8.5A1.75 1.75 0 0 0 13.75 6Zm6.75 1.573L17 9.674v4.651l3.5 2.1V7.573Z" fill="currentColor"/></svg>',video_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.567 1.567A3.25 3.25 0 0 0 2 7.75v8.5a3.25 3.25 0 0 0 3.25 3.25h8.5a3.25 3.25 0 0 0 2.903-1.786l4.066 4.067a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm12.196 14.317A1.75 1.75 0 0 1 13.75 18h-8.5a1.75 1.75 0 0 1-1.75-1.75v-8.5c0-.869.633-1.59 1.463-1.727l10.514 10.514ZM15.5 12.318V7.75A1.75 1.75 0 0 0 13.75 6H9.182l-1.5-1.5h6.068A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75c0 .301-.17.543-.403.665L20.5 17.318V7.573L17 9.674v4.144l-1.5-1.5Z" fill="currentColor"/></svg>',share_screen_start:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M12 7.245a.75.75 0 0 1 .53.22l3.255 3.255a.75.75 0 1 1-1.06 1.06L12.75 9.806v6.447a.75.75 0 0 1-1.5 0V9.808L9.28 11.78a.75.75 0 1 1-1.06-1.06l3.25-3.254a.75.75 0 0 1 .53-.22Z"/></svg>',share_screen_stop:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M8.22 8.215a.75.75 0 0 1 1.06 0l2.72 2.72 2.725-2.716a.75.75 0 0 1 1.06 1.062l-2.724 2.715 2.724 2.724a.75.75 0 1 1-1.06 1.06L12 13.057 9.28 15.78a.75.75 0 0 1-1.06-1.06l2.72-2.724-2.72-2.72a.75.75 0 0 1 0-1.06Z"/></svg>',share_screen_person:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 7.25A3.25 3.25 0 0 1 5.25 4h13.5A3.25 3.25 0 0 1 22 7.25V13h-.258a3.74 3.74 0 0 0-1.242-2.545V7.25a1.75 1.75 0 0 0-1.75-1.75H5.25A1.75 1.75 0 0 0 3.5 7.25v9.5c0 .966.784 1.75 1.75 1.75H12v.5c0 .34.04.674.118 1H5.25A3.25 3.25 0 0 1 2 16.75v-9.5ZM21.5 17a1.5 1.5 0 0 1 1.5 1.5v.5c0 1.971-1.86 4-5 4-3.14 0-5-2.029-5-4v-.5a1.5 1.5 0 0 1 1.5-1.5h7ZM18 10.5a2.75 2.75 0 1 1 0 5.5 2.75 2.75 0 0 1 0-5.5Z" fill="currentColor"/></svg>',clock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333 0 4.595 3.738 8.333 8.333 8.333 4.595 0 8.333-3.738 8.333-8.333 0-4.595-3.738-8.333-8.333-8.333ZM11.25 6a.75.75 0 0 1 .743.648L12 6.75V12h3.25a.75.75 0 0 1 .102 1.493l-.102.007h-4a.75.75 0 0 1-.743-.648l-.007-.102v-6a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',dismiss:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m4.397 4.554.073-.084a.75.75 0 0 1 .976-.073l.084.073L12 10.939l6.47-6.47a.75.75 0 1 1 1.06 1.061L13.061 12l6.47 6.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L12 13.061l-6.47 6.47a.75.75 0 0 1-1.06-1.061L10.939 12l-6.47-6.47a.75.75 0 0 1-.072-.976l.073-.084-.073.084Z" fill="currentColor"/></svg>',send:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.694 12 2.299 3.272c-.236-.607.356-1.188.942-.982l.093.04 18 9a.75.75 0 0 1 .097 1.283l-.097.058-18 9a.75.75 0 0 1-1.065-.847l.03-.096L5.694 12 2.299 3.272 5.694 12ZM4.402 4.54l2.61 6.71h6.627a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.649.743l-.101.007H7.01l-2.609 6.71L19.322 12 4.401 4.54Z" fill="currentColor"/></svg>',search:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2.75a7.25 7.25 0 0 1 5.63 11.819l4.9 4.9a.75.75 0 0 1-.976 1.134l-.084-.073-4.901-4.9A7.25 7.25 0 1 1 10 2.75Zm0 1.5a5.75 5.75 0 1 0 0 11.5 5.75 5.75 0 0 0 0-11.5Z" fill="currentColor"/</svg>',more_vertical:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM12 13.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM10.25 18a1.75 1.75 0 1 0 3.5 0 1.75 1.75 0 0 0-3.5 0Z" fill="currentColor"/></svg>',chevron_down:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 8.47a.75.75 0 0 1 1.06 0L12 15.19l6.72-6.72a.75.75 0 1 1 1.06 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L4.22 9.53a.75.75 0 0 1 0-1.06Z" fill="currentColor"/></svg>',chevron_up:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 15.53a.75.75 0 0 0 1.06 0L12 8.81l6.72 6.72a.75.75 0 1 0 1.06-1.06l-7.25-7.25a.75.75 0 0 0-1.06 0l-7.25 7.25a.75.75 0 0 0 0 1.06Z" fill="currentColor"/></svg>',chevron_left:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.53 4.22a.75.75 0 0 1 0 1.06L8.81 12l6.72 6.72a.75.75 0 1 1-1.06 1.06l-7.25-7.25a.75.75 0 0 1 0-1.06l7.25-7.25a.75.75 0 0 1 1.06 0Z" fill="currentColor"/></svg>',chevron_right:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.47 4.22a.75.75 0 0 0 0 1.06L15.19 12l-6.72 6.72a.75.75 0 1 0 1.06 1.06l7.25-7.25a.75.75 0 0 0 0-1.06L9.53 4.22a.75.75 0 0 0-1.06 0Z" fill="currentColor"/></svg>',settings:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="currentColor"/></svg>',wifi:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.745 10.75a8.291 8.291 0 0 1 1.492 2.07.75.75 0 1 1-1.335.683 6.798 6.798 0 0 0-1.218-1.692 6.562 6.562 0 0 0-10.493 1.673.75.75 0 1 1-1.339-.677 8.062 8.062 0 0 1 12.893-2.057Zm-2.102 3.07c.448.447.816.997 1.072 1.582a.75.75 0 1 1-1.373.602 3.72 3.72 0 0 0-.76-1.124 3.592 3.592 0 0 0-5.08 0c-.31.31-.562.689-.746 1.11a.75.75 0 1 1-1.375-.6 5.11 5.11 0 0 1 1.061-1.57 5.092 5.092 0 0 1 7.201 0Zm4.805-5.541c.51.509.99 1.09 1.409 1.697a.75.75 0 0 1-1.235.852 10.822 10.822 0 0 0-1.234-1.489c-4.08-4.08-10.695-4.08-14.776 0-.421.422-.84.934-1.222 1.484a.75.75 0 0 1-1.232-.855c.43-.62.905-1.2 1.394-1.69 4.666-4.665 12.23-4.665 16.896 0Zm-7.387 8.16a1.5 1.5 0 1 1-2.122 2.122 1.5 1.5 0 0 1 2.122-2.122Z" fill="currentColor"/></svg>',speaker:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15 4.25c0-1.079-1.274-1.65-2.08-.934L8.427 7.309a.75.75 0 0 1-.498.19H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V4.25ZM9.425 8.43 13.5 4.807v14.382l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.68a2.25 2.25 0 0 0 1.495-.569ZM18.992 5.897a.75.75 0 0 1 1.049.157A9.959 9.959 0 0 1 22 12a9.96 9.96 0 0 1-1.96 5.946.75.75 0 0 1-1.205-.892A8.459 8.459 0 0 0 20.5 12a8.459 8.459 0 0 0-1.665-5.054.75.75 0 0 1 .157-1.049Z" /><path d="M17.143 8.37a.75.75 0 0 1 1.017.302c.536.99.84 2.125.84 3.328a6.973 6.973 0 0 1-.84 3.328.75.75 0 0 1-1.32-.714c.42-.777.66-1.666.66-2.614s-.24-1.837-.66-2.614a.75.75 0 0 1 .303-1.017Z"/></svg>',speaker_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L6.438 7.5H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V16.06l5.72 5.72a.75.75 0 0 0 1.06-1.061L3.28 2.22ZM13.5 14.56v4.629l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.688L13.5 14.56ZM13.5 4.807v5.511l1.5 1.5V4.25c0-1.079-1.274-1.65-2.08-.934l-3.4 3.022 1.063 1.063L13.5 4.807ZM17.141 13.96l1.138 1.137A6.974 6.974 0 0 0 19 12a6.973 6.973 0 0 0-.84-3.328.75.75 0 0 0-1.32.714c.42.777.66 1.666.66 2.614 0 .691-.127 1.351-.359 1.96ZM19.388 16.206l1.093 1.094A9.955 9.955 0 0 0 22 12a9.959 9.959 0 0 0-1.96-5.946.75.75 0 0 0-1.205.892A8.46 8.46 0 0 1 20.5 12a8.458 8.458 0 0 1-1.112 4.206Z"/></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 20.5a.75.75 0 1 1 0 1.5l-13 .004a.75.75 0 1 1 0-1.5l13-.004ZM11.648 2.012l.102-.007a.75.75 0 0 1 .743.648l.007.102-.001 13.685 3.722-3.72a.75.75 0 0 1 .976-.073l.085.073a.75.75 0 0 1 .072.976l-.073.084-4.997 4.997a.75.75 0 0 1-.976.073l-.085-.073-5.003-4.996a.75.75 0 0 1 .976-1.134l.084.072 3.719 3.714L11 2.755a.75.75 0 0 1 .648-.743l.102-.007-.102.007Z" fill="currentColor"/></svg>',full_screen_maximize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.5 5.75c0-.69.56-1.25 1.25-1.25h2a.75.75 0 0 0 0-1.5h-2A2.75 2.75 0 0 0 3 5.75v2a.75.75 0 0 0 1.5 0v-2ZM4.5 18.25c0 .69.56 1.25 1.25 1.25h2a.75.75 0 0 1 0 1.5h-2A2.75 2.75 0 0 1 3 18.25v-2a.75.75 0 0 1 1.5 0v2ZM18.25 4.5c.69 0 1.25.56 1.25 1.25v2a.75.75 0 0 0 1.5 0v-2A2.75 2.75 0 0 0 18.25 3h-2a.75.75 0 0 0 0 1.5h2ZM19.5 18.25c0 .69-.56 1.25-1.25 1.25h-2a.75.75 0 0 0 0 1.5h2A2.75 2.75 0 0 0 21 18.25v-2a.75.75 0 0 0-1.5 0v2Z" fill="currentColor"/></svg>',full_screen_minimize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 3.75a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 0 0 1.5h2.5A2.25 2.25 0 0 0 8.5 6.25v-2.5ZM8.5 20.25a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 0-.75-.75h-2.5a.75.75 0 0 1 0-1.5h2.5a2.25 2.25 0 0 1 2.25 2.25v2.5ZM16.25 3a.75.75 0 0 0-.75.75v2.5a2.25 2.25 0 0 0 2.25 2.25h2.5a.75.75 0 0 0 0-1.5h-2.5a.75.75 0 0 1-.75-.75v-2.5a.75.75 0 0 0-.75-.75ZM15.5 20.25a.75.75 0 0 0 1.5 0v-2.5a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 0 0-1.5h-2.5a2.25 2.25 0 0 0-2.25 2.25v2.5Z" fill="currentColor"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.503 4.627 5.5 6.75v10.504a3.25 3.25 0 0 0 3.25 3.25h8.616a2.251 2.251 0 0 1-2.122 1.5H8.75A4.75 4.75 0 0 1 4 17.254V6.75c0-.98.627-1.815 1.503-2.123ZM17.75 2A2.25 2.25 0 0 1 20 4.25v13a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-13A2.25 2.25 0 0 1 8.75 2h9Zm0 1.5h-9a.75.75 0 0 0-.75.75v13c0 .414.336.75.75.75h9a.75.75 0 0 0 .75-.75v-13a.75.75 0 0 0-.75-.75Z" fill="currentColor"/></svg>',attach:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.772 3.743a6 6 0 0 1 8.66 8.302l-.19.197-8.8 8.798-.036.03a3.723 3.723 0 0 1-5.489-4.973.764.764 0 0 1 .085-.13l.054-.06.086-.088.142-.148.002.003 7.436-7.454a.75.75 0 0 1 .977-.074l.084.073a.75.75 0 0 1 .074.976l-.073.084-7.594 7.613a2.23 2.23 0 0 0 3.174 3.106l8.832-8.83A4.502 4.502 0 0 0 13 4.644l-.168.16-.013.014-9.536 9.536a.75.75 0 0 1-1.133-.977l.072-.084 9.549-9.55h.002Z" fill="currentColor"/></svg>',image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.75 3A3.25 3.25 0 0 1 21 6.25v11.5A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75V6.25A3.25 3.25 0 0 1 6.25 3h11.5Zm.58 16.401-5.805-5.686a.75.75 0 0 0-.966-.071l-.084.07-5.807 5.687c.182.064.378.099.582.099h11.5c.203 0 .399-.035.58-.099l-5.805-5.686L18.33 19.4ZM17.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v11.5c0 .208.036.408.103.594l5.823-5.701a2.25 2.25 0 0 1 3.02-.116l.128.116 5.822 5.702c.067-.186.104-.386.104-.595V6.25a1.75 1.75 0 0 0-1.75-1.75Zm-2.498 2a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',emoji_multiple:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 2a6.503 6.503 0 0 1 6.312 4.943c-.515.01-1.02.068-1.506.171a5 5 0 1 0-6.191 6.191 8.053 8.053 0 0 0-.172 1.507A6.5 6.5 0 0 1 8.5 2Zm.16 8.006c.355-.451.759-.864 1.202-1.23a3.5 3.5 0 0 0-4.022.95.75.75 0 1 0 1.14.974 2 2 0 0 1 1.68-.694ZM7.5 6.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm1 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm5.458 2.042a.75.75 0 0 1 .082 1.058 4 4 0 0 1-6.075.005.75.75 0 0 1 1.138-.977 2.499 2.499 0 0 0 3.797-.003.75.75 0 0 1 1.058-.083ZM17.5 14.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM15 22a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0-1.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11Z" fill="currentColor"/></svg>',image_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.263 1.264A3.235 3.235 0 0 0 3 6.25v11.5A3.25 3.25 0 0 0 6.25 21h11.5c.626 0 1.21-.177 1.706-.483l1.263 1.264a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm8.788 10.909 6.206 6.206.056.066a1.746 1.746 0 0 1-.58.099H6.25c-.204 0-.4-.035-.582-.099l5.807-5.686.593-.586Zm-.95-.95a2.245 2.245 0 0 0-.692.464l-5.823 5.7a1.747 1.747 0 0 1-.103-.593V6.25c0-.206.036-.404.101-.588l6.518 6.518ZM19.5 16.318V6.25a1.75 1.75 0 0 0-1.75-1.75H7.682L6.182 3H17.75A3.25 3.25 0 0 1 21 6.25v11.568l-1.5-1.5Z" fill="currentColor"/><path d="M15.252 6.5a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',disconnected:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l3.364 3.365a11.99 11.99 0 0 0-2.033 1.634c-.49.489-.964 1.069-1.394 1.689a.75.75 0 1 0 1.233.855c.381-.55.8-1.062 1.222-1.484a10.468 10.468 0 0 1 2.063-1.604l1.591 1.592a8.062 8.062 0 0 0-1.923 1.424c-.61.61-1.109 1.3-1.491 2.056a.75.75 0 1 0 1.338.677 6.51 6.51 0 0 1 1.214-1.673 6.546 6.546 0 0 1 1.984-1.362l1.93 1.93a5.07 5.07 0 0 0-2.876 1.44 5.11 5.11 0 0 0-1.061 1.57.75.75 0 0 0 1.374.602c.185-.422.437-.8.747-1.111a3.59 3.59 0 0 1 3.36-.958l7.858 7.858a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm8.304 6.182 1.584 1.584a6.532 6.532 0 0 1 3.516 1.825 6.798 6.798 0 0 1 1.217 1.692.75.75 0 1 0 1.336-.683 8.292 8.292 0 0 0-1.492-2.07 8.042 8.042 0 0 0-6.16-2.348ZM8.487 5.305 9.713 6.53a10.44 10.44 0 0 1 10.908 4.297.75.75 0 1 0 1.235-.852 11.946 11.946 0 0 0-13.369-4.67Zm4.573 11.134a1.5 1.5 0 1 1-2.121 2.122 1.5 1.5 0 0 1 2.121-2.122Z" fill="currentColor"/></svg>',wand:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.314 7.565-.136.126-10.48 10.488a2.27 2.27 0 0 0 3.211 3.208L16.388 10.9a2.251 2.251 0 0 0-.001-3.182l-.157-.146a2.25 2.25 0 0 0-2.916-.007Zm-.848 2.961 1.088 1.088-8.706 8.713a.77.77 0 1 1-1.089-1.088l8.707-8.713Zm4.386 4.48L16.75 15a.75.75 0 0 0-.743.648L16 15.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.694.648.743l.102.007H16v.75c0 .38.282.694.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V18h.75a.75.75 0 0 0 .743-.648L19 17.25a.75.75 0 0 0-.648-.743l-.102-.007h-.75v-.75a.75.75 0 0 0-.648-.743L16.75 15l.102.007Zm-1.553-6.254.027.027a.751.751 0 0 1 0 1.061l-.711.713-1.089-1.089.73-.73a.75.75 0 0 1 1.043.018ZM6.852 5.007 6.75 5a.75.75 0 0 0-.743.648L6 5.75v.75h-.75a.75.75 0 0 0-.743.648L4.5 7.25c0 .38.282.693.648.743L5.25 8H6v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648L7.5 8.75V8h.75a.75.75 0 0 0 .743-.648L9 7.25a.75.75 0 0 0-.648-.743L8.25 6.5H7.5v-.75a.75.75 0 0 0-.648-.743L6.75 5l.102.007Zm12-2L18.75 3a.75.75 0 0 0-.743.648L18 3.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.693.648.743L17.25 6H18v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V6h.75a.75.75 0 0 0 .743-.648L21 5.25a.75.75 0 0 0-.648-.743L20.25 4.5h-.75v-.75a.75.75 0 0 0-.648-.743L18.75 3l.102.007Z" fill="currentColor"/></svg>',recording:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"/><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2ZM3.5 12a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Z"/></svg>',subtract:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.755 12.5h16.492a.75.75 0 0 0 0-1.5H3.755a.75.75 0 0 0 0 1.5Z" fill="currentColor"/></svg>',stop_recording:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3.5C9.74566 3.5 7.58365 4.39553 5.98959 5.98959C4.39553 7.58365 3.5 9.74566 3.5 12C3.5 14.2543 4.39553 16.4163 5.98959 18.0104C7.58365 19.6045 9.74566 20.5 12 20.5C14.2543 20.5 16.4163 19.6045 18.0104 18.0104C19.6045 16.4163 20.5 14.2543 20.5 12C20.5 9.74566 19.6045 7.58365 18.0104 5.98959C16.4163 4.39553 14.2543 3.5 12 3.5ZM2 12C2 6.477 6.477 2 12 2C17.523 2 22 6.477 22 12C22 17.523 17.523 22 12 22C6.477 22 2 17.523 2 12ZM8 9.5C8 9.10218 8.15804 8.72064 8.43934 8.43934C8.72064 8.15804 9.10218 8 9.5 8H14.5C14.8978 8 15.2794 8.15804 15.5607 8.43934C15.842 8.72064 16 9.10218 16 9.5V14.5C16 14.8978 15.842 15.2794 15.5607 15.5607C15.2794 15.842 14.8978 16 14.5 16H9.5C9.10218 16 8.72064 15.842 8.43934 15.5607C8.15804 15.2794 8 14.8978 8 14.5V9.5Z" fill="currentColor"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.91 2.782a2.25 2.25 0 0 1 2.975.74l.083.138 7.759 14.009a2.25 2.25 0 0 1-1.814 3.334l-.154.006H4.243a2.25 2.25 0 0 1-2.041-3.197l.072-.143L10.031 3.66a2.25 2.25 0 0 1 .878-.878Zm9.505 15.613-7.76-14.008a.75.75 0 0 0-1.254-.088l-.057.088-7.757 14.008a.75.75 0 0 0 .561 1.108l.095.006h15.516a.75.75 0 0 0 .696-1.028l-.04-.086-7.76-14.008 7.76 14.008ZM12 16.002a.999.999 0 1 1 0 1.997.999.999 0 0 1 0-1.997ZM11.995 8.5a.75.75 0 0 1 .744.647l.007.102.004 4.502a.75.75 0 0 1-1.494.103l-.006-.102-.004-4.502a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',pin:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m16.242 2.932 4.826 4.826a2.75 2.75 0 0 1-.715 4.404l-4.87 2.435a.75.75 0 0 0-.374.426l-1.44 4.166a1.25 1.25 0 0 1-2.065.476L8.5 16.561 4.06 21H3v-1.06l4.44-4.44-3.105-3.104a1.25 1.25 0 0 1 .476-2.066l4.166-1.44a.75.75 0 0 0 .426-.373l2.435-4.87a2.75 2.75 0 0 1 4.405-.715Zm3.766 5.886-4.826-4.826a1.25 1.25 0 0 0-2.002.325l-2.435 4.871a2.25 2.25 0 0 1-1.278 1.12l-3.789 1.31 6.705 6.704 1.308-3.789a2.25 2.25 0 0 1 1.12-1.277l4.872-2.436a1.25 1.25 0 0 0 .325-2.002Z" fill="currentColor"/></svg>',pin_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l5.905 5.905L4.81 10.33a1.25 1.25 0 0 0-.476 2.065L7.439 15.5 3 19.94V21h1.06l4.44-4.44 3.105 3.105a1.25 1.25 0 0 0 2.065-.476l1.145-3.313 5.905 5.904a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm10.355 12.476-1.252 3.626-6.705-6.705 3.626-1.252 4.331 4.331Zm6.048-3.876-3.787 1.894 1.118 1.118 3.34-1.67a2.75 2.75 0 0 0 .714-4.404l-4.825-4.826a2.75 2.75 0 0 0-4.405.715l-1.67 3.34 1.118 1.117 1.894-3.787a1.25 1.25 0 0 1 2.002-.325l4.826 4.826a1.25 1.25 0 0 1-.325 2.002Z" fill="currentColor"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke-width="2" stroke="currentColor" stroke-opacity="0.2" vector-effect="non-scaling-stroke"/><path d="M22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7362 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke"/></svg>',breakout_rooms:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.5 3a2.25 2.25 0 0 1 2.25 2.25v6h6A2.25 2.25 0 0 1 21 13.5v5.25A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25A2.25 2.25 0 0 1 5.25 3h5.25Zm.75 9.75H4.5v6c0 .414.336.75.75.75h5.999l.001-6.75Zm7.5 0h-6.001v6.75h6.001a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75ZM10.5 4.5H5.25a.75.75 0 0 0-.75.75v6h6.75v-6a.75.75 0 0 0-.75-.75Zm7.398-2.493L18 2a.75.75 0 0 1 .743.648l.007.102v2.5h2.5a.75.75 0 0 1 .743.648L22 6a.75.75 0 0 1-.648.743l-.102.007h-2.5v2.5a.75.75 0 0 1-.648.743L18 10a.75.75 0 0 1-.743-.648l-.007-.102v-2.5h-2.5a.75.75 0 0 1-.743-.648L14 6a.75.75 0 0 1 .648-.743l.102-.007h2.5v-2.5a.75.75 0 0 1 .648-.743Z" fill="currentColor"/></svg>',add:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11.75 3a.75.75 0 0 1 .743.648l.007.102.001 7.25h7.253a.75.75 0 0 1 .102 1.493l-.102.007h-7.253l.002 7.25a.75.75 0 0 1-1.493.101l-.007-.102-.002-7.249H3.752a.75.75 0 0 1-.102-1.493L3.752 11h7.25L11 3.75a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',shuffle:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M14.0058 8.11111H18.7947L16.9613 9.94444C16.9095 9.99587 16.8684 10.057 16.8402 10.1243C16.812 10.1917 16.7974 10.2639 16.7971 10.3369C16.7966 10.4843 16.8547 10.6259 16.9586 10.7306C17.01 10.7823 17.0711 10.8235 17.1385 10.8517C17.2058 10.8799 17.278 10.8945 17.351 10.8947C17.4985 10.8953 17.64 10.8372 17.7447 10.7333L20.8891 7.59999L20.4947 7.20555L17.7447 4.46111C17.64 4.35723 17.4985 4.29917 17.351 4.29969C17.2036 4.30021 17.0624 4.35927 16.9586 4.46388C16.8547 4.5685 16.7966 4.71009 16.7971 4.85751C16.7977 5.00494 16.8567 5.14612 16.9613 5.24999L18.728 6.99999H13.6669C13.5699 7.00058 13.4748 7.02653 13.391 7.07526C13.3072 7.12399 13.2376 7.19381 13.1891 7.27777L11.7224 9.82777L12.3669 10.9389L14.0058 8.11111Z" fill="currentColor"/><path d="M8.15022 15.9278H3.66688C3.51954 15.9278 3.37823 15.9863 3.27405 16.0905C3.16986 16.1947 3.11133 16.336 3.11133 16.4833C3.11133 16.6307 3.16986 16.772 3.27405 16.8762C3.37823 16.9804 3.51954 17.0389 3.66688 17.0389H8.47244C8.56939 17.0383 8.6645 17.0124 8.74832 16.9636C8.83214 16.9149 8.90174 16.8451 8.95022 16.7611L10.4335 14.2222L9.77799 13.1111L8.15022 15.9278Z"/><path d="M17.7447 13.2056C17.64 13.1017 17.4985 13.0436 17.351 13.0441C17.2036 13.0447 17.0624 13.1037 16.9586 13.2083C16.8547 13.3129 16.7966 13.4545 16.7971 13.602C16.7977 13.7494 16.8567 13.8906 16.9613 13.9944L18.9058 15.9389H14.0058L8.95022 7.29444C8.90174 7.21047 8.83214 7.14066 8.74832 7.09193C8.6645 7.04319 8.56939 7.01725 8.47244 7.01666H3.66688C3.51954 7.01666 3.37823 7.07519 3.27405 7.17938C3.16986 7.28357 3.11133 7.42487 3.11133 7.57222C3.11133 7.71956 3.16986 7.86087 3.27405 7.96505C3.37823 8.06924 3.51954 8.12777 3.66688 8.12777H8.15022L13.2058 16.7667C13.2542 16.8506 13.3239 16.9204 13.4077 16.9692C13.4915 17.0179 13.5866 17.0439 13.6836 17.0444H18.6113L16.9447 18.7111C16.8929 18.7625 16.8517 18.8237 16.8235 18.891C16.7954 18.9584 16.7807 19.0306 16.7805 19.1036C16.7802 19.1766 16.7943 19.2489 16.822 19.3165C16.8497 19.384 16.8905 19.4454 16.9419 19.4972C16.9933 19.549 17.0545 19.5902 17.1218 19.6184C17.1891 19.6465 17.2614 19.6612 17.3344 19.6614C17.4074 19.6617 17.4797 19.6476 17.5472 19.6199C17.6148 19.5922 17.6762 19.5514 17.728 19.5L20.478 16.7556L20.8724 16.3611L17.7447 13.2056Z"/></svg>',edit:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.03 2.97a3.578 3.578 0 0 1 0 5.06L9.062 20a2.25 2.25 0 0 1-.999.58l-5.116 1.395a.75.75 0 0 1-.92-.921l1.395-5.116a2.25 2.25 0 0 1 .58-.999L15.97 2.97a3.578 3.578 0 0 1 5.06 0ZM15 6.06 5.062 16a.75.75 0 0 0-.193.333l-1.05 3.85 3.85-1.05A.75.75 0 0 0 8 18.938L17.94 9 15 6.06Zm2.03-2.03-.97.97L19 7.94l.97-.97a2.079 2.079 0 0 0-2.94-2.94Z" fill="currentColor"/></svg>',delete:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.75a3.25 3.25 0 0 1 3.245 3.066L15.25 5h5.25a.75.75 0 0 1 .102 1.493L20.5 6.5h-.796l-1.28 13.02a2.75 2.75 0 0 1-2.561 2.474l-.176.006H8.313a2.75 2.75 0 0 1-2.714-2.307l-.023-.174L4.295 6.5H3.5a.75.75 0 0 1-.743-.648L2.75 5.75a.75.75 0 0 1 .648-.743L3.5 5h5.25A3.25 3.25 0 0 1 12 1.75Zm6.197 4.75H5.802l1.267 12.872a1.25 1.25 0 0 0 1.117 1.122l.127.006h7.374c.6 0 1.109-.425 1.225-1.002l.02-.126L18.196 6.5ZM13.75 9.25a.75.75 0 0 1 .743.648L14.5 10v7a.75.75 0 0 1-1.493.102L13 17v-7a.75.75 0 0 1 .75-.75Zm-3.5 0a.75.75 0 0 1 .743.648L11 10v7a.75.75 0 0 1-1.493.102L9.5 17v-7a.75.75 0 0 1 .75-.75Zm1.75-6a1.75 1.75 0 0 0-1.744 1.606L10.25 5h3.5A1.75 1.75 0 0 0 12 3.25Z" fill="currentColor"/></svg>',back:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.75 2a.75.75 0 0 1 .743.648l.007.102v5.69l4.574-4.56a6.41 6.41 0 0 1 8.879-.179l.186.18a6.41 6.41 0 0 1 0 9.063l-8.846 8.84a.75.75 0 0 1-1.06-1.062l8.845-8.838a4.91 4.91 0 0 0-6.766-7.112l-.178.17L6.562 9.5h5.688a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.648.743L12.25 11h-7.5a.75.75 0 0 1-.743-.648L4 10.25v-7.5A.75.75 0 0 1 4.75 2Z" fill="currentColor"/></svg>',save:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.75A2.75 2.75 0 0 1 5.75 3h9.964a3.25 3.25 0 0 1 2.299.952l2.035 2.035c.61.61.952 1.437.952 2.299v9.964A2.75 2.75 0 0 1 18.25 21H5.75A2.75 2.75 0 0 1 3 18.25V5.75ZM5.75 4.5c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25H6v-5.25A2.25 2.25 0 0 1 8.25 12h7.5A2.25 2.25 0 0 1 18 14.25v5.25h.25c.69 0 1.25-.56 1.25-1.25V8.286c0-.465-.184-.91-.513-1.238l-2.035-2.035a1.75 1.75 0 0 0-.952-.49V7.25a2.25 2.25 0 0 1-2.25 2.25h-4.5A2.25 2.25 0 0 1 7 7.25V4.5H5.75Zm10.75 15v-5.25a.75.75 0 0 0-.75-.75h-7.5a.75.75 0 0 0-.75.75v5.25h9Zm-8-15v2.75c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75V4.5h-6Z" fill="currentColor"/></svg>',web:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.999c5.524 0 10.002 4.478 10.002 10.002 0 5.523-4.478 10.001-10.002 10.001-5.524 0-10.002-4.478-10.002-10.001C1.998 6.477 6.476 1.999 12 1.999ZM14.939 16.5H9.06c.652 2.414 1.786 4.002 2.939 4.002s2.287-1.588 2.939-4.002Zm-7.43 0H4.785a8.532 8.532 0 0 0 4.094 3.411c-.522-.82-.953-1.846-1.27-3.015l-.102-.395Zm11.705 0h-2.722c-.324 1.335-.792 2.5-1.373 3.411a8.528 8.528 0 0 0 3.91-3.127l.185-.283ZM7.094 10H3.735l-.005.017a8.525 8.525 0 0 0-.233 1.984c0 1.056.193 2.067.545 3h3.173a20.847 20.847 0 0 1-.123-5Zm8.303 0H8.603a18.966 18.966 0 0 0 .135 5h6.524a18.974 18.974 0 0 0 .135-5Zm4.868 0h-3.358c.062.647.095 1.317.095 2a20.3 20.3 0 0 1-.218 3h3.173a8.482 8.482 0 0 0 .544-3c0-.689-.082-1.36-.236-2ZM8.88 4.09l-.023.008A8.531 8.531 0 0 0 4.25 8.5h3.048c.314-1.752.86-3.278 1.583-4.41ZM12 3.499l-.116.005C10.62 3.62 9.396 5.622 8.83 8.5h6.342c-.566-2.87-1.783-4.869-3.045-4.995L12 3.5Zm3.12.59.107.175c.669 1.112 1.177 2.572 1.475 4.237h3.048a8.533 8.533 0 0 0-4.339-4.29l-.291-.121Z" fill="currentColor"/></svg>',checkmark:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m18 6.7-8.48 8.48-3.54-3.54a.996.996 0 1 0-1.41 1.41l4.24 4.24c.39.39 1.02.39 1.41 0l9.18-9.18a.999.999 0 0 0-.01-1.42c-.37-.38-1-.38-1.39.01z"/></svg>',spotlight:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19.745 4C20.3417 4 20.914 4.23705 21.336 4.65901C21.7579 5.08097 21.995 5.65326 21.995 6.25V12.805C21.5485 12.3774 21.0434 12.0154 20.495 11.73V6.25C20.495 6.05109 20.416 5.86032 20.2753 5.71967C20.1347 5.57902 19.9439 5.5 19.745 5.5H4.25C4.05109 5.5 3.86032 5.57902 3.71967 5.71967C3.57902 5.86032 3.5 6.05109 3.5 6.25V17.755C3.5 18.169 3.836 18.505 4.25 18.505L6.999 18.504L7 15.75C7.00002 15.3108 7.16517 14.8877 7.46268 14.5646C7.76019 14.2415 8.1683 14.0421 8.606 14.006L8.75 14H12.022C11.7223 14.4675 11.484 14.9716 11.313 15.5H8.75C8.69368 15.5001 8.63904 15.5192 8.59493 15.5542C8.55083 15.5893 8.51984 15.6382 8.507 15.693L8.5 15.75L8.499 18.504H11.077C11.1569 19.0193 11.2989 19.5229 11.5 20.004H4.25C3.65344 20.004 3.08129 19.7671 2.65936 19.3453C2.23744 18.9236 2.00027 18.3516 2 17.755V6.25C2 5.65326 2.23705 5.08097 2.65901 4.65901C3.08097 4.23705 3.65326 4 4.25 4H19.745Z"/><path d="M12 7C12.7956 7 13.5587 7.31607 14.1213 7.87868C14.6839 8.44129 15 9.20435 15 10C15 10.7956 14.6839 11.5587 14.1213 12.1213C13.5587 12.6839 12.7956 13 12 13C11.2044 13 10.4413 12.6839 9.87868 12.1213C9.31607 11.5587 9 10.7956 9 10C9 9.20435 9.31607 8.44129 9.87868 7.87868C10.4413 7.31607 11.2044 7 12 7ZM12 8.5C11.6022 8.5 11.2206 8.65804 10.9393 8.93934C10.658 9.22064 10.5 9.60218 10.5 10C10.5 10.3978 10.658 10.7794 10.9393 11.0607C11.2206 11.342 11.6022 11.5 12 11.5C12.3978 11.5 12.7794 11.342 13.0607 11.0607C13.342 10.7794 13.5 10.3978 13.5 10C13.5 9.60218 13.342 9.22064 13.0607 8.93934C12.7794 8.65804 12.3978 8.5 12 8.5Z"/><path d="M23 17.5C23 18.9587 22.4205 20.3576 21.3891 21.3891C20.3576 22.4205 18.9587 23 17.5 23C16.0413 23 14.6424 22.4205 13.6109 21.3891C12.5795 20.3576 12 18.9587 12 17.5C12 16.0413 12.5795 14.6424 13.6109 13.6109C14.6424 12.5795 16.0413 12 17.5 12C18.9587 12 20.3576 12.5795 21.3891 13.6109C22.4205 14.6424 23 16.0413 23 17.5ZM18.055 14.42C18.0207 14.2993 17.9479 14.193 17.8478 14.1174C17.7476 14.0417 17.6255 14.0008 17.5 14.0008C17.3745 14.0008 17.2524 14.0417 17.1522 14.1174C17.0521 14.193 16.9793 14.2993 16.945 14.42L16.388 16.208H14.585C14.019 16.208 13.785 16.962 14.242 17.308L15.7 18.413L15.143 20.2C14.968 20.761 15.584 21.228 16.042 20.881L17.5 19.777L18.958 20.881C19.416 21.228 20.032 20.761 19.857 20.201L19.3 18.413L20.758 17.309C21.216 16.962 20.981 16.208 20.415 16.208H18.612L18.055 14.421V14.42Z"/></svg>',join_stage:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M17.5 22C14.4618 22 12 19.5376 12 16.5C12 13.4623 14.4618 11 17.5 11C20.5371 11 23 13.4624 23 16.5C23 19.5376 20.5371 22 17.5 22ZM17.0704 18.992L17.1167 19.0322C17.1868 19.0841 17.2716 19.1125 17.3588 19.1132C17.4461 19.1139 17.5314 19.0869 17.6023 19.036L17.654 18.992L17.6936 18.9458C17.7455 18.8757 17.7739 18.7909 17.7746 18.7037C17.7753 18.6164 17.7483 18.5311 17.6975 18.4602L17.6535 18.4085L16.158 16.9125H19.8375L19.8936 16.9092C19.9829 16.8969 20.0657 16.8558 20.1293 16.792C20.193 16.7282 20.234 16.6454 20.2462 16.5561L20.25 16.5005L20.2462 16.4444C20.2339 16.3553 20.1928 16.2725 20.1292 16.2089C20.0655 16.1452 19.9828 16.1041 19.8936 16.0919L19.8375 16.088H16.158L17.654 14.592L17.6941 14.5453C17.7537 14.4659 17.7827 14.3676 17.7756 14.2686C17.7686 14.1695 17.726 14.0763 17.6558 14.0061C17.5856 13.9359 17.4924 13.8934 17.3934 13.8863C17.2943 13.8793 17.1961 13.9082 17.1167 13.9678L17.071 14.0079L14.8699 16.2079L14.8303 16.2547C14.7784 16.3247 14.75 16.4094 14.7493 16.4965C14.7485 16.5837 14.7753 16.6688 14.8259 16.7398L14.8699 16.7915L17.0704 18.992Z"/><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"></svg>',leave_stage:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"/><path d="M17.5 11C20.5382 11 23 13.4624 23 16.5C23 19.5377 20.5382 22 17.5 22C14.4629 22 12 19.5377 12 16.5C12 13.4624 14.4629 11 17.5 11V11ZM17.9296 14.0079L17.8833 13.9678C17.8132 13.9159 17.7284 13.8875 17.6412 13.8868C17.5539 13.8861 17.4686 13.9131 17.3977 13.964L17.346 14.0079L17.3064 14.0542C17.2545 14.1243 17.2261 14.2091 17.2254 14.2963C17.2247 14.3836 17.2517 14.4689 17.3026 14.5398L17.3465 14.5915L18.842 16.0875H15.1625L15.1064 16.0908C15.0171 16.1031 14.9343 16.1442 14.8707 16.208C14.807 16.2718 14.766 16.3546 14.7539 16.4439L14.75 16.4995L14.7539 16.5556C14.7661 16.6447 14.8072 16.7275 14.8708 16.7911C14.9345 16.8548 15.0172 16.8959 15.1064 16.9081L15.1625 16.912H18.842L17.346 18.408L17.3059 18.4547C17.2463 18.5341 17.2173 18.6324 17.2244 18.7314C17.2314 18.8305 17.274 18.9237 17.3442 18.9939C17.4144 19.0641 17.5076 19.1066 17.6066 19.1137C17.7057 19.1207 17.8039 19.0918 17.8833 19.0322L17.929 18.9921L20.1301 16.7921L20.1697 16.7453C20.2216 16.6753 20.25 16.5906 20.2507 16.5035C20.2515 16.4163 20.2247 16.3312 20.1741 16.2602L20.1301 16.2085L17.9301 14.0079L17.8833 13.9678L17.9296 14.0079V14.0079Z"/></svg>',pip_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.8666 12.3058C11.0731 12.3058 11.2404 12.1385 11.2404 11.932V8.56753C11.2404 8.36107 11.0731 8.1937 10.8666 8.1937C10.6601 8.1937 10.4928 8.36107 10.4928 8.56753V11.0295L6.45393 6.99066C6.30794 6.84467 6.07124 6.84467 5.92525 6.99066C5.77926 7.13665 5.77926 7.37335 5.92525 7.51934L9.9641 11.5582L7.50212 11.5582C7.29566 11.5582 7.12829 11.7256 7.12829 11.932C7.12829 12.1385 7.29566 12.3058 7.50212 12.3058L10.8666 12.3058ZM5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/></svg>',pip_on:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/><path d="M6.18951 6.88123C5.98304 6.88123 5.81567 7.0486 5.81567 7.25506V10.6195C5.81567 10.826 5.98304 10.9934 6.18951 10.9934C6.39597 10.9934 6.56334 10.826 6.56334 10.6195V8.15757L10.6022 12.1964C10.7482 12.3424 10.9849 12.3424 11.1309 12.1964C11.2769 12.0504 11.2769 11.8137 11.1309 11.6677L7.09202 7.62889L9.55399 7.62889C9.76045 7.62889 9.92782 7.46152 9.92782 7.25506C9.92782 7.0486 9.76045 6.88123 9.55399 6.88123L6.18951 6.88123Z"/></svg>',signal_1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3z"></path></svg>',signal_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7z"></path></svg>',signal_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2z"></path></svg>',signal_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2z"></path></svg>',signal_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2zm4-3h2v17h-2z"></path></svg>',start_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M6.343 4.938a1 1 0 0 1 0 1.415a8.003 8.003 0 0 0 0 11.317a1 1 0 1 1-1.415 1.414c-3.906-3.906-3.906-10.24 0-14.146a1 1 0 0 1 1.415 0Zm12.731 0c3.906 3.907 3.906 10.24 0 14.146a1 1 0 0 1-1.414-1.414a8.003 8.003 0 0 0 0-11.317a1 1 0 0 1 1.414-1.415ZM9.31 7.812a1 1 0 0 1 0 1.414a3.92 3.92 0 0 0 0 5.544a1 1 0 1 1-1.414 1.414a5.92 5.92 0 0 1 0-8.372a1 1 0 0 1 1.414 0Zm6.959 0a5.92 5.92 0 0 1 0 8.372a1 1 0 0 1-1.415-1.414a3.92 3.92 0 0 0 0-5.544a1 1 0 0 1 1.415-1.414Zm-4.187 2.77a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3Z"/></svg>',stop_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M2.854 2.146a.5.5 0 1 0-.708.708l1.811 1.81A8.218 8.218 0 0 0 2 10a8.228 8.228 0 0 0 2.604 6.015a.725.725 0 0 0 1.01-.025c.316-.316.277-.819-.027-1.11A6.73 6.73 0 0 1 3.5 10c0-1.62.57-3.107 1.522-4.27l.712.71A5.726 5.726 0 0 0 4.5 10c0 1.691.73 3.213 1.893 4.264a.713.713 0 0 0 .983-.037c.328-.328.267-.844-.041-1.134A4.238 4.238 0 0 1 6 10c0-.93.298-1.789.804-2.489l1.842 1.842a1.5 1.5 0 0 0 2 2l6.5 6.5a.5.5 0 0 0 .708-.707l-1.811-1.81l-1.065-1.066l-.712-.71l-1.07-1.072l-1.842-1.841l-2-2L7.4 6.693l-.942-.942l-.82-.82l-.944-.944l-1.841-1.842Zm13.794 12.38A8.212 8.212 0 0 0 18 10c0-2.283-.928-4.35-2.426-5.843a.726.726 0 0 0-1.027.01c-.31.31-.28.8.01 1.095A6.727 6.727 0 0 1 16.5 10a6.718 6.718 0 0 1-.94 3.438l1.088 1.089Zm-1.822-1.822A5.73 5.73 0 0 0 15.5 10a5.733 5.733 0 0 0-1.706-4.087a.714.714 0 0 0-1.008.016c-.319.318-.272.816.014 1.111A4.235 4.235 0 0 1 14 10c0 .557-.107 1.09-.302 1.577l1.128 1.127Z"/></svg>',viewers:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 9.005a4 4 0 1 1 0 8 4 4 0 0 1 0-8Zm0 1.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5ZM12 5.5c4.613 0 8.596 3.15 9.701 7.564a.75.75 0 1 1-1.455.365 8.503 8.503 0 0 0-16.493.004.75.75 0 0 1-1.455-.363A10.003 10.003 0 0 1 12 5.5Z" fill="currentColor"/></svg>',debug:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m10.05 15.42 6.256-8.476a.694.694 0 0 1 1.235.57l-.03.098-3.87 9.8a2.07 2.07 0 1 1-3.737-1.766l.069-.115.076-.11 6.257-8.477-6.257 8.476Zm2.05-4.549-1.226 1.66a3.32 3.32 0 0 0-2.29 3.024.75.75 0 0 1-1.5-.063A4.819 4.819 0 0 1 9.14 11.74c.9-.631 1.942-.911 2.961-.87Zm4.167 2.752c.28.586.436 1.22.463 1.866a.75.75 0 0 1-1.376.444l.913-2.31Zm-2.233-5.37-.969 1.311a6.22 6.22 0 0 0-4.736 1.02 6.208 6.208 0 0 0-2.419 3.39.75.75 0 0 1-1.442-.412 7.708 7.708 0 0 1 3-4.207 7.724 7.724 0 0 1 6.566-1.102Zm3.51 2.138c.25.267.486.556.702.865a7.727 7.727 0 0 1 1.097 2.288.75.75 0 0 1-1.44.417 6.23 6.23 0 0 0-.885-1.845l-.102-.138.627-1.587ZM15.98 5.852l-.088.054c-.123.082-.236.18-.337.295l-.096.12-.54.732a9.138 9.138 0 0 0-8.261 1.146A9.103 9.103 0 0 0 3.38 12.37a.75.75 0 1 1-1.398-.543A10.603 10.603 0 0 1 5.799 6.97 10.642 10.642 0 0 1 15.98 5.852Zm2.629 1.562a10.646 10.646 0 0 1 2.022 2.171c.49.702.892 1.451 1.199 2.235a.75.75 0 1 1-1.397.547 9.188 9.188 0 0 0-2.327-3.405l.381-.964c.076-.19.115-.388.122-.584Z" fill="currentColor"/></svg>',info:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.999c5.524 0 10.002 4.478 10.002 10.002 0 5.523-4.478 10.001-10.002 10.001-5.524 0-10.002-4.478-10.002-10.001C1.998 6.477 6.476 1.999 12 1.999Zm0 1.5a8.502 8.502 0 1 0 0 17.003A8.502 8.502 0 0 0 12 3.5Zm-.004 7a.75.75 0 0 1 .744.648l.007.102.003 5.502a.75.75 0 0 1-1.493.102l-.007-.101-.003-5.502a.75.75 0 0 1 .75-.75ZM12 7.003a.999.999 0 1 1 0 1.997.999.999 0 0 1 0-1.997Z" fill="currentColor"/></svg>',devices:'<svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm5.5-8.5V9a5.5 5.5 0 1 0-11 0v1H9a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H6.5v.25a2.25 2.25 0 0 0 2.096 2.245l.154.005h1.128a2.251 2.251 0 1 1 0 1.5H8.75a3.75 3.75 0 0 1-3.745-3.55L5 16.25V9a7 7 0 0 1 14 0v5a2 2 0 0 1-1.85 1.995L17 16h-2a1 1 0 0 1-.993-.883L14 15v-4a1 1 0 0 1 .883-.993L15 10h2.5Zm-9 1.5h-2v3h2v-3Zm9 0h-2v3H17a.5.5 0 0 0 .492-.41L17.5 14v-2.5Z" fill="currentColor"/></svg>',horizontal_dots:'<svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM18 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill="currentColor"/></svg>',ai_sparkle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49 48" fill="none"><path fill="#F13E1B" d="m30.023 15.96.07.016a1.362 1.362 0 0 1 .657 2.068c-.163.23-.392.403-.658.497l-3.444 1.118a7.095 7.095 0 0 0-4.495 4.492l-1.12 3.442a1.357 1.357 0 0 1-1.267.907h-.016a1.361 1.361 0 0 1-1.283-.907l-1.12-3.442a7.091 7.091 0 0 0-4.495-4.509l-3.444-1.119a1.36 1.36 0 0 1 0-2.564l3.444-1.118a7.097 7.097 0 0 0 4.427-4.492l1.119-3.442a1.36 1.36 0 0 1 2.566 0l1.12 3.442a7.09 7.09 0 0 0 4.495 4.492l3.444 1.118Zm9.195 16.007-2.755-.894a5.678 5.678 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/><path fill="#2160FD" d="m39.218 31.967-2.755-.894a5.677 5.677 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/></svg>',meeting_ai:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" fill="none"><path fill="#F13E1B" d="M9.111 12.888a4.98 4.98 0 0 0-1.075-.8l-.04.048a4.651 4.651 0 0 0-.903-.424l-2.446-.8a.963.963 0 0 1-.467-.356.953.953 0 0 1 0-1.116.955.955 0 0 1 .467-.352l2.446-.8A5.088 5.088 0 0 0 9.04 7.06a5.048 5.048 0 0 0 1.2-1.904l.02-.064.799-2.444A.97.97 0 0 1 11.969 2a.97.97 0 0 1 .91.648l.8 2.444a5.147 5.147 0 0 0 1.219 1.976 5.042 5.042 0 0 0 1.974 1.2l2.45.8h.048c.188.067.351.19.468.352.115.164.176.36.175.56.001.2-.06.396-.175.56a1 1 0 0 1-.468.352l-2.446.8a5.067 5.067 0 0 0-1.978 1.2 5.096 5.096 0 0 0-1.199 1.976l-.8 2.448-.023.06a1.02 1.02 0 0 1-.184.284.967.967 0 0 1-.703.3 1 1 0 0 1-.927-.644l-.8-2.448a5.11 5.11 0 0 0-.799-1.508 5.16 5.16 0 0 0-.4-.472Zm10.434 5.396a.492.492 0 0 1 .176-.236.473.473 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.278.276.616.484.987.608l1.223.4h.028l.084.04a.536.536 0 0 1 .148.136c.056.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.176.232.464.464 0 0 1-.28.088.475.475 0 0 1-.455-.32l-.4-1.224a2.507 2.507 0 0 0-.611-.992 2.487 2.487 0 0 0-.987-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612.137-.142.257-.3.36-.468.1-.162.18-.335.24-.516l.399-1.224Z"/><path fill="currentColor" d="M19.545 18.284a.492.492 0 0 1 .176-.236.469.469 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.279.276.616.484.988.608l1.222.4h.028l.084.04a.534.534 0 0 1 .148.136c.057.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.175.232.464.464 0 0 1-.28.088.475.475 0 0 1-.456-.32l-.4-1.224a2.509 2.509 0 0 0-.61-.992 2.487 2.487 0 0 0-.988-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612a2.7 2.7 0 0 0 .36-.468c.1-.162.18-.335.24-.516l.4-1.224Z"/></svg>',create_channel:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path fill="currentColor" d="M2 14.75A3.25 3.25 0 0 0 5.25 18H6v2.75a1.25 1.25 0 0 0 1.999 1l2.125-1.59.396-1.583c.071-.286.177-.56.312-.82L7.5 20.252 7.499 16.5H5.25a1.75 1.75 0 0 1-1.75-1.75v-8.5c0-.966.784-1.75 1.75-1.75h13.5c.966 0 1.75.784 1.75 1.75v3.845a3.27 3.27 0 0 1 1.5.83V6.25A3.25 3.25 0 0 0 18.75 3H5.25A3.25 3.25 0 0 0 2 6.25v8.5Z"/><path fill="currentColor" d="m18.098 11.67-5.902 5.902a2.684 2.684 0 0 0-.707 1.247l-.458 1.831a1.087 1.087 0 0 0 1.319 1.318l1.83-.457a2.685 2.685 0 0 0 1.248-.707l5.902-5.902a2.285 2.285 0 1 0-3.232-3.232Z"/></svg>',create_channel_illustration:'<svg width="503" height="362" viewBox="0 0 503 362" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M93.3477 192.893C93.3477 190.684 95.1385 188.893 97.3477 188.893H476C478.209 188.893 480 190.684 480 192.893V311.824C480 314.033 478.209 315.824 476 315.824H469.354C467.145 315.824 465.354 317.615 465.354 319.824V339.364C465.354 342.928 461.045 344.712 458.525 342.193L433.328 316.996C432.578 316.245 431.561 315.824 430.5 315.824H97.3477C95.1385 315.824 93.3477 314.033 93.3477 311.824V192.893Z" fill="#282828"/> <path d="M306.606 230.9H136.121C134.648 230.9 133.453 232.095 133.453 233.568C133.453 235.041 134.648 236.236 136.121 236.236H306.606C308.079 236.236 309.274 235.041 309.274 233.568C309.274 232.095 308.079 230.9 306.606 230.9Z" fill="#2160FD"/> <path d="M437.226 249.358H136.121C134.648 249.358 133.453 250.553 133.453 252.026C133.453 253.499 134.648 254.694 136.121 254.694H437.226C438.7 254.694 439.894 253.499 439.894 252.026C439.894 250.553 438.7 249.358 437.226 249.358Z" fill="#5C5C5C"/> <path d="M436.926 267.816H136.121C134.648 267.816 133.453 269.011 133.453 270.484C133.453 271.957 134.648 273.152 136.121 273.152H436.926C438.4 273.152 439.594 271.957 439.594 270.484C439.594 269.011 438.399 267.816 436.926 267.816Z" fill="#5C5C5C"/> <path d="M411.652 23C411.652 20.7909 409.861 19 407.652 19H29C26.7909 19 25 20.7909 25 23V141.931C25 144.14 26.7909 145.931 29 145.931H35.646C37.8551 145.931 39.646 147.722 39.646 149.931V169.472C39.646 173.036 43.9546 174.82 46.4745 172.3L71.6714 147.103C72.4216 146.352 73.439 145.931 74.4999 145.931H407.652C409.861 145.931 411.652 144.14 411.652 141.931V23Z" fill="#282828"/> <path d="M241.188 61.9839H70.703C69.2296 61.9839 68.0352 63.1783 68.0352 64.6517C68.0352 66.1252 69.2296 67.3196 70.703 67.3196H241.188C242.662 67.3196 243.856 66.1252 243.856 64.6517C243.856 63.1783 242.662 61.9839 241.188 61.9839Z" fill="#2160FD"/> <path d="M371.808 80.4419H70.703C69.2296 80.4419 68.0352 81.6363 68.0352 83.1098C68.0352 84.5832 69.2296 85.7776 70.703 85.7776H371.808C373.282 85.7776 374.476 84.5832 374.476 83.1098C374.476 81.6363 373.282 80.4419 371.808 80.4419Z" fill="#5C5C5C"/> <path d="M371.508 98.8999H70.703C69.2296 98.8999 68.0352 100.094 68.0352 101.568C68.0352 103.041 69.2296 104.236 70.703 104.236H371.508C372.982 104.236 374.176 103.041 374.176 101.568C374.176 100.094 372.982 98.8999 371.508 98.8999Z" fill="#5C5C5C"/> </svg>'},I3=async t=>{if(t==null)return N;try{const e=await fetch(t);return e.ok?Object.assign({},N,await e.json()):N}catch{return N}},Xce=640,ede=768,tde=1080,ide=2160,MP={sm:Xce,md:ede,lg:tde,xl:ide},O3=t=>t>=MP.lg?"lg":t>=MP.md?"md":"sm",DP={about_call:"About Call",screen:"Screen",leave:"Leave",dismiss:"Dismiss",logo:"Logo",page:"Page",more:"More","page.prev":"Previous Page","page.next":"Next Page",layout:"Layout","layout.auto":"Auto Layout",settings:"Settings",file:"File",image:"Image",connection:"Connection",leave_confirmation:"Are you sure you want to leave the call?",cancel:"Cancel",yes:"Yes",you:"You",to:"To",mute:"Mute",kick:"Kick",pin:"Pin",pinned:"Pinned",unpin:"Unpin",pip_on:"Show PiP",pip_off:"Hide PiP",viewers:"Viewers",join:"Join",joined:"Joined",create:"Create",close:"Close",ask:"Ask",type:"Type",activate:"Activate",mic_off:"Mic Off",disable_mic:"Disable Mic",mic_on:"Mic On",enable_mic:"Enable Mic",audio:"Audio",mute_all:"Mute all","mute_all.description":"Everyone in the meeting will be muted.","mute_all.header":"Are you sure?","mute_all.allow_unmute":"Allow others to unmute",video_off:"Video Off",disable_video:"Disable Video",video_on:"Video On",enable_video:"Enable Video",video:"Video",participants:"Participants","participants.errors.empty_results":"Couldn't find a participant with the specified name or ID.","participants.empty_list":"It looks like nobody is here.","participants.turn_off_video":"Turn off video",polls:"Polls","polls.by":"Poll by","polls.question":"Poll Question","polls.question.placeholder":"What is your poll for?","polls.option":"Add an option.","polls.option.placeholder":"Enter an option","polls.results.anon":"Anonymous","polls.results.hide":"Hide results before voting","polls.create":"Create Poll","polls.cancel":"Cancel Poll Creation","polls.errors.question_required":"Question is required.","polls.errors.empty_option":"Empty options not allowed.",screenshare:"Screen Share","screenshare.min_preview":"Minimize Preview","screenshare.max_preview":"Expand Preview","screenshare.shared":"Your screen is being shared.","screenshare.start":"Share Screen","screenshare.stop":"Stop Sharing","screenshare.error.unknown":"An error occured while starting screenshare.","screenshare.error.max_count":"Maximum screen share limit reached.",plugins:"Plugins",perm_denied:"Permission denied by browser.","perm_denied.audio":"Mic Permission denied by browser","perm_denied.video":"Camera Permission denied by browser","perm_denied.screenshare":"Screenshare Permission denied by browser","perm_denied.audio.chrome.message":"Under Chrome settings, navigate to 'Privacy and Security > Site Settings > Permissions'. Select 'Microphone', provide permission and reload this application.","perm_denied.video.chrome.message":"Under Chrome settings, navigate to 'Privacy and Security > Site Settings > Permissions'. Select 'Camera', provide permission and reload this application.","perm_denied.screenshare.chrome.message":"Under Chrome settings, navigate to 'Privacy and Security > Site Settings > Permissions'. Select 'Screenshare', provide permission and reload this application.","perm_denied.audio.safari.message":"Under Safari settings, navigate to 'Websites > Microphone', provide permission and reload this application.","perm_denied.video.safari.message":"Under Safari settings, navigate to 'Websites > Camera', provide permission and reload this application.","perm_denied.screenshare.safari.message":"Under Safari settings, navigate to 'Websites > Screenshare', provide permission and reload this application.","perm_denied.audio.edge.message":"Under Edge settings, navigate to 'Site Permissions > Microphone', provide permission and reload this application.","perm_denied.video.edge.message":"Under Edge settings, navigate to 'Site Permissions > Camera', provide permission and reload this application.","perm_denied.screenshare.edge.message":"Under Edge settings, navigate to 'Site Permissions > Screenshare', provide permission and reload this application.","perm_denied.audio.firefox.message":"Under Firefox settings, navigate to 'Privacy and Security > Permissions > Microphone', provide permission and reload this application.","perm_denied.video.firefox.message":"Under Firefox settings, navigate to 'Privacy and Security > Permissions > Camera', provide permission and reload this application.","perm_denied.screenshare.firefox.message":"Under Firefox settings, navigate to 'Privacy and Security > Permissions > Screenshare', provide permission and reload this application.","perm_denied.audio.others.message":"From your browser settings, enable 'Microphone' permissions and reload this application.","perm_denied.video.others.message":"From your browser settings, enable 'Camera' permissions and reload this application.","perm_denied.screenshare.others.message":"From your browser settings, enable 'Screenshare' permissions and reload this application.",perm_sys_denied:"Permission denied by system","perm_sys_denied.audio":"Mic permission denied by system","perm_sys_denied.video":"Camera permission denied by system","perm_sys_denied.screenshare":"Screenshare permission denied by system","perm_sys_denied.audio.macos.message":"Open Apple Menu, Navigate to 'System Settings > Privacy & Security > Microphone'. Allow access to your browser and reload this application.","perm_sys_denied.video.macos.message":"Open Apple Menu, Navigate to 'System Settings > Privacy & Security > Camera'. Allow access to your browser and reload this application.","perm_sys_denied.screenshare.macos.message":"Open Apple Menu, Navigate to 'System Settings > Privacy & Security > Screenshare'. Allow access to your browser and reload this application.","perm_sys_denied.audio.ios.message":"On your iPhone, navigate to 'Settings > Privacy > Microphone', allow access to your browser and reload this application.","perm_sys_denied.video.ios.message":"On your iPhone, navigate to 'Settings > Privacy > Camera', allow access to your browser and reload this application.","perm_sys_denied.screenshare.ios.message":"On your iPhone, navigate to 'Settings > Privacy > Screenshare', allow access to your browser and reload this application.","perm_sys_denied.audio.windows.message":"Go to windows settings, select 'Settings > Privacy > Microphone'. Allow permissions to your browser and reload this application.","perm_sys_denied.video.windows.message":"Go to windows settings, select 'Settings > Privacy > Camera'. Allow permissions to your browser and reload this application.","perm_sys_denied.screenshare.windows.message":"Go to windows settings, select 'Settings > Privacy > Screenshare'. Allow permissions to your browser and reload this application.","perm_sys_denied.audio.android.message":"On you device, navigate to 'Settings > Apps'. Select your browser, allow Microphone permissions and reload this application.","perm_sys_denied.video.android.message":"On you device, navigate to 'Settings > Apps'. Select your browser, allow Camera permissions and reload this application.","perm_sys_denied.screenshare.android.message":"On you device, navigate to 'Settings > Apps'. Select your browser, allow Screenshare permissions and reload this application.","perm_sys_denied.audio.others.message":"Navigate to your system settings. Allow 'Microphone' permissions for your browser and reload this application.","perm_sys_denied.video.others.message":"Navigate to your system settings. Allow 'Camera' permissions for your browser and reload this application.","perm_sys_denied.screenshare.others.message":"Navigate to your system settings. Allow 'Screenshare' permissions for your browser and reload this application.",perm_could_not_start:"Could not capture device.","perm_could_not_start.audio":"Unable to start your Microphone","perm_could_not_start.video":"Unable to start your Camera","perm_could_not_start.screenshare":"Unable to start your Screenshare","perm_could_not_start.audio.message":"Looks like the system could not capture your microphone. Please restart your device or upgrade your browser to fix this.","perm_could_not_start.video.message":"Looks like the system could not capture your camera. Please restart your device or upgrade your browser to fix this.","perm_could_not_start.screenshare.message":"Looks like the system could not capture your screenshare. Please restart your device or upgrade your browser to fix this.",full_screen:"Full Screen","full_screen.exit":"Exit Full Screen","waitlist.header_title":"Waiting","waitlist.body_text":"You are in the waiting room, the host will let you in soon.","waitlist.deny_request":"Deny request","waitlist.accept_request":"Accept request","waitlist.accept_all":"Accept all","stage_request.header_title":"Join Stage Requests","stage_request.deny_request":"Deny request","stage_request.accept_request":"Accept request","stage_request.accept_all":"Accept all","stage_request.deny_all":"Deny all","stage_request.approval_pending":"Pending","stage_request.denied":"Denied","stage_request.request":"Join stage","stage_request.cancel_request":"Cancel request","stage_request.leave_stage":"Leave stage","stage_request.request_tip":"Request to join the discussion","stage_request.leave_tip":"Leave the stage","stage_request.pending_tip":"Request pending","stage_request.denied_tip":"Rejected request","stage.empty_host":"The stage is empty","stage.empty_host_summary":"To begin the webinar, please join the stage or accept a join stage request from the participants tab.","stage.empty_viewer":"Webinar has not yet been started","stage.remove_from_stage":"Remove from stage","stage.add_to_stage":"Add to stage","stage.join_title":"Join Stage","stage.join_summary":"You are about to join the stage, your video & audio as shown above will be visible to all participants.","stage.join_cancel":"Cancel","stage.join_confirm":"Join","setup_screen.join_in_as":"Join in as","setup_screen.joining_as":"Joining as","setup_screen.your_name":"Your name","stage.reconnecting":"Reconnecting...","recording.label":"REC","recording.indicator":"This meeting is being recorded.","recording.started":"This meeting is being recorded.","recording.stopped":"Recording for this meeting has been stopped.","recording.error.start":"Error while starting recording.","recording.error.stop":"Error while stopping recording","recording.start":"Start Recording","recording.stop":"Stop Recording","recording.starting":"Starting","recording.stopping":"Stopping","recording.loading":"Loading","recording.idle":"Record",audio_playback:"Play Audio","audio_playback.title":"Allow Audio Playback","audio_playback.description":"In order to play audio properly on your device, click the button below.",breakout_rooms:"Breakout Rooms","breakout_rooms.room_config_header":"Create Breakout","breakout_rooms.join_breakout_header":"Join Breakout","breakout_rooms.empty":"Nobody here yet.","breakout_rooms.delete":"Delete Room","breakout_rooms.switch":"Switch","breakout_rooms.main_room":"Main Room","breakout_rooms.shuffle_participants":"Shuffle Participants","breakout_rooms.deselect":"Deselect","breakout_rooms.selected":"selected","breakout_rooms.num_of_rooms":"No. of Rooms","breakout_rooms.approx":"Approx.","breakout_rooms.participants_per_room":"participants/room","breakout_rooms.division_text":"when equally divided.","breakout_rooms.start_breakout":"Start Breakout","breakout_rooms.close_breakout":"Close Breakout","breakout_rooms.update_breakout":"Update Breakout","breakout_rooms.discard_changes":"Discard Changes","breakout_rooms.room":"Room","breakout_rooms.rooms":"Rooms","breakout_rooms.room_name":"Room Name","breakout_rooms.edit_room_name":"Edit Room Name","breakout_rooms.save_room_name":"Save Room Name","breakout_rooms.add_room":"Add","breakout_rooms.add_room_brief":"Add Room","breakout_rooms.select_all":"Select all","breakout_rooms.unassign_all":"Unassign all","breakout_rooms.assign":"Assign","breakout_rooms.assign_participants":"Assign Participants","breakout_rooms.none_assigned":"No participants assigned yet","breakout_rooms.drag_drop_participants":"Drag and drop participants","breakout_rooms.click_drop_participants":"Click here to assign","breakout_rooms.status.assign_multiple":"Assign multiple participants at once by clicking and selecting them","breakout_rooms.status.select_room":"Select a room to assign","breakout_rooms.ephemeral_status.participants_assigned":"Participants assigned","breakout_rooms.ephemeral_status.participants_assigned_randomly":"Participants assigned randomly","breakout_rooms.ephemeral_status.changes_discarded":"Changes discarded","breakout_rooms.confirm_modal.start_breakout.header":"Start breakout rooms?","breakout_rooms.confirm_modal.start_breakout.content":"Once started, all participants will be moved to their assigned rooms.","breakout_rooms.confirm_modal.start_breakout.cancelText":"No, go back","breakout_rooms.confirm_modal.start_breakout.ctaText":"Yes, start","breakout_rooms.confirm_modal.close_breakout.header":"Close breakout rooms?","breakout_rooms.confirm_modal.close_breakout.content":"All breakout rooms will be closed & participants will be moved back to the main room.","breakout_rooms.confirm_modal.close_breakout.ctaText":"Yes, close breakout","breakout_rooms.move_reason.started_msg":"Starting breakout rooms...","breakout_rooms.move_reason.started_desc":"You are being moved to your assigned room","breakout_rooms.move_reason.closed_msg":"Closing Breakout rooms...","breakout_rooms.move_reason.closed_desc":"You are being moved back to the main room","breakout_rooms.move_reason.switch_room":"Joining Breakout Room...","breakout_rooms.move_reason.switch_main_room":"Joining Main Room...","breakout_rooms.all_assigned":"All participants have been assigned","breakout_rooms.empty_main_room":"No more participants in the main room.","breakout_rooms.leave_confirmation":"Are you sure you want to leave the call? You are in a breakout room, you can join the main room too.","breakout_rooms.leave_confirmation.main_room_btn":"Go back to main room",ai:"AI","ai.meeting_ai":"MeetingAI","ai.home":"Home","ai.transcriptions":"Transcriptions","ai.personal":"Personal","ai.caption_view":"Caption View","ai.chat.tooltip":"This conversation will just be visible to you and not to others in the call.","ai.chat.summerise":"Hey AI, summarise this call","ai.chat.agenda":"Hey AI, what is today's agenda?",search:"Search","search.could_not_find":"Couldn't find a participant with the specified name or ID.","search.empty":"It looks like nobody is here.",end:"End Meeting","end.all":"End meeting for all",ended:"The meeting ended.","ended.rejected":"Your request to join the meeting was denied.","ended.left":"You left the meeting.","ended.kicked":"You were removed from the meeting.","ended.disconnected":"The call ended because the connection was lost.","ended.network":"Please check your internet connection and try again.",network:"Network","network.reconnecting":"Connection lost. Trying to reconnect...","network.delay":"Taking too long to reconnect...","network.delay_extended":"Taking too long to reconnect. Please check your network connection.","network.restored":"Connection restored","network.lost":"Connection lost","network.lost_extended":"Connection lost. Please check your network connection.","network.disconnected":"Could not reconnect. Please leave the meeting and try refreshing the window.","network.leaving":"Automatically leaving the meeting in 10 seconds.",livestream:"Livestream","livestream.indicator":"This meeting is being livestreamed.","livestream.skip":"Skip to Live","livestream.idle":"Waiting to go live.","livestream.starting":"Livestream is starting...","livestream.stopping":"Livestream is stopping...","livestream.error.not_supported":"Player not supported.","livestream.error.not_found":"Playback URL not found.","livestream.error.unknown":"An unknown error occured.","livestream.error.sync":"Could not sync livestream please try again later.","livestream.error.start":"Error while starting livestream.","livestream.error.stop":"Error while stopping livestream.","livestream.go_live":"Go Live","livestream.end_live":"End Live","livestream.error":"Error","cta.help":"Need help on how to do this?","cta.continue":"Continue as it is","cta.reload":"Reload","cta.confirmation":"Are you sure?","remote_access.empty":"There are no remote requests, yet.","remote_access.requests":"The following people have requested remote control to your screen share.","remote_access.allow":"Please select whom you want to give access to.","remote_access.grant":"Grant acess","remote_access.indicator":"Any plugin or screenshare you switch to will sync the change across the meeting",chat:"Chat","chat.new":"New","chat.new_channel":"Create new channel","chat.channel_name":"Enter channel name","chat.member_name":"Enter member name","chat.add_members":"Add members","chat.delete_msg":"Delete","chat.edit_msg":"Edit","chat.send_msg":"Send message","chat.send_attachment":"Drop files/images to send","chat.send_img":"Send an image","chat.send_file":"Send a file","chat.send_emoji":"Send an emoji","chat.update_msg":"Update message","chat.channel_members":"Channel Members","chat.img.loading":"Loading image","chat.error.img_not_found":"Image not found","chat.error.empty_results":"Couldn't find a member with the specified name.","chat.img.shared_by":"Shared by","chat.reply":"Reply","chat.message_placeholder":"Message..","chat.click_to_send":"Click to send as message","chat.search_msgs":"Search messages","chat.search_conversations":"Search conversations","chat.start_conversation":"Start a conversation..","chat.empty_search":"No messages found","chat.empty_channel":"Send a message to get started","chat.cancel_upload":"Cancel upload","date.today":"Today","date.yesteday":"Yesterday","date.sunday":"Sunday","date.monday":"Monday","date.tuesday":"Tuesday","date.wednesday":"Wednesday","date.thursday":"Thursday","date.friday":"Friday","date.saturday":"Saturday","list.empty":"No items found","grid.listening":"Listening"},j=(t=DP)=>{const e=Object.assign({},DP,t);return i=>{var r;return(r=e[i])!==null&&r!==void 0?r:i}},rde=({element:t,size:e,states:i={},config:r={}})=>{let s=[];const n=r==null?void 0:r.root[t],a=o=>{s.push(o),typeof e=="string"&&s.push(`${o}.${e}`)};if(a(t),typeof n=="object"&&!Array.isArray(n)&&n!==null){const{state:o,states:c}=n;let d=t,u=[];if(Array.isArray(c)){u=c.filter(p=>i[p]),u.sort();for(const p of u)a(`${d}.${p}`);if(u.length>1){const p=[d,...u].join(".");a(p)}}if(typeof o=="string"){const p=`${t}[${o}=${i[o]}]`;a(p);for(const g of u)a(`${p}.${g}`);if(u.length>1){const g=[p,...u].join(".");a(g)}}}return s},sde=({selectors:t,styles:e})=>{if(!Array.isArray(t)||e==null)return{};const i={};for(const r of t){const s=e[r];s!=null&&Object.assign(i,s)}return i},nde=({selectors:t,root:e})=>{if(!e||!Array.isArray(t))return[];let i=[];for(const r of t){const s=e[r];if(Array.isArray(s))i=[...s];else if(s){if(s.children&&(i=[...s.children]),Array.isArray(s.remove))for(const n of s.remove)i=i.filter(a=>typeof a=="string"?a!==n:Array.isArray(a)?a[0]!==n:!0);if(s.addBefore)for(const[n,a]of Object.entries(s.addBefore)){const o=i.findIndex(c=>typeof c=="string"?c===n:Array.isArray(c)?c[0]===n:!1);o>=0&&i.splice(o,0,...a)}Array.isArray(s.add)&&(i=i.concat(s.add)),Array.isArray(s.prepend)&&(i=s.prepend.concat(i))}}return i},jg=({elements:t,defaults:e,props:i={},deepProps:r=!1,elementProps:s={}})=>!Array.isArray(t)||t.length===0?null:t.map(n=>l(Ge,{element:n,defaults:e,props:i,childProps:r&&i,elementProps:s})),Ge=({element:t,defaults:e,childProps:i={},props:r={},onlyChildren:s=!1,asHost:n=!1,deepProps:a=!1,elementProps:o={}},c)=>{var d;const{config:u,size:p,states:g}=e;let m,f={},b=[];Array.isArray(t)?[m,f,...b]=t:m=t;const w=(d=u==null?void 0:u.root)===null||d===void 0?void 0:d[m];w!=null&&"props"in w&&(r=Object.assign(Object.assign({},w.props),r)),r=Object.assign(Object.assign({},r),f),m in o&&(r=Object.assign(Object.assign({},r),o[m]));const v=rde({element:m,size:p,states:g,config:u}),_=nde({selectors:v,root:u.root});if(s)return l(jg,{elements:_,defaults:e,props:i,deepProps:a,elementProps:o});const k=sde({selectors:v,styles:u.styles});if(n)return l(O,Object.assign({},e,{style:k},r),l(jg,{elements:_,defaults:e,props:i,deepProps:a,elementProps:o}),c,b.map(P=>{if(Array.isArray(P)){const[D,M]=P;return l(D,Object.assign({},e,M))}return P}));if(["dyte-header","dyte-controlbar"].includes(m)&&(r.disableRender=!0),m.startsWith("dyte-"))return l(m,Object.assign({},e,{style:k},r),l(jg,{elements:_,defaults:e,props:i,deepProps:a,elementProps:o}),c,b.map(P=>{if(Array.isArray(P)){const[D,M]=P;return l(D,Object.assign({},e,M))}return P}));{const[P,D]=m.split("#");return l(P,Object.assign({id:D,style:k},r),l(jg,{elements:_,defaults:e,props:i,deepProps:a,elementProps:o}),c,b.map(M=>{if(Array.isArray(M)){const[B,G]=M;return l(B,Object.assign({},e,G))}return M}))}},LP={get:(t,e,i)=>(...r)=>{try{return Reflect.get(t,e,i).apply(t,r)}catch{return null}}};let Mw;try{Mw=new Proxy(localStorage,LP)}catch{Mw=new Proxy({},LP)}const Bn=Mw,lE="dyte-prefs",M3=(t,e)=>{const i=JSON.parse(Bn.getItem(lE)||"{}");i[t]=JSON.stringify(e),Bn.setItem("dyte-prefs",JSON.stringify(i))},D3=t=>JSON.parse(Bn.getItem(lE)||"{}")[t],ade=()=>{const t=JSON.parse(Bn.getItem(lE)||"{}"),e=t["mirror-video"]?t["mirror-video"]==="true":!0,i=t["mute-notification-sounds"]?t["mute-notification-sounds"]==="true":!1;return{mirrorVideo:e,muteNotificationSounds:i}},Xf={},ode=(t,e,i)=>{const r=t.get(e);r?r.includes(i)||r.push(i):t.set(e,[i])},cde=(t,e)=>{let i;return(...r)=>{i&&clearTimeout(i),i=setTimeout(()=>{i=0,t(...r)},e)}},dde=t=>!("isConnected"in t)||t.isConnected,NP=cde(t=>{for(let e of t.keys())t.set(e,t.get(e).filter(dde))},2e3),lde=()=>{if(typeof hP!="function")return{};const t=new Map;return{dispose:()=>t.clear(),get:e=>{const i=hP();i&&ode(t,e,i)},set:e=>{const i=t.get(e);i&&t.set(e,i.filter(qf)),NP(t)},reset:()=>{t.forEach(e=>e.forEach(qf)),NP(t)}}},pb=t=>typeof t=="function"?t():t,ude=(t,e=(i,r)=>i!==r)=>{const i=pb(t);let r=new Map(Object.entries(i??{}));const s={dispose:[],get:[],set:[],reset:[]},n=()=>{var f;r=new Map(Object.entries((f=pb(t))!==null&&f!==void 0?f:{})),s.reset.forEach(b=>b())},a=()=>{s.dispose.forEach(f=>f()),n()},o=f=>(s.get.forEach(b=>b(f)),r.get(f)),c=(f,b)=>{const w=r.get(f);e(b,w,f)&&(r.set(f,b),s.set.forEach(v=>v(f,b,w)))},d=typeof Proxy>"u"?{}:new Proxy(i,{get(f,b){return o(b)},ownKeys(f){return Array.from(r.keys())},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},has(f,b){return r.has(b)},set(f,b,w){return c(b,w),!0}}),u=(f,b)=>(s[f].push(b),()=>{pde(s[f],b)});return{state:d,get:o,set:c,on:u,onChange:(f,b)=>{const w=u("set",(_,k)=>{_===f&&b(k)}),v=u("reset",()=>b(pb(t)[f]));return()=>{w(),v()}},use:(...f)=>{const b=f.reduce((w,v)=>(v.set&&w.push(u("set",v.set)),v.get&&w.push(u("get",v.get)),v.reset&&w.push(u("reset",v.reset)),v.dispose&&w.push(u("dispose",v.dispose)),w),[]);return()=>b.forEach(w=>w())},dispose:a,reset:n,forceUpdate:f=>{const b=r.get(f);s.set.forEach(w=>w(f,b,b))}}},pde=(t,e)=>{const i=t.indexOf(e);i>=0&&(t[i]=t[t.length-1],t.length--)},hde=(t,e)=>{const i=ude(t,e);return i.use(lde()),i},{state:L,onChange:Ql}=hde({});var L3=function(){if(typeof Map<"u")return Map;function t(e,i){var r=-1;return e.some(function(s,n){return s[0]===i?(r=n,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(i){var r=t(this.__entries__,i),s=this.__entries__[r];return s&&s[1]},e.prototype.set=function(i,r){var s=t(this.__entries__,i);~s?this.__entries__[s][1]=r:this.__entries__.push([i,r])},e.prototype.delete=function(i){var r=this.__entries__,s=t(r,i);~s&&r.splice(s,1)},e.prototype.has=function(i){return!!~t(this.__entries__,i)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(i,r){r===void 0&&(r=null);for(var s=0,n=this.__entries__;s<n.length;s++){var a=n[s];i.call(r,a[1],a[0])}},e}()}(),Dw=typeof window<"u"&&typeof document<"u"&&window.document===document,ev=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),gde=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ev):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),mde=2;function fde(t,e){var i=!1,r=!1,s=0;function n(){i&&(i=!1,t()),r&&o()}function a(){gde(n)}function o(){var c=Date.now();if(i){if(c-s<mde)return;r=!0}else i=!0,r=!1,setTimeout(a,e);s=c}return o}var vde=20,yde=["top","right","bottom","left","width","height","size","weight"],bde=typeof MutationObserver<"u",wde=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=fde(this.refresh.bind(this),vde)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var i=this.observers_,r=i.indexOf(e);~r&&i.splice(r,1),!i.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(i){return i.gatherActive(),i.hasActive()});return e.forEach(function(i){return i.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!Dw||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),bde?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!Dw||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var i=e.propertyName,r=i===void 0?"":i,s=yde.some(function(n){return!!~r.indexOf(n)});s&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),N3=function(t,e){for(var i=0,r=Object.keys(e);i<r.length;i++){var s=r[i];Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return t},Ol=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||ev},U3=py(0,0,0,0);function tv(t){return parseFloat(t)||0}function UP(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce(function(r,s){var n=t["border-"+s+"-width"];return r+tv(n)},0)}function _de(t){for(var e=["top","right","bottom","left"],i={},r=0,s=e;r<s.length;r++){var n=s[r],a=t["padding-"+n];i[n]=tv(a)}return i}function Sde(t){var e=t.getBBox();return py(0,0,e.width,e.height)}function Ede(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return U3;var r=Ol(t).getComputedStyle(t),s=_de(r),n=s.left+s.right,a=s.top+s.bottom,o=tv(r.width),c=tv(r.height);if(r.boxSizing==="border-box"&&(Math.round(o+n)!==e&&(o-=UP(r,"left","right")+n),Math.round(c+a)!==i&&(c-=UP(r,"top","bottom")+a)),!Tde(t)){var d=Math.round(o+n)-e,u=Math.round(c+a)-i;Math.abs(d)!==1&&(o-=d),Math.abs(u)!==1&&(c-=u)}return py(s.left,s.top,o,c)}var kde=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof Ol(t).SVGGraphicsElement}:function(t){return t instanceof Ol(t).SVGElement&&typeof t.getBBox=="function"}}();function Tde(t){return t===Ol(t).document.documentElement}function xde(t){return Dw?kde(t)?Sde(t):Ede(t):U3}function Pde(t){var e=t.x,i=t.y,r=t.width,s=t.height,n=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(n.prototype);return N3(a,{x:e,y:i,width:r,height:s,top:i,right:e+r,bottom:s+i,left:e}),a}function py(t,e,i,r){return{x:t,y:e,width:i,height:r}}var Cde=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=py(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=xde(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),Rde=function(){function t(e,i){var r=Pde(i);N3(this,{target:e,contentRect:r})}return t}(),Ade=function(){function t(e,i,r){if(this.activeObservations_=[],this.observations_=new L3,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=i,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Ol(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;i.has(e)||(i.set(e,new Cde(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Ol(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;i.has(e)&&(i.delete(e),i.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(i){i.isActive()&&e.activeObservations_.push(i)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,i=this.activeObservations_.map(function(r){return new Rde(r.target,r.broadcastRect())});this.callback_.call(e,i,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),j3=typeof WeakMap<"u"?new WeakMap:new L3,$3=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=wde.getInstance(),r=new Ade(e,i,this);j3.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){$3.prototype[t]=function(){var e;return(e=j3.get(this))[t].apply(e,arguments)}});var z3=function(){return typeof ev.ResizeObserver<"u"?ev.ResizeObserver:$3}();const Ide=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));overflow:hidden;position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);height:100%;width:100%}:host([mode='fill']){position:relative}",F3=class{constructor(e){U(this,e),this.stateUpdate=K(this,"dyteStateUpdate",7),this.roomJoinedListener=()=>{this.setStates({meeting:"joined"}),L.meeting="joined"},this.waitlistedListener=()=>{this.setStates({meeting:"waiting"}),L.meeting="waiting"},this.roomLeftListener=({state:i})=>{const r=this.states||L;if((r==null?void 0:r.roomLeftState)==="disconnected"){this.setStates({meeting:"ended",roomLeftState:i}),L.meeting="ended";return}this.setStates({meeting:"ended",roomLeftState:i}),L.meeting="ended",L.roomLeftState=i},this.mediaPermissionUpdateListener=({kind:i,message:r})=>{if(["audio","video"].includes(i)){if(r==="ACCEPTED"||L.activeDebugger)return;const s={enabled:!0,kind:i};this.setStates({activePermissionsMessage:s}),L.activePermissionsMessage=s}},this.joinStateAcceptedListener=()=>{this.setStates({activeJoinStage:!0}),this.stateUpdate.emit({activeJoinStage:!0}),L.activeJoinStage=!0},this.loadConfigFromPreset=!0,this.applyDesignSystem=!0,this.mode="fixed",this.leaveOnUnmount=!1,this.meeting=void 0,this.showSetupScreen=void 0,this.t=j(),this.config=Me,this.iconPackUrl=void 0,this.size=void 0,this.gridLayout="row",this.states={meeting:"idle",prefs:{mirrorVideo:!0,muteNotificationSounds:!1}},this.middlewares={},this.newMeeting=void 0,this.iconPack=N}connectedCallback(){var e;this.resizeObserver=new z3(()=>this.handleResize()),this.resizeObserver.observe(this.host),this.applyDesignSystem&&((e=this.config)===null||e===void 0?void 0:e.designTokens)!=null&&typeof document<"u"&&Cw(document.documentElement,this.config.designTokens),this.meetingChanged(this.meeting),this.iconPackUrlChanged(this.iconPackUrl),this.initializePreferences()}clearListeners(e){e!=null&&(e.self.removeListener("roomJoined",this.roomJoinedListener),e.self.removeListener("socketServiceRoomJoined",this.roomJoinedListener),e.meta.removeListener("socketReconnected",this.roomJoinedListener),e.self.removeListener("roomLeft",this.roomLeftListener),e.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),e.self.removeListener("waitlisted",this.waitlistedListener),e.self.removeListener("joinStageRequestAccepted",this.joinStateAcceptedListener))}disconnectedCallback(){var e;this.leaveOnUnmount&&((e=this.meeting)===null||e===void 0||e.leaveRoom()),this.resizeObserver.disconnect(),this.clearListeners(this.meeting)}meetingChanged(e){var i,r;if(e!=null){if(this.loadConfigFromPreset&&e.self.config!=null){const s=e.self.config,{config:n,data:a}=A3(s,e);this.config===Me&&(this.config=n),this.showSetupScreen==null&&(this.showSetupScreen=a.showSetupScreen),e.connectedMeetings.supportsConnectedMeetings&&(!((i=L.activeBreakoutRoomsManager)===null||i===void 0)&&i.destinationMeetingId)&&(this.showSetupScreen=!1)}this.applyDesignSystem&&((r=this.config)===null||r===void 0?void 0:r.designTokens)!=null&&typeof document<"u"&&Cw(document.documentElement,this.config.designTokens),ch(e)?e.self.addListener("socketServiceRoomJoined",this.roomJoinedListener):e.self.addListener("roomJoined",this.roomJoinedListener),e.self.addListener("waitlisted",this.waitlistedListener),e.self.addListener("roomLeft",this.roomLeftListener),e.self.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),e.self.addListener("joinStageRequestAccepted",this.joinStateAcceptedListener),e.connectedMeetings.supportsConnectedMeetings&&e.connectedMeetings.once("changingMeeting",this.handleChangingMeeting),e.self.roomJoined?(this.states=Object.assign(Object.assign({},this.states),{meeting:"joined"}),L.meeting="joined"):this.showSetupScreen&&this.newMeeting==null?(this.states=Object.assign(Object.assign({},this.states),{meeting:"setup"}),L.meeting="setup"):e.joinRoom()}}async iconPackUrlChanged(e){this.iconPack=await I3(e)}listenState(e){e.stopPropagation(),this.setStates(e.detail)}initializePreferences(){const e=ade();this.setStates({prefs:e}),L.prefs=e}handleChangingMeeting(e){L.activeBreakoutRoomsManager=Object.assign(Object.assign({},L.activeBreakoutRoomsManager),{destinationMeetingId:e})}handleResize(){this.size=O3(this.host.clientWidth)}setStates(e){const i=Object.assign({},this.states);R3(i,e),this.states=i}render(){var e,i,r;const s={meeting:(e=this.newMeeting)!==null&&e!==void 0?e:this.meeting,size:this.size,states:this.states||L,config:this.config,iconPack:this.iconPack,t:this.t,middlewares:this.middlewares},n={"dyte-grid":{layout:this.gridLayout}};return((r=(i=this.meeting)===null||i===void 0?void 0:i.meta)===null||r===void 0?void 0:r.viewType)==="CHAT"?l(Ge,{element:"dyte-chat",defaults:s}):l(Ge,{element:"dyte-meeting",defaults:s,asHost:!0,elementProps:n})}get host(){return jr(this)}static get watchers(){return{meeting:["meetingChanged"],iconPackUrl:["iconPackUrlChanged"]}}};F3.style=Ide;var Ode=Object.freeze({__proto__:null,dyte_meeting:F3});const Mde=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;box-sizing:border-box;display:flex;width:100%;max-width:var(--dyte-space-80, 320px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden}.close{position:absolute;top:var(--dyte-space-3, 12px);left:var(--dyte-space-3, 12px)}.title{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);-webkit-user-select:none;-moz-user-select:none;user-select:none;padding:var(--dyte-space-0, 0px);text-align:center;font-size:16px;font-weight:400}#mobile-header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#mobile-header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;position:relative;border-radius:var(--dyte-border-radius-none, 0)}#mobile-header dyte-button:hover{background-color:transparent}#mobile-header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}#mobile-header dyte-button .dot{font-size:48px;position:absolute;top:-26px;right:calc(var(--dyte-space-1, 4px) * -1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}dyte-ai-home,dyte-ai-transcriptions,dyte-ai-chat{flex:1}:host([view='sidebar']){margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([view='full-screen']){position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:50;max-width:100%;border:none}",V3=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeAI:!1}),L.activeAI=!1},this.transcriptionHandler=()=>{this.tab!=="transcriptions"&&(this.newTranscriptionAvailable=!0)},this.aiMessageHandler=()=>{this.tab!=="home"&&(this.newAiMessageAvailable=!0)},this.defaultSection="home",this.meeting=void 0,this.middlewares={},this.states=void 0,this.config=Me,this.iconPack=N,this.t=j(),this.size=void 0,this.view="sidebar",this.tab=this.defaultSection,this.newTranscriptionAvailable=!1,this.newAiMessageAvailable=!1}connectedCallback(){var t,e,i,r;this.viewChanged(this.view),(e=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||e===void 0||e.on("transcription",this.transcriptionHandler),(r=(i=this.middlewares)===null||i===void 0?void 0:i.speech)===null||r===void 0||r.on("chatGPTReply",this.aiMessageHandler)}disconnectedCallback(){var t,e,i,r;this.keydownListener&&document.removeEventListener("keydown",this.keydownListener),(e=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||e===void 0||e.off("transcription",this.transcriptionHandler),(r=(i=this.middlewares)===null||i===void 0?void 0:i.speech)===null||r===void 0||r.off("chatGPTReply",this.aiMessageHandler)}viewChanged(t){t==="full-screen"&&(this.keydownListener=e=>{e.key==="Escape"&&this.close()},document.addEventListener("keydown",this.keydownListener))}tabChanged(t){t==="transcriptions"&&this.newTranscriptionAvailable&&(this.newTranscriptionAvailable=!1),t==="home"&&this.newAiMessageAvailable&&(this.newAiMessageAvailable=!1)}viewSection(t){this.tab=t,L.activeSidebar=!0}render(){var t;if(!this.middlewares.speech||!(!((t=this.states)===null||t===void 0)&&t.activeAI))return null;const e={meeting:this.meeting,config:this.config,states:this.states||L,size:this.size,t:this.t,iconPack:this.iconPack,middlewares:this.middlewares},i=this.middlewares.speech;return l(O,null,l("h3",{class:"title"},this.t("ai")),l("div",{id:"mobile-header"},l("dyte-button",{variant:"ghost",class:{active:this.tab==="home"},onClick:()=>this.viewSection("home"),iconPack:this.iconPack,t:this.t},this.t("ai.home"),this.newAiMessageAvailable&&l("span",{class:"dot"},".")),l("dyte-button",{variant:"ghost",class:{active:this.tab==="transcriptions"},onClick:()=>this.viewSection("transcriptions"),iconPack:this.iconPack,t:this.t},this.t("ai.transcriptions"),this.newTranscriptionAvailable&&l("span",{class:"dot"},"."))),l("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:this.close,"aria-label":this.t("close"),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})),this.tab==="home"&&l(Ge,{element:"dyte-ai-home",defaults:e,props:{aiClient:i,initialMessages:i.aiMesssages,meeting:this.meeting}}),this.tab==="transcriptions"&&l(Ge,{element:"dyte-ai-transcriptions",defaults:e,props:{aiClient:i,initialTranscriptions:i.transcriptions}}),this.tab==="personal"&&l(Ge,{element:"dyte-ai-chat",defaults:e}))}static get watchers(){return{view:["viewChanged"],tab:["tabChanged"]}}};V3.style=Mde;var Dde=Object.freeze({__proto__:null,dyte_ai:V3});const Lde=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column}.private-message{text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));margin-top:var(--dyte-space-8, 32px);margin-bottom:var(--dyte-space-8, 32px);margin-left:var(--dyte-space-10, 40px);margin-right:var(--dyte-space-10, 40px)}.hint-message{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;flex:1 1 0%;font-size:14px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}i{font-weight:500;font-style:italic;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}",B3=class{constructor(t){U(this,t),this.t=j()}render(){return l(O,null,l("p",{class:"private-message"},this.t("ai.chat.tooltip")),l("div",{class:"hint-message"},l("p",null,this.t("ask")," ",l("i",null,'"',this.t("ai.chat.summerise"),'"'),l("br",null)," or ",l("br",null),this.t("type")," ",l("i",null,'"',this.t("ai.chat.agenda"),'"'))))}};B3.style=Lde;var Nde=Object.freeze({__proto__:null,dyte_ai_chat:B3});const H3=(t,e)=>{const i=e.getTime()-t.getTime();return Math.round(Math.abs(i/1e3/60))},Ude=(t,e)=>{const i=H3(t,e);if(i<2)return"just now";if(i<60)return`${i}m ago`;const r=Math.round(i/60);if(i<90)return`about ${r}h ago`;if(r<24)return`${r}h ago`;const s=Math.round(r/24);return s<7?`${s}d ago`:`${Math.round(s/7)}w ago`},jde=t=>t.toDateString()+" "+t.toLocaleTimeString(),Mr=(t,e=20)=>t==null?"":t.length>e?`${t.substring(0,e)}...`:t,$de=t=>{const e=/^\d+$/;return/^\p{Emoji}+$/u.test(t)&&!e.test(t)},uE=t=>t!=null&&t.trim().toLowerCase().startsWith("javascript:")?"https://dyte.io":t,es=t=>(t=t==null?void 0:t.trim(),t===""?"Participant":t);function G3(t,e=2){return t.replace(/[^\u00BF-\u1FFF\u2C00-\uD7FF\w\s]/g,"").trim().split(/\s+/).slice(0,e).map(s=>s.charAt(0)).join("").toUpperCase()}const $h=({name:t,time:e,now:i})=>l("div",{class:"head"},l("div",{class:"name"},Mr(es(t),20)),l("div",{class:"time",title:jde(e)},Ude(e,i))),ro=(t,e=!0)=>{t!=null&&t.scrollTo({top:t.scrollHeight,behavior:e?"smooth":"auto"})},zde=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}*{box-sizing:border-box;border-width:0;border-style:solid}:host{display:flex;flex-direction:column}.public-message{text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));margin-top:var(--dyte-space-8, 32px);margin-bottom:var(--dyte-space-8, 32px);margin-left:var(--dyte-space-10, 40px);margin-right:var(--dyte-space-10, 40px)}.content{box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px);flex:1 0 0px;overflow-y:scroll;}.subtitle{margin-top:var(--dyte-space-1, 4px);font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.hint-message{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;flex:1 1 0%;font-size:14px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}i{font-weight:500;font-style:italic;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.actions{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);display:flex;align-items:center;justify-content:space-between;font-size:12px}.actions div{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.actions button{display:inline-flex;cursor:pointer;border-radius:var(--dyte-border-radius-md, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.5);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.prompt{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.prompt input{height:var(--dyte-space-12, 48px);width:100%;resize:none;background-color:transparent;padding:var(--dyte-space-4, 16px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px}.message .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);white-space:pre-wrap;font-size:14px}.message .loader{display:flex;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);font-size:12px}.message{margin-bottom:var(--dyte-space-3, 12px)}.message:last-child{margin-bottom:var(--dyte-space-0, 0px)}.prompt-text{margin-top:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-1, 4px);border-left-width:var(--dyte-border-width-sm, 1px);border-left-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}`,W3=class{constructor(t){U(this,t),this.handleSubmit=e=>{var i,r;e.preventDefault(),e.stopPropagation(),this.messages=[...this.messages,{action:"Prompt",participantName:this.meeting.self.name,createdAt:new Date,prompt:this.prompt,loading:!0}],(r=(i=this.middlewares)===null||i===void 0?void 0:i.speech)===null||r===void 0||r.sendMessageToChatGPT({action:"default",message:this.prompt}),this.prompt=""},this.handleSummarise=()=>{var e,i;(i=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||i===void 0||i.sendMessageToChatGPT({action:"summarization"})},this.handleAgenda=()=>{var e,i;(i=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||i===void 0||i.sendMessageToChatGPT({action:"agenda generation"})},this.handleMoM=()=>{var e,i;(i=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||i===void 0||i.sendMessageToChatGPT({action:"action items generation"})},this.prompt="",this.messages=[],this.meeting=void 0,this.initialMessages=void 0,this.middlewares={}}handleChatGPTReply(t){const e=this.messages.find(i=>t.action==="default"?i.id===t.id:i.id===t.id||i.action===this.mapMessageAction(t.action));e&&(e.loading||e.action!==this.mapMessageAction("default"))?this.messages=[...this.messages.map(i=>i.id===t.id||i.action===this.mapMessageAction(t.action)?Object.assign(Object.assign({},t),{action:this.mapMessageAction(t.action)}):i)]:this.messages=[...this.messages,Object.assign(Object.assign({},t),{action:this.mapMessageAction(t.action)})]}connectedCallback(){var t,e,i;this.initialMessages?this.messages=this.initialMessages.map(r=>Object.assign(Object.assign({},r),{action:this.mapMessageAction(r.action)})):!((t=this.middlewares)===null||t===void 0)&&t.speech&&setTimeout(()=>{var r;this.messages=(r=this.middlewares.speech.aiMesssages)===null||r===void 0?void 0:r.map(s=>Object.assign(Object.assign({},s),{action:this.mapMessageAction(s.action)}))},1e3),(i=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||i===void 0||i.on("chatGPTReply",r=>this.handleChatGPTReply(r))}disconnectedCallback(){var t,e;(e=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||e===void 0||e.off("chatGPTReply",i=>this.handleChatGPTReply(i))}messagesUpdated(){setTimeout(()=>{ro(this.contentContainer,!1)},100)}mapMessageAction(t){switch(t){case"default":return"Prompt";case"summarization":return"Summary";case"agenda generation":return"Agenda";case"action items generation":return"Action items"}}render(){return l(O,null,l("div",{class:"content scrollbar",ref:t=>this.contentContainer=t},l("p",{class:"public-message"},"This conversation will be visible to everyone on the call."),!this.messages.length&&l("div",{class:"hint-message"},l("p",null,"Ask ",l("i",null,'"Hey AI, summarise this call"'),l("br",null)," or ",l("br",null),"Type ",l("i",null,`"Hey AI, what is today's agenda?"`))),this.messages.length>0&&l("div",{class:""},this.messages.map(t=>l("div",{class:"message"},l($h,{name:t.action,time:new Date(t.createdAt),now:new Date}),l("p",{class:"subtitle"},"Triggered by ",t.participantName),t.prompt&&l("div",{class:"prompt-text"},t.prompt),t.loading?l("div",{class:"loader"},l("dyte-spinner",{size:"sm"}),"  Generating..."):l("div",{class:"body"},t.response))))),l("div",{class:"actions"},l("span",null,"Quick actions:"),l("div",null,l("button",{onClick:this.handleSummarise},"Summarise"),l("button",{onClick:this.handleAgenda},"Agenda"),l("button",{onClick:this.handleMoM},"MoM"))),l("form",{class:"prompt",onSubmit:this.handleSubmit},l("input",{value:this.prompt,onInput:t=>{this.prompt=t.target.value},placeholder:"Type your prompt..."})))}static get watchers(){return{messages:["messagesUpdated"]}}};W3.style=zde;var Fde=Object.freeze({__proto__:null,dyte_ai_home:W3});const Vde=":host{display:block}",q3=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.variant="button",this.states=void 0,this.meeting=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.middlewares={},this.aiActive=!1}statesChanged(t){const e=t||L;this.aiActive=e.activeAI}toggleAI(){const t=this.states||L;this.aiActive=!(t!=null&&t.activeAI),this.stateUpdate.emit({activeAI:this.aiActive,activeMoreMenu:!1,activeSidebar:!1}),L.activeAI=this.aiActive,L.activeMoreMenu=!1}render(){const t=this.t("ai.meeting_ai");return this.middlewares.speech?l(O,{title:t},l("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.aiActive},onClick:()=>this.toggleAI(),icon:this.iconPack.meeting_ai,label:t,variant:this.variant,brandIcon:!0})):null}static get watchers(){return{states:["statesChanged"]}}};q3.style=Vde;var Bde=Object.freeze({__proto__:null,dyte_ai_toggle:q3});const Hde=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}*{box-sizing:border-box;border-width:0;border-style:solid}:host{width:100%;display:flex;flex-direction:column}.processing{display:flex;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center}.content{box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px);flex:1 0 0px;overflow-y:scroll}.started-message{margin-top:var(--dyte-space-5, 20px);margin-bottom:var(--dyte-space-5, 20px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.search-bar{height:var(--dyte-space-14, 56px);width:100%;border-bottom-width:var(--dyte-border-width-sm, 1px);--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));padding:var(--dyte-space-3, 12px)}input{height:100%;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-size:14px;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.caption-view{height:var(--dyte-space-12, 48px);width:100%;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));display:flex;align-items:center;justify-content:space-between;font-size:14px}.message .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;word-break:break-word}.message{margin-bottom:var(--dyte-space-3, 12px)}.message:last-child{margin-bottom:var(--dyte-space-0, 0px)}`,J3=class{constructor(t){U(this,t),this.participantQuery="",this.isProcessing=!1,this.captionViewEnabled=!1,this.t=j(),this.meeting=void 0,this.transcriptions=[],this.initialTranscriptions=void 0,this.middlewares={}}transcriptionHandler(t){this.transcriptions=[...this.transcriptions,t]}connectedCallback(){var t,e;this.initialTranscriptions&&(this.transcriptions=[...this.initialTranscriptions]),(e=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||e===void 0||e.on("transcription",i=>this.transcriptionHandler(i))}disconnectedCallback(){var t,e;(e=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||e===void 0||e.off("transcription",i=>this.transcriptionHandler(i))}transcriptionsChanged(){setTimeout(()=>{ro(this.contentContainer,!1)},100)}render(){return l(O,null,l("div",{class:"search-bar"},l("input",{type:"text",placeholder:"Search Participant",value:this.participantQuery,onInput:t=>this.participantQuery=t.target.value})),this.isProcessing&&l("div",{class:"processing"},l("p",null,"Processing audio....")),!this.isProcessing&&l("div",{class:"content scrollbar",ref:t=>this.contentContainer=t},l("div",{class:"started-message"},"Transcription started"),this.transcriptions.filter(t=>this.participantQuery?t.name.toLowerCase().includes(this.participantQuery.toLowerCase()):!0).map(t=>l("div",{class:"message"},l($h,{name:t.name,time:new Date(t.date),now:new Date}),l("div",{class:"body"},t.transcript)))),this.captionViewEnabled&&l("dyte-ai-caption",null))}static get watchers(){return{transcriptions:["transcriptionsChanged"]}}};J3.style=Hde;var Gde=Object.freeze({__proto__:null,dyte_ai_transcriptions:J3});const Wde=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;flex-direction:column}.avatar-ctr{box-sizing:border-box;width:100%;flex:1 1 0%;padding:var(--dyte-space-1\\.5, 6px);border:2px solid transparent;border-radius:calc(var(--dyte-border-radius-xl, 40px) + var(--dyte-space-1\\.5, 6px))}.avatar-ctr.speaking{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2);--tw-shadow:var(--tw-shadow-colored)}dyte-avatar{aspect-ratio:1 / 1;height:100%;width:100%;border-radius:var(--dyte-border-radius-xl, 40px)}dyte-name-tag{display:block;height:var(--dyte-space-10, 40px);width:100%;text-align:center;line-height:2.5rem}:host([size='sm']) .avatar-ctr{border-radius:calc(var(--dyte-border-radius-lg, 12px) + var(--dyte-space-1\\.5, 6px))}:host([size='sm']) dyte-name-tag{height:var(--dyte-space-7, 28px);line-height:1.75rem}:host([size='sm']) dyte-avatar{border-radius:var(--dyte-border-radius-lg, 12px)}.mic-icon{position:absolute;bottom:calc(var(--dyte-space-1, 4px) * -1);right:calc(var(--dyte-space-1, 4px) * -1);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.mic-icon dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}:host([size='sm']) .mic-icon dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='md']) .mic-icon dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}",K3=class{constructor(t){U(this,t),this.onAudioUpdate=()=>{this.participant&&(this.isSpeaking=this.participant.audioEnabled)},this.meeting=void 0,this.config=void 0,this.size=void 0,this.states=void 0,this.iconPack=N,this.t=j(),this.participant=void 0,this.isSpeaking=!1}connectedCallback(){this.participantChanged(this.participant)}disconnectedCallback(){var t;(t=this.participant)===null||t===void 0||t.removeListener("audioUpdate",this.onAudioUpdate)}participantChanged(t){t&&(this.isSpeaking=t.audioEnabled,t.addListener("audioUpdate",this.onAudioUpdate))}render(){const t={meeting:this.meeting,size:this.size,config:this.config,states:this.states,iconPack:this.iconPack,t:this.t};return l(O,null,l("div",{class:{"avatar-ctr":!0,speaking:this.isSpeaking}},l("dyte-avatar",{participant:this.participant,size:this.size},!this.isSpeaking&&l("div",{class:"mic-icon"},l("dyte-icon",{icon:N.mic_off})))),l("dyte-name-tag",Object.assign({variant:"text",participant:this.participant},t)),l("slot",null))}static get watchers(){return{participant:["participantChanged"]}}};K3.style=Wde;var qde=Object.freeze({__proto__:null,dyte_audio_tile:K3}),Pr=function(t,e,i,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,i):s?s.value=i:e.set(t,i),i},se=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Jde=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]]);return i},kr,Aa,Ts,xs,ac,Ar,Fa,Ps,Tp,xp,Y3,iv,Q3,Z3,Nd;class Kde{constructor(){kr.add(this),Aa.set(this,!1),Ts.set(this,void 0),xs.set(this,void 0),ac.set(this,void 0),Ar.set(this,void 0),Fa.set(this,void 0),Ps.set(this,void 0),Tp.set(this,void 0),xp.set(this,void 0)}get hasLocalChanges(){return se(this,Aa,"f")}get currentState(){let e,i=[];return Array.from(se(this,Ar,"f").keys()).forEach(r=>{const s=se(this,Ps,"f").get(r);s.isParent?e=Object.assign(Object.assign({},s),{participants:se(this,kr,"m",Nd).call(this,r)}):i.push(Object.assign(Object.assign({},s),{participants:se(this,kr,"m",Nd).call(this,r)}))}),{parentMeeting:e,meetings:i}}get allConnectedMeetings(){return this.currentState.meetings.sort((e,i)=>e.title.localeCompare(i.title))}get allParticipants(){return Array.from(se(this,Fa,"f").values())}get unassignedParticipants(){return se(this,kr,"m",Nd).call(this,se(this,Ts,"f").parentMeeting.id)}getParticipantsForMeeting(e){return se(this,kr,"m",Nd).call(this,e)}addNewMeeting(){Pr(this,Aa,!0,"f");const e=wae(),i=Jde(e,["participants"]);return se(this,kr,"m",iv).call(this,Object.assign(Object.assign({},i),{isParent:!1})),i}addNewMeetings(e){return Array.from({length:e}).map(()=>this.addNewMeeting())}updateMeetingTitle(e,i){se(this,Ps,"f").get(e).title=i,db(e)||se(this,Tp,"f").add(e)}deleteMeeting(e){Pr(this,Aa,!0,"f");const i=se(this,Ps,"f").get(e),r=se(this,kr,"m",Nd).call(this,i.id).map(Wt);this.assignParticipantsToMeeting(r,se(this,Ts,"f").parentMeeting.id),se(this,Ps,"f").delete(i.id),se(this,Ar,"f").delete(i.id),db(i.id)||se(this,xp,"f").add(i.id)}assignParticipantsToMeeting(e,i){return Pr(this,Aa,!0,"f"),e.forEach(r=>{const s=se(this,xs,"f").get(r);se(this,Ar,"f").get(s).delete(r),se(this,Ar,"f").get(i).add(r),se(this,xs,"f").set(r,i)}),this.currentState}assignParticipantsRandomly(){const e=_ae(this.unassignedParticipants,this.allConnectedMeetings.length);return this.allConnectedMeetings.forEach((i,r)=>{const s=e[r];s&&s.length!==0&&this.assignParticipantsToMeeting(s.map(n=>n.customParticipantId),i.id)}),this.currentState}unassignParticipants(e){const i=se(this,Ts,"f").parentMeeting.id;return this.assignParticipantsToMeeting(e,i)}unassignAllParticipants(){const e=se(this,Ts,"f").parentMeeting.id,i=this.allParticipants.map(Wt);return this.assignParticipantsToMeeting(i,e)}updateCurrentState(e){se(this,Aa,"f")||se(this,kr,"m",Y3).call(this,e),[e.parentMeeting,...e.meetings].forEach((i,r)=>{const s=Object.assign(Object.assign({},i),{isParent:r===0});se(this,kr,"m",iv).call(this,s),i.participants.forEach(n=>{se(this,kr,"m",Q3).call(this,n,s)})})}get meetingsToCreate(){return this.allConnectedMeetings.filter(e=>db(e.id)).map(({id:e,title:i})=>({id:e,title:i}))}get meetingsToUpdate(){return this.allConnectedMeetings.filter(e=>se(this,Tp,"f").has(e.id)).map(({id:e,title:i})=>({id:e,title:i}))}get meetingsToDelete(){return Array.from(se(this,xp,"f"))}get participantsToMove(){const e=new Map;return Array.from(se(this,xs,"f").keys()).forEach(i=>{const r=se(this,ac,"f").get(i),s=se(this,xs,"f").get(i);if(r===s)return;const n=`${r}__${s}`;e.has(n)||e.set(n,[]);const a=se(this,Fa,"f").get(i);e.get(n).push(a.id)}),Array.from(e.keys()).map(i=>{const[r,s]=i.split("__");return{sourceMeetingId:r,destinationMeetingId:s,participantIds:e.get(i)}})}async applyChanges(e){const i=this.meetingsToCreate.length!==0?e.connectedMeetings.createMeetings(this.meetingsToCreate):Promise.resolve([]),r=this.meetingsToUpdate.length!==0?e.connectedMeetings.updateMeetings(this.meetingsToUpdate):Promise.resolve(),[s]=await Promise.all([i,r]);s&&s.forEach(n=>{this.meetingsToCreate.forEach(a=>{a.title===n.title&&se(this,kr,"m",Z3).call(this,se(this,Ps,"f").get(a.id),n.id)})}),this.participantsToMove.length!==0&&this.participantsToMove.forEach(({sourceMeetingId:n,destinationMeetingId:a,participantIds:o})=>{e.connectedMeetings.moveParticipants(n,a,o)}),this.meetingsToDelete.length!==0&&e.connectedMeetings.deleteMeetings(this.meetingsToDelete)}discardChanges(){return Pr(this,Aa,!1,"f"),this.updateCurrentState(se(this,Ts,"f")),this.currentState}}Aa=new WeakMap,Ts=new WeakMap,xs=new WeakMap,ac=new WeakMap,Ar=new WeakMap,Fa=new WeakMap,Ps=new WeakMap,Tp=new WeakMap,xp=new WeakMap,kr=new WeakSet,Y3=function(e){Pr(this,Ts,e,"f"),Pr(this,Ps,new Map,"f"),Pr(this,Fa,new Map,"f"),Pr(this,Tp,new Set,"f"),Pr(this,xp,new Set,"f"),Pr(this,Ar,new Map,"f"),Pr(this,xs,new Map,"f"),Pr(this,ac,new Map,"f"),Pr(this,ac,new Map,"f"),se(this,Ts,"f").parentMeeting.participants.forEach(i=>{se(this,ac,"f").set(Wt(i),se(this,Ts,"f").parentMeeting.id)}),se(this,Ts,"f").meetings.forEach(i=>{i.participants.forEach(r=>{se(this,ac,"f").set(Wt(r),i.id)})})},iv=function(e){se(this,Ps,"f").has(e.id)||(se(this,Ps,"f").set(e.id,e),se(this,Ar,"f").set(e.id,new Set))},Q3=function(e,i){se(this,Fa,"f").has(Wt(e))||(se(this,Fa,"f").set(Wt(e),e),se(this,xs,"f").set(Wt(e),i.id),se(this,Ar,"f").get(i.id).add(Wt(e)))},Z3=function(e,i){const r=e.id;se(this,kr,"m",iv).call(this,Object.assign(Object.assign({},e),{id:i})),se(this,Ps,"f").delete(r);const s=se(this,Ar,"f").get(r);se(this,Ar,"f").set(i,s),se(this,Ar,"f").delete(r),Array.from(se(this,xs,"f").keys()).forEach(n=>{se(this,xs,"f").get(n)===r&&se(this,xs,"f").set(n,i)})},Nd=function(e){return Array.from(se(this,Ar,"f").get(e)).map(r=>se(this,Fa,"f").get(r))};const Yde=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.color-brand{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.color-danger{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.loading-content{height:var(--dyte-space-60, 240px);width:var(--dyte-space-96, 384px);padding:var(--dyte-space-9, 36px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;align-items:center;justify-content:center}.room-config{overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;flex-direction:column;width:var(--dyte-space-96, 384px);padding-left:var(--dyte-space-9, 36px);padding-right:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-10, 40px);padding-bottom:var(--dyte-space-10, 40px)}header{margin-bottom:var(--dyte-space-8, 32px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px);font-size:24px;font-weight:600}header dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}.create-room{margin-bottom:var(--dyte-space-4, 16px);display:flex;align-items:center;gap:var(--dyte-space-3, 12px);width:100%}.create-room p{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-1, 4px);font-size:16px}.distribution-hint{margin-bottom:var(--dyte-space-8, 32px);font-size:14px;font-weight:400;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.distribution-hint em{font-style:normal;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}footer{display:flex;flex-direction:row;vertical-align:middle;justify-content:center}footer dyte-button{width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}label{margin-bottom:var(--dyte-space-3, 12px);font-weight:400;color:rgb(var(--dyte-colors-text-1000, 255 255 255));opacity:0.4}.participant-config-wrapper{width:850px;height:595px;max-width:100%;max-height:100%;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;flex-direction:column}.participant-config-actions{display:flex;justify-content:space-between;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-5, 20px);padding-bottom:var(--dyte-space-5, 20px);border-bottom-right-radius:var(--dyte-border-radius-md, 8px);border-bottom-left-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.participant-config{display:flex;flex-grow:1;flex-direction:row;overflow:hidden}aside{box-sizing:border-box;display:flex;width:var(--dyte-space-96, 384px);flex-grow:1;flex-direction:column;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-4, 16px);border-right-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-right-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity))}aside header{margin-bottom:var(--dyte-space-4, 16px);width:100%;padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px);padding-top:var(--dyte-space-8, 32px);font-size:20px;font-weight:500;line-height:2rem}.shuffle-button{display:flex;flex-direction:row;align-items:center}.shuffle-button dyte-icon{height:var(--dyte-space-8, 32px)}.participants-assign-actions{display:flex;flex-direction:row;align-items:center;justify-content:space-between;font-size:14px;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-2, 8px);margin-left:calc(var(--dyte-space-8, 32px) * -1);margin-right:calc(var(--dyte-space-4, 16px) * -1);padding-top:var(--dyte-space-0\\.5, 2px);padding-bottom:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.participants-assign-actions .deselect-button{height:var(--dyte-space-6, 24px)}.participants-assign-actions .deselect-button:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.assign-rooms{padding:var(--dyte-space-8, 32px);display:flex;width:100%;flex-direction:column}.assign-rooms .disabled{opacity:0.2}.assign-rooms .back{display:flex;cursor:pointer;flex-direction:row;align-items:center;justify-content:flex-start;padding:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-0, 0px);font-size:14px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.assign-rooms .back dyte-icon{height:var(--dyte-space-5, 20px)}.assign-rooms .row{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}.assign-rooms .row-header{margin:var(--dyte-space-0, 0px);font-size:16px;line-height:2rem}.assign-rooms .cta-buttons{display:flex;align-items:center;justify-content:flex-start;gap:var(--dyte-space-2, 8px)}.assign-rooms .cta-buttons dyte-button div{display:flex;flex-direction:row;align-items:center}.assign-rooms .cta-buttons dyte-button div dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.rooms{margin-bottom:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-1, 4px);display:flex;flex-grow:1;flex-direction:column;gap:var(--dyte-space-2, 8px);overflow-y:auto;max-height:500px}.rooms::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px)}.rooms::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.rooms::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.breakout-actions{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}.breakout-actions .start-breakout-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.breakout-actions .close-breakout-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}.breakout-actions .update-breakout-button{background-color:transparent;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));border-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}.status-bar{display:flex;align-items:center;font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));width:var(--dyte-space-80, 320px)}.ephemeral-status{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.ephemeral-status dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.room-switcher-container{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));width:468px;padding:var(--dyte-space-8, 32px)}.add-room-jumbo-btn div{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.add-room-jumbo-btn div dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.br-primary-btn:not([disabled]){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-primary-btn:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-bg-opacity))}.br-secondary-btn:not([disabled]){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-secondary-btn:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}",Nu=1,X3=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.updateLocalState=e=>{this.stateManager.updateCurrentState(e),this.draftState=this.stateManager.currentState,this.meeting.connectedMeetings.isActive&&(this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{mode:"edit"})),this.roomConfig.mode==="create"&&!this.meeting.connectedMeetings.isActive&&bae(),["edit","view"].includes(this.roomConfig.mode)&&(this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{rooms:e.meetings.length,step:"participants-config"}),this.selectedParticipants=[])},this.onAddNewRoom=()=>{this.stateManager.addNewMeeting(),this.draftState=this.stateManager.currentState,this.selectorRef.scrollTo({top:this.selectorRef.scrollHeight,behavior:"smooth"})},this.onRoomUpdate=e=>{const{detail:i}=e;this.stateManager.updateMeetingTitle(i.id,i.title),this.draftState=this.stateManager.currentState},this.onRoomDelete=e=>{this.stateManager.allConnectedMeetings.find(r=>r.id===e)&&(this.stateManager.deleteMeeting(e),this.draftState=this.stateManager.currentState)},this.unassignParticipant=e=>{this.stateManager.unassignParticipants([e]),this.draftState=this.stateManager.currentState},this.onUnassignAll=()=>{this.stateManager.unassignAllParticipants(),this.draftState=this.stateManager.currentState},this.assignParticipantsToRoom=e=>{this.selectedParticipants.length===0||this.assigningParticipants==!1||(this.stateManager.assignParticipantsToMeeting(this.selectedParticipants,e),this.draftState=this.stateManager.currentState,this.selectedParticipants=[],this.assigningParticipants=!1,this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.participants_assigned")))},this.handleClose=(e,i)=>{e.emit({activeBreakoutRoomsManager:{active:!0}}),i.activeBreakoutRoomsManager={active:!0}},this.enableConfirmationModal=(e="start-breakout")=>{let i={active:!0,header:"breakout_rooms.confirm_modal.start_breakout.header",content:"breakout_rooms.confirm_modal.start_breakout.content",variant:"primary",cancelText:"breakout_rooms.confirm_modal.start_breakout.cancelText",ctaText:"breakout_rooms.confirm_modal.start_breakout.ctaText",onClick:()=>this.applyChanges(),onClose:this.handleClose};e==="close-breakout"&&(i={active:!0,header:"breakout_rooms.confirm_modal.close_breakout.header",content:"breakout_rooms.confirm_modal.close_breakout.content",variant:"danger",cancelText:"cancel",ctaText:"breakout_rooms.confirm_modal.close_breakout.ctaText",onClick:()=>this.closeBreakout(),onClose:this.handleClose}),this.stateUpdate.emit({activeBreakoutRoomsManager:{active:!1},activeConfirmationModal:i}),L.activeBreakoutRoomsManager={active:!1},L.activeConfirmationModal=i},this.close=()=>{var e;this.stateManager.discardChanges(),(e=this.stateUpdate)===null||e===void 0||e.emit({activeBreakoutRoomsManager:{active:!1}}),L.activeBreakoutRoomsManager={active:!1}},this.applyChanges=async()=>{this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{applyingChanges:!0}),await this.stateManager.applyChanges(this.meeting),this.close(),this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{applyingChanges:!1})},this.loading=!1,this.roomConfig={rooms:2,step:"room-config",mode:"create",applyingChanges:!1},this.draftState=void 0,this.assigningParticipants=!1,this.selectedParticipants=[],this.ephemeralStatusText="",this.isDragMode=!1,this.meeting=void 0,this.states=void 0,this.iconPack=N,this.t=j()}onSelectedParticipantsChanged(t){t.length>0?this.assigningParticipants=!0:this.assigningParticipants=!1}connectedCallback(){this.permissions=this.meeting.self.permissions.connectedMeetings,this.meeting.connectedMeetings.on("stateUpdate",this.updateLocalState),this.meeting.connectedMeetings.on("changingMeeting",this.close),this.stateManager=new Kde,this.fetchRoomState()}disconnectedCallback(){this.meeting.connectedMeetings.off("stateUpdate",this.updateLocalState),this.meeting.connectedMeetings.off("changingMeeting",this.close)}async fetchRoomState(){this.loading=!0,await this.meeting.connectedMeetings.getConnectedMeetings(),this.loading=!1}setEphemeralStatus(t){this.ephemeralStatusText=t,setTimeout(()=>{this.ephemeralStatusText=""},3e3)}onCreateRooms(){this.selectedParticipants=[],this.stateManager.addNewMeetings(this.roomConfig.rooms),this.draftState=this.stateManager.currentState,this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{step:"participants-config"})}onParticipantDelete(t){const{detail:e}=t,i=Wt(e);i!=null&&this.unassignParticipant(i)}toggleDragMode(t){this.isDragMode=t.detail}assignParticipantsRandomly(){this.stateManager.unassignedParticipants.length!==0&&(this.stateManager.assignParticipantsRandomly(),this.draftState=this.stateManager.currentState,this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.participants_assigned_randomly")))}async joinRoom(t){const e=Wt(this.meeting.self);this.stateManager.assignParticipantsToMeeting([e],t),await this.applyChanges()}async closeBreakout(){this.stateManager.allConnectedMeetings.forEach(t=>this.stateManager.deleteMeeting(t.id)),await this.applyChanges()}updateSelectedParticipants(t){this.selectedParticipants=t.detail}updateAllParticipants(t){this.selectedParticipants=t.detail}getStatusText(){if(this.ephemeralStatusText!=="")return this.ephemeralStatusText;let t="";return this.roomConfig.mode==="create"&&(t=this.t("breakout_rooms.status.assign_multiple"),this.selectedParticipants.length!==0&&(t=this.t("breakout_rooms.status.select_room"))),t}getApproxDistribution(){const t=this.stateManager.unassignedParticipants.length/(this.roomConfig.rooms||Nu);return Math.max(Nu,Math.round(t))}deselectAll(){this.selectedParticipants=[]}async discardChanges(){this.stateManager.discardChanges(),await this.fetchRoomState(),this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.changes_discarded"))}shouldShowOnlyRoomSwitcher(){return this.permissions.canAlterConnectedMeetings===!1}getPermittedRooms(){return this.permissions.canAlterConnectedMeetings||this.permissions.canSwitchConnectedMeetings?this.stateManager.allConnectedMeetings:this.stateManager.allConnectedMeetings.filter(t=>t.id===this.meeting.meta.roomName)}renderMainRoomMaybe(){return this.meeting.connectedMeetings.isActive&&this.permissions.canSwitchToParentMeeting?l("dyte-breakout-room-manager",{key:this.stateManager.currentState.parentMeeting.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,meeting:this.meeting,mode:this.roomConfig.mode,onParticipantsAdd:()=>this.assignParticipantsToRoom(this.stateManager.currentState.parentMeeting.id),onRoomJoin:()=>this.joinRoom(this.stateManager.currentState.parentMeeting.id),onUpdate:this.onRoomUpdate,states:this.states,room:Object.assign({},this.stateManager.currentState.parentMeeting),iconPack:this.iconPack,t:this.t}):null}renderRoomSwitcher(){return l(O,null,l("div",{class:"room-switcher-container"},l("header",null,l("dyte-icon",{icon:this.iconPack.breakout_rooms}),l("span",null,this.t("breakout_rooms.join_breakout_header"))),l("div",{class:"rooms",ref:t=>this.selectorRef=t},this.renderMainRoomMaybe(),this.getPermittedRooms().map((t,e)=>l("dyte-breakout-room-manager",{key:t.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,defaultExpanded:e===0,meeting:this.meeting,mode:this.roomConfig.mode,onDelete:()=>this.onRoomDelete(t.id),onParticipantsAdd:()=>this.assignParticipantsToRoom(t.id),onRoomJoin:()=>this.joinRoom(t.id),states:this.states,room:Object.assign({},t),iconPack:this.iconPack,t:this.t,allowDelete:!1})))))}renderLoading(){return l(O,null,l("div",{class:"loading-content"},l("dyte-spinner",{size:"xl"})))}renderRoomConfig(){return l(O,null,l("div",{class:"room-config"},l("header",null,l("dyte-icon",{icon:this.iconPack.breakout_rooms}),l("span",null,this.t("breakout_rooms.room_config_header"))),l("div",{class:"create-room"},l("p",null,this.t("breakout_rooms.num_of_rooms")),l("dyte-counter",{value:this.roomConfig.rooms,minValue:Nu,iconPack:this.iconPack,t:this.t,onValueChange:t=>{this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{rooms:Math.max(+t.detail,Nu)})}})),l("span",{class:"distribution-hint"},`${this.t("breakout_rooms.approx")} `," ",l("em",null,this.getApproxDistribution()," ",this.t("breakout_rooms.participants_per_room"))," ",this.t("breakout_rooms.division_text")),l("footer",null,l("dyte-button",{kind:"button",iconPack:this.iconPack,t:this.t,size:"lg",title:this.t("create"),disabled:this.roomConfig.rooms===0,onClick:()=>this.onCreateRooms()},this.t("create")))))}render(){return this.loading?this.renderLoading():this.shouldShowOnlyRoomSwitcher()?this.renderRoomSwitcher():this.roomConfig.step==="room-config"?this.renderRoomConfig():l(O,null,l("div",{class:"participant-config-wrapper"},l("div",{class:"participant-config"},l("aside",{part:"menu"},l("header",null,this.t("breakout_rooms.assign_participants")),l("dyte-breakout-room-participants",{meeting:this.meeting,iconPack:this.iconPack,t:this.t,participantIds:this.stateManager.unassignedParticipants.map(Wt),selectedParticipantIds:this.selectedParticipants},l("dyte-tooltip",{label:this.t("breakout_rooms.shuffle_participants"),iconPack:this.iconPack,t:this.t,slot:"shuffle-button"},l("dyte-button",{disabled:this.roomConfig.mode==="edit"||this.stateManager.unassignedParticipants.length===0,iconPack:this.iconPack,t:this.t,kind:"button",variant:"secondary",size:"md",onClick:()=>this.assignParticipantsRandomly(),class:"shuffle-button br-primary-btn"},l("dyte-icon",{icon:this.iconPack.shuffle,iconPack:this.iconPack,t:this.t})))),this.selectedParticipants.length!==0&&l("div",{class:"participants-assign-actions"},l("span",null,`${this.selectedParticipants.length} ${this.t("breakout_rooms.selected")}`),l("dyte-button",{disabled:this.roomConfig.mode==="edit",iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",size:"md",onClick:()=>this.deselectAll(),class:"deselect-button color-danger"},this.t("breakout_rooms.deselect")))),l("div",{class:"assign-rooms"},l("div",{class:"row"},l("p",{class:"row-header"},this.t("breakout_rooms.rooms")," (",this.stateManager.allConnectedMeetings.length,")"),!this.assigningParticipants&&l("div",{class:"cta-buttons"},l("dyte-button",{kind:"button",variant:"secondary",iconPack:this.iconPack,t:this.t,class:"br-primary-btn"},l("div",{onClick:this.onAddNewRoom},l("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}),this.t("breakout_rooms.add_room"))),this.stateManager.allConnectedMeetings.flatMap(t=>t.participants).length!==0&&l("dyte-button",{kind:"button",variant:"ghost",onClick:this.onUnassignAll,iconPack:this.iconPack,t:this.t},this.t("breakout_rooms.unassign_all")))),l("div",{class:"rooms",ref:t=>this.selectorRef=t},this.renderMainRoomMaybe(),this.getPermittedRooms().map((t,e)=>l("dyte-breakout-room-manager",{key:t.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,defaultExpanded:e===0,meeting:this.meeting,mode:this.roomConfig.mode,onDelete:()=>this.onRoomDelete(t.id),onParticipantsAdd:()=>this.assignParticipantsToRoom(t.id),onRoomJoin:()=>this.joinRoom(t.id),onUpdate:this.onRoomUpdate,states:this.states,room:Object.assign({},t),iconPack:this.iconPack,t:this.t,allowDelete:this.stateManager.allConnectedMeetings.length>Nu})),l("dyte-button",{kind:"button",variant:"secondary",iconPack:this.iconPack,t:this.t,onClick:this.onAddNewRoom,class:"add-room-jumbo-btn br-secondary-btn"},l("div",null,l("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}),l("span",null,this.t("breakout_rooms.add_room_brief"))))))),l("div",{class:"participant-config-actions"},l("div",{class:{"status-bar":!0,"ephemeral-status":this.ephemeralStatusText!==""}},this.ephemeralStatusText!==""&&l("dyte-icon",{icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t}),this.getStatusText()),l("div",{class:"breakout-actions"},this.roomConfig.mode==="create"&&this.permissions.canAlterConnectedMeetings&&l("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"start-breakout-button",onClick:()=>this.enableConfirmationModal("start-breakout")},this.t("breakout_rooms.start_breakout")),this.roomConfig.mode==="edit"&&this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&l("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"color-danger",variant:"ghost",onClick:()=>this.discardChanges()},this.t("breakout_rooms.discard_changes")),this.roomConfig.mode==="edit"&&this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&l("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"update-breakout-button",onClick:this.applyChanges},this.t("breakout_rooms.update_breakout")),this.roomConfig.mode==="edit"&&!this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&l("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"close-breakout-button",onClick:()=>this.enableConfirmationModal("close-breakout")},this.t("breakout_rooms.close_breakout"))))))}static get watchers(){return{selectedParticipants:["onSelectedParticipantsChanged"]}}};X3.style=Yde;var Qde=Object.freeze({__proto__:null,dyte_breakout_rooms_manager:X3});const Zde=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",eD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.breakoutRoomToggle=()=>{var e,i,r;const s=this.meeting.connectedMeetings.isActive?"view":"create";this.stateUpdate.emit({activeBreakoutRoomsManager:{active:!(!((i=(e=this.states)===null||e===void 0?void 0:e.activeBreakoutRoomsManager)===null||i===void 0)&&i.active),mode:s}}),L.activeBreakoutRoomsManager={active:!(!((r=L.activeBreakoutRoomsManager)===null||r===void 0)&&r.active),mode:s}},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j()}render(){if(p3(this.meeting))return l(O,{title:this.t("breakout_rooms")},l("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.breakoutRoomToggle,icon:this.iconPack.breakout_rooms,label:this.t("breakout_rooms"),variant:this.variant}))}};eD.style=Zde;var Xde=Object.freeze({__proto__:null,dyte_breakout_rooms_toggle:eD});const ele=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);padding:var(--dyte-space-4, 16px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));width:400px;max-width:80%}.content-col{display:flex;width:100%;flex-direction:column}h2{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-2, 8px)}.content-row{display:flex;width:100%;flex-direction:row}.content-row dyte-button{margin-top:var(--dyte-space-4, 16px);width:100%}textarea{margin-top:var(--dyte-space-3, 12px);resize:none;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;font-family:var(--dyte-font-family, sans-serif);outline:2px solid transparent;outline-offset:2px;height:var(--dyte-space-16, 64px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}textarea::placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}select{border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);outline:2px solid transparent;outline-offset:2px;border-right-width:var(--dyte-border-width-md, 2px);border-style:solid;border-color:transparent;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}p{margin:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-2, 8px);width:100%;text-align:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));display:flex;flex-direction:row;align-items:center;justify-content:center}p dyte-icon{margin-left:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px)}",tD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.meeting=void 0,this.states=void 0,this.iconPack=N,this.t=j(),this.messagePayload={to:"Everyone",message:""},this.successMessage=!1}close(){var t;(t=this.stateUpdate)===null||t===void 0||t.emit({activeBroadcastMessageModal:!1}),L.activeBroadcastMessageModal=!1}sendMessage(){this.successMessage=!0,setTimeout(()=>{this.close()},2e3)}render(){return l(O,null,l("div",{class:"content-col"},l("h2",null,"Broadcast message to"),l("select",{onChange:t=>{this.messagePayload=Object.assign(Object.assign({},this.messagePayload),{to:t.target.value})}},l("option",null,"Everyone"),l("option",null,"List of rooms")),l("textarea",{placeholder:"Type message here...",onInput:t=>{this.messagePayload=Object.assign(Object.assign({},this.messagePayload),{message:t.target.value})}}),this.successMessage?l("p",null,"Message sent to ",this.messagePayload.to,l("dyte-icon",{icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t})):l("div",{class:"content-row"},l("dyte-button",{onClick:()=>this.close(),variant:"secondary",iconPack:this.iconPack,t:this.t},"Cancel")," ",l("dyte-button",{variant:"primary",onClick:()=>this.sendMessage(),iconPack:this.iconPack,t:this.t},"Send"))))}};tD.style=ele;var tle=Object.freeze({__proto__:null,dyte_broadcast_message_modal:tD});const ile=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",iD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.videoUpdateListener=({videoEnabled:e})=>{this.videoEnabled=e},this.selfJoinStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStateLeftListener=()=>{this.canProduceVideo=!1},this.mediaPermissionUpdateListener=({kind:e,message:i})=>{e==="video"&&(this.cameraPermission=i)},this.toggleCamera=()=>{var e,i,r,s,n,a,o,c,d,u,p,g;if((e=this.meeting)===null||e===void 0||e.__internals__.logger.info("dyteCameraToggle::toggleCamera",{media:{video:{enabled:!!(!((r=(i=this.meeting)===null||i===void 0?void 0:i.self)===null||r===void 0)&&r.videoEnabled),permission:this.cameraPermission,canProduce:(a=(n=(s=this.meeting)===null||s===void 0?void 0:s.self)===null||n===void 0?void 0:n.permissions)===null||a===void 0?void 0:a.canProduceVideo}},webinar:{stageStatus:(c=(o=this.meeting)===null||o===void 0?void 0:o.self)===null||c===void 0?void 0:c.webinarStageStatus},livestream:{stageStatus:(u=(d=this.meeting)===null||d===void 0?void 0:d.stage)===null||u===void 0?void 0:u.status},moduleExists:{self:!!(!((p=this.meeting)===null||p===void 0)&&p.self)}}),this.hasPermissionError()){const f={enabled:!0,kind:"video"};return this.stateUpdate.emit({activePermissionsMessage:f}),L.activePermissionsMessage=f,!1}const m=(g=this.meeting)===null||g===void 0?void 0:g.self;m==null||!this.canProduceVideo||(m.videoEnabled?m.disableVideo():m.enableVideo())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.videoEnabled=!1,this.canProduceVideo=!1,this.cameraPermission="NOT_REQUESTED"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,r,s,n,a,o,c;(t=this.meeting)===null||t===void 0||t.self.removeListener("videoUpdate",this.videoUpdateListener),(e=this.meeting)===null||e===void 0||e.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("joinStageRequestAccepted",this.selfJoinStateListener),(r=this.meeting)===null||r===void 0||r.self.removeListener("joinStageRequestRejected",this.selfJoinStateListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("stageJoined",this.selfJoinStateListener),(n=this.meeting)===null||n===void 0||n.self.removeListener("stageLeft",this.selfStateLeftListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("removedFromStage",this.selfJoinStateListener),(c=(o=this.meeting)===null||o===void 0?void 0:o.stage)===null||c===void 0||c.removeListener("stageStatusUpdate",this.selfJoinStateListener)}meetingChanged(t){if(t!=null){const{self:e,stage:i}=t;this.updateCanProduce(t),this.cameraPermission=e.mediaPermissions.video||"NOT_REQUESTED",this.videoEnabled=e.videoEnabled,e.addListener("videoUpdate",this.videoUpdateListener),e.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),e.addListener("joinStageRequestAccepted",this.selfJoinStateListener),e.addListener("joinStageRequestRejected",this.selfJoinStateListener),e.addListener("stageJoined",this.selfJoinStateListener),e.addListener("stageLeft",this.selfStateLeftListener),e.addListener("removedFromStage",this.selfJoinStateListener),i==null||i.addListener("stageStatusUpdate",this.selfJoinStateListener)}}updateCanProduce(t){const{self:e,meta:i,stage:r}=t,s=e.permissions.canProduceVideo==="ALLOWED",n=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canProduceVideo=!1,s&&!a?this.canProduceVideo=!0:(n||a)&&(s&&r.status!=="OFF_STAGE"&&r.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canProduceVideo=!0),e.permissions.canProduceVideo==="CAN_REQUEST"&&(n&&(e.webinarStageStatus==="ON_STAGE"||e.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canProduceVideo=!0))}hasPermissionError(){return this.cameraPermission==="DENIED"||this.cameraPermission==="SYSTEM_DENIED"}getState(){let t="",e="",i="",r={},s=this.hasPermissionError(),n=this.cameraPermission==="COULD_NOT_START";return this.videoEnabled&&!s?(e=this.t("video_on"),i=this.iconPack.video_on):(e=this.t("video_off"),i=this.iconPack.video_off,r["red-icon"]=!0),n?t=this.t("perm_could_not_start.video"):this.cameraPermission==="SYSTEM_DENIED"?t=this.t("perm_sys_denied.video"):this.cameraPermission==="DENIED"?t=this.t("perm_denied.video"):t=this.videoEnabled?this.t("disable_video"):this.t("enable_video"),{tooltipLabel:t,label:e,icon:i,classList:r,showWarning:s||n,disable:s}}render(){var t;if(!this.canProduceVideo||((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="AUDIO_ROOM")return null;const{tooltipLabel:e,label:i,icon:r,classList:s,showWarning:n,disable:a}=this.getState();return l(O,{title:i},l("dyte-tooltip",{kind:"block",label:e,part:"tooltip",iconPack:this.iconPack,t:this.t},l("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:s,variant:this.variant,label:i,icon:r,onClick:this.toggleCamera,showWarning:n,disabled:a})))}static get watchers(){return{meeting:["meetingChanged"]}}};iD.style=ile;var rle=Object.freeze({__proto__:null,dyte_camera_toggle:iD});const sle=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;flex-direction:column;width:var(--dyte-space-96, 384px);padding-left:var(--dyte-space-9, 36px);padding-right:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-10, 40px);padding-bottom:var(--dyte-space-10, 40px)}header{margin-bottom:var(--dyte-space-8, 32px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px);font-size:24px;font-weight:600}.channel-name-input{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-3, 12px);font-size:16px;-webkit-appearance:none;-moz-appearance:none;appearance:none;line-height:1.25;outline:2px solid transparent;outline-offset:2px}.channel-name-input:focus{outline-width:2px;outline-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}footer{margin-top:var(--dyte-space-5, 20px);display:flex;justify-content:flex-end}.member{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding:var(--dyte-space-2, 8px)}.member dyte-avatar{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.input-container{position:relative;-webkit-appearance:none;-moz-appearance:none;appearance:none;line-height:1.25;outline:2px solid transparent;outline-offset:2px;outline-width:2px;outline-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5);border-radius:var(--dyte-border-radius-sm, 4px)}.input-container .members{margin:var(--dyte-space-0, 0px);max-height:var(--dyte-space-28, 112px);border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);list-style-type:none;display:flex;flex-wrap:wrap;gap:var(--dyte-space-1, 4px);cursor:text;font-size:16px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));overflow-y:auto;min-height:var(--dyte-space-7, 28px)}.input-container .pill{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.input-container .pill dyte-avatar{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);font-size:14px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.input-container .pill span{max-width:var(--dyte-space-32, 128px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.input-container .pill dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);cursor:pointer}.input-container input{width:var(--dyte-space-24, 96px);border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-1, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;font-size:16px;line-height:1.25rem}.input-container input.wide-input{width:100%}.search-results{margin:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-1, 4px);max-height:var(--dyte-space-28, 112px);width:100%;padding:var(--dyte-space-0, 0px);position:absolute;list-style-type:none;overflow-y:auto;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-md, 8px);--tw-border-spacing-x:var(--dyte-space-2, 8px);--tw-border-spacing-y:var(--dyte-space-2, 8px);border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-style:solid;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.search-results .member{cursor:pointer}.search-results .member dyte-avatar{color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.search-results .member:hover,.search-results .member.selected{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-700, 2 70 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}`,rD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.switchChannel=K(this,"switchChannel",7),this.allMembers=new Map,this.inputTextRef=null,this.searchInputTextRef=null,this.focusOnSearch=(e=!1)=>{this.focusedMemberIndex=-1,Li(()=>{var i,r;(i=this.searchInputTextRef)===null||i===void 0||i.focus(),e&&((r=this.searchInputTextRef)===null||r===void 0||r.select())})},this.onClickHandler=async()=>{if(this.channelName.length!==0){if(this.step===1){const e=this.meeting.participants.all.toArray(),i=this.meeting.self.userId;e.filter(s=>s.userId!==i).forEach(s=>this.allMembers.set(s.userId,s)),this.step=2,this.focusOnSearch();return}await this.createChannel()}},this.createChannel=async()=>{const e=Array.from(this.selectedMemberIds),i=await this.meeting.chat.createChannel(this.channelName,e,{displayPictureUrl:"",visibility:"public",isDirectMessage:!1});this.switchChannel.emit(i.id),this.stateUpdate.emit({activeChannelCreator:!1}),L.activeChannelCreator=!1},this.onMemberAdd=e=>{this.showAllMembersList=!1,this.selectedMemberIds.add(e),this.searchQuery="",this.focusOnSearch()},this.keyDownHandler=(e,i)=>{if(e.key==="ArrowDown")this.focusedMemberIndex=Math.min(this.focusedMemberIndex+1,i.length-1);else if(e.key==="ArrowUp"){if(this.focusedMemberIndex===-1)return;if(this.focusedMemberIndex===0){this.focusOnSearch(!0);return}this.focusedMemberIndex=Math.max(this.focusedMemberIndex-1,0)}else if(e.key==="Enter")this.onMemberAdd(i[this.focusedMemberIndex].userId);else if(e.key==="Backspace"){if(this.searchQuery.length!==0||this.selectedMemberIds.size===0)return;const r=Array.from(this.selectedMemberIds.values()).at(-1);this.selectedMemberIds.delete(r),qf(this.$el)}},this.renderMemberSelector=()=>{const e=Array.from(this.allMembers.values()).filter(s=>!this.selectedMemberIds.has(s.userId)&&s.name.toLowerCase().includes(this.searchQuery.toLowerCase())),i=Array.from(this.selectedMemberIds.values()).map(s=>this.allMembers.get(s)),r=this.selectedMemberIds.size===this.allMembers.size;return l("div",{class:"input-container"},l("ul",{class:"members scrollbar",onClick:()=>{var s;(s=this.searchInputTextRef)===null||s===void 0||s.focus()}},i.map(s=>l("li",{class:"pill"},l("dyte-avatar",{participant:{name:s.name,picture:s.picture},size:"sm"}),l("span",null,s.name),l("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t,onClick:()=>{this.selectedMemberIds.delete(s.userId),qf(this.$el),this.focusOnSearch()}}))),!r&&l("input",{type:"text",ref:s=>this.searchInputTextRef=s,value:this.searchQuery,placeholder:this.selectedMemberIds.size===0?this.t("chat.member_name"):"",class:{"wide-input":this.selectedMemberIds.size===0},onInput:s=>{this.searchQuery=s.target.value.trim()},onClick:()=>{this.showAllMembersList=!this.showAllMembersList},onKeyDown:s=>this.keyDownHandler(s,e)})),(this.searchQuery.length!==0||this.showAllMembersList)&&l("ul",{class:"search-results"},e.map((s,n)=>l("li",{class:{member:!0,selected:n===this.focusedMemberIndex},onClick:()=>this.onMemberAdd(s.userId),ref:a=>{n===this.focusedMemberIndex&&Li(()=>{a&&a.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})})}},l("dyte-avatar",{participant:{name:s.name,picture:s.picture},size:"sm"}),l("span",null,s.name))),e.length===0&&l("li",{class:"member"},l("span",null,this.t("chat.error.empty_results")))))},this.meeting=void 0,this.t=j(),this.iconPack=N,this.channelName="",this.searchQuery="",this.step=1,this.loading=!1,this.selectedMemberIds=new Set,this.focusedMemberIndex=-1,this.showAllMembersList=!1}componentDidLoad(){var t;(t=this.inputTextRef)===null||t===void 0||t.focus()}render(){return l(O,null,l("header",null,this.step===1?this.t("chat.new_channel"):this.t("chat.add_members")),this.step===1&&l("input",{class:"channel-name-input",type:"text",placeholder:this.t("chat.channel_name"),ref:t=>this.inputTextRef=t,onInput:t=>{this.channelName=t.target.value.trim()}}),this.step===2&&this.renderMemberSelector(),l("footer",null,l("dyte-button",{kind:"button",iconPack:this.iconPack,t:this.t,size:"lg",disabled:this.channelName.length===0,onClick:this.onClickHandler},this.step===1?this.t("chat.add_members"):this.t("create"))))}get $el(){return jr(this)}};rD.style=sle;var nle=Object.freeze({__proto__:null,dyte_channel_creator:rD});const Lw=t=>{if(t&&!t.chat)return!1;const e=t==null?void 0:t.self.config;if(e&&!e.controlBar.elements.chat)return!1;const{chatPublic:i,chatPrivate:r}=t.self.permissions;return i.canSend||i.text||i.files||r.canSend||r.canReceive||r.files||r.text},Nw=t=>{if(t&&!t.polls)return!1;const e=t==null?void 0:t.self.config;if(e&&!e.controlBar.elements.polls)return!1;const{polls:i}=t.self.permissions;return i.canCreate||i.canView||i.canVote},Uw=t=>{var e,i,r;if(t!=null&&t.__internals__.features.hasFeature(Yf.FEAT_PARTICIPANT_LIST)&&!(!((e=t.self.permissions)===null||e===void 0)&&e.showParticipantList)||bn(t)&&!(!((i=t.self.permissions)===null||i===void 0)&&i.acceptPresentRequests)||t&&!t.participants)return!1;if(t.meta.viewType==="LIVESTREAM")return t.self.permissions.acceptPresentRequests||((r=t==null?void 0:t.stage)===null||r===void 0?void 0:r.status)==="ON_STAGE";const s=t==null?void 0:t.self.config;return!(s&&!s.controlBar.elements.participants)},jw=t=>{if(ch(t)||t&&!t.plugins)return!1;if(t.meta.viewType==="LIVESTREAM")return t.stage.status==="ON_STAGE";const e=t==null?void 0:t.self.config;if(e&&!e.controlBar.elements.plugins)return!1;const{plugins:i}=t.self.permissions;return i.canClose||i.canStart},ale=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}.unread-count-dot{position:absolute;right:var(--dyte-space-3, 12px);z-index:10;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));border-radius:50%;display:flex;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);align-items:center;justify-content:center}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .unread-count{right:var(--dyte-space-4, 16px);top:auto}",sD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.onChatUpdate=({action:e,message:i})=>{var r;this.chatActive||e==="add"&&i.userId!==((r=this.meeting)===null||r===void 0?void 0:r.self.userId)&&(this.hasNewMessages=!0,this.unreadMessageCount+=1)},this.toggleChat=()=>{const e=this.states||L;this.chatActive=!(e!=null&&e.activeSidebar&&(e==null?void 0:e.sidebar)==="chat"),this.chatActive&&(this.unreadMessageCount=0,this.hasNewMessages=!1),L.activeSidebar=this.chatActive,L.activeMoreMenu=!1,L.sidebar=this.chatActive?"chat":void 0,this.stateUpdate.emit({activeSidebar:this.chatActive,sidebar:this.chatActive?"chat":void 0,activeMoreMenu:!1,activeAI:!1})},this.updateCanView=()=>{this.canViewChat=Lw(this.meeting)},this.unreadMessageCount=0,this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.chatActive=!1,this.canViewChat=!1,this.hasNewMessages=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),Ql("sidebar",()=>this.statesChanged())}disconnectedCallback(){var t,e,i,r;(e=(t=this.meeting)===null||t===void 0?void 0:t.chat)===null||e===void 0||e.removeListener("chatUpdate",this.onChatUpdate),(r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0||r.removeListener("stageStatusUpdate",this.updateCanView)}meetingChanged(t){var e,i,r,s;t!=null&&(Qf(t)&&((e=t.chat)===null||e===void 0||e.getMessages(new Date().getTime(),1,!0).then(n=>{var a;!((a=n==null?void 0:n.messages)===null||a===void 0)&&a.length&&(this.hasNewMessages=!0)})),this.unreadMessageCount=((i=t.chat)===null||i===void 0?void 0:i.messages.length)||0,(r=t.chat)===null||r===void 0||r.addListener("chatUpdate",this.onChatUpdate),this.canViewChat=Lw(t),(s=t==null?void 0:t.stage)===null||s===void 0||s.on("stageStatusUpdate",this.updateCanView))}statesChanged(t){const e=t||L;e!=null&&(this.chatActive=e.activeSidebar===!0&&e.sidebar==="chat")}render(){if(this.canViewChat)return l(O,{title:this.t("chat")},Qf(this.meeting)?this.hasNewMessages&&l("div",{class:"unread-count-dot",part:"unread-count-dot"}):this.unreadMessageCount!==0&&!this.chatActive&&l("div",{class:"unread-count",part:"unread-count"},l("span",null,this.unreadMessageCount<=100?this.unreadMessageCount:"99+")),l("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.chatActive},onClick:this.toggleChat,icon:this.iconPack.chat,label:this.t("chat"),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};sD.style=ale;var ole=Object.freeze({__proto__:null,dyte_chat_toggle:sD});const cle=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;align-items:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-variant-numeric:tabular-nums}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",hb=t=>Math.trunc(t).toString().padStart(2,"0"),nD=class{constructor(t){U(this,t),this.disconnectMeeting=()=>{var e,i;this.timeout&&clearTimeout(this.timeout),typeof this.request=="number"&&cancelAnimationFrame(this.request),(i=(e=this.meeting)===null||e===void 0?void 0:e.meta)===null||i===void 0||i.removeListener("meetingStartTimeUpdate",this.startedTimeUpdateListener)},this.startedTimeUpdateListener=()=>{var e,i,r;this.startedTime=(r=(i=(e=this.meeting)===null||e===void 0?void 0:e.meta)===null||i===void 0?void 0:i.meetingStartedTimestamp)===null||r===void 0?void 0:r.toISOString()},this.meeting=void 0,this.iconPack=N,this.t=j(),this.startedTime=void 0,this.timeDiff=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting()}meetingChanged(t){var e,i,r;this.disconnectMeeting(),t!=null&&(this.startedTime=(i=(e=t.meta)===null||e===void 0?void 0:e.meetingStartedTimestamp)===null||i===void 0?void 0:i.toISOString(),(r=t.meta)===null||r===void 0||r.addListener("meetingStartTimeUpdate",this.startedTimeUpdateListener))}startedTimeChanged(t){if(t!==void 0){const e=()=>{this.timeDiff=(Date.now()-new Date(this.startedTime).getTime())/1e3,this.timeout=setTimeout(()=>{this.request!=null&&(this.request=requestAnimationFrame(e))},500)};this.request=requestAnimationFrame(e)}}getFormattedTime(){if(this.timeDiff==null)return null;const t=this.timeDiff;let e="";return t>=3600&&(e=`${hb(t/3600)}:`),e+=`${hb(t%3600/60)}:${hb(t%60)}`,e}render(){return l(O,{tabIndex:0,role:"timer","aria-live":"off"},this.startedTime!==void 0&&[l("dyte-icon",{icon:this.iconPack.clock,"aria-hidden":!0,tabIndex:-1,part:"icon",iconPack:this.iconPack,t:this.t}),l("span",{part:"text"},this.getFormattedTime())])}static get watchers(){return{meeting:["meetingChanged"],startedTime:["startedTimeChanged"]}}};nD.style=cle;var dle=Object.freeze({__proto__:null,dyte_clock:nD});const lle=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);padding:var(--dyte-space-8, 32px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));width:400px;max-width:80%}.leave-modal{width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px)}.leave-modal .content{font-size:14px}.leave-message p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px)}.leave-meeting{display:flex;flex-direction:row;justify-content:space-between;gap:var(--dyte-space-4, 16px)}.leave-meeting dyte-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255));flex:1 1 0%}.end-meeting{margin-top:var(--dyte-space-2, 8px)}.br-secondary-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-secondary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}",aD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.keyPressListener=e=>{e.key==="Escape"&&this.close()},this.close=()=>{this.stateUpdate.emit({activeConfirmationModal:{active:!1}}),L.activeConfirmationModal={active:!1},this.states.activeConfirmationModal.onClose(this.stateUpdate,L,this.meeting)},this.onConfirmation=async()=>{this.stateUpdate.emit({activeConfirmationModal:{active:!1}}),L.activeConfirmationModal={active:!1},this.states.activeConfirmationModal.onClick(this.stateUpdate,L,this.meeting)},this.meeting=void 0,this.states=void 0,this.iconPack=N,this.t=j()}connectedCallback(){document.addEventListener("keydown",this.keyPressListener)}componentDidLoad(){}disconnectedCallback(){document.removeEventListener("keydown",this.keyPressListener)}render(){var t,e;const i=this.states.activeConfirmationModal;return l(O,null,l("div",{class:"leave-modal"},l("div",{class:"header"},l("h2",{class:"title"},i.header?this.t(i.header):this.t("cta.confirmation"))),l("p",{class:"message"},i.content?this.t(i.content):""),l("div",{class:"content"},l("div",{class:"leave-meeting"},l("dyte-button",{variant:"secondary",title:i.cancelText?this.t(i.cancelText):this.t("cancel"),onClick:this.close,iconPack:this.iconPack,t:this.t,class:"br-secondary-btn"},i.cancelText?this.t(i.cancelText):this.t("cancel")),l("dyte-button",{onClick:()=>this.onConfirmation(),variant:(e=(t=this.states.activeConfirmationModal)===null||t===void 0?void 0:t.variant)!==null&&e!==void 0?e:"danger",title:i.ctaText?this.t(i.ctaText):this.t("yes"),iconPack:this.iconPack,t:this.t},i.ctaText?this.t(i.ctaText):this.t("yes"))))))}};aD.style=lle;var ule=Object.freeze({__proto__:null,dyte_confirmation_modal:aD});const ple=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;align-items:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);position:relative;z-index:10}@media only screen and (max-device-height: 480px) and (orientation: landscape){:host{padding-top:var(--dyte-space-0, 0px) !important}}",oD=class{constructor(t){U(this,t),this.variant="solid",this.disableRender=!1,this.meeting=void 0,this.config=Me,this.states=void 0,this.iconPack=N,this.t=j(),this.middlewares={},this.size=void 0}render(){const t={meeting:this.meeting,config:this.config,states:this.states,t:this.t,iconPack:this.iconPack,size:this.size,middlewares:this.middlewares};return l(O,null,!this.disableRender&&l(Ge,{element:"dyte-header",defaults:t,onlyChildren:!0}),l("slot",null))}};oD.style=ple;var hle=Object.freeze({__proto__:null,dyte_controlbar:oD});const gle=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{margin-right:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-between;padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}header h3{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px)}.back-btn{border-radius:var(--dyte-border-radius-sm, 4px);background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.back-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside{box-sizing:border-box;display:flex;max-width:var(--dyte-space-56, 224px) !important;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px)}aside button{margin-top:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;width:100%;align-items:center;justify-content:space-between;border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);background-color:transparent;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));cursor:default;font-size:14px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px}aside button .right{display:flex;align-items:center}aside button .right dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}aside button .right dyte-icon:last-child{margin-left:var(--dyte-space-4, 16px)}aside button[type='button']{cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}aside button[type='button']:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside button[type='button']{border-right:var(--dyte-border-width-md, 2px) solid transparent}aside button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}aside button.active:hover{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}main{position:relative;box-sizing:border-box;display:flex;height:100%;width:100%;flex-direction:column;padding-top:var(--dyte-space-1, 4px)}:host([size='sm']) aside{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));width:100% !important;max-width:100% !important;padding-left:var(--dyte-space-0, 0px)}:host([size='sm']) aside button{border-radius:var(--dyte-border-radius-none, 0)}:host([size='sm']) aside button.active{border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}:host([size='sm']) aside button.active:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) aside.hide{display:none}:host([size='sm']) main{display:none;height:100%;width:100%;padding:var(--dyte-space-0, 0px)}:host([size='sm']) main.active{display:block}:host([size='sm']) header{margin:var(--dyte-space-0, 0px);justify-content:center}:host([size='sm']) header dyte-button{position:absolute;left:var(--dyte-space-4, 16px)}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}::-webkit-scrollbar-thumb:hover{border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.progress-bar{height:var(--dyte-space-1, 4px);width:100%;overflow:hidden;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.progress-indicator{height:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}`,cD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.keyPressListener=e=>{e.key==="Escape"&&this.close()},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.activeTab="audio",this.isMobileMainVisible=!1,this.progress=0}connectedCallback(){document.addEventListener("keydown",this.keyPressListener)}disconnectedCallback(){this.keyPressListener&&document.removeEventListener("keydown",this.keyPressListener)}progressUpdate(t){this.progress=t.detail}changeTab(t){this.activeTab=t,this.size==="sm"&&(this.isMobileMainVisible||(this.isMobileMainVisible=!0))}close(){this.stateUpdate.emit({activeDebugger:!1}),L.activeDebugger=!1}getActiveTab(){switch(this.activeTab){case"audio":return this.t("Audio Troubleshooting");case"screenshare":return this.t("Media Troubleshooting");case"video":return this.t("Video Troubleshooting");default:return this.t("Troubleshooting")}}render(){if(this.meeting==null)return null;const t={meeting:this.meeting,states:this.states||L,iconPack:this.iconPack,t:this.t,size:this.size},e=this.getActiveTab();return l(O,null,l("aside",{class:{hide:this.isMobileMainVisible},part:"menu"},l("header",null,l("h3",null,this.t("Troubleshooting"))),l("button",{type:"button",class:{active:this.activeTab==="audio"},onClick:()=>this.changeTab("audio")},this.t("audio"),l("div",{class:"right"},l("dyte-icon",{icon:this.iconPack.mic_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&l("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),l("button",{type:"button",class:{active:this.activeTab==="video"},onClick:()=>this.changeTab("video")},this.t("video"),l("div",{class:"right"},l("dyte-icon",{icon:this.iconPack.video_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&l("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),l("button",{type:"button",class:{active:this.activeTab==="screenshare"},onClick:()=>this.changeTab("screenshare")},this.t("Screenshare"),l("div",{class:"right"},l("dyte-icon",{icon:this.iconPack.share_screen_start,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&l("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t})))),l("main",{class:{active:this.isMobileMainVisible},part:"main-content"},this.size==="sm"&&l("header",null,l("dyte-button",{kind:"icon",class:"back-btn",onClick:()=>this.isMobileMainVisible=!1,iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),l("h4",null,e)),this.activeTab==="audio"&&l("dyte-debugger-audio",Object.assign({},t)),this.activeTab==="video"&&l("dyte-debugger-video",Object.assign({},t)),this.activeTab==="screenshare"&&l("dyte-debugger-screenshare",Object.assign({},t)),this.progress>1&&l("div",{class:"progress-bar"},l("div",{class:"progress-indicator",style:{width:`${this.progress}%`}}))))}};cD.style=gle;var mle=Object.freeze({__proto__:null,dyte_debugger:cD});const fle=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);display:flex;height:100%;width:100%;flex:1 1 0%;flex-direction:column;align-items:flex-start;justify-content:flex-start}`,dD=class{constructor(t){U(this,t),this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.issueKey=0}render(){return l(O,null)}};dD.style=fle;var vle=Object.freeze({__proto__:null,dyte_debugger_network:dD});const yle=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",lD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.variant="button",this.meeting=void 0,this.states=void 0,this.t=j(),this.iconPack=N,this.size=void 0}toggleDebugger(){var t;this.stateUpdate.emit({activeDebugger:!(!((t=this.states)===null||t===void 0)&&t.activeDebugger),activeMoreMenu:!1}),L.activeDebugger=!L.activeDebugger,L.activeMoreMenu=!1}render(){var t;if(!((t=this.meeting)===null||t===void 0)&&t.troubleshoot)return l(O,{title:this.t("Network & Trouble Shooting")},l("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleDebugger(),icon:this.iconPack.debug,label:this.t("Troubleshooting and Help"),variant:this.variant}))}};lD.style=yle;var ble=Object.freeze({__proto__:null,dyte_debugger_toggle:lD});const wle=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex-direction:column;align-items:center;justify-content:center}.ctr{display:flex;flex-direction:column;align-items:center}dyte-logo{margin-bottom:var(--dyte-space-8, 32px);height:var(--dyte-space-12, 48px)}.rejoin-button{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-6, 24px);padding-bottom:var(--dyte-space-6, 24px);padding-left:var(--dyte-space-16, 64px);padding-right:var(--dyte-space-16, 64px)}.rejoin-icon{margin-right:var(--dyte-space-2, 8px)}p{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}p.breakout{font-size:20px;display:flex;flex-direction:column;align-items:center}p.breakout span{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-0, 0px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}span{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}",uD=class{constructor(t){U(this,t),this.config=Me,this.size=void 0,this.icon=N,this.states=void 0,this.t=j(),this.iconPack=N,this.message="",this.meeting=void 0}connectedCallback(){this.statesChanged(this.states),Ql("roomLeftState",()=>this.statesChanged())}getBreakoutRoomsMessage(t){var e;let i;return(t==null?void 0:t.roomLeftState)==="connected-meeting"&&(((e=L.activeBreakoutRoomsManager)===null||e===void 0?void 0:e.destinationMeetingId)===this.meeting.connectedMeetings.parentMeeting.id?i="breakout_rooms.move_reason.switch_main_room":i="breakout_rooms.move_reason.switch_room"),i}statesChanged(t){const e=t||L;if(e!=null)switch(e==null?void 0:e.roomLeftState){case"left":this.message="ended.left";break;case"kicked":this.message="ended.kicked";break;case"disconnected":this.message="ended.disconnected";break;case"rejected":this.message="ended.rejected";break;case"connected-meeting":this.message=this.getBreakoutRoomsMessage(e);break;default:this.message="ended"}}renderBreakoutRoomScreen(){return l(O,null,l("div",{class:"ctr",part:"container"},l("dyte-icon",{icon:this.iconPack.breakout_rooms}),l("p",{part:"message",class:"breakout"},this.t(this.message))))}render(){const t=this.states||L;return t.roomLeftState==="connected-meeting"?this.renderBreakoutRoomScreen():l(O,null,l("div",{class:"ctr",part:"container"},l("dyte-logo",{meeting:this.meeting,config:this.config,part:"logo",t:this.t}),l("p",{part:"message"},this.t(this.message)),(t==null?void 0:t.roomLeftState)==="disconnected"&&l("span",{part:"description"},this.t("ended.network"))))}static get watchers(){return{states:["statesChanged"]}}};uD.style=wle;var _le=Object.freeze({__proto__:null,dyte_ended_screen:uD});const pD=t=>{t!=null&&(t.requestFullscreen!=null?t.requestFullscreen():t.mozRequestFullScreen!=null?t.mozRequestFullScreen():t.webkitRequestFullscreen!=null?t.webkitRequestFullscreen():t.msRequestFullscreen!=null&&t.msRequestFullscreen())},hD=()=>{document.exitFullscreen!=null?document.exitFullscreen():document.mozExitFullScreen!=null?document.mozExitFullScreen():document.webkitExitFullscreen!=null?document.webkitExitFullscreen():document.msExitFullscreen!=null&&document.msExitFullscreen()},gD=()=>document.fullscreenElement!=null||document.webkitCurrentFullScreenElement!=null,mD=()=>typeof document<"u"?document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled:!1,Sle=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",fD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.onFullScreenchange=()=>{this.fullScreenActive=gD()},this.toggleFullScreen=()=>{let e=this.targetElement||document.querySelector("dyte-meeting");e&&(this.fullScreenActive?(hD(),this.fullScreenActive=!1):(pD(e),this.fullScreenActive=!0),this.stateUpdate.emit({activeMoreMenu:!1}),L.activeMoreMenu=!1)},this.states=void 0,this.targetElement=void 0,this.variant="button",this.size=void 0,this.iconPack=N,this.t=j(),this.fullScreenActive=!1,this.isFullScreenSupported=!0}connectedCallback(){this.isFullScreenSupported=mD(),this.onFullScreenchange(),window.addEventListener("webkitfullscreenchange",this.onFullScreenchange),window.addEventListener("fullscreenchange",this.onFullScreenchange)}disconnectedCallback(){window.removeEventListener("webkitfullscreenchange",this.onFullScreenchange),window.removeEventListener("fullscreenchange",this.onFullScreenchange)}render(){return this.isFullScreenSupported?l(O,{title:this.t("full_screen")},l("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.toggleFullScreen,icon:this.fullScreenActive?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize,label:this.fullScreenActive?this.t("full_screen.exit"):this.t("full_screen"),variant:this.variant})):null}};fD.style=Sle;var Ele=Object.freeze({__proto__:null,dyte_fullscreen_toggle:fD});function jP(t,e){const i=Math.pow(10,e);return Math.floor(t*i)/i}function kle({dimensions:t,count:e,aspectRatio:i,gap:r}){const{width:s,height:n,rows:a,cols:o}=Tle({dimensions:t,count:e,aspectRatio:i,gap:r}),c=xle({parentDimensions:t,dimensions:{width:s,height:n},rows:a,cols:o,count:e,gap:r});return{width:s,height:n,getPosition:c}}function Tle({count:t,dimensions:e,aspectRatio:i,gap:r}){let{width:s,height:n}=e;if(s===0||n===0)return{width:0,height:0,rows:1,cols:1};s-=r*2,n-=r*2;const a=r,o=t,c=Ple(i);let d=0,u=0,p=1,g=1;const m=[];for(let f=1;f<=o;f++)m.push((s-a*(f-1))/f),m.push((n-a*(f-1))/(f*c));m.sort((f,b)=>b-f);for(const f of m)if(d=jP(f,4),u=jP(d*c,4),p=Math.floor((s+a)/(d+a)),g=Math.floor((n+a)/(u+a)),p*g>=o){g=Math.ceil(o/p);break}return{width:d,height:u,rows:g,cols:p}}function xle({parentDimensions:t,dimensions:e,rows:i,cols:r,count:s,gap:n}){const{width:a,height:o}=t,{width:c,height:d}=e,u=(o-(d*i+(i-1)*n))/2;let p=(a-(c*r+(r-1)*n))/2;const g=d+n,m=c+n;let f=0,b=0;const w=s%r;function v(_){const k=s-_;k===w&&(p=(a-(c*k+(k-1)*n))/2);const P=u+b*g,D=p+f*m;return f++,(_+1)%r===0&&(b++,f=0),{top:P,left:D}}return v}const Ple=t=>{const[e,i]=t.split(":");return Number.parseInt(i)/Number.parseInt(e)},hy={spotlight:"sm",mixed:"sm"},Cle=":host{display:block;height:100%;width:100%}",vD=class{constructor(t){U(this,t),this.layout="row",this.aspectRatio="16:9",this.meeting=void 0,this.gap=8,this.size=void 0,this.states=L,this.config=Me,this.iconPack=N,this.t=j(),this.gridSize=hy,this.overrides={}}render(){var t;if(!this.meeting)return l(O,null);const e={meeting:this.meeting,size:this.size,states:this.states||L,config:this.config,iconPack:this.iconPack,t:this.t,aspectRatio:this.aspectRatio,gap:this.gap,layout:this.layout,gridSize:this.gridSize};return((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="AUDIO_ROOM"?l(O,null,l("dyte-audio-grid",Object.assign({},e))):l(O,null,l("dyte-video-grid",Object.assign({overrides:this.overrides},e)))}};vD.style=Cle;var Rle=Object.freeze({__proto__:null,dyte_grid:vD});const Ale=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;font-size:16px}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}:host([size='sm']) .center{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([size='sm']) dyte-button{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}:host([size='sm']) dyte-button dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}dyte-button{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.center{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.center .page{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.center .slash{margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-0\\.5, 2px)}.center .pages{align-self:flex-end;font-size:12px}:host([variant='rounded']){overflow:hidden;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button{border-radius:9999px;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='rounded']) dyte-button:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button:not([disabled]):focus{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='grid']){margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) dyte-button{position:absolute;top:50%;height:var(--dyte-space-20, 80px);width:var(--dyte-space-20, 80px);opacity:0.2;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='grid']) dyte-button:hover{opacity:1}:host([variant='grid']) dyte-button{transform:translateY(-50%)}:host([variant='grid']) dyte-button.prev{left:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) dyte-button.next{right:var(--dyte-space-0, 0px);border-top-left-radius:9999px;border-bottom-left-radius:9999px}:host([variant='grid']) dyte-button.auto{left:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) .dots{position:absolute;left:50%;bottom:var(--dyte-space-3, 12px);display:flex;align-items:center;transform:translateX(-50%)}:host([variant='grid']) .dots .dot{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-2, 8px);width:var(--dyte-space-2, 8px);cursor:pointer;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([variant='grid']) .dots .dot:last-child{margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) .dots .dot.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host([variant='grid'][size='sm']) dyte-button{height:var(--dyte-space-14, 56px);width:var(--dyte-space-14, 56px);opacity:0.1}",yD=class{constructor(t){U(this,t),this.onPageChanged=({currentPage:e,pageCount:i})=>{this.pageCount=i,this.page=e},this.toggleGridPagination=()=>{var e;const{self:i,participants:r}=this.meeting,{mobile:s,desktop:n}=(e=i.config)===null||e===void 0?void 0:e.maxVideoStreams,a=this.size==="sm"?s:n;r.joined.size<a?this.showPagination=!1:this.showPagination=!0},this.onParticipantJoin=()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()},this.onParticipantLeave=()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()},this.prevPage=()=>{if(this.meeting==null)return;const{participants:e}=this.meeting;this.page>1?e.setPage(this.page-=1):e.viewMode==="PAGINATED"&&e.setViewMode("ACTIVE_GRID")},this.nextPage=()=>{if(this.meeting==null)return;const{participants:e}=this.meeting;this.page>0&&this.page<this.pageCount?e.setPage(this.page+=1):e.count>0&&this.pageCount===0&&e.setViewMode("PAGINATED")},this.meeting=void 0,this.states=void 0,this.size=void 0,this.variant="rounded",this.iconPack=N,this.t=j(),this.page=1,this.pageCount=0,this.activeCount=0,this.activeComputedCount=0,this.showPagination=!1}connectedCallback(){this.meetingChanged(this.meeting),this.sizeChanged()}disconnectedCallback(){if(this.meeting==null)return;const{participants:t}=this.meeting;t.removeListener("pageChanged",this.onPageChanged),t.removeListener("viewModeChanged",this.onPageChanged),t.joined.removeListener("participantJoined",this.onParticipantJoin),t.joined.removeListener("participantLeft",this.onParticipantLeave)}meetingChanged(t){if(t!=null){const{participants:e}=t;this.page=e.currentPage,this.pageCount=e.pageCount,e.addListener("viewModeChanged",this.onPageChanged),e.addListener("pageChanged",this.onPageChanged),e.joined.addListener("participantJoined",this.onParticipantJoin),e.joined.addListener("participantLeft",this.onParticipantLeave),this.activeCount=this.meeting.participants.joined.size,this.activeComputedCount=this.meeting.participants.joined.size,this.toggleGridPagination()}}sizeChanged(){this.toggleGridPagination()}render(){if(!(this.meeting.meta.viewType==="WEBINAR"||!this.showPagination))return l(O,null,l("dyte-button",{class:"prev",variant:"secondary",kind:"icon",disabled:this.pageCount===0,onClick:this.prevPage,"aria-label":this.t("page.prev"),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),this.variant!=="grid"&&l("div",{class:"center"},l("span",{class:"page"},this.pageCount===0?l("dyte-tooltip",{label:this.t("layout.auto"),iconPack:this.iconPack,t:this.t},l("dyte-button",{kind:"icon",class:"auto",iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.wand,iconPack:this.iconPack,t:this.t}))):this.page),this.pageCount!==0&&[l("span",{class:"slash"},"/"),l("span",{class:"pages"},this.pageCount)]),this.variant==="grid"&&this.pageCount>0&&l("div",{class:"dots"},[...Array(this.pageCount)].map((e,i)=>l("div",{key:`dot-${i}`,class:{dot:!0,active:i+1===this.page}}))),l("dyte-button",{class:"next",variant:"secondary",kind:"icon",disabled:this.page!==0&&this.page===this.pageCount,onClick:this.nextPage,"aria-label":this.t("page.next"),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.chevron_right,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t})))}static get watchers(){return{meeting:["meetingChanged"],size:["sizeChanged"]}}};yD.style=Ale;var Ile=Object.freeze({__proto__:null,dyte_grid_pagination:yD});const Ole=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:var(--dyte-space-12, 48px);align-items:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}@media only screen and (max-device-height: 480px) and (orientation: landscape){:host{display:none !important}}",bD=class{constructor(t){U(this,t),this.variant="solid",this.disableRender=!1,this.meeting=void 0,this.config=Me,this.states=void 0,this.iconPack=N,this.t=j(),this.size=void 0}render(){const t={meeting:this.meeting,config:this.config,states:this.states,t:this.t,iconPack:this.iconPack,size:this.size};return l(O,null,!this.disableRender&&l(Ge,{element:"dyte-header",defaults:t,onlyChildren:!0}),l("slot",null))}};bD.style=Ole;var Mle=Object.freeze({__proto__:null,dyte_header:bD});const Dle=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.ctr{display:flex;flex-direction:column;align-items:center}dyte-logo{margin-bottom:var(--dyte-space-10, 40px);height:var(--dyte-space-12, 48px)}dyte-spinner{height:var(--dyte-space-12, 48px);width:var(--dyte-space-12, 48px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",wD=class{constructor(t){U(this,t),this.meeting=void 0,this.config=Me,this.iconPack=N,this.t=j()}render(){return l(O,null,l("slot",null,l("div",{class:"ctr",part:"container"},l("dyte-logo",{meeting:this.meeting,config:this.config,t:this.t,part:"logo"}),l("dyte-spinner",{"aria-label":"Idle, waiting for meeting data",part:"spinner",iconPack:this.iconPack,t:this.t}))))}};wD.style=Dle;var Lle=Object.freeze({__proto__:null,dyte_idle_screen:wD});const Nle=t=>t.split(/[#?]/)[0].split(".").pop().trim(),Ule=t=>{if(!t)return"0 B";const e=Math.floor(Math.log(t)/Math.log(1024));return`${(t/1024**e).toFixed(2)} ${["B","kB","MB","GB","TB"][e]}`},jle=(t,e="file")=>{try{const r=new URL(t).pathname.split("/").pop();return r!=="/"?r:e}catch{return e}},pE=async(t,e)=>{t=uE(t);let i=e==null?void 0:e.name;const r=await fetch(t);if(!r.ok){window.open(t,"_blank");return}const s=URL.createObjectURL(await r.blob()),n=document.createElement("a");n.href=s,n.download=i??jle(t,e==null?void 0:e.fallbackName),n.click()},$le=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{width:1140px;max-width:100%;box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-6, 24px);padding-top:var(--dyte-space-5, 20px);overflow-y:auto;color:rgb(var(--dyte-colors-text-1000, 255 255 255));z-index:40;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.displayName{font-weight:700}.image-ctr{margin-top:var(--dyte-space-2, 8px);box-sizing:border-box;display:flex;justify-content:center;overflow:hidden}.actions{display:flex;align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}img{box-sizing:border-box;display:block;max-height:100%;max-width:100%;-o-object-fit:contain;object-fit:contain}.header{display:flex;align-items:center;justify-content:space-between;padding-bottom:var(--dyte-space-4, 16px)}.shared-by-user{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}:host([size='sm']) .header{flex-direction:column}:host([size='sm']) .header .actions{margin-top:var(--dyte-space-4, 16px)}`,_D=class{constructor(t){U(this,t),this.close=K(this,"close",7),this.keypressListener=e=>{e.key==="Escape"&&this.close.emit()},this.handleOutsideClick=()=>this.close.emit(),this.image=void 0,this.size=void 0,this.t=j(),this.iconPack=N}connectedCallback(){document.addEventListener("keydown",this.keypressListener),document.addEventListener("click",this.handleOutsideClick)}disconnectedCallback(){document.removeEventListener("keydown",this.keypressListener),document.removeEventListener("click",this.handleOutsideClick)}render(){return l(O,{class:"scrollbar",onClick:t=>t.stopPropagation()},l("div",{class:"header"},l("div",{class:"shared-by-user"},this.t("chat.img.shared_by")," ",l("span",{class:"displayName"},es(Mr(this.image.displayName)))),l("div",{class:"actions"},l("dyte-button",{kind:"icon",variant:"secondary",onClick:()=>this.close.emit(),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.full_screen_minimize,iconPack:this.iconPack,t:this.t})),l("dyte-button",{onClick:()=>pE(this.image.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.download,slot:"start",iconPack:this.iconPack,t:this.t}),"Download"))),l("div",{class:"image-ctr"},l("img",{src:this.image.link})))}};_D.style=$le;var zle=Object.freeze({__proto__:null,dyte_image_viewer:_D});const Fle=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",SD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.leave=()=>{this.stateUpdate.emit({activeLeaveConfirmation:!0}),L.activeLeaveConfirmation=!0},this.variant="button",this.size=void 0,this.iconPack=N,this.t=j()}render(){const t=this.t("leave");return l(O,{label:t},l("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,class:"leave",onClick:this.leave,icon:this.iconPack.call_end,label:t,variant:this.variant}))}};SD.style=Fle;var Vle=Object.freeze({__proto__:null,dyte_leave_button:SD});const Ble=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.leave-modal{width:var(--dyte-space-72, 288px)}@media (min-width: 768px){.leave-modal{width:var(--dyte-space-96, 384px)}}.leave-modal{position:relative;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding:var(--dyte-space-8, 32px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}.leave-modal .message{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.leave-modal .content{margin-top:var(--dyte-space-4, 16px);font-size:14px;display:flex;flex-wrap:wrap;gap:var(--dyte-space-4, 16px)}.leave-modal .content dyte-button{height:var(--dyte-space-9, 36px);min-width:var(--dyte-space-44, 176px);flex-grow:1}.leave-modal .content .secondary-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.leave-modal .content .secondary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.leave-modal .content .secondary-danger-btn{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",ED=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.keyPressListener=e=>{e.key==="Escape"&&this.close()},this.isBreakoutRoomsActive=!1,this.isChildMeeting=!1,this.canJoinMainRoom=!1,this.close=()=>{this.stateUpdate.emit({activeLeaveConfirmation:!1}),L.activeLeaveConfirmation=!1},this.handleLeave=()=>{var e;(e=this.meeting)===null||e===void 0||e.leaveRoom(),this.close()},this.handleJoinMainRoom=()=>{this.meeting.connectedMeetings.moveParticipants(this.meeting.meta.roomName,this.meeting.connectedMeetings.parentMeeting.id,[this.meeting.self.userId]),this.close()},this.handleEndMeeting=()=>{var e;(e=this.meeting)===null||e===void 0||e.participants.kickAll(),this.close()},this.meeting=void 0,this.states=void 0,this.iconPack=N,this.t=j(),this.canEndMeeting=!1}connectedCallback(){this.meetingChanged(this.meeting),document.addEventListener("keydown",this.keyPressListener)}componentDidLoad(){}disconnectedCallback(){document.removeEventListener("keydown",this.keyPressListener)}meetingChanged(t){t!=null&&(this.canEndMeeting=t.self.permissions.kickParticipant,this.isBreakoutRoomsActive=this.meeting.connectedMeetings.supportsConnectedMeetings&&this.meeting.connectedMeetings.isActive,this.isChildMeeting=this.meeting.connectedMeetings.supportsConnectedMeetings&&this.meeting.connectedMeetings.meetings.some(e=>e.id===t.meta.roomName),this.canJoinMainRoom=this.meeting.self.permissions.connectedMeetings.canSwitchToParentMeeting)}render(){return l(O,null,l("div",{class:"leave-modal"},l("div",{class:"header"},l("h2",{class:"title"},this.t("leave"))),l("p",{class:"message"},this.isBreakoutRoomsActive&&this.isChildMeeting?this.t("breakout_rooms.leave_confirmation"):this.t("leave_confirmation")),l("div",{class:"content"},l("dyte-button",{variant:"secondary",onClick:this.close,iconPack:this.iconPack,class:"secondary-btn",t:this.t},this.t("cancel")),this.isBreakoutRoomsActive&&this.isChildMeeting&&this.canJoinMainRoom&&l("dyte-button",{variant:"secondary",onClick:this.handleJoinMainRoom,iconPack:this.iconPack,class:"secondary-btn",t:this.t},this.t("breakout_rooms.leave_confirmation.main_room_btn")),l("dyte-button",{variant:this.canEndMeeting?"secondary":"danger",title:this.t("leave"),onClick:this.handleLeave,iconPack:this.iconPack,class:{"secondary-btn":this.canEndMeeting,"secondary-danger-btn":this.canEndMeeting},t:this.t},this.t("leave")),this.canEndMeeting&&l("dyte-button",{variant:"danger",onClick:this.handleEndMeeting,iconPack:this.iconPack,t:this.t},this.t("end.all")))))}static get watchers(){return{meeting:["meetingChanged"]}}};ED.style=Ble;var Hle=Object.freeze({__proto__:null,dyte_leave_meeting:ED});const Gle=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",kD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.dyteAPIError=K(this,"dyteAPIError",7),this.livestreamStateListener=e=>{this.livestreamState=e,(e==="LIVESTREAMING"||e==="IDLE")&&(this.stateUpdate.emit({activeMoreMenu:!1}),L.activeMoreMenu=!1)},this.isLoading=()=>this.meeting==null||this.livestreamState==="STARTING"||this.livestreamState==="STOPPING",this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.livestreamState="IDLE"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.clearListeners()}meetingChanged(t){var e,i;t!=null&&(this.livestreamState=(e=this.meeting.livestream)===null||e===void 0?void 0:e.state,(i=this.meeting.livestream)===null||i===void 0||i.on("livestreamUpdate",this.livestreamStateListener))}async toggleLivestream(){var t,e;if(this.livestreamState==="LIVESTREAMING")try{await((t=this.meeting.livestream)===null||t===void 0?void 0:t.stop())}catch{this.dyteAPIError.emit({trace:this.t("livestream.stop"),message:this.t("livestream.error.stop")})}else try{await((e=this.meeting.livestream)===null||e===void 0?void 0:e.start())}catch{this.dyteAPIError.emit({trace:this.t("livestream.start"),message:this.t("livestream.error.start")})}}clearListeners(){var t;(t=this.meeting.livestream)===null||t===void 0||t.removeListener("livestreamUpdate",this.livestreamStateListener)}getLivestreamLabel(){switch(this.livestreamState){case"IDLE":return this.t("livestream.go_live");case"LIVESTREAMING":return this.t("livestream.end_live");case"STARTING":return this.t("livestream.starting");case"STOPPING":return this.t("livestream.stopping");default:return this.t("livestream.error")}}getLivestreamIcon(){switch(this.livestreamState){case"IDLE":return this.iconPack.start_livestream;case"LIVESTREAMING":return this.iconPack.stop_livestream;case"STARTING":case"STOPPING":default:return this.iconPack.stop_livestream}}render(){if(c3(this.meeting))return l(O,null,l("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,isLoading:this.isLoading(),class:{"active-livestream":this.livestreamState==="LIVESTREAMING"},onClick:()=>this.toggleLivestream(),icon:this.getLivestreamIcon(),disabled:this.isLoading(),label:this.t(this.getLivestreamLabel()),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"]}}};kD.style=Gle;var Wle=Object.freeze({__proto__:null,dyte_livestream_toggle:kD});const qle=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:16px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.title{text-align:center;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}:host([size='sm']){font-size:12px}",TD=class{constructor(t){U(this,t),this.meeting=void 0,this.iconPack=N,this.t=j()}render(){var t;const e=(t=this.meeting)===null||t===void 0?void 0:t.meta.meetingTitle;return e==null?null:l(O,{tabIndex:0,role:"banner","aria-label":e},l("dyte-tooltip",{label:e,part:"tooltip",iconPack:this.iconPack,t:this.t},l("div",{class:"title",part:"title"},e)))}};TD.style=qle;var Jle=Object.freeze({__proto__:null,dyte_meeting_title:TD});const Kle=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}:host(.audioDisabled) :slotted(dyte-icon){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",xD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.audioUpdateListener=({audioEnabled:e})=>{this.audioEnabled=e},this.selfJoinStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canProduceAudio=!1},this.selfJoinStateRejectedListener=()=>{this.updateCanProduce(this.meeting)},this.mediaPermissionUpdateListener=({kind:e,message:i})=>{e==="audio"&&(this.micPermission=i)},this.toggleMic=()=>{var e,i,r,s,n,a,o,c,d,u,p,g;if((e=this.meeting)===null||e===void 0||e.__internals__.logger.info("dyteMicToggle::toggleMic",{media:{audio:{enabled:!!(!((r=(i=this.meeting)===null||i===void 0?void 0:i.self)===null||r===void 0)&&r.audioEnabled),permission:this.micPermission,canProduce:(a=(n=(s=this.meeting)===null||s===void 0?void 0:s.self)===null||n===void 0?void 0:n.permissions)===null||a===void 0?void 0:a.canProduceAudio}},webinar:{stageStatus:(c=(o=this.meeting)===null||o===void 0?void 0:o.self)===null||c===void 0?void 0:c.webinarStageStatus},livestream:{stageStatus:(u=(d=this.meeting)===null||d===void 0?void 0:d.stage)===null||u===void 0?void 0:u.status},moduleExists:{self:!!(!((p=this.meeting)===null||p===void 0)&&p.self)}}),this.hasPermissionError()){const f={enabled:!0,kind:"audio"};return this.stateUpdate.emit({activePermissionsMessage:f}),L.activePermissionsMessage=f,!1}const m=(g=this.meeting)===null||g===void 0?void 0:g.self;m==null||!this.canProduceAudio||(m.audioEnabled?m.disableAudio():m.enableAudio())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.audioEnabled=!1,this.canProduceAudio=!1,this.micPermission="NOT_REQUESTED"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,r,s,n,a,o,c;(t=this.meeting)===null||t===void 0||t.self.removeListener("audioUpdate",this.audioUpdateListener),(e=this.meeting)===null||e===void 0||e.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("joinStageRequestAccepted",this.selfJoinStateListener),(r=this.meeting)===null||r===void 0||r.self.removeListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("stageJoined",this.selfJoinStateListener),(n=this.meeting)===null||n===void 0||n.self.removeListener("stageLeft",this.selfStageLeftListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("removedFromStage",this.selfJoinStateListener),(c=(o=this.meeting)===null||o===void 0?void 0:o.stage)===null||c===void 0||c.removeListener("stageStatusUpdate",this.selfJoinStateListener)}meetingChanged(t){if(t!=null){const{self:e,stage:i}=t;this.updateCanProduce(t),this.micPermission=t.self.mediaPermissions.audio||"NOT_REQUESTED",this.audioEnabled=e.audioEnabled,e.addListener("audioUpdate",this.audioUpdateListener),e.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),e.addListener("joinStageRequestAccepted",this.selfJoinStateListener),e.addListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),e.addListener("stageJoined",this.selfJoinStateListener),e.addListener("stageLeft",this.selfStageLeftListener),e.addListener("removedFromStage",this.selfJoinStateListener),i==null||i.addListener("stageStatusUpdate",this.selfJoinStateListener)}}updateCanProduce(t){const{self:e,meta:i,stage:r}=t,s=e.permissions.canProduceAudio==="ALLOWED",n=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canProduceAudio=!1,s&&!a?this.canProduceAudio=!0:(n||a)&&(s&&r.status!=="OFF_STAGE"&&r.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canProduceAudio=!0),e.permissions.canProduceAudio==="CAN_REQUEST"&&(n&&(e.webinarStageStatus==="ON_STAGE"||e.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canProduceAudio=!0))}hasPermissionError(){return this.micPermission==="DENIED"||this.micPermission==="SYSTEM_DENIED"}getState(){let t="",e="",i="",r={},s=this.hasPermissionError(),n=this.micPermission==="COULD_NOT_START";return this.audioEnabled&&!s?(e=this.t("mic_on"),i=this.iconPack.mic_on):(e=this.t("mic_off"),i=this.iconPack.mic_off,r["red-icon"]=!0),n?t=this.t("perm_could_not_start.audio"):this.micPermission==="SYSTEM_DENIED"?t=this.t("perm_sys_denied.audio"):this.micPermission==="DENIED"?t=this.t("perm_denied.audio"):t=this.audioEnabled?this.t("disable_mic"):this.t("enable_mic"),{tooltipLabel:t,label:e,icon:i,classList:r,showWarning:s||n,disable:s}}render(){if(!this.canProduceAudio)return null;const{tooltipLabel:t,label:e,icon:i,classList:r,showWarning:s,disable:n}=this.getState();return l(O,{title:e},l("dyte-tooltip",{kind:"block",label:t,part:"tooltip",iconPack:this.iconPack,t:this.t},l("dyte-controlbar-button",{part:"controlbar-button",icon:i,label:e,size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,class:r,onClick:this.toggleMic,showWarning:s,disabled:n})))}static get watchers(){return{meeting:["meetingChanged"]}}};xD.style=Kle;var Yle=Object.freeze({__proto__:null,dyte_mic_toggle:xD});const Qle=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:100%;width:100%;display:flex}main{display:flex;flex:1 1 0%;padding-left:var(--dyte-space-4, 16px)}:host([layout='column']) main{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}main dyte-tab-bar{margin-right:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column}main #tabs{height:100%;flex:1 1 0%}dyte-button{z-index:10}.grid-width-sm{width:25%}.grid-width-md{width:50%}.grid-width-lg{width:66.666667%}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}:host([size='sm']){flex-direction:column}:host([size='sm']) .grid-width-lg,:host([size='sm']) .grid-width-md{height:50%;width:100%;max-width:100%}:host([size='sm']) .grid-width-sm{height:33.333333%;width:100%;max-width:100%}:host([size='sm']) main{display:flex;flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) dyte-tab-bar{height:var(--dyte-space-12, 48px);width:100%;flex-direction:row}:host([size='sm']) #tabs{flex:1 1 0%}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}:host([layout='column']){flex-direction:column}:host([layout='column']) main{display:flex;flex:1 1 0%}:host([layout='column']) .grid-width-lg,:host([layout='column']) .grid-width-md{height:50%;max-width:100%;width:100%}:host([layout='column']) .grid-width-sm{height:33.333333%;max-width:100%;width:100%}@media (orientation: portrait){:host{flex-direction:column}:host .grid-width-lg{height:50%;width:100%;max-width:100%}:host .grid-width-md{height:33.333333%;width:100%;max-width:100%}:host .grid-width-sm{height:25%;width:100%;max-width:100%}:host main{flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='md']) main{flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host dyte-tab-bar{height:var(--dyte-space-16, 64px);width:100%;flex-direction:row}:host #tabs{flex:1 1 0%}:host .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}}",PD=class{constructor(t){U(this,t),this.layout="row",this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Me,this.iconPack=N,this.t=j(),this.gridSize=hy,this.activeTab=void 0,this.initialised=void 0}componentWillLoad(){this.initialised=!1,this.screenShareParticipantsChanged(this.screenShareParticipants),this.pluginsChanged(this.plugins),this.initialised=!0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;(t=this.meeting.meta)===null||t===void 0||t.removeListener("activeTabUpdate",this.activeTabUpdateListener)}meetingChanged(t){var e,i,r,s;t!=null&&(((e=t.meta)===null||e===void 0?void 0:e.selfActiveTab)!=null&&this.onActiveTabUpdate((i=t.meta.selfActiveTab)===null||i===void 0?void 0:i.type,(r=t.meta.selfActiveTab)===null||r===void 0?void 0:r.id),this.activeTabUpdateListener=n=>{this.onActiveTabUpdate(n==null?void 0:n.type,n==null?void 0:n.id)},(s=t.meta)===null||s===void 0||s.addListener("activeTabUpdate",this.activeTabUpdateListener))}screenShareParticipantsChanged(t=[]){!this.initialised&&this.activeTab!=null||(this.activeTab==null&&t.length>0?this.setActiveTab({type:"screenshare",participant:t[0]}):this.revalidateActiveTab())}pluginsChanged(t){if(!(!this.initialised&&this.activeTab!=null))if(t.length>0){const e=t.length-1;this.setActiveTab({type:"plugin",plugin:t[e]})}else this.revalidateActiveTab()}revalidateActiveTab(){if(this.activeTab!=null)if(this.activeTab.type==="screenshare"){const{participant:t}=this.activeTab;this.screenShareParticipants.some(e=>e.id===t.id)||this.reassignActiveTab()}else{const{plugin:t}=this.activeTab;this.plugins.some(e=>e.id===t.id)||this.reassignActiveTab()}}setActiveTab(t,e=!0){var i;this.activeTab=t;const r=t.type==="screenshare"?t.participant.id:t.plugin.id;e&&((i=this.meeting.meta)===null||i===void 0||i.setSelfActiveTab({type:t.type,id:r},0))}reassignActiveTab(){if(this.screenShareParticipants.length>0)this.setActiveTab({type:"screenshare",participant:this.screenShareParticipants[0]});else if(this.plugins.length>0){const t=this.plugins.length-1;this.setActiveTab({type:"plugin",plugin:this.plugins[t]})}}onActiveTabUpdate(t,e){if(t!=null&&e!=null)switch(t){case"plugin":const i=this.plugins.find(s=>s.id===e);i!=null&&this.setActiveTab({type:"plugin",plugin:i},!1);break;case"screenshare":const r=this.screenShareParticipants.find(s=>s.id===e);r!=null&&this.setActiveTab({type:"screenshare",participant:r},!1)}}getTabs(){const t=this.screenShareParticipants.map(i=>({type:"screenshare",participant:i})),e=this.plugins.map(i=>({type:"plugin",plugin:i}));return t.concat(e)}render(){var t;const e={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t};return l(O,null,l("main",{id:"main-view",part:"main-view"},((t=this.getTabs())===null||t===void 0?void 0:t.length)>1&&l("dyte-tab-bar",Object.assign({activeTab:this.activeTab,tabs:this.getTabs(),onTabChange:i=>this.setActiveTab(i.detail)},e)),l("div",{id:"tabs",key:"tabs"},this.screenShareParticipants.map(i=>{var r,s;return l(Ge,{element:"dyte-screenshare-view",defaults:e,props:{participant:i,key:i.id,style:{display:((r=this.activeTab)===null||r===void 0?void 0:r.type)==="screenshare"&&((s=this.activeTab)===null||s===void 0?void 0:s.participant.id)===i.id?"flex":"none"}},childProps:{participant:i,isScreenShare:!0},deepProps:!0})}),this.plugins.map(i=>{var r,s;return l(Ge,{element:"dyte-plugin-main",defaults:e,props:{plugin:i,key:i.id,style:{display:((r=this.activeTab)===null||r===void 0?void 0:r.type)==="plugin"&&((s=this.activeTab)===null||s===void 0?void 0:s.plugin.id)===i.id?"flex":"none"}}})}))),l(Ge,{element:"dyte-mixed-grid",defaults:e,childProps:{part:"participants-grid",class:this.gridSize.mixed?`grid-width-${this.gridSize.mixed}`:"grid-width-lg",participants:this.participants,pinnedParticipants:this.pinnedParticipants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,aspectRatio:this.aspectRatio,gap:this.gap,size:"sm",layout:"row"},onlyChildren:!0}))}get host(){return jr(this)}static get watchers(){return{meeting:["meetingChanged"],screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"]}}};PD.style=Qle;var Zle=Object.freeze({__proto__:null,dyte_mixed_grid:PD});const Xle=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:visible}.more-menu{position:absolute;right:calc(var(--dyte-space-24, 96px) * -1);bottom:var(--dyte-space-16, 64px);z-index:50;margin-bottom:var(--dyte-space-3, 12px);box-sizing:border-box;max-height:60vh;width:var(--dyte-space-64, 256px);overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));outline:2px solid transparent;outline-offset:2px}:host([size='sm']) .more-menu{bottom:var(--dyte-space-10, 40px)}.more-menu::-webkit-scrollbar{height:var(--dyte-space-0, 0px);width:var(--dyte-space-1\\.5, 6px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.more-menu::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}",CD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.handleKeyDown=({key:e})=>{e==="Escape"&&this.states.activeMoreMenu&&(this.stateUpdate.emit({activeMoreMenu:!1}),L.activeMoreMenu=!L.activeMoreMenu)},this.handleOnClick=e=>{!e.composedPath().includes(this.host)&&this.states.activeMoreMenu&&(this.stateUpdate.emit({activeMoreMenu:!1}),L.activeMoreMenu=!L.activeMoreMenu)},this.toggleMoreMenu=()=>{this.stateUpdate.emit({activeMoreMenu:!L.activeMoreMenu}),L.activeMoreMenu=!L.activeMoreMenu},this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j()}connectedCallback(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("click",this.handleOnClick)}disconnectedCallback(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("click",this.handleOnClick)}render(){const t=this.t("more");return l(O,{title:t},this.states.activeMoreMenu&&l("div",{class:"more-menu"},l("slot",{name:"more-elements"})),l("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:e=>{e.stopPropagation(),this.toggleMoreMenu()},icon:this.iconPack.horizontal_dots,label:t,part:"controlbar-button"}),l("slot",{name:"expanded"}))}get host(){return jr(this)}};CD.style=Xle;var eue=Object.freeze({__proto__:null,dyte_more_toggle:CD});const tue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",RD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.onMuteAll=()=>{this.stateUpdate.emit({activeMuteAllConfirmation:!0})},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=N,this.t=j()}render(){var t;if(!(!((t=this.meeting)===null||t===void 0)&&t.self.permissions.canDisableParticipantAudio))return null;const e=this.t("mute_all");return l(O,{title:e},l("dyte-tooltip",{kind:"block",label:e,part:"tooltip"},l("dyte-controlbar-button",{part:"controlbar-button",icon:this.iconPack.speaker_off,label:e,size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,onClick:this.onMuteAll})))}};RD.style=tue;var iue=Object.freeze({__proto__:null,dyte_mute_all_button:RD});const rue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;-webkit-user-select:none;-moz-user-select:none;user-select:none}.leave-modal{position:relative;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}.leave-modal .content{font-size:14px}.leave-message p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px)}.leave-meeting{display:flex;flex-direction:row;justify-content:space-between;gap:var(--dyte-space-2, 8px)}.leave-meeting dyte-button{flex:1 1 0%}.end-meeting{margin-top:var(--dyte-space-2, 8px)}.message{margin-bottom:var(--dyte-space-4, 16px)}label{display:flex;align-items:center}input[type='checkbox']{margin-right:var(--dyte-space-2, 8px);accent-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}",AD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.onClose=()=>{this.stateUpdate.emit({activeMuteAllConfirmation:!1}),L.activeMuteAllConfirmation=!1},this.onMuteAll=()=>{var e;(e=this.meeting)===null||e===void 0||e.participants.disableAllAudio(this.allowUnmute),this.onClose()},this.meeting=void 0,this.states=void 0,this.iconPack=N,this.t=j(),this.allowUnmute=!0}render(){return l(O,null,l("div",{class:"leave-modal"},l("div",{class:"header"},l("h2",{class:"title"},this.t("mute_all.header"))),l("p",{class:"message"},this.t("mute_all.description")),l("div",{class:"content"},l("div",{class:"leave-meeting"},l("dyte-button",{variant:"secondary",title:this.t("close"),onClick:this.onClose,iconPack:this.iconPack,t:this.t},this.t("cancel")),l("dyte-button",{variant:"danger",title:this.t("mute_all"),onClick:this.onMuteAll,iconPack:this.iconPack,t:this.t},this.t("mute_all"))))))}};AD.style=rue;var sue=Object.freeze({__proto__:null,dyte_mute_all_confirmation:AD});const nue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block;height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}dyte-icon{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;height:100%;width:100%;--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}dyte-icon.good{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}dyte-icon.poor{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}dyte-icon.poorest{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([size='md']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.bg-signal{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:0;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}",ID=class{constructor(t){U(this,t),this.onMediaScoreUpdate=({kind:e,isScreenshare:i,score:r})=>{(e==="video"||this.isScreenShare&&i)&&(this.score=r)},this.participant=void 0,this.meeting=void 0,this.iconPack=N,this.t=j(),this.isScreenShare=!1,this.score=10}connectedCallback(){this.participantChanged(this.participant)}participantChanged(t){t&&t.addListener("mediaScoreUpdate",this.onMediaScoreUpdate)}disconnectedCallback(){var t;(t=this.participant)===null||t===void 0||t.removeListener("mediaScoreUpdate",this.onMediaScoreUpdate)}render(){if(this.meeting&&this.meeting.self.userId===this.participant.userId)return null;let t=Math.round(this.score/2),e="good";if(t>3)return null;switch(t<1&&(t=1),t){case 3:case 2:e="poor";break;case 1:e="poorest"}return l(O,null,l("dyte-icon",{icon:this.iconPack[`signal_${t}`],class:e}),l("dyte-icon",{icon:this.iconPack.signal_5,class:"bg-signal"}))}static get watchers(){return{participant:["participantChanged"]}}};ID.style=nue;var aue=Object.freeze({__proto__:null,dyte_network_indicator:ID});const oue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;height:var(--dyte-space-10, 40px);-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",OD=class{constructor(t){U(this,t),this.disconnectMeeting=e=>{e!=null&&this.countListener!=null&&(e.participants.joined.removeListener("participantJoined",this.countListener),e.participants.joined.removeListener("participantLeft",this.countListener),e!=null&&e.stage&&this.stageUpdateListener&&e.stage.removeListener("stageStatusUpdate",this.stageUpdateListener),e.self.removeListener("roomJoined",this.countListener))},this.meeting=void 0,this.iconPack=N,this.t=j(),this.participantCount=0,this.isViewer=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(t,e){this.disconnectMeeting(e),t!=null&&(this.countListener=()=>{this.participantCount=t.participants.joined.size+(t.self.roomJoined?1:0)},this.countListener(),this.isViewer=ch(this.meeting),t.participants.joined.addListener("participantJoined",this.countListener),t.participants.joined.addListener("participantLeft",this.countListener),t!=null&&t.stage&&(this.stageUpdateListener=()=>{this.isViewer=ch(this.meeting)},t==null||t.stage.addListener("stageStatusUpdate",this.stageUpdateListener)),t.self.addListener("roomJoined",this.countListener))}render(){return this.isViewer?null:l(O,{tabIndex:0,role:"log","aria-label":`${this.participantCount} ${this.t("participants")}`},l("dyte-icon",{icon:this.iconPack.people,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),this.participantCount)}static get watchers(){return{meeting:["meetingChanged"]}}};OD.style=oue;var cue=Object.freeze({__proto__:null,dyte_participant_count:OD});const due=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;align-items:center;justify-content:center;aspect-ratio:16 / 9;height:var(--dyte-space-56, 224px);overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));transition-property:var(--dyte-transition-property, all);transition-duration:150ms}@media (prefers-reduced-motion){:host{--dyte-transition-property:none}}:host([size='sm'][variant='solid']) ::slotted(dyte-name-tag){left:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px)}video{display:none;position:absolute;height:100%;width:100%;border-radius:var(--dyte-border-radius-lg, 12px)}video.contain{-o-object-fit:contain;object-fit:contain}video.cover{-o-object-fit:cover;object-fit:cover}video.visible{display:block}video::-webkit-media-controls{display:none !important}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}video.mirror{transform:scaleX(-1)}@media (orientation: portrait){:host{height:var(--dyte-space-44, 176px)}}",MD=class{constructor(t){U(this,t),this.onVideoUpdate=e=>{this.videoState=e},this.onPinned=({isPinned:e})=>{this.isPinned=e},this.videoState=void 0,this.isPinned=!1,this.nameTagPosition="bottom-left",this.isPreview=!1,this.participant=void 0,this.states=void 0,this.config=Me,this.variant="solid",this.size=void 0,this.iconPack=N,this.t=j()}connectedCallback(){this.participantsChanged(this.participant)}componentDidLoad(){this.videoStateChanged(this.videoState)}disconnectedCallback(){this.participant!=null&&(this.participant.removeListener("videoUpdate",this.onVideoUpdate),this.participant.removeListener("pinned",this.onPinned),this.participant.removeListener("unpinned",this.onPinned))}async participantsChanged(t){t!=null&&(this.videoState={videoEnabled:t.videoEnabled,videoTrack:t.videoTrack},this.isPinned=t.isPinned,t.addListener("videoUpdate",this.onVideoUpdate),t.addListener("pinned",this.onPinned),t.addListener("unpinned",this.onPinned))}videoStateChanged(t){if(t!=null&&this.videoEl!=null)if(t.videoEnabled){const e=new MediaStream;e.addTrack(t.videoTrack),this.videoEl.srcObject=e}else this.videoEl.srcObject=void 0}isMirrored(){var t;if(this.participant!=null&&("preview"in this.participant||this.isPreview)){const i=this.states||L,r=(t=i==null?void 0:i.prefs)===null||t===void 0?void 0:t.mirrorVideo;if(typeof r=="boolean")return r}return!1}render(){var t,e,i,r;return l(O,null,l("video",{ref:s=>this.videoEl=s,class:{visible:(t=this.videoState)===null||t===void 0?void 0:t.videoEnabled,mirror:this.isMirrored(),[(r=(i=(e=this.config)===null||e===void 0?void 0:e.config)===null||i===void 0?void 0:i.videoFit)!==null&&r!==void 0?r:"cover"]:!0},autoPlay:!0,playsInline:!0,muted:!0}),this.isPinned&&l("dyte-icon",{class:"pinned-icon",icon:this.iconPack.pin,"aria-label":this.t("pinned"),iconPack:this.iconPack,t:this.t}),l("slot",null))}static get watchers(){return{participant:["participantsChanged"],videoState:["videoStateChanged"]}}};MD.style=due;var lue=Object.freeze({__proto__:null,dyte_participant_setup:MD});const lh=console;class uue{constructor(){this.audio=document.createElement("audio"),this.audio.autoplay=!0,this.audioStream=new MediaStream,this.audio.srcObject=this.audioStream,this.audioTracks=[]}addTrack(e,i){this.audioTracks.some(r=>r.id===e)||(this.audioTracks.push({id:e,track:i}),this.audioStream.addTrack(i),this.play())}removeTrack(e){const i=this.audioTracks.find(r=>r.id===e);i!=null&&(this.audioStream.removeTrack(i.track),this.audioTracks=this.audioTracks.filter(r=>r.id!==e))}async play(){var e;this.audio.srcObject=this.audioStream,await((e=this.audio.play())===null||e===void 0?void 0:e.catch(i=>{i.name==="NotAllowedError"?this._onError!=null&&this._onError():i.name!=="AbortError"&&lh.error(`[dyte-audio] play() error
`,i)}))}async setDevice(e){var i,r,s;await((s=(r=(i=this.audio).setSinkId)===null||r===void 0?void 0:r.call(i,e))===null||s===void 0?void 0:s.catch(n=>{lh.error(`[dyte-audio] setSinkId() error
`,n)}))}onError(e){this._onError=e}}const pue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.modal{box-sizing:border-box;width:100%;max-width:var(--dyte-space-96, 384px);padding:var(--dyte-space-4, 16px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.modal h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:24px;font-weight:500}.modal p{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-6, 24px)}.modal dyte-button{width:100%}",DD=class{constructor(t){U(this,t),this.dialogClose=K(this,"dialogClose",7),this.onDyteDialogClose=()=>{this.showPlayDialog=!1,this.dialogClose.emit()},this.meeting=void 0,this.iconPack=N,this.t=j(),this.showPlayDialog=!1}componentDidLoad(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;this.meeting!=null&&(this.audioUpdateListener&&this.meeting.participants.joined.removeListener("audioUpdate",this.audioUpdateListener),this.screenShareUpdateListener&&this.meeting.participants.joined.removeListener("screenShareUpdate",this.screenShareUpdateListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),this.deviceUpdateListener&&this.meeting.self.removeListener("deviceUpdate",this.deviceUpdateListener),this.stageStatusUpdateListener&&((t=this.meeting.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)))}setupAudio(){this.audio=new uue}async handleAutoPlayError(){this.audio||this.setupAudio(),this.audio.onError(()=>{this.showPlayDialog=!0}),this.audio.play()}async handleEvents(t){const e=t.self.getCurrentDevices();e.speaker!=null&&await this.audio.setDevice(e.speaker.deviceId),this.audioUpdateListener=({id:r,audioEnabled:s,audioTrack:n})=>{const a=`audio-${r}`;s&&n!=null?this.audio.addTrack(a,n):this.audio.removeTrack(a)};const i=t.participants.joined.toArray();for(const r of i)this.audioUpdateListener(r);this.participantLeftListener=({id:r})=>{this.audio.removeTrack(`audio-${r}`),this.audio.removeTrack(`screenshare-${r}`)},this.screenShareUpdateListener=({id:r,screenShareEnabled:s,screenShareTracks:n})=>{const a=`screenshare-${r}`;s&&n.audio!=null?this.audio.addTrack(a,n.audio):this.audio.removeTrack(a)},this.deviceUpdateListener=({device:r,preview:s})=>{s||r.kind==="audiooutput"&&this.audio.setDevice(r.deviceId)},t.participants.joined.addListener("audioUpdate",this.audioUpdateListener),t.participants.joined.addListener("screenShareUpdate",this.screenShareUpdateListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),t.self.addListener("deviceUpdate",this.deviceUpdateListener)}async meetingChanged(t){var e;t!=null&&(this.setupAudio(),t.meta.viewType==="LIVESTREAM"&&t.stage.status!=="ON_STAGE"?(this.stageStatusUpdateListener=async i=>{i==="ON_STAGE"&&(await this.handleAutoPlayError(),await this.handleEvents(this.meeting))},(e=t.stage)===null||e===void 0||e.on("stageStatusUpdate",this.stageStatusUpdateListener),(t.self.permissions.canProduceAudio==="ALLOWED"||t.self.permissions.canProduceVideo==="ALLOWED"||t.self.permissions.canProduceScreenshare==="ALLOWED")&&await this.handleAutoPlayError()):await this.handleAutoPlayError()),await this.handleEvents(t)}render(){return l(O,null,this.showPlayDialog&&l("dyte-dialog",{open:!0,onDyteDialogClose:this.onDyteDialogClose,hideCloseButton:!0,disableEscapeKey:!0,iconPack:this.iconPack,t:this.t},l("div",{class:"modal"},l("h3",null,this.t("audio_playback.title")),l("p",null,this.t("audio_playback.description")),l("dyte-button",{kind:"wide",onClick:()=>{this.audio.play(),this.onDyteDialogClose()},title:this.t("audio_playback"),iconPack:this.iconPack,t:this.t},this.t("audio_playback")))))}static get watchers(){return{meeting:["meetingChanged"]}}};DD.style=pue;var hue=Object.freeze({__proto__:null,dyte_participants_audio:DD});const gue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.participants-container{margin-bottom:var(--dyte-space-4, 16px);width:100%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-message{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}dyte-participant{width:100%}",LD=class{constructor(e){U(this,e),this.updateParticipants=()=>{this.getParticipants(this.search)},this.shouldShowStageList=()=>{var i,r,s;((i=this.meeting)===null||i===void 0?void 0:i.meta.viewType)==="LIVESTREAM"?this.showStageList=((s=(r=this.meeting)===null||r===void 0?void 0:r.stage)===null||s===void 0?void 0:s.status)==="ON_STAGE":this.showStageList=!0},this.meeting=void 0,this.config=Me,this.size=void 0,this.iconPack=N,this.view="sidebar",this.t=j(),this.search="",this.participants=[],this.showStageList=!1}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){var e,i;const{participants:r,self:s}=this.meeting;this.meeting!=null&&(this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),r.joined.removeListener("peerStartedPresenting",this.updateParticipants),r.joined.removeListener("peerStoppedPresenting",this.updateParticipants),s.removeListener("stageJoined",this.updateParticipants),s.removeListener("stageLeft",this.updateParticipants),s.removeListener("removedFromStage",this.updateParticipants),(i=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||i===void 0||i.removeListener("stageStatusUpdate",this.shouldShowStageList))}meetingChanged(e){var i;e!=null&&(this.participantJoinedListener=r=>{if(this.meeting.meta.viewType==="WEBINAR"&&r.webinarStageStatus!=="ON_STAGE")return;const s=this.search.toLowerCase();!r.name.toLowerCase().includes(s)||!r.id.toLowerCase().includes(s)||(this.participants=[...this.participants.filter(n=>n.id!==r.id),r])},this.participantLeftListener=r=>{this.participants=this.participants.filter(s=>s.id!==r.id)},e.participants.joined.addListener("participantJoined",this.participantJoinedListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener),e.participants.joined.addListener("peerStartedPresenting",this.updateParticipants),e.participants.joined.addListener("peerStoppedPresenting",this.updateParticipants),e.self.addListener("stageJoined",this.updateParticipants),e.self.addListener("stageLeft",this.updateParticipants),e.self.addListener("removedFromStage",this.updateParticipants),this.shouldShowStageList(),(i=e==null?void 0:e.stage)===null||i===void 0||i.on("stageStatusUpdate",this.shouldShowStageList))}searchChanged(e){this.getParticipants(e)}getParticipants(e){let i=[this.meeting.self,...this.meeting.participants.joined.toArray()];this.meeting.meta.viewType==="WEBINAR"&&(i=i.filter(r=>r.webinarStageStatus==="ON_STAGE")),e===""?this.participants=i:this.participants=i.filter(r=>{var s;return((s=r.name)!==null&&s!==void 0?s:r.id).toLowerCase().includes(e.toLowerCase())})}render(){if(!this.showStageList)return;const e={meeting:this.meeting,view:this.view,t:this.t,config:this.config,states:L,size:this.size,iconPack:this.iconPack};return l(O,null,l("div",{class:"participants-container"},l("div",{class:"heading-count",part:"heading-count"},this.t("participants")," (",this.participants.length,")"),l("ul",{class:"participants",part:"participants"},this.participants.map(i=>l(Ge,{element:"dyte-participant",defaults:e,props:{role:"listitem",participant:i},childProps:Object.assign(Object.assign({},e),{participant:i,size:this.size}),deepProps:!0})),this.participants.length===0&&l("div",{class:"empty-message",part:"empty-message"},this.search.length>0?this.t("search.could_not_find"):this.t("search.empty")))))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};LD.style=gue;var mue=Object.freeze({__proto__:null,dyte_participants_stage_list:LD});const fue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-2, 8px);display:flex;width:100%;flex-direction:column;font-size:14px}.stage-requested-participants{margin-bottom:var(--dyte-space-8, 32px)}.stage-requested-participants .bulk-actions{display:flex;gap:var(--dyte-space-2, 8px)}.stage-requested-participants .bulk-actions .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.stage-requested-participants .bulk-actions dyte-button{flex:1 1 0%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",ND=class{constructor(t){U(this,t),this.peerPresentingUpdateListener=()=>{this.stageRequestedParticipants=[this.meeting.self,...this.meeting.participants.joined.toArray()].filter(e=>e.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE")},this.updateStageRequestedParticipants=()=>{this.stageRequestedParticipants=this.meeting.participants.joined.toArray().filter(e=>e.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE")},this.acceptStageRequest=async e=>{if(this.meeting.meta.viewType==="WEBINAR"){const{id:i}=e,r=this.meeting.participants.joined.get(i);r!==void 0&&await r.acceptJoinStageRequest(),this.updateStageRequestedParticipants()}else if(this.meeting.meta.viewType==="LIVESTREAM"){const{userId:i}=e;await this.meeting.stage.grantAccess([i])}},this.rejectStageRequest=async e=>{if(this.meeting.meta.viewType==="WEBINAR"){const{id:i}=e,r=this.meeting.participants.joined.get(i);r!==void 0&&await r.rejectRequestToJoinStage(),this.updateStageRequestedParticipants()}else if(this.meeting.meta.viewType==="LIVESTREAM"){const{userId:i}=e;await this.meeting.stage.denyAccess([i])}},this.acceptAllStageRequest=async()=>{if(this.meeting.meta.viewType==="WEBINAR"){const e=this.meeting.participants.joined.toArray().filter(i=>i.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE").map(i=>({id:i.id,requestToJoinType:"REQUEST_TO_PRESENT"}));await this.meeting.participants.acceptAllRequestToJoinStageRequests(e),this.updateStageRequestedParticipants()}else this.meeting.meta.viewType==="LIVESTREAM"&&await this.meeting.stage.grantAccess(this.stageRequestedParticipants.map(e=>e.userId))},this.denyAllStageRequest=async()=>{var e;if(this.meeting.meta.viewType==="WEBINAR"){const i=this.meeting.participants.joined.toArray().filter(r=>r.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE");await Promise.all(i.map(async r=>await r.rejectRequestToJoinStage())),this.updateStageRequestedParticipants()}else this.meeting.meta.viewType==="LIVESTREAM"&&await((e=this.meeting.stage)===null||e===void 0?void 0:e.denyAccess(this.stageRequestedParticipants.map(i=>i.userId)))},this.shouldShowStageRequests=()=>this.meeting.self.permissions.acceptPresentRequests&&this.stageRequestedParticipants.length>0,this.updateRequestList=async e=>{var i,r,s,n;this.meeting.meta.viewType==="WEBINAR"?this.stageRequestedParticipants=(i=[this.meeting.self,...this.meeting.participants.joined.toArray()])===null||i===void 0?void 0:i.filter(a=>a.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"):this.meeting.meta.viewType==="LIVESTREAM"&&this.meeting.self.permissions.acceptPresentRequests&&(e||(e=(n=(s=await((r=this.meeting.stage)===null||r===void 0?void 0:r.getAccessRequests()))===null||s===void 0?void 0:s.stageRequests)!==null&&n!==void 0?n:[]),this.stageRequestedParticipants=e.map(a=>Object.assign(Object.assign({},a),{name:a.displayName})))},this.meeting=void 0,this.config=Me,this.size=void 0,this.iconPack=N,this.view="sidebar",this.t=j(),this.stageRequestedParticipants=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){const{participants:t,self:e}=this.meeting;this.participantLeftListener&&t.joined.removeListener("participantLeft",this.participantLeftListener),this.peerRequestToJoinStageListener&&t.joined.removeListener("peerRequestToJoinStage",this.peerRequestToJoinStageListener),this.peerAcceptedToJoinStageListener&&t.joined.removeListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),this.peerRejectedToJoinStageListener&&t.joined.removeListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),t.joined.removeListener("peerStartedPresenting",this.peerPresentingUpdateListener),t.joined.removeListener("peerStoppedPresenting",this.peerPresentingUpdateListener),e.removeListener("stageJoined",this.peerPresentingUpdateListener),e.removeListener("stageLeft",this.peerPresentingUpdateListener),e.removeListener("removedFromStage",this.peerPresentingUpdateListener)}meetingChanged(t){var e;t!=null&&(this.participantLeftListener=i=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!==i.id)},this.peerRequestToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(s=>s.id!=i);const r=t.participants.joined.get(i);r!==void 0&&(this.stageRequestedParticipants=[...this.stageRequestedParticipants,r])},this.peerAcceptedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.peerRejectedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.updateRequestList(),t.participants.joined.addListener("peerRequestToJoinStage",this.peerRequestToJoinStageListener),t.participants.joined.addListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),t.participants.joined.addListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),t.participants.joined.addListener("peerStartedPresenting",this.peerPresentingUpdateListener),t.participants.joined.addListener("peerStoppedPresenting",this.peerPresentingUpdateListener),(e=t.stage)===null||e===void 0||e.on("stageAccessRequestUpdate",this.updateRequestList),t.participants.joined.addListener("participantLeft",this.participantLeftListener),t.self.addListener("stageJoined",this.peerPresentingUpdateListener),t.self.addListener("stageLeft",this.peerPresentingUpdateListener),t.self.addListener("removedFromStage",this.peerPresentingUpdateListener))}render(){if(!(this.view!=="sidebar"||!this.shouldShowStageRequests()))return l("div",{class:"stage-requested-participants"},l("div",{class:"heading-count",part:"staged-heading-count"},this.t("stage_request.header_title")," (",this.stageRequestedParticipants.length,")"),l("ul",{class:"participants",part:"staged-participants"},this.stageRequestedParticipants.map(t=>l("li",{class:"waiting-participant",key:t.id},l("div",{class:"participant-details"},l("dyte-avatar",{participant:t,size:"sm",iconPack:this.iconPack,t:this.t}),l("p",{class:"name",title:t.name},t.name)),l("div",{class:"waitlist-controls"},l("dyte-tooltip",{label:this.t("stage_request.deny_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},l("dyte-button",{variant:"secondary",kind:"icon",onClick:()=>this.rejectStageRequest(t),iconPack:this.iconPack,t:this.t},l("dyte-icon",{class:"deny",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))),l("dyte-tooltip",{label:this.t("stage_request.accept_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},l("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.acceptStageRequest(t)},l("dyte-icon",{class:"accept",icon:this.iconPack.checkmark}))))))),l("div",{class:"bulk-actions"},l("dyte-button",{class:"accept-all-button",variant:"secondary",iconPack:this.iconPack,t:this.t,onClick:this.acceptAllStageRequest},this.t("stage_request.accept_all")),l("dyte-button",{class:"deny-all-button",variant:"danger",iconPack:this.iconPack,t:this.t,onClick:this.denyAllStageRequest},this.t("stage_request.deny_all"))))}static get watchers(){return{meeting:["meetingChanged"]}}};ND.style=fue;var vue=Object.freeze({__proto__:null,dyte_participants_stage_queue:ND});const yue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.waiting-participants-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .waiting-participants-count{right:var(--dyte-space-4, 16px);top:auto}",UD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.updateStageRequests=async e=>{var i,r,s;e||(e=(s=(r=await((i=this.meeting.stage)===null||i===void 0?void 0:i.getAccessRequests()))===null||r===void 0?void 0:r.stageRequests)!==null&&s!==void 0?s:[]),this.stageRequestedParticipants=e},this.updateCanView=()=>{this.canViewParticipants=Uw(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.participantsActive=!1,this.waitlistedParticipants=[],this.stageRequestedParticipants=[],this.canViewParticipants=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),Ql("sidebar",()=>this.statesChanged())}disconnectedCallback(){var t,e,i;this.meeting!=null&&((e=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.updateCanView),this.waitlistedParticipantJoinedListener&&this.meeting.participants.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&this.meeting.participants.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener),this.peerRequestToJoinStateListener&&this.meeting.participants.joined.removeListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),this.peerAcceptedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),this.peerRejectedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),this.peerRejectedToJoinStageListener&&this.meeting.participants.joined.addListener("peerStoppedPresenting",this.peerRejectedToJoinStageListener),(i=this.meeting.stage)===null||i===void 0||i.removeListener("stageAccessRequestUpdate",this.updateStageRequests))}meetingChanged(t){var e;t!=null&&(this.canViewParticipants=Uw(t),(e=t==null?void 0:t.stage)===null||e===void 0||e.on("stageStatusUpdate",this.updateCanView),t.self.permissions.acceptWaitingRequests&&(this.waitlistedParticipants=t.participants.waitlisted.toArray(),this.waitlistedParticipantJoinedListener=i=>{this.waitlistedParticipants.some(r=>r.id===i.id)||(this.waitlistedParticipants=[...this.waitlistedParticipants,i])},this.waitlistedParticipantLeftListener=i=>{this.waitlistedParticipants=this.waitlistedParticipants.filter(r=>r.id!==i.id)},t.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),t.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener)),this.meeting.self.permissions.acceptPresentRequests&&(this.meeting.meta.viewType==="WEBINAR"&&(this.peerRequestToJoinStateListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(s=>s.id!=i);const r=t.participants.joined.get(i);r!==void 0&&this.stageRequestedParticipants.push(r)},this.peerAcceptedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.peerRejectedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.stageRequestedParticipants=this.meeting.participants.joined.toArray().filter(i=>i.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"),t.participants.joined.addListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),t.participants.joined.addListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),t.participants.joined.addListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),t.participants.joined.addListener("peerStoppedPresenting",this.peerRejectedToJoinStageListener)),this.meeting.meta.viewType==="LIVESTREAM"&&(this.updateStageRequests(),t==null||t.stage.on("stageAccessRequestUpdate",this.updateStageRequests))))}statesChanged(t){const e=t||L;e!=null&&(this.participantsActive=e.activeSidebar===!0&&e.sidebar==="participants")}toggleParticipantsTab(){const t=this.states||L;this.participantsActive=!(t!=null&&t.activeSidebar&&(t==null?void 0:t.sidebar)==="participants"),L.activeSidebar=this.participantsActive,L.sidebar=this.participantsActive?"participants":void 0,this.stateUpdate.emit({activeSidebar:this.participantsActive,sidebar:this.participantsActive?"participants":void 0,activeMoreMenu:!1,activeAI:!1}),L.activeMoreMenu=!1}render(){if(!this.canViewParticipants)return;const t=this.t("participants"),e=this.waitlistedParticipants.length+this.stageRequestedParticipants.length;return l(O,{title:t},e!==0&&!this.participantsActive&&l("div",{class:"waiting-participants-count",part:"waiting-participants-count"},l("span",null,e<=100?e:"99+")),l("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.participantsActive},onClick:()=>this.toggleParticipantsTab(),icon:this.iconPack.participants,label:t,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};UD.style=yue;var bue=Object.freeze({__proto__:null,dyte_participants_toggle:UD});const wue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.list{margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column}h3,.heading-count{margin:var(--dyte-space-0, 0px);align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-message{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}",jD=class{constructor(t){U(this,t),this.updateStageViewers=()=>{this.getViewers(this.search)},this.shouldShowViewers=()=>this.meeting.meta.viewType==="WEBINAR",this.meeting=void 0,this.config=Me,this.size=void 0,this.iconPack=N,this.view="sidebar",this.search="",this.t=j(),this.stageViewers=[]}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}meetingChanged(t){t!=null&&(this.participantJoinedListener=e=>{if(e.webinarStageStatus==="ON_STAGE")return;const i=this.search.toLowerCase();!e.name.toLowerCase().includes(i)||!e.id.toLowerCase().includes(i)||(this.stageViewers=[...this.stageViewers.filter(r=>r.id!==e.id),e])},this.participantLeftListener=e=>{this.stageViewers=this.stageViewers.filter(i=>i.id!==e.id)},t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),t.participants.joined.addListener("peerStartedPresenting",this.updateStageViewers),t.participants.joined.addListener("peerStoppedPresenting",this.updateStageViewers),t.self.addListener("stageJoined",this.updateStageViewers),t.self.addListener("stageLeft",this.updateStageViewers),t.self.addListener("removedFromStage",this.updateStageViewers))}searchChanged(t){this.getViewers(t)}disconnectedCallback(){const{participants:t,self:e}=this.meeting;this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),t.joined.removeListener("peerStartedPresenting",this.updateStageViewers),t.joined.removeListener("peerStoppedPresenting",this.updateStageViewers),e.removeListener("stageJoined",this.updateStageViewers),e.removeListener("stageLeft",this.updateStageViewers),e.removeListener("removedFromStage",this.updateStageViewers)}getViewers(t){let e=[this.meeting.self,...this.meeting.participants.joined.toArray()].filter(i=>i.webinarStageStatus!=="ON_STAGE");t===""?this.stageViewers=e:this.stageViewers=e.filter(i=>{var r;return((r=i.name)!==null&&r!==void 0?r:i.id).toLowerCase().includes(t.toLowerCase())})}render(){if(!(this.view!=="sidebar"||!this.shouldShowViewers()))return l("div",{class:"list"},l("div",{class:"heading-count",part:"heading-count"},this.t("viewers")," (",this.stageViewers.length,")"),l("ul",{class:"participants",part:"participants"},this.stageViewers.map(t=>{if(t.webinarStageStatus!=="ON_STAGE")return l("dyte-participant",{role:"listitem",key:t.id,meeting:this.meeting,participant:t,view:this.view,iconPack:this.iconPack,t:this.t})}),this.stageViewers.length===0&&l("div",{class:"empty-message",part:"empty-message"},this.search.length>0?this.t("participants.errors.empty_results"):this.t("participants.empty_list"))))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};jD.style=wue;var _ue=Object.freeze({__proto__:null,dyte_participants_viewer_list:jD});const Sue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-4, 16px);margin-bottom:calc(var(--dyte-space-2, 8px) * -1);display:flex;width:100%;flex-direction:column;font-size:14px}.waiting-participants{margin-bottom:var(--dyte-space-8, 32px)}.waiting-participants .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",$D=class{constructor(t){U(this,t),this.acceptWaitingRoomRequest=async e=>{await this.meeting.participants.acceptWaitingRoomRequest(e)},this.acceptAllWaitingRoomRequests=async()=>{const e=this.waitlistedParticipants.map(i=>this.meeting.participants.acceptWaitingRoomRequest(i.id));await Promise.all(e)},this.rejectWaitingRoomRequest=async e=>{await this.meeting.participants.rejectWaitingRoomRequest(e)},this.shouldShowWaitlist=()=>this.meeting.meta.viewType==="LIVESTREAM"?!1:this.meeting.self.permissions.acceptWaitingRequests&&this.waitlistedParticipants.length!==0,this.meeting=void 0,this.config=Me,this.size=void 0,this.iconPack=N,this.view="sidebar",this.t=j(),this.waitlistedParticipants=[]}disconnectedCallback(){const{participants:t}=this.meeting;this.waitlistedParticipantJoinedListener&&t.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&t.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener)}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){t!=null&&(this.waitlistedParticipants=t.participants.waitlisted.toArray(),this.waitlistedParticipantJoinedListener=e=>{this.waitlistedParticipants.some(i=>i.id===e.id)||(this.waitlistedParticipants=[...this.waitlistedParticipants,e])},this.waitlistedParticipantLeftListener=e=>{this.waitlistedParticipants=this.waitlistedParticipants.filter(i=>i.id!==e.id)},t.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),t.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener))}render(){if(!(this.view!=="sidebar"||!this.shouldShowWaitlist()))return l("div",{class:"waiting-participants"},l("div",{class:"heading-count",part:"waitlisted-heading-count"},this.t("waitlist.header_title")," (",this.waitlistedParticipants.length,")"),l("ul",{class:"participants",part:"waitlisted-participants"},this.waitlistedParticipants.map(t=>l("li",{class:"waiting-participant",key:t.id},l("div",{class:"participant-details"},l("dyte-avatar",{participant:t,size:"sm",iconPack:this.iconPack,t:this.t}),l("p",{class:"name",title:t.name},t.name)),l("div",{class:"waitlist-controls"},l("dyte-tooltip",{label:this.t("waitlist.deny_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},l("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.rejectWaitingRoomRequest(t.id)},l("dyte-icon",{class:"deny",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))),l("dyte-tooltip",{label:this.t("waitlist.accept_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},l("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.acceptWaitingRoomRequest(t.id)},l("dyte-icon",{class:"accept",icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t}))))))),l("dyte-button",{class:"accept-all-button",variant:"secondary",kind:"wide",iconPack:this.iconPack,t:this.t,onClick:this.acceptAllWaitingRoomRequests},this.t("waitlist.accept_all")))}static get watchers(){return{meeting:["meetingChanged"]}}};$D.style=Sue;var Eue=Object.freeze({__proto__:null,dyte_participants_waiting_list:$D});const kue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:block;width:560px;padding:var(--dyte-space-6, 24px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.actions{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.text-icon{display:inline-block;vertical-align:middle}h2{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-4, 16px)}h2 .text-icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-4, 16px)}.need-help-link{display:inline-block;text-underline-offset:2px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-text-opacity))}.need-help-link:hover{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}a dyte-icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) .actions{flex-direction:column;align-items:flex-start;justify-content:center}:host([size='sm']) .action{width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.actions{margin-top:var(--dyte-space-6, 24px)}.actions dyte-button{flex:1 1 0%}",zD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.continue=()=>{this.stateUpdate.emit({activePermissionsMessage:{enabled:!1}}),L.activePermissionsMessage={enabled:!1}},this.reload=()=>{typeof window<"u"&&window.location.reload()},this.meeting=void 0,this.t=j(),this.iconPack=N,this.states=void 0,this.device=void 0}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){t!=null&&(this.device=t.self.device)}getLink(t){let e;switch(t){case"audio":e="microphone";break;case"video":e="camera";break;default:e="screenshare";break}const i="https://www.google.com/search?q=";let r=`Allow+${e}+access`;if(this.device!=null){const{browserName:s,isMobile:n}=this.device;r+="+"+s,n&&(r+="+mobile")}return i+r}isDeniedBySystem(){var t;const e=(t=this.meeting)===null||t===void 0?void 0:t.self.mediaPermissions;return e==null?!1:!!Object.values(e).includes("SYSTEM_DENIED")}getTitle(){var t,e,i;const r=this.isDeniedBySystem(),s=(i=(e=(t=this.states)===null||t===void 0?void 0:t.activePermissionsMessage)===null||e===void 0?void 0:e.kind)!==null&&i!==void 0?i:"audio";return r?this.t(`perm_sys_denied.${s}`):this.t(`perm_denied.${s}`)}getMessage(){var t,e,i,r;const{browserName:s,osName:n}=this.meeting.self.device,a=this.isDeniedBySystem(),o=(t=s.toLowerCase())!==null&&t!==void 0?t:"others",c=n??"others",d=(r=(i=(e=this.states)===null||e===void 0?void 0:e.activePermissionsMessage)===null||i===void 0?void 0:i.kind)!==null&&r!==void 0?r:"audio";return a?this.t(`perm_sys_denied.${d}.${c}.message`):this.t(`perm_denied.${d}.${o}.message`)}render(){var t,e,i;const r=this.isDeniedBySystem();return l(O,null,l("h2",null,l("dyte-icon",{class:"text-icon",icon:this.iconPack.warning,iconPack:this.iconPack,t:this.t}),this.getTitle()),l("p",null,this.getMessage()),!r&&l("a",{class:"need-help-link",href:this.getLink((i=(e=(t=this.states)===null||t===void 0?void 0:t.activePermissionsMessage)===null||e===void 0?void 0:e.kind)!==null&&i!==void 0?i:"audio"),target:"_blank",rel:"noreferrer external noreferrer noopener"},l("dyte-icon",{class:"text-icon",icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),this.t("cta.help")),l("div",{class:"actions"},l("dyte-button",{size:"lg",kind:"wide",variant:"secondary",onClick:this.continue,iconPack:this.iconPack,t:this.t},this.t("cta.continue")),l("dyte-button",{size:"lg",kind:"wide",onClick:this.reload,iconPack:this.iconPack,t:this.t},this.t("cta.reload"))),l("slot",null))}static get watchers(){return{meeting:["meetingChanged"]}}};zD.style=kue;var Tue=Object.freeze({__proto__:null,dyte_permissions_message:zD});const xue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",FD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.variant="button",this.meeting=void 0,this.states=void 0,this.config=Me,this.iconPack=N,this.size=void 0,this.t=j(),this.pipEnabled=!1,this.pipSupported=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){}statesChanged(t){const e=t||L;(e==null?void 0:e.activePipMode)!=null&&(this.pipEnabled=e.activePipMode)}meetingChanged(t){var e,i;if(t===null)return;this.pipSupported=pt.isSupported()&&((e=t.self.config)===null||e===void 0?void 0:e.pipMode)&&((i=t.self.config)===null||i===void 0?void 0:i.viewType)!=="LIVESTREAM";const r=this.states||L;this.pipEnabled=r.activePipMode}togglePip(){const t=this.states||L,{activePipMode:e}=t;e!==!0?(pt.updateMediaSession(ur.CAMERA,this.meeting.self.videoEnabled),pt.updateMediaSession(ur.MIC,this.meeting.self.audioEnabled),pt.enable(),this.stateUpdate.emit({activePipMode:!0})):(pt.disable(),this.stateUpdate.emit({activePipMode:!1})),this.stateUpdate.emit({activeMoreMenu:!1}),L.activeMoreMenu=!1}render(){if(this.pipSupported)return l(O,{tabIndex:0,role:"log","aria-label":"Picture-in-Picture mode"},l("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.togglePip(),icon:this.pipEnabled?this.iconPack.pip_on:this.iconPack.pip_off,label:this.pipEnabled?this.t("pip_off"):this.t("pip_on"),variant:this.variant}))}static get watchers(){return{states:["statesChanged"],meeting:["meetingChanged"]}}};FD.style=xue;var Pue=Object.freeze({__proto__:null,dyte_pip_toggle:FD});const Cue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;height:var(--dyte-space-8, 32px);align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}header>div{display:flex;align-items:center}dyte-button{display:flex;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-direction:column;align-items:center;border-radius:9999px}dyte-button dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}iframe{display:block;flex:1 1 0%;margin:var(--dyte-space-0, 0px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-0, 0px);outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity))}.iframe-container{position:relative;height:100%;width:100%}.block-inputs{position:absolute;z-index:10;height:100%;width:100%;border-left-width:var(--dyte-border-width-none, 0);border-top-width:var(--dyte-border-width-lg, 4px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}iframe{height:100%;width:100%}",VD=class{constructor(t){U(this,t),this.canInteractWithPlugin=()=>{const e=this.plugin.id;if(!e)return!0;if(this.meeting.self.permissions.isV2){const i=this.meeting.self.permissions.plugins.config[e];return!i||!i.accessControl?!0:i.accessControl==="FULL_ACCESS"}else return!0},this.meeting=void 0,this.plugin=void 0,this.iconPack=N,this.t=j(),this.canClosePlugin=!1,this.viewModeEnabled=!1}componentDidLoad(){this.meetingChanged(this.meeting),this.pluginChanged(this.plugin)}meetingChanged(t){if(t==null)return;const e=this.canInteractWithPlugin();this.viewModeEnabled=!e,Li(()=>{this.canClosePlugin=t.self.permissions.plugins.canClose})}pluginChanged(t){this.toggleViewModeListener=e=>{this.viewModeEnabled=e},t!=null&&(t.addPluginView(this.iframeEl),t.addListener("toggleViewMode",this.toggleViewModeListener))}disconnectedCallback(){var t;(t=this.plugin)===null||t===void 0||t.removeListener("toggleViewMode",this.toggleViewModeListener)}render(){return this.plugin==null?null:l(O,null,l("header",{part:"header"},l("div",null,this.plugin.name),this.canClosePlugin&&l("div",null,l("dyte-button",{kind:"icon",onClick:()=>this.plugin.deactivate(),part:"button",iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))),l("div",{class:"iframe-container"},!this.canInteractWithPlugin()||this.viewModeEnabled?l("div",{class:"block-inputs"}):null,l("iframe",{ref:t=>this.iframeEl=t,part:"iframe"})))}static get watchers(){return{meeting:["meetingChanged"],plugin:["pluginChanged"]}}};VD.style=Cue;var Rue=Object.freeze({__proto__:null,dyte_plugin_main:VD});const Aue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",BD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.updateCanView=()=>{this.canViewPlugins=jw(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.pluginsActive=!1,this.canViewPlugins=!1}disconnectedCallback(){var t,e;(e=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.updateCanView)}connectedCallback(){this.statesChanged(this.states),this.meetingChanged(this.meeting),Ql("sidebar",()=>this.statesChanged())}meetingChanged(t){var e;t!=null&&(this.canViewPlugins=jw(t),(e=t==null?void 0:t.stage)===null||e===void 0||e.on("stageStatusUpdate",this.updateCanView))}statesChanged(t){const e=t||L;e!=null&&(this.pluginsActive=e.activeSidebar===!0&&e.sidebar==="plugins")}togglePlugins(){const t=this.states||L;this.pluginsActive=!(t!=null&&t.activeSidebar&&(t==null?void 0:t.sidebar)==="plugins"),this.stateUpdate.emit({activeSidebar:this.pluginsActive,sidebar:this.pluginsActive?"plugins":void 0,activeMoreMenu:!1,activeAI:!1}),L.activeSidebar=this.pluginsActive,L.sidebar=this.pluginsActive?"plugins":void 0,L.activeMoreMenu=!1}render(){if(!this.canViewPlugins)return;const t=this.t("plugins");return l(O,{title:t},l("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.pluginsActive},onClick:()=>this.togglePlugins(),icon:this.iconPack.rocket,label:t,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};BD.style=Aue;var Iue=Object.freeze({__proto__:null,dyte_plugins_toggle:BD});const Oue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .unread-count{right:var(--dyte-space-4, 16px);top:auto}",HD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.onPollsUpdate=({newPoll:e})=>{e===!0&&(this.unreadPollsCount+=1)},this.updateCanView=()=>{this.canViewPolls=Nw(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.pollsActive=!1,this.unreadPollsCount=0,this.canViewPolls=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),Ql("sidebar",()=>this.statesChanged())}disconnectedCallback(){var t,e,i;(t=this.meeting.polls)===null||t===void 0||t.removeListener("pollsUpdate",this.onPollsUpdate),(i=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||i===void 0||i.removeListener("stageStatusUpdate",this.updateCanView)}meetingChanged(t){var e;t&&t.polls&&(this.unreadPollsCount=t.polls.items.length,this.meeting.polls.addListener("pollsUpdate",this.onPollsUpdate),this.canViewPolls=Nw(t),(e=t==null?void 0:t.stage)===null||e===void 0||e.on("stageStatusUpdate",this.updateCanView))}statesChanged(t){const e=t||L;e!=null&&(this.pollsActive=e.activeSidebar===!0&&e.sidebar==="polls")}togglePollsTab(){const t=this.states||L;this.unreadPollsCount=0,this.pollsActive=!(t!=null&&t.activeSidebar&&(t==null?void 0:t.sidebar)==="polls"),this.stateUpdate.emit({activeSidebar:this.pollsActive,sidebar:this.pollsActive?"polls":void 0,activeMoreMenu:!1,activeAI:!1}),L.activeSidebar=this.pollsActive,L.sidebar=this.pollsActive?"polls":void 0,L.activeMoreMenu=!1}render(){if(!this.canViewPolls)return;const t=this.t("polls");return l(O,{title:t},this.unreadPollsCount!==0&&!this.pollsActive&&l("div",{class:"unread-count",part:"unread-count"},l("span",null,this.unreadPollsCount<=100?this.unreadPollsCount:"99+")),l("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.pollsActive},onClick:()=>this.togglePollsTab(),icon:this.iconPack.poll,label:t,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};HD.style=Oue;var Mue=Object.freeze({__proto__:null,dyte_polls_toggle:HD});const Due=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:block}:host[size='sm']{margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px)}.indicator{display:flex;flex-direction:row;align-items:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);-webkit-animation:blink 4s linear infinite;animation:blink 4s linear infinite}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='sm']) .indicator span{display:none}@-webkit-keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}@keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}",GD=class{constructor(t){U(this,t),this.setIsRecording=e=>{this.isRecording=e==="RECORDING"},this.meeting=void 0,this.size=void 0,this.t=j(),this.iconPack=N,this.isRecording=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;(t=this.meeting)===null||t===void 0||t.recording.removeListener("recordingUpdate",this.updateRecordingStatus)}meetingChanged(t){t!=null&&(this.setIsRecording(t.recording.recordingState),this.updateRecordingStatus=e=>{this.setIsRecording(e)},t.recording.addListener("recordingUpdate",this.updateRecordingStatus))}render(){return l(O,null,this.isRecording&&l("div",{class:"indicator","aria-label":this.t("recording.indicator"),part:"indicator"},l("dyte-icon",{icon:this.iconPack.recording,"aria-hidden":!0,tabIndex:-1,part:"icon",iconPack:this.iconPack,t:this.t}),l("span",null,this.t("recording.label"))))}static get watchers(){return{meeting:["meetingChanged"]}}};GD.style=Due;var Lue=Object.freeze({__proto__:null,dyte_recording_indicator:GD});const Nue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",WD=class{constructor(t){U(this,t),this.dyteAPIError=K(this,"dyteAPIError",7),this.toggleRecording=async()=>{var e,i;if(!(this.isLoading()||this.disabled))switch(this.recordingState){case"IDLE":try{await((e=this.meeting)===null||e===void 0?void 0:e.recording.start());return}catch{this.dyteAPIError.emit({trace:this.t("recording.start"),message:this.t("recording.error.start")})}return;case"RECORDING":try{await((i=this.meeting)===null||i===void 0?void 0:i.recording.stop());return}catch{this.dyteAPIError.emit({trace:this.t("recording.stop"),message:this.t("recording.error.stop")})}return;case"STARTING":case"STOPPING":default:return}},this.isLoading=()=>this.meeting==null||this.recordingState==="STARTING"||this.recordingState==="STOPPING",this.variant="button",this.meeting=void 0,this.t=j(),this.iconPack=N,this.size=void 0,this.disabled=!1,this.recordingState=void 0,this.canRecord=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;this.recordingStateUpdateListener&&((t=this.meeting)===null||t===void 0||t.recording.removeListener("recordingUpdate",this.recordingStateUpdateListener))}meetingChanged(t){t!=null&&(this.recordingState=t.recording.recordingState,this.canRecord=t.self.permissions.canRecord===!0,this.recordingStateUpdateListener=e=>{this.recordingState=e},t.recording.addListener("recordingUpdate",this.recordingStateUpdateListener))}getLabel(){switch(this.recordingState){case"IDLE":return this.t("recording.idle");case"RECORDING":return this.t("recording.stop");case"STARTING":return this.t("recording.starting");case"STOPPING":return this.t("recording.stopping");default:return this.t("recording.loading")}}getIcon(){switch(this.recordingState){case"IDLE":return this.iconPack.recording;case"RECORDING":return this.iconPack.stop_recording;case"STARTING":case"STOPPING":default:return this.iconPack.recording}}render(){if(this.canRecord)return l(O,{title:this.t("Record")},l("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.toggleRecording,icon:this.getIcon(),isLoading:this.isLoading(),label:this.t(this.getLabel()),variant:this.variant,disabled:this.disabled}))}static get watchers(){return{meeting:["meetingChanged"]}}};WD.style=Nue;var Uue=Object.freeze({__proto__:null,dyte_recording_toggle:WD});const jue=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-6, 24px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}.deny-access{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}h3,p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}h3{margin-bottom:var(--dyte-space-4, 16px);font-size:20px;line-height:1.5}p{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}p.empty-message{text-align:center;font-size:16px}label>input{margin-right:var(--dyte-space-2, 8px)}input{background-color:transparent;accent-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}#allow-requests-label{display:flex;align-items:center;font-size:12px}#actions{margin-top:var(--dyte-space-4, 16px);display:flex;align-items:center}dyte-button{flex:1 1 0%;border-radius:var(--dyte-border-radius-sm, 4px);font-size:12px}#participants-list{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);border-radius:var(--dyte-border-radius-md, 8px);max-height:var(--dyte-space-56, 224px);overflow-y:auto}.participant{box-sizing:border-box;display:flex;height:var(--dyte-space-14, 56px);align-items:center;padding-left:var(--dyte-space-1, 4px);padding-right:var(--dyte-space-1, 4px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-700, 44 44 44))}.participant:last-child{border-bottom-width:var(--dyte-border-width-none, 0)}.participant{cursor:pointer;font-size:14px}.participant input{margin-right:var(--dyte-space-3, 12px)}dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px)}`,qD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.acceptedRequestId=void 0,this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j()}disconnectedCallback(){}meetingChanged(t){var e,i,r,s,n;t!=null&&!this.acceptedRequestId&&!((r=(i=(e=this.meeting)===null||e===void 0?void 0:e.remote)===null||i===void 0?void 0:i.active)===null||r===void 0)&&r.id&&(this.acceptedRequestId=(n=(s=this.meeting.remote)===null||s===void 0?void 0:s.active)===null||n===void 0?void 0:n.id)}render(){var t,e,i,r;return!((e=(t=this===null||this===void 0?void 0:this.meeting)===null||t===void 0?void 0:t.remote)===null||e===void 0)&&e.incomingRequests.toArray().length?l(O,null,l("h3",null,this.t("remote_access.requests")),l("p",null,this.t("remote_access.allow")),l("div",{class:"scrollbar"},(r=(i=this===null||this===void 0?void 0:this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0?void 0:r.incomingRequests.toArray().map(s=>{const n=this.meeting.participants.joined.get(s.remotePeerId);return l("label",{onClick:()=>{this.acceptedRequestId=s.id},class:"participant",htmlFor:n.id},l("input",{type:"radio",checked:this.acceptedRequestId===s.id,name:"remote-access-participant",value:s.id}),l("dyte-avatar",{participant:n,size:"sm"}),n.name)})),l("div",{id:"actions"},l("dyte-button",{disabled:!this.acceptedRequestId,iconPack:this.iconPack,t:this.t,onClick:()=>{var s,n;(n=(s=this.meeting)===null||s===void 0?void 0:s.remote)===null||n===void 0||n.acceptControl(this.acceptedRequestId),this.stateUpdate.emit({activeRemoteAccessManager:!1})}},this.t("remote_access.grant")))):l(O,null,l("p",{class:"empty-message"},this.t("remote_access.empty")))}static get watchers(){return{meeting:["meetingChanged"]}}};qD.style=jue;var $ue=Object.freeze({__proto__:null,dyte_remote_access_manager:qD});const zue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",$P=()=>typeof navigator<"u"&&typeof navigator.mediaDevices<"u"&&"getDisplayMedia"in navigator.mediaDevices,JD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.dyteAPIError=K(this,"dyteAPIError",7),this.selfScreenShareListener=({screenShareEnabled:e})=>{this.screenShareEnabled=e;const i=this.screenShareCount+(e?1:-1);this.screenShareCount=Math.max(i,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}})},this.screenShareListener=({screenShareEnabled:e})=>{const i=this.screenShareCount+(e?1:-1);this.screenShareCount=Math.max(i,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}})},this.participantLeftListener=({screenShareEnabled:e})=>{e&&(this.screenShareCount=Math.max(this.screenShareCount-1,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}}))},this.selfJoinStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canScreenShare=!1},this.selfJoinStateRejectedListener=()=>{this.updateCanProduce(this.meeting)},this.mediaPermissionUpdateListener=({kind:e,message:i})=>{if(e==="screenshare"&&(this.shareScreenPermission=i,this.getState(),i==="COULD_NOT_START"&&this.dyteAPIError.emit({trace:this.t("screenshare.permissions"),message:this.t("screenshare.error.unknown")}),this.hasPermissionError())){const r={enabled:!0,kind:"screenshare"};this.stateUpdate.emit({activePermissionsMessage:r}),L.activePermissionsMessage=r}},this.reachedMaxScreenShares=()=>this.maxScreenShareCount>0&&this.screenShareCount>=this.maxScreenShareCount,this.toggleScreenShare=async()=>{var e;if(this.screenShareState.disable)return;if(this.hasPermissionError()){const r={enabled:!0,kind:"screenshare"};return this.stateUpdate.emit({activePermissionsMessage:r}),L.activePermissionsMessage=r,!1}const i=(e=this.meeting)===null||e===void 0?void 0:e.self;if(this.screenShareEnabled){i.disableScreenShare();return}i==null||!this.canScreenShare||this.reachedMaxScreenShares()||this.hasPermissionError()||(this.screenShareState=Object.assign(Object.assign({},this.screenShareState),{disable:!0}),await i.enableScreenShare(),this.screenShareState=Object.assign(Object.assign({},this.screenShareState),{disable:!1}),this.stateUpdate.emit({activeMoreMenu:!1}),L.activeMoreMenu=!1)},this.states=void 0,this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.maxScreenShareCount=-1,this.screenShareCount=0,this.screenShareEnabled=!1,this.canScreenShare=!1,this.shareScreenPermission="NOT_REQUESTED",this.screenShareState={tooltipLabel:this.t("screenshare.start"),label:this.t("screenshare.start"),icon:this.iconPack.share_screen_start,classList:{},showWarning:!1,disable:!1}}connectedCallback(){if(!$P()){lh.error("[dyte-screenshare-toggle] Device does not support screensharing.");return}this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,r,s,n,a,o,c,d,u;(t=this.meeting)===null||t===void 0||t.participants.joined.removeListener("screenShareUpdate",this.screenShareListener),(e=this.meeting)===null||e===void 0||e.participants.joined.removeListener("participantLeft",this.participantLeftListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("screenShareUpdate",this.selfScreenShareListener),(r=this.meeting)===null||r===void 0||r.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("joinStageRequestAccepted",this.selfJoinStateListener),(n=this.meeting)===null||n===void 0||n.self.removeListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("stageJoined",this.selfJoinStateListener),(o=this.meeting)===null||o===void 0||o.self.removeListener("stageLeft",this.selfStageLeftListener),(c=this.meeting)===null||c===void 0||c.self.removeListener("removedFromStage",this.selfJoinStateListener),(u=(d=this.meeting)===null||d===void 0?void 0:d.stage)===null||u===void 0||u.removeListener("stageStatusUpdate",this.selfJoinStateListener)}meetingChanged(t){if(t!=null){const{self:e,stage:i}=t;this.updateCanProduce(t),this.maxScreenShareCount=e.config.maxScreenShareCount,this.screenShareEnabled=e.screenShareEnabled;let r=0;for(const s of t.participants.joined.toArray())s.screenShareEnabled&&r++;this.screenShareCount=r,this.getState(),t.__internals__.logger.info("dyteScreenShare::initialise",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount,maxAllowedCount:this.maxScreenShareCount}}}),t.participants.joined.addListener("screenShareUpdate",this.screenShareListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),e.addListener("screenShareUpdate",this.selfScreenShareListener),e.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),e.addListener("joinStageRequestAccepted",this.selfJoinStateListener),e.addListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),e.addListener("stageJoined",this.selfJoinStateListener),e.addListener("stageLeft",this.selfStageLeftListener),e.addListener("removedFromStage",this.selfJoinStateListener),i==null||i.addListener("stageStatusUpdate",this.selfJoinStateListener)}}updateCanProduce(t){const{self:e,meta:i,stage:r}=t,s=e.permissions.canProduceScreenshare==="ALLOWED",n=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canScreenShare=!1,s&&!a?this.canScreenShare=!0:(n||a)&&(s&&r.status!=="OFF_STAGE"&&r.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canScreenShare=!0),e.permissions.canProduceScreenshare==="CAN_REQUEST"&&(n&&(e.webinarStageStatus==="ON_STAGE"||e.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canScreenShare=!0))}hasPermissionError(){return this.shareScreenPermission==="SYSTEM_DENIED"||this.shareScreenPermission==="DENIED"}getState(){let t="",e="",i="",r={};const s=this.hasPermissionError()&&!this.screenShareEnabled,n=this.reachedMaxScreenShares()&&!this.screenShareEnabled,a=this.shareScreenPermission==="COULD_NOT_START";this.screenShareEnabled&&!s?(e=this.t("screenshare.stop"),i=this.iconPack.share_screen_stop,r["red-icon"]=!0):(e=this.t("screenshare.start"),i=this.iconPack.share_screen_start),this.shareScreenPermission==="SYSTEM_DENIED"?(t=this.t("perm_sys_denied.screenshare"),r["red-icon"]=!0):this.shareScreenPermission==="DENIED"?(t=this.t("perm_denied.screenshare"),r["red-icon"]=!0):t=e,n&&(t=this.t("screenshare.error.max_count")),a&&(t=this.t("screenshare.error.unknown")),this.screenShareState={tooltipLabel:t,label:e,icon:i,classList:r,disable:s||n,showWarning:s||n||a}}render(){return!$P()||!this.canScreenShare?null:l(O,{title:this.screenShareState.label},l("dyte-tooltip",{placement:"top",kind:"block",label:this.screenShareState.tooltipLabel,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},l("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:this.screenShareState.label,icon:this.screenShareState.icon,class:this.screenShareState.classList,onClick:this.toggleScreenShare,disabled:this.screenShareState.disable,showWarning:this.screenShareState.showWarning})))}static get watchers(){return{meeting:["meetingChanged"]}}};JD.style=zue;var Fue=Object.freeze({__proto__:null,dyte_screen_share_toggle:JD}),Ir;(function(t){t.REQUEST_RECEIVED="REQUEST_RECEIVED",t.REQUEST_SENT="REQUEST_SENT",t.INCOMING_REQUEST_ACCEPTED="INCOMING_REQUEST_ACCEPTED",t.OUTGOING_REQUEST_ACCEPTED="OUTGOING_REQUEST_ACCEPTED",t.INCOMING_REQUEST_ENDED="INCOMING_REQUEST_ENDED",t.OUTGOING_REQUEST_ENDED="OUTGOING_REQUEST_ENDED"})(Ir||(Ir={}));const Vue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity))}::slotted(dyte-name-tag){position:absolute;left:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px);opacity:0.8}#video-container{position:absolute;display:block;height:100%;width:100%}#video-container .fit-in-container{-o-object-fit:fill;object-fit:fill}video{height:100%;width:100%;-o-object-fit:contain;object-fit:contain}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}:host([size='sm'][variant='gradient']) ::slotted(dyte-audio-visualizer){height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}video.visible{-webkit-animation:video-fadein 0.4s ease;animation:video-fadein 0.4s ease}#controls{display:none;position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}:host(:hover) #controls,:host(:active) #controls,:host(:focus-visible) #controls{display:flex}#full-screen-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}h3{margin-top:var(--dyte-space-10, 40px);margin-bottom:var(--dyte-space-6, 24px);text-align:center;font-size:20px;font-weight:500}:host([size='sm']) h3{font-size:16px}#self-message{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host(.isSelf) #self-view{flex:1 1 0%}:host(.isSelf) #video-container{position:static;aspect-ratio:auto;height:auto;width:50%;max-width:var(--dyte-space-96, 384px);border-radius:var(--dyte-border-radius-md, 8px);transition:0.6s ease}:host(.isSelf) #video-container.expand{width:60%;max-width:100%}.actions{display:flex;align-items:center;justify-content:center;gap:var(--dyte-space-2, 8px)}:host([size='sm'].isSelf) #video-container,:host([size='md'].isSelf) #video-container,:host([size='sm'].isSelf) #expand-btn,:host([size='md'].isSelf) #expand-btn{display:none}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.remote-control{z-index:10;height:100%;max-height:100%;flex:0 1 auto}#remote-control-self{position:absolute;top:var(--dyte-space-0, 0px);left:50%;z-index:10;width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:100%;box-sizing:border-box;display:flex;height:var(--dyte-space-8, 32px);align-items:center;overflow:hidden;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));transform:translateX(-50%)}#remote-control-self p{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}#remote-control-self dyte-button{height:100%;border-radius:var(--dyte-border-radius-none, 0);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity));font-size:12px}:host([size='sm']) #remote-control-self{height:auto;flex-direction:column}:host([size='sm']) #remote-control-self dyte-button{width:100%;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px)}:host([name-tag-position='bottom-right']) ::slotted(dyte-name-tag){left:auto;right:var(--dyte-space-3, 12px)}:host([name-tag-position='bottom-center']) ::slotted(dyte-name-tag){left:auto;right:auto}:host([name-tag-position='top-left']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);bottom:auto}:host([name-tag-position='top-right']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);left:auto;bottom:auto}:host([name-tag-position='top-center']) ::slotted(dyte-name-tag){left:auto;right:auto;bottom:auto;top:var(--dyte-space-3, 12px)}@-webkit-keyframes video-fadein{0%{opacity:0;transform:scale(1.4) translateY(20px)}100%{opacity:1;transform:scale(1) translateY(0)}}@keyframes video-fadein{0%{opacity:0;transform:scale(1.4) translateY(20px)}100%{opacity:1;transform:scale(1) translateY(0)}}::slotted(dyte-network-indicator){position:absolute;right:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px)}",KD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.fullScreenListener=()=>{this.isFullScreen=gD()},this.onRemoteUpdate=({payload:e,type:i})=>{var r,s;let n="";i===Ir.INCOMING_REQUEST_ACCEPTED&&(n=`${this.meeting.participants.joined.get(e.request.remotePeerId).name} is controlling your screen.`),i===Ir.OUTGOING_REQUEST_ACCEPTED&&(n=`You are controlling ${this.meeting.participants.joined.get(e.request.hostPeerId).name}'s screen.`),(i===Ir.INCOMING_REQUEST_ENDED||i===Ir.OUTGOING_REQUEST_ENDED)&&(n=""),i===Ir.REQUEST_RECEIVED&&!(!((s=(r=this.meeting)===null||r===void 0?void 0:r.remote)===null||s===void 0)&&s.active)&&this.stateUpdate.emit({activeRemoteAccessManager:!0}),this.remoteControlInfo=n},this.onMouseEvent=e=>{var i,r;this.shouldSkipEventTrigger()||(e.stopPropagation(),e.preventDefault(),(r=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0||r.mouseEvent(e,this.videoEl))},this.onKeyDown=e=>{var i,r;this.shouldSkipEventTrigger()||(r=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0||r.keyboardEvent(e)},this.toggleFullScreen=()=>{this.isFullScreen?(hD(),this.isFullScreen=!1):(pD(this.host),this.isFullScreen=!0)},this.hideFullScreenButton=!1,this.nameTagPosition="bottom-left",this.participant=void 0,this.meeting=void 0,this.variant="solid",this.size=void 0,this.iconPack=N,this.t=j(),this.videoExpanded=!1,this.screenShareEnabled=!1,this.isFullScreen=!1,this.remoteControlInfo=void 0}participantScreenshareUpdate(t){t.id===this.participant.id&&this.screenShareListener(t)}connectedCallback(){window==null||window.addEventListener("fullscreenchange",this.fullScreenListener),window==null||window.addEventListener("webkitfullscreenchange",this.fullScreenListener)}componentDidLoad(){this.participantChanged(this.participant)}disconnectedCallback(){var t,e;const{self:i}=this.meeting;this.participant.id===i.id&&this.screenShareListener?this.participant.removeListener("screenShareUpdate",this.screenShareListener):this.meeting.participants.joined.removeListener("screenShareUpdate",this.participantScreenshareUpdate),(e=(t=this.meeting)===null||t===void 0?void 0:t.remote)===null||e===void 0||e.removeListener("remoteUpdate",this.onRemoteUpdate),window==null||window.removeEventListener("fullscreenchange",this.fullScreenListener),window==null||window.removeEventListener("webkitfullscreenchange",this.fullScreenListener)}participantChanged(t){var e,i,r,s,n;if(t!=null){const{self:a}=this.meeting;this.screenShareListener=({screenShareEnabled:o,screenShareTracks:c})=>{const d=o&&c.video!=null;if(Li(()=>{this.screenShareEnabled=d}),d){const u=new MediaStream;u.addTrack(c.video),this.videoEl!=null&&(this.videoEl.srcObject=u,this.videoEl.play())}else this.videoEl!=null&&(this.videoEl.srcObject=void 0)},this.screenShareListener(t),!((i=(e=this.meeting)===null||e===void 0?void 0:e.remote)===null||i===void 0)&&i.active&&[this.meeting.remote.active.hostPeerId,this.meeting.remote.active.remotePeerId].includes(t==null?void 0:t.id)&&this.onRemoteUpdate({payload:{request:this.meeting.remote.active},type:((r=this.meeting.remote.active)===null||r===void 0?void 0:r.hostPeerId)===this.meeting.self.id?"INCOMING_REQUEST_ACCEPTED":"OUTGOING_REQUEST_ACCEPTED"}),t.id===a.id?t.addListener("screenShareUpdate",this.screenShareListener):this.meeting.participants.joined.addListener("screenShareUpdate",this.participantScreenshareUpdate.bind(this)),(n=(s=this.meeting)===null||s===void 0?void 0:s.remote)===null||n===void 0||n.addListener("remoteUpdate",this.onRemoteUpdate)}}shouldSkipEventTrigger(){var t,e,i;return this.meeting==null||this.participant==null?!0:!(!((t=this.meeting.remote)===null||t===void 0)&&t.active)||!this.meeting.participants.joined.get((e=this.meeting.remote)===null||e===void 0?void 0:e.active.hostPeerId)||((i=this.meeting.remote)===null||i===void 0?void 0:i.active.hostPeerId)!=this.participant.id}render(){var t,e,i,r,s,n,a,o;const c=((t=this.participant)===null||t===void 0?void 0:t.id)===((e=this.meeting)===null||e===void 0?void 0:e.self.id),d=this.isFullScreen?this.t("full_screen.exit"):this.t("full_screen"),u=this.isFullScreen?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize;return l(O,{class:{isSelf:c}},!!(!((r=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0)&&r.active&&this.remoteControlInfo)&&l("div",{id:"remote-control-self",key:"remote-control-self"},l("p",{class:"remote-control-message"},this.remoteControlInfo),l("dyte-button",{onClick:()=>{var p;return(p=this.meeting.remote)===null||p===void 0?void 0:p.endControl()},iconPack:this.iconPack,t:this.t},((n=(s=this.meeting.remote)===null||s===void 0?void 0:s.active)===null||n===void 0?void 0:n.hostPeerId)===this.meeting.self.id?"Revoke access":"Stop")),l("div",{key:"video-container",id:"video-container",class:{expand:this.videoExpanded},contentEditable:!!(!((a=this.meeting.remote)===null||a===void 0)&&a.active),onKeyDown:this.onKeyDown},l("video",{ref:p=>this.videoEl=p,class:{visible:this.screenShareEnabled,"fit-in-container":this.participant.supportsRemoteControl},playsInline:!0,autoPlay:!0,muted:!0,id:`screen-share-video-${this.participant.id}`,onMouseMove:this.onMouseEvent,onClick:this.onMouseEvent,onContextMenu:this.onMouseEvent})),l("div",{id:"controls",key:"controls"},!this.hideFullScreenButton&&!c&&mD()&&l("dyte-tooltip",{label:d,iconPack:this.iconPack,t:this.t},l("dyte-button",{id:"full-screen-btn",kind:"icon",onClick:this.toggleFullScreen,title:d,iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:u,"aria-hidden":!0,tabIndex:-1,iconPack:this.iconPack,t:this.t}))),((o=this.participant)===null||o===void 0?void 0:o.supportsRemoteControl)===!0&&l("dyte-menu",{id:"menu",key:"menu",iconPack:this.iconPack,t:this.t},l("dyte-button",{variant:"secondary",kind:"icon",slot:"trigger",iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.more_vertical,iconPack:this.iconPack,t:this.t})),l("dyte-menu-list",{iconPack:this.iconPack,t:this.t},!c&&l("dyte-menu-item",{style:{cursor:this.participant.supportsRemoteControl?"pointer":"not-allowed"},iconPack:this.iconPack,t:this.t,onClick:()=>{var p,g;!((p=this.participant)===null||p===void 0)&&p.supportsRemoteControl&&((g=this.meeting.remote)===null||g===void 0||g.requestControl(this.participant.id))}},"Request remote control"),c&&l("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>this.stateUpdate.emit({activeRemoteAccessManager:!0})},"Manage remote control requests")))),c&&l("div",{id:"self-message",key:"self-message"},l("h3",null,this.t("screenshare.shared")),l("div",{class:"actions"},this.meeting!=null&&l("dyte-button",{variant:"danger",onClick:()=>{this.meeting.self.disableScreenShare()},iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.share_screen_stop,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("screenshare.stop")),l("dyte-button",{variant:"secondary",id:"expand-btn",iconPack:this.iconPack,t:this.t,onClick:()=>{this.videoExpanded=!this.videoExpanded}},l("dyte-icon",{icon:this.videoExpanded?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize,slot:"start",iconPack:this.iconPack,t:this.t}),this.videoExpanded?this.t("screenshare.min_preview"):this.t("screenshare.max_preview")))),l("slot",null))}get host(){return jr(this)}static get watchers(){return{participant:["participantChanged"]}}};KD.style=Vue;var Bue=Object.freeze({__proto__:null,dyte_screenshare_view:KD});const Hue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}.title{font-size:20px;line-height:1}.back-btn,.dismiss-btn{border-radius:var(--dyte-border-radius-sm, 4px);background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.back-btn:hover,.dismiss-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside{box-sizing:border-box;display:flex;min-width:var(--dyte-space-56, 224px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px)}aside button{margin-top:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;width:100%;align-items:center;justify-content:space-between;border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);background-color:transparent;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));cursor:default;font-size:16px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px}aside button .right{display:flex;align-items:center}aside button .right dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}aside button .right dyte-icon:last-child{margin-left:var(--dyte-space-4, 16px)}aside button[type='button']{cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}aside button[type='button']:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside button[type='button']{border-right:var(--dyte-border-width-md, 2px) solid transparent}aside button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}aside button.active:hover{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}dyte-icon.poor{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}dyte-icon.poorest{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.good{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}main{display:flex;flex:1 1 0%;align-items:center;justify-content:center;padding-left:var(--dyte-space-6, 24px);padding-right:var(--dyte-space-6, 24px);box-sizing:border-box;width:100%;max-width:calc(100% - var(--dyte-space-56, 224px))}.dismiss-btn{position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']) aside{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([size='sm']) .dismiss-btn{top:var(--dyte-space-5, 20px);right:var(--dyte-space-4, 16px)}:host([size='sm']) aside{width:100%;padding-left:var(--dyte-space-0, 0px)}:host([size='sm']) aside button{border-radius:var(--dyte-border-radius-none, 0)}:host([size='sm']) aside button.active{border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}:host([size='sm']) aside button.active:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) aside.hide{display:none}:host([size='sm']) main{display:none;max-width:100%;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) main header{justify-content:center}:host([size='sm']) main header dyte-button{position:absolute;left:var(--dyte-space-4, 16px)}:host([size='sm']) main.active{display:block}",YD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.keyPressListener=e=>{e.key==="Escape"&&this.close()},this.selfJoinStageListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canProduceVideo=!1},this.selfJoinStageRejectedListener=()=>{this.updateCanProduce(this.meeting)},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.activeTab="connection",this.isMobileMainVisible=!1,this.networkStatus="good",this.canProduceVideo=!1}connectedCallback(){document.addEventListener("keydown",this.keyPressListener),this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,r,s,n;this.keyPressListener&&document.removeEventListener("keydown",this.keyPressListener),this.poorConnectionListener&&((t=this.meeting)===null||t===void 0||t.meta.removeListener("poorConnection",this.poorConnectionListener)),this.selfJoinStageListener&&((e=this.meeting)===null||e===void 0||e.self.removeListener("joinStageRequestAccepted",this.selfJoinStageListener)),this.selfJoinStageRejectedListener&&((i=this.meeting)===null||i===void 0||i.self.removeListener("joinStageRequestRejected",this.selfJoinStageRejectedListener)),this.selfJoinStageListener&&((r=this.meeting)===null||r===void 0||r.self.removeListener("stageJoined",this.selfJoinStageListener)),this.selfStageLeftListener&&((s=this.meeting)===null||s===void 0||s.self.removeListener("stageLeft",this.selfStageLeftListener)),this.selfJoinStageListener&&((n=this.meeting)===null||n===void 0||n.self.removeListener("removedFromStage",this.selfJoinStageListener))}meetingChanged(t){t!=null&&(this.updateCanProduce(t),this.canProduceVideo?this.activeTab="video":this.activeTab="audio",this.poorConnectionListener=({score:e})=>{e<7?this.networkStatus="poor":e<4&&(this.networkStatus="poorest"),setTimeout(()=>{this.networkStatus="good"},5e3)},t.meta.addListener("poorConnection",this.poorConnectionListener),t.self.addListener("joinStageRequestAccepted",this.selfJoinStageListener),t.self.addListener("joinStageRequestRejected",this.selfJoinStageRejectedListener),t.self.addListener("stageJoined",this.selfJoinStageListener),t.self.addListener("stageLeft",this.selfStageLeftListener),t.self.addListener("removedFromStage",this.selfJoinStageListener))}updateCanProduce(t){const{self:e,meta:i,stage:r}=t,s=e.permissions.canProduceVideo==="ALLOWED",n=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";if(!n&&!a)this.canProduceVideo=s;else{const o=e.permissions.canProduceVideo==="CAN_REQUEST";(s||o&&(n&&(e.webinarStageStatus==="ON_STAGE"||e.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE")))&&(this.canProduceVideo=!0)}}changeTab(t){this.activeTab=t,this.size==="sm"&&(this.isMobileMainVisible||(this.isMobileMainVisible=!0))}close(){this.stateUpdate.emit({activeSettings:!1}),L.activeSettings=!1}render(){if(this.meeting==null)return null;const t={meeting:this.meeting,states:this.states||L,iconPack:this.iconPack,t:this.t};return l(O,null,l("aside",{class:{hide:this.isMobileMainVisible},part:"menu"},l("header",null,l("h2",null,this.t("settings"))),l("button",{type:"button",class:{active:this.activeTab==="audio"},onClick:()=>this.changeTab("audio")},this.t("audio"),l("div",{class:"right"},l("dyte-icon",{icon:this.iconPack.mic_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&l("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),this.canProduceVideo&&l("button",{type:"button",class:{active:this.activeTab==="video"},onClick:()=>this.changeTab("video")},this.t("video"),l("div",{class:"right"},l("dyte-icon",{icon:this.iconPack.video_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&l("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),l("button",{type:"none",title:`Your network condition is ${this.networkStatus}`},this.t("connection"),l("div",{class:"right"},l("dyte-icon",{icon:this.iconPack.wifi,class:this.networkStatus,iconPack:this.iconPack,t:this.t})))),l("main",{class:{active:this.isMobileMainVisible},part:"main-content"},this.size==="sm"&&l("header",null,l("dyte-button",{kind:"icon",class:"back-btn",onClick:()=>this.isMobileMainVisible=!1,iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),l("h2",null,this.t(this.activeTab==="audio"?"audio":"video"))),this.activeTab==="audio"&&l("dyte-settings-audio",Object.assign({},t)),this.activeTab==="video"&&l("dyte-settings-video",Object.assign({},t))))}static get watchers(){return{meeting:["meetingChanged"]}}};YD.style=Hue;var Gue=Object.freeze({__proto__:null,dyte_settings:YD});const Wue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",QD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.variant="button",this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j()}toggleSettings(){var t;this.stateUpdate.emit({activeSettings:!(!((t=this.states)===null||t===void 0)&&t.activeSettings),activeMoreMenu:!1}),L.activeSettings=!L.activeSettings,L.activeMoreMenu=!1}render(){const t=this.t("settings");return l(O,{title:t},l("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleSettings(),icon:this.iconPack.settings,label:t,variant:this.variant}))}};QD.style=Wue;var que=Object.freeze({__proto__:null,dyte_settings_toggle:QD});const Jue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;padding:var(--dyte-space-4, 16px);height:100%;min-height:100%;width:100%;display:flex;place-items:center;justify-content:center;--dyte-controlbar-button-background-color:rgb(var(--dyte-colors-background-700, 44 44 44))}.container{width:100%;max-width:1080px;display:flex;align-items:center;justify-content:space-evenly}.metadata{width:100%;max-width:var(--dyte-space-80, 320px)}.label{display:flex;flex-direction:column;align-items:center}.label p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px}.name{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-6, 24px);text-align:center;font-size:28px;font-weight:500;letter-spacing:-0.025em;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}input{margin-bottom:var(--dyte-space-6, 24px);display:block;height:var(--dyte-space-10, 40px);width:100%;max-width:var(--dyte-space-80, 320px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));box-sizing:border-box;font-size:16px;outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}input::placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}input{border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}dyte-spinner{color:rgb(var(--dyte-colors-text-1000, 255 255 255));--icon-size:var(--dyte-space-8, 32px)}:host([size='sm']) .container,:host([size='md']) .container{height:100%;flex-direction:column;justify-content:space-evenly}dyte-camera-toggle{margin-left:var(--dyte-space-1\\.5, 6px)}dyte-participant-tile{height:auto;width:100%;max-width:var(--dyte-space-96, 384px)}",ZD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.join=async()=>{var e,i,r;((e=this.displayName)===null||e===void 0?void 0:e.trim())!==""&&!this.isJoining&&(this.isJoining=!0,(i=this.meeting)===null||i===void 0||i.self.setName(this.displayName),Bn.setItem("dyte-display-name",this.displayName),await((r=this.meeting)===null||r===void 0?void 0:r.joinRoom()))},this.meeting=void 0,this.states=L,this.size=void 0,this.config=Me,this.iconPack=N,this.t=j(),this.displayName=void 0,this.isJoining=!1,this.canEditName=!0}connectedCallback(){this.meetingChanged(this.meeting)}componentDidLoad(){var t;(t=this.inputEl)===null||t===void 0||t.focus()}meetingChanged(t){var e,i;t!=null&&(this.canEditName=(e=t.self.permissions.canEditDisplayName)!==null&&e!==void 0?e:!0,this.displayName=((i=t.self.name)===null||i===void 0?void 0:i.trim())||"",L.meeting="setup")}render(){var t,e,i,r;const s=((t=this.displayName)===null||t===void 0?void 0:t.trim())==="",n={meeting:this.meeting,config:this.config,states:this.states||L,size:this.size,iconPack:this.iconPack,t:this.t};return l(O,null,l("div",{class:"container"},l(Ge,{element:"dyte-participant-tile",defaults:n,props:{participant:(e=this.meeting)===null||e===void 0?void 0:e.self,size:"md"},childProps:{participant:(i=this.meeting)===null||i===void 0?void 0:i.self,size:"md"},deepProps:!0}),l("div",{class:"metadata"},((r=this.displayName)===null||r===void 0?void 0:r.trim())===""?l("div",{class:"name"},this.t("setup_screen.join_in_as")):l("div",{class:"label"},l("p",null,this.t("setup_screen.joining_as")),l("div",{class:"name"},Mr(this.displayName,20))),this.canEditName&&l("input",{placeholder:this.t("setup_screen.your_name"),value:this.displayName,autoFocus:!0,ref:a=>{this.inputEl=a},onInput:a=>{this.displayName=a.target.value},onKeyDown:a=>{a.key==="Enter"&&this.join()}}),l("dyte-button",{size:"lg",kind:"wide",onClick:this.join,disabled:s,iconPack:this.iconPack,t:this.t},this.isJoining?l("dyte-spinner",{iconPack:this.iconPack,t:this.t}):this.t("join")))))}static get watchers(){return{meeting:["meetingChanged"]}}};ZD.style=Jue;var Kue=Object.freeze({__proto__:null,dyte_setup_screen:ZD});const Yue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;max-width:var(--dyte-space-80, 320px);box-sizing:border-box;display:flex;flex-direction:column;position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);left:auto;z-index:50;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));border-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-border-opacity))}:host([view='sidebar']){right:var(--dyte-space-2, 8px);overflow:clip;border-radius:var(--dyte-border-radius-lg, 12px);--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgb(var(--dyte-colors-background-900, 26 26 26));--tw-shadow:var(--tw-shadow-colored)}:host([view='full-screen']){top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);max-width:100%}",XD=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.getTabs=()=>this.meeting.self.config?this.enabledSections.filter(e=>this.meeting.self.config.controlBar.elements[e.id]):this.enabledSections,this.close=()=>{this.stateUpdate.emit({activeSidebar:!1,sidebar:this.defaultSection}),L.sidebar=this.currentTab},this.enabledSections=[],this.defaultSection="chat",this.meeting=void 0,this.states=void 0,this.config=Me,this.iconPack=N,this.t=j(),this.size=void 0,this.view="sidebar",this.currentTab=this.defaultSection}connectedCallback(){this.viewChanged(this.view),this.statesChanged(this.states),this.meetingChanged(this.meeting),Ql("sidebar",()=>this.statesChanged())}disconnectedCallback(){var t,e;document.removeEventListener("keydown",this.keydownListener),(e=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.updateEnabledSections)}meetingChanged(t){var e,i;this.updateEnabledSections(t),(i=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||i===void 0||i.on("stageStatusUpdate",this.updateEnabledSections)}statesChanged(t){const e=t||L;e!=null&&e.sidebar&&(this.currentTab=e.sidebar)}viewChanged(t){t==="full-screen"&&(this.keydownListener=e=>{e.key==="Escape"&&this.close()},document.addEventListener("keydown",this.keydownListener))}viewSection(t){this.currentTab=t,this.stateUpdate.emit({activeSidebar:!0,sidebar:this.currentTab}),L.activeSidebar=!0,L.sidebar=this.currentTab}updateEnabledSections(t=this.meeting){const e=[];Lw(t)&&e.push({id:"chat",name:this.t("chat")}),Nw(t)&&e.push({id:"polls",name:this.t("polls")}),Uw(t)&&e.push({id:"participants",name:this.t("participants")}),jw(t)&&e.push({id:"plugins",name:this.t("plugins")}),this.enabledSections=e}render(){var t;const e={meeting:this.meeting,config:this.config,states:this.states||L,size:this.size,t:this.t,iconPack:this.iconPack};return((t=this.states)===null||t===void 0?void 0:t.activeSidebar)===!1||!this.currentTab?null:l(O,null,l("dyte-sidebar-ui",{tabs:this.getTabs(),currentTab:this.currentTab,view:this.view,onTabChange:i=>{this.viewSection(i.detail)},onSidebarClose:this.close},l("dyte-chat",Object.assign({},e,{slot:"chat"})),l("dyte-polls",Object.assign({},e,{slot:"polls"})),l("dyte-participants",Object.assign({},e,{slot:"participants"})),l("dyte-plugins",Object.assign({},e,{slot:"plugins"}))))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"],view:["viewChanged"]}}};XD.style=Yue;var Que=Object.freeze({__proto__:null,dyte_sidebar:XD});const Zue=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block;height:100%;width:100%}",e4=class{constructor(t){U(this,t),this.setHostDimensions=()=>{const{clientWidth:e,clientHeight:i}=this.host;this.dimensions={width:e,height:i}},this.participants=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Me,this.iconPack=N,this.t=j(),this.dimensions={width:0,height:0}}connectedCallback(){this.resizeObserver=new z3(this.setHostDimensions),this.resizeObserver.observe(this.host)}disconnectedCallback(){var t;(t=this.resizeObserver)===null||t===void 0||t.disconnect()}render(){const t={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},{width:e,height:i,getPosition:r}=kle({dimensions:this.dimensions,count:this.participants.length,aspectRatio:this.aspectRatio,gap:this.gap});return l(O,null,this.participants.map((s,n)=>{const{top:a,left:o}=r(n);return l(Ge,{element:"dyte-participant-tile",defaults:t,props:{participant:s,style:{position:"absolute",top:`${a}px`,left:`${o}px`,width:`${e}px`,height:`${i}px`},key:s.id,"data-participant":s.id},childProps:{participant:s},deepProps:!0})}),l("slot",null))}get host(){return jr(this)}};e4.style=Zue;var Xue=Object.freeze({__proto__:null,dyte_simple_grid:e4});const epe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%}main{flex:1 1 0%}.grid-width-sm{width:25%}.grid-width-md{width:50%}.grid-width-lg{width:66.666667%}:host([size='sm']),:host([size='md']){flex-direction:column}:host([size='md']) aside{max-height:var(--dyte-space-96, 384px);width:100%;max-width:100%}:host([size='md']) .grid-width-sm{height:25%}:host([size='md']) .grid-width-md{height:50%}:host([size='md']) .grid-width-lg{height:66.666667%}:host([size='sm']) aside{max-height:var(--dyte-space-96, 384px);width:100%;max-width:100%}:host([size='sm']) .grid-width-sm,:host([size='sm']) .grid-width-md,:host([size='sm']) .grid-width-lg{height:50%}:host([size='xl']) .grid-width-sm,:host([size='xl']) .grid-width-md,:host([size='xl']) .grid-width-lg{width:400px}:host([layout='column']){flex-direction:column}:host([layout='column']) main{flex:4}:host([layout='column']) aside{flex:2;max-width:100%;width:100%}",t4=class{constructor(t){U(this,t),this.getAdaptiveSize=e=>this.size==="sm"||e>3||this.size==="md"?"sm":"md",this.layout="row",this.participants=[],this.pinnedParticipants=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Me,this.iconPack=N,this.t=j(),this.gridSize=hy}render(){const t={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},e=this.participants.filter(i=>this.pinnedParticipants.some(r=>r.id!=i.id));return l(O,null,l("main",{part:"main"},l(Ge,{element:"dyte-simple-grid",defaults:t,props:{part:"main-grid",participants:this.pinnedParticipants,aspectRatio:this.aspectRatio,gap:this.gap,size:this.getAdaptiveSize(this.pinnedParticipants.length)}})),e.length>0&&l("aside",{part:"aside",class:this.gridSize.spotlight?`grid-width-${this.gridSize.spotlight}`:"grid-width-md"},l(Ge,{element:"dyte-simple-grid",defaults:t,props:{part:"aside-grid",participants:e,aspectRatio:this.aspectRatio,gap:this.gap,size:this.getAdaptiveSize(e.length)}})))}get host(){return jr(this)}};t4.style=epe;var tpe=Object.freeze({__proto__:null,dyte_spotlight_grid:t4});const ipe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;position:relative;overflow:hidden}",i4=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.iconPack=N,this.t=j()}render(){return l(O,null,l("slot",null))}};i4.style=ipe;var rpe=Object.freeze({__proto__:null,dyte_stage:i4});const spe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",r4=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.stageCallback=async()=>{var e,i,r,s,n,a,o;const c=(e=this.meeting.stage)===null||e===void 0?void 0:e.status;c==="ON_STAGE"&&await((r=(i=this===null||this===void 0?void 0:this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0?void 0:r.leave()),c==="OFF_STAGE"&&((n=(s=this===null||this===void 0?void 0:this.meeting)===null||s===void 0?void 0:s.stage)===null||n===void 0||n.requestAccess(),mae(this.meeting)&&this.stateUpdate.emit({activeJoinStage:!0})),c==="REQUESTED_TO_JOIN_STAGE"&&((o=(a=this===null||this===void 0?void 0:this.meeting)===null||a===void 0?void 0:a.stage)===null||o===void 0||o.cancelRequestAccess())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=N,this.stageStatus="OFF_STAGE",this.state={label:"",disabled:!1,icon:""},this.t=j()}connectedCallback(){this.meetingChanged(this.meeting)}stageStatusHandler(t,e){this.stageStatus=e,e==="ACCEPTED_TO_JOIN_STAGE"&&(t.self.setupTracks({audio:!1,video:!1}),this.stateUpdate.emit({activeJoinStage:!0})),this.state=this.getState()}disconnectedCallback(){var t,e;(e=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",i=>this.stageStatusHandler(this.meeting,i))}meetingChanged(t){var e,i,r,s;t!=null&&(this.stageStatus=(e=t.stage)===null||e===void 0?void 0:e.status,this.stageStatusHandler(t,(i=t.stage)===null||i===void 0?void 0:i.status),(s=(r=this.meeting)===null||r===void 0?void 0:r.stage)===null||s===void 0||s.on("stageStatusUpdate",n=>this.stageStatusHandler(t,n)))}getState(){let t="",e="",i=!1;switch(this.stageStatus){case"ON_STAGE":{e=this.iconPack.leave_stage,t="Leave Livestream",i=!1;break}case"ACCEPTED_TO_JOIN_STAGE":{e=this.iconPack.join_stage,t="Join Livestream",i=!0;break}case"REQUESTED_TO_JOIN_STAGE":{e=this.iconPack.join_stage,t="Requested",i=!1;break}default:{e=this.iconPack.join_stage,t="Join Livestream",i=!1;break}}return{label:t,disabled:i,icon:e}}render(){if(fae(this.meeting))return l(O,{title:this.state.label},l("dyte-tooltip",{placement:"top",kind:"block",label:this.state.label,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},l("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:this.state.label,icon:this.state.icon,onClick:this.stageCallback,disabled:this.state.disabled,showWarning:!1})))}static get watchers(){return{meeting:["meetingChanged"]}}};r4.style=spe;var npe=Object.freeze({__proto__:null,dyte_stage_toggle:r4});const ape=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}input{display:block;height:var(--dyte-space-10, 40px);padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-size:14px;border-width:var(--dyte-border-width-md, 2px);border-style:solid;border-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input::placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input:focus{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}input{border-radius:var(--dyte-border-radius-sm, 4px);outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}input:disabled{cursor:not-allowed}",s4=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.type="text",this.placeholder="",this.disabled=!1,this.iconPack=N,this.t=j()}connectedCallback(){this.stateUpdate.emit({abc:!1}),L.abc=!1}get value(){return this.input.value}render(){return l(O,null,l("input",{ref:t=>this.input=t,type:this.type,placeholder:this.placeholder,disabled:this.disabled}))}};s4.style=ape;var ope=Object.freeze({__proto__:null,dyte_text_field:s4});const cpe=class{constructor(t){U(this,t),this.meeting=void 0,this.size=void 0,this.config=Me,this.t=j(),this.iconPackUrl=void 0,this.loadConfigFromPreset=!0,this.applyDesignSystem=!0,this.joinRoom=!0,this.isReady=!1,this.iconPack=N}async iconPackUrlChanged(t){this.iconPack=await I3(t)}async meetingChanged(t){var e;if(t){if(!t.self.roomJoined&&this.joinRoom&&(this.isReady=!1,await t.joinRoom(),this.isReady=!0),this.loadConfigFromPreset&&t.self.config!=null){const i=t.self.config,{config:r}=A3(i,t);this.config===Me&&(this.config=Object.assign(Object.assign(Object.assign({},Me),r),{designTokens:Object.assign(Object.assign({},Me.designTokens),r.designTokens)}))}this.applyDesignSystem&&((e=this.config)===null||e===void 0?void 0:e.designTokens)!=null&&typeof document<"u"&&Cw(document.documentElement,this.config.designTokens),Array.from(this.hostEl.children).filter(i=>i.tagName.startsWith("DYTE-")).forEach(i=>{i.meeting=t,i.config=this.config,i.size=this.size,i.iconPack=this.iconPack,i.t=this.t})}}connectedCallback(){this.resizeObserver=new ResizeObserver(()=>this.handleResize()),this.resizeObserver.observe(this.hostEl),this.meetingChanged(this.meeting),this.iconPackUrlChanged(this.iconPackUrl)}handleResize(){this.size=O3(this.hostEl.clientWidth)}render(){return this.isReady?l("slot",null):null}get hostEl(){return jr(this)}static get watchers(){return{iconPackUrl:["iconPackUrlChanged"],meeting:["meetingChanged"]}}};var dpe=Object.freeze({__proto__:null,dyte_ui_provider:cpe});const lpe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.centered{display:flex;flex-direction:column;align-items:center}dyte-logo{margin-bottom:var(--dyte-space-8, 32px);height:var(--dyte-space-12, 48px)}p{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}",n4=class{constructor(t){U(this,t),this.meeting=void 0,this.config=Me,this.iconPack=N,this.t=j()}render(){return l(O,null,l("slot",null,l("div",{class:"centered",part:"content"},l("dyte-logo",{meeting:this.meeting,config:this.config,part:"logo",t:this.t}),l("p",null,this.t("waitlist.body_text")))))}};n4.style=lpe;var upe=Object.freeze({__proto__:null,dyte_waiting_screen:n4});const ppe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",a4=class{constructor(t){U(this,t),this.requestToJoinAcceptedListener=()=>{this.stageStatus="ACCEPTED"},this.requestToJoinRejectedListener=()=>{this.stageStatus="DENIED"},this.stageJoinedListener=()=>{this.stageStatus="ACCEPTED"},this.removeFromStageListener=()=>{this.stageStatus="NOT_REQUESTED"},this.selfStageLeftListener=()=>{this.stageStatus="NOT_REQUESTED"},this.requestStageListener=()=>{this.stageStatus="PENDING"},this.stageCallback=async()=>{var e;const i=(e=this.meeting)===null||e===void 0?void 0:e.self;if(!(i==null||!this.requestProduce&&!this.canPresent)){if(this.stageStatus==="PENDING"){await i.withdrawRequestToJoinStage();return}if(this.stageStatus==="ACCEPTED"){await i.leaveStage(),this.stageStatus="NOT_REQUESTED";return}this.canPresent?(await i.joinStage(),this.stageStatus="ACCEPTED"):(await i.requestToJoinStage(),this.stageStatus="PENDING")}},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.stageStatus="NOT_REQUESTED",this.canPresent=!1,this.requestProduce=!1}connectedCallback(){this.meetingChanged(this.meeting),this.meeting.self.addListener("joinStageRequestAccepted",this.requestToJoinAcceptedListener),this.meeting.self.addListener("joinStageRequestRejected",this.requestToJoinRejectedListener),this.meeting.self.addListener("stageJoined",this.stageJoinedListener),this.meeting.self.addListener("removedFromStage",this.removeFromStageListener),this.meeting.self.addListener("stageLeft",this.selfStageLeftListener),this.meeting.self.addListener("peerRequestToJoinStage",this.requestStageListener)}disconnectedCallback(){this.meeting.self.removeListener("joinStageRequestAccepted",this.requestToJoinAcceptedListener),this.meeting.self.removeListener("joinStageRequestRejected",this.requestToJoinRejectedListener),this.meeting.self.removeListener("removedFromStage",this.removeFromStageListener),this.meeting.self.removeListener("stageJoined",this.stageJoinedListener),this.meeting.self.removeListener("stageLeft",this.selfStageLeftListener),this.meeting.self.removeListener("peerRequestToJoinStage",this.requestStageListener)}meetingChanged(t){t!=null&&(this.requestProduce=t.self.permissions.requestProduce,this.canPresent=t.self.permissions.canPresent,(this.canPresent||t.self.webinarStageStatus==="ON_STAGE")&&(this.stageStatus="ACCEPTED"))}getState(){let t="",e="",i="",r={},s=!1;return this.stageStatus==="PENDING"?(e=this.t("stage_request.cancel_request"),t=this.t("stage_request.pending_tip"),i=this.iconPack.leave_stage,r["red-icon"]=!1):this.stageStatus==="ACCEPTED"?(e=this.t("stage_request.leave_stage"),t=this.t("stage_request.leave_tip"),i=this.iconPack.leave_stage,r["red-icon"]=!1,s=!1):this.stageStatus==="DENIED"?(e=this.t("stage_request.denied"),t=this.t("stage_request.denied_tip"),i=this.iconPack.join_stage,r["red-icon"]=!1,s=!0):(e=this.t("stage_request.request"),this.canPresent?t=this.t("stage_request.request"):t=this.t("stage_request.request_tip"),i=this.iconPack.join_stage,s=!1),{tooltipLabel:t,label:e,icon:i,classList:r,disabled:s}}render(){if(!this.requestProduce&&!this.canPresent||this.meeting.self.config.viewType!=="WEBINAR")return null;const{tooltipLabel:t,label:e,icon:i,classList:r,disabled:s}=this.getState();return l(O,{title:e},l("dyte-tooltip",{placement:"top",kind:"block",label:t,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},l("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:e,icon:i,class:r,onClick:this.stageCallback,disabled:s,showWarning:!1})))}static get watchers(){return{meeting:["meetingChanged"]}}};a4.style=ppe;var hpe=Object.freeze({__proto__:null,dyte_webinar_stage_toggle:a4});const gpe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;height:100%;width:100%;box-sizing:border-box}.content{position:relative;display:flex;height:100%;width:100%;flex-direction:column;overflow-y:auto}.waitlist-area{display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.listening-title{text-align:center;margin-top:var(--dyte-space-5, 20px);margin-bottom:var(--dyte-space-4, 16px)}.waitlist-grid{flex:1 1 0%}.grid{box-sizing:border-box;flex:1 1 0%;gap:var(--dyte-space-6, 24px);display:flex;align-content:center;justify-content:center;flex-wrap:wrap}:host([size='md']) .grid{gap:var(--dyte-space-4, 16px)}:host([size='sm']) .grid{gap:var(--dyte-space-3, 12px)}dyte-audio-tile{aspect-ratio:1 / 1;flex:none;width:calc(20%);max-width:var(--dyte-space-48, 192px);transition:all 0.3s}:host([size='md']) dyte-audio-tile{width:100%;max-width:var(--dyte-space-36, 144px)}:host([size='sm']) dyte-audio-tile{width:100%;max-width:var(--dyte-space-24, 96px)}`,o4=class{constructor(t){U(this,t),this.onParticipantListUpdate=()=>{if(!this.meeting)return;let e=this.meeting.participants.joined.toArray();this.hideSelf||(e=[...e,this.meeting.self]),this.onStageParticipants=e},this.meeting=void 0,this.config=void 0,this.states=void 0,this.iconPack=N,this.size=void 0,this.t=j(),this.hideSelf=!1,this.onStageParticipants=[],this.offStageParticipants=[]}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){!t||t.self.config.viewType!=="AUDIO_ROOM"||(this.onParticipantListUpdate(),t.participants.joined.addListener("participantJoined",this.onParticipantListUpdate),t.participants.joined.addListener("participantLeft",this.onParticipantListUpdate))}disconnectedCallback(){this.resizeObserver.disconnect(),this.resizeObserver=void 0,this.meeting.participants.joined.removeListener("participantJoined",this.onParticipantListUpdate),this.meeting.participants.joined.removeListener("participantLeft",this.onParticipantListUpdate)}renderGrid(t=[]){const e={meeting:this.meeting,size:this.size,config:this.config,t:this.t,iconPack:this.iconPack,states:this.states};return t.map(i=>l(Ge,{element:"dyte-audio-tile",defaults:e,props:{key:i.id,participant:i},childProps:{participant:i},deepProps:!0}))}render(){return l(O,null,l("div",{class:"content scrollbar"},l("div",{class:"stage grid"},this.renderGrid(this.onStageParticipants)),this.offStageParticipants.length>0&&l("div",{class:"waitlist-area"},l("div",{class:"listening-title"},this.offStageParticipants.length," ",this.t("grid.listening")),l("div",{class:"waitlist-grid grid"},this.renderGrid(this.offStageParticipants)))),l("slot",null))}get host(){return jr(this)}static get watchers(){return{meeting:["meetingChanged"]}}};o4.style=gpe;const mpe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;overflow:hidden;flex-wrap:wrap;align-content:center;align-items:center;justify-content:center;color:rgb(var(--dyte-colors-text-1000, 255 255 255));transition:0.4s}dyte-participant-tile{aspect-ratio:initial;box-sizing:border-box}.webinar-stage{box-sizing:border-box;display:flex;align-content:center;align-items:center;justify-content:center;text-align:center}.webinar-stage h2{margin:var(--dyte-space-0, 0px);font-weight:normal}.livestream-stage{box-sizing:border-box;margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;height:100%;flex-grow:1;align-content:center;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-md, 8px);text-align:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}dyte-viewer-count{display:none}dyte-livestream-indicator{display:none}@media only screen and (max-device-height: 480px) and (orientation: landscape){dyte-viewer-count[variant='embedded']{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-2, 8px);z-index:20;margin-top:var(--dyte-space-0, 0px);margin-left:var(--dyte-space-0, 0px);display:flex}dyte-livestream-indicator{position:absolute;top:var(--dyte-space-0, 0px);left:var(--dyte-space-2, 8px);z-index:20;margin-top:var(--dyte-space-0, 0px);margin-left:var(--dyte-space-0, 0px);display:flex}}",c4=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.hideSelf=!1,this.networkUpdateListener=({event:e})=>{this.connected=e==="connected"},this.meetingDisconnectedListener=()=>{this.networkUpdateListener({event:"disconnected"})},this.meetingConnectedListener=()=>{this.networkUpdateListener({event:"connected"})},this.eventCallback=e=>{const{self:i}=this.meeting;e===ur.CAMERA&&(i.videoEnabled?i.disableVideo():i.enableVideo()),e===ur.MIC&&(i.audioEnabled?i.disableAudio():i.enableAudio()),e===ur.END&&(pt.cleanup(),this.stateUpdate.emit({activePipMode:!1}),this.meeting.leaveRoom())},this.enablePipMediaControls=(e=this.meeting)=>{const i=e.self.permissions.canProduceAudio,r=e.self.permissions.canProduceVideo;i&&pt.mountAudioEvents(this.eventCallback),r&&pt.mountVideoEvents(this.eventCallback)},this.disablePipMediaControls=()=>{pt.unmountAudioEvents(),pt.unmountVideoEvents()},this.handlePipMediaControls=e=>{e==="ON_STAGE"?this.enablePipMediaControls():this.disablePipMediaControls()},this.filterParticipants=e=>{var i;if(this.overrides&&(!((i=this.overrides)===null||i===void 0)&&i.videoUnsubscribed)){const r=this.overrides.videoUnsubscribed.preset;r.length>0&&(e=e.filter(s=>!r.some(a=>s.presetName===void 0?!1:s.presetName.match(a))))}return e},this.onSelfVideoUpdateListener=({videoEnabled:e})=>{pt.updateMediaSession(ur.CAMERA,e)},this.onSelfAudioUpdateListener=({audioEnabled:e})=>{pt.updateMediaSession(ur.MIC,e)},this.onViewModeChanged=()=>{this.meeting!=null&&this.updateActiveParticipants()},this.onParticipantJoined=e=>{this.meeting!=null&&(this.participants.some(i=>i.id===e.id)||(this.participants=this.filterParticipants([e,...this.participants])),e.isPinned&&!this.pinnedParticipants.some(i=>i.id===e.id)&&(this.pinnedParticipants=this.pinnedParticipants.concat([e])),this.updateWebinarStage())},this.onParticipantLeft=e=>{this.participants=this.participants.filter(i=>i.id!==e.id),this.participants=this.participants.concat(this.meeting.participants.active.toArray().filter(i=>!this.participants.find(r=>r.id===i.id))),this.participants=this.filterParticipants(this.participants),this.pinnedParticipants=this.pinnedParticipants.filter(i=>i.id!==e.id),e.screenShareEnabled&&this.removeScreenShare(e),this.updateWebinarStage()},this.selfStageJoinListener=()=>{this.updateActiveParticipants()},this.selfStageLeaveListener=()=>{this.removeScreenShare(this.meeting.self),this.updateActiveParticipants()},this.onPresentationStart=()=>{this.meeting!=null&&this.updateActiveParticipants()},this.onPresentationEnd=e=>{this.meeting!=null&&(this.removePinned(e),this.removeScreenShare(e),this.updateActiveParticipants())},this.onScreenShareUpdate=e=>{e.screenShareEnabled?this.addScreenShare(e):this.removeScreenShare(e)},this.onSelfScreenShareUpdate=({screenShareEnabled:e})=>{e?this.addScreenShare(this.meeting.self):this.removeScreenShare(this.meeting.self)},this.onPluginStateUpdate=(e,{active:i})=>{i?this.plugins.some(r=>r.id===e.id)||(this.plugins=[...this.plugins,e]):this.plugins=this.plugins.filter(r=>r.id!==e.id)},this.onParticipantPinned=()=>{this.updateActiveParticipants()},this.onParticipantUnpinned=()=>{this.updateActiveParticipants()},this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.showWebinarStage=!1,this.showLiveStreamPlayer=!1,this.canCurrentPeerHost=!1,this.connected=!0,this.pipSupported=!1,this.pipEnabled=!1,this.layout="row",this.aspectRatio="16:9",this.meeting=void 0,this.gap=8,this.size=void 0,this.states=L,this.config=Me,this.iconPack=N,this.t=j(),this.gridSize=hy,this.overrides={}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectMeeting(t){var e,i;if(t==null)return;this.participants=[],this.plugins=[];const{self:r,participants:s,plugins:n,meta:a}=t;s.active.removeListener("participantJoined",this.onParticipantJoined),s.active.removeListener("participantLeft",this.onParticipantLeft),s.joined.removeListener("screenShareUpdate",this.onScreenShareUpdate),s.joined.removeListener("peerStartedPresenting",this.onPresentationStart),s.joined.removeListener("peerStoppedPresenting",this.onPresentationEnd),r.removeListener("screenShareUpdate",this.onSelfScreenShareUpdate),n==null||n.all.removeListener("stateUpdate",this.onPluginStateUpdate),s.pinned.removeListener("participantJoined",this.onParticipantPinned),s.pinned.removeListener("participantLeft",this.onParticipantUnpinned),r.removeListener("pinned",this.onParticipantPinned),r.removeListener("unpinned",this.onParticipantUnpinned),s.removeListener("viewModeChanged",this.onViewModeChanged),r.removeListener("stageJoined",this.selfStageJoinListener),r.removeListener("stageLeft",this.selfStageLeaveListener),r.removeListener("removedFromStage",this.selfStageLeaveListener),r.removeListener("videoUpdate",this.onSelfVideoUpdateListener),r.removeListener("audioUpdate",this.onSelfAudioUpdateListener),a.removeListener("disconnected",this.meetingDisconnectedListener),a.removeListener("connected",this.meetingConnectedListener),(e=t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.handlePipMediaControls),t.self.removeListener("stageJoined",this.enablePipMediaControls),t.self.removeListener("stageLeft",this.disablePipMediaControls),(i=t.stage)===null||i===void 0||i.removeListener("stageStatusUpdate",this.updateLiveStreamStage)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}overridesChanged(t){this.updateActiveParticipants()}screenShareParticipantsChanged(t){const e=t.length>0;this.stateUpdate.emit({activeScreenShare:e}),L.activeScreenShare=e}pluginsChanged(t){const e=t.length>0;this.stateUpdate.emit({activePlugin:e}),L.activePlugin=e}pinnedParticipantsChanged(t){const e=t.length>0;this.stateUpdate.emit({activeSpotlight:e}),L.activeSpotlight=e}updateActiveParticipants(){var t,e;const{self:i,participants:r}=this.meeting,s=((t=i.config)===null||t===void 0?void 0:t.viewType)==="WEBINAR"&&i.webinarStageStatus!=="ON_STAGE",n=(e=i.permissions)===null||e===void 0?void 0:e.isRecorder;this.hideSelf=s||n||i.permissions.hiddenParticipant,this.participants=this.filterParticipants([...r.active.toArray().filter(a=>a.id!==i.id),...r.viewMode==="ACTIVE_GRID"&&!i.isPinned&&!this.hideSelf?[i]:[]]),this.pinnedParticipants=[...r.pinned.toArray().filter(a=>a.id!==i.id),...i.isPinned&&!this.hideSelf?[i]:[]],this.screenShareParticipants=r.joined.toArray().filter(a=>a.screenShareEnabled),i.screenShareEnabled&&(this.screenShareParticipants=this.screenShareParticipants.concat([i])),this.updateWebinarStage()}updateWebinarStage(){this.meeting&&this.meeting.meta.viewType==="WEBINAR"?this.showWebinarStage=this.participants.length===0&&this.pinnedParticipants.length===0:this.showWebinarStage=!1}updateLiveStreamStage(){this.showLiveStreamPlayer=ch(this.meeting)}meetingChanged(t,e){var i,r,s;if(e!==null&&this.disconnectMeeting(e),t!=null){const{self:n,participants:a,plugins:o,meta:c,stage:d}=t,{config:u,permissions:p}=n,g=(u==null?void 0:u.viewType)==="WEBINAR"&&this.meeting.self.webinarStageStatus!=="ON_STAGE",m=p==null?void 0:p.isRecorder;if(this.hideSelf=g||m||p.hiddenParticipant,this.participants=this.filterParticipants([...a.active.toArray(),...!n.isPinned&&!this.hideSelf?[n]:[]]),this.pinnedParticipants=[...a.pinned.toArray(),...n.isPinned&&!this.hideSelf?[n]:[]],this.screenShareParticipants=a.joined.toArray().filter(w=>w.screenShareEnabled),this.plugins=(o==null?void 0:o.active.toArray())||[],(u==null?void 0:u.viewType)==="WEBINAR"&&(this.canCurrentPeerHost=p.acceptPresentRequests||p.canPresent,this.updateWebinarStage()),this.pipSupported=pt.isSupported()&&((i=t.self.config)===null||i===void 0?void 0:i.pipMode),this.pipSupported){const w=()=>{},v=()=>{this.stateUpdate.emit({activePipMode:!1})};pt.create(w,v,this.eventCallback),this.enablePipMediaControls(t),(r=t.stage)===null||r===void 0||r.on("stageStatusUpdate",this.handlePipMediaControls),t.self.on("stageJoined",this.enablePipMediaControls),t.self.on("stageLeft",this.disablePipMediaControls)}const f=document.pictureInPictureElement!==null,b=this.states||L;pt.isSupported()&&b.activePipMode!==f&&this.stateUpdate.emit({activePipMode:f}),a.active.addListener("participantJoined",this.onParticipantJoined),a.active.addListener("participantLeft",this.onParticipantLeft),a.joined.addListener("screenShareUpdate",this.onScreenShareUpdate),a.joined.addListener("peerStartedPresenting",this.onPresentationStart),a.joined.addListener("peerStoppedPresenting",this.onPresentationEnd),n.addListener("screenShareUpdate",this.onSelfScreenShareUpdate),o==null||o.all.addListener("stateUpdate",this.onPluginStateUpdate),a.pinned.addListener("participantJoined",this.onParticipantPinned),a.pinned.addListener("participantLeft",this.onParticipantUnpinned),n.addListener("pinned",this.onParticipantPinned),n.addListener("videoUpdate",this.onSelfVideoUpdateListener),n.addListener("audioUpdate",this.onSelfAudioUpdateListener),n.addListener("unpinned",this.onParticipantUnpinned),n.addListener("stageJoined",this.selfStageJoinListener),n.addListener("stageLeft",this.selfStageLeaveListener),n.addListener("removedFromStage",this.selfStageLeaveListener),c.addListener("disconnected",this.meetingDisconnectedListener),c.addListener("connected",this.meetingConnectedListener),d==null||d.addListener("stageStatusUpdate",this.updateLiveStreamStage.bind(this)),a.addListener("viewModeChanged",this.onViewModeChanged),!((s=t.stage)===null||s===void 0)&&s.status&&this.updateLiveStreamStage()}}addScreenShare(t){this.screenShareParticipants.some(e=>e.id===t.id)||(this.screenShareParticipants=[...this.screenShareParticipants,t])}removeScreenShare(t){this.screenShareParticipants=this.screenShareParticipants.filter(e=>e.id!==t.id)}removePinned(t){this.pinnedParticipants=this.pinnedParticipants.filter(e=>e.id!==t.id)}render(){const t={meeting:this.meeting,size:this.size,states:this.states||L,config:this.config,iconPack:this.iconPack,t:this.t};return!this.connected&&this.hideSelf?l("div",{class:"webinar-stage"},l("div",{class:"center"},l("h2",null,this.t("stage.reconnecting")))):this.showWebinarStage?l(O,null,l("div",{class:"webinar-stage"},l("div",{class:"center"},this.canCurrentPeerHost&&l("div",null,l("h2",null,this.t("stage.empty_host")),l("p",null,this.t("stage.empty_host_summary"))),!this.canCurrentPeerHost&&l("h2",null,this.t("stage.empty_viewer"))))):this.showLiveStreamPlayer?l(O,null,l("dyte-livestream-player",{meeting:this.meeting,size:this.size}),l("dyte-livestream-indicator",{meeting:this.meeting,size:"sm",t:this.t}),l("dyte-viewer-count",{meeting:this.meeting,variant:"embedded",t:this.t})):l(O,null,l(Ge,{element:"dyte-grid",defaults:t,childProps:{participants:this.participants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,pinnedParticipants:this.pinnedParticipants,aspectRatio:this.aspectRatio,gap:this.gap,layout:this.layout,gridSize:this.gridSize},onlyChildren:!0}),l("dyte-livestream-indicator",{meeting:this.meeting,size:"sm",t:this.t}),l("dyte-viewer-count",{meeting:this.meeting,variant:"embedded"}))}static get watchers(){return{overrides:["overridesChanged"],screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"],pinnedParticipants:["pinnedParticipantsChanged"],meeting:["meetingChanged"]}}};c4.style=mpe;var fpe=Object.freeze({__proto__:null,dyte_audio_grid:o4,dyte_video_grid:c4});const vpe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-sm, 4px)}@-webkit-keyframes bg-glow{25%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}50%{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}75%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}}@keyframes bg-glow{25%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}50%{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}75%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}}.glowing-card{-webkit-animation:bg-glow 0.8s;animation:bg-glow 0.8s}.selector-mode,.assign-mode{display:flex;flex-direction:column;align-items:center;padding:var(--dyte-space-2, 8px);cursor:pointer}.selector:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.show-on-hover{display:none}.header{width:100%;display:flex;align-items:center}.header dyte-icon{margin-left:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);cursor:pointer}.header .danger{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.header .hide{display:none}.header .rooms-container{display:flex;flex-grow:1;flex-direction:row;align-items:center;justify-content:flex-end}.header input{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));max-width:var(--dyte-space-36, 144px);font-size:14px;font-weight:500;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}.header input:disabled{overflow-x:visible;border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}.header input:invalid{border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:dashed;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}.header input.editing-enabled{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.header .participant-count{display:flex;align-items:center;font-size:14px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.header .participant-count dyte-icon{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0\\.5, 2px);width:var(--dyte-space-3, 12px)}.header .assign-button{height:var(--dyte-space-6, 24px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));-webkit-text-decoration-line:underline;text-decoration-line:underline}.header .assign-button:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.participant-list{display:grid;flex-grow:1;grid-template-columns:repeat(2, minmax(0, 1fr));gap:var(--dyte-space-2, 8px);margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);width:100%;border-radius:var(--dyte-border-radius-sm, 4px)}.participant-list::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px)}.participant-list::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.participant-list::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.participant-item{display:flex;align-items:center;justify-content:space-between;margin-right:var(--dyte-space-2, 8px);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.participant-item:hover{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.selector-mode:hover .show-on-hover{display:flex}.message-container{margin:var(--dyte-space-0, 0px);display:flex;width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.message-container p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-20, 80px);display:flex;width:100%;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));border-style:dashed;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity))}.message-container p:hover{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.25)}.message-container .drop-zone-active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.25)}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}.show-on-hover{margin-left:var(--dyte-space-4, 16px);height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);display:none}:host(:hover) .show-on-hover{display:flex}.peer-ui-container{position:relative;display:flex;align-items:center;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-10, 40px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.peer-ui-container dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.peer-ui-container .name{font-size:14px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}",zP=3,d4=class{constructor(t){U(this,t),this.onParticipantsAdd=K(this,"participantsAdd",7),this.onParticipantDelete=K(this,"participantDelete",7),this.onRoomJoin=K(this,"roomJoin",7),this.deleteRoom=K(this,"delete",7),this.updateRoom=K(this,"update",7),this.reset=()=>{this.editingTitleRoomId=null,this.newTitle=null},this.onEditClick=()=>{if(this.editingTitleRoomId){if(this.newTitle.length<zP)return;this.roomTitle=this.newTitle,this.updateRoom.emit({title:this.newTitle,id:this.editingTitleRoomId}),this.glowCard(),this.reset()}else this.editingTitleRoomId=this.room.id,Li(()=>{this.inputTextEl.focus(),this.inputTextEl.select()})},this.onDrop=e=>{e.currentTarget instanceof HTMLParagraphElement&&(e.currentTarget.classList.remove("drop-zone-active"),this.onAssign())},this.onDragOver=e=>{e.currentTarget instanceof HTMLParagraphElement&&(e.currentTarget.classList.add("drop-zone-active"),e.preventDefault())},this.meeting=void 0,this.assigningParticipants=void 0,this.mode=void 0,this.states=void 0,this.allowDelete=!0,this.iconPack=N,this.t=j(),this.isDragMode=!1,this.room=void 0,this.defaultExpanded=!1,this.editingTitleRoomId=null,this.newTitle=null,this.showExpandedCard=!1,this.glowingCard=!1}connectedCallback(){var t;this.allParticipants=u3(this.meeting),this.permissions=this.meeting.self.permissions.connectedMeetings,this.showExpandedCard=this.defaultExpanded,this.roomTitle=this.room.isParent?this.t("breakout_rooms.main_room"):(t=this.room)===null||t===void 0?void 0:t.title,this.canEditMeetingTitle=this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&!this.meeting.connectedMeetings.isActive}onDragLeave(t){t.currentTarget instanceof HTMLParagraphElement&&t.currentTarget.classList.remove("drop-zone-active")}getAssignmentHint(){if(this.assigningParticipants&&this.isDragMode)return this.t("breakout_rooms.drag_drop_participants");if(this.assigningParticipants)return this.t("breakout_rooms.click_drop_participants");if(this.room.participants.length===0)return this.t("breakout_rooms.none_assigned")}toggleCardDisplay(){this.showExpandedCard=!this.showExpandedCard}glowCard(){this.glowingCard=!0,setTimeout(()=>{this.glowingCard=!1},2e3)}onAssign(){this.onParticipantsAdd.emit(),this.glowCard()}onJoin(){this.onRoomJoin.emit()}onTitleChanged(t){t.key==="Enter"&&(this.newTitle=t.target.value,this.onEditClick())}renderPeer(t){const{displayPictureUrl:e}=this.allParticipants.find(r=>Wt(r)===Wt(t)),i=es(t.displayName||"");return l("div",{class:"peer-ui-container"},l("dyte-avatar",{participant:{name:i,picture:e},size:"sm"}),l("p",{class:"name",title:i},Mr(i,16),this.meeting.self.userId===t.id&&` (${this.t("you")})`))}renderExpandedCardMaybe(){if(this.showExpandedCard&&!this.room.isParent&&this.getAssignmentHint()&&this.permissions.canAlterConnectedMeetings)return l("div",{class:"message-container"},l("p",{class:{"compact-height":this.room.participants.length!==0},onClick:()=>this.onAssign(),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},this.getAssignmentHint()))}renderParticipantsMaybe(){if(this.showExpandedCard&&!this.room.isParent&&this.room.participants.length!==0)return l("div",{class:"participant-list",onClick:()=>{this.onAssign()}},this.room.participants.map(t=>l("div",{class:"participant-item",role:"listitem",key:t.id},this.renderPeer(t),this.permissions.canAlterConnectedMeetings&&l("dyte-icon",{class:"show-on-hover",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t,onClick:()=>{this.onParticipantDelete.emit(t)}}))))}render(){var t,e,i;return l(O,null,l("div",{class:{"assign-mode":this.assigningParticipants,"selector-mode":!this.assigningParticipants,"glowing-card":this.glowingCard}},l("div",{class:"header"},l("input",{ref:r=>this.inputTextEl=r,placeholder:this.t("breakout_rooms.room_name"),disabled:this.editingTitleRoomId!==this.room.id,value:this.roomTitle,minlength:zP,onChange:r=>{this.newTitle=r.target.value},onKeyPress:r=>this.onTitleChanged(r),class:{"editing-enabled":this.editingTitleRoomId===this.room.id},style:{width:`${this.roomTitle.length+1}ch`}}),this.editingTitleRoomId!==this.room.id&&l("span",{class:"participant-count"},"(",l("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t}),(i=(e=(t=this.room)===null||t===void 0?void 0:t.participants)===null||e===void 0?void 0:e.length)!==null&&i!==void 0?i:"0",")"),this.canEditMeetingTitle&&l("dyte-tooltip",{label:this.editingTitleRoomId===this.room.id?this.t("breakout_rooms.save_room_name"):this.t("breakout_rooms.edit_room_name"),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.editingTitleRoomId===this.room.id?this.iconPack.checkmark:this.iconPack.edit,iconPack:this.iconPack,t:this.t,class:"show-on-hover",onClick:this.onEditClick})),l("div",{class:"rooms-container"},this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&this.allowDelete&&l("dyte-tooltip",{label:this.t("breakout_rooms.delete"),class:"danger",iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.delete,class:"show-on-hover",iconPack:this.iconPack,t:this.t,onClick:()=>{this.deleteRoom.emit()}})),this.assigningParticipants&&this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&l("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",class:"assign-button",size:"md",onClick:()=>this.onAssign()},this.t("breakout_rooms.assign")),this.mode==="edit"&&!this.assigningParticipants&&this.permissions.canSwitchConnectedMeetings&&l("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",class:"assign-button",size:"md",disabled:this.room.id===this.meeting.meta.roomName,onClick:()=>this.onJoin()},this.room.id===this.meeting.meta.roomName?this.t("joined"):this.t("join")),!this.room.isParent&&l("dyte-icon",{icon:this.showExpandedCard?this.iconPack.chevron_up:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleCardDisplay()}))),this.renderExpandedCardMaybe(),this.renderParticipantsMaybe()))}};d4.style=vpe;const ype=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;flex-direction:column;font-size:14px}:host input[type='checkbox']{margin:var(--dyte-space-0, 0px);cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--dyte-border-radius-sm, 4px);position:relative;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;border-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}:host input[type='checkbox']:checked{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host input[type='checkbox']:checked::before{position:absolute;top:1px;left:1px;height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px);background-color:rgb(var(--dyte-colors-text-1000, 255 255 255));content:'';-webkit-clip-path:polygon(5% 60%, 35% 93%, 100% 19%, 86% 4%, 36% 62%, 19% 44%);clip-path:polygon(5% 60%, 35% 93%, 100% 19%, 86% 4%, 36% 62%, 19% 44%)}*{box-sizing:border-box}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.ctr{box-sizing:border-box;padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.empty-message{margin-top:var(--dyte-space-10, 40px);margin-bottom:var(--dyte-space-10, 40px);text-align:center;font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.empty-room{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--dyte-space-2, 8px);height:100%;text-align:center;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.empty-room dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}.empty-room p{font-size:16px;font-weight:500;margin:var(--dyte-space-0, 0px)}.empty-room span{font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search-wrapper{margin-bottom:var(--dyte-space-1, 4px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.search{position:-webkit-sticky;position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-8, 32px)}.search .search-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:inherit;color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.header{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-1\\.5, 6px);height:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-0\\.5, 2px);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));display:flex;align-items:center;justify-content:space-between}.title-wrapper{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.participant-count{display:flex;align-items:center;font-size:14px}.participant-count dyte-icon{margin-right:var(--dyte-space-0\\.5, 2px);width:var(--dyte-space-3, 12px)}.participant-item{display:flex;align-items:center;justify-content:space-between;margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);cursor:pointer}.participant-item input.hide-checkbox{display:none}.participant-item input:checked{display:inline-block}.dragging input{display:none}.participant-item:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.participant-item:hover input{display:inline-block}.peer-ui-container{position:relative;display:flex;align-items:center;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-10, 40px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.peer-ui-container dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.peer-ui-container .name{font-size:14px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}`,l4=class{constructor(t){U(this,t),this.onSelectedParticipantsUpdate=K(this,"selectedParticipantsUpdate",7),this.onAllToggled=K(this,"allParticipantsToggleUpdate",7),this.onParticipantsDragging=K(this,"participantsDragging",7),this.onSearchInput=e=>{this.search=e.target.value},this.onDragStart=e=>{this.isDragging=!0,this.onParticipantsDragging.emit(!0),this.updateSelectedParticipants(e,!0)},this.onDragEnd=e=>{this.isDragging=!1,this.onParticipantsDragging.emit(!1),this.updateSelectedParticipants(e,!1)},this.onClick=e=>{const i=this.selectedParticipantIds.includes(Wt(e));this.updateSelectedParticipants(e,!i)},this.onToggleAll=e=>{const i=e?this.participantsToShow.map(Wt):[];this.onAllToggled.emit(i)},this.meeting=void 0,this.participantIds=[],this.iconPack=N,this.t=j(),this.search="",this.participantsToShow=[],this.selectedParticipantIds=[],this.isDragging=!1}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){this.meeting!=null}updateSelectedParticipants(t,e){const i=Wt(t);let r=[];e&&!this.selectedParticipantIds.includes(i)?r=[...this.selectedParticipantIds,i]:r=[...this.selectedParticipantIds.filter(s=>s!==i)],this.onSelectedParticipantsUpdate.emit(r)}meetingChanged(t){t!=null&&this.getParticipants(this.search)}participantsChanged(){this.getParticipants(this.search)}searchChanged(t){this.getParticipants(t)}getParticipants(t){const e=u3(this.meeting);this.participantsToShow=e.filter(i=>{var r;return this.participantIds.includes(Wt(i))&&((r=i.displayName)!==null&&r!==void 0?r:"").toLowerCase().includes(t.toLowerCase())})}renderPeer(t){const e=es(t.displayName||"");return l("div",{class:"peer-ui-container"},l("dyte-avatar",{participant:{name:t.displayName,picture:t.displayPictureUrl},size:"sm"}),l("p",{class:"name",title:e},Mr(e,16),this.meeting.self.userId===t.id&&` (${this.t("you")})`))}render(){return l(O,null,l("div",{class:"search-wrapper"},l("div",{class:"search",part:"search"},l("dyte-icon",{icon:this.iconPack.search,part:"search-icon",iconPack:this.iconPack,t:this.t,class:"search-icon"}),l("input",{type:"search",autocomplete:"off",placeholder:"Search",onInput:this.onSearchInput,part:"search-input"})),l("slot",{name:"shuffle-button"})),l("div",{class:"header"},l("div",{class:"title-wrapper"},l("span",null,this.t("breakout_rooms.main_room")),l("span",{class:"participant-count"},"(",l("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t}),this.participantsToShow.length,")")),this.selectedParticipantIds.length!==0&&l("dyte-tooltip",{label:this.t("breakout_rooms.select_all"),iconPack:this.iconPack,t:this.t},l("input",{type:"checkbox",checked:this.selectedParticipantIds.length===this.participantsToShow.length,onChange:t=>this.onToggleAll(!!t.target.checked)}))),l("div",{class:"ctr scrollbar",part:"container"},this.participantsToShow.length>0&&l("ul",{class:"participants",part:"participants"},this.participantsToShow.map(t=>l("li",{class:{"participant-item":!0,dragging:this.isDragging},onClick:()=>this.onClick(t),onDragStart:()=>this.onDragStart(t),onDragEnd:()=>this.onDragEnd(t),draggable:this.selectedParticipantIds.length===0,role:"listitem",key:t.id},this.renderPeer(t),!this.isDragging&&l("input",{type:"checkbox",class:{"hide-checkbox":this.selectedParticipantIds.length===0},checked:this.selectedParticipantIds.includes(Wt(t))})))),this.participantsToShow.length===0&&this.search.length>0&&l("div",{class:"empty-message"},this.t("participants.errors.empty_results")),this.participantsToShow.length===0&&this.search.length===0&&l("div",{class:"empty-room"},l("dyte-icon",{icon:this.iconPack.people_checked,part:"search-icon",iconPack:this.iconPack,t:this.t,class:"search-icon"}),l("p",null,this.t("breakout_rooms.all_assigned")),l("span",null,this.t("breakout_rooms.empty_main_room")))))}static get watchers(){return{meeting:["meetingChanged"],participantIds:["participantsChanged"],search:["searchChanged"]}}};l4.style=ype;const bpe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:row;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-1, 4px)}p{margin:var(--dyte-space-0, 0px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}input{margin:var(--dyte-space-0, 0px);width:var(--dyte-space-6, 24px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;border-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));text-align:center;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));border-radius:var(--dyte-border-radius-sm, 4px);font-size:16px;outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{margin:var(--dyte-space-0, 0px);appearance:none;-webkit-appearance:none}input[type='number']{-moz-appearance:textfield}",u4=class{constructor(t){U(this,t),this.onChange=K(this,"valueChange",7),this.input="1",this.size=void 0,this.value=void 0,this.minValue=0,this.iconPack=N,this.t=j()}connectedCallback(){this.watchStateHandler(this.input),this.input=this.value.toString()}watchStateHandler(t){this.onChange.emit(t)}increment(){this.input=Math.max(parseInt(this.input)+1,this.minValue).toString()}decrement(){this.input=Math.max(this.minValue,parseInt(this.input)-1).toString()}render(){return l(O,null,l("dyte-button",{kind:"icon",variant:"ghost",onClick:()=>this.decrement(),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.subtract,iconPack:this.iconPack,t:this.t})),l("input",{type:"number",value:this.input,min:this.minValue,onInput:t=>{const e=parseInt(t.target.value,10);isNaN(e)||e<this.minValue?this.input=this.minValue.toString():this.input=e.toString()}}),l("dyte-button",{kind:"icon",variant:"ghost",onClick:()=>this.increment(),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t})))}static get watchers(){return{input:["watchStateHandler"]}}};u4.style=bpe;var wpe=Object.freeze({__proto__:null,dyte_breakout_room_manager:d4,dyte_breakout_room_participants:l4,dyte_counter:u4});const p4=t=>{let e=null;try{const i=JSON.parse(t.message),{target:r,message:s}=i;r===void 0||s===void 0?e=t:e=Object.assign(Object.assign({},t),{targetUserIds:r,message:s})}catch{e=t}return e};function $w(t,e){return t.localeCompare(e)}function zm(t){return t.sort((e,i)=>e.localeCompare(i)).join("_")}function h4(t,e){if(t==null)return!0;for(const i of t)if(i.kind==="file"){const r=i.getAsFile();i.type.startsWith("image/")?e("image",r):e("file",r)}}const $g="dm__";function FP(t){return t.isDirectMessage}function VP(t){return[...new Set(t)].sort($w).join("<>")}function Uu(t){return t.split("").reverse().join("")}const BP=/^\*([^*]*)\*/,HP=/^_([^_]*)_/,GP=/^~([^~]*)~/,WP=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[:+~%/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[\w-]*))?)/,hE=/<blockquote>[.\s\S]*<\/blockquote>\n\n/m;function g4(t,e=!1){if(!hE.test(t))return"";let i=0,r=13;return e&&(i=12,r=0),t.substring(t.indexOf("<blockquote>")+i,t.indexOf("</blockquote>")+r)}function m4(t){return t.replace(hE,"")}const f4=2e3,_pe=["<a>","<b>","<i>","<q>","<s>"];function qP(t){t=t.split(" ").map(i=>{if(WP.test(i)){const r=WP.exec(i);i=i.replace(r[0],`<a>${r[0]}</a>`)}else{if(BP.test(i)){const r=BP.exec(i);i=i.replace(r[0],`<b>${r[1]}</b>`)}if(HP.test(i)){const r=HP.exec(i);i=i.replace(r[0],`<i>${r[1]}</i>`)}if(GP.test(i)){const r=GP.exec(i);i=i.replace(r[0],`<s>${r[1]}</s>`)}}return i}).join(" "),t=t.split(" ").map((i,r)=>i===">"&&(r===0||i[r-1]===">")?"<q></q>":i).join(" ");const[e]=v4(t);return e}const v4=(t,e="")=>{const i=[];if(t.length===0)return[i,0];let r=0;for(;r<t.length;){if(e.length&&e===t.substring(r,r+e.length))return[i,r+e.length];if(_pe.includes(t.substring(r,r+3))){const[s,n]=v4(t.substring(r+3),`</${t[r+1]}>`);i.push({type:t[r+1],content:s.length===1&&s[0].type==="plain_text"?s[0].content:s}),r+=n+3}else{let s=i[i.length-1];(!s||s.type!=="plain_text")&&(i.push({type:"plain_text",content:""}),s=i[i.length-1]),s.content+=t[r],r++}}return[i,r]},gE=(t,e,i)=>t.trim().length===0?`${e}${t}${e}`:i(t),Spe=t=>l("a",{class:"link",href:t,target:"_blank",rel:"noopener noreferrer"},t),Epe=t=>typeof t=="string"?gE(t,"*",e=>l("b",null,e)):l("b",null,Ml(t)),kpe=t=>typeof t=="string"?gE(t,"_",e=>l("i",null,e)):l("i",null,Ml(t)),Tpe=t=>typeof t=="string"?gE(t,"~",e=>l("s",null,e)):l("b",null,Ml(t)),xpe=t=>typeof t=="string"?t:l("p",null,Ml(t)),Ml=t=>t.map(e=>{switch(e.type){case"a":if(typeof e.content=="string")return Spe(e.content);case"b":return Epe(e.content);case"i":return kpe(e.content);case"s":return Tpe(e.content);case"q":return l("span",{class:"block-quote"});case"plain_text":default:return xpe(e.content)}}),gy=({message:t})=>{const e=t.slice(0,f4),i=g4(e,!0),r=m4(e);return l("p",null,i.length!==0&&l("blockquote",null,i.split(`
`).map(s=>{const n=qP(s);return l("p",null,Ml(n))})),r.split(`
`).map(s=>{const n=qP(s);return l("p",null,Ml(n))}))},Ppe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);display:flex;height:var(--dyte-space-12, 48px);align-items:center;justify-content:center;font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}#dropzone{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;display:none;flex-direction:column;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}#dropzone.active{display:flex;-webkit-animation:0.2s slide-up ease-in;animation:0.2s slide-up ease-in}dyte-chat-messages-ui,dyte-chat-messages-ui-paginated{flex:1 0 0}.chat-container{display:flex;height:100%;width:100%;flex-direction:row}.chat{display:flex;flex:1 1 0%;flex-direction:column}.banner{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.banner .welcome-new-channel{width:var(--dyte-space-48, 192px)}.banner .create-channel-illustration{height:var(--dyte-space-40, 160px);width:var(--dyte-space-40, 160px)}.quoted-message-container{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);margin-top:var(--dyte-space-2, 8px);display:flex;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));border-radius:var(--dyte-border-radius-md, 8px);border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}.quoted-message-container .quoted-message{flex:1 1 0%;padding:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);max-height:var(--dyte-space-24, 96px);overflow-y:auto;word-break:break-all}.quoted-message-container .quoted-message blockquote{display:none}.quoted-message-container dyte-icon.dismiss{margin-left:auto;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);padding:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.quoted-message-container dyte-icon.dismiss:hover{cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.quoted-message-container dyte-icon.dismiss{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.channel-selector-header{box-sizing:border-box;height:var(--dyte-space-16, 64px);padding:var(--dyte-space-4, 16px);display:flex;justify-content:space-between;border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}.channel-selector-header .channel-create-btn{width:var(--dyte-space-8, 32px);justify-content:center}.channel-selector-header .channel-create-btn:hover{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}`,y4=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.channelMap=new Map,this.disconnectMeeting=e=>{var i,r,s,n,a,o;this.isPrivateChatSupported()&&(e==null||e.participants.joined.removeListener("participantsUpdate",this.onParticipantUpdate),e==null||e.participants.joined.removeListener("participantLeft",this.onParticipantUpdate)),(i=e==null?void 0:e.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener),(r=e==null?void 0:e.chat)===null||r===void 0||r.removeListener("channelCreate",this.onChannelCreateOrUpdate),(s=e==null?void 0:e.chat)===null||s===void 0||s.removeListener("channelUpdate",this.onChannelCreateOrUpdate),(n=e==null?void 0:e.chat)===null||n===void 0||n.removeListener("channelMessageUpdate",this.onChannelCreateOrUpdate),(o=(a=e==null?void 0:e.participants)===null||a===void 0?void 0:a.all)===null||o===void 0||o.removeListener("participantsUpdate",this.onChannelCreateOrUpdate)},this.onParticipantUpdate=()=>{this.participants=this.meeting.participants.joined.toArray().filter(e=>this.privatePresetFilter.length===0||this.privatePresetFilter.includes(e.presetName)),this.selectedParticipant&&!this.participants.includes(this.selectedParticipant)&&(this.selectedParticipant=null,this.chatRecipientId=this.selectedGroup="everyone")},this.usePaginatedChat=()=>Qf(this.meeting),this.updateUnreadCountGroups=e=>{this.unreadCountGroups=Object.assign(Object.assign({},this.unreadCountGroups),e)},this.isPrivateChatSupported=()=>{var e,i,r;return!Qf(this.meeting)&&this.canPrivateMessage&&!this.disablePrivateChat&&((r=(i=(e=this.meeting)===null||e===void 0?void 0:e.__internals__)===null||i===void 0?void 0:i.features)===null||r===void 0?void 0:r.getFeatureValue("chat_socket_server"))==="socket-service"},this.updateRecipients=e=>{if(typeof e.detail=="string")this.chatRecipientId="everyone",this.selectedParticipant=null;else{const{userId:i}=e.detail;this.chatRecipientId=i,this.selectedParticipant=this.participants.find(r=>r.userId===i)}if(this.chatRecipientId!=="everyone"){const i=[this.chatRecipientId,this.meeting.self.userId],r=zm(i);this.selectedGroup=r}else this.selectedGroup="everyone";this.updateUnreadCountGroups({[this.selectedGroup]:0})},this.isTextMessagingAllowed=()=>this.chatRecipientId==="everyone"?this.canSend&&this.canSendTextMessage:this.canPrivateMessage&&this.canSendPrivateTexts,this.isFileMessagingAllowed=()=>this.chatRecipientId==="everyone"?this.canSend&&this.canSendFiles:this.canPrivateMessage&&this.canSendPrivateFiles,this.onChannelChanged=e=>{e.detail.includes($g)?this.createDMChannel(e.detail.replace($g,"")):this.selectedChannelId=e.detail,this.cleanup()},this.createDMChannel=async e=>{this.creatingChannel=!0;const i=await this.meeting.chat.createChannel("Direct Message",[e],{visibility:"private",isDirectMessage:!0});this.creatingChannel=!1,this.selectedChannelId=i.id},this.cleanup=()=>{this.editingMessage=null,this.replyMessage=null,this.searchQuery=""},this.onChannelCreateOrUpdate=e=>{e?this.channelMap.set(e.id,e):this.meeting.chat.channels.forEach(a=>this.channelMap.set(a.id,a));const i=Array.from(this.channelMap.values()).filter(a=>!FP(a)).sort((a,o)=>$w(a.displayName,o.displayName)),r=Array.from(this.channelMap.values()).filter(FP).map(a=>Object.assign(Object.assign({},a),{displayName:this.getMemberDisplayName(a)})),s=this.meeting.participants.all.toArray().filter(a=>{if(a.userId===this.meeting.self.userId)return!1;const o=VP([this.meeting.self.userId,a.userId]);return r.every(c=>VP(c.memberIds)!==o)}).map(a=>({id:`${$g}${a.userId}`,displayName:a.name,displayPictureUrl:a.picture,isDirectMessage:!0,unreadCount:0})),n=[...r,...s].sort((a,o)=>$w(a.displayName,o.displayName));this.channels=[...i,...n]},this.getMemberDisplayName=e=>{var i;let r;e.memberIds.length===1?r=e.memberIds[0]:r=e.memberIds[0]===this.meeting.self.userId?e.memberIds[1]:e.memberIds[0];const s=this.meeting.participants.all.toArray().find(n=>n.userId===r);return(i=s==null?void 0:s.name)!==null&&i!==void 0?i:r},this.onNewMessageHandler=async e=>{const i=e.detail;this.isChatViewType?(await this.meeting.chat.sendMessageToChannel(i,this.selectedChannelId,this.replyMessage?{replyTo:this.replyMessage}:{}),this.replyMessage=null):this.meeting.chat.sendMessage(i,this.getRecipientPeerIds())},this.onEditMessageHandler=async e=>{var i,r;await((r=(i=this.meeting)===null||i===void 0?void 0:i.chat)===null||r===void 0?void 0:r.editTextMessage(e.detail.id,e.detail.message,e.detail.channelId)),this.editingMessage=null},this.onSearchHandler=async e=>{this.searchQuery=e.detail},this.onSearchDismissed=()=>{this.searchQuery=""},this.onChannelCreateClicked=()=>{this.stateUpdate.emit({activeChannelCreator:!0}),L.activeChannelCreator=!0},this.meeting=void 0,this.config=Me,this.size=void 0,this.iconPack=N,this.t=j(),this.disablePrivateChat=!1,this.privatePresetFilter=[],this.unreadCountGroups={},this.chatGroups={everyone:[]},this.selectedGroup="everyone",this.now=new Date,this.dropzoneActivated=!1,this.showLatestMessageButton=!1,this.canSend=!1,this.canSendTextMessage=!1,this.canSendFiles=!1,this.canPrivateMessage=!1,this.canSendPrivateTexts=!1,this.canSendPrivateFiles=!1,this.emojiPickerEnabled=!1,this.chatRecipientId="everyone",this.participants=[],this.selectedParticipant=void 0,this.channels=[],this.selectedChannelId=void 0,this.editingMessage=null,this.replyMessage=null,this.searchQuery="",this.creatingChannel=!1}connectedCallback(){this.meeting&&(this.meetingChanged(this.meeting),!(this.meeting&&!this.meeting.chat)&&this.isFileMessagingAllowed()&&(this.host.addEventListener("dragover",t=>{t.preventDefault(),this.dropzoneActivated=!0}),this.host.addEventListener("dragleave",()=>{this.dropzoneActivated=!1}),this.host.addEventListener("drop",t=>{t.preventDefault(),this.dropzoneActivated=!1,h4(t.dataTransfer.items,(e,i)=>{var r,s,n,a;switch(e){case"image":this.isFileMessagingAllowed()&&((s=(r=this.meeting)===null||r===void 0?void 0:r.chat)===null||s===void 0||s.sendImageMessage(i,this.getRecipientPeerIds()));break;case"file":this.isFileMessagingAllowed()&&((a=(n=this.meeting)===null||n===void 0?void 0:n.chat)===null||a===void 0||a.sendFileMessage(i,this.getRecipientPeerIds()));break}})})))}onEditMessageInit(t){t.detail.flags.isReply?this.replyMessage=t.detail.payload:t.detail.flags.isEdit&&(this.editingMessage=t.detail.payload)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(t,e){var i,r,s,n,a;e!=null&&this.disconnectMeeting(e),!(t&&!t.chat)&&t!=null&&(this.canSend=t.self.permissions.chatPublic.canSend,this.canSendTextMessage=t.self.permissions.chatPublic.text,this.canSendFiles=t.self.permissions.chatPublic.files,this.canPrivateMessage=!!(!((i=t.self.permissions.chatPrivate)===null||i===void 0)&&i.canSend||!((r=t.self.permissions.chatPrivate)===null||r===void 0)&&r.canReceive),this.canSendPrivateTexts=!!(!((s=t.self.permissions.chatPrivate)===null||s===void 0)&&s.text),this.canSendPrivateFiles=!!(!((n=t.self.permissions.chatPrivate)===null||n===void 0)&&n.files),this.isChatViewType=t.meta.viewType==="CHAT",this.isChatViewType&&(this.onChannelCreateOrUpdate(),this.channels.filter(c=>!c.id.includes($g)).length&&(this.selectedChannelId=this.channels[0].id)),this.initializeChatGroups(),this.chatGroups=Object.assign({},this.chatGroups),this.chatUpdateListener=({message:o})=>{o.channelId||(this.addToChatGroup(o),this.chatGroups=Object.assign({},this.chatGroups))},this.onParticipantUpdate(),this.usePaginatedChat()||(a=t.chat)===null||a===void 0||a.addListener("chatUpdate",this.chatUpdateListener),this.isPrivateChatSupported()&&(t.participants.joined.addListener("participantJoined",this.onParticipantUpdate),t.participants.joined.addListener("participantLeft",this.onParticipantUpdate)),this.isChatViewType&&(t.chat.addListener("channelCreate",this.onChannelCreateOrUpdate),t.chat.addListener("channelUpdate",this.onChannelCreateOrUpdate),t.chat.addListener("channelMessageUpdate",this.onChannelCreateOrUpdate),t.participants.all.addListener("participantsUpdate",this.onChannelCreateOrUpdate)))}chatGroupsChanged(t){var e,i;if(!this.isPrivateChatSupported())return;const r={};for(const s in t){const n=(e=Xf[s])!==null&&e!==void 0?e:0;r[s]=t[s].filter(a=>a.type=="chat"&&a.message.time>n&&a.message.userId!==this.meeting.self.userId).length,(s===zm([this.meeting.self.userId,(i=this.selectedParticipant)===null||i===void 0?void 0:i.userId])||s==="everyone"&&this.selectedParticipant===null)&&(r[s]=0,Xf[s]=new Date)}this.updateUnreadCountGroups(r)}initializeChatGroups(){var t;(t=this.meeting.chat)===null||t===void 0||t.messages.forEach(e=>{this.addToChatGroup(e)})}addToChatGroup(t){var e;const i=p4(t);let r="everyone";if(((e=i.targetUserIds)===null||e===void 0?void 0:e.length)>0){const s=new Set([i.userId,...i.targetUserIds]);r=zm(Array.from(s))}this.chatGroups[r]===void 0&&(this.chatGroups[r]=[]),this.chatGroups[r]=[...this.chatGroups[r],{type:"chat",message:i}]}getRecipientPeerIds(){let t=[];return this.chatRecipientId!=="everyone"&&(t=[this.selectedParticipant.id]),t}channelSwitchListener(t){this.onChannelChanged(t)}renderHeadlessComponents(){return l(Hne,null,l("dyte-dialog-manager",{meeting:this.meeting}),l("dyte-notifications",{meeting:this.meeting}))}renderComposerUI(){var t,e;if(this.isChatViewType&&this.channels.length===0||this.isChatViewType&&this.searchQuery!==""||this.isChatViewType&&!this.selectedChannelId)return null;if(this.chatRecipientId==="everyone"){if(!this.canSendTextMessage&&!this.canSendFiles)return null}else if(!this.canSendPrivateTexts&&!this.canSendPrivateFiles)return null;const i={iconPack:this.iconPack,t:this.t,size:this.size},r={};return this.editingMessage?r.editMessage=this.editingMessage:this.replyMessage&&(r.replyMessage=this.replyMessage),l("dyte-chat-composer-ui",Object.assign({canSendTextMessage:this.isTextMessagingAllowed(),canSendFiles:this.isFileMessagingAllowed(),disableEmojiPicker:!!(!((e=(t=this.meeting)===null||t===void 0?void 0:t.__internals__)===null||e===void 0)&&e.features.hasFeature(Yf.DISABLE_EMOJI_PICKER)),members:this.meeting.participants.all.toArray(),prefill:r,channelId:this.selectedChannelId,onDyteNewMessage:this.onNewMessageHandler,onDyteEditMessage:this.onEditMessageHandler,onDyteEditCancelled:()=>this.editingMessage=null},i),this.replyMessage&&l("div",{class:"quoted-message-container",slot:"quote-block"},l("div",{class:"quoted-message scrollbar"},l(gy,{message:this.replyMessage.message})),l("div",null,l("dyte-icon",{"aria-label":this.t("dismiss"),class:"dismiss",icon:this.iconPack.dismiss,onClick:()=>this.replyMessage=null,iconPack:this.iconPack,t:this.t}))),l("slot",{name:"chat-addon",slot:"chat-addon"}))}renderFullChat(){if(this.creatingChannel)return l("div",{class:"banner"},l("dyte-spinner",{size:"lg"}));if(this.channels.length===0||!this.selectedChannelId)return l("div",{class:"banner"},l("dyte-icon",{icon:this.iconPack.create_channel_illustration,iconPack:this.iconPack,t:this.t,slot:"start",class:"create-channel-illustration"}),l("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"wide",variant:"primary",size:"md",onClick:this.onChannelCreateClicked,class:"welcome-new-channel"},l("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t,slot:"start"}),l("span",null,this.t("chat.new_channel"))));const t=this.channels.find(e=>e.id===this.selectedChannelId);return l("div",{class:"chat"},l("dyte-channel-header",{slot:"header",meeting:this.meeting,channel:t,onSearch:this.onSearchHandler,onSearchDismissed:this.onSearchDismissed}),this.searchQuery!==""&&l("dyte-chat-search-results",{meeting:this.meeting,query:this.searchQuery,channelId:this.selectedChannelId}),this.searchQuery===""&&l("dyte-chat-messages-ui-paginated",{meeting:this.meeting,size:this.size,iconPack:this.iconPack,t:this.t,selectedChannelId:this.selectedChannelId,selectedChannel:t}))}render(){var t,e;if(!this.meeting)return null;const i={iconPack:this.iconPack,t:this.t,size:this.size},r=(t=this.meeting)===null||t===void 0?void 0:t.self.userId,s=this.chatGroups[this.selectedGroup]||[];return l(O,null,this.isChatViewType&&this.renderHeadlessComponents(),l("div",{class:"chat-container"},this.isChatViewType&&l("dyte-channel-selector-ui",{channels:this.channels,onChannelChanged:this.onChannelChanged,selectedChannelId:this.selectedChannelId,showRecentMessage:!0},l("div",{class:"channel-selector-header",slot:"header"},l("dyte-logo",{meeting:this.meeting,config:this.config,t:this.t}),l("dyte-tooltip",{label:this.t("chat.new_channel"),iconPack:this.iconPack,t:this.t},l("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",size:"md",onClick:this.onChannelCreateClicked,class:"channel-create-btn"},l("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}))))),l("div",{class:"chat"},this.isFileMessagingAllowed()&&l("div",{id:"dropzone",class:{active:this.dropzoneActivated},part:"dropzone"},l("dyte-icon",{icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),l("p",null,this.t("chat.send_attachment"))),this.isPrivateChatSupported()&&l("dyte-chat-selector-ui",Object.assign({selfUserId:r,groups:this.participants,selectedGroupId:(e=this.selectedParticipant)===null||e===void 0?void 0:e.userId,unreadCounts:this.unreadCountGroups,onDyteChatGroupChanged:this.updateRecipients},i)),this.isChatViewType?this.renderFullChat():this.usePaginatedChat()?l("dyte-chat-messages-ui-paginated",{meeting:this.meeting,size:this.size,iconPack:this.iconPack,t:this.t}):l("dyte-chat-messages-ui",Object.assign({messages:s,selfUserId:r,selectedGroup:this.selectedGroup},i)),this.renderComposerUI())))}get host(){return jr(this)}static get watchers(){return{meeting:["meetingChanged"],chatGroups:["chatGroupsChanged"]}}};y4.style=Ppe;const Cpe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);box-sizing:border-box;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.search{position:-webkit-sticky;position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px)}.search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}:host([size='md']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}:host([size='sm']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}`,b4=class{constructor(t){U(this,t),this.onSearchInput=e=>{this.search=e.target.value},this.meeting=void 0,this.states=void 0,this.config=Me,this.size=void 0,this.iconPack=N,this.t=j(),this.search=""}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting!=null}meetingChanged(t){t!=null}render(){const t={meeting:this.meeting,states:this.states||L,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t};return l(O,null,l("div",{class:"search",part:"search"},l("dyte-icon",{icon:this.iconPack.search,part:"search-icon",iconPack:this.iconPack,t:this.t}),l("input",{type:"search",autocomplete:"off",placeholder:"Search",onInput:this.onSearchInput,part:"search-input"})),l("div",{class:"ctr scrollbar",part:"container"},l(Ge,{element:"dyte-participants-waiting-list",defaults:t}),l(Ge,{element:"dyte-participants-stage-queue",defaults:t}),l(Ge,{element:"dyte-participants-stage-list",defaults:t,props:{search:this.search}}),l(Ge,{element:"dyte-participants-viewer-list",defaults:t,props:{search:this.search}})))}static get watchers(){return{meeting:["meetingChanged"]}}};b4.style=Cpe;const Rpe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:block;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}ul{overflow-y:auto;padding:var(--dyte-space-0, 0px);flex-grow:1;flex-basis:0}.metadata{display:flex;align-items:center}.metadata img{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-sm, 4px)}.metadata .name{margin-left:var(--dyte-space-2, 8px);font-weight:500}.plugin{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.plugin .buttons{display:flex;align-items:center}dyte-button:hover{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-opacity:1;--tw-ring-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-ring-opacity));--tw-ring-offset-width:2px;--tw-ring-offset-color:rgb(var(--dyte-colors-background-1000, 8 8 8))}`,w4=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeSidebar:!1,sidebar:void 0}),L.activeSidebar=!1,L.sidebar=void 0},this.meeting=void 0,this.config=Me,this.size=void 0,this.iconPack=N,this.t=j(),this.plugins=[],this.canStartPlugins=!1,this.canClosePlugins=!1,this.activatedPluginsId=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;(t=this.meeting)===null||t===void 0||t.plugins.all.removeListener("stateUpdate",this.updateActivePlugins)}meetingChanged(t){t!=null&&(this.canStartPlugins=t.self.permissions.plugins.canStart,this.canClosePlugins=t.self.permissions.plugins.canClose,this.plugins=t.plugins.all.toArray().filter(e=>{var i;return!(!((i=t.self.config.disabledPlugins)===null||i===void 0)&&i.includes(e.id))}),this.updateActivePlugins=()=>{this.activatedPluginsId=t.plugins.active.toArray().map(e=>e.id)},this.updateActivePlugins(),t.plugins.all.addListener("stateUpdate",this.updateActivePlugins))}render(){return l(O,null,l("ul",{class:"scrollbar"},this.plugins.map(t=>l("li",{key:t.name,class:"plugin"},l("div",{class:"metadata"},l("img",{src:t.picture}),l("div",{class:"name"},t.name)),!this.activatedPluginsId.includes(t.id)&&this.canStartPlugins&&l("div",{class:"buttons"},l("dyte-button",{kind:"icon",size:"lg",iconPack:this.iconPack,t:this.t,onClick:()=>{t.activate(),this.close()},"aria-label":`${this.t("activate")} ${t.name}`},l("dyte-icon",{icon:this.iconPack.rocket,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}))),this.activatedPluginsId.includes(t.id)&&this.canClosePlugins&&l("div",{class:"buttons"},l("dyte-button",{kind:"icon",size:"lg",onClick:()=>{t.deactivate()},iconPack:this.iconPack,t:this.t,"aria-label":`${this.t("close")} ${t.name}`},l("dyte-icon",{icon:this.iconPack.dismiss,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t})))))))}static get watchers(){return{meeting:["meetingChanged"]}}};w4.style=Rpe;const Ape=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{box-sizing:border-box;padding:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);display:flex;flex:1 1 0%;flex-direction:column}.polls-view{overflow-y:auto;flex:1 1 0%;flex-basis:0}`,_4=class{constructor(e){U(this,e),this.onPollsUpdate=i=>{this.polls=[...i.polls]},this.meeting=void 0,this.config=Me,this.size=void 0,this.iconPack=N,this.t=j(),this.create=!1,this.polls=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;this.meeting!=null&&((e=this.meeting.polls)===null||e===void 0||e.removeListener("pollsUpdate",this.onPollsUpdate))}meetingChanged(e){e!=null&&(e&&!e.polls||(this.polls=[...e.polls.items],e.polls.addListener("pollsUpdate",this.onPollsUpdate),this.onCreate=async i=>{this.create=!1,await e.polls.create(i.question,i.options,i.anonymous,i.hideVotes)},this.onVote=async(i,r)=>{await e.polls.vote(i,r)}))}toggleCreateState(){this.create=!this.create}componentDidRender(){ro(this.pollEl)}render(){return l(O,null,l("div",{class:"ctr",part:"container"},l("div",{class:"polls-view scrollbar",ref:e=>this.pollEl=e,part:"polls"},this.polls.map(e=>{var i;return l("dyte-poll",{key:e.id,poll:e,onDyteVotePoll:r=>{this.onVote(r.detail.id,r.detail.index)},self:(i=this.meeting)===null||i===void 0?void 0:i.self.userId,iconPack:this.iconPack,t:this.t,permissions:this.meeting.self.permissions})}),this.create&&l("dyte-poll-form",{part:"poll-form",onDyteCreatePoll:e=>{this.onCreate(e.detail)},iconPack:this.iconPack,t:this.t})),this.meeting.self.permissions.polls.canCreate&&l("dyte-button",{kind:"wide",onClick:()=>this.toggleCreateState(),variant:this.create?"secondary":"primary",part:"button",iconPack:this.iconPack,t:this.t},this.create?this.t("polls.cancel"):this.t("polls.create"))))}static get watchers(){return{meeting:["meetingChanged"]}}};_4.style=Ape;const Ipe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;height:100%;width:100%;font-family:var(--dyte-font-family, sans-serif);z-index:50;display:flex;flex-direction:column}:host([view='sidebar']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([view='full-screen']){position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);max-width:100%;border:none}::slotted(*){flex-grow:1}.close{position:absolute;top:var(--dyte-space-2, 8px);left:var(--dyte-space-2, 8px)}.main-header{display:flex;height:var(--dyte-space-12, 48px);place-items:center;justify-content:center}.main-header,.mobile-tabs{flex-shrink:0}.mobile-tabs{display:flex;place-items:center;justify-content:space-evenly;border-bottom:1px solid rgb(var(--dyte-colors-background-700, 44 44 44))}.mobile-tabs button{margin:var(--dyte-space-0, 0px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;padding:var(--dyte-space-0, 0px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));height:var(--dyte-space-10, 40px);cursor:pointer;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);font-weight:500;border-bottom:1px solid transparent}.mobile-tabs button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}header h3{font-size:14px;font-weight:500}@media only screen and (max-device-height: 480px) and (orientation: landscape){.main-header{display:none !important}}",S4=class{constructor(t){U(this,t),this.tabChange=K(this,"tabChange",7),this.sidebarClose=K(this,"sidebarClose",7),this.onClose=()=>{this.sidebarClose.emit()},this.view="sidebar",this.tabs=[],this.currentTab=void 0,this.iconPack=N,this.t=j()}render(){const t=this.view==="full-screen",e=this.tabs.find(i=>i.id===this.currentTab);return l(O,{class:this.view},l("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:this.onClose,"aria-label":this.t("close")},l("dyte-icon",{icon:this.iconPack.dismiss})),e&&l("header",{class:"main-header"},l("h3",null,e.name)),t&&l("header",{class:"mobile-tabs"},this.tabs.map(i=>l("button",{onClick:()=>{this.tabChange.emit(i.id)},class:{active:this.currentTab===i.id}},i.name))),l("slot",{name:this.currentTab}))}};S4.style=Ipe;var Ope=Object.freeze({__proto__:null,dyte_chat:y4,dyte_participants:b4,dyte_plugins:w4,dyte_polls:_4,dyte_sidebar_ui:S4});const Mpe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;height:100%;width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:600}.status{margin-left:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:12px}.status dyte-icon{margin-right:var(--dyte-space-2, 8px)}.scroll{overflow:auto;border-radius:var(--dyte-border-radius-none, 0)}.warning,.NOT_REQUESTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity)) !important;opacity:0.8}.success,.ACCEPTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity)) !important;opacity:0.8}.COULD_NOT_START,.error,.failed,.DENIED,.SYSTEM_DENIED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity)) !important;opacity:0.8}.row{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}.section{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start}h3{margin:var(--dyte-space-0, 0px);font-size:14px;font-weight:600}.stage-indicator{margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.status-text{margin-top:var(--dyte-space-3, 12px);font-size:14px;font-weight:100 !important}.status-text dyte-icon{margin-right:var(--dyte-space-2, 8px)}.tooltip-text{display:flex;flex-direction:column;font-size:12px}.tooltip-text span{margin-left:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88)) !important}.tooltip-text div{margin-top:var(--dyte-space-1, 4px)}.tooltip-text div:nth-child(1){margin:var(--dyte-space-0, 0px)}.row{display:flex;flex-direction:row;align-items:center;justify-content:center}.row dyte-switch{margin-left:var(--dyte-space-8, 32px)}.row dyte-button{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px)}.row .label{width:var(--dyte-space-40, 160px)}.row .text{margin-top:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px)}.m3{margin-top:var(--dyte-space-3, 12px)}.m1{margin-top:var(--dyte-space-1, 4px)}.col{display:flex;width:100%;flex-direction:column;align-items:flex-start;justify-content:flex-start}.label{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;justify-content:space-between;font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.text{margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));opacity:0.7}.title{margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.sub-title{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.error-text{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;font-size:14px;font-weight:100 !important;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.error-text dyte-icon{margin-right:var(--dyte-space-2, 8px)}.volume-indicator{margin-left:var(--dyte-space-4, 16px);height:var(--dyte-space-3, 12px);width:var(--dyte-space-56, 224px);overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.volume-level{height:var(--dyte-space-3, 12px);width:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-bg-opacity));transition:width 0.5s}.stage-manager{position:-webkit-sticky;position:sticky;bottom:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);display:flex;flex-direction:row-reverse;align-items:center;justify-content:space-between;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}.stage-button{display:flex;cursor:pointer;flex-direction:row;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.stage-button dyte-icon{padding:var(--dyte-space-0, 0px)}.disabled{cursor:not-allowed;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52)) !important}#header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;border-radius:var(--dyte-border-radius-none, 0)}#header dyte-button:hover{background-color:transparent}#header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}.tab-body{display:flex;height:100%;flex-direction:column;justify-content:space-between;overflow-y:auto;padding:var(--dyte-space-4, 16px)}.speaker-test{margin-top:var(--dyte-space-4, 16px);display:flex;flex-direction:row}.speaker-test dyte-button{margin-right:var(--dyte-space-2, 8px)}",E4=class{constructor(t){U(this,t),this.testProgress=K(this,"testProgress",7),this.lowVolCount=0,this.silenceCount=0,this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.micMetadata={},this.micPreview=!1,this.speakerPreview=!1,this.audioTrackStats={lowVolume:!1,clip:!1,silence:!1,volume:0,timestamp:0},this.activeTab="Report",this.stage=0,this.mediaPermission="NOT_REQUESTED",this.speakerDevice=void 0,this.speakerTest="none"}connectedCallback(){this.meetingChanged(this.meeting),this.updateProgress()}disconnectedCallback(){var t;const{self:e,troubleshoot:i}=this.meeting;this.micPreview&&this.toggleMicTest(),this.speakerPreview&&this.toggleSpeakerTest(),e==null||e.removeListener("deviceUpdate",this.deviceUpdateListener),e==null||e.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(t=i==null?void 0:i.audio)===null||t===void 0||t.removeListener("audioTrackStats",this.audioTrackUpdateListener)}async meetingChanged(t){var e,i;if(!t)return;const{self:r,troubleshoot:s}=t;r!=null&&r.audioTrack&&await this.getTrackInfo(),r==null||r.on("deviceUpdate",this.deviceUpdateListener.bind(this)),r.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener.bind(this));const n=(e=r==null?void 0:r.mediaPermissions)===null||e===void 0?void 0:e.audio;this.mediaPermissionUpdateListener({kind:"audio",message:n}),(i=s==null?void 0:s.audio)===null||i===void 0||i.on("audioTrackStats",this.audioTrackUpdateListener.bind(this))}deviceUpdateListener({device:t,preview:e}){e||(t.kind==="audioInput"&&(this.speakerDevice=t),t.kind==="audiooutput"&&this.getTrackInfo())}mediaPermissionUpdateListener({kind:t,message:e}){t==="audio"&&(this.mediaPermission=e,this.mediaPermission!=="ACCEPTED"&&(this.stage=0,this.updateProgress(),this.micPreview&&this.toggleMicTest(),this.speakerPreview&&this.toggleSpeakerTest()))}audioTrackUpdateListener(t){this.audioTrackStats=Object.assign(Object.assign({},t),{volume:this.normalizeVolume(t==null?void 0:t.volume)}),this.volumeEl&&(this.volumeEl.style.width=`${this.audioTrackStats.volume}%`)}setActiveTab(t){this.activeTab=t,this.updateProgress()}async toggleMicTest(){var t,e,i;const r=(t=this.meeting.troubleshoot)===null||t===void 0?void 0:t.audio;this.micPreview=!this.micPreview,this.micPreview?(await this.getTrackInfo(),r.stopTrackAnalysis(),await(r==null?void 0:r.startTrackAnalysis(!0))):((i=(e=this.meeting.troubleshoot)===null||e===void 0?void 0:e.audio)===null||i===void 0||i.stopTrackAnalysis(),this.audioTrackStats.volume=0,this.volumeEl&&(this.volumeEl.style.width="5%"))}async toggleSpeakerTest(){var t,e,i,r;const s=(t=this.meeting.troubleshoot)===null||t===void 0?void 0:t.audio;if(!((e=this.testAudioEl)===null||e===void 0)&&e.paused?(this.testAudioEl.currentTime=.2,(i=this.testAudioEl)===null||i===void 0||i.play(),this.speakerPreview=!0,s==null||s.startTrackAnalysis(!0),this.testAudioEl.addEventListener("ended",()=>{this.speakerPreview=!1,s==null||s.stopTrackAnalysis()})):((r=this.testAudioEl)===null||r===void 0||r.pause(),this.speakerPreview=!1,s==null||s.stopTrackAnalysis()),this.speakerPreview){const{self:n}=this.meeting,a=await(n==null?void 0:n.getSpeakerDevices());if(!a)return;this.speakerDevice=a[0],n==null||n.setDevice(a[0])}}async getTrackInfo(){var t,e;this.micMetadata=await((e=(t=this.meeting.troubleshoot)===null||t===void 0?void 0:t.audio)===null||e===void 0?void 0:e.getTrackMetadata(!0))}changeStage(t){this.mediaPermission==="ACCEPTED"&&(t=Math.max(0,t),t=Math.min(2,t),this.stage=t,this.updateProgress(),this.micPreview&&this.toggleMicTest(),this.speakerPreview&&this.toggleSpeakerTest())}updateProgress(){this.activeTab==="Troubleshoot"?this.testProgress.emit((this.stage+1)*100/3):this.testProgress.emit(0)}getAudioLevelStatus(){let t="All systems are functional.",e="checkmark",i="success";return this.detectLowVolume()&&(t="Low volume detected, please move closer to the device.",e="warning",i="warning"),this.audioTrackStats.clip&&(t="Clipping detected. Your audio may be noisy.",e="warning",i="error"),this.detectSilence()&&(t="Silence detected. Your device is not picking up audio.",e="warning",i="error"),l("div",{class:`row status-text ${i}`},l("dyte-icon",{size:"sm",icon:this.iconPack[e]}),this.t(t))}getDeviceInformationStatus(){let t="All systems are functional.",e="checkmark",i="success";const{channelCount:r,channelInterpretation:s,channelType:n,outputs:a}=this.micMetadata;return(s==="discrete"&&a>r||n==="STEREO"&&a===1||n==="QUAD"&&a===1||n==="QUAD"&&a===2)&&(t="Audio quality might be degraded.",e="warning",i="warning"),(n==="MONO"&&r<1||n==="STEREO"&&r<2||n==="QUAD"&&r<4)&&(t="Looks like your device is not functioning properly.",e="warning",i="error"),l("div",{class:`row status-text ${i}`},l("dyte-icon",{size:"sm",icon:this.iconPack[e]}),this.t(t))}getSpeakerTestStatus(){if(this.speakerTest==="success")return"All systems are functional.";if(this.speakerTest==="failed")return"Test failed. Please ensure your system volume is not 0."}setSpeakerTestResult(t){this.speakerPreview&&this.toggleSpeakerTest(),this.speakerTest=t}boolToStr(t){return t?"Yes":"No"}formatLabel(t){const e=t.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}normalizeVolume(t=0){let e=.3;const i=.001;return t>e&&(e=t),Math.max(5,Math.round(t*100/(e-i)))}detectLowVolume(){var t;return!((t=this.audioTrackStats)===null||t===void 0)&&t.lowVolume?this.lowVolCount++:this.lowVolCount=0,this.lowVolCount>10}detectSilence(){var t;return!((t=this.audioTrackStats)===null||t===void 0)&&t.silence?this.silenceCount++:this.silenceCount=0,this.silenceCount>5}render(){const t={meeting:this.meeting,states:this.states||L,iconPack:this.iconPack,t:this.t,size:this.size},e=["label","channelType"];return l(O,null,l("audio",{preload:"auto",src:"https://assets.dyte.io/ui-kit/speaker-test.mp3",ref:i=>this.testAudioEl=i}),l("div",{id:"header"},["Report","Troubleshoot"].map(i=>l("dyte-button",{key:i,variant:"ghost",class:{active:this.activeTab===i},onClick:()=>this.setActiveTab(i),iconPack:this.iconPack,t:this.t},this.t(i)))),this.activeTab==="Troubleshoot"&&l("div",{class:"tab-body"},l("div",null,l("div",{class:"stage-indicator"},"Step ",this.stage+1,"/3"),this.stage===0&&l("dyte-debugger-permissions-ui",Object.assign({},t,{mediaType:"audio"})),this.stage===1&&l("div",null,l("div",{class:"title"},"Microphone Test"),l("div",{class:"text"},this.t("Please start the microphone test and start speaking in order to test your audio device.")),l("dyte-button",{size:"md",onClick:()=>this.toggleMicTest()},this.micPreview?"Stop":"Start"," Microphone Test"),this.micPreview&&l("div",{class:"col"},l("div",{class:"sub-title"},"Device Information",l("dyte-information-tooltip",{iconPack:this.iconPack},l("div",{slot:"tootlip-text",class:"tooltip-text"},Object.keys(this.micMetadata).map(i=>l("div",null,this.formatLabel(i),": ",l("span",null,this.micMetadata[i])))))),e.map(i=>{const r=this.micMetadata[i];if(r)return l("div",{class:"row"},l("div",{class:"label"},l("span",null,this.t(this.formatLabel(i))),":"),l("div",{class:"text"},this.t(r)))}),this.getDeviceInformationStatus(),l("div",{class:"sub-title"},"Audio Level Analysis",l("dyte-information-tooltip",{iconPack:this.iconPack},l("div",{slot:"tootlip-text",class:"tooltip-text"},l("div",null,"Volume Level:",l("span",null,this.audioTrackStats.volume,"/100")),l("div",null,"Low Volume:",l("span",null,this.boolToStr(this.audioTrackStats.lowVolume))),l("div",null,"Silence Detected:",l("span",null,this.boolToStr(this.audioTrackStats.silence))),l("div",null,"Noise Detected:",l("span",null,this.boolToStr(this.audioTrackStats.clip))),l("div",null,"Time:",l("span",null,new Date(this.audioTrackStats.timestamp).toLocaleTimeString()))))),l("div",{class:"row"},l("dyte-icon",{icon:this.iconPack.speaker,size:"md"}),l("div",{class:"volume-indicator"},l("div",{class:"volume-level",ref:i=>this.volumeEl=i}))),this.getAudioLevelStatus())),this.stage===2&&l("div",{class:"col"},l("div",{class:"title"},"Speaker Test"),l("div",{class:"text"},this.t("Upon starting this test, an audio will be played. Please ensure your system volume is not set to zero.")),l("dyte-button",{onClick:()=>this.toggleSpeakerTest(),size:"md"},this.speakerPreview?"Stop":"Start"," Speaker Test"),this.speakerDevice&&l("div",null,l("div",{class:"sub-title"},"Device Information"),l("div",{class:"row"},l("div",{class:"label"},l("span",null,"Label"),":"),l("div",{class:"text"},this.speakerDevice.label))),this.speakerPreview&&l("div",null,l("p",{class:"sub-title"},"Are you able to hear the audio?"),l("div",{class:"speaker-test"},l("dyte-button",{onClick:()=>this.setSpeakerTestResult("success"),size:"sm",variant:"primary"},"Yes"),l("dyte-button",{onClick:()=>this.setSpeakerTestResult("failed"),size:"sm",variant:"secondary"},"No"))),!this.speakerPreview&&this.speakerTest!=="none"&&l("div",{class:`row status-text ${this.speakerTest}`},l("dyte-icon",{size:"sm",icon:this.iconPack[this.speakerTest==="failed"?"dismiss":"checkmark"]}),this.getSpeakerTestStatus()))),l("div",{class:"stage-manager"},this.stage<2&&l("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage+1)},"Next",l("dyte-icon",{size:"sm",icon:this.iconPack.chevron_right})),this.stage>0&&l("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage-1)},l("dyte-icon",{size:"sm",icon:this.iconPack.chevron_left}),"Prev"))),this.activeTab==="Report"&&l("div",{class:"tab-body"},l("dyte-debugger-issues-ui",Object.assign({},t,{mediaType:"audio"}))))}static get watchers(){return{meeting:["meetingChanged"]}}};E4.style=Mpe;const Dpe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;height:100%;width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:600}.status{margin-left:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:12px}.status dyte-icon{margin-right:var(--dyte-space-2, 8px)}.stage-indicator{margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.scroll{overflow:auto;border-radius:var(--dyte-border-radius-none, 0)}.warning,.NOT_REQUESTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity)) !important;opacity:0.8}.success,.ACCEPTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity)) !important;opacity:0.8}.COULD_NOT_START,.error,.DENIED,.SYSTEM_DENIED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity)) !important;opacity:0.8}h3{margin:var(--dyte-space-0, 0px);font-size:14px;font-weight:600}.status-text{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:100 !important}.status-text dyte-icon{margin-right:var(--dyte-space-2, 8px)}.tooltip-text{display:flex;flex-direction:column;font-size:12px}.tooltip-text span{margin-left:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88)) !important}.tooltip-text div{margin-top:var(--dyte-space-1, 4px)}.tooltip-text div:nth-child(1){margin:var(--dyte-space-0, 0px)}.row{display:flex;width:100%;flex-direction:row;align-items:center;justify-content:flex-start}.row dyte-switch{margin-left:var(--dyte-space-8, 32px)}.row dyte-icon{margin-left:var(--dyte-space-2, 8px)}.row dyte-button{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px)}.row .label{width:var(--dyte-space-28, 112px) !important;min-width:var(--dyte-space-28, 112px)}.row .text{margin-top:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px)}.align-start{align-items:flex-start !important}.col{display:flex;width:100%;flex-direction:column;align-items:flex-start;justify-content:flex-start}.label{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;justify-content:space-between;font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.info{margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;font-size:14px;font-weight:100 !important;--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity));opacity:0.7}.info dyte-icon{margin-right:var(--dyte-space-2, 8px)}.text{margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));opacity:0.7}.title{margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.sub-title{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.stage-manager{margin-top:var(--dyte-space-4, 16px);display:flex;width:100%;flex-direction:row-reverse;align-items:center;justify-content:space-between;align-self:flex-end;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}.stage-button{display:flex;cursor:pointer;flex-direction:row;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.stage-button dyte-icon{padding:var(--dyte-space-0, 0px)}.disabled{cursor:not-allowed;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52)) !important}#header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;border-radius:var(--dyte-border-radius-none, 0)}#header dyte-button:hover{background-color:transparent}#header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}.tab-body{position:relative;display:flex;height:100%;flex-direction:column;justify-content:space-between;overflow-y:auto;padding:var(--dyte-space-4, 16px)}",k4=class{constructor(e){U(this,e),this.testProgress=K(this,"testProgress",7),this.lowVolCount=0,this.silenceCount=0,this.frozenFramesCount=0,this.blackFramesCount=0,this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.activeTab="Report",this.stage=0,this.mediaPermission="NOT_REQUESTED",this.screenshareEnabled=!1,this.audioTrackMetadata={},this.videoTrackMetadata={},this.screenshareTest=!1,this.audioTrackStats={lowVolume:!1,clip:!1,silence:!1,volume:0,timestamp:0},this.videoTrackStats={isBlackFrame:!1,isFrozenFrame:!1,timestamp:0,videoScore:0}}connectedCallback(){this.meetingChanged(this.meeting),this.updateProgress()}disconnectedCallback(){var e,i;const{self:r,troubleshoot:s}=this.meeting;this.screenshareTest&&this.toggleScreenshareTest(),r==null||r.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),r.removeListener("screenShareUpdate",this.screenShareUpdateListener),(e=s==null?void 0:s.screenshare)===null||e===void 0||e.removeListener("audioTrackStats",this.audioTrackUpdateListener),(i=s==null?void 0:s.screenshare)===null||i===void 0||i.removeListener("videoTrackStats",this.videoTrackUpdateListener)}async meetingChanged(e){var i,r,s;if(!e)return;const{self:n,troubleshoot:a}=e;n.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener.bind(this)),n.addListener("screenShareUpdate",this.screenShareUpdateListener.bind(this)),(i=a==null?void 0:a.screenshare)===null||i===void 0||i.on("audioTrackStats",this.audioTrackUpdateListener.bind(this)),(r=a==null?void 0:a.screenshare)===null||r===void 0||r.on("videoTrackStats",this.videoTrackUpdateListener.bind(this));const o=(s=n==null?void 0:n.mediaPermissions)===null||s===void 0?void 0:s.screenshare;this.mediaPermissionUpdateListener({kind:"screenshare",message:o});const c=n==null?void 0:n.screenShareEnabled;this.screenShareUpdateListener({screenShareEnabled:c})}mediaPermissionUpdateListener({kind:e,message:i}){e==="screenshare"&&(this.mediaPermission=i,this.mediaPermission!=="ACCEPTED"&&(this.stage=0,this.updateProgress()))}screenShareUpdateListener({screenShareEnabled:e}){this.screenshareEnabled=e,!this.screenshareEnabled&&this.screenshareTest&&this.toggleScreenshareTest()}audioTrackUpdateListener(e){this.audioTrackStats=Object.assign(Object.assign({},e),{volume:this.normalizeVolume(e==null?void 0:e.volume)})}videoTrackUpdateListener(e){this.videoTrackStats=Object.assign(Object.assign({},e),{videoScore:this.normalizeVideoScore(e==null?void 0:e.videoScore)})}async toggleScreenshareTest(){var e,i,r;this.screenshareTest=!this.screenshareTest;const s=(e=this.meeting)===null||e===void 0?void 0:e.troubleshoot.screenshare;this.screenshareTest&&this.screenshareEnabled?(this.audioTrackMetadata=(i=s==null?void 0:s.getAudioTrackMetaData())!==null&&i!==void 0?i:{},this.videoTrackMetadata=(r=s==null?void 0:s.getVideoTrackMetaData())!==null&&r!==void 0?r:{},await s.startAudioTrackAnalysis(),await s.startVideoTrackAnalysis()):(s==null||s.stopAudioTrackAnalysis(),s==null||s.stopVideoTrackAnalysis())}setActiveTab(e){this.activeTab=e,this.updateProgress()}changeStage(e){this.mediaPermission==="ACCEPTED"&&(e=Math.max(0,e),e=Math.min(1,e),this.stage=e,this.updateProgress(),this.screenshareTest&&this.toggleScreenshareTest())}updateProgress(){this.activeTab==="Troubleshoot"?this.testProgress.emit((this.stage+1)*100/2):this.testProgress.emit(0)}getDeviceInformationStatus(){let e="All systems are functional.",i="checkmark",r="success";if(this.audioTrackMetadata){const{channelCount:s,channelInterpretation:n,channelType:a,outputs:o}=this.audioTrackMetadata;(n==="discrete"&&o>s||a==="STEREO"&&o===1||a==="QUAD"&&o===1||a==="QUAD"&&o===2)&&(e="Audio quality might be degraded.",i="warning",r="warning"),(a==="MONO"&&s<1||a==="STEREO"&&s<2||a==="QUAD"&&s<4)&&(e="Looks like your device is not functioning properly.",i="warning",r="error")}return l("div",{class:`row status-text ${r}`},l("dyte-icon",{size:"sm",icon:this.iconPack[i]}),this.t(e))}getAudioAnalysisStatus(){var e;let i="All systems are functional.",r="checkmark",s="success";return!((e=this.audioTrackMetadata)===null||e===void 0)&&e.label?(this.detectLowVolume()&&(i="Low volume detected.",r="warning",s="warning"),this.audioTrackStats.clip&&(i="Your audio may be noisy.",r="warning",s="error"),this.detectSilence()&&(i="Silence detected.",r="warning",s="error"),l("div",{class:`row status-text ${s}`},l("dyte-icon",{size:"sm",icon:this.iconPack[r]}),this.t(i))):l("div",{class:"row status-text warning"},l("dyte-icon",{size:"sm",icon:this.iconPack.warning}),this.t("Not Available"))}getVideoAnalysisStatus(){var e,i;let r="All systems are functional.",s="checkmark",n="success";return!((e=this.videoTrackStats)===null||e===void 0)&&e.isBlackFrame?this.blackFramesCount++:this.blackFramesCount=0,!((i=this.videoTrackStats)===null||i===void 0)&&i.isFrozenFrame?this.frozenFramesCount++:this.frozenFramesCount=0,this.frozenFramesCount>4&&(r="Looks like the video is frozen.",s="warning",n="error"),this.blackFramesCount>4&&(r="Video is not being processed by the camera.",s="warning",n="error"),l("div",{class:`row status-text ${n}`},l("dyte-icon",{size:"sm",icon:this.iconPack[s]}),this.t(r))}formatLabel(e){const i=e.replace(/([A-Z])/g," $1");return i.charAt(0).toUpperCase()+i.slice(1)}nullToStr(e){return e||"Not Available"}normalizeVolume(e=0){let i=.3;const r=.001;return e>i&&(i=e),Math.max(5,Math.round(e*100/(i-r)))}normalizeVideoScore(e=0){let i=1;const r=0;return e>i&&(i=e),Math.max(5,Math.round(e*10/(i-r)))}detectLowVolume(){var e;return!((e=this.audioTrackStats)===null||e===void 0)&&e.lowVolume?this.lowVolCount++:this.lowVolCount=0,this.lowVolCount>10}detectSilence(){var e;return!((e=this.audioTrackStats)===null||e===void 0)&&e.silence?this.silenceCount++:this.silenceCount=0,this.silenceCount>5}render(){var e,i;const r={meeting:this.meeting,states:this.states||L,iconPack:this.iconPack,t:this.t,size:this.size};return l(O,null,l("div",{id:"header"},["Report","Troubleshoot"].map(s=>l("dyte-button",{key:s,variant:"ghost",class:{active:this.activeTab===s},onClick:()=>this.setActiveTab(s),iconPack:this.iconPack,t:this.t},this.t(s)))),this.activeTab==="Troubleshoot"&&l("div",{class:"tab-body"},l("div",null,l("div",{class:"stage-indicator"},"Step ",this.stage+1,"/2"),this.stage===0&&l("dyte-debugger-permissions-ui",Object.assign({},r,{mediaType:"screenshare"})),this.stage===1&&(this.screenshareEnabled?l("div",{class:"col"},l("div",{class:"text"},"Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots."),l("dyte-button",{onClick:()=>this.toggleScreenshareTest()},this.screenshareTest?"Stop":"Start"," Screenshare Tests"),this.screenshareTest&&l("div",null,l("div",{class:"sub-title"},"Device Information",l("dyte-information-tooltip",null,l("div",{slot:"tootlip-text",class:"tooltip-text"},Object.keys(this.audioTrackMetadata).map(s=>{if(s!=="label")return l("div",null,"Audio ",this.formatLabel(s),":"," ",l("span",null,this.audioTrackMetadata[s]))}),Object.keys(this.videoTrackMetadata).map(s=>{if(s!=="label")return l("div",null,"Video ",this.formatLabel(s),":"," ",l("span",null,JSON.stringify(this.videoTrackMetadata[s])))})))),l("div",{class:"row align-start"},l("div",{class:"label"},l("span",null,"Audio Label"),":"),l("div",{class:"text"},this.nullToStr((e=this.audioTrackMetadata)===null||e===void 0?void 0:e.label))),l("div",{class:"row align-start"},l("div",{class:"label"},l("span",null,"Video Label"),":"),l("div",{class:"text"},this.nullToStr((i=this.videoTrackMetadata)===null||i===void 0?void 0:i.label))),this.getDeviceInformationStatus(),l("div",{class:"sub-title"},"Device Analysis"),l("div",{class:"row "},l("div",{class:"label"},l("span",null,"Audio Analysis")," :"),this.getAudioAnalysisStatus()),l("div",{class:"row"},l("div",{class:"label"},l("span",null,"Video Analysis")," :"),this.getVideoAnalysisStatus()))):l("div",{class:"col"},l("div",{class:"info"},l("dyte-icon",{size:"sm",icon:this.iconPack.warning}),"You are not sharing your screen."),l("div",{class:"text"},"In order for us to test your screenshare, you need to be sharing your screen. You can enable screenshare from the control bar.")))),l("div",{class:"stage-manager"},this.stage<1&&l("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage+1)},"Next",l("dyte-icon",{size:"sm",icon:this.iconPack.chevron_right})),this.stage>0&&l("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage-1)},l("dyte-icon",{size:"sm",icon:this.iconPack.chevron_left}),"Prev"))),this.activeTab==="Report"&&l("div",{class:"tab-body"},l("dyte-debugger-issues-ui",Object.assign({},r,{mediaType:"screenshare"}))))}static get watchers(){return{meeting:["meetingChanged"]}}};k4.style=Dpe;const Lpe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;height:100%;width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:600}.status{margin-left:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:12px}.status dyte-icon{margin-right:var(--dyte-space-2, 8px)}.stage-indicator{margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.scroll{overflow:auto;border-radius:var(--dyte-border-radius-none, 0)}.warning,.NOT_REQUESTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity)) !important;opacity:0.8}.success,.ACCEPTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity)) !important;opacity:0.8}.COULD_NOT_START,.error,.DENIED,.SYSTEM_DENIED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity)) !important;opacity:0.8}.row{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}h3{margin:var(--dyte-space-0, 0px);font-size:14px;font-weight:600}.status-text{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:100 !important}.status-text dyte-icon{margin-right:var(--dyte-space-2, 8px)}.tooltip-text{display:flex;flex-direction:column;font-size:12px}.tooltip-text span{margin-left:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88)) !important}.tooltip-text div{margin-top:var(--dyte-space-1, 4px)}.tooltip-text div:nth-child(1){margin:var(--dyte-space-0, 0px)}.row{display:flex;flex-direction:row;align-items:center;justify-content:center}.row dyte-switch{margin-left:var(--dyte-space-8, 32px)}.row dyte-button{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px)}.row .label{width:var(--dyte-space-40, 160px)}.row .text{margin-top:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px)}.col{display:flex;width:100%;flex-direction:column;align-items:flex-start;justify-content:flex-start}.label{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;justify-content:space-between;font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.text{margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));opacity:0.7}.title{margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.sub-title{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.stage-manager{position:-webkit-sticky;position:sticky;bottom:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);display:flex;width:100%;flex-direction:row-reverse;align-items:center;justify-content:space-between;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}.stage-button{display:flex;cursor:pointer;flex-direction:row;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.stage-button dyte-icon{padding:var(--dyte-space-0, 0px)}.disabled{cursor:not-allowed;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52)) !important}.video-container{position:relative;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.no-video-preview{position:absolute;top:50%;left:50%;z-index:50;display:flex;height:var(--dyte-space-12, 48px);width:var(--dyte-space-12, 48px);align-items:center;justify-content:center;border-radius:50%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));translate:-50% -50%}.video-preview{margin-top:var(--dyte-space-1, 4px);aspect-ratio:16 / 9;height:var(--dyte-space-28, 112px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}video{transform:scaleX(-1)}#header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;border-radius:var(--dyte-border-radius-none, 0)}#header dyte-button:hover{background-color:transparent}#header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}.tab-body{display:flex;height:100%;flex-direction:column;justify-content:space-between;overflow-y:auto;padding:var(--dyte-space-4, 16px)}",T4=class{constructor(e){U(this,e),this.testProgress=K(this,"testProgress",7),this.blackFramesCount=0,this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.activeTab="Report",this.stage=0,this.mediaPermission="NOT_REQUESTED",this.videoPreview=!1,this.videoMetadata={},this.videoTrackStats={isBlackFrame:!1,isFrozenFrame:!1,timestamp:0,videoScore:0}}connectedCallback(){this.meetingChanged(this.meeting),this.updateProgress()}disconnectedCallback(){var e;const{self:i,troubleshoot:r}=this.meeting;this.videoPreview&&this.toggleVideoTest(),i==null||i.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(e=r==null?void 0:r.video)===null||e===void 0||e.removeListener("videoTrackStats",this.videoTrackUpdateListener)}async meetingChanged(e){var i,r;if(!e)return;const{self:s,troubleshoot:n}=e;s!=null&&s.videoTrack&&await this.getTrackInfo(),s==null||s.on("deviceUpdate",this.deviceUpdateListner.bind(this)),s.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener.bind(this));const a=(i=s==null?void 0:s.mediaPermissions)===null||i===void 0?void 0:i.video;this.mediaPermissionUpdateListener({kind:"video",message:a}),(r=n==null?void 0:n.video)===null||r===void 0||r.on("videoTrackStats",this.videoTrackUpdateListener.bind(this))}mediaPermissionUpdateListener({kind:e,message:i}){e==="video"&&(this.mediaPermission=i,this.mediaPermission!=="ACCEPTED"&&(this.stage=0,this.updateProgress(),this.videoPreview&&this.toggleVideoTest()))}deviceUpdateListner({device:e,preview:i}){i||(e==null?void 0:e.kind)==="videoinput"&&this.getTrackInfo()}videoTrackUpdateListener(e){this.videoTrackStats=Object.assign(Object.assign({},e),{videoScore:this.normalizeVideoScore(e==null?void 0:e.videoScore)})}setActiveTab(e){this.activeTab=e,this.updateProgress()}async toggleVideoTest(){var e,i;this.videoPreview=!this.videoPreview;const r=(i=(e=this.meeting)===null||e===void 0?void 0:e.troubleshoot)===null||i===void 0?void 0:i.video;if(this.videoPreview){const s=await(r==null?void 0:r.startPreview()),n=new MediaStream;if(!s)return;n.addTrack(s),setTimeout(()=>{this.videoEl.srcObject=n},500),this.getTrackInfo(),await(r==null?void 0:r.startTrackAnalysis())}else r==null||r.stopPreview(),r==null||r.stopTrackAnalysis(),this.videoEl.srcObject=void 0}getTrackInfo(){var e,i;this.videoMetadata=(i=(e=this.meeting.troubleshoot)===null||e===void 0?void 0:e.video)===null||i===void 0?void 0:i.getTrackMetadata()}getAnalysisStatus(){var e,i;let r="All systems are functional.",s="checkmark",n="success";return!((e=this.videoTrackStats)===null||e===void 0)&&e.isBlackFrame?this.blackFramesCount++:this.blackFramesCount=0,!((i=this.videoTrackStats)===null||i===void 0)&&i.isFrozenFrame&&(r="Looks like the video is frozen.",s="warning",n="error"),this.blackFramesCount>10&&(r="Video is not being processed by the camera.",s="warning",n="error"),l("div",{class:`row status-text ${n}`},l("dyte-icon",{size:"sm",icon:this.iconPack[s]}),this.t(r))}changeStage(e){this.mediaPermission==="ACCEPTED"&&(e=Math.max(0,e),e=Math.min(1,e),this.stage=e,this.updateProgress(),this.videoPreview&&this.toggleVideoTest())}updateProgress(){this.activeTab==="Troubleshoot"?this.testProgress.emit((this.stage+1)*100/2):this.testProgress.emit(0)}formatLabel(e){const i=e.replace(/([A-Z])/g," $1");return i.charAt(0).toUpperCase()+i.slice(1)}boolToStr(e){return e?"Yes":"No"}normalizeVideoScore(e=0){let i=1;const r=0;return e>i&&(i=e),Math.max(5,Math.round(e*10/(i-r)))}render(){const e={meeting:this.meeting,states:this.states||L,iconPack:this.iconPack,t:this.t,size:this.size};return l(O,null,l("div",{id:"header"},["Report","Troubleshoot"].map(i=>l("dyte-button",{key:i,variant:"ghost",class:{active:this.activeTab===i},onClick:()=>this.setActiveTab(i),iconPack:this.iconPack,t:this.t},this.t(i)))),this.activeTab==="Troubleshoot"&&l("div",{class:"tab-body"},l("div",null,l("div",{class:"stage-indicator"},"Step ",this.stage+1,"/2"),this.stage===0&&l("dyte-debugger-permissions-ui",Object.assign({},e,{mediaType:"video"})),this.stage===1&&l("div",null,l("div",{class:"title"},"Camera Test"),l("div",{class:"text"},this.t("Upon starting the Camera Test, a video preview will be enabled for you.")),l("dyte-button",{size:"md",onClick:()=>this.toggleVideoTest()},this.videoPreview?"Stop":"Start"," Camera Test"),this.videoPreview&&this.videoMetadata&&l("div",{class:"col"},l("div",{class:"sub-title"},"Device Information",l("dyte-information-tooltip",{iconPack:this.iconPack},l("div",{slot:"tootlip-text",class:"tooltip-text"},Object.keys(this.videoMetadata).map(i=>l("div",null,this.formatLabel(i),":",l("span",null,JSON.stringify(this.videoMetadata[i]))))))),l("div",{class:"row"},l("div",{class:"label"},l("span",null,this.t("Device Label")),":"),l("div",{class:"text"},this.t(this.videoMetadata.label))),l("div",{class:"sub-title"},"Video & Device Analysis",l("dyte-information-tooltip",{iconPack:this.iconPack},l("div",{slot:"tootlip-text",class:"tooltip-text"},l("div",null,"Video Score:",l("span",null,this.videoTrackStats.videoScore,"/10")),l("div",null,"Black Frame Detected:",l("span",null,this.boolToStr(this.videoTrackStats.isBlackFrame))),l("div",null,"Frozen Frame Detected:",l("span",null,this.boolToStr(this.videoTrackStats.isFrozenFrame))),l("div",null,"Time:",l("span",null,new Date(this.videoTrackStats.timestamp).toLocaleTimeString()))))),l("div",{class:"video-container"},!this.videoPreview&&l("div",{class:"no-video-preview"},l("dyte-icon",{icon:this.iconPack.video_off,size:"md"})),l("video",{ref:i=>this.videoEl=i,autoPlay:!0,playsInline:!0,muted:!0,class:"video-preview"})),this.getAnalysisStatus()))),l("div",{class:"stage-manager"},this.stage>0&&l("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage-1)},l("dyte-icon",{size:"sm",icon:this.iconPack.chevron_left}),"Prev"),this.stage<1&&l("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage+1)},"Next",l("dyte-icon",{size:"sm",icon:this.iconPack.chevron_right})))),this.activeTab==="Report"&&l("div",{class:"tab-body"},l("dyte-debugger-issues-ui",Object.assign({},e,{mediaType:"video"}))))}static get watchers(){return{meeting:["meetingChanged"]}}};T4.style=Lpe;var Npe=Object.freeze({__proto__:null,dyte_debugger_audio:E4,dyte_debugger_screenshare:k4,dyte_debugger_video:T4});const Upe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:inline-flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-1\\.5, 6px);font-size:14px;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}span.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}::slotted(dyte-audio-visualizer[slot='start']){margin-right:var(--dyte-space-1\\.5, 6px)}::slotted(dyte-audio-visualizer[slot='end']){margin-left:var(--dyte-space-1\\.5, 6px)}:host([size='sm']){font-size:12px;--tw-bg-opacity:0.6}:host([variant='text']){background-color:transparent;padding:var(--dyte-space-0, 0px)}",x4=class{constructor(t){U(this,t),this.participant=void 0,this.meeting=void 0,this.size=void 0,this.maxLength=20,this.isScreenShare=!1,this.variant="default",this.iconPack=N,this.t=j(),this.length=13}sizeChanged(t){this.length=t==="sm"?8:13}formatNameTag(t,e){return this.isScreenShare?e?`${this.t("screen")} - ${Mr(t,this.length-3)} (${this.t("you")})`:`${this.t("screen")} - ${Mr(t,this.length)}`:e?`${Mr(t,this.length-3)} (${this.t("you")})`:Mr(t,this.length)}render(){var t,e,i;const r=es(((t=this.participant)===null||t===void 0?void 0:t.name)||""),s=((e=this.participant)===null||e===void 0?void 0:e.id)===((i=this.meeting)===null||i===void 0?void 0:i.self.id);return l(O,{title:r},l("slot",{name:"start"}),l("span",{class:"name"},this.formatNameTag(r,s)),l("slot",{name:"end"}))}static get watchers(){return{size:["sizeChanged"]}}};x4.style=Upe;var jpe=Object.freeze({__proto__:null,dyte_name_tag:x4});const $pe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;height:var(--dyte-space-14, 56px);align-items:center;justify-content:space-between;cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);font-size:14px}.left{display:flex;align-items:center}.left>*{margin-right:var(--dyte-space-2, 8px)}.left>*:last-child{margin-right:var(--dyte-space-0, 0px)}.right{display:flex;align-items:center;justify-content:flex-end}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}dyte-icon.red{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.more{cursor:pointer}",P4=class{constructor(t){U(this,t),this.pinnedListener=({isPinned:e})=>{this.isPinned=e},this.stageListener=({webinarStageStatus:e})=>{this.isOnStage=e==="ON_STAGE"},this.meeting=void 0,this.view="sidebar",this.participant=void 0,this.iconPack=N,this.t=j(),this.audioEnabled=!1,this.videoEnabled=!1,this.isPinned=!1,this.isOnStage=!1,this.canDisableParticipantAudio=!1,this.canDisableParticipantVideo=!1,this.canKickParticipant=!1,this.canPinParticipant=!1,this.canAllowParticipantOnStage=!1}connectedCallback(){this.meetingChanged(this.meeting),this.participantChanged(this.participant)}disconnectedCallback(){this.participant==null||this.participant.removeListener==null||(this.audioUpdateListener&&this.participant.removeListener("audioUpdate",this.audioUpdateListener),this.videoUpdateListener&&this.participant.removeListener("videoUpdate",this.videoUpdateListener),this.participant.removeListener("pinned",this.pinnedListener),this.participant.removeListener("unpinned",this.pinnedListener),this.participant.removeListener("peerStartedPresenting",this.stageListener),this.participant.removeListener("peerStoppedPresenting",this.stageListener))}meetingChanged(t){if(t!=null){const{self:e}=t;this.canDisableParticipantAudio=e.permissions.canAllowParticipantAudio||e.permissions.canDisableParticipantAudio,this.canDisableParticipantVideo=e.permissions.canAllowParticipantVideo||e.permissions.canDisableParticipantVideo,this.canKickParticipant=e.permissions.kickParticipant,this.canPinParticipant=e.permissions.pinParticipant,this.canAllowParticipantOnStage=e.permissions.acceptPresentRequests}}participantChanged(t){if(t!=null){if(this.audioEnabled=t.audioEnabled,this.videoEnabled=t.videoEnabled,this.isPinned=t.isPinned,this.isOnStage=t.webinarStageStatus==="ON_STAGE",this.audioUpdateListener=({audioEnabled:e})=>{this.audioEnabled=e},this.videoUpdateListener=({videoEnabled:e})=>{this.videoEnabled=e},t.addListener==null)return;t.addListener("audioUpdate",this.audioUpdateListener),t.addListener("videoUpdate",this.videoUpdateListener),t.addListener("pinned",this.pinnedListener),t.addListener("unpinned",this.pinnedListener),t.addListener("peerStartedPresenting",this.stageListener),t.addListener("peerStoppedPresenting",this.stageListener)}}render(){var t,e,i,r,s,n,a,o,c;const d=((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="AUDIO_ROOM",u=((e=this.meeting)===null||e===void 0?void 0:e.self.id)===this.participant.id,p=this.canDisableParticipantAudio&&this.audioEnabled||this.canDisableParticipantVideo&&!d||this.canKickParticipant||this.canPinParticipant,g=es(((i=this.participant)===null||i===void 0?void 0:i.name)||""),m=this.isOnStage||["GROUP_CALL","AUDIO_ROOM"].includes((r=this.meeting)===null||r===void 0?void 0:r.meta.viewType);return l(O,null,l("div",{class:"left"},l("dyte-avatar",{participant:this.participant,size:"sm",iconPack:this.iconPack,t:this.t}),l("p",{class:"name",title:g},Mr(g,16)," ",((s=this.meeting)===null||s===void 0?void 0:s.self.id)===((n=this.participant)===null||n===void 0?void 0:n.id)&&this.t("(you)"))),this.view==="sidebar"&&l("div",{class:"right"},m&&l("dyte-icon",{class:{red:!this.audioEnabled},iconPack:this.iconPack,t:this.t,icon:this.audioEnabled?this.iconPack.mic_on:this.iconPack.mic_off}),m&&!d&&l("dyte-icon",{class:{red:!this.videoEnabled},iconPack:this.iconPack,t:this.t,icon:this.videoEnabled?this.iconPack.video_on:this.iconPack.video_off}),p&&l("dyte-menu",{iconPack:this.iconPack,t:this.t},l("dyte-button",{variant:"ghost",kind:"icon",slot:"trigger",iconPack:this.iconPack,t:this.t},l("dyte-icon",{class:"more",icon:this.iconPack.more_vertical})),l("dyte-menu-list",{iconPack:this.iconPack,t:this.t},this.canPinParticipant&&m&&l("dyte-menu-item",{onClick:()=>{this.isPinned?this.participant.unpin():this.participant.pin()},iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.isPinned?this.iconPack.pin_off:this.iconPack.pin,slot:"start",iconPack:this.iconPack,t:this.t}),this.isPinned?this.t("unpin"):this.t("pin")),this.canDisableParticipantAudio&&m&&this.audioEnabled&&l("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableAudio()}},l("dyte-icon",{icon:this.iconPack.mic_off,slot:"start"}),this.t("mute")),this.canDisableParticipantVideo&&m&&this.videoEnabled&&l("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableVideo()}},l("dyte-icon",{icon:this.iconPack.video_off,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("participants.turn_off_video")),((a=this.meeting)===null||a===void 0?void 0:a.meta.viewType)==="WEBINAR"&&this.canAllowParticipantOnStage&&((o=this.participant)===null||o===void 0?void 0:o.id)!==((c=this.meeting)===null||c===void 0?void 0:c.self.id)&&l("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:this.isOnStage?"red":"",onClick:async()=>{const f=this.participant;this.isOnStage?(f.isPinned&&f.unpin(),await f.removeFromStage()):await f.acceptJoinStageRequest(),this.isOnStage=!this.isOnStage}},l("dyte-icon",{iconPack:this.iconPack,t:this.t,icon:this.isOnStage?this.iconPack.leave_stage:this.iconPack.join_stage,slot:"start"}),this.isOnStage?this.t("stage.remove_from_stage"):this.t("stage.add_to_stage")),!u&&this.canKickParticipant&&l("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:"red",onClick:()=>{var f,b;(f=this.meeting)===null||f===void 0||f.participants.kick((b=this.participant)===null||b===void 0?void 0:b.id)}},l("dyte-icon",{icon:this.iconPack.dismiss,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("kick")),l("slot",{name:"menu-list"})))))}static get watchers(){return{meeting:["meetingChanged"],participant:["participantChanged"]}}};P4.style=$pe;var zpe=Object.freeze({__proto__:null,dyte_participant:P4});const Fpe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column}audio{visibility:hidden}label{-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.row{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}.dyte-select{width:100%;max-width:100%;text-overflow:ellipsis}dyte-audio-visualizer{flex-shrink:0}dyte-button{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}dyte-button dyte-icon{margin-right:var(--dyte-space-2, 8px)}`,C4=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.stageStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canProduceAudio=!1},this.deviceListUpdateListener=({added:e,removed:i})=>{e.map(r=>{r.kind==="audioinput"&&(this.audioDevices=[...this.audioDevices,r]),r.kind==="audiooutput"&&(this.speakerDevices=[...this.speakerDevices,r])}),i.map(r=>{r.kind==="audioinput"&&(this.audioDevices=this.audioDevices.filter(s=>s.deviceId!==r.deviceId)),r.kind==="audiooutput"&&(this.speakerDevices=this.speakerDevices.filter(s=>s.deviceId!==r.deviceId))})},this.deviceUpdateListener=({device:e})=>{e.kind==="audioinput"&&(this.currentDevices=Object.assign(Object.assign({},this.currentDevices),{audio:e})),e.kind==="audiooutput"&&(this.currentDevices=Object.assign(Object.assign({},this.currentDevices),{speaker:e}))},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.audioDevices=[],this.speakerDevices=[],this.canProduceAudio=!0,this.currentDevices={audio:void 0,speaker:void 0}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,r,s,n,a,o,c;(t=this.meeting)===null||t===void 0||t.self.removeListener("joinStageRequestAccepted",this.stageStateListener),(e=this.meeting)===null||e===void 0||e.self.removeListener("stageJoined",this.stageStateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("removedFromStage",this.stageStateListener),(s=(r=this.meeting)===null||r===void 0?void 0:r.stage)===null||s===void 0||s.removeListener("stageStatusUpdate",this.stageStateListener),(n=this.meeting)===null||n===void 0||n.self.removeListener("stageLeft",this.selfStageLeftListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("joinStageRequestRejected",this.stageStateListener),(o=this.meeting)===null||o===void 0||o.self.removeListener("deviceListUpdate",this.deviceListUpdateListener),(c=this.meeting)===null||c===void 0||c.self.removeListener("deviceUpdate",this.deviceUpdateListener)}updateCanProduce(t){const{self:e,meta:i,stage:r}=t,s=e.permissions.canProduceAudio==="ALLOWED",n=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canProduceAudio=!1,s?this.canProduceAudio=!0:(n||a)&&e.permissions.canProduceAudio==="CAN_REQUEST"&&(n&&(e.webinarStageStatus==="ON_STAGE"||e.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canProduceAudio=!0)}meetingChanged(t){t!=null&&Li(async()=>{var e,i,r,s;const{self:n,stage:a}=t,o=await t.self.getAudioDevices(),c=await t.self.getSpeakerDevices(),d=(e=t.self.getCurrentDevices())===null||e===void 0?void 0:e.audio,u=(i=t.self.getCurrentDevices())===null||i===void 0?void 0:i.speaker;this.currentDevices={audio:d,speaker:u},this.updateCanProduce(t),n.addListener("joinStageRequestAccepted",this.stageStateListener),n.addListener("stageJoined",this.stageStateListener),n.addListener("removedFromStage",this.stageStateListener),a==null||a.addListener("stageStatusUpdate",this.stageStateListener),n.addListener("stageLeft",this.selfStageLeftListener),n.addListener("joinStageRequestRejected",this.stageStateListener),n.addListener("deviceListUpdate",this.deviceListUpdateListener),n.addListener("deviceUpdate",this.deviceUpdateListener),d!=null?this.audioDevices=[(r=o.find(p=>p.deviceId===d.deviceId))!==null&&r!==void 0?r:d,...o.filter(p=>p.deviceId!==d.deviceId)]:this.audioDevices=o,u!=null?this.speakerDevices=[(s=c.find(p=>p.deviceId===u.deviceId))!==null&&s!==void 0?s:u,...c.filter(p=>p.deviceId!==u.deviceId)]:this.speakerDevices=c})}testAudio(){var t;(t=this.testAudioEl)===null||t===void 0||t.play()}setDevice(t,e){var i,r;const s=t==="audio"?this.audioDevices.find(n=>n.deviceId===e):this.speakerDevices.find(n=>n.deviceId===e);this.currentDevices=Object.assign(Object.assign({},this.currentDevices),{[t]:s}),s!=null&&((i=this.meeting)===null||i===void 0||i.self.setDevice(s),s.kind==="audiooutput"&&((r=this.testAudioEl)===null||r===void 0||r.setSinkId(s.deviceId)))}render(){var t,e;if(this.meeting==null)return null;let i=0,r=0;const s=this.states||L,n=((t=s==null?void 0:s.prefs)===null||t===void 0?void 0:t.muteNotificationSounds)===!0||D3("mute-notification-sounds")==="true";return l(O,null,l("audio",{preload:"auto",src:"https://assets.dyte.io/ui-kit/speaker-test.mp3",ref:a=>this.testAudioEl=a}),this.canProduceAudio&&l("div",{class:"group",part:"microphone-selection"},l("label",null,"Microphone (input)"),l("div",{class:"row"},l("select",{class:"dyte-select",onChange:a=>this.setDevice("audio",a.target.value)},this.audioDevices.map(({deviceId:a,label:o})=>{var c;return l("option",{value:a,selected:((c=this.currentDevices.audio)===null||c===void 0?void 0:c.deviceId)===a},o||`Microphone ${++i}`)})),l("dyte-audio-visualizer",{participant:(e=this.meeting)===null||e===void 0?void 0:e.self,iconPack:this.iconPack,t:this.t}))),l("div",{class:"group",part:"speaker-selection"},this.speakerDevices.length>0&&l("div",null,l("label",null,"Speaker (output)"),l("div",{class:"row"},l("select",{class:"dyte-select",onChange:a=>this.setDevice("speaker",a.target.value)},this.speakerDevices.map(({deviceId:a,label:o})=>{var c;return l("option",{value:a,selected:((c=this.currentDevices.speaker)===null||c===void 0?void 0:c.deviceId)===a},o||`Speaker ${++r}`)})))),l("dyte-button",{variant:"secondary",onClick:()=>this.testAudio(),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.speaker,slot:"start",iconPack:this.iconPack,t:this.t}),"Test")),l("div",{class:"group",part:"notification-toggle"},l("div",{class:"row"},l("label",{htmlFor:"notification-toggle"},"Notification sound"),l("dyte-switch",{id:"notification-toggle",checked:!n,onDyteChange:a=>{var o;const{checked:c}=a.target,d=!c;this.stateUpdate.emit({prefs:{muteNotificationSounds:d}}),L.prefs=Object.assign(Object.assign({},(o=L.prefs)!==null&&o!==void 0?o:{}),{muteNotificationSounds:d}),M3("mute-notification-sounds",d)},iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{meeting:["meetingChanged"]}}};C4.style=Fpe;const Vpe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column}.dyte-select{width:100%;text-overflow:ellipsis}dyte-participant-tile{margin-left:auto;margin-right:auto;margin-bottom:var(--dyte-space-4, 16px);max-width:100%}#icon{padding-bottom:var(--dyte-space-1, 4px)}.apply-button{height:var(--dyte-space-10, 40px)}label{-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.row{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}`,R4=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.onVideoUpdate=e=>{this.videoEnabled=e.videoEnabled},this.deviceListUpdateListener=({added:e,removed:i})=>{e.map(r=>{r.kind==="videoinput"&&(this.videoDevices=[...this.videoDevices,r])}),i.map(r=>{r.kind==="videoinput"&&(this.videoDevices=this.videoDevices.filter(s=>s.deviceId!==r.deviceId))})},this.deviceUpdateListener=({device:e})=>{e.kind==="videoinput"&&(this.currentDevice=e)},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.videoDevices=[],this.currentDevice=void 0,this.videoEnabled=void 0}componentDidLoad(){this.meetingChanged(this.meeting)}meetingChanged(t){var e,i,r;t!=null&&(this.videoEnabled=t.self.videoEnabled,(e=t.self)===null||e===void 0||e.addListener("videoUpdate",this.onVideoUpdate),(i=t.self)===null||i===void 0||i.addListener("deviceListUpdate",this.deviceListUpdateListener),(r=t.self)===null||r===void 0||r.addListener("deviceUpdate",this.deviceUpdateListener),Li(async()=>{var s,n;const a=await t.self.getVideoDevices(),o=(s=t.self.getCurrentDevices())===null||s===void 0?void 0:s.video;o!=null?this.videoDevices=[(n=a.find(c=>c.deviceId===o.deviceId))!==null&&n!==void 0?n:o,...a.filter(c=>c.deviceId!==o.deviceId)]:this.videoDevices=a}))}disconnectedCallback(){var t,e,i;(t=this.meeting.self)===null||t===void 0||t.removeListener("videoUpdate",this.onVideoUpdate),(e=this.meeting)===null||e===void 0||e.self.removeListener("deviceListUpdate",this.deviceListUpdateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("deviceUpdate",this.deviceUpdateListener)}async setDevice(t){var e;const i=this.videoDevices.find(r=>r.deviceId===t);this.currentDevice=i,i!=null&&await((e=this.meeting)===null||e===void 0?void 0:e.self.setDevice(i))}render(){var t,e,i;if(this.meeting==null)return null;let r=0;const s=this.states||L,n=((t=s==null?void 0:s.prefs)===null||t===void 0?void 0:t.mirrorVideo)===!0||D3("mirror-video")==="true";return l(O,null,l("div",{class:"group",part:"tile-preview"},this.videoEnabled===!0?l("dyte-participant-tile",{meeting:this.meeting,participant:(e=this.meeting)===null||e===void 0?void 0:e.self,iconPack:this.iconPack,t:this.t,states:s,isPreview:!0}):l("div",{class:"camera-off-helper"},l("dyte-participant-tile",{meeting:this.meeting,participant:(i=this.meeting)===null||i===void 0?void 0:i.self},l("div",null,l("dyte-icon",{id:"icon",icon:this.iconPack.video_off,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}),l("div",null,"Camera is off"))))),l("div",{class:"group",part:"camera-selection"},l("label",null,"Camera"),l("div",{class:"row"},l("select",{class:"dyte-select",onChange:a=>this.setDevice(a.target.value)},this.videoDevices.map(({deviceId:a,label:o})=>{var c;return l("option",{selected:((c=this.currentDevice)===null||c===void 0?void 0:c.deviceId)===a,value:a},o||`Camera ${++r}`)})))),l("div",{class:"group",part:"mirror-toggle"},l("div",{class:"row"},l("label",{htmlFor:"mirror-toggle"},"Mirror my Video"),l("dyte-switch",{checked:n,iconPack:this.iconPack,t:this.t,onDyteChange:a=>{var o;const{checked:c}=a.target;this.stateUpdate.emit({prefs:{mirrorVideo:c}}),L.prefs=Object.assign(Object.assign({},(o=L.prefs)!==null&&o!==void 0?o:{}),{mirrorVideo:c}),M3("mirror-video",c)}}))))}static get watchers(){return{meeting:["meetingChanged"]}}};R4.style=Vpe;var Bpe=Object.freeze({__proto__:null,dyte_settings_audio:C4,dyte_settings_video:R4});const Hpe=":host{box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column;gap:var(--dyte-space-2, 8px);font-family:var(--dyte-font-family, sans-serif)}dyte-button{z-index:10}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}@media (orientation: portrait){:host([size='sm']){margin-top:var(--dyte-space-2, 8px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;transition:all 0.3s linear}:host([size='md']){height:var(--dyte-space-24, 96px);width:100%;flex-direction:row;transition:all 0.3s linear}:host .tab{margin:var(--dyte-space-0, 0px)}}:host([size='sm']){flex-direction:column;margin-top:var(--dyte-space-4, 16px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;gap:var(--dyte-space-2, 8px);overflow-x:auto}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);text-overflow:clip;min-width:100px;height:40px}:host([size='sm']) .tab .col{display:flex;flex-direction:row;align-items:center;gap:var(--dyte-space-2, 8px)}:host([size='sm']) .tab .col img,:host([size='sm']) .tab .col dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([layout='column']){flex-direction:column}:host([layout='column']) .aside{flex:2;max-width:100%;width:100%}",A4=class{constructor(t){U(this,t),this.tabChange=K(this,"tabChange",7),this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Me,this.layout="row",this.iconPack=N,this.t=j(),this.activeTab=void 0,this.tabs=[]}render(){return l(O,null,l("dyte-spotlight-indicator",{meeting:this.meeting,iconPack:this.iconPack,t:this.t,size:this.size}),this.tabs.map(t=>{var e,i,r,s,n;if(t.type==="screenshare"){const a=t.participant,o=es(a.name);return l("dyte-button",{title:`${o}'s Screen Share`,key:t.participant.id,kind:"icon",iconPack:this.iconPack,t:this.t,class:{tab:!0,active:((e=this.activeTab)===null||e===void 0?void 0:e.type)==="screenshare"&&((i=this.activeTab)===null||i===void 0?void 0:i.participant.id)===t.participant.id},onClick:()=>this.tabChange.emit(t)},l("div",{class:"center col"},l("dyte-icon",{icon:this.iconPack.share_screen_person,iconPack:this.iconPack,t:this.t}),l("span",{class:"name"},a.id===((r=this.meeting)===null||r===void 0?void 0:r.self.id)?this.t("you"):Mr(o,6))))}else if(t.type==="plugin"){const a=t.plugin;return l("dyte-button",{title:a.name,key:a.id,kind:"icon",iconPack:this.iconPack,t:this.t,class:{tab:!0,active:((s=this.activeTab)===null||s===void 0?void 0:s.type)==="plugin"&&((n=this.activeTab)===null||n===void 0?void 0:n.plugin.id)===a.id},onClick:()=>this.tabChange.emit(t)},l("div",{class:"center col"},l("img",{src:a.picture}),l("span",{class:"name"},Mr(a.name,6))))}}))}};A4.style=Hpe;var Gpe=Object.freeze({__proto__:null,dyte_tab_bar:A4}),Wpe=rv;function rv(){}rv.mixin=function(t){var e=t.prototype||t;e.isWildEmitter=!0,e.on=function(i,r,s){this.callbacks=this.callbacks||{};var n=arguments.length===3,a=n?arguments[1]:void 0,o=n?arguments[2]:arguments[1];return o._groupName=a,(this.callbacks[i]=this.callbacks[i]||[]).push(o),this},e.once=function(i,r,s){var n=this,a=arguments.length===3,o=a?arguments[1]:void 0,c=a?arguments[2]:arguments[1];function d(){n.off(i,d),c.apply(this,arguments)}return this.on(i,o,d),this},e.releaseGroup=function(i){this.callbacks=this.callbacks||{};var r,s,n,a;for(r in this.callbacks)for(a=this.callbacks[r],s=0,n=a.length;s<n;s++)a[s]._groupName===i&&(a.splice(s,1),s--,n--);return this},e.off=function(i,r){this.callbacks=this.callbacks||{};var s=this.callbacks[i],n;return s?arguments.length===1?(delete this.callbacks[i],this):(n=s.indexOf(r),n!==-1&&(s.splice(n,1),s.length===0&&delete this.callbacks[i]),this):this},e.emit=function(i){this.callbacks=this.callbacks||{};var r=[].slice.call(arguments,1),s=this.callbacks[i],n=this.getWildcardCallbacks(i),a,o,c;if(s)for(c=s.slice(),a=0,o=c.length;a<o&&c[a];++a)c[a].apply(this,r);if(n)for(o=n.length,c=n.slice(),a=0,o=c.length;a<o&&c[a];++a)c[a].apply(this,[i].concat(r));return this},e.getWildcardCallbacks=function(i){this.callbacks=this.callbacks||{};var r,s,n=[];for(r in this.callbacks)s=r.split("*"),(r==="*"||s.length===2&&i.slice(0,s[0].length)===s[0])&&(n=n.concat(this.callbacks[r]));return n}};rv.mixin(rv);function qpe(t,e){var i=-1/0;t.getFloatFrequencyData(e);for(var r=4,s=e.length;r<s;r++)e[r]>i&&e[r]<0&&(i=e[r]);return i}var zw;typeof window<"u"&&(zw=window.AudioContext||window.webkitAudioContext);var us=null,Jpe=function(t,r){var i=new Wpe;if(!zw)return i;var r=r||{},s=r.smoothing||.1,n=r.interval||50,a=r.threshold,o=r.play,c=r.history||10,d=!0;us=r.audioContext||us||new zw;var u,p,g;g=us.createAnalyser(),g.fftSize=512,g.smoothingTimeConstant=s,p=new Float32Array(g.frequencyBinCount),t.jquery&&(t=t[0]),t instanceof HTMLAudioElement||t instanceof HTMLVideoElement?(u=us.createMediaElementSource(t),typeof o>"u"&&(o=!0),a=a||-50):(u=us.createMediaStreamSource(t),a=a||-50),u.connect(g),o&&g.connect(us.destination),i.speaking=!1,i.suspend=function(){return us.suspend()},i.resume=function(){return us.resume()},Object.defineProperty(i,"state",{get:function(){return us.state}}),us.onstatechange=function(){i.emit("state_change",us.state)},i.setThreshold=function(b){a=b},i.setInterval=function(b){n=b},i.stop=function(){d=!1,i.emit("volume_change",-100,a),i.speaking&&(i.speaking=!1,i.emit("stopped_speaking")),g.disconnect(),u.disconnect()},i.speakingHistory=[];for(var m=0;m<c;m++)i.speakingHistory.push(0);var f=function(){setTimeout(function(){if(d){var b=qpe(g,p);i.emit("volume_change",b,a);var w=0;if(b>a&&!i.speaking){for(var v=i.speakingHistory.length-3;v<i.speakingHistory.length;v++)w+=i.speakingHistory[v];w>=2&&(i.speaking=!0,i.emit("speaking"))}else if(b<a&&i.speaking){for(var v=0;v<i.speakingHistory.length;v++)w+=i.speakingHistory[v];w==0&&(i.speaking=!1,i.emit("stopped_speaking"))}i.speakingHistory.shift(),i.speakingHistory.push(0+(b>a)),f()}},n)};return f(),i};const gb=(t,e)=>{if(t==null)return;const i=3,r=Math.round(i/2),s=[...Array(i)].map((m,f)=>{let b=f;return b>r-1&&(b=i-b-1),Math.round((b+1)/(r+1)*e)}),{width:n,height:a}=t,o=t.getContext("2d");let c=2;const d=4,u=n*1/s.length,p=u-d;o.clearRect(0,0,n,a),o.fillStyle="rgb(0,0,0,0.0)",o.fillRect(0,0,n,a);const g=getComputedStyle(t).getPropertyValue("color");o.fillStyle=g,o.strokeStyle=g,o.lineCap="round",o.lineWidth=4,o.beginPath();for(const m of s){const f=Math.min(-Math.abs(m*1.2/10*a)+a/2,a/2-2.5),b=Math.max((a/2-f)*2,5);o.moveTo(c+p/2,f),o.lineTo(c+p/2,f+b),c+=u}o.stroke()},Kpe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:var(--dyte-space-6, 24px);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}canvas,dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){transform:scale(0.9)}canvas{display:none}canvas.visible{display:block}canvas.bars{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",I4=class{constructor(t){U(this,t),this.variant="bars",this.participant=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.isScreenShare=!1,this.audioEnabled=void 0,this.volume=0}connectedCallback(){this.participantChanged(this.participant)}componentDidLoad(){gb(this.visualizer,0)}disconnectedCallback(){var t,e,i;(t=this.hark)===null||t===void 0||t.stop(),this.audioUpdateListener&&((e=this.participant)===null||e===void 0||e.removeListener("audioUpdate",this.audioUpdateListener)),this.screenShareUpdateListener&&((i=this.participant)===null||i===void 0||i.removeListener("screenShareUpdate",this.screenShareUpdateListener))}participantChanged(t){t!=null&&(this.audioUpdateListener=({audioEnabled:e,audioTrack:i})=>{var r;if((r=this.hark)===null||r===void 0||r.stop(),e&&i!=null){this.audioEnabled=!0;const s=new MediaStream;s.addTrack(i),this.calcVolume(s),gb(this.visualizer,0)}else this.volume=0,this.audioEnabled=!1},this.isScreenShare?(this.screenShareUpdateListener=({screenShareEnabled:e,screenShareTracks:i})=>{this.audioUpdateListener({audioEnabled:e&&i.audio!=null,audioTrack:i.audio})},this.screenShareUpdateListener(t),t.addListener("screenShareUpdate",this.screenShareUpdateListener)):(this.audioUpdateListener(t),t.addListener("audioUpdate",this.audioUpdateListener)))}calcVolume(t){this.hark=Jpe(t,{play:!1,interval:1e3/10}),this.hark.on("volume_change",e=>{const i=this.volume;let r=Math.round(10**(e/115)*10);r<3&&(r=0);let s=Math.round((i*2+r)/3);i!==s&&(this.volume=s,gb(this.visualizer,this.volume))})}render(){return l(O,null,l("canvas",{width:"24",height:"24",class:{bars:!0,visible:this.audioEnabled},ref:t=>this.visualizer=t,part:"canvas"}),!this.isScreenShare&&!this.audioEnabled&&l("dyte-icon",{icon:this.iconPack.mic_off,part:"mic-off-icon",iconPack:this.iconPack,t:this.t}))}static get watchers(){return{participant:["participantChanged"]}}};I4.style=Kpe;const Ype=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-6, 24px);width:var(--dyte-space-10, 40px);align-items:center;padding:var(--dyte-space-1, 4px);border-radius:9999px;background-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));cursor:pointer}.switch{box-sizing:border-box;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);background-color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:9999px;transition-property:var(--dyte-transition-property, all);transition-duration:200ms}:host(.checked){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host(.checked) .switch{transform:translateX(100%)}:host([readonly]),:host([disabled]){cursor:not-allowed;opacity:0.6}",O4=class{constructor(t){U(this,t),this.dyteChange=K(this,"dyteChange",4),this.onClick=()=>{!this.readonly&&!this.disabled&&(this.checked=!this.checked)},this.onKeyPress=e=>{if(!this.readonly)switch(e.key){case"Enter":case" ":this.checked=!this.checked;break}},this.checked=!1,this.readonly=!1,this.disabled=!1,this.iconPack=N,this.t=j()}connectedCallback(){this.checkedChange(this.checked)}checkedChange(t){this.checked=t,this.dyteChange.emit(t)}render(){return l(O,{role:"switch",tabIndex:this.disabled&&0,"aria-readonly":this.readonly,"aria-checked":this.checked,"aria-disabled":this.disabled,class:{checked:this.checked},onClick:this.onClick,onKeyPress:this.onKeyPress},l("div",{class:"switch",part:"switch"}))}static get watchers(){return{checked:["checkedChange"]}}};O4.style=Ype;var Qpe=Object.freeze({__proto__:null,dyte_audio_visualizer:I4,dyte_switch:O4});const Zpe={joined:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",left:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",message:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_message.mp3"};class Xpe{constructor(){this.audio=document.createElement("audio"),this.audio.volume=.3}play(e,i=3e3){var r;this.playing||(this.playing=!0,this.audio.src=Zpe[e],this.audio.volume=.3,(r=this.audio.play())===null||r===void 0||r.catch(s=>{lh.error(`[dyte-notifications] play() failed
`,{sound:e,duration:i},s)}),setTimeout(()=>{this.playing=!1},i))}async setDevice(e){var i,r,s;await((s=(r=(i=this.audio)===null||i===void 0?void 0:i.setSinkId)===null||r===void 0?void 0:r.call(i,e))===null||s===void 0?void 0:s.catch(n=>{lh.error(`[dyte-notifications] setSinkId() error
`,n)}))}}const ehe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;flex-direction:column;width:var(--dyte-space-72, 288px);padding-top:var(--dyte-space-5, 20px);padding-bottom:var(--dyte-space-5, 20px);padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px)}header{font-size:20px}dyte-spinner{margin-top:var(--dyte-space-10, 40px);margin-bottom:var(--dyte-space-10, 40px);margin-left:auto;margin-right:auto}ul{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-6, 24px);margin-bottom:var(--dyte-space-4, 16px);height:var(--dyte-space-48, 192px);padding:var(--dyte-space-0, 0px);overflow-y:auto;list-style-type:none;display:flex;flex-direction:column;gap:var(--dyte-space-2, 8px)}ul li{margin-right:var(--dyte-space-2, 8px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px);padding:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}ul li:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}ul li dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}`,M4=class{constructor(t){U(this,t),this.channel=void 0,this.t=j(),this.iconPack=N,this.members=[]}renderMembers(){return l("ul",{class:"scrollbar"},this.members.map(t=>l("li",null,l("dyte-avatar",{participant:{name:t.name,picture:t.picture},size:"sm"}),l("span",null,t.name))))}render(){return l(O,null,l("header",null,this.t("chat.channel_members")),this.renderMembers())}};M4.style=ehe;const the="header{box-sizing:border-box;height:var(--dyte-space-16, 64px);width:100%;padding:var(--dyte-space-4, 16px);padding-left:var(--dyte-space-12, 48px);display:flex;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}header.searching{justify-content:flex-end}header.searching .channel-details{display:none}header .channel-details{display:flex;flex-grow:1;flex-direction:column;justify-content:center;height:var(--dyte-space-9, 36px);width:var(--dyte-space-1, 4px)}header .channel-details .name{font-weight:500}header .channel-details .members{margin-top:var(--dyte-space-0\\.5, 2px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}header .channel-tools{display:flex;flex-shrink:0;justify-content:flex-end;gap:var(--dyte-space-1, 4px);min-width:var(--dyte-space-24, 96px)}header .channel-tools dyte-tooltip{height:var(--dyte-space-8, 32px);width:var(--dyte-space-10, 40px);display:flex}header .search-input{height:var(--dyte-space-8, 32px);width:var(--dyte-space-48, 192px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header .name{font-size:16px}header .br-primary-btn{background-color:transparent}header .br-primary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}@media (orientation: landscape) and (min-width: 400px){header{padding-left:var(--dyte-space-4, 16px)}header.searching .channel-details{display:flex}}",D4=class{constructor(t){U(this,t),this.search=K(this,"search",7),this.searchDismissed=K(this,"searchDismissed",7),this.meeting=void 0,this.channel=void 0,this.iconPack=N,this.t=j(),this.showChannelDetailsDialog=!1,this.showSearchBar=!1,this.members=[]}onChannelChanged(){this.$searchInput&&(this.$searchInput.value=""),this.showSearchBar=!1,this.channel.isDirectMessage||this.meeting.chat.getChannelMembers(this.channel.id).then(t=>{this.members=t})}connectedCallback(){this.onChannelChanged()}renderChannelDetails(){return l("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.showChannelDetailsDialog=!1},iconPack:this.iconPack,t:this.t},l("dyte-channel-details",{members:this.members,channel:this.channel}))}render(){return this.channel?l(O,null,this.showChannelDetailsDialog&&this.renderChannelDetails(),l("header",{class:{searching:this.showSearchBar}},l("div",{class:"channel-details"},l("span",{class:"name"},this.channel.displayName),!this.channel.isDirectMessage&&l("span",{class:"members"},this.members.map(t=>t.name).join(", "))),l("div",{class:"channel-tools"},!this.channel.isDirectMessage&&l("dyte-tooltip",{label:this.t("chat.channel_members"),iconPack:this.iconPack,t:this.t,variant:"primary"},l("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"secondary",size:"md",onClick:()=>{this.showChannelDetailsDialog=!this.showChannelDetailsDialog},class:"br-primary-btn"},l("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t})))))):null}static get watchers(){return{channel:["onChannelChanged"]}}};D4.style=the;const ihe=`.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex}.container{display:flex;height:100%;width:var(--dyte-space-96, 384px);flex-direction:column;position:absolute;--tw-translate-x:calc(var(--dyte-space-96, 384px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-sm, 1px);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-right-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity));transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}@-webkit-keyframes fade{0%{opacity:0}100%{opacity:1}}@keyframes fade{0%{opacity:0}100%{opacity:1}}.overlay-container{width:100vw;--tw-translate-x:var(--dyte-space-96, 384px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;-webkit-animation:fade 0.8s;animation:fade 0.8s}.overlay-container .sidebar-btn{position:static;padding:var(--dyte-space-4, 16px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.sidebar-btn{position:absolute;right:calc(var(--dyte-space-9, 36px) * -1);top:var(--dyte-space-4, 16px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-7, 28px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-sm, 4px)}@media (orientation: landscape) and (min-width: 400px){.container{position:static;--tw-translate-x:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sidebar-btn,.overlay-container{display:none}}.search-wrapper{display:flex;align-items:center;gap:var(--dyte-space-2, 8px);padding:var(--dyte-space-2, 8px);border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}.search{position:-webkit-sticky;position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-8, 32px);width:100%}.search .search-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);padding:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));border-top-right-radius:var(--dyte-border-radius-sm, 4px);border-bottom-right-radius:var(--dyte-border-radius-sm, 4px)}.search input{box-sizing:border-box;width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);padding-left:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;font-size:14px;line-height:1.25rem}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input{border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px)}.channel-container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);overflow-y:scroll}.channel-container .channel{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px);border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-border-opacity))}.channel-container .channel:hover{cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-900, var(--dyte-colors-text-900, 255 255 255 / 0.88)))}.channel-container .channel:hover .latest-msg-time,.channel-container .channel:hover .latest-msg,.channel-container .channel:hover .latest-msg.new{color:rgb(var(--dyte-colors-text-on-brand-700, var(--dyte-colors-text-700, 255 255 255 / 0.64)))}.channel-container .channel-display{display:flex;gap:var(--dyte-space-2, 8px);align-self:center;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-0, 0px)}.channel-container .channel-display dyte-avatar{height:var(--dyte-space-9, 36px);width:var(--dyte-space-9, 36px);flex-shrink:0;font-size:12px}.channel-container .channel-display dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-shrink:0;padding:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.channel-container .channel-card{width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-left:var(--dyte-space-1, 4px)}.channel-container .channel-card .channel-name{max-width:var(--dyte-space-60, 240px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px;font-weight:500}.channel-container .channel-card .latest-msg{margin:var(--dyte-space-0, 0px);max-width:var(--dyte-space-56, 224px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px}.channel-container .channel-card .latest-msg.new{font-weight:200;font-style:italic;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.channel-container .channel-card .latest-msg-time{font-size:12px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.channel-container .channel-meta{width:var(--dyte-space-12, 48px);display:flex;flex-direction:column;align-items:flex-end;justify-content:space-between;gap:var(--dyte-space-1\\.5, 6px);font-size:12px;font-weight:600}.channel-container .new-msgs-count{height:var(--dyte-space-4, 16px);min-width:var(--dyte-space-4, 16px);padding-top:1px;padding-bottom:1px;padding-left:2px;padding-right:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:var(--dyte-border-radius-sm, 4px);text-align:center;font-size:12px}.channel-container .selected{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-900, var(--dyte-colors-text-900, 255 255 255 / 0.88)))}.channel-container .selected .latest-msg-time,.channel-container .selected .latest-msg,.channel-container .selected .latest-msg.new{color:rgb(var(--dyte-colors-text-on-brand-700, var(--dyte-colors-text-700, 255 255 255 / 0.64)))}.channel-container .highlight .channel-title span{font-weight:700}.latest-msg p{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-1, 4px);display:inline-block}.latest-msg blockquote{display:none}.recent-message-row{margin-bottom:var(--dyte-space-2, 8px);display:flex;width:100%;flex-direction:row;justify-content:space-between}`,L4=class{constructor(t){U(this,t),this.channelChanged=K(this,"channelChanged",7),this.handleResize=e=>{this.isHidden=!e.matches},this.channelSelected=e=>{this.channelChanged.emit(e),this.onRevealClicked()},this.onSearchInput=e=>{this.searchQuery=e.target.value},this.onRevealClicked=()=>{this.matchMedia.matches||(this.isHidden=!this.isHidden)},this.renderChannelDisplayPic=e=>{const i=e.displayPictureUrl&&e.displayPictureUrl.length!==0;return e.isDirectMessage||i?l("div",{class:"channel-display"},l("dyte-avatar",{participant:{name:e.displayName,picture:e.displayPictureUrl}})):l("div",{class:"channel-display"},l("dyte-icon",{icon:this.iconPack.people,slot:"start"}))},this.renderRecentMessage=e=>{if(!e.latestMessage)return l("p",{class:"latest-msg new"},this.t("chat.start_conversation"));let i=e.isDirectMessage?"":`${e.latestMessage.displayName}: `;if(e.latestMessage.type==="text")return l("p",{class:"latest-msg"},i,l(gy,{message:e.latestMessage.message}));let r="";return e.latestMessage.type==="image"?r=this.t("image"):e.latestMessage.type==="file"&&(r=this.t("file")),l("p",{class:"latest-msg"},`${i}${r}`)},this.channels=void 0,this.selectedChannelId=void 0,this.iconPack=N,this.t=j(),this.showRecentMessage=!1,this.isHidden=!1,this.searchQuery=""}connectedCallback(){this.matchMedia=window.matchMedia("(orientation: landscape) and (min-width: 400px)"),this.matchMedia.addEventListener("change",this.handleResize),this.isHidden=!this.matchMedia.matches}disconnectedCallback(){this.matchMedia.removeEventListener("change",this.handleResize)}componentDidRender(){this.$el.style.transform=this.isHidden?"translateX(-380px)":"translateX(0)"}getTimeLabel(t){const e=t.time,i=new Date,r=new Date(i);r.setDate(i.getDate()-1);const s=new Date(i);if(s.setDate(i.getDate()-i.getDay()-1),e.toDateString()===i.toDateString())return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(e.toDateString()===r.toDateString())return this.t("date.yesteday");if(e>s){const n=["date.sunday","date.monday","date.tuesday","date.wednesday","date.thursday","date.friday","date.saturday"];return this.t(n[e.getDay()])}else return Intl.DateTimeFormat([],{day:"2-digit",month:"2-digit",year:"2-digit"}).format(e)}render(){return l(O,null,l("div",{class:"container",ref:t=>this.$el=t},this.isHidden&&l("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"icon",variant:"ghost",size:"md",onClick:this.onRevealClicked,class:"sidebar-btn"},l("dyte-icon",{icon:this.isHidden?this.iconPack.chevron_left:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})),l("slot",{name:"header"}),l("div",{class:"search-wrapper"},l("div",{class:"search"},l("input",{type:"search",autocomplete:"off",placeholder:this.t("chat.search_conversations"),onInput:this.onSearchInput}),l("dyte-icon",{icon:this.iconPack.search,iconPack:this.iconPack,t:this.t,class:"search-icon"}))),l("div",{class:"channel-container scrollbar",role:"list"},this.channels.filter(t=>this.searchQuery===""||t.displayName.includes(this.searchQuery)).map(t=>l("div",{class:{channel:!0,selected:t.id===this.selectedChannelId,highlight:!!t.unreadCount},role:"listitem",onClick:()=>{this.channelSelected(t.id)}},this.renderChannelDisplayPic(t),l("div",{class:"channel-card","is-direct-message":t.isDirectMessage},l("div",{class:"recent-message-row"},l("span",{class:"channel-name"},t.displayName),t.latestMessage&&l("span",{class:"latest-msg-time"},this.getTimeLabel(t.latestMessage))),l("div",{class:"recent-message-row"},this.renderRecentMessage(t),t.unreadCount>0&&t.id!==this.selectedChannelId?l("span",{class:"new-msgs-count"},t.unreadCount<99?t.unreadCount:"99+"):null)))))),!this.isHidden&&l("div",{class:"overlay-container"},l("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"icon",variant:"ghost",size:"md",onClick:this.onRevealClicked,class:"sidebar-btn"},l("dyte-icon",{icon:this.isHidden?this.iconPack.chevron_left:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))))}};L4.style=ihe;const rhe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.chat-input{position:relative;margin:var(--dyte-space-2, 8px);z-index:10;box-sizing:border-box;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}textarea{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));box-sizing:border-box;padding:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea::placeholder{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea{border-top-left-radius:var(--dyte-border-radius-md, 8px);border-top-right-radius:var(--dyte-border-radius-md, 8px);font-family:var(--dyte-font-family, sans-serif);outline:2px solid transparent;outline-offset:2px;resize:none;overflow-y:auto;border-width:var(--dyte-border-width-none, 0);border-style:none;min-height:60px;font-size:14px}.chat-buttons{border-bottom-right-radius:var(--dyte-border-radius-md, 8px);border-bottom-left-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));display:flex;height:var(--dyte-space-8, 32px);align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.chat-buttons .left dyte-button{margin-right:var(--dyte-space-1, 4px)}.chat-buttons .left dyte-button dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.chat-buttons .right{z-index:10}.chat-buttons .right .edit-buttons{display:flex;gap:var(--dyte-space-2, 8px)}.chat-buttons>div{display:flex;align-items:center}dyte-emoji-picker{z-index:0;position:absolute;bottom:var(--dyte-space-32, 128px);border-top:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));-webkit-animation:0.3s slide-up ease;animation:0.3s slide-up ease}@-webkit-keyframes slide-up{from{transform:translateY(100%)}to{transform:translateY(0%)}}@keyframes slide-up{from{transform:translateY(100%)}to{transform:translateY(0%)}}.member-list{margin:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-1, 4px);max-height:var(--dyte-space-28, 112px);min-width:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);padding:var(--dyte-space-0, 0px);position:absolute;bottom:var(--dyte-space-28, 112px);list-style-type:none;overflow-y:auto;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-sm, 4px);--tw-border-spacing-x:var(--dyte-space-2, 8px);--tw-border-spacing-y:var(--dyte-space-2, 8px);border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-style:solid;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.member-list .member{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-4, 16px);cursor:pointer}.member-list .member dyte-avatar{flex-shrink:0;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);font-size:14px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.member-list .member span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.member-list .member:hover,.member-list .member.selected{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-700, 2 70 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.suggested-replies{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-3, 12px);display:flex;flex-wrap:nowrap;gap:var(--dyte-space-2, 8px);list-style-type:none;overflow-x:auto}.suggested-replies dyte-tooltip{flex-shrink:0}.suggested-replies li{padding:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.75);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));cursor:pointer}.suggested-replies li:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity))}.preview-overlay{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-md, 8px)}.file-preview{position:absolute;top:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;max-height:var(--dyte-space-20, 80px)}.file-preview:hover dyte-tooltip{display:block}.file-preview dyte-tooltip{position:absolute;top:calc(var(--dyte-space-1, 4px) * -1);left:calc(var(--dyte-space-1, 4px) * -1);display:none;margin-left:calc(var(--dyte-space-1, 4px) * -1);margin-top:calc(var(--dyte-space-1, 4px) * -1)}.file-preview dyte-button{display:flex;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);align-items:center;justify-content:center;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));border:1px solid rgb(var(--dyte-colors-text-1000, 255 255 255))}.file-preview dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.preview-image{height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);-o-object-fit:cover;object-fit:cover;max-height:100%;max-width:100%;overflow:clip;border-radius:var(--dyte-border-radius-md, 8px)}.preview-file{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-radius:var(--dyte-border-radius-md, 8px);max-width:200px}@-webkit-keyframes scroll-text{0%{transform:translateX(0%)}70%{transform:translateX(-100%)}80%{transform:translateX(0%)}100%{transform:translateX(0%)}}@keyframes scroll-text{0%{transform:translateX(0%)}70%{transform:translateX(-100%)}80%{transform:translateX(0%)}100%{transform:translateX(0%)}}`,Oo="@",N4=class{constructor(t){U(this,t),this.onNewMessage=K(this,"dyteNewMessage",7),this.onEditMessage=K(this,"dyteEditMessage",7),this.onEditCancelled=K(this,"dyteEditCancelled",7),this.fileReader=new FileReader,this.fileToUpload=null,this.handleKeyDown=e=>{if(e.key===Oo&&[void 0," "].includes(this.$textArea.value.at(-1))&&(this.mentionQuery=Oo),e.key==="ArrowDown"&&(this.focusedMemberIndex=Math.min(this.focusedMemberIndex+1,this.getFilteredMembers().length-1)),e.key==="ArrowUp"&&(this.focusedMemberIndex=Math.max(0,this.focusedMemberIndex-1)),(e.key==="Escape"||e.key==="Backspace"&&this.mentionQuery===Oo)&&(this.mentionQuery=""),["Enter","Tab"," "].includes(e.key)&&this.mentionQuery!==""){const i=this.getFilteredMembers()[this.focusedMemberIndex];this.onMemberSelect(i),e.preventDefault();return}e.key==="Enter"&&e.shiftKey?this.$textArea.clientHeight<200&&(this.$textArea.style.height=this.$textArea.clientHeight+20+"px"):e.key==="Enter"?(e.preventDefault(),this.prefill.editMessage?this.handleEditMessage():this.handleSendMessage()):e.key==="Backspace"&&(this.$textArea.value.endsWith(`
`)?this.$textArea.style.height=this.$textArea.clientHeight-20+"px":this.$textArea.value===""&&(this.$textArea.style.height="auto"))},this.handleKeyUp=e=>{if(this.mentionQuery!==""){const i=Uu(this.$textArea.value.trim()),r=i.substring(0,i.indexOf(Oo));this.mentionQuery=`${Oo}${Uu(r)}`}},this.onPaste=e=>{const i=e.clipboardData||e.originalEvent.clipboardData;Li(()=>{i&&i.items&&i.items.length>0&&(h4(i.items,this.generateFilePreview),this.$textArea.value="")})},this.generateFilePreview=(e,i)=>{this.fileToUpload={type:e,image:i,file:i},e==="image"?this.fileReader.readAsDataURL(i):e==="file"&&(this.filePreview=i.name)},this.sendFile=()=>{this.canSendFiles&&(this.fileToUpload.type==="image"?this.onNewMessage.emit({type:"image",file:this.fileToUpload.image,image:this.fileToUpload.image}):this.onNewMessage.emit({type:"file",file:this.fileToUpload.file}),this.cleanUpFileUpload())},this.handleSendMessage=()=>{if(!this.canSendTextMessage)return;if(this.fileToUpload!==null){this.sendFile();return}const e=this.$textArea.value.trim();e.length>0&&(this.prefill.replyMessage?this.onNewMessage.emit({type:"text",message:e,replyTo:this.prefill.replyMessage}):this.onNewMessage.emit({type:"text",message:e}),this.cleanup())},this.cleanup=()=>{this.mentionQuery="",this.focusedMemberIndex=0,this.$textArea.value="",this.$textArea.style.height="auto",Bn.setItem(this.storageKey,"")},this.handleEditMessage=()=>{var e;let i=this.$textArea.value.trim();!((e=this.prefill.editMessage)===null||e===void 0)&&e.message&&hE.test(this.prefill.editMessage.message)&&(i=`${g4(this.prefill.editMessage.message)}

${i}`),this.onEditMessage.emit({id:this.prefill.editMessage.id,message:i,channelId:this.prefill.editMessage.channelId}),this.cleanup()},this.handleEditCancel=()=>{this.onEditCancelled.emit(),this.cleanup()},this.initializeTextField=e=>{this.$textArea=e;const i=Bn.getItem(this.storageKey)||"";this.$textArea.value=i},this.onMemberSelect=e=>{const i=Uu(this.mentionQuery),r=Uu(this.$textArea.value.trim()).replace(i,"");this.$textArea.value=Uu(r)+`${Oo}${e.name} `,this.mentionQuery="",this.focusedMemberIndex=0,Li(()=>this.$textArea.focus())},this.getFilteredMembers=()=>{const e=this.mentionQuery.replace(Oo,"");return this.members.filter(i=>i.name.toLowerCase().includes(e.toLowerCase()))},this.cleanUpFileUpload=()=>{this.filePreview=null,this.fileToUpload=null},this.renderSuggestedReplies=()=>{if(this.prefill.suggestedReplies&&this.prefill.suggestedReplies.length!==0)return l("ul",{class:"suggested-replies scrollbar"},this.prefill.suggestedReplies.map(e=>l("dyte-tooltip",{label:this.t("chat.click_to_send")},l("li",{onClick:()=>this.onNewMessage.emit({type:"text",message:e})},e))))},this.renderMenu=()=>{if(this.mentionQuery.length===0)return;const e=this.getFilteredMembers();if(e.length!==0)return l("ul",{class:"member-list scrollbar"},e.map((i,r)=>l("li",{class:{member:!0,selected:r===this.focusedMemberIndex},onClick:()=>this.onMemberSelect(i),ref:s=>{r===this.focusedMemberIndex&&Li(()=>{s&&s.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})})}},l("dyte-avatar",{participant:{name:i.name,picture:i.picture},size:"sm"}),l("span",null,i.name))))},this.canSendTextMessage=!1,this.canSendFiles=!1,this.size=void 0,this.iconPack=N,this.t=j(),this.disableEmojiPicker=!1,this.prefill={},this.members=[],this.channelId=void 0,this.emojiPickerActive=!1,this.mentionQuery="",this.focusedMemberIndex=0,this.filePreview=null}connectedCallback(){this.fileReader.onload=t=>{typeof t.target.result=="string"&&(this.filePreview=t.target.result)}}onChannelChanged(){this.mentionQuery="",this.focusedMemberIndex=0;const t=Bn.getItem(this.storageKey)||"";this.$textArea.value=t,this.emojiPickerActive=!1}componentDidRender(){(this.prefill.editMessage||this.prefill.replyMessage)&&Li(()=>this.$textArea.focus())}get storageKey(){return this.channelId?`dyte-text-message-${this.channelId}`:"dyte-text-message"}uploadFile(t){const e=document.createElement("input");e.type="file",t==="image"&&(e.accept="image/*"),e.onchange=i=>{const{validity:r,files:[s]}=i.target;r.valid&&this.generateFilePreview(t,s)},e.click()}renderFilePreview(){if(typeof this.filePreview=="string")return l("div",{class:"preview-overlay"},l("div",{class:"file-preview"},l("dyte-tooltip",{label:this.t("chat.cancel_upload")},l("dyte-button",{variant:"secondary",kind:"icon",onClick:this.cleanUpFileUpload},l("dyte-icon",{icon:this.iconPack.dismiss}))),this.fileToUpload.type==="image"?l("img",{class:"preview-image",src:this.filePreview}):l("div",{class:"preview-file"},l("span",null,this.filePreview))))}render(){var t;const e={iconPack:this.iconPack,t:this.t,size:this.size};let i="";return!((t=this.prefill.editMessage)===null||t===void 0)&&t.message&&(i=m4(this.prefill.editMessage.message)),l(O,null,this.canSendTextMessage&&this.emojiPickerActive&&l("dyte-emoji-picker",{part:"emoji-picker",onPickerClose:()=>{this.emojiPickerActive=!1},onDyteEmojiClicked:r=>{this.$textArea.value+=r.detail,this.$textArea.focus()},t:this.t}),this.renderSuggestedReplies(),l("slot",{name:"chat-addon"}),l("slot",{name:"quote-block"}),l("div",{class:"chat-input",part:"chat-input"},this.renderMenu(),this.canSendTextMessage&&l("textarea",{class:"scrollbar",part:"textarea",ref:this.initializeTextField,autoFocus:!0,placeholder:this.fileToUpload?"":this.t("chat.message_placeholder"),value:i,onPaste:this.onPaste,maxLength:f4,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onInput:r=>{Bn.setItem(this.storageKey,r.target.value)},disabled:!!this.filePreview}),l("div",{class:"chat-buttons",part:"chat-buttons"},l("div",{class:"left",part:"chat-buttons-left"},!this.prefill.editMessage&&this.canSendFiles&&[l("dyte-tooltip",Object.assign({label:this.t("chat.send_file")},e),l("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("file"),title:this.t("chat.send_file"),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.attach}))),l("dyte-tooltip",Object.assign({label:this.t("chat.send_img")},e),l("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("image"),title:this.t("chat.send_img"),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.image})))],!this.prefill.editMessage&&this.canSendTextMessage&&!this.disableEmojiPicker&&l("dyte-tooltip",Object.assign({label:this.t("chat.send_emoji")},e),l("dyte-button",{variant:"ghost",kind:"icon",class:{active:this.emojiPickerActive},title:this.t("chat.send_emoji"),iconPack:this.iconPack,t:this.t,onClick:()=>{this.emojiPickerActive=!this.emojiPickerActive}},l("dyte-icon",{icon:this.iconPack.emoji_multiple})))),!!this.filePreview&&this.renderFilePreview(),this.canSendTextMessage&&l("div",{class:"right",part:"chat-buttons-right"},!this.prefill.editMessage&&l("dyte-tooltip",Object.assign({variant:"primary",label:this.t("chat.send_msg"),delay:2e3},e),l("dyte-button",{kind:"icon",onClick:()=>this.handleSendMessage(),title:this.t("chat.send_msg"),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.send}))),this.prefill.editMessage&&l("div",{class:"edit-buttons"},l("dyte-tooltip",Object.assign({variant:"secondary",label:this.t("cancel"),delay:2e3},e),l("dyte-button",{kind:"icon",variant:"secondary",onClick:()=>this.handleEditCancel(),title:this.t("cancel"),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.dismiss}))),l("dyte-tooltip",Object.assign({variant:"primary",label:this.t("chat.update_msg"),delay:2e3},e),l("dyte-button",{kind:"icon",onClick:()=>this.handleEditMessage(),title:this.t("chat.send_msg"),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.checkmark}))))))))}static get watchers(){return{channelId:["onChannelChanged"]}}};N4.style=rhe;const she=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));word-break:break-word}.chat-container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll}.chat-container .spacer{flex:1 1 auto}.chat-container .chat{flex:0 0 auto}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}`,U4=class{constructor(t){U(this,t),this.observingEl=[],this.onScroll=e=>{const i=e.target;Li(()=>{const{scrollTop:r,clientHeight:s,scrollHeight:n}=i;r+s+10>=n?(this.autoScrollEnabled=!0,this.showLatestMessageButton=!1):this.autoScrollEnabled=!1})},this.scrollToBottom=()=>{ro(this.$chat)},this.observeMessage=e=>{e&&this.observingEl.push(e);try{this.intersectionObserver.observe(e)}catch{}},this.selectedGroup=void 0,this.messages=[],this.selfUserId=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.now=new Date,this.showLatestMessageButton=!1}connectedCallback(){var t;this.lastReadTimestamp=(t=Xf.everyone)!==null&&t!==void 0?t:new Date("0001-01-01T00:00:00Z"),this.intersectionObserver=new IntersectionObserver(i=>{document.hasFocus()&&Li(()=>{for(const r of i)r.isIntersecting&&parseInt(r.target.getAttribute("data-timestamp"))>this.lastReadTimestamp.getTime()&&(Xf[this.selectedGroup]=new Date)})});const e=()=>{this.now=new Date,this.timeout=setTimeout(()=>{this.request!=null&&(this.request=requestAnimationFrame(e))},60*1e3)};this.request=requestAnimationFrame(e),this.chatChanged(this.messages)}componentDidLoad(){this.$chat.addEventListener("scroll",this.onScroll)}componentDidRender(){this.autoScrollEnabled?ro(this.$chat):this.autoScrollEnabled==null&&ro(this.$chat,!1)}chatChanged(t){if(this.$chat!=null&&!(this.autoScrollEnabled||this.$chat.clientHeight===this.$chat.scrollHeight)){for(let e=t.length-1;e>=0;e--)if(t[e].message.time>this.lastReadTimestamp&&t[e].message.userId!==this.selfUserId){this.showLatestMessageButton=!0;break}}}selectedBucketChanged(){this.autoScrollEnabled=void 0,this.observingEl.forEach(t=>{this.intersectionObserver.unobserve(t)}),this.observingEl=[]}disconnectedCallback(){this.$chat.removeEventListener("scroll",this.onScroll),this.intersectionObserver.disconnect(),clearTimeout(this.timeout),cancelAnimationFrame(this.request)}render(){var t;let e=null,i=!1;return l(O,null,l("div",{class:"chat-container scrollbar",ref:r=>this.$chat=r,part:"container"},l("div",{class:"spacer",part:"spacer"}),l("div",{class:"chat",part:"chat"},(t=this.messages)===null||t===void 0?void 0:t.map(r=>{if(r.type==="chat"){const{message:s}=r,a=!(s.userId===this.selfUserId)&&!this.autoScrollEnabled&&!i&&s.time>this.lastReadTimestamp;a&&(i=a);const o=!a&&s.userId===(e==null?void 0:e.userId)&&H3(s.time,e==null?void 0:e.time)<2;switch(e=s,s.type){case"text":return l("div",{"is-continued":o,key:r.message.id},a&&l("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),l("dyte-text-message",{message:s,now:this.now,isContinued:o,"data-timestamp":s.time.getTime(),ref:this.observeMessage,iconPack:this.iconPack,t:this.t}));case"image":return l("div",{"is-continued":o,key:r.message.id},a&&l("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),l("dyte-image-message",{message:s,now:this.now,isContinued:o,iconPack:this.iconPack,"data-timestamp":s.time.getTime(),ref:this.observeMessage,t:this.t}));case"file":return l("div",{"is-continued":o,key:r.message.id},a&&l("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),l("dyte-file-message",{message:s,now:this.now,isContinued:o,iconPack:this.iconPack,t:this.t,"data-timestamp":s.time.getTime(),ref:this.observeMessage}))}}return null}))),l("div",{class:"show-new-messages-ctr"},l("dyte-button",{class:{"show-new-messages":!0,active:this.showLatestMessageButton},kind:"icon",part:"show-new-messages",onClick:this.scrollToBottom,iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{messages:["chatChanged"],selectedGroup:["selectedBucketChanged"]}}};U4.style=she;const nhe=":host{display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));flex:1 0 0px}",j4=class{constructor(t){U(this,t),this.editMessageInit=K(this,"editMessageInit",7),this.pageSize=25,this.lastReadMessageIndex=-1,this.maybeMarkChannelAsRead=e=>{if(!this.selectedChannelId||e.length===0||this.lastReadMessageIndex!==-1)return;const i=e.at(0).time>e.at(-1).time?e.at(0):e.at(-1);i.channelIndex&&(this.lastReadMessageIndex=parseInt(i.channelIndex,10),this.meeting.chat.markLastReadMessage(this.selectedChannelId,i))},this.getChatMessages=async(e,i,r)=>{const{messages:s}=await this.meeting.chat.getMessages(e,i,r,void 0,this.selectedChannelId);return this.maybeMarkChannelAsRead(s),s},this.createChatNodes=e=>e.map((i,r)=>{var s;const n=i.userId===((s=e[r-1])===null||s===void 0?void 0:s.userId);return this.createChatNode(i,n)}),this.disconnectMeeting=e=>{var i;(i=e==null?void 0:e.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener)},this.createChatNode=(e,i)=>{var r,s;const n=this.meeting.self.userId===e.userId;return l("dyte-chat-message",{message:e,isContinued:i,isUnread:!1,size:this.size,iconPack:this.iconPack,key:e.id,isSelf:n,alignRight:n&&this.meeting.meta.viewType==="CHAT",disableControls:this.meeting.meta.viewType!=="CHAT",senderDisplayPicture:(r=this.meeting.participants.all.toArray().find(a=>a.userId===e.userId))===null||r===void 0?void 0:r.picture,hideAvatar:n&&this.meeting.meta.viewType==="CHAT"||((s=this.selectedChannel)===null||s===void 0?void 0:s.isDirectMessage),canEdit:n&&e.type==="text",canDelete:n,canReply:e.type==="text",onEdit:()=>{e.type==="text"&&this.editMessageInit.emit({payload:e,flags:{isEdit:!0}})},onReply:()=>{e.type==="text"&&this.editMessageInit.emit({payload:e,flags:{isReply:!0}})},onDelete:async()=>{var a;await this.meeting.chat.deleteMessage(e.id,(a=this.selectedChannel)===null||a===void 0?void 0:a.id).catch(()=>{})}})},this.chatUpdateListener=e=>{this.selectedChannelId&&e.message.channelId!==this.selectedChannelId||(e.action==="add"?(this.$paginatedListRef.onNewNode(e.message),this.lastReadMessageIndex=-1,this.maybeMarkChannelAsRead([e.message])):e.action==="delete"?this.$paginatedListRef.onNodeDelete(e.message.id):e.action==="edit"&&this.$paginatedListRef.onNodeUpdate(e.message.id,e.message))},this.meeting=void 0,this.selectedChannel=void 0,this.selectedChannelId=void 0,this.size=void 0,this.iconPack=N,this.t=j()}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(t,e){var i;e!=null&&this.disconnectMeeting(e),!(t&&!t.chat)&&t!=null&&((i=t.chat)===null||i===void 0||i.addListener("chatUpdate",this.chatUpdateListener))}channelChanged(){this.lastReadMessageIndex=-1}render(){return l(O,null,l("dyte-paginated-list",{ref:t=>this.$paginatedListRef=t,pageSize:this.pageSize,pagesAllowed:3,fetchData:this.getChatMessages,createNodes:this.createChatNodes,selectedItemId:this.selectedChannelId,emptyListLabel:this.t("chat.empty_channel")}))}static get watchers(){return{meeting:["meetingChanged"],selectedChannelId:["channelChanged"]}}};j4.style=nhe;const ahe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;flex-direction:column;position:relative;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}",$4=class{constructor(t){U(this,t),this.pageSize=50,this.searchMessages=async(e,i,r)=>this.meeting.chat.searchMessages(this.query,{channelId:this.channelId,timestamp:e,size:i,reversed:r}),this.nodeRenderer=e=>e.map(i=>l("dyte-chat-message",{key:i.id,message:i,disableControls:!0})),this.meeting=void 0,this.query=void 0,this.channelId=void 0,this.iconPack=N,this.t=j()}render(){return l(O,null,l("dyte-paginated-list",{pageSize:this.pageSize,pagesAllowed:3,fetchData:this.searchMessages,createNodes:this.nodeRenderer,selectedItemId:this.query}))}};$4.style=ahe;const ohe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column}.chat-scope-selector{position:relative;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));z-index:10}.chat-scope-selector button{width:100%;border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-4, 16px);display:flex;align-items:center;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px;cursor:pointer;height:var(--dyte-space-12, 48px)}.chat-scope-selector button span{display:flex;align-items:center;justify-content:flex-start}.chat-scope-selector button dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.chat-scope-selector .search{position:-webkit-sticky;position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-0, 0px)}.chat-scope-selector .search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.chat-scope-selector .search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.chat-scope-selector .search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat-scope-selector .search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat-scope-selector .participants-container{position:absolute;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));top:var(--dyte-space-12, 48px);-webkit-animation:0.3s slide-down ease;animation:0.3s slide-down ease}@-webkit-keyframes slide-down{from{transform:translateY(-50px)}to{transform:translateY(0%)}}@keyframes slide-down{from{transform:translateY(-50px)}to{transform:translateY(0%)}}.chat-scope-selector .scope-list{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);list-style-type:none;padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px);overflow:auto;max-height:375px}.chat-scope-selector .scope-list .scope{position:relative;display:flex;flex-direction:row;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px)}.chat-scope-selector .scope-list .scope:hover{cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.chat-scope-selector .scope-list .scope-special{margin-top:var(--dyte-space-4, 16px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat-scope-selector .scope-list .everyone-icon>dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.chat-scope-selector .scope-list .everyone-icon{display:flex;height:100%;width:100%;align-items:center;justify-content:center;margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px}.unread-count.selector{position:unset;margin-left:var(--dyte-space-2, 8px)}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px)}`,z4=class{constructor(t){U(this,t),this.groupChanged=K(this,"dyteChatGroupChanged",7),this.onScopeClick=e=>{this.showParticipantsPanel=!1,this.groupChanged.emit(e)},this.selfUserId=void 0,this.selectedGroupId=void 0,this.unreadCounts={},this.groups=[],this.iconPack=N,this.t=j(),this.showParticipantsPanel=!1,this.query=""}toggleParticipants(){this.showParticipantsPanel=!this.showParticipantsPanel}getGroups(){return this.groups.filter(t=>t.name.toLowerCase().includes(this.query.toLowerCase()))}getName(){if(!this.selectedGroupId||this.selectedGroupId==="everyone")return this.t("everyone");const t=this.groups.find(e=>e.userId===this.selectedGroupId);return t?t.name:this.t("everyone")}render(){const t=Object.keys(this.unreadCounts).reduce((e,i)=>e+this.unreadCounts[i],0);return l(O,null,l("div",{class:"chat-scope-selector"},this.showParticipantsPanel&&l("div",{class:"participants-container"},l("div",{class:"search",part:"search"},l("dyte-icon",{icon:this.iconPack.search,part:"search-icon"}),l("input",{type:"search",autocomplete:"off",placeholder:"Search",value:this.query,onInput:e=>{this.query=e.target.value},part:"search-input"})),l("ul",{class:"scope-list scrollbar"},this.query===""&&l("li",{class:"scope scope-special",onClick:()=>this.onScopeClick("everyone")},l("div",{class:"everyone-icon"},l("dyte-icon",{icon:this.iconPack.participants})),"Everyone",this.unreadCounts.everyone>0&&l("div",{class:"unread-count",part:"unread-count"},l("span",null,this.unreadCounts.everyone))),this.getGroups().map(e=>{const i=this.unreadCounts[zm([this.selfUserId,e.userId])];return l("li",{class:"scope",onClick:()=>this.onScopeClick(e),key:e.userId},e.name,i>0&&l("div",{class:"unread-count",part:"unread-count"},l("span",null,i)))}))),l("button",{onClick:()=>this.toggleParticipants()},l("span",null,`${this.t("to")} ${this.getName()}`,"  ",t>0&&l("div",{class:"unread-count selector"},l("span",null,t))),l("dyte-icon",{icon:this.showParticipantsPanel?this.iconPack.chevron_up:this.iconPack.chevron_down}))))}};z4.style=ohe;const che=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",F4=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.onDyteDialogClose=(e,i)=>{L[e]=i,this.stateUpdate.emit({[e]:i})},this.leaveStage=async()=>{var e,i,r;this.meeting.meta.viewType==="LIVESTREAM"&&((e=this.meeting.stage)===null||e===void 0?void 0:e.status)==="ACCEPTED_TO_JOIN_STAGE"&&await((r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0?void 0:r.leave()),this.meeting.meta.viewType==="WEBINAR"&&await this.meeting.self.leaveStage(),this.onDyteDialogClose("activeJoinStage",!1)},this.joinStage=async()=>{this.meeting.meta.viewType==="LIVESTREAM"&&await this.meeting.stage.join(),this.meeting.meta.viewType==="WEBINAR"&&await this.meeting.self.joinStage(),this.onDyteDialogClose("activeJoinStage",!1)},this.meeting=void 0,this.config=Me,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j()}render(){var t,e,i,r;const s={meeting:this.meeting,states:this.states||L,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t},n=this.states||L;if((n==null?void 0:n.image)!=null){const a=n.image,o=()=>{this.stateUpdate.emit({image:null}),L.image=null};return l(O,null,l("dyte-dialog",{open:!0,onDyteDialogClose:o,hideCloseButton:!0,iconPack:this.iconPack,t:this.t},l(Ge,{element:"dyte-image-viewer",defaults:s,props:{image:a,onClose:o}})))}else{if((n==null?void 0:n.activeSettings)===!0)return l(O,null,l("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeSettings",!1),iconPack:this.iconPack,t:this.t},l(Ge,{element:"dyte-settings",defaults:s})));if((n==null?void 0:n.activeDebugger)===!0)return l(O,null,l("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeDebugger",!1),iconPack:this.iconPack,t:this.t},l(Ge,{element:"dyte-debugger",defaults:s})));if((n==null?void 0:n.activeLeaveConfirmation)===!0)return l(O,null,l("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeLeaveConfirmation",!1),iconPack:this.iconPack,t:this.t},l(Ge,{element:"dyte-leave-meeting",defaults:s})));if(((t=n==null?void 0:n.activePermissionsMessage)===null||t===void 0?void 0:t.enabled)===!0)return l(O,null,l("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activePermissionsMessage",{enabled:!1}),iconPack:this.iconPack,t:this.t},l(Ge,{element:"dyte-permissions-message",defaults:s})));if((n==null?void 0:n.activeRemoteAccessManager)===!0)return l(O,null,l("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeRemoteAccessManager",!1),iconPack:this.iconPack,t:this.t},l(Ge,{element:"dyte-remote-access-manager",defaults:s})));if(((e=n==null?void 0:n.activeBreakoutRoomsManager)===null||e===void 0?void 0:e.active)===!0)return l(O,null,l("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeBreakoutRoomsManager",{active:!1,data:void 0}),iconPack:this.iconPack,t:this.t},l(Ge,{element:"dyte-breakout-rooms-manager",defaults:s,props:{mode:this.meeting.connectedMeetings.isActive?"view":"create"}})));if(((i=n==null?void 0:n.activeConfirmationModal)===null||i===void 0?void 0:i.active)===!0)return l(O,null,l("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeConfirmationModal",!1),iconPack:this.iconPack,t:this.t},l(Ge,{element:"dyte-confirmation-modal",defaults:s})));if(((r=n==null?void 0:n.activeOverlayModal)===null||r===void 0?void 0:r.active)===!0)return l(O,null,l("dyte-overlay-modal",{meeting:this.meeting,states:this.states,iconPack:this.iconPack,t:this.t}));if(n!=null&&n.activeBroadcastMessageModal)return l(O,null,l("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeBroadcastMessageModal",!1),iconPack:this.iconPack,t:this.t},l(Ge,{element:"dyte-broadcast-message-modal",defaults:s})));if((n==null?void 0:n.activeJoinStage)===!0){const a={title:this.t("stage.join_title"),label:{accept:this.t("stage.join_confirm"),reject:this.t("stage.join_cancel")},description:this.t("stage.join_summary")};return l(O,null,l("dyte-dialog",{open:!0,onDyteDialogClose:this.leaveStage,iconPack:this.iconPack,t:this.t},l("dyte-join-stage",Object.assign({dataConfig:a,onDyteJoinStage:this.joinStage,onDyteLeaveStage:this.leaveStage},s))))}else{if((n==null?void 0:n.activeMuteAllConfirmation)===!0)return l(O,null,l("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.onDyteDialogClose("activeMuteAllConfirmation",!1)},iconPack:this.iconPack,t:this.t},l(Ge,{element:"dyte-mute-all-confirmation",defaults:s})));if(n!=null&&n.activeChannelCreator)return l(O,null,l("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.onDyteDialogClose("activeChannelCreator",!1)},iconPack:this.iconPack,t:this.t},l(Ge,{element:"dyte-channel-creator",defaults:s})))}}return null}};F4.style=che;const dhe="https://cdn.dyte.in/assets/emojis-data.json",lhe=async()=>(await fetch(dhe)).json(),uhe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.emoji-parent{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-64, 256px);max-width:640px;flex-direction:column;padding:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-0, 0px);width:auto;min-width:var(--dyte-space-20, 80px);-webkit-user-select:none;-moz-user-select:none;user-select:none;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.close-parent{display:flex;flex:1 1 0%;justify-content:flex-end;padding:var(--dyte-space-0, 0px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#emoji-grid{margin-top:var(--dyte-space-2, 8px);box-sizing:border-box;display:flex;flex-direction:row;flex-wrap:wrap;overflow-x:hidden;overflow-y:scroll;height:100%;grid-auto-rows:minmax(-webkit-min-content, -webkit-max-content);grid-auto-rows:minmax(min-content, max-content)}#loader{display:flex;height:100%;width:100%;align-items:center;justify-content:center}input{display:block;height:var(--dyte-space-8, 32px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:14px;border-width:var(--dyte-border-width-none, 0);border-style:solid;border-style:none;border-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input::placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input{border-radius:var(--dyte-border-radius-sm, 4px);outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-ring-opacity));--tw-ring-opacity:0.3}.emoji{height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px);font-size:20px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}`,V4=class{constructor(t){U(this,t),this.pickerClose=K(this,"pickerClose",7),this.emojiClicked=K(this,"dyteEmojiClicked",7),this.iconPack=N,this.t=j(),this.emojiList=void 0,this.filterVal="",this.filteredEmojis=[]}componentWillLoad(){lhe().then(t=>{this.emojiList=t,this.handleInputChange({value:""})})}handleInputChange(t){this.filterVal=t.value;const e=new RegExp(`([^,]*?${this.filterVal}[^,]*):(\\d+)`,"g");this.filteredEmojis=Array.from(this.emojiList.search.matchAll(e)).map(i=>({name:i[1],emoji:this.emojiList.emojis[i[2]]}))}handleEmojiClick(t){this.emojiClicked.emit(t)}mapEmojiList(){var t;return((t=this.emojiList)===null||t===void 0?void 0:t.length)>0?l("div",{id:"loader"},l("dyte-spinner",{iconPack:this.iconPack,t:this.t})):l("div",{id:"emoji-grid",class:"scrollbar max-w-40"},this.filteredEmojis.map(e=>l("dyte-button",{iconPack:this.iconPack,t:this.t,key:`emoji-button-${e.name}`,class:"emoji",variant:"ghost",kind:"icon",title:e.name,onClick:()=>this.handleEmojiClick(e.emoji)},e.emoji)))}render(){return l(O,null,l("div",{class:"close-parent"},l("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:()=>{var t;return(t=this.pickerClose)===null||t===void 0?void 0:t.emit()},"aria-label":this.t("close")},l("dyte-icon",{icon:this.iconPack.dismiss}))),l("div",{class:"emoji-parent"},l("input",{value:this.filterVal,onInput:t=>this.handleInputChange(t.target),placeholder:this.t("search")}),this.mapEmojiList()))}};V4.style=uhe;const phe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}:host::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host(.webinar){box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-6, 24px);-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}:host(.webinar) dyte-participant-setup{display:flex;flex:1 1 0%;align-items:center;justify-content:space-around;margin-left:auto;margin-right:auto}:host(.webinar) .container dyte-button{margin:var(--dyte-space-3, 12px);flex-grow:1;padding:var(--dyte-space-1, 4px);width:50%}:host(.webinar) header{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host(.webinar) .summary{padding:var(--dyte-space-4, 16px)}:host(.livestream){box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding:var(--dyte-space-8, 32px);-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}:host(.livestream) dyte-participant-setup{display:flex;width:100%;flex:1 1 0%;align-items:center;justify-content:space-around;margin-left:auto;margin-right:auto}:host(.livestream) .container dyte-button{flex-grow:1;padding:var(--dyte-space-1, 4px);width:50%}:host(.livestream) .container dyte-button:nth-child(1){margin-right:var(--dyte-space-1\\.5, 6px)}:host(.livestream) .container dyte-button:nth-child(2){margin-left:var(--dyte-space-1\\.5, 6px)}:host(.livestream) h2{font-size:24px;font-weight:500;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host(.livestream) .summary{margin-top:var(--dyte-space-6, 24px);margin-bottom:var(--dyte-space-6, 24px);text-align:left;font-size:14px}.deny-access{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.container{width:100%;max-width:1080px;display:flex;flex:1 1 0%;align-items:center;justify-content:space-around}header{display:flex;align-items:center;justify-content:space-between}`,B4=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.joinStage=K(this,"dyteJoinStage",7),this.leaveStage=K(this,"dyteLeaveStage",7),this.meeting=void 0,this.config=Me,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.dataConfig={title:this.t("stage.join_title"),label:{accept:this.t("stage.join_confirm"),reject:this.t("stage.join_cancel")},description:this.t("stage.join_summary")}}render(){var t,e,i,r;const s={meeting:this.meeting,size:this.size,states:this.states||L,config:this.config,iconPack:this.iconPack,t:this.t};return l(O,{class:{livestream:((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="LIVESTREAM",webinar:((e=this.meeting)===null||e===void 0?void 0:e.meta.viewType)==="WEBINAR"}},l("header",null,l("h2",null,this.dataConfig.title)),l(Ge,{element:"dyte-participant-setup",defaults:s,props:{participant:(i=this.meeting)===null||i===void 0?void 0:i.self,size:"md"},childProps:{participant:(r=this.meeting)===null||r===void 0?void 0:r.self,size:"md"},deepProps:!0}),l("div",{class:"summary"},this.dataConfig.description),l("div",{class:"container"},l("dyte-button",{variant:"secondary",onClick:()=>this.leaveStage.emit(),title:this.dataConfig.label.reject,iconPack:this.iconPack,t:this.t},this.dataConfig.label.reject),l("dyte-button",{onClick:()=>this.joinStage.emit(),title:this.dataConfig.label.accept,iconPack:this.iconPack,t:this.t},this.dataConfig.label.accept)))}};B4.style=phe;const hhe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{pointer-events:none;display:block;height:var(--dyte-space-10, 40px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));-webkit-animation:show 0.4s ease;animation:show 0.4s ease;transition:0.4s;z-index:100}.ctr{box-sizing:border-box;display:inline-flex;height:100%;min-width:var(--dyte-space-40, 160px);align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-shadow:var(--tw-shadow-colored);pointer-events:auto}img{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-0, 0px);width:var(--dyte-space-0, 0px);border-radius:9999px}img.loaded{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}.message{margin-right:var(--dyte-space-3, 12px);max-width:var(--dyte-space-72, 288px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.message p{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-1, 4px);display:inline-block}.message blockquote{display:none}dyte-icon.icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}dyte-icon.dismiss{margin-left:auto;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);border-radius:var(--dyte-border-radius-md, 8px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}dyte-icon.dismiss:hover{cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}dyte-icon.dismiss{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}dyte-button{margin-left:var(--dyte-space-4, 16px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px)}.right{margin-left:auto;display:flex;align-items:center}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}:host(.exit){-webkit-animation:exit 0.4s ease;animation:exit 0.4s ease}@-webkit-keyframes show{0%{opacity:0;transform:translateX(-120px)}100%{opacity:1;transform:translateX(0px)}}@keyframes show{0%{opacity:0;transform:translateX(-120px)}100%{opacity:1;transform:translateX(0px)}}@-webkit-keyframes exit{0%{opacity:1;transform:translateX(0)}100%{opacity:0;transform:translateX(-120px)}}@keyframes exit{0%{opacity:1;transform:translateX(0)}100%{opacity:0;transform:translateX(-120px)}}:host([size='sm']){font-size:14px}",H4=class{constructor(t){U(this,t),this.dismiss=K(this,"dyteNotificationDismiss",7),this.notification=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.imageState="loading"}connectedCallback(){this.notificationChanged(this.notification)}notificationChanged(t){t!=null&&typeof t.duration=="number"&&setTimeout(()=>{this.dismiss.emit(t.id)},t.duration)}render(){return l(O,null,l("div",{class:"ctr"},this.notification.icon!=null&&l("dyte-icon",{class:"icon",icon:this.notification.icon,iconPack:this.iconPack,t:this.t}),this.notification.image!=null&&this.notification.icon==null&&this.imageState!=="errored"&&l("img",{src:this.notification.image,class:{loaded:this.imageState==="loaded"},onLoad:()=>this.imageState="loaded",onError:()=>this.imageState="errored"}),l("p",{class:"message"},l(gy,{message:this.notification.message})),l("div",{class:"right"},this.notification.button!=null&&l("dyte-button",{size:"sm",variant:this.notification.button.variant,onClick:()=>this.notification.button.onClick(),iconPack:this.iconPack,t:this.t},this.notification.button.text),l("dyte-icon",{"aria-label":this.t("dismiss"),class:"dismiss",icon:this.iconPack.dismiss,onClick:()=>this.dismiss.emit(this.notification.id),iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{notification:["notificationChanged"]}}};H4.style=hhe;const Vr=2e3,Fw=Object.freeze({notifications:{participant_joined:!0,participant_left:!0,participant_joined_waitlist:!0,chat:!0,polls:!0,webinar:!0,tab_sync:!0},notification_sounds:{participant_joined:!0,participant_left:!0,chat:!0,polls:!0,webinar:!0,participant_joined_waitlist:!0},notification_duration:{participant_joined:2100,participant_left:2100,participant_joined_waitlist:4e3,chat:Vr,polls:Vr,webinar:Vr,tab_sync:Vr},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10}),ghe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:absolute;top:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);bottom:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);top:auto;display:flex;flex-direction:column;pointer-events:none;z-index:100}dyte-notification{margin-top:var(--dyte-space-2, 8px)}";function mhe(t){const e=Object.assign({},Fw);return t==null||(Object.assign(e.notification_sounds,t.notification_sounds),Object.assign(e.notifications,t.notifications),Object.assign(e.notification_duration,t.notification_duration),e.participant_chat_message_sound_notification_limit=t.participant_chat_message_sound_notification_limit,e.participant_joined_sound_notification_limit=t.participant_joined_sound_notification_limit),e}function JP(t){return Object.keys(t).filter(e=>t[e])}const G4=class{constructor(t){U(this,t),this.permissions=Fw,this.enabledSounds=JP(Fw.notification_sounds),this.addStagePeersListeners=e=>{e.participants.joined.addListener("participantJoined",this.participantJoinedListener),e.meta.addListener("disconnected",this.networkDisconnectedListener),e.meta.addListener("connected",this.networkConnectedListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener)},this.removeStagePeersListeners=e=>{e.participants.joined.removeListener("participantJoined",this.participantJoinedListener),e.meta.removeListener("disconnected",this.networkDisconnectedListener),e.meta.removeListener("connected",this.networkConnectedListener),e.participants.joined.removeListener("participantLeft",this.participantLeftListener)},this.onRemoteUpdate=({payload:e,type:i})=>{if(i===Ir.INCOMING_REQUEST_ACCEPTED){let r=this.meeting.participants.joined.get(e.request.remotePeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`Granted remote control to ${r.name}`,duration:Vr})}if(i===Ir.OUTGOING_REQUEST_ACCEPTED){let r=this.meeting.participants.joined.get(e.request.hostPeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${r.name} has granted remote control.`,duration:Vr})}if(i===Ir.REQUEST_RECEIVED){let r=this.meeting.participants.joined.get(e.request.remotePeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${r.name} has requested for remote control.`,duration:Vr})}if((i===Ir.INCOMING_REQUEST_ENDED||i===Ir.OUTGOING_REQUEST_ENDED)&&this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:"Existing remote control has been terminated.",duration:Vr}),i===Ir.REQUEST_SENT){let r=this.meeting.participants.joined.get(e.request.hostPeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`Sent remote control request to ${r.name}`,duration:Vr})}},this.onDyteNotification=e=>{this.add(e.detail);const i=e.detail.playSound;i!=null&&this.audio.play(i)},this.onRecordingUpdate=e=>{e==="RECORDING"?this.add({id:"recording-started",icon:this.iconPack.recording,message:this.t("recording.started"),duration:Vr}):e==="STOPPING"&&this.add({id:"recording-stopped",icon:this.iconPack.stop_recording,message:this.t("recording.stopped"),duration:Vr})},this.meeting=void 0,this.states=void 0,this.config=Me,this.t=j(),this.size=void 0,this.iconPack=N,this.notifications=[]}connectedCallback(){typeof document<"u"&&(document==null||document.addEventListener("dyteNotification",this.onDyteNotification)),this.meetingChanged(this.meeting),this.configChanged(this.config),this.statesChanged(this.states)}clearListeners(t){var e,i,r,s,n,a,o,c,d;const u=t.meta.viewType==="LIVESTREAM";(u&&((e=t.stage)===null||e===void 0?void 0:e.status)==="ON_STAGE"||!u)&&this.removeStagePeersListeners(t),this.chatUpdateListener&&((i=t.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener)),this.pollUpdateListener&&((r=t.polls)===null||r===void 0||r.removeListener("pollsUpdate",this.pollUpdateListener)),this.socketDisconnectedListener&&t.meta.removeListener("socketDisconnected",this.socketDisconnectedListener),this.socketReconnectFailureListener&&t.meta.removeListener("socketReconnectFailure",this.socketReconnectFailureListener),this.socketReconnectedListener&&t.meta.removeListener("socketReconnected",this.socketReconnectedListener),this.socketReconnectingListener&&t.meta.removeListener("socketReconnecting",this.socketReconnectingListener),this.socketFailureListener&&t.meta.removeListener("socketFailure",this.socketFailureListener),this.stageRequestAccepted&&((s=t.stage)===null||s===void 0||s.removeListener("stageRequestApproved",this.stageRequestAccepted)),this.stageRequestRejected&&((n=t.stage)===null||n===void 0||n.removeListener("stageRequestRejected",this.stageRequestRejected)),this.newStageRequests&&((a=t.stage)===null||a===void 0||a.removeListener("newStageRequest",this.newStageRequests)),this.stageStatusUpdateListener&&((o=t.stage)===null||o===void 0||o.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)),(c=t.remote)===null||c===void 0||c.removeListener("remoteUpdate",this.onRemoteUpdate),(d=t.recording)===null||d===void 0||d.removeListener("recordingUpdate",this.onRecordingUpdate),clearTimeout(this.disconnectTimeout)}disconnectedCallback(){var t;typeof document<"u"&&(document==null||document.removeEventListener("dyteNotification",this.onDyteNotification)),this.meeting!=null&&(this.clearListeners(this.meeting),this.waitlistedParticipantJoinedListener&&this.meeting.participants.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.activeTabUpdateListener&&((t=this.meeting.meta)===null||t===void 0||t.removeListener("activeTabUpdate",this.activeTabUpdateListener)),this.peerRequestToJoinStateListener&&this.meeting.participants.joined.removeListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),this.peerAcceptedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),this.peerRejectedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener))}meetingChanged(t,e){var i,r,s,n,a,o,c,d,u;if(clearTimeout(this.disconnectTimeout),e!==void 0&&this.clearListeners(e),t==null)return;const p=t.meta.viewType==="LIVESTREAM";this.audio=new Xpe;const{notifications:g,notification_duration:m,notification_sounds:f}=this.permissions;if(this.participantJoinedListener=w=>{g.participant_joined&&this.add({id:`${w.id}-joined`,message:`${es(w.name)} just joined`,image:w.picture,duration:m.participant_joined}),f.participant_joined&&this.canPlayParticipantJoinedSound()&&this.audio.play("joined")},this.participantLeftListener=w=>{g.participant_left&&this.add({id:`${w.id}-left`,message:`${es(w.name)} left`,image:w.picture,duration:m.participant_left}),f.participant_left&&this.canPlayParticipantJoinedSound()&&this.audio.play("left")},this.waitlistedParticipantJoinedListener=w=>{const v=`${w.id}-joined-waitlist`;this.add({id:v,message:`${es(w.name)} is requesting to join the meeting`,image:w.picture,duration:m.participant_joined_waitlist,button:{text:"Accept",variant:"secondary",onClick:async()=>{await this.meeting.participants.acceptWaitingRoomRequest(w.id),this.remove(v)}}}),f.participant_joined_waitlist&&this.canPlayParticipantJoinedSound()&&this.audio.play("message")},this.chatUpdateListener=({message:w})=>{const v=p4(w);if(v!=null){if(v.userId===t.self.userId)return;v.type==="text"&&(g.chat&&this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${v.displayName}: ${v.message}`,duration:m.chat}),f.chat&&this.canPlayChatSound()&&this.audio.play("message"))}},this.pollUpdateListener=({polls:w,newPoll:v})=>{v!==!1&&(g.polls&&this.meeting.self.userId!==w[w.length-1].createdByUserId&&this.add({id:`poll-${Math.random().toString(36)}`,icon:this.iconPack.poll,message:`New poll created by ${w[w.length-1].createdBy}`,duration:m.polls}),f.polls&&this.meeting.self.userId!==w[w.length-1].createdByUserId&&this.canPlayChatSound()&&this.audio.play("message"))},this.deviceUpdateListener=({device:w,preview:v})=>{v||(w.kind==="audiooutput"?(this.audio.setDevice(w.deviceId),this.add({id:`speaker-switched-${w.deviceId}`,message:`Connected to ${w.label}`,icon:this.iconPack.speaker,duration:5e3})):w.kind==="videoinput"?this.add({id:`camera-switched-${w.deviceId}`,message:`Connected to ${w.label}`,icon:this.iconPack.speaker,duration:5e3}):this.add({id:`mic-switched-${w.deviceId}`,message:`Connected to ${w.label}`,icon:this.iconPack.mic_on,duration:5e3}))},this.networkDisconnectedListener=()=>{this.remove("network");let w;w=2e4,this.add({id:"network",icon:this.iconPack.disconnected,message:this.t("network.reconnecting"),duration:w}),this.disconnectTimeout=setTimeout(()=>{this.add({id:"network-lost",icon:this.iconPack.disconnected,message:this.t("network.delay"),button:{text:this.t("end"),variant:"danger",onClick:()=>{var v;return(v=this.meeting)===null||v===void 0?void 0:v.leaveRoom()}}})},w)},this.networkConnectedListener=()=>{this.remove("network");let w;this.remove("network-lost"),w=3e3,this.add({id:"network",icon:this.iconPack.wifi,message:this.t("network.restored"),duration:w}),clearTimeout(this.disconnectTimeout)},this.socketUpdateListener=({event:w,attempt:v})=>{this.remove("socket"),w==="reconnected"?(this.remove("socketReconnecting"),this.add({id:"socket",icon:this.iconPack.wifi,message:this.t("network.restored"),duration:3e3})):w==="disconnected"?this.add({id:"socket",icon:this.iconPack.disconnected,message:this.t("network.lost"),duration:3e3}):w==="reconnecting"?this.add({id:"socketReconnecting",icon:this.iconPack.disconnected,message:this.t("network.lost_extended")}):w==="reconnectFailure"?v>5&&(this.remove("socketReconnecting"),this.add({id:"socketReconnecting",icon:this.iconPack.disconnected,message:this.t("network.delay_extended"),button:{text:this.t("end"),variant:"danger",onClick:()=>{var _;return(_=this.meeting)===null||_===void 0?void 0:_.leaveRoom()}}})):w==="failed"&&(this.remove("socketReconnecting"),this.add({id:"socketFailed",icon:this.iconPack.disconnected,message:this.t("network.disconnected")}),this.add({id:"leaveMeeting",icon:this.iconPack.warning,message:this.t("network.leaving")}),setTimeout(()=>{var _;(_=this.meeting)===null||_===void 0||_.leaveRoom("disconnected")},1e4))},this.activeTabUpdateListener=w=>{if(g.tab_sync)switch(w.type){case"plugin":const v=t.plugins.active.toArray().find(k=>k.id==w.id);v!=null&&this.add({id:"activeTab",message:`Plugin switched to ${v.name}`,duration:m.participant_joined});break;case"screenshare":const _=t.participants.joined.toArray().filter(k=>k.screenShareEnabled).find(k=>k.id==w.id);_!=null&&this.add({id:"spotlight",message:`Now watching ${_.name}'s screen`,duration:m.webinar});break}},this.peerRequestToJoinStateListener=({id:w})=>{if(!g.webinar)return;const v=this.meeting.participants.joined.get(w);v!==void 0&&(this.add({id:`webinar-request-${w}`,message:`${v.name} is requesting to be on stage`,duration:m.webinar,button:{text:"Accept",variant:"primary",onClick:async()=>{await this.meeting.participants.acceptAllRequestToJoinStageRequests([{id:w,requestToJoinType:"REQUEST_TO_PRESENT"}]),this.remove(`webinar-request-${w}`)}}}),f.webinar&&this.audio.play("joined"))},this.peerAcceptedToJoinStageListener=w=>{if(!g.webinar)return;const v=this.meeting.participants.joined.get(w.id);v!==void 0&&(this.add({id:`webinar-accepted-${w.id}`,message:`Approved ${v.name}'s request to join stage.`,duration:m.webinar}),f.webinar&&this.audio.play("joined"))},this.peerRejectedToJoinStageListener=w=>{if(!g.webinar)return;const v=this.meeting.participants.joined.get(w.id);v!==void 0&&this.add({id:`webinar-rejected-${w.id}`,message:`Rejected ${v.name}'s request to join stage.`,duration:m.webinar})},this.stageRequestAccepted=()=>{this.add({id:"stage-request-accepted",message:"Request to join accepted",duration:3e3})},this.stageRequestRejected=()=>{this.add({id:"stage-request-rejected",message:"Request to join rejected",duration:3e3})},this.newStageRequests=({count:w})=>{this.add({id:"new-stage-request",message:`You have ${w} pending request${w===1?"":"s"}`,duration:3e3})},this.stageStatusUpdateListener=w=>{w==="ON_STAGE"?this.addStagePeersListeners(t):this.removeStagePeersListeners(t)},this.socketReconnectedListener=()=>this.socketUpdateListener({event:"reconnected"}),this.socketDisconnectedListener=()=>this.socketUpdateListener({event:"disconnected"}),this.socketReconnectingListener=()=>this.socketUpdateListener({event:"reconnecting"}),this.socketFailureListener=()=>this.socketUpdateListener({event:"failed"}),this.socketReconnectFailureListener=({attempt:w})=>this.socketUpdateListener({event:"reconnectFailure",attempt:w}),!bn(t)&&((i=t.chat)===null||i===void 0||i.addListener("chatUpdate",this.chatUpdateListener)),t.self.config.viewType==="CHAT")return;const b=t.self.getCurrentDevices();b.speaker!=null&&this.audio.setDevice(b.speaker.deviceId),p?(r=t.stage)===null||r===void 0||r.on("stageStatusUpdate",this.stageStatusUpdateListener):this.addStagePeersListeners(t),t.participants.joined.addListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),t.participants.joined.addListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),t.participants.joined.addListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),this.canAcceptWaitingRequests()&&t.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),(s=t.polls)===null||s===void 0||s.addListener("pollsUpdate",this.pollUpdateListener),t.self.addListener("deviceUpdate",this.deviceUpdateListener),t.meta.addListener("socketReconnected",this.socketReconnectedListener),t.meta.addListener("socketDisconnected",this.socketDisconnectedListener),t.meta.addListener("socketReconnecting",this.socketReconnectingListener),t.meta.addListener("socketFailure",this.socketFailureListener),t.meta.addListener("socketReconnectFailure",this.socketReconnectFailureListener),(n=t.remote)===null||n===void 0||n.addListener("remoteUpdate",this.onRemoteUpdate),(a=t.meta)===null||a===void 0||a.addListener("activeTabUpdate",this.activeTabUpdateListener),(o=t.recording)===null||o===void 0||o.addListener("recordingUpdate",this.onRecordingUpdate),(c=t.stage)===null||c===void 0||c.addListener("stageRequestApproved",this.stageRequestAccepted),(d=t.stage)===null||d===void 0||d.addListener("stageRequestRejected",this.stageRequestRejected),t.self.permissions.acceptPresentRequests&&((u=t.stage)===null||u===void 0||u.addListener("newStageRequest",this.newStageRequests))}configChanged(t){t!=null&&(t==null?void 0:t.config)!=null&&(this.permissions=mhe(t.config),this.enabledSounds=JP(this.permissions.notification_sounds))}statesChanged(t){var e;if(t!=null){const i=!(!((e=t==null?void 0:t.prefs)===null||e===void 0)&&e.muteNotificationSounds);for(const r of this.enabledSounds)r in this.permissions.notification_sounds&&(this.permissions.notification_sounds[r]=i)}}apiErrorListener({detail:t}){const{trace:e,message:i}=t;this.add({id:e,message:i,duration:Vr,icon:this.iconPack.warning})}add(t){document.visibilityState==="visible"&&this.notifications.length<5&&(this.notifications=[...this.notifications,t])}remove(t){this.notifications=this.notifications.filter(e=>e.id!==t)}handleDismiss(t){t.stopPropagation();const e=t.detail,i=this.host.shadowRoot.querySelector(`[data-id="${e}"]`);i==null||i.classList.add("exit"),setTimeout(()=>{Li(()=>{this.remove(e)})},400)}canPlayParticipantJoinedSound(){return this.permissions.participant_joined_sound_notification_limit==null||this.permissions.participant_joined_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_joined_sound_notification_limit}canPlayChatSound(){return this.permissions.participant_chat_message_sound_notification_limit==null||this.permissions.participant_chat_message_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_chat_message_sound_notification_limit}canAcceptWaitingRequests(){return this.permissions.notifications.participant_joined_waitlist&&this.meeting.self.permissions.acceptWaitingRequests}render(){return l(O,null,this.notifications.map(t=>l("dyte-notification",{size:this.size,key:t.id,"data-id":t.id,notification:t,onDyteNotificationDismiss:e=>this.handleDismiss(e),iconPack:this.iconPack,t:this.t})))}get host(){return jr(this)}static get watchers(){return{meeting:["meetingChanged"],config:["configChanged"],states:["statesChanged"]}}};G4.style=ghe;const fhe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0.6);position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);z-index:50}dyte-icon{height:var(--dyte-space-20, 80px)}h2{margin:var(--dyte-space-2, 8px);font-weight:500}p{margin:var(--dyte-space-0, 0px);font-size:16px}",W4=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.meeting=void 0,this.states=void 0,this.iconPack=N,this.t=j()}connectedCallback(){this.states.activeOverlayModal.timeout&&setTimeout(()=>{this.stateUpdate.emit({activeOverlayModal:{active:!1}}),L.activeOverlayModal={active:!1}},this.states.activeOverlayModal.timeout)}componentDidLoad(){}disconnectedCallback(){}render(){return l(O,null,l("dyte-icon",{icon:this.states.activeOverlayModal.icon,iconPack:this.iconPack,t:this.t}),l("h2",null,this.states.activeOverlayModal.title),l("p",null,this.states.activeOverlayModal.description))}};W4.style=fhe;var vhe=Object.freeze({__proto__:null,dyte_channel_details:M4,dyte_channel_header:D4,dyte_channel_selector_ui:L4,dyte_chat_composer_ui:N4,dyte_chat_messages_ui:U4,dyte_chat_messages_ui_paginated:j4,dyte_chat_search_results:$4,dyte_chat_selector_ui:z4,dyte_dialog_manager:F4,dyte_emoji_picker:V4,dyte_join_stage:B4,dyte_notification:H4,dyte_notifications:G4,dyte_overlay_modal:W4});const yhe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex}:host[size='sm']{margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px)}.indicator{display:flex;flex-direction:row;align-items:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);-webkit-animation:blink 4s linear infinite;animation:blink 4s linear infinite}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='sm']) .indicator span{display:none}@-webkit-keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}@keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}",q4=class{constructor(t){U(this,t),this.setIsLivestreaming=e=>{this.isLivestreaming=e==="LIVESTREAMING"},this.meeting=void 0,this.size=void 0,this.t=j(),this.isLivestreaming=void 0,this.iconPack=N}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e;(e=(t=this.meeting)===null||t===void 0?void 0:t.livestream)===null||e===void 0||e.removeListener("livestreamUpdate",this.setIsLivestreaming)}meetingChanged(t){var e,i;t!=null&&(this.setIsLivestreaming((e=this.meeting.livestream)===null||e===void 0?void 0:e.state),(i=this.meeting.livestream)===null||i===void 0||i.on("livestreamUpdate",this.setIsLivestreaming))}render(){if(!(!bn(this.meeting)||!this.isLivestreaming))return l(O,null,l("div",{class:"indicator","aria-label":this.t("livestream.indicator"),part:"indicator"},l("dyte-icon",{icon:this.iconPack.start_livestream,size:this.size}),l("span",null,this.t("LIVE"))))}static get watchers(){return{meeting:["meetingChanged"]}}};q4.style=yhe;const bhe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.player-container{position:relative;margin:var(--dyte-space-4, 16px);display:flex;flex-grow:1;align-items:center;justify-content:center;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px)}video{z-index:0;height:100%;width:100%;border-radius:var(--dyte-border-radius-md, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.loader{position:absolute;z-index:10;height:100%;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;flex-direction:column;align-items:center;justify-content:center}p{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:16px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.latency-controls{position:absolute;bottom:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);z-index:20;display:flex;flex-direction:row;align-items:center}.sync-live-stream{cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);font-size:12px}.unmute-popup{position:absolute;z-index:30 !important;display:flex;width:var(--dyte-space-72, 288px);flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-4, 16px);text-align:center;max-width:70%}.unmute-popup h3{margin:var(--dyte-space-0, 0px);font-size:16px;font-weight:500}.unmute-popup p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);font-size:14px}",J4=class{constructor(t){U(this,t),this.dyteAPIError=K(this,"dyteAPIError",7),this.showLatencyIndicator=!1,this.LoadPlayer=(e=this.ivsPlayer)=>{this.player&&e&&(e.attachHTMLVideoElement(this.player),e.setAutoplay(!0),e.setVolume(1))},this.livestreamUpdateListener=e=>{var i,r;this.livestreamState=e,e==="LIVESTREAMING"?(this.LoadPlayer(),this.getPlaybackUrl(),!((r=(i=this.meeting.__internals__)===null||i===void 0?void 0:i.browserSpecs)===null||r===void 0)&&r.isIOSMobile()||(this.fetchLatency(),this.updateLatency=setInterval(this.fetchLatency,2e3)),pt.enableSource("livestream-player")):(this.showLatencyIndicator=!1,this.updateLatency&&clearInterval(this.updateLatency),pt.disableSource("livestream-player"))},this.getLoadingState=()=>{let e="",i=!1,r=!1;switch(this.livestreamState){case"IDLE":e=this.t("livestream.idle"),i=!0,r=!1;break;case"STARTING":e=this.t("livestream.starting"),i=!0,r=!0;break;case"STOPPING":e=this.t("livestream.stopping"),i=!0,r=!0;break;case"LIVESTREAMING":this.playerState!==Qs.PLAYING&&(e=this.t("livestream.starting"),r=!0,i=!0);break;default:i=!1,e=this.t(""),r=!0;break}return{isLoading:i,loadingMessage:e,showIcon:r}},this.getErrorState=()=>{var e,i;let r=!1,s="";return this.livestreamState!=="LIVESTREAMING"?(r=!1,s=this.t(""),{isError:r,errorMessage:s}):(this.isSupported||(r=!0,s=this.t("livestream.error.not_supported")),this.playbackUrl||(r=!0,s=this.t("livestream.error.not_found")),this.playerError&&(r=!0,s=this.t((i=(e=this.playerError)===null||e===void 0?void 0:e.message)!==null&&i!==void 0?i:"livestream.error.unknown")),{isError:r,errorMessage:s})},this.fetchLatency=()=>{this.ivsPlayer&&(this.latency=this.ivsPlayer.getLiveLatency(),this.meeting.__internals__.logger.info("IVS.Player.LivestreamLatency",{livestream:{latency:this.latency}}))},this.meeting=void 0,this.size=void 0,this.t=j(),this.iconPack=N,this.playbackUrl=void 0,this.isSupported=!0,this.playerState=Qs.IDLE,this.livestreamState="IDLE",this.playerError=void 0,this.latency=0,this.audioPlaybackError=!1}AddPlayerListeners(t=this.ivsPlayer){Object.values(Object.assign(Object.assign({},Vt),Qs)).forEach(e=>{hae.includes(e)||t==null||t.addEventListener(e,i=>{var r,s,n;(e===Qs.IDLE||e===Qs.PLAYING||e===Vt.ERROR||e===Qs.READY)&&(this.playerState=e),e===Vt.ERROR&&(this.playerError=i),e===Qs.IDLE&&t.isPaused()&&t.play(),e===Vt.AUDIO_BLOCKED&&(this.audioPlaybackError=!0),this.playerState===Qs.PLAYING&&!(!((s=(r=this.meeting.__internals__)===null||r===void 0?void 0:r.browserSpecs)===null||s===void 0)&&s.isIOSMobile())?this.showLatencyIndicator=!0:this.showLatencyIndicator=!1,this.meeting.__internals__.logger.info(`IVS.Player.${e}`,i),gae.includes(e)&&((n=this.meeting.__internals__.callStats)===null||n===void 0||n.ivsPlayerEvent(e,i))})})}getPlaybackUrl(t=this.ivsPlayer){this.playbackUrl=this.meeting.livestream.playbackUrl,this.playbackUrl&&t&&(t.load(this.playbackUrl),t.play())}onPlayerRef(t){this.player=t,pt.addSource("livestream-player",this.player,!!this.playbackUrl),this.playbackUrl&&pt.enableSource("livestream-player")}connectedCallback(){this.meetingChanged(this.meeting),window.onDyteLivestreamPlayer=t=>{t?(this.isSupported=!0,this.ivsPlayer=t,this.AddPlayerListeners(t),this.LoadPlayer(t),this.getPlaybackUrl(t)):this.isSupported=!1},this.sendLatencyToCallStats=setInterval(()=>{var t;this.fetchLatency(),(t=this.meeting.__internals__.callStats)===null||t===void 0||t.livestreamLatency(this.latency)},1e4)}disconnectedCallback(){window.onDyteLivestreamPlayer=void 0,this.meeting.livestream.removeListener("livestreamUpdate",this.livestreamUpdateListener),clearInterval(this.sendLatencyToCallStats),this.ivsPlayer.load(""),this.ivsPlayer=void 0,this.player=void 0}async componentDidLoad(){const t=`
    import IVSPlayer from 'https://cdn.jsdelivr.net/npm/amazon-ivs-player@1.16.0/+esm'
    let player = undefined;
    if (IVSPlayer.isPlayerSupported) {
      player = IVSPlayer.create({
        wasmBinary:
          'https://unpkg.com/amazon-ivs-player@1.11.0/dist/assets/amazon-ivs-wasmworker.min.wasm',
        wasmWorker:
          'https://unpkg.com/amazon-ivs-player@1.11.0/dist/assets/amazon-ivs-wasmworker.min.js',
      });
    }
    window.onDyteLivestreamPlayer && window.onDyteLivestreamPlayer(player);
    `,e=document.createElement("script");e.type="module",e.innerHTML=t,document.body.appendChild(e)}meetingChanged(t){t!=null&&(this.livestreamState=this.meeting.livestream.state,this.livestreamState==="LIVESTREAMING"&&(this.LoadPlayer(),this.getPlaybackUrl(),pt.enableSource("livestream-player")),this.meeting.livestream.on("livestreamUpdate",this.livestreamUpdateListener))}render(){if(!bn(this.meeting))return;const{isError:t,errorMessage:e}=this.getErrorState(),{isLoading:i,loadingMessage:r,showIcon:s}=this.getLoadingState();return l(O,null,l("div",{class:"player-container"},l("video",{ref:n=>this.onPlayerRef(n),playsInline:!0}),this.audioPlaybackError&&l("div",{class:"unmute-popup"},l("h3",null,this.t("audio_playback.title")),l("p",null,this.t("audio_playback.description")),l("dyte-button",{kind:"wide",onClick:()=>{this.player.muted=!1,this.audioPlaybackError=!1},title:this.t("audio_playback"),iconPack:this.iconPack,t:this.t},this.t("audio_playback"))),this.livestreamState==="LIVESTREAMING"&&this.showLatencyIndicator&&l("div",{class:"latency-controls"}),t&&l("div",{class:"loader"},l("dyte-icon",{icon:this.iconPack.warning,t:this.t}),l("p",null,e)),!t&&i&&l("div",{class:"loader"},s&&l("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t,size:"md"}),l("p",null,r))))}static get watchers(){return{meeting:["meetingChanged"]}}};J4.style=bhe;const whe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;height:var(--dyte-space-10, 40px);-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;font-size:14px}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([variant='embedded']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));opacity:0.5;margin-top:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:12px}:host([variant='embedded']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",K4=class{constructor(t){U(this,t),this.disconnectMeeting=e=>{var i;e!=null&&this.countListener!=null&&((i=e.livestream)===null||i===void 0||i.removeListener("viewerCountUpdate",this.countListener))},this.meeting=void 0,this.variant="primary",this.iconPack=N,this.t=j(),this.viewerCount=0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(t,e){var i;this.disconnectMeeting(e),t!=null&&(this.countListener=()=>{var r;this.viewerCount=(r=t.livestream)===null||r===void 0?void 0:r.viewerCount},this.countListener(),(i=t.livestream)===null||i===void 0||i.addListener("viewerCountUpdate",this.countListener))}render(){return bn(this.meeting)?l(O,{tabIndex:0,role:"log","aria-label":`${this.viewerCount} ${this.t("viewers")}`},l("dyte-icon",{icon:this.iconPack.viewers,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),this.viewerCount," ",this.t("viewers")):null}static get watchers(){return{meeting:["meetingChanged"]}}};K4.style=whe;var _he=Object.freeze({__proto__:null,dyte_livestream_indicator:q4,dyte_livestream_player:J4,dyte_viewer_count:K4});const She=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;align-items:center;justify-content:center;aspect-ratio:16 / 9;height:var(--dyte-space-56, 224px);overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));transition-property:var(--dyte-transition-property, all);transition-duration:150ms}@media (prefers-reduced-motion){:host{--dyte-transition-property:none}}::slotted(dyte-name-tag){position:absolute;left:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px)}:host([size='sm'][variant='solid']) ::slotted(dyte-name-tag){left:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px)}::slotted(dyte-network-indicator){position:absolute;right:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px)}:host([size='sm']) ::slotted(dyte-network-indicator){right:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px)}video{display:none;position:absolute;height:100%;width:100%;border-radius:var(--dyte-border-radius-lg, 12px)}video.contain{-o-object-fit:contain;object-fit:contain}video.cover{-o-object-fit:cover;object-fit:cover}video.visible{display:block}video::-webkit-media-controls{display:none !important}.pinned-icon{position:absolute;left:var(--dyte-space-3, 12px);top:var(--dyte-space-3, 12px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);padding:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) .pinned-icon{top:var(--dyte-space-2, 8px);left:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}video.mirror{transform:scaleX(-1)}:host([name-tag-position='bottom-right']) ::slotted(dyte-name-tag){left:auto;right:var(--dyte-space-3, 12px)}:host([name-tag-position='bottom-center']) ::slotted(dyte-name-tag){left:auto;right:auto}:host([name-tag-position='top-left']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);bottom:auto}:host([name-tag-position='top-right']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);left:auto;bottom:auto}:host([name-tag-position='top-center']) ::slotted(dyte-name-tag){left:auto;right:auto;bottom:auto;top:var(--dyte-space-3, 12px)}",Y4=class{constructor(t){U(this,t),this.onVideoUpdate=e=>{this.videoState=e,this.participant!=null&&(e.videoEnabled?pt.enableSource(this.participant.id):pt.disableSource(this.participant.id))},this.onPinned=({isPinned:e})=>{this.isPinned=e},this.isSelf=()=>{var e;return this.isPreview||this.participant.id===((e=this.meeting)===null||e===void 0?void 0:e.self.id)},this.videoState=void 0,this.isPinned=!1,this.nameTagPosition="bottom-left",this.isPreview=!1,this.participant=void 0,this.meeting=void 0,this.states=void 0,this.config=Me,this.variant="solid",this.size=void 0,this.iconPack=N,this.t=j()}onVideoRef(t){this.videoEl=t,!(this.isPreview||this.participant==null)&&(pt.addSource(this.participant.id,this.videoEl,this.participant.videoEnabled),this.participant.videoEnabled&&pt.enableSource(this.participant.id))}participantVideoUpdate(t){t.id===this.participant.id&&this.onVideoUpdate({videoEnabled:t.videoEnabled,videoTrack:t.videoTrack})}connectedCallback(){this.meeting?this.meetingChanged(this.meeting):this.participantsChanged(this.participant)}componentDidLoad(){this.videoStateChanged(this.videoState)}disconnectedCallback(){if(this.playTimeout&&clearTimeout(this.playTimeout),this.participant==null)return;const{self:t}=this.meeting;this.participant.id===t.id?this.participant.removeListener("videoUpdate",this.onVideoUpdate):this.meeting.participants.joined.removeListener("videoUpdate",this.participantVideoUpdate),this.participant.removeListener("pinned",this.onPinned),this.participant.removeListener("unpinned",this.onPinned),pt.removeSource(this.participant.id)}meetingChanged(t){t!=null&&this.participantsChanged(this.participant)}participantsChanged(t){if(t==null||this.meeting==null)return;const{self:e}=this.meeting;this.videoState={videoEnabled:t.videoEnabled,videoTrack:t.videoTrack},this.isPinned=t.isPinned,t.id===e.id?t.addListener("videoUpdate",this.onVideoUpdate):this.meeting.participants.joined.addListener("videoUpdate",this.participantVideoUpdate.bind(this)),t.addListener("pinned",this.onPinned),t.addListener("unpinned",this.onPinned)}videoStateChanged(t){var e;if(t!=null&&this.videoEl!=null)if(t.videoEnabled){!((e=this.meeting)===null||e===void 0)&&e.__internals__.features.hasFeature(Yf.LOG_PLAYING_FAILURES)&&(this.playTimeout&&clearTimeout(this.playTimeout),this.playTimeout=setTimeout(()=>{var r;(r=this.meeting)===null||r===void 0||r.__internals__.logger.log("dyte-participant-tile::playing_timeout")},6e3));const i=new MediaStream;if(t.videoTrack==null)return;i.addTrack(t.videoTrack),this.videoEl.srcObject=i}else this.playTimeout&&clearTimeout(this.playTimeout),this.videoEl.srcObject=void 0}isMirrored(){var t;if(this.participant!=null&&this.isSelf()){const e=this.states||L,i=(t=e==null?void 0:e.prefs)===null||t===void 0?void 0:t.mirrorVideo;if(typeof i=="boolean")return i}return!1}render(){var t,e,i,r;return l(O,null,l("video",{ref:s=>this.onVideoRef(s),class:{visible:(t=this.videoState)===null||t===void 0?void 0:t.videoEnabled,mirror:this.isMirrored(),[(r=(i=(e=this.config)===null||e===void 0?void 0:e.config)===null||i===void 0?void 0:i.videoFit)!==null&&r!==void 0?r:"cover"]:!0},onPlaying:()=>{this.playTimeout&&clearTimeout(this.playTimeout)},onPause:s=>{var n,a;this.isSelf()&&(!((n=this.meeting)===null||n===void 0)&&n.__internals__.features.hasFeature(Yf.PLAY_PARTICIPANT_TILE_VIDEO_ON_PAUSE))&&(this.meeting.__internals__.logger.warn(`Video player paused for ${this.participant.id} isSelf: ${this.isSelf()}`),(a=s==null?void 0:s.target)===null||a===void 0||a.play())},autoPlay:!0,playsInline:!0,muted:!0}),this.isPinned&&l("dyte-icon",{class:"pinned-icon",icon:this.iconPack.pin,"aria-label":this.t("pinned"),iconPack:this.iconPack,t:this.t}),l("slot",null))}static get watchers(){return{meeting:["meetingChanged"],participant:["participantsChanged"],videoState:["videoStateChanged"]}}};Y4.style=She;var Ehe=Object.freeze({__proto__:null,dyte_participant_tile:Y4});const khe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.ctr{margin-bottom:var(--dyte-space-3, 12px);display:flex;width:83.333333%;flex-direction:column;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.poll-title{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.poll{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px)}.poll p{margin:var(--dyte-space-0, 0px)}.poll-question{font-size:12px;font-weight:700;overflow-wrap:break-word}.poll-option{display:flex;flex-direction:column;margin-top:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);word-break:break-word}.poll-option label{display:flex;flex-direction:row}.poll-option-header{display:flex;flex-direction:row;justify-content:space-between;padding:var(--dyte-space-1, 4px)}.poll-option-header:hover{cursor:pointer}.poll-option-header[data-disabled=true]:hover{cursor:default}.poll-option-header input{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-2, 8px)}.votes{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;flex-wrap:wrap}.vote{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);display:flex;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:circle();clip-path:circle()}.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}`,Q4=class{constructor(t){U(this,t),this.onVote=K(this,"dyteVotePoll",7),this.poll=void 0,this.self=void 0,this.permissions=void 0,this.iconPack=N,this.t=j()}vote(t,e){this.poll.voted.includes(this.self)?t.preventDefault():this.onVote.emit({id:this.poll.id,index:e})}render(){return l(O,null,l("div",{class:"ctr"},l("p",{class:"poll-title"},this.t("polls.by")," ",Mr(es(this.poll.createdBy),20)),l("div",{class:"poll"},l("p",{class:"poll-question"},this.poll.question),this.poll.options.map((t,e)=>l("div",{class:{active:t.votes.some(i=>i.id===this.self),"poll-option":!0}},l("div",{class:"poll-option-header","data-disabled":!this.permissions.polls.canVote},l("label",null,l("input",{disabled:!this.permissions.polls.canVote,type:"radio",checked:t.votes.some(i=>i.id===this.self),onClick:i=>this.vote(i,e)}),l("p",null,t.text," (",t.count,")"))),l("div",{class:"votes"},t.votes.map(i=>{if(!(this.poll.anonymous&&this.self!==this.poll.createdByUserId))return l("dyte-tooltip",{label:i.name,iconPack:this.iconPack,t:this.t},l("div",{class:"vote"},G3(i.name)))})))))))}};Q4.style=khe;const The=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.create-poll{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);display:flex;flex:1 1 0%;flex-direction:column;padding:var(--dyte-space-3, 12px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.create-poll p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);text-align:center}.create-poll textarea{display:flex;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);font-family:var(--dyte-font-family, sans-serif);border-width:var(--dyte-border-width-none, 0);border-style:none;font-weight:500;outline:2px solid transparent;outline-offset:2px;margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);resize:vertical;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.create-poll textarea:focus{outline-style:solid;outline-offset:2px;outline-color:rgb(var(--dyte-colors-background-600, 60 60 60))}.option{display:flex;flex-direction:row;align-items:center;margin-bottom:var(--dyte-space-3, 12px);width:100%}.option input{width:100%;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.remove-option{margin-left:var(--dyte-space-2, 8px);width:var(--dyte-space-10, 40px);border-radius:var(--dyte-border-radius-sm, 4px)}.add-option{margin-bottom:var(--dyte-space-3, 12px)}label{margin-bottom:var(--dyte-space-3, 12px)}.error-text{margin-top:var(--dyte-space-3, 12px);text-align:center;font-size:12px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}`,Z4=class{constructor(t){U(this,t),this.onCreate=K(this,"dyteCreatePoll",7),this.iconPack=N,this.t=j(),this.options=["",""],this.anonymous=!1,this.hideVotes=!0,this.error=void 0}removeOption(t){var e;this.options=this.options.filter((i,r)=>r!==t),((e=this.error)===null||e===void 0?void 0:e.code)===1&&(this.error=void 0)}addOption(){this.options=[...this.options,""]}updateOption(t,e){var i;this.options[e]=t.target.value,((i=this.error)===null||i===void 0?void 0:i.code)===1&&(this.error=void 0)}handleSubmit(){const t={question:this.question.value,options:this.options,anonymous:this.anonymous,hideVotes:this.anonymous?!0:this.hideVotes};if(!t.question){this.error={code:0,message:this.t("polls.errors.question_required")};return}if(this.options.filter(e=>e.trim()==="").length>0){this.error={code:1,message:this.t("polls.errors.empty_option")};return}this.onCreate.emit(t)}render(){return l(O,null,l("div",{class:"create-poll"},l("p",null,this.t("polls.question")),l("textarea",{onInput:()=>{this.error&&this.error.code===0&&(this.error=void 0)},ref:t=>this.question=t,placeholder:this.t("polls.question.placeholder")}),this.options.map((t,e)=>l("div",{class:"option"},l("input",{placeholder:this.t("polls.option.placeholder"),value:t,onInput:i=>this.updateOption(i,e)}),e>1&&l("dyte-button",{kind:"icon",class:"auto remove-option",variant:"secondary",onClick:()=>this.removeOption(e),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.subtract,iconPack:this.iconPack,t:this.t})))),l("dyte-button",{class:"add-option",variant:"secondary",onClick:()=>this.addOption(),iconPack:this.iconPack,t:this.t},this.t("polls.option")),l("label",null,l("input",{id:"anonymous",type:"checkbox",onChange:t=>this.anonymous=t.target.checked}),this.t("polls.results.anon")),l("label",null,l("input",{id:"hideVotes",type:"checkbox",disabled:this.anonymous,checked:this.anonymous?!0:this.hideVotes,onChange:t=>this.hideVotes=t.target.checked}),this.t("polls.results.hide")),l("dyte-button",{kind:"wide",onClick:()=>this.handleSubmit(),iconPack:this.iconPack,t:this.t},this.t("polls.create")),this.error&&l("span",{class:"error-text"},this.error.message)))}};Z4.style=The;var xhe=Object.freeze({__proto__:null,dyte_poll:Q4,dyte_poll_form:Z4});const Phe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{font-size:12px}#sync-button{flex-direction:row;border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-1, 4px);display:flex;height:var(--dyte-space-16, 64px);width:100%;align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-10, 40px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='md']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='lg']) #sync-button{flex-direction:row;display:flex;height:var(--dyte-space-8, 32px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}@media (orientation: portrait){:host([size='lg']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='sm']) #sync-button{height:var(--dyte-space-10, 40px);width:var(--dyte-space-16, 64px);flex-direction:row}}#sync-button>dyte-icon{max-height:14px}#sync-button dyte-icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}#sync-button.active dyte-icon{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}div{align-content:center;line-height:2rem}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-8, 32px)}#sync-button.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-bg-opacity))}",X4=class{constructor(t){U(this,t),this.meeting=void 0,this.iconPack=N,this.t=j(),this.size=void 0,this.canSpotlight=void 0,this.isSpotlighted=void 0}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){var e,i;t!=null&&(this.canSpotlight=t.self.permissions.canSpotlight,this.isSpotlighted=(i=(e=t.meta)===null||e===void 0?void 0:e.broadcastTabChanges)!==null&&i!==void 0?i:!1)}updateSpotlightState(t){var e;try{(e=this.meeting.meta)===null||e===void 0||e.setBroadcastTabChanges(t),this.isSpotlighted=t}catch(i){console.error(i)}}render(){if(this.canSpotlight)return l(O,null,l("dyte-tooltip",{size:"md",iconPack:this.iconPack,t:this.t,label:this.t("remote_access.indicator")},l("div",{id:"sync-button",class:{tab:!0,active:this.isSpotlighted},onClick:()=>this.updateSpotlightState(!this.isSpotlighted)},l("span",{class:"name"},"Sync"),l("dyte-icon",{id:"icon",iconPack:this.iconPack,t:this.t,icon:this.isSpotlighted?this.iconPack.checkmark:this.iconPack.warning,tabIndex:-1,"aria-hidden":!0}))))}static get watchers(){return{meeting:["meetingChanged"]}}};X4.style=Phe;var Che=Object.freeze({__proto__:null,dyte_spotlight_indicator:X4});const Rhe=".message-wrapper{display:flex;gap:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-4, 16px);margin-right:var(--dyte-space-4, 16px);margin-top:var(--dyte-space-4, 16px)}[is-continued] .message-wrapper{margin-top:var(--dyte-space-0, 0px)}.message-wrapper.align-right{flex-direction:row-reverse}.avatar{display:none}.file-picker{display:none}.message{position:relative;display:flex}.show-on-hover dyte-menu{visibility:hidden}.show-on-hover:hover dyte-menu{visibility:visible}.align-right .message{justify-content:flex-end;margin-left:auto}.align-right .message .head{margin-right:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-0, 0px);flex-direction:row-reverse;gap:var(--dyte-space-4, 16px)}.align-right .message dyte-text-message .bubble,.align-right .message dyte-image-message .bubble,.align-right .message dyte-file-message .bubble{padding-right:var(--dyte-space-5, 20px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.align-right .message .actions dyte-icon{color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.align-right dyte-menu{left:auto;right:var(--dyte-space-0, 0px)}.head{margin-bottom:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-1, 4px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.head .name{font-size:14px;font-weight:600}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}dyte-menu{position:absolute;left:var(--dyte-space-0, 0px);top:var(--dyte-space-6, 24px);border-radius:var(--dyte-border-radius-lg, 12px)}dyte-menu dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);cursor:pointer}[is-continued] dyte-menu{top:var(--dyte-space-2, 8px)}.actions{display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0\\.5, 2px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}.actions dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.body{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.body .emoji{font-size:24px}.body.bubble{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-1, 4px);max-width:var(--dyte-space-96, 384px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-left:var(--dyte-space-5, 20px);padding-right:var(--dyte-space-5, 20px);overflow-wrap:break-word;font-size:14px;line-height:1.375;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.body.bubble p{margin:var(--dyte-space-0, 0px);word-break:break-word}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{display:block;font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-0, 0px)}.image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.file .file-data{flex:1 1 0%}.file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}blockquote{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px);background-color:transparent}.block-quote,blockquote{--tw-border-spacing-x:1px;--tw-border-spacing-y:1px;border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-md, 2px);border-right-width:var(--dyte-border-width-none, 0);border-style:solid;border-left-color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));padding:var(--dyte-space-0\\.5, 2px);padding-left:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px) !important;border-radius:var(--dyte-border-radius-sm, 4px);border-top-left-radius:var(--dyte-border-radius-none, 0);border-bottom-left-radius:var(--dyte-border-radius-none, 0)}.link{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.align-right .block-quote{border-color:rgb(var(--dyte-colors-text-on-brand-600, var(--dyte-colors-text-600, 255 255 255 / 0.52)));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity))}.align-right .link{color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.align-right .image .actions dyte-icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}@media (orientation: landscape) and (min-width: 400px){.avatar{display:flex;width:var(--dyte-space-6, 24px)}.avatar dyte-avatar{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);font-size:10px}.message{width:75%}}",e6=class{constructor(t){U(this,t),this.edit=K(this,"edit",7),this.reply=K(this,"reply",7),this.delete=K(this,"delete",7),this.renderMessage=()=>{switch(this.message.type){case"text":return l("div",{"is-continued":this.isContinued,key:this.message.id},this.isUnread&&l("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),l("dyte-text-message",{message:this.message,now:this.now,isContinued:this.isContinued,"data-timestamp":this.message.time.getTime(),iconPack:this.iconPack,t:this.t,showBubble:!0}));case"image":return l("div",{"is-continued":this.isContinued,key:this.message.id},this.isUnread&&l("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),l("dyte-image-message",{message:this.message,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,"data-timestamp":this.message.time.getTime(),t:this.t,showBubble:!0}));case"file":return l("div",{"is-continued":this.isContinued,key:this.message.id},this.isUnread&&l("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),l("dyte-file-message",{message:this.message,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,t:this.t,"data-timestamp":this.message.time.getTime(),showBubble:!0}))}},this.onReply=()=>{this.reply.emit(this.message)},this.onDelete=()=>{this.delete.emit(this.message)},this.onEdit=async()=>{this.edit.emit(this.message)},this.isTouchDevice=()=>"ontouchstart"in window||navigator.maxTouchPoints>0,this.message=void 0,this.isContinued=void 0,this.isUnread=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.isSelf=!1,this.canEdit=!1,this.canDelete=!1,this.canReply=!1,this.disableControls=!1,this.alignRight=!1,this.senderDisplayPicture=void 0,this.hideAvatar=!1,this.now=new Date}renderControls(){if(!this.disableControls)return l("dyte-menu",{placement:this.alignRight?"bottom-end":"bottom-start"},l("button",{slot:"trigger",class:"actions"},l("dyte-icon",{icon:this.iconPack.chevron_down})),l("dyte-menu-list",null,this.canReply&&l("dyte-menu-item",{onClick:this.onReply},l("dyte-icon",{icon:this.iconPack.back,slot:"start"}),this.t("chat.reply")),this.canEdit&&l("dyte-menu-item",{onClick:this.onEdit},l("dyte-icon",{icon:this.iconPack.edit,slot:"start"}),this.t("chat.edit_msg")),this.canDelete&&l("dyte-menu-item",{onClick:this.onDelete},l("dyte-icon",{icon:this.iconPack.delete,slot:"start"}),this.t("chat.delete_msg"))))}renderAvatar(){if(!this.hideAvatar)return this.isContinued?l("div",{class:"avatar"}):l("div",{class:"avatar"},l("dyte-avatar",{size:"sm",participant:{name:this.message.displayName,picture:this.senderDisplayPicture}}))}render(){return l(O,null,l("div",{class:{"message-wrapper":!0,"align-right":this.alignRight},"is-continued":this.isContinued},this.renderAvatar(),l("div",{class:{message:!0,"show-on-hover":!this.isTouchDevice()},"is-continued":this.isContinued},this.renderMessage(),this.renderControls())))}get $el(){return jr(this)}};e6.style=Rhe;const Ahe=class{constructor(t){U(this,t),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=N,this.t=j(),this.showBubble=!1}render(){const t=uE(this.message.link);return l(O,null,!this.isContinued&&l($h,{name:this.message.displayName,time:this.message.time,now:this.now}),l("div",{class:{body:!0,bubble:this.showBubble},part:"body"},l("div",{class:"file"},l("div",{class:"file-data"},l("div",{class:"name"},this.message.name),l("div",{class:"file-data-split"},l("div",{class:"ext"},Nle(this.message.name)),l("span",{class:"divider"}),l("div",{class:"size"},Ule(this.message.size)))),l("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>pE(t,{name:this.message.name,fallbackName:"file"}),part:"button"},l("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t})))))}},Ihe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.image-spinner{cursor:wait}.image-errored{cursor:not-allowed}",t6=class{constructor(t){U(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=N,this.t=j(),this.showBubble=!1,this.status="loading"}render(){return l(O,null,!this.isContinued&&l($h,{name:this.message.displayName,time:this.message.time,now:this.now}),l("div",{class:{body:!0,bubble:this.showBubble},part:"body"},l("div",{class:{image:!0,loaded:this.status==="loaded"}},l("img",{src:uE(this.message.link),onLoad:()=>{this.status="loaded"},onError:()=>{this.status="errored"},onClick:()=>{this.status==="loaded"&&(this.stateUpdate.emit({image:this.message}),L.image=this.message)}}),this.status==="loading"&&l("div",{class:"image-spinner",title:this.t("chat.img.loading"),"aria-label":this.t("chat.img.loading")},l("dyte-spinner",{iconPack:this.iconPack,t:this.t})),this.status==="errored"&&l("div",{class:"image-errored",title:this.t("chat.error.img_not_found"),"aria-label":this.t("chat.error.img_not_found")},l("dyte-icon",{icon:this.iconPack.image_off,iconPack:this.iconPack,t:this.t})),this.status==="loaded"&&l("div",{class:"actions"},l("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>{this.stateUpdate.emit({image:this.message}),L.image=this.message},iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.full_screen_maximize})),l("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>pE(this.message.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t}))))))}};t6.style=Ihe;var Ohe="[object Symbol]";function Mhe(t){return typeof t=="symbol"||Jl(t)&&jh(t)==Ohe}var Dhe=/\s/;function Lhe(t){for(var e=t.length;e--&&Dhe.test(t.charAt(e)););return e}var Nhe=/^\s+/;function Uhe(t){return t&&t.slice(0,Lhe(t)+1).replace(Nhe,"")}var KP=0/0,jhe=/^[-+]0x[0-9a-f]+$/i,$he=/^0b[01]+$/i,zhe=/^0o[0-7]+$/i,Fhe=parseInt;function YP(t){if(typeof t=="number")return t;if(Mhe(t))return KP;if(hn(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=hn(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Uhe(t);var i=$he.test(t);return i||zhe.test(t)?Fhe(t.slice(2),i?2:8):jhe.test(t)?KP:+t}var mb=function(){return Wc.Date.now()},Vhe="Expected a function",Bhe=Math.max,Hhe=Math.min;function Ghe(t,e,i){var r,s,n,a,o,c,d=0,u=!1,p=!1,g=!0;if(typeof t!="function")throw new TypeError(Vhe);e=YP(e)||0,hn(i)&&(u=!!i.leading,p="maxWait"in i,n=p?Bhe(YP(i.maxWait)||0,e):n,g="trailing"in i?!!i.trailing:g);function m(M){var B=r,G=s;return r=s=void 0,d=M,a=t.apply(G,B),a}function f(M){return d=M,o=setTimeout(v,e),u?m(M):a}function b(M){var B=M-c,G=M-d,ne=e-B;return p?Hhe(ne,n-G):ne}function w(M){var B=M-c,G=M-d;return c===void 0||B>=e||B<0||p&&G>=n}function v(){var M=mb();if(w(M))return _(M);o=setTimeout(v,b(M))}function _(M){return o=void 0,g&&r?m(M):(r=s=void 0,a)}function k(){o!==void 0&&clearTimeout(o),d=0,r=c=s=o=void 0}function P(){return o===void 0?a:_(mb())}function D(){var M=mb(),B=w(M);if(r=arguments,s=this,c=M,B){if(o===void 0)return f(c);if(p)return clearTimeout(o),o=setTimeout(v,e),m(c)}return o===void 0&&(o=setTimeout(v,e)),a}return D.cancel=k,D.flush=P,D}const Whe=`.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;flex:1}.container{box-sizing:border-box;display:flex;flex-direction:column-reverse;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll;}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}.smallest-dom-element{width:1px}#top-scroll{transform:translateY(20vh)}#bottom-scroll{transform:translateY(-20vh)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.show-new-messages-ctr{pointer-events:none;position:absolute;bottom:var(--dyte-space-2, 8px);right:var(--dyte-space-4, 16px);z-index:10;margin-top:calc(var(--dyte-space-14, 56px) * -1);--tw-translate-y:var(--dyte-space-28, 112px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages-ctr.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}.show-new-messages{pointer-events:auto;border-radius:9999px}.show-new-messages:hover{border-radius:9999px;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-opacity:1;--tw-ring-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-ring-opacity));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}dyte-spinner,.empty-list{margin:auto}`,i6=class{constructor(t){U(this,t),this.pagesToRender=[[]],this.currentTime=()=>new Date().getTime(),this.observe=e=>{e&&this.intersectionObserver.observe(e)},this.pageSize=void 0,this.pagesAllowed=void 0,this.fetchData=void 0,this.createNodes=void 0,this.selectedItemId=void 0,this.autoScroll=!0,this.iconPack=N,this.t=j(),this.emptyListLabel=null,this.isLoading=!1,this.rerenderBoolean=!1,this.shouldRenderNewNodes=!0,this.hasNewNodesToRender=!1,this.showEmptyListLabel=!1}async onNewNode(t){if(!this.shouldRenderNewNodes){this.hasNewNodesToRender=!0;return}this.addNodeToRender(t,!1),this.rerender()}async onNodeDelete(t){const e=this.pagesToRender.flat().length;this.pagesToRender=this.pagesToRender.map(i=>i.filter(r=>r.id!==t)),e!==this.pagesToRender.flat().length&&this.rerender()}async onNodeUpdate(t,e){let i=!1;this.pagesToRender=this.pagesToRender.map(r=>r.map(s=>s.id===t?(i=!0,e):s)),i&&this.rerender()}onItemChanged(t,e){t!==e&&(this.pagesToRender=[[]],this.loadFirstPage().then(()=>this.rerender()))}connectedCallback(){this.rerender=Ghe(this.rerender.bind(this),50,{maxWait:200}),this.intersectionObserver=new IntersectionObserver(t=>{Li(()=>{for(const e of t)e.target.id==="bottom-scroll"&&(e.isIntersecting?this.loadBottom():this.shouldRenderNewNodes=!1),e.target.id==="top-scroll"&&e.isIntersecting&&this.loadTop()})})}disconnectedCallback(){this.intersectionObserver.disconnect()}componentDidLoad(){this.loadFirstPage(),this.observe(this.$topRef),this.observe(this.$bottomRef)}componentDidRender(){this.shouldRenderNewNodes&&this.autoScroll&&ro(this.$paginatedList)}loadFirstPage(){return this.loadPage(this.currentTime(),this.pageSize,!0,t=>{t.length===0&&(this.showEmptyListLabel=!0)})}loadTop(){if(this.pagesToRender.length===0||this.pagesToRender.length===1&&this.pagesToRender[0].length<this.pageSize)return;const e=this.pagesToRender[0][0].timeMs,i=()=>{};this.loadPage(e-1,this.pageSize,!0,i)}loadBottom(){if(this.pagesToRender.length===0){this.shouldRenderNewNodes=!0;return}if(this.pagesToRender.length===1&&this.pagesToRender[0].length<this.pageSize){this.shouldRenderNewNodes=!0;return}const e=this.pagesToRender.at(-1).at(-1).timeMs,i=()=>ro(this.$paginatedList);this.loadPage(e+1,this.pageSize,!1,i)}addNodeToRender(t,e){if(e){const i=this.pagesToRender[0];if(i&&(i==null?void 0:i.length)<this.pageSize)i.unshift(t);else{const r=[t];this.pagesToRender.unshift(r),this.removeLastPageIfNeeded(!1)}}else{const[i]=this.pagesToRender.slice(-1);if(i&&(i==null?void 0:i.length)<this.pageSize)i.push(t);else{const r=[t];this.pagesToRender.push(r),this.removeLastPageIfNeeded(!0)}}}async loadPage(t,e,i,r=()=>{}){this.isLoading=!0;const s=await this.fetchData(t,e,i);if(this.isLoading=!1,!(s!=null&&s.length)){i||(this.hasNewNodesToRender=!1,this.shouldRenderNewNodes=!0),r([]);return}s.forEach(n=>this.addNodeToRender(n,i)),this.rerender(),r(s)}rerender(){this.rerenderBoolean=!this.rerenderBoolean}removeLastPageIfNeeded(t){this.pagesToRender.length>this.pagesAllowed&&(t?this.pagesToRender.shift():this.pagesToRender.pop())}onDownArrowClicked(){this.loadBottom()}render(){var t;return l(O,null,l("div",{class:"scrollbar container",part:"container",ref:e=>this.$paginatedList=e},l("div",{class:{"show-new-messages-ctr":!0,active:!this.shouldRenderNewNodes}},l("dyte-button",{class:"show-new-messages",kind:"icon",variant:"secondary",part:"show-new-messages",onClick:()=>this.onDownArrowClicked(),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))),l("div",{class:"smallest-dom-element",id:"bottom-scroll",ref:e=>this.$bottomRef=e}),this.isLoading&&this.pagesToRender.flat().length===0&&l("dyte-spinner",{size:"lg"}),this.pagesToRender.flat().length===0&&this.showEmptyListLabel?l("div",{class:"empty-list"},(t=this.emptyListLabel)!==null&&t!==void 0?t:this.t("list.empty")):l("div",{class:"page-wrapper"},this.pagesToRender.map(e=>this.createNodes(e))),l("div",{class:"smallest-dom-element",id:"top-scroll",ref:e=>this.$topRef=e})))}static get watchers(){return{selectedItemId:["onItemChanged"]}}};i6.style=Whe;const qhe=class{constructor(t){U(this,t),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=N,this.t=j(),this.showBubble=!1}render(){return l(O,null,!this.isContinued&&l($h,{name:this.message.displayName,time:this.message.time,now:this.now}),l("div",{class:{body:!0,bubble:this.showBubble},part:"body"},l("div",{class:{text:!0,emoji:$de(this.message.message)}},l(gy,{message:this.message.message}))))}};var Jhe=Object.freeze({__proto__:null,dyte_chat_message:e6,dyte_file_message:Ahe,dyte_image_message:t6,dyte_paginated_list:i6,dyte_text_message:qhe});function mE({osName:t,browserName:e,media:i}){function r(){return i==="audio"?"Microphone":i==="video"?"Camera":"Screenshare"}if(e==="Chrome")return["Open Chrome browser settings by clicking the three dots at the top right.","Select Settings, Under Privacy and Security, click Site Settings, navigate to Permissions.",`Choose ${r()}, provide the appropriate permission and reload this application.`];if(e==="Safari")return["Open Safari browser settings by clicking on Safari > Preferences at the top left.",`Under Websites, select ${r()} from the devices on the left and pick this webiste.`,"Allow permissions from the pop-up menu and reload this application."];if(e.includes("Opera")){let s=[];return t==="macOS"||t==="iOS"?s.push("To open settings, click Opera in the toolbar (top-left) > Preferences."):s.push("To open settings, click the Opera icon (top-left) > Settings."),s=[...s,"Under Privacy and Security, click Site Settings.",`Select ${r()}, enable permissions and reload this application.`],s}if(e==="Firefox"){let s=[];return t==="macOS"||t==="iOS"?s.push("To open settings, at the top right, click Preferneces"):s.push("To open settings, at the top right, click Options"),s=[...s,"Under Privacy and Security, scroll down to the  Permissions  section",`Select Settings for ${r()}`,"Enter the website URL in the search field, enable permissions and reload this application."],s}if(e.includes("Edge"))return["To open settings, at the top right click Settings & More > Settings.",`Under Site Premissions, click ${r()}.`,"Use the drop-down menu and select the default device, allow permission and reload this application."]}function fE({osName:t,media:e}){function i(){return e==="audio"?"Microphone":e==="video"?"Camera":"Screenshare"}return t==="macOS"?[" To give ${getDevice()} access to your browser, choose Apple menu  > System Settings, then click Privacy & Security.",`From the sidebar select ${i()}`,`If you don’t see  ${i()}, upgrade to macOS Mojave or later.`,"Allow access to your browser,","Reload this application."]:t==="iOS"?[`To give ${i()} access to your browser, go to phone Settings > Privacy.`,`Tap on ${i()}. Allow access for your browser.`,"Reload this application."]:t==="Windows"?[`To give ${i()} access to your browser, go to the Start menu on Windows.`,`Select Settings > Privacy > ${i()}`,"Allow permissions and reload this application."]:t.includes("Android")?[`To give ${i()} access to your browser, go to phone Settings > Apps.`,"Select your browser from the list",`Tap Permissions and allow ${i()} permissions.`,"Reload this application."]:[]}function vE({browserName:t,isMobile:e,osName:i}){if(t==="Chrome")return!e&&i==="macOS"?"Desktop_Chrome.mp4":e?i==="iOS"?"Chrome_ios.mp4":"Android_Chrome.mp4":"";if(t==="Firefox")return!e&&i==="macOs"?"Desktop_Firefox.mp4":!e||i==="iOS"?"":"Android_Firefox.mp4";if(t==="Safari")return e?"iOS Safari.mp4":"Desktop_Safari.mp4";if(t.includes("Edge"))return!e&&i==="macOs"?"Desktop_Edge.mp4":"";if(t==="Opera"||t==="Opera")return""}function yE({osName:t}){if(t==="macOS"||t==="iOS"||t==="Windows"||t.includes("Android"))return""}const Khe={ACCEPTED:{info:"Permission granted",icon:"checkmark",text:"Your audio devices, such as microphones and speakers, should work as expected.",steps:()=>[],image:()=>""},SYSTEM_DENIED:{info:"Permission denied by system",icon:"dismiss",text:"Your browser does not have the required permissions to access your microphone",steps:fE,image:yE},DENIED:{info:"Permission denied by browser",icon:"dismiss",text:"We do not have the required permissions to access your microphone",steps:mE,image:vE},COULD_NOT_START:{info:"Could not start device",icon:"dismiss",text:"Access to the microphone may be restricted by a hardware error in the operating system or browser",steps:()=>["Restart your browser.","Update your browser.","If using an external device, try switching to another device.","Switch to a different browser."],image:()=>""},NOT_REQUESTED:{info:"You have not yet used your microphone yet",icon:"warning",text:'We cannot access the data to troubleshoot unless you try to use the microphone at least once. Please click on the "Allow Permissions" button to fix this. Others will not be able to hear you.',steps:()=>[],image:()=>""}},Yhe={ACCEPTED:{info:"Permission granted",icon:"checkmark",text:"Your camera devices should work as expected",steps:()=>[],image:()=>""},SYSTEM_DENIED:{info:"Permission denied by system",icon:"dismiss",text:"Your browser does not have the required permissions to access your camera",steps:fE,image:yE},DENIED:{info:"Permission denied by browser",icon:"dismiss",text:"We do not not have the required permissions to access your camera",steps:mE,image:vE},COULD_NOT_START:{info:"Could not start device",icon:"dismiss",text:"Access to the camera may be restricted by a hardware error in the operating system or browser",steps:()=>["Restart your browser.","Update your browser.","If using an external device, try switching to another device.","Switch to a different browser."],image:()=>""},NOT_REQUESTED:{info:"You have not yet used your camera yet",icon:"warning",text:'We cannot access the data to troubleshoot unless you try to use the camera at least once. Please click on the "Allow Permissions" button to fix this. Others will not be able to see you.',steps:()=>[],image:()=>""}},Qhe={ACCEPTED:{info:"Permission granted",icon:"checkmark",text:"Your screen share should work as expected",steps:()=>[],image:()=>""},SYSTEM_DENIED:{info:"Permission denied by system",icon:"dismiss",text:"Your browser does not have the required permissions to share screen",steps:fE,image:yE},DENIED:{info:"Permission denied by browser",icon:"dismiss",text:"We do not have the required permissions to share screen",steps:mE,image:vE},COULD_NOT_START:{info:"Could not start screenshare",icon:"dismiss",text:"Access for screen share may be restricted by a hardware error in the operating system or browser",steps:()=>["Restart your browser.","Update your browser to the latest version.","Try sharing a tab or window instead of the entire screen.","Switch a different browser."],image:()=>""},NOT_REQUESTED:{info:"You have not yet used shared screen yet",icon:"warning",text:"We cannot access the data to troubleshoot unless you screenshare at least once. You can try screensharing fix this.",steps:()=>[],image:()=>""}},Zhe=[{index:0,value:"Please select an issue",steps:[],troubleshoot:!1},{index:1,value:"Participants can't hear me",steps:["Please make sure that your microphone is unmuted. You can do this by clicking on the mic icon from the control bar.","If using an external device, please make sure that you are sitting close to the microphone."],troubleshoot:!1},{index:2,value:"I can't hear participants",steps:["Please ensure that the window or tab is not muted.","Please ensure that the volume level of your audio device is not set to 0.","Please ensure you are connected to the correct speaker device."],troubleshoot:!1},{index:3,value:"My audio is laggy",steps:["Please ensure that you have a stable internet connection.","Please try switching to a different audio device.","If your network connection is weak, consider disabling your video to improve the audio bandwidth."],troubleshoot:!1},{index:4,value:"My audio is unclear",steps:["Please make sure you are using a good-quality microphone.","Please make sure you are in close proximity to the microphone."],troubleshoot:!1},{index:5,value:"Participant's audio is laggy",steps:["Please ensure that you have a stable internet connection.","Please request the participant to use an alternative audio device.","If your network connection is weak, consider disabling your video to improve the audio bandwidth."],troubleshoot:!1},{index:6,value:"The audio from a participant is not clear",steps:["Please ensure that your system's speaker volume is checked and adjusted if necessary.","Please request the participant to move close to the microphone."],troubleshoot:!1}],Xhe=[{index:0,value:"Please select an issue",steps:[],troubleshoot:!1},{index:1,value:"Participants can't see my video",steps:["Please ensure you have turned on your video from the control bar.","If using an external device, please ensure your device is connected and working properly."],troubleshoot:!1},{index:2,value:"Not able to view participnats video",steps:["Please ensure you have a stable internet connection.","If you have a poor network connection, please try moving closer to the Wi-Fi router."],troubleshoot:!1},{index:3,value:"My video is laggy",steps:["Please ensure that you have a stable internet connection.","Please try switching to a different video device."],troubleshoot:!1},{index:4,value:"My video is unclear",steps:["Please ensure you are not using a faulty device.","Please make sure you are in a well-lit area.","Please ensure you have a stable internet connection."],troubleshoot:!1},{index:5,value:"Participant's video is laggy",steps:["Please ensure you have a stable internet connection.","Please request the participant to use an alternative video device.","If your network connection is weak, consider disabling your video to improve the audio bandwidth."],troubleshoot:!1},{index:6,value:"Participant's video is unclear",steps:["Please ensure you have a stable internet connection.","Please ensure the participant is not using a faulty device.","Please make sure the participant is in a well-lit area."],troubleshoot:!1}],ege=[{index:0,value:"Please select an issue",steps:[],troubleshoot:!1},{index:1,value:"There is a delay in my screen sharing",steps:["Please ensure you have a stable internet connection."],troubleshoot:!1},{index:2,value:"There is a delay in participant's screen share",steps:["Please ensure you have a stable internet connection."],troubleshoot:!1},{index:3,value:"Not able to start or stop screen share",steps:["This error is most likely related to the browser or system you are using. Please ensure that your browser is updated to the latest version.","Please try switching to another browser","Please try sharing a tab or a window incase you are unable to share your entire screen."],troubleshoot:!1},{index:4,value:"Not able to view a participant's screen share",steps:["Please ensure you have a stable internet connection."],troubleshoot:!1}],tge={audio:Khe,video:Yhe,screenshare:Qhe},QP={audio:Zhe,video:Xhe,screenshare:ege},ige=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column;align-items:flex-start;justify-content:flex-start}.section{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start}.title{display:flex;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;flex-direction:row;align-items:center;justify-content:center;font-size:16px;font-weight:700;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.title dyte-icon{margin-right:var(--dyte-space-2, 8px)}.sub-title{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));letter-spacing:0.5px}.text{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.recommendation{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.recommendation div{margin-right:var(--dyte-space-2, 8px)}.device{margin-top:var(--dyte-space-4, 16px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);font-size:12px}select{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0) !important;border-style:none !important;outline:2px solid transparent !important;outline-offset:2px !important}.dyte-select{width:100%;max-width:100%;font-size:14px}.disabled{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.report-link{margin-bottom:var(--dyte-space-2, 8px);margin-top:var(--dyte-space-6, 24px);cursor:pointer;font-size:12px;--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity)) !important;-webkit-text-decoration-line:underline;text-decoration-line:underline}.report-issue{margin-top:var(--dyte-space-2, 8px)}`,r6=class{constructor(t){U(this,t),this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.mediaType=void 0,this.issueIndex=0,this.reported=!0}selectIssue(t){this.issueIndex=parseInt(t),this.reported=!1,setTimeout(()=>{var e;(e=this.reportEl)===null||e===void 0||e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},100)}reportIssue(){const{value:t}=QP[this.mediaType][this.issueIndex];this.meeting.__internals__.logger.info("dyteTroubleshooting::issue",{issue:t}),this.reported=!0,setTimeout(()=>{this.reported=!1},3e3)}render(){var t,e,i,r,s,n,a;const o=(t=QP[this.mediaType])!==null&&t!==void 0?t:[];return l(O,null,l("div",{class:"text"},this.t("Please select a prompt that best describes your issue")),l("select",{class:`dyte-select ${this.issueIndex===0?"disabled":""}`,onChange:c=>this.selectIssue(c.target.value)},o.map(c=>l("option",{value:c.index},l("span",null,c.value)))),((i=(e=o[this.issueIndex])===null||e===void 0?void 0:e.steps)===null||i===void 0?void 0:i.length)>0&&l("div",{class:"sub-title"},this.t("How to fix this:")),(s=(r=o[this.issueIndex])===null||r===void 0?void 0:r.steps)===null||s===void 0?void 0:s.map(c=>l("div",{class:"recommendation"},l("div",null,"•"),this.t(c))),((a=(n=o[this.issueIndex])===null||n===void 0?void 0:n.steps)===null||a===void 0?void 0:a.length)>0&&(this.reported?l("p",{class:"report-link"},this.t("Your issue has been reported.")):l("div",{class:"report-issue"},l("p",{class:"recommendation",ref:c=>this.reportEl=c},this.t("Still facing the issue?")),l("dyte-button",{size:"sm",variant:"secondary",onClick:()=>this.reportIssue()},this.t("Report Now")))))}};r6.style=ige;const rge=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;width:100%}h3{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:14px}.info{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:14px}.info dyte-icon{margin-right:var(--dyte-space-2, 8px)}.text{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:14px;font-weight:100 !important;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.title{display:flex;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;flex-direction:row;align-items:center;justify-content:center;font-size:16px;font-weight:700;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.title dyte-icon{margin-right:var(--dyte-space-2, 8px)}.device-indicator{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:column}.sub-title{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));letter-spacing:0.5px}.recommendation{margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;font-size:12px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.recommendation div{margin-right:var(--dyte-space-2, 8px)}.device{margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;font-size:14px}.device .label{width:var(--dyte-space-32, 128px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.device .seperator{margin-right:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.ACCEPTED{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.NOT_REQUESTED{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.NOT_REQUESTED dyte-icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}.DENIED,.SYSTEM_DENIED,.COULD_NOT_START{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}video{margin-top:var(--dyte-space-2, 8px);height:var(--dyte-space-36, 144px);width:auto;border-radius:var(--dyte-border-radius-md, 8px)}dyte-button{margin-top:var(--dyte-space-2, 8px)}`,s6=class{constructor(t){U(this,t),this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.issueKey=0,this.permission=void 0,this.devices={},this.mediaType=void 0}connectedCallback(){this.permissionUpdate(this.meeting,this.mediaType)}disconnectedCallback(){const{self:t}=this.meeting;t==null||t.removeListener("mediaPermissionUpdate",this.updatePermission)}permissionUpdate(t,e){var i,r;if(!t||!e)return;const{self:s,troubleshoot:n}=t;this.permission=(r=(i=n[e])===null||i===void 0?void 0:i.mediaPermission)!==null&&r!==void 0?r:"NOT_REQUESTED",this.getDevices(),s==null||s.addListener("mediaPermissionUpdate",this.updatePermission.bind(this)),s==null||s.addListener("deviceUpdate",this.deviceUpdateListener.bind(this))}updatePermission({kind:t,message:e}){t===this.mediaType&&(this.permission=e)}async allowPermission(){var t,e;if(this.mediaType==="audio"){const i=(t=this.meeting.troubleshoot)===null||t===void 0?void 0:t.audio;await(i==null?void 0:i.startTrackAnalysis(!0)),i.stopTrackAnalysis()}if(this.mediaType==="video"){const i=(e=this.meeting.troubleshoot)===null||e===void 0?void 0:e.video;await i.startPreview(),i.stopPreview()}}deviceUpdateListener({device:t,preview:e}){e||(t.kind==="audioinput"&&(this.devices=Object.assign(Object.assign({},this.devices),{Microphone:t})),t.kind==="audiooutput"&&(this.devices=Object.assign(Object.assign({},this.devices),{Speaker:t})),t.kind==="videoinput"&&(this.devices=Object.assign(Object.assign({},this.devices),{Camera:t})))}getDevices(){var t,e;const i=(e=(t=this.meeting)===null||t===void 0?void 0:t.self)===null||e===void 0?void 0:e.getCurrentDevices(),r=i==null?void 0:i.audio,s=i==null?void 0:i.speaker,n=i==null?void 0:i.video;r&&(this.devices=Object.assign(Object.assign({},this.devices),{Microphone:r})),s&&(this.devices=Object.assign(Object.assign({},this.devices),{Speaker:s})),n&&(this.devices=Object.assign(Object.assign({},this.devices),{Camera:n}))}render(){var t;const e=(t=tge[this.mediaType])===null||t===void 0?void 0:t[this.permission],{browserName:i,osName:r,isMobile:s}=this.meeting.self.device,n=e.steps({browserName:i,osName:r,media:this.mediaType}),a=e.image({browserName:i,isMobile:s,osName:r}),o=this.mediaType==="audio"?["Microphone","Speaker"]:this.mediaType==="video"?["Camera"]:[];return l(O,null,l("h3",null,"Device Permissions"),l("div",{class:`info ${this.permission}`},l("dyte-icon",{size:"sm",icon:this.iconPack[e.icon]}),e.info),l("div",{class:"text"},e.text),this.permission==="ACCEPTED"&&o.length>0&&l("div",{class:"device-indicator"},o.map(c=>{var d;return l("div",{class:"device"},l("div",{class:"label"},"Active ",c),l("div",{class:"seperator"},":"),l("div",{class:"device-name"},(d=this.devices[c])===null||d===void 0?void 0:d.label))}),l("div",{class:"text"},this.t("You can change the active devices from settings."))),n.length>0&&l("div",{class:"sub-title"},this.t("How to fix this:")),n==null?void 0:n.map(c=>l("div",{class:"recommendation"},l("div",null,"•"),this.t(c))),a!==""&&l("video",{src:`https://cdn.dyte.in/assets/permissions/${a}`,autoPlay:!0,muted:!0,loop:!0}),this.mediaType!=="screenshare"&&this.permission==="NOT_REQUESTED"&&l("dyte-button",{onClick:()=>this.allowPermission()},"Allow Device Permission"))}static get watchers(){return{meeting:["permissionUpdate"],mediaType:["permissionUpdate"]}}};s6.style=rge;const sge=":host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);cursor:pointer}.tooltip-container{position:relative;display:flex;flex-direction:row;align-items:center}.tooltip-container dyte-icon{cursor:pointer;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.tooltip-container dyte-icon:hover+.tooltip{display:flex !important}.tooltip{position:absolute;margin-left:var(--dyte-space-2, 8px);display:none !important;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);font-weight:400;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));z-index:50;display:flex;min-width:var(--dyte-space-60, 240px);flex-direction:column;--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);left:14px}",n6=class{constructor(t){U(this,t),this.iconPack=N}render(){return l(O,null,l("div",{class:"tooltip-container"},l("dyte-icon",{icon:this.iconPack.info,size:"sm"}),l("div",{class:"tooltip"},l("slot",{name:"tootlip-text"}))))}};n6.style=sge;var nge=Object.freeze({__proto__:null,dyte_debugger_issues_ui:r6,dyte_debugger_permissions_ui:s6,dyte_information_tooltip:n6});const age=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);box-sizing:border-box;padding:var(--dyte-space-4, 16px);flex-direction:column;align-items:center;justify-content:center;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / 0.5);color:rgb(var(--dyte-colors-text-1000, 255 255 255));visibility:hidden;display:none;z-index:60;-webkit-backdrop-filter:blur(12px) saturate(180%);backdrop-filter:blur(12px) saturate(180%)}#dialog{position:relative;max-height:100%;max-width:100%}#dismiss-btn{position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);z-index:50}::slotted(*){max-height:100%;max-width:100%}:host([open]){visibility:visible;display:flex}:host([open='false']){visibility:hidden;display:none}",a6=class{constructor(t){U(this,t),this.onClose=K(this,"dyteDialogClose",7),this.close=()=>{this.open=!1,this.onClose.emit()},this.keydownListener=e=>{!this.disableEscapeKey&&e.key==="Escape"&&this.open&&this.close()},this.hideCloseButton=!1,this.disableEscapeKey=!1,this.meeting=void 0,this.config=Me,this.states=void 0,this.size=void 0,this.iconPack=N,this.t=j(),this.open=!0}connectedCallback(){document.addEventListener("keydown",this.keydownListener)}disconnectedCallback(){document.removeEventListener("keydown",this.keydownListener)}render(){return this.open?l(O,null,l("div",{id:"dialog",part:"container"},l("slot",null),!this.hideCloseButton&&l("dyte-button",{part:"close-button",id:"dismiss-btn",kind:"icon",variant:"ghost",onClick:()=>this.close(),iconPack:this.iconPack,t:this.t},l("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))):null}};a6.style=age;var oge=Object.freeze({__proto__:null,dyte_dialog:a6});const cge=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:column;align-items:center;justify-content:center;color:rgb(var(--dyte-colors-text-1000, 255 255 255));height:100%;width:auto}svg,img{height:100%;width:auto}.brand-color{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",o6=class{constructor(t){U(this,t),this.logoUrl=void 0,this.config=Me,this.meeting=void 0,this.t=j()}connectedCallback(){this.configChanged(this.config),this.meetingChanged(this.meeting)}configChanged(t){var e;if(t!=null){const i=(e=t==null?void 0:t.designTokens)===null||e===void 0?void 0:e.logo;i!=null&&this.logoUrl==null&&(this.logoUrl=i)}}meetingChanged(t){var e,i,r,s;if(t!=null){const n=(s=(r=(i=(e=t.self)===null||e===void 0?void 0:e.config)===null||i===void 0?void 0:i.header)===null||r===void 0?void 0:r.elements)===null||s===void 0?void 0:s.logo;n!=null&&this.logoUrl==null&&(this.logoUrl=n)}}render(){if(!this.logoUrl||this.logoUrl==="")return null;const t=this.logoUrl,e=this.t("logo");return l(O,null,l("img",{src:t,alt:e}))}static get watchers(){return{config:["configChanged"],meeting:["meetingChanged"]}}};o6.style=cge;var dge=Object.freeze({__proto__:null,dyte_logo:o6});function zh(t){return t.split("-")[0]}function my(t){return t.split("-")[1]}function Fh(t){return["top","bottom"].includes(zh(t))?"x":"y"}function bE(t){return t==="y"?"height":"width"}function ZP(t,e,i){let{reference:r,floating:s}=t;const n=r.x+r.width/2-s.width/2,a=r.y+r.height/2-s.height/2,o=Fh(e),c=bE(o),d=r[c]/2-s[c]/2,u=zh(e),p=o==="x";let g;switch(u){case"top":g={x:n,y:r.y-s.height};break;case"bottom":g={x:n,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:a};break;case"left":g={x:r.x-s.width,y:a};break;default:g={x:r.x,y:r.y}}switch(my(e)){case"start":g[o]-=d*(i&&p?-1:1);break;case"end":g[o]+=d*(i&&p?-1:1);break}return g}const lge=async(t,e,i)=>{const{placement:r="bottom",strategy:s="absolute",middleware:n=[],platform:a}=i,o=n.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:p}=ZP(d,r,c),g=r,m={},f=0;for(let b=0;b<o.length;b++){const{name:w,fn:v}=o[b],{x:_,y:k,data:P,reset:D}=await v({x:u,y:p,initialPlacement:r,placement:g,strategy:s,middlewareData:m,rects:d,platform:a,elements:{reference:t,floating:e}});if(u=_??u,p=k??p,m={...m,[w]:{...m[w],...P}},D&&f<=50){f++,typeof D=="object"&&(D.placement&&(g=D.placement),D.rects&&(d=D.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):D.rects),{x:u,y:p}=ZP(d,g,c)),b=-1;continue}}return{x:u,y:p,placement:g,strategy:s,middlewareData:m}};function uge(t){return{top:0,right:0,bottom:0,left:0,...t}}function c6(t){return typeof t!="number"?uge(t):{top:t,right:t,bottom:t,left:t}}function sv(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function d6(t,e){var i;e===void 0&&(e={});const{x:r,y:s,platform:n,rects:a,elements:o,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:p="floating",altBoundary:g=!1,padding:m=0}=e,f=c6(m),w=o[g?p==="floating"?"reference":"floating":p],v=sv(await n.getClippingRect({element:(i=await(n.isElement==null?void 0:n.isElement(w)))==null||i?w:w.contextElement||await(n.getDocumentElement==null?void 0:n.getDocumentElement(o.floating)),boundary:d,rootBoundary:u,strategy:c})),_=p==="floating"?{...a.floating,x:r,y:s}:a.reference,k=await(n.getOffsetParent==null?void 0:n.getOffsetParent(o.floating)),P=await(n.isElement==null?void 0:n.isElement(k))?await(n.getScale==null?void 0:n.getScale(k))||{x:1,y:1}:{x:1,y:1},D=sv(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({rect:_,offsetParent:k,strategy:c}):_);return{top:(v.top-D.top+f.top)/P.y,bottom:(D.bottom-v.bottom+f.bottom)/P.y,left:(v.left-D.left+f.left)/P.x,right:(D.right-v.right+f.right)/P.x}}const pge=Math.min,hge=Math.max;function Vw(t,e,i){return hge(t,pge(e,i))}const gge=t=>({name:"arrow",options:t,async fn(e){const{element:i,padding:r=0}=t??{},{x:s,y:n,placement:a,rects:o,platform:c}=e;if(i==null)return{};const d=c6(r),u={x:s,y:n},p=Fh(a),g=bE(p),m=await c.getDimensions(i),f=p==="y"?"top":"left",b=p==="y"?"bottom":"right",w=o.reference[g]+o.reference[p]-u[p]-o.floating[g],v=u[p]-o.reference[p],_=await(c.getOffsetParent==null?void 0:c.getOffsetParent(i));let k=_?p==="y"?_.clientHeight||0:_.clientWidth||0:0;k===0&&(k=o.floating[g]);const P=w/2-v/2,D=d[f],M=k-m[g]-d[b],B=k/2-m[g]/2+P,G=Vw(D,B,M),ie=my(a)!=null&&B!=G&&o.reference[g]/2-(B<D?d[f]:d[b])-m[g]/2<0?B<D?D-B:M-B:0;return{[p]:u[p]-ie,data:{[p]:G,centerOffset:B-G}}}}),mge={left:"right",right:"left",bottom:"top",top:"bottom"};function nv(t){return t.replace(/left|right|bottom|top/g,e=>mge[e])}function fge(t,e,i){i===void 0&&(i=!1);const r=my(t),s=Fh(t),n=bE(s);let a=s==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[n]>e.floating[n]&&(a=nv(a)),{main:a,cross:nv(a)}}const vge={start:"end",end:"start"};function XP(t){return t.replace(/start|end/g,e=>vge[e])}function yge(t){const e=nv(t);return[XP(t),e,XP(e)]}const l6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i;const{placement:r,middlewareData:s,rects:n,initialPlacement:a,platform:o,elements:c}=e,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",flipAlignment:m=!0,...f}=t,b=zh(r),v=p||(b===a||!m?[nv(a)]:yge(a)),_=[a,...v],k=await d6(e,f),P=[];let D=((i=s.flip)==null?void 0:i.overflows)||[];if(d&&P.push(k[b]),u){const{main:ne,cross:ie}=fge(r,n,await(o.isRTL==null?void 0:o.isRTL(c.floating)));P.push(k[ne],k[ie])}if(D=[...D,{placement:r,overflows:P}],!P.every(ne=>ne<=0)){var M,B;const ne=((M=(B=s.flip)==null?void 0:B.index)!=null?M:0)+1,ie=_[ne];if(ie)return{data:{index:ne,overflows:D},reset:{placement:ie}};let oe="bottom";switch(g){case"bestFit":{var G;const Re=(G=D.map(Ke=>[Ke,Ke.overflows.filter(lt=>lt>0).reduce((lt,Jt)=>lt+Jt,0)]).sort((Ke,lt)=>Ke[1]-lt[1])[0])==null?void 0:G[0].placement;Re&&(oe=Re);break}case"initialPlacement":oe=a;break}if(r!==oe)return{reset:{placement:oe}}}return{}}}};async function bge(t,e){const{placement:i,platform:r,elements:s}=t,n=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=zh(i),o=my(i),c=Fh(i)==="x",d=["left","top"].includes(a)?-1:1,u=n&&c?-1:1,p=typeof e=="function"?e(t):e;let{mainAxis:g,crossAxis:m,alignmentAxis:f}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return o&&typeof f=="number"&&(m=o==="end"?f*-1:f),c?{x:m*u,y:g*d}:{x:g*d,y:m*u}}const u6=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:i,y:r}=e,s=await bge(e,t);return{x:i+s.x,y:r+s.y,data:s}}}};function wge(t){return t==="x"?"y":"x"}const p6=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:r,placement:s}=e,{mainAxis:n=!0,crossAxis:a=!1,limiter:o={fn:w=>{let{x:v,y:_}=w;return{x:v,y:_}}},...c}=t,d={x:i,y:r},u=await d6(e,c),p=Fh(zh(s)),g=wge(p);let m=d[p],f=d[g];if(n){const w=p==="y"?"top":"left",v=p==="y"?"bottom":"right",_=m+u[w],k=m-u[v];m=Vw(_,m,k)}if(a){const w=g==="y"?"top":"left",v=g==="y"?"bottom":"right",_=f+u[w],k=f-u[v];f=Vw(_,f,k)}const b=o.fn({...e,[p]:m,[g]:f});return{...b,data:{x:b.x-i,y:b.y-r}}}}};function Yr(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function gn(t){return Yr(t).getComputedStyle(t)}function co(t){return g6(t)?(t.nodeName||"").toLowerCase():""}let zg;function h6(){if(zg)return zg;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(zg=t.brands.map(e=>e.brand+"/"+e.version).join(" "),zg):navigator.userAgent}function ea(t){return t instanceof Yr(t).HTMLElement}function lo(t){return t instanceof Yr(t).Element}function g6(t){return t instanceof Yr(t).Node}function eC(t){if(typeof ShadowRoot>"u")return!1;const e=Yr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function fy(t){const{overflow:e,overflowX:i,overflowY:r,display:s}=gn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+i)&&!["inline","contents"].includes(s)}function _ge(t){return["table","td","th"].includes(co(t))}function wE(t){const e=/firefox/i.test(h6()),i=gn(t),r=i.backdropFilter||i.WebkitBackdropFilter;return i.transform!=="none"||i.perspective!=="none"||(r?r!=="none":!1)||e&&i.willChange==="filter"||e&&(i.filter?i.filter!=="none":!1)||["transform","perspective"].some(s=>i.willChange.includes(s))||["paint","layout","strict","content"].some(s=>{const n=i.contain;return n!=null?n.includes(s):!1})}function m6(){return!/^((?!chrome|android).)*safari/i.test(h6())}function _E(t){return["html","body","#document"].includes(co(t))}const tC=Math.min,Pp=Math.max,av=Math.round;function f6(t){const e=gn(t);let i=parseFloat(e.width),r=parseFloat(e.height);const s=t.offsetWidth,n=t.offsetHeight,a=av(i)!==s||av(r)!==n;return a&&(i=s,r=n),{width:i,height:r,fallback:a}}function v6(t){return lo(t)?t:t.contextElement}const y6={x:1,y:1};function fl(t){const e=v6(t);if(!ea(e))return y6;const i=e.getBoundingClientRect(),{width:r,height:s,fallback:n}=f6(e);let a=(n?av(i.width):i.width)/r,o=(n?av(i.height):i.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}function uh(t,e,i,r){var s,n;e===void 0&&(e=!1),i===void 0&&(i=!1);const a=t.getBoundingClientRect(),o=v6(t);let c=y6;e&&(r?lo(r)&&(c=fl(r)):c=fl(t));const d=o?Yr(o):window,u=!m6()&&i;let p=(a.left+(u&&((s=d.visualViewport)==null?void 0:s.offsetLeft)||0))/c.x,g=(a.top+(u&&((n=d.visualViewport)==null?void 0:n.offsetTop)||0))/c.y,m=a.width/c.x,f=a.height/c.y;if(o){const b=Yr(o),w=r&&lo(r)?Yr(r):r;let v=b.frameElement;for(;v&&r&&w!==b;){const _=fl(v),k=v.getBoundingClientRect(),P=getComputedStyle(v);k.x+=(v.clientLeft+parseFloat(P.paddingLeft))*_.x,k.y+=(v.clientTop+parseFloat(P.paddingTop))*_.y,p*=_.x,g*=_.y,m*=_.x,f*=_.y,p+=k.x,g+=k.y,v=Yr(v).frameElement}}return{width:m,height:f,top:g,right:p+m,bottom:g+f,left:p,x:p,y:g}}function wo(t){return((g6(t)?t.ownerDocument:t.document)||window.document).documentElement}function vy(t){return lo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function b6(t){return uh(wo(t)).left+vy(t).scrollLeft}function Sge(t,e,i){const r=ea(e),s=wo(e),n=uh(t,!0,i==="fixed",e);let a={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if(r||!r&&i!=="fixed")if((co(e)!=="body"||fy(s))&&(a=vy(e)),ea(e)){const c=uh(e,!0);o.x=c.x+e.clientLeft,o.y=c.y+e.clientTop}else s&&(o.x=b6(s));return{x:n.left+a.scrollLeft-o.x,y:n.top+a.scrollTop-o.y,width:n.width,height:n.height}}function ph(t){if(co(t)==="html")return t;const e=t.assignedSlot||t.parentNode||(eC(t)?t.host:null)||wo(t);return eC(e)?e.host:e}function iC(t){return!ea(t)||gn(t).position==="fixed"?null:t.offsetParent}function Ege(t){let e=ph(t);for(;ea(e)&&!_E(e);){if(wE(e))return e;e=ph(e)}return null}function rC(t){const e=Yr(t);let i=iC(t);for(;i&&_ge(i)&&gn(i).position==="static";)i=iC(i);return i&&(co(i)==="html"||co(i)==="body"&&gn(i).position==="static"&&!wE(i))?e:i||Ege(t)||e}function kge(t){return f6(t)}function Tge(t){let{rect:e,offsetParent:i,strategy:r}=t;const s=ea(i),n=wo(i);if(i===n)return e;let a={scrollLeft:0,scrollTop:0},o={x:1,y:1};const c={x:0,y:0};if((s||!s&&r!=="fixed")&&((co(i)!=="body"||fy(n))&&(a=vy(i)),ea(i))){const d=uh(i);o=fl(i),c.x=d.x+i.clientLeft,c.y=d.y+i.clientTop}return{width:e.width*o.x,height:e.height*o.y,x:e.x*o.x-a.scrollLeft*o.x+c.x,y:e.y*o.y-a.scrollTop*o.y+c.y}}function xge(t,e){const i=Yr(t),r=wo(t),s=i.visualViewport;let n=r.clientWidth,a=r.clientHeight,o=0,c=0;if(s){n=s.width,a=s.height;const d=m6();(d||!d&&e==="fixed")&&(o=s.offsetLeft,c=s.offsetTop)}return{width:n,height:a,x:o,y:c}}function Pge(t){var e;const i=wo(t),r=vy(t),s=(e=t.ownerDocument)==null?void 0:e.body,n=Pp(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),a=Pp(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0);let o=-r.scrollLeft+b6(t);const c=-r.scrollTop;return gn(s||i).direction==="rtl"&&(o+=Pp(i.clientWidth,s?s.clientWidth:0)-n),{width:n,height:a,x:o,y:c}}function w6(t){const e=ph(t);return _E(e)?t.ownerDocument.body:ea(e)&&fy(e)?e:w6(e)}function _6(t,e){var i;e===void 0&&(e=[]);const r=w6(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),n=Yr(r);return s?e.concat(n,n.visualViewport||[],fy(r)?r:[]):e.concat(r,_6(r))}function Cge(t,e){const i=uh(t,!0,e==="fixed"),r=i.top+t.clientTop,s=i.left+t.clientLeft,n=ea(t)?fl(t):{x:1,y:1},a=t.clientWidth*n.x,o=t.clientHeight*n.y,c=s*n.x,d=r*n.y;return{top:d,left:c,right:c+a,bottom:d+o,x:c,y:d,width:a,height:o}}function sC(t,e,i){return e==="viewport"?sv(xge(t,i)):lo(e)?Cge(e,i):sv(Pge(wo(t)))}function Rge(t,e){const i=e.get(t);if(i)return i;let r=_6(t).filter(o=>lo(o)&&co(o)!=="body"),s=null;const n=gn(t).position==="fixed";let a=n?ph(t):t;for(;lo(a)&&!_E(a);){const o=gn(a),c=wE(a);(n?!c&&!s:!c&&o.position==="static"&&!!s&&["absolute","fixed"].includes(s.position))?r=r.filter(u=>u!==a):s=o,a=ph(a)}return e.set(t,r),r}function Age(t){let{element:e,boundary:i,rootBoundary:r,strategy:s}=t;const a=[...i==="clippingAncestors"?Rge(e,this._c):[].concat(i),r],o=a[0],c=a.reduce((d,u)=>{const p=sC(e,u,s);return d.top=Pp(p.top,d.top),d.right=tC(p.right,d.right),d.bottom=tC(p.bottom,d.bottom),d.left=Pp(p.left,d.left),d},sC(e,o,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}const Ige={getClippingRect:Age,convertOffsetParentRelativeRectToViewportRelativeRect:Tge,isElement:lo,getDimensions:kge,getOffsetParent:rC,getDocumentElement:wo,getScale:fl,async getElementRects(t){let{reference:e,floating:i,strategy:r}=t;const s=this.getOffsetParent||rC,n=this.getDimensions;return{reference:Sge(e,await s(i),r),floating:{x:0,y:0,...await n(i)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>gn(t).direction==="rtl"},S6=(t,e,i)=>{const r=new Map,s={platform:Ige,...i},n={...s.platform,_c:r};return lge(t,e,{...s,platform:n})},Oge=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:inline-block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#menu-list{position:absolute;z-index:20;display:none}",E6=class{constructor(e){U(this,e),this.clickedThis=!1,this.handleOutsideClick=()=>{this.clickedThis||(this.menuListEl.style.display="none"),this.clickedThis=!1},this.size=void 0,this.placement="bottom-end",this.iconPack=N,this.t=j()}componentDidLoad(){document.addEventListener("click",this.handleOutsideClick),this.update()}disconnectedCallback(){document.removeEventListener("click",this.handleOutsideClick)}update(){S6(this.triggerEl,this.menuListEl,{placement:this.placement,middleware:[u6(10),l6(),p6({padding:5})]}).then(({x:e,y:i})=>{Object.assign(this.menuListEl.style,{left:`${e}px`,top:`${i}px`})})}render(){return l(O,null,l("span",{id:"trigger",ref:e=>this.triggerEl=e,onClick:()=>{this.clickedThis=!0,this.menuListEl.style.display!=="block"?(this.menuListEl.style.display="block",this.update()):this.menuListEl.style.display="none"}},l("slot",{name:"trigger"})),l("span",{part:"menu-list",id:"menu-list",ref:e=>this.menuListEl=e},l("slot",null)))}};E6.style=Oge;const Mge=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px}::slotted([slot='start']){margin-right:var(--dyte-space-2, 8px)}::slotted([slot='end']){margin-left:var(--dyte-space-2, 8px)}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host(.red){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",k6=class{constructor(t){U(this,t),this.size=void 0,this.iconPack=N,this.t=j()}render(){return l(O,null,l("slot",{name:"start"}),l("slot",null),l("slot",{name:"end"}))}};k6.style=Mge;const Dge=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:-webkit-max-content;width:-moz-max-content;width:max-content;flex-direction:column;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;border-radius:var(--dyte-border-radius-sm, 4px);--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}",T6=class{constructor(t){U(this,t),this.iconPack=N,this.t=j()}render(){return l(O,null,l("slot",null))}};T6.style=Dge;var Lge=Object.freeze({__proto__:null,dyte_menu:E6,dyte_menu_item:k6,dyte_menu_list:T6});const Nge=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:var(--dyte-space-32, 128px);width:var(--dyte-space-32, 128px);align-items:center;justify-content:center;font-size:28px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:9999px}dyte-icon{height:50%;width:50%}.image-ctr{display:flex;height:100%;width:100%;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}img{height:var(--dyte-space-0, 0px);width:var(--dyte-space-0, 0px);-o-object-fit:cover;object-fit:cover}img.loaded{height:100%;width:100%}.initials{display:flex;height:100%;width:100%;align-items:center;justify-content:center;text-transform:uppercase}.image{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.image img{display:none;height:100%;width:100%;-o-object-fit:cover;object-fit:cover}.image img.loaded{display:block}:host([variant='hexagon']){border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:polygon(50% 0, 95% 25%, 95% 75%, 50% 100%, 5% 75%, 5% 25%);clip-path:polygon(50% 0, 95% 25%, 95% 75%, 50% 100%, 5% 75%, 5% 25%)}:host([variant='square']){border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);clip-path:polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)}:host([size='sm']){height:var(--dyte-space-14, 56px);width:var(--dyte-space-14, 56px);font-size:12px}:host([size='md']){height:var(--dyte-space-28, 112px);width:var(--dyte-space-28, 112px)}:host([size='lg']){height:var(--dyte-space-32, 128px);width:var(--dyte-space-32, 128px)}",x6=class{constructor(t){U(this,t),this.getAvatar=()=>{var e;const i=es(((e=this.participant)===null||e===void 0?void 0:e.name)||"");let r;if(this.participant!=null&&"picture"in this.participant&&(r=this.participant.picture),r&&r.length>0&&this.imageState!=="errored")return l("div",{class:"image-ctr"},this.imageState==="loading"&&l("dyte-spinner",{iconPack:this.iconPack,t:this.t}),l("img",{src:r,class:{loaded:this.imageState==="loaded"},loading:"lazy",title:i,onLoad:()=>this.imageState="loaded",onError:()=>this.imageState="errored",part:"image"}));const s=G3(i);return l("div",{class:"initials",title:i,part:"initials"},s)},this.participant=void 0,this.variant="circular",this.size=void 0,this.iconPack=N,this.t=j(),this.imageState="loading"}render(){return l(O,null,this.getAvatar(),l("slot",null))}};x6.style=Nge;var Uge=Object.freeze({__proto__:null,dyte_avatar:x6});const jge=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--background-color:var(
    --dyte-controlbar-button-background-color,
    rgb(var(--dyte-colors-background-1000, 8 8 8))
  );--icon-size:var(--dyte-controlbar-button-icon-size, var(--dyte-space-7, 28px));--button-spacing:var(--dyte-controlbar-button-spacing, var(--dyte-space-1, 4px));position:relative;box-sizing:border-box;display:inline-flex;outline:2px solid transparent !important;outline-offset:2px !important;margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-0\\.5, 2px);height:100%;width:auto;min-width:var(--dyte-space-20, 80px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;color:rgb(var(--dyte-colors-text-1000, 255 255 255));border:var(--dyte-border-width-md, 2px) solid transparent;background-color:var(--background-color)}button{padding:var(--dyte-space-1, 4px)}:host(.red-icon) #icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([disabled]){color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}button{box-sizing:border-box;display:inline-flex;height:100%;width:100%;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;color:inherit;outline:2px solid transparent;outline-offset:2px}.label{text-align:center;font-size:12px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}#warning-indicator{position:absolute;top:var(--dyte-space-1, 4px);right:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}:host([size='sm']) #warning-indicator{right:var(--dyte-space-0, 0px);top:var(--dyte-space-0, 0px);height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}#icon{margin-bottom:var(--button-spacing);width:var(--icon-size);height:var(--icon-size)}:host([size='sm']),:host([variant='horizontal']){--button-spacing:0px}:host(.leave:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity));border:var(--dyte-border-width-md, 2px) solid rgb(var(--dyte-colors-danger, 255 45 45))}:host(.active){--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-text-opacity));border:var(--dyte-border-width-md, 2px) solid rgb(var(--dyte-colors-brand-400, 53 110 253))}:host(.active-livestream){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([size='sm']){margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);min-width:var(--dyte-space-14, 56px)}:host([size='sm']) .label{display:none}:host([variant='horizontal']){margin:var(--dyte-space-0, 0px);height:var(--dyte-space-12, 48px);width:100%;padding-left:var(--dyte-space-5, 20px);padding-right:var(--dyte-space-5, 20px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px)}:host([variant='horizontal']) button{flex-direction:row;justify-content:flex-start}:host([variant='horizontal']) #icon{margin-right:var(--dyte-space-3, 12px);width:var(--dyte-space-6, 24px)}:host([variant='horizontal']) .label{display:block;font-size:14px;line-height:1.25rem}:host([variant='horizontal']) #warning-indicator{right:auto;left:var(--dyte-space-4, 16px)}:host([brand-icon]) dyte-icon#icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}@media only screen and (max-device-height: 480px) and (orientation: landscape){:host{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host .label{display:none}:slotted(dyte-icon){height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}}`,P6=class{constructor(t){U(this,t),this.variant="button",this.showWarning=!1,this.size=void 0,this.label=void 0,this.icon=void 0,this.isLoading=void 0,this.disabled=!1,this.iconPack=N,this.t=j(),this.brandIcon=!1}render(){return l(O,null,l("button",{"aria-label":this.label,part:"button"},this.isLoading?l("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t}):l("dyte-icon",{id:"icon",icon:this.icon,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),l("span",{class:"label",part:"label"},this.label),this.showWarning&&l("dyte-icon",{id:"warning-indicator",icon:this.iconPack.warning,part:"warning-indicator",iconPack:this.iconPack,t:this.t})))}};P6.style=jge;var $ge=Object.freeze({__proto__:null,dyte_controlbar_button:P6});const zge=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--background-color:var(--dyte-tooltip-background-color, rgb(var(--dyte-colors-background-600, 60 60 60)));--color:var(--dyte-tooltip-color, rgb(var(--dyte-colors-text-1000, 255 255 255)));display:inline-flex}#trigger{display:block;width:100%;flex:1 1 0%}.tooltip{max-width:var(--dyte-space-64, 256px);position:fixed;z-index:20;display:none;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);font-size:12px}.tooltip,#arrow{position:absolute;background-color:var(--background-color);color:var(--color)}#arrow{position:absolute;height:var(--dyte-space-2, 8px);width:var(--dyte-space-2, 8px);transform:rotate(45deg)}:host([variant='primary']){--background-color:rgb(var(--dyte-colors-brand-500, 33 96 253));--color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}:host([kind='block']){display:block}",C6=class{constructor(t){U(this,t),this.dyteOpenChange=K(this,"dyteOpenChange",7),this.showMenu=()=>{this.disabled||(this.isInFocus=!0,setTimeout(()=>{this.isInFocus&&(this.tooltipEl.style.display="block",this.update(),this.dyteOpenChange.emit(!0),this.size==="sm"&&setTimeout(()=>{this.isInFocus&&this.hideMenu()},1e3))},this.delay))},this.hideMenu=()=>{this.open||this.disabled||(this.isInFocus=!1,this.tooltipEl.style.display="none",this.dyteOpenChange.emit(!1))},this.label="",this.variant="secondary",this.disabled=!1,this.open=!1,this.kind="inline",this.size=void 0,this.placement="top",this.delay=0,this.iconPack=N,this.t=j(),this.isInFocus=!1}componentDidLoad(){this.triggerEl.addEventListener("focusin",this.showMenu),this.triggerEl.addEventListener("mouseenter",this.showMenu),this.triggerEl.addEventListener("focusout",this.hideMenu),this.triggerEl.addEventListener("mouseleave",this.hideMenu),Li(()=>{this.openChanged(this.open)})}openChanged(t){t?this.showMenu():this.hideMenu()}update(){S6(this.triggerEl,this.tooltipEl,{placement:this.placement,middleware:[u6(8),l6(),p6({padding:5}),gge({element:this.arrowEl})]}).then(({x:t,y:e,placement:i,middlewareData:r})=>{Object.assign(this.tooltipEl.style,{left:`${t}px`,top:`${e}px`});const{x:s,y:n}=r.arrow,a={top:"bottom",right:"left",bottom:"top",left:"right"}[i.split("-")[0]];Object.assign(this.arrowEl.style,{left:s!=null?`${s}px`:"",top:n!=null?`${n}px`:"",right:"",bottom:"",[a]:"-4px"})})}render(){return l(O,null,l("span",{part:"trigger",id:"trigger",ref:t=>this.triggerEl=t},l("slot",null)),l("div",{part:"tooltip",class:"tooltip",id:"tooltip",role:"tooltip",ref:t=>this.tooltipEl=t},l("div",{id:"arrow",ref:t=>this.arrowEl=t,part:"arrow"}),this.label,l("slot",{name:"tooltip"})))}static get watchers(){return{open:["openChanged"]}}};C6.style=zge;var Fge=Object.freeze({__proto__:null,dyte_tooltip:C6});const Vge=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:block;height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px);--dyte-spinner-color:currentColor}.spinner{height:100%;width:100%}@-webkit-keyframes spin{to{transform:rotate(360deg)}}@keyframes spin{to{transform:rotate(360deg)}}.spinner{-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite;border-radius:9999px;background-color:transparent;-webkit-animation-duration:1.3s;animation-duration:1.3s}:host([size='md']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",R6=class{constructor(t){U(this,t),this.iconPack=N,this.size="md",this.t=j()}render(){return l(O,null,l("dyte-icon",{class:"spinner",icon:this.iconPack.spinner,iconPack:this.iconPack,t:this.t}))}};R6.style=Vge;var Bge=Object.freeze({__proto__:null,dyte_spinner:R6});const Hge=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--icon-size:var(--dyte-button-icon-size, var(--dyte-space-5, 20px));--transition-property:var(--dyte-transition-property, all);--transition-duration:100ms;display:inline-flex;height:var(--dyte-space-8, 32px);cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px;-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-sm, 4px);transition-property:var(--transition-property);transition-duration:var(--transition-duration)}button{box-sizing:border-box;background-color:transparent;color:inherit;border:var(--dyte-border-width-sm, 1px) solid transparent;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);display:inline-flex;flex-grow:1;justify-content:center;vertical-align:baseline;gap:var(--dyte-space-1, 4px);transition-property:var(--transition-property);transition-duration:var(--transition-duration);outline:none;height:inherit;border-radius:inherit;fill:inherit;cursor:inherit;font-weight:inherit;font-family:inherit;font-size:inherit;line-height:inherit}.start,.content,.end{align-self:center}::slotted(dyte-icon),::slotted(dyte-spinner){height:var(--icon-size);width:var(--icon-size)}:host([variant='primary']){color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-bg-opacity))}button:focus-visible{border-color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host(:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-700, 2 70 253) / var(--tw-bg-opacity))}:host([disabled]){cursor:not-allowed;opacity:0.6}:host([variant='secondary']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='secondary']:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='secondary']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([variant='danger']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}:host([variant='danger']:hover){background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.7)}:host([variant='danger']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}:host([variant='ghost']){background-color:transparent;color:inherit}:host([variant='ghost'].active){--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}:host([variant='ghost']:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='ghost']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([kind='icon']){--icon-size:var(--dyte-space-5, 20px);width:var(--dyte-space-8, 32px)}:host([kind='icon']) button{padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px)}:host([kind='wide']){width:100%}:host([size='lg']){--icon-size:var(--dyte-space-5, 20px);height:var(--dyte-space-10, 40px);font-size:16px}:host([size='lg'][kind='icon']){--icon-size:var(--dyte-space-6, 24px);height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px)}:host([size='sm']){--icon-size:var(--dyte-space-4, 16px);height:var(--dyte-space-6, 24px);font-size:12px}:host([size='sm'][kind='icon']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}",A6=class{constructor(t){U(this,t),this.size=void 0,this.variant="primary",this.kind="button",this.reverse=!1,this.disabled=!1,this.iconPack=N,this.t=j()}render(){return l(O,null,l("button",{part:"button"},l("span",{class:"start"},l("slot",{name:"start"})),l("span",{class:"content",part:"content"},l("slot",null)),l("span",{class:"end"},l("slot",{name:"end"}))))}};A6.style=Hge;var Gge=Object.freeze({__proto__:null,dyte_button:A6});const Wge=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:var(--dyte-space-10, 40px);outline:2px solid transparent;outline-offset:2px}:host .icon-wrapper{display:flex;height:100%;width:100%;flex-direction:column;align-items:center}:host svg{height:100%;width:100%;outline:2px solid transparent;outline-offset:2px}:host([size='md']){box-sizing:border-box;display:block;height:var(--dyte-space-6, 24px) !important;width:var(--dyte-space-6, 24px) !important;--dyte-spinner-color:currentColor}:host([size='sm']){box-sizing:border-box;display:block;height:var(--dyte-space-4, 16px) !important;width:var(--dyte-space-4, 16px) !important;--dyte-spinner-color:currentColor}",qge=t=>{try{return JSON.parse(t)}catch{return t}},I6=class{constructor(t){U(this,t),this.icon=void 0,this.iconPack=N,this.t=j(),this.size="lg"}render(){return l(O,null,l("div",{class:"icon-wrapper",innerHTML:qge(this.icon),part:"wrapper"}))}};I6.style=Wge;var Jge=Object.freeze({__proto__:null,dyte_icon:I6});(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();Xne();const Kge=gne("dyte-meeting");var O6=typeof global=="object"&&global&&global.Object===Object&&global,Yge=typeof self=="object"&&self&&self.Object===Object&&self,Zl=O6||Yge||Function("return this")(),ov=Zl.Symbol,M6=Object.prototype,Qge=M6.hasOwnProperty,Zge=M6.toString,ju=ov?ov.toStringTag:void 0;function Xge(t){var e=Qge.call(t,ju),i=t[ju];try{t[ju]=void 0;var r=!0}catch{}var s=Zge.call(t);return r&&(e?t[ju]=i:delete t[ju]),s}var eme=Object.prototype,tme=eme.toString;function ime(t){return tme.call(t)}var rme="[object Null]",sme="[object Undefined]",nC=ov?ov.toStringTag:void 0;function yy(t){return t==null?t===void 0?sme:rme:nC&&nC in Object(t)?Xge(t):ime(t)}function qc(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Vh(t){return t!=null&&typeof t=="object"}var aC;(function(t){t.CAMERA="CAMERA",t.MIC="MIC",t.END="END"})(aC||(aC={}));var oC;(function(t){t.BUFFERING="Buffering",t.ENDED="Ended",t.IDLE="Idle",t.PLAYING="Playing",t.READY="Ready"})(oC||(oC={}));var Di;(function(t){t.INITIALIZED="PlayerInitialized",t.QUALITY_CHANGED="PlayerQualityChanged",t.DURATION_CHANGED="PlayerDurationChanged",t.VOLUME_CHANGED="PlayerVolumeChanged",t.MUTED_CHANGED="PlayerMutedChanged",t.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",t.REBUFFERING="PlayerRebuffering",t.AUDIO_BLOCKED="PlayerAudioBlocked",t.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",t.ERROR="PlayerError",t.RECOVERABLE_ERROR="PlayerRecoverableError",t.ANALYTICS_EVENT="PlayerAnalyticsEvent",t.TIME_UPDATE="PlayerTimeUpdate",t.BUFFER_UPDATE="PlayerBufferUpdate",t.SEEK_COMPLETED="PlayerSeekCompleted",t.SESSION_DATA="PlayerSessionData",t.STATE_CHANGED="PlayerStateChanged",t.WORKER_ERROR="PlayerWorkerError",t.METADATA="PlayerMetadata",t.TEXT_CUE="PlayerTextCue",t.TEXT_METADATA_CUE="PlayerTextMetadataCue",t.AD_CUE="PlayerAdCue",t.STREAM_SOURCE_CUE="PlayerStreamSourceCue",t.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",t.SEGMENT_DISCONTINUITY="PlayerSegmentDiscontinuity",t.SEGMENT_METADATA="PlayerSegmentMetadata",t.PLAYER_METADATA="PlayerMetadata"})(Di||(Di={}));Di.TIME_UPDATE,Di.BUFFER_UPDATE,Di.TEXT_METADATA_CUE,Di.PLAYER_METADATA;Di.REBUFFERING,Di.AUDIO_BLOCKED,Di.PLAYBACK_BLOCKED,Di.ERROR,Di.RECOVERABLE_ERROR,Di.WORKER_ERROR,Di.NETWORK_UNAVAILABLE,Di.ANALYTICS_EVENT,Di.PLAYBACK_RATE_CHANGED,Di.QUALITY_CHANGED,Di.INITIALIZED;function nme(){this.__data__=[],this.size=0}function by(t,e){return t===e||t!==t&&e!==e}function wy(t,e){for(var i=t.length;i--;)if(by(t[i][0],e))return i;return-1}var ame=Array.prototype,ome=ame.splice;function cme(t){var e=this.__data__,i=wy(e,t);if(i<0)return!1;var r=e.length-1;return i==r?e.pop():ome.call(e,i,1),--this.size,!0}function dme(t){var e=this.__data__,i=wy(e,t);return i<0?void 0:e[i][1]}function lme(t){return wy(this.__data__,t)>-1}function ume(t,e){var i=this.__data__,r=wy(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this}function oa(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}oa.prototype.clear=nme;oa.prototype.delete=cme;oa.prototype.get=dme;oa.prototype.has=lme;oa.prototype.set=ume;function pme(){this.__data__=new oa,this.size=0}function hme(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function gme(t){return this.__data__.get(t)}function mme(t){return this.__data__.has(t)}var fme="[object AsyncFunction]",vme="[object Function]",yme="[object GeneratorFunction]",bme="[object Proxy]";function SE(t){if(!qc(t))return!1;var e=yy(t);return e==vme||e==yme||e==fme||e==bme}var fb=Zl["__core-js_shared__"],cC=function(){var t=/[^.]+$/.exec(fb&&fb.keys&&fb.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function wme(t){return!!cC&&cC in t}var _me=Function.prototype,Sme=_me.toString;function Eme(t){if(t!=null){try{return Sme.call(t)}catch{}try{return t+""}catch{}}return""}var kme=/[\\^$.*+?()[\]{}|]/g,Tme=/^\[object .+?Constructor\]$/,xme=Function.prototype,Pme=Object.prototype,Cme=xme.toString,Rme=Pme.hasOwnProperty,Ame=RegExp("^"+Cme.call(Rme).replace(kme,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ime(t){if(!qc(t)||wme(t))return!1;var e=SE(t)?Ame:Tme;return e.test(Eme(t))}function Ome(t,e){return t==null?void 0:t[e]}function EE(t,e){var i=Ome(t,e);return Ime(i)?i:void 0}var D6=EE(Zl,"Map"),hh=EE(Object,"create");function Mme(){this.__data__=hh?hh(null):{},this.size=0}function Dme(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Lme="__lodash_hash_undefined__",Nme=Object.prototype,Ume=Nme.hasOwnProperty;function jme(t){var e=this.__data__;if(hh){var i=e[t];return i===Lme?void 0:i}return Ume.call(e,t)?e[t]:void 0}var $me=Object.prototype,zme=$me.hasOwnProperty;function Fme(t){var e=this.__data__;return hh?e[t]!==void 0:zme.call(e,t)}var Vme="__lodash_hash_undefined__";function Bme(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=hh&&e===void 0?Vme:e,this}function Lc(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}Lc.prototype.clear=Mme;Lc.prototype.delete=Dme;Lc.prototype.get=jme;Lc.prototype.has=Fme;Lc.prototype.set=Bme;function Hme(){this.size=0,this.__data__={hash:new Lc,map:new(D6||oa),string:new Lc}}function Gme(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function _y(t,e){var i=t.__data__;return Gme(e)?i[typeof e=="string"?"string":"hash"]:i.map}function Wme(t){var e=_y(this,t).delete(t);return this.size-=e?1:0,e}function qme(t){return _y(this,t).get(t)}function Jme(t){return _y(this,t).has(t)}function Kme(t,e){var i=_y(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this}function Xl(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}Xl.prototype.clear=Hme;Xl.prototype.delete=Wme;Xl.prototype.get=qme;Xl.prototype.has=Jme;Xl.prototype.set=Kme;var Yme=200;function Qme(t,e){var i=this.__data__;if(i instanceof oa){var r=i.__data__;if(!D6||r.length<Yme-1)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new Xl(r)}return i.set(t,e),this.size=i.size,this}function eu(t){var e=this.__data__=new oa(t);this.size=e.size}eu.prototype.clear=pme;eu.prototype.delete=hme;eu.prototype.get=gme;eu.prototype.has=mme;eu.prototype.set=Qme;var cv=function(){try{var t=EE(Object,"defineProperty");return t({},"",{}),t}catch{}}();function kE(t,e,i){e=="__proto__"&&cv?cv(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function Bw(t,e,i){(i!==void 0&&!by(t[e],i)||i===void 0&&!(e in t))&&kE(t,e,i)}function Zme(t){return function(e,i,r){for(var s=-1,n=Object(e),a=r(e),o=a.length;o--;){var c=a[t?o:++s];if(i(n[c],c,n)===!1)break}return e}}var Xme=Zme(),L6=typeof De=="object"&&De&&!De.nodeType&&De,dC=L6&&typeof Le=="object"&&Le&&!Le.nodeType&&Le,efe=dC&&dC.exports===L6,lC=efe?Zl.Buffer:void 0,uC=lC?lC.allocUnsafe:void 0;function tfe(t,e){if(e)return t.slice();var i=t.length,r=uC?uC(i):new t.constructor(i);return t.copy(r),r}var pC=Zl.Uint8Array;function ife(t){var e=new t.constructor(t.byteLength);return new pC(e).set(new pC(t)),e}function rfe(t,e){var i=e?ife(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function sfe(t,e){var i=-1,r=t.length;for(e||(e=Array(r));++i<r;)e[i]=t[i];return e}var hC=Object.create,nfe=function(){function t(){}return function(e){if(!qc(e))return{};if(hC)return hC(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function afe(t,e){return function(i){return t(e(i))}}var N6=afe(Object.getPrototypeOf,Object),ofe=Object.prototype;function U6(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||ofe;return t===i}function cfe(t){return typeof t.constructor=="function"&&!U6(t)?nfe(N6(t)):{}}var dfe="[object Arguments]";function gC(t){return Vh(t)&&yy(t)==dfe}var j6=Object.prototype,lfe=j6.hasOwnProperty,ufe=j6.propertyIsEnumerable,Hw=gC(function(){return arguments}())?gC:function(t){return Vh(t)&&lfe.call(t,"callee")&&!ufe.call(t,"callee")},Gw=Array.isArray,pfe=9007199254740991;function $6(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=pfe}function TE(t){return t!=null&&$6(t.length)&&!SE(t)}function hfe(t){return Vh(t)&&TE(t)}function gfe(){return!1}var z6=typeof De=="object"&&De&&!De.nodeType&&De,mC=z6&&typeof Le=="object"&&Le&&!Le.nodeType&&Le,mfe=mC&&mC.exports===z6,fC=mfe?Zl.Buffer:void 0,ffe=fC?fC.isBuffer:void 0,F6=ffe||gfe,vfe="[object Object]",yfe=Function.prototype,bfe=Object.prototype,V6=yfe.toString,wfe=bfe.hasOwnProperty,_fe=V6.call(Object);function Sfe(t){if(!Vh(t)||yy(t)!=vfe)return!1;var e=N6(t);if(e===null)return!0;var i=wfe.call(e,"constructor")&&e.constructor;return typeof i=="function"&&i instanceof i&&V6.call(i)==_fe}var Efe="[object Arguments]",kfe="[object Array]",Tfe="[object Boolean]",xfe="[object Date]",Pfe="[object Error]",Cfe="[object Function]",Rfe="[object Map]",Afe="[object Number]",Ife="[object Object]",Ofe="[object RegExp]",Mfe="[object Set]",Dfe="[object String]",Lfe="[object WeakMap]",Nfe="[object ArrayBuffer]",Ufe="[object DataView]",jfe="[object Float32Array]",$fe="[object Float64Array]",zfe="[object Int8Array]",Ffe="[object Int16Array]",Vfe="[object Int32Array]",Bfe="[object Uint8Array]",Hfe="[object Uint8ClampedArray]",Gfe="[object Uint16Array]",Wfe="[object Uint32Array]",wt={};wt[jfe]=wt[$fe]=wt[zfe]=wt[Ffe]=wt[Vfe]=wt[Bfe]=wt[Hfe]=wt[Gfe]=wt[Wfe]=!0;wt[Efe]=wt[kfe]=wt[Nfe]=wt[Tfe]=wt[Ufe]=wt[xfe]=wt[Pfe]=wt[Cfe]=wt[Rfe]=wt[Afe]=wt[Ife]=wt[Ofe]=wt[Mfe]=wt[Dfe]=wt[Lfe]=!1;function qfe(t){return Vh(t)&&$6(t.length)&&!!wt[yy(t)]}function Jfe(t){return function(e){return t(e)}}var B6=typeof De=="object"&&De&&!De.nodeType&&De,Cp=B6&&typeof Le=="object"&&Le&&!Le.nodeType&&Le,Kfe=Cp&&Cp.exports===B6,vb=Kfe&&O6.process,vC=function(){try{var t=Cp&&Cp.require&&Cp.require("util").types;return t||vb&&vb.binding&&vb.binding("util")}catch{}}(),yC=vC&&vC.isTypedArray,H6=yC?Jfe(yC):qfe;function Ww(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Yfe=Object.prototype,Qfe=Yfe.hasOwnProperty;function Zfe(t,e,i){var r=t[e];(!(Qfe.call(t,e)&&by(r,i))||i===void 0&&!(e in t))&&kE(t,e,i)}function Xfe(t,e,i,r){var s=!i;i||(i={});for(var n=-1,a=e.length;++n<a;){var o=e[n],c=r?r(i[o],t[o],o,i,t):void 0;c===void 0&&(c=t[o]),s?kE(i,o,c):Zfe(i,o,c)}return i}function eve(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}var tve=9007199254740991,ive=/^(?:0|[1-9]\d*)$/;function G6(t,e){var i=typeof t;return e=e??tve,!!e&&(i=="number"||i!="symbol"&&ive.test(t))&&t>-1&&t%1==0&&t<e}var rve=Object.prototype,sve=rve.hasOwnProperty;function nve(t,e){var i=Gw(t),r=!i&&Hw(t),s=!i&&!r&&F6(t),n=!i&&!r&&!s&&H6(t),a=i||r||s||n,o=a?eve(t.length,String):[],c=o.length;for(var d in t)(e||sve.call(t,d))&&!(a&&(d=="length"||s&&(d=="offset"||d=="parent")||n&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||G6(d,c)))&&o.push(d);return o}function ave(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}var ove=Object.prototype,cve=ove.hasOwnProperty;function dve(t){if(!qc(t))return ave(t);var e=U6(t),i=[];for(var r in t)r=="constructor"&&(e||!cve.call(t,r))||i.push(r);return i}function W6(t){return TE(t)?nve(t,!0):dve(t)}function lve(t){return Xfe(t,W6(t))}function uve(t,e,i,r,s,n,a){var o=Ww(t,i),c=Ww(e,i),d=a.get(c);if(d){Bw(t,i,d);return}var u=n?n(o,c,i+"",t,e,a):void 0,p=u===void 0;if(p){var g=Gw(c),m=!g&&F6(c),f=!g&&!m&&H6(c);u=c,g||m||f?Gw(o)?u=o:hfe(o)?u=sfe(o):m?(p=!1,u=tfe(c,!0)):f?(p=!1,u=rfe(c,!0)):u=[]:Sfe(c)||Hw(c)?(u=o,Hw(o)?u=lve(o):(!qc(o)||SE(o))&&(u=cfe(c))):p=!1}p&&(a.set(c,u),s(u,c,r,n,a),a.delete(c)),Bw(t,i,u)}function q6(t,e,i,r,s){t!==e&&Xme(e,function(n,a){if(s||(s=new eu),qc(n))uve(t,e,a,i,q6,r,s);else{var o=r?r(Ww(t,a),n,a+"",t,e,s):void 0;o===void 0&&(o=n),Bw(t,a,o)}},W6)}function J6(t){return t}function pve(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}var bC=Math.max;function hve(t,e,i){return e=bC(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,n=bC(r.length-e,0),a=Array(n);++s<n;)a[s]=r[e+s];s=-1;for(var o=Array(e+1);++s<e;)o[s]=r[s];return o[e]=i(a),pve(t,this,o)}}function gve(t){return function(){return t}}var mve=cv?function(t,e){return cv(t,"toString",{configurable:!0,enumerable:!1,value:gve(e),writable:!0})}:J6,fve=800,vve=16,yve=Date.now;function bve(t){var e=0,i=0;return function(){var r=yve(),s=vve-(r-i);if(i=r,s>0){if(++e>=fve)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var wve=bve(mve);function _ve(t,e){return wve(hve(t,e,J6),t+"")}function Sve(t,e,i){if(!qc(i))return!1;var r=typeof e;return(r=="number"?TE(i)&&G6(e,i.length):r=="string"&&e in i)?by(i[e],t):!1}function Eve(t){return _ve(function(e,i){var r=-1,s=i.length,n=s>1?i[s-1]:void 0,a=s>2?i[2]:void 0;for(n=t.length>3&&typeof n=="function"?(s--,n):void 0,a&&Sve(i[0],i[1],a)&&(n=s<3?void 0:n,s=1),e=Object(e);++r<s;){var o=i[r];o&&t(e,o,r,n)}return e})}Eve(function(t,e,i){q6(t,e,i)});const wC={get:(t,e,i)=>(...r)=>{try{return Reflect.get(t,e,i).apply(t,r)}catch{return null}}};let _C;try{_C=new Proxy(localStorage,wC)}catch{_C=new Proxy({},wC)}function kve({authtoken:t}){const[e,i]=nne();return console.log(t),Q.useEffect(()=>{i({authToken:t,defaults:{audio:!1,video:!1}})},[]),Y.jsx(Kge,{meeting:e})}class Tve extends Q.Component{constructor(){super(),this.state={auth_token:"",auth_token2:"",meeting_id:""}}componentDidMount(){let e=Math.random().toString();console.log(typeof e);const r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic NWE5ZTdhNTEtNjEwNS00NGRjLThlZGEtN2U1OGFlOTA0OGUzOjdiOTc2ZGM2YTY2ZjY5ZWI1NWZi"},body:JSON.stringify({name:"You name",picture:"https://th.bing.com/th?id=OIP.OesLvyzDO6AvU_hYUAT4IAHaHa&w=250&h=250&c=8&rs=1&qlt=90&o=6&dpr=1.3&pid=3.1&rm=2",preset_name:"group_call_host",custom_participant_id:e})};fetch("https://api.dyte.io/v2/meetings/bbb88f5f-7300-4284-9ca9-4ba8f22ccdf8/participants",r).then(n=>n.json()).then(n=>{console.log(n),this.setState({auth_token:n.data.token}),console.log(this.state.auth_token),this.setState({meeting_id:n.data.id})}).catch(n=>console.error(n)),fetch("https://api.dyte.io/v2/meetings/bbb88f5f-7300-4284-9ca9-4ba8f22ccdf8/participants",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic NWE5ZTdhNTEtNjEwNS00NGRjLThlZGEtN2U1OGFlOTA0OGUzOjdiOTc2ZGM2YTY2ZjY5ZWI1NWZi"},body:'{"name":"Your Name","picture":"https://th.bing.com/th?id=OIP.OesLvyzDO6AvU_hYUAT4IAHaHa&w=250&h=250&c=8&rs=1&qlt=90&o=6&dpr=1.3&pid=3.1&rm=2","preset_name":"group_call_participant","custom_participant_id":"1"}'}).then(n=>n.json()).then(n=>{console.log(n),this.setState({auth_token2:n.data.token}),console.log(this.state.auth_token2)}).catch(n=>console.error(n))}render(){return Y.jsx(C8,{children:Y.jsx(S8,{children:Y.jsxs(Bu,{path:"/",element:Y.jsx(O8,{}),children:[Y.jsx(Bu,{index:!0,element:Y.jsx(U8,{})}),Y.jsx(Bu,{path:"videochat",element:Y.jsx(kve,{authtoken:this.state.auth_token})}),Y.jsx(Bu,{path:"*",element:Y.jsx(D8,{})})]})})})}}yb.createRoot(document.getElementById("root")).render(Y.jsx(vl.StrictMode,{children:Y.jsx(Tve,{})}))});export default xve();
